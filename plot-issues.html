<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>GitHub Issues &amp; PRs | Latent Scope</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="modulepreload" href="./_npm/@duckdb/duckdb-wasm@1.28.0/_esm.js">
<link rel="modulepreload" href="./_import/components/scatter.8e757dc8.js">
<link rel="modulepreload" href="./_npm/regl-scatterplot@1.8.5/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/apache-arrow@16.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/parquet-wasm@0.6.0/_esm.js">
<link rel="modulepreload" href="./_observablehq/stdlib/duckdb.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/_esm.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="./_npm/pub-sub-es@2.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/regl@2.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="./_npm/tslib@2.6.2/_esm.js">
<link rel="modulepreload" href="./_npm/flatbuffers@23.5.26/_esm.js">
<script type="module">

import {define} from "./_observablehq/client.js";
import {registerFile} from "./_observablehq/stdlib.js";

registerFile("./data/plot-issues/input.parquet", {"name":"./data/plot-issues/input.parquet","path":"./_file/data/plot-issues/input.e0f83d2a.parquet","lastModified":1714593641897});
registerFile("./data/plot-issues/scopes-001.parquet", {"name":"./data/plot-issues/scopes-001.parquet","path":"./_file/data/plot-issues/scopes-001.4e91141e.parquet","lastModified":1714593641898});

define({id: "b56a2c7c", inline: true, inputs: ["resize","scatter","data","canvas","display"], body: async (resize,scatter,data,canvas,display) => {
display(await(
resize((width) => scatter(data.toArray(), { 
    canvas, 
    width, 
    height: 500, 
    color: (d) => d.cluster 
    //color: (d) => d.raw_cluster
  }))
))
}});

define({id: "46313d53", inline: true, inputs: ["data","display"], body: async (data,display) => {
display(await(
data.toArray().length
))
}});

define({id: "14be7f3c", inline: true, inputs: ["display","selected"], body: (display,selected) => {
display(selected.length)
}});

define({id: "b6999918", inline: true, inputs: ["selected","display"], body: async (selected,display) => {
display(await(
selected.length == 1 ? "hovered" : "selected"
))
}});

define({id: "c4a24530", inline: true, inputs: ["selected","display"], body: async (selected,display) => {
display(await(
!selected.length ? "Hold shift + drag to select multiple points.":""
))
}});

define({id: "ca638f0b", inline: true, inputs: ["selected","Inputs","canvas","display"], body: async (selected,Inputs,canvas,display) => {
display(await(
        selected.length > 1 ? Inputs.button("Deselect", {
          value: null, 
          reduce: () => canvas.scatter.select([])
        }) : ""
    
))
}});

define({id: "87615f11", inline: true, inputs: ["selected","Inputs","tableData","htl","display"], body: async (selected,Inputs,tableData,htl,display) => {
display(await(
selected.length == 1 ? Inputs.table([tableData[selected[0]]], { 
      columns: [
        "title", "body",
        "state",
        "created_at",
        "closed_at",
        "label", 
        "cluster"
      ],
      width: {
        "title": 250,
        "state": 40,
        "label": 250,
        "cluster": 40
      },
      rows: 1 
    }) : htl.html`<div style="height:43px"></div>`
  
))
}});

define({id: "0d4fc4a7", inline: true, inputs: ["table","display"], body: async (table,display) => {
display(await(
table
))
}});

define({id: "475e24c1", inputs: ["view","canvas"], outputs: ["selected"], body: (view,canvas) => {
const selected = view(canvas)
return {selected};
}});

define({id: "c48adcf3", outputs: ["canvas"], body: () => {
// TODO: this recreates the canvas
const canvas = document.createElement("canvas")
canvas.value = []
return {canvas};
}});

define({id: "faa6bfd0", inputs: ["Inputs","tableData"], outputs: ["table"], body: (Inputs,tableData) => {
const table = Inputs.table(tableData, { 
      columns: [
        "title", "body",
        "state",
        "created_at",
        "closed_at",
        "label", 
        "cluster"
      ],
      width: {
        "title": 250,
        "state": 40,
        "label": 250,
        "cluster": 40
      },
      rows: 25
    })
return {table};
}});

define({id: "667d1db1", inputs: ["view","table"], outputs: ["chosen"], body: (view,table) => {
const chosen = view(table)
return {chosen};
}});

define({id: "28b7ce7d", inputs: ["selected","chosen","tableData"], outputs: ["indices"], body: (selected,chosen,tableData) => {
// indices of the rows selected from the table so we can highlight them on the map
let indices = []
if(!selected.length && (chosen.length < tableData.length)) {
  indices = chosen.map(c => tableData.indexOf(c))
}
return {indices};
}});

define({id: "0aa84107", inputs: ["indices","canvas"], body: (indices,canvas) => {
// highlight and zoom to points chosen on the table
if(indices.length && canvas.scatter) {
  canvas.scatter.select(indices, { preventEvent: true })
  // canvas.scatter.zoomToPoints(indices, { padding: 0.1  })
} else {
  // can't undo it because this updates everytime scatter zooms for some reason
  // canvas.scatter.zoomToOrigin()
}
}});

define({id: "87812cc5", inputs: ["data","selected"], outputs: ["tableData"], body: (data,selected) => {
let tableData = data.toArray()
if(selected.length > 1) {
  tableData = []
  const da = data.toArray()
  selected.forEach(i => tableData.push(da[i]))
}
return {tableData};
}});

define({id: "91f87652", outputs: ["duckdb"], body: async () => {
const duckdb = await import("./_npm/@duckdb/duckdb-wasm@1.28.0/_esm.js");

return {duckdb};
}});

define({id: "54bf3609", inputs: ["DuckDBClient","FileAttachment"], outputs: ["db"], body: (DuckDBClient,FileAttachment) => {
const db = DuckDBClient.of({
  input: FileAttachment("./data/plot-issues/input.parquet"),
  scope: FileAttachment("./data/plot-issues/scopes-001.parquet")
});
return {db};
}});

define({id: "7dd34b16", inputs: ["db"], outputs: ["data"], body: (db) => {
// const rows = db.sql`SELECT * FROM input`
// const scope = db.sql`SELECT * FROM scope`
const data = db.sql`
  WITH input_with_row_number AS (
    SELECT *, ROW_NUMBER() OVER () AS rn FROM input
  ),
  scope_with_row_number AS (
    SELECT *, ROW_NUMBER() OVER () AS rn FROM scope
  )
  SELECT input_with_row_number.*, scope_with_row_number.*
  FROM input_with_row_number
  JOIN scope_with_row_number ON input_with_row_number.rn = scope_with_row_number.rn
`
return {data};
}});

define({id: "0e0057e1", outputs: ["scatter"], body: async () => {
const {scatter} = await import("./_import/components/scatter.8e757dc8.js");

return {scatter};
}});

</script>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">Latent Scope</a></li>
  </ol>
  <ol>
    <section>
      <summary>Guides</summary>
      <ol>
    <li class="observablehq-link"><a href="./install-and-config">Install &amp; Configure</a></li>
    <li class="observablehq-link"><a href="./your-first-scope">Your First Scope</a></li>
    <li class="observablehq-link"><a href="./explore-and-curate">Explore and Curate</a></li>
    <li class="observablehq-link"><a href="./exporting-data">Exporting data</a></li>
      </ol>
    </section>
    <section class="observablehq-section-active">
      <summary>Example Analysis</summary>
      <ol>
    <li class="observablehq-link observablehq-link-active"><a href="./plot-issues">GitHub Issues &amp; PRs</a></li>
    <li class="observablehq-link"><a href="./us-federal-laws">US Federal Laws</a></li>
      </ol>
    </section>
  </ol>
</nav>
<script>{Object.assign(document.createElement("a"),{href:""}).password&&location.replace(location.href);const e=document.querySelector("#observablehq-sidebar"),t=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?t.checked=r==="true":t.indeterminate=!0;for(const o of document.querySelectorAll("#observablehq-sidebar summary")){const s=o.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${o.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<aside id="observablehq-toc" data-selector="h1:not(:first-of-type), h2:first-child, :not(h1) + h2">
<nav>
</nav>
</aside>
<div id="observablehq-center">
<header id="observablehq-header">
<style>

  #observablehq-header a[href] {
    color: inherit;
  }
  
  #observablehq-header a[target="_blank"] {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    text-decoration: none;
  }
  
  #observablehq-header a[target="_blank"]:hover span {
    text-decoration: underline;
  }
  
  #observablehq-header a[target="_blank"]::after {
    content: "\2197";
  }
  
  #observablehq-header a[target="_blank"]:not(:hover, :focus)::after {
    // color: var(--theme-foreground-muted);
  }
  
  @container not (min-width: 640px) {
    .hide-if-small {
      display: none;
    }
  }
  
  .pageshot {
    width: 60%;
  }
  .screenshot {
    width: 55%;
    margin: 0 24px;
    box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.3);
    margin-bottom: 16px;
  }
  
  </style>
  <div style="display: flex; align-items: center; gap: 0.5rem; height: 2.2rem; margin: -1.5rem -2rem 2rem -2rem; padding: 0.5rem 2rem; border-bottom: solid 1px var(--theme-foreground-faintest); font: 500 16px var(--sans-serif);">
    <div style="display: flex; flex-grow: 1; justify-content: space-between; align-items: baseline;">
      <a href="./">
        Latent Scope
      </a>
      <span style="display: flex; align-items: baseline; gap: 0.5rem; font-size: 14px;">
        <a target="_blank" href="https://github.com/enjalot/latent-scope" rel="noopener noreferrer">GitHub</a>
        <a target="_blank" href="https://pypi.org/project/latentscope/" rel="noopener noreferrer">Python Module</a>
        <a target="_blank" href="https://discord.gg/x7NvpnM4pY" rel="noopener noreferrer">Discord</a>
        
        <a target="_blank" href="https://github.com/enjalot/latent-scope-observable-examples" rel="noopener noreferrer">Examples Source</a>
      </span>
    </div>
  </div>
</header>
<main id="observablehq-main" class="observablehq">
<style>
</style>
<h1>Latent Scope: Plot Issues &amp; Pull Requests</h1>
<h2><a href="https://osf.io/mrghc/?view_only" target="_blank" rel="noopener noreferrer">Source data</a>. Generated with <a href="https://github.com/enjalot/latent-scope" target="_blank" rel="noopener noreferrer">Latent Scope</a></h2>
<div style="border: 1px solid gray;">
  <span id="cell-b56a2c7c" class="observablehq--loading"></span>
</div>
<div>
  <span id="cell-46313d53" class="observablehq--loading"></span> points. 
  <span id="cell-14be7f3c" class="observablehq--loading"></span> points <span id="cell-b6999918" class="observablehq--loading"></span>. <span id="cell-c4a24530" class="observablehq--loading"></span>
  <div style="display:inline-block">
    <span id="cell-ca638f0b" class="observablehq--loading"></span>
  </div>
  <span id="cell-87615f11" class="observablehq--loading"></span>
</div>
<div>
<span id="cell-0d4fc4a7" class="observablehq--loading"></span>
</div>
<div id="cell-475e24c1" class="observablehq observablehq--block"></div>
<div id="cell-c48adcf3" class="observablehq observablehq--block"></div>
<div id="cell-faa6bfd0" class="observablehq observablehq--block"></div>
<div id="cell-667d1db1" class="observablehq observablehq--block"></div>
<div id="cell-28b7ce7d" class="observablehq observablehq--block"></div>
<div id="cell-0aa84107" class="observablehq observablehq--block"></div>
<div id="cell-87812cc5" class="observablehq observablehq--block"></div>
<div id="cell-91f87652" class="observablehq observablehq--block"></div>
<div id="cell-54bf3609" class="observablehq observablehq--block"></div>
<div id="cell-7dd34b16" class="observablehq observablehq--block"></div>
<div id="cell-0e0057e1" class="observablehq observablehq--block"></div>
</main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./exporting-data"><span>Exporting data</span></a><a rel="next" href="./us-federal-laws"><span>US Federal Laws</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-05-01T16:21:49">May 1, 2024</a>.</div>
</footer>
</div>
