function OS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $1={exports:{}},Zd={},G1={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),kS=Symbol.for("react.portal"),NS=Symbol.for("react.fragment"),IS=Symbol.for("react.strict_mode"),DS=Symbol.for("react.profiler"),MS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),BS=Symbol.for("react.suspense"),$S=Symbol.for("react.memo"),GS=Symbol.for("react.lazy"),jg=Symbol.iterator;function zS(e){return e===null||typeof e!="object"?null:(e=jg&&e[jg]||e["@@iterator"],typeof e=="function"?e:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,V1={};function Jl(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}Jl.prototype.isReactComponent={};Jl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function H1(){}H1.prototype=Jl.prototype;function B0(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}var $0=B0.prototype=new H1;$0.constructor=B0;U1($0,Jl.prototype);$0.isPureReactComponent=!0;var Bg=Array.isArray,W1=Object.prototype.hasOwnProperty,G0={current:null},X1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)W1.call(t,r)&&!X1.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qu,type:e,key:a,ref:o,props:i,_owner:G0.current}}function US(e,t){return{$$typeof:Qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function z0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qu}function VS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $g=/\/+/g;function Fh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?VS(""+e.key):t.toString(36)}function Zf(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qu:case kS:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Fh(o,0):r,Bg(i)?(n="",e!=null&&(n=e.replace($g,"$&/")+"/"),Zf(i,t,n,"",function(f){return f})):i!=null&&(z0(i)&&(i=US(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($g,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Bg(e))for(var l=0;l<e.length;l++){a=e[l];var u=r+Fh(a,l);o+=Zf(a,t,n,u,i)}else if(u=zS(e),typeof u=="function")for(e=u.call(e),l=0;!(a=e.next()).done;)a=a.value,u=r+Fh(a,l++),o+=Zf(a,t,n,u,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wf(e,t,n){if(e==null)return e;var r=[],i=0;return Zf(e,r,"","",function(a){return t.call(n,a,i++)}),r}function HS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sr={current:null},Jf={transition:null},WS={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:Jf,ReactCurrentOwner:G0};Gt.Children={map:wf,forEach:function(e,t,n){wf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wf(e,function(){t++}),t},toArray:function(e){return wf(e,function(t){return t})||[]},only:function(e){if(!z0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=Jl;Gt.Fragment=NS;Gt.Profiler=DS;Gt.PureComponent=B0;Gt.StrictMode=IS;Gt.Suspense=BS;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=U1({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=G0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)W1.call(t,u)&&!X1.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Qu,type:e.type,key:i,ref:a,props:r,_owner:o}};Gt.createContext=function(e){return e={$$typeof:FS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MS,_context:e},e.Consumer=e};Gt.createElement=Y1;Gt.createFactory=function(e){var t=Y1.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:jS,render:e}};Gt.isValidElement=z0;Gt.lazy=function(e){return{$$typeof:GS,_payload:{_status:-1,_result:e},_init:HS}};Gt.memo=function(e,t){return{$$typeof:$S,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=Jf.transition;Jf.transition={};try{e()}finally{Jf.transition=t}};Gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Gt.useCallback=function(e,t){return sr.current.useCallback(e,t)};Gt.useContext=function(e){return sr.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return sr.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return sr.current.useEffect(e,t)};Gt.useId=function(){return sr.current.useId()};Gt.useImperativeHandle=function(e,t,n){return sr.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return sr.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return sr.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return sr.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return sr.current.useReducer(e,t,n)};Gt.useRef=function(e){return sr.current.useRef(e)};Gt.useState=function(e){return sr.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return sr.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return sr.current.useTransition()};Gt.version="18.2.0";G1.exports=Gt;var j=G1.exports;const Q1=j0(j),XS=OS({__proto__:null,default:Q1},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=j,QS=Symbol.for("react.element"),KS=Symbol.for("react.fragment"),qS=Object.prototype.hasOwnProperty,ZS=YS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JS={key:!0,ref:!0,__self:!0,__source:!0};function K1(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)qS.call(t,r)&&!JS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:QS,type:e,key:a,ref:o,props:i,_owner:ZS.current}}Zd.Fragment=KS;Zd.jsx=K1;Zd.jsxs=K1;$1.exports=Zd;var O=$1.exports,kp={},q1={exports:{}},Ir={},Z1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,We){var Le=pe.length;pe.push(We);e:for(;0<Le;){var Ee=Le-1>>>1,$e=pe[Ee];if(0<i($e,We))pe[Ee]=We,pe[Le]=$e,Le=Ee;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var We=pe[0],Le=pe.pop();if(Le!==We){pe[0]=Le;e:for(var Ee=0,$e=pe.length,lt=$e>>>1;Ee<lt;){var xt=2*(Ee+1)-1,Wt=pe[xt],Yt=xt+1,Qt=pe[Yt];if(0>i(Wt,Le))Yt<$e&&0>i(Qt,Wt)?(pe[Ee]=Qt,pe[Yt]=Le,Ee=Yt):(pe[Ee]=Wt,pe[xt]=Le,Ee=xt);else if(Yt<$e&&0>i(Qt,Le))pe[Ee]=Qt,pe[Yt]=Le,Ee=Yt;else break e}}return We}function i(pe,We){var Le=pe.sortIndex-We.sortIndex;return Le!==0?Le:pe.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,d=3,w=!1,x=!1,L=!1,I=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(pe){for(var We=n(f);We!==null;){if(We.callback===null)r(f);else if(We.startTime<=pe)r(f),We.sortIndex=We.expirationTime,t(u,We);else break;We=n(f)}}function H(pe){if(L=!1,C(pe),!x)if(n(u)!==null)x=!0,mt(q);else{var We=n(f);We!==null&&ht(H,We.startTime-pe)}}function q(pe,We){x=!1,L&&(L=!1,v(se),se=-1),w=!0;var Le=d;try{for(C(We),h=n(u);h!==null&&(!(h.expirationTime>We)||pe&&!Se());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,d=h.priorityLevel;var $e=Ee(h.expirationTime<=We);We=e.unstable_now(),typeof $e=="function"?h.callback=$e:h===n(u)&&r(u),C(We)}else r(u);h=n(u)}if(h!==null)var lt=!0;else{var xt=n(f);xt!==null&&ht(H,xt.startTime-We),lt=!1}return lt}finally{h=null,d=Le,w=!1}}var ie=!1,we=null,se=-1,at=5,Ve=-1;function Se(){return!(e.unstable_now()-Ve<at)}function Ke(){if(we!==null){var pe=e.unstable_now();Ve=pe;var We=!0;try{We=we(!0,pe)}finally{We?Qe():(ie=!1,we=null)}}else ie=!1}var Qe;if(typeof b=="function")Qe=function(){b(Ke)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Pt=ze.port2;ze.port1.onmessage=Ke,Qe=function(){Pt.postMessage(null)}}else Qe=function(){I(Ke,0)};function mt(pe){we=pe,ie||(ie=!0,Qe())}function ht(pe,We){se=I(function(){pe(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,mt(q))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(pe){switch(d){case 1:case 2:case 3:var We=3;break;default:We=d}var Le=d;d=We;try{return pe()}finally{d=Le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,We){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Le=d;d=pe;try{return We()}finally{d=Le}},e.unstable_scheduleCallback=function(pe,We,Le){var Ee=e.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ee+Le:Ee):Le=Ee,pe){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Le+$e,pe={id:p++,callback:We,priorityLevel:pe,startTime:Le,expirationTime:$e,sortIndex:-1},Le>Ee?(pe.sortIndex=Le,t(f,pe),n(u)===null&&pe===n(f)&&(L?(v(se),se=-1):L=!0,ht(H,Le-Ee))):(pe.sortIndex=$e,t(u,pe),x||w||(x=!0,mt(q))),pe},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(pe){var We=d;return function(){var Le=d;d=We;try{return pe.apply(this,arguments)}finally{d=Le}}}})(J1);Z1.exports=J1;var ew=Z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=j,Nr=ew;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tx=new Set,Au={};function Fo(e,t){Vl(e,t),Vl(e+"Capture",t)}function Vl(e,t){for(Au[e]=t,e=0;e<t.length;e++)tx.add(t[e])}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Np=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},zg={};function nw(e){return Np.call(zg,e)?!0:Np.call(Gg,e)?!1:tw.test(e)?zg[e]=!0:(Gg[e]=!0,!1)}function rw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iw(e,t,n,r){if(t===null||typeof t>"u"||rw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ur(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qn[e]=new ur(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qn[t]=new ur(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qn[e]=new ur(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qn[e]=new ur(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qn[e]=new ur(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qn[e]=new ur(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qn[e]=new ur(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qn[e]=new ur(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qn[e]=new ur(e,5,!1,e.toLowerCase(),null,!1,!1)});var U0=/[\-:]([a-z])/g;function V0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(U0,V0);qn[t]=new ur(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(U0,V0);qn[t]=new ur(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(U0,V0);qn[t]=new ur(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qn[e]=new ur(e,1,!1,e.toLowerCase(),null,!1,!1)});qn.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qn[e]=new ur(e,1,!1,e.toLowerCase(),null,!0,!0)});function H0(e,t,n,r){var i=qn.hasOwnProperty(t)?qn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iw(t,n,i,r)&&(n=null),r||i===null?nw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ea=ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tf=Symbol.for("react.element"),wl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),X0=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Mp=Symbol.for("react.suspense_list"),Y0=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),ix=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var xn=Object.assign,jh;function du(e){if(jh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jh=t&&t[1]||""}return`
`+jh+e}var Bh=!1;function $h(e,t){if(!e||Bh)return"";Bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Bh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?du(e):""}function aw(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=$h(e.type,!1),e;case 11:return e=$h(e.type.render,!1),e;case 1:return e=$h(e.type,!0),e;default:return""}}function Fp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tl:return"Fragment";case wl:return"Portal";case Ip:return"Profiler";case W0:return"StrictMode";case Dp:return"Suspense";case Mp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rx:return(e.displayName||"Context")+".Consumer";case nx:return(e._context.displayName||"Context")+".Provider";case X0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y0:return t=e.displayName||null,t!==null?t:Fp(e.type)||"Memo";case ba:t=e._payload,e=e._init;try{return Fp(e(t))}catch{}}return null}function ow(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fp(t);case 8:return t===W0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ga(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ax(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lw(e){var t=ax(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bf(e){e._valueTracker||(e._valueTracker=lw(e))}function ox(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ax(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function md(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jp(e,t){var n=t.checked;return xn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ga(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lx(e,t){t=t.checked,t!=null&&H0(e,"checked",t,!1)}function Bp(e,t){lx(e,t);var n=Ga(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$p(e,t.type,n):t.hasOwnProperty("defaultValue")&&$p(e,t.type,Ga(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $p(e,t,n){(t!=="number"||md(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mu=Array.isArray;function Fl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ga(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Gp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return xn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(mu(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ga(n)}}function sx(e,t){var n=Ga(t.value),r=Ga(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ux(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Af,cx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Af=Af||document.createElement("div"),Af.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Af.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sw=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(e){sw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gu[t]=gu[e]})});function fx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gu.hasOwnProperty(e)&&gu[e]?(""+t).trim():t+"px"}function dx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var uw=xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(e,t){if(t){if(uw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function Vp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function Q0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wp=null,jl=null,Bl=null;function Yg(e){if(e=Zu(e)){if(typeof Wp!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=rm(t),Wp(e.stateNode,e.type,t))}}function mx(e){jl?Bl?Bl.push(e):Bl=[e]:jl=e}function hx(){if(jl){var e=jl,t=Bl;if(Bl=jl=null,Yg(e),t)for(e=0;e<t.length;e++)Yg(t[e])}}function px(e,t){return e(t)}function vx(){}var Gh=!1;function gx(e,t,n){if(Gh)return e(t,n);Gh=!0;try{return px(e,t,n)}finally{Gh=!1,(jl!==null||Bl!==null)&&(vx(),hx())}}function Lu(e,t){var n=e.stateNode;if(n===null)return null;var r=rm(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var Xp=!1;if(Ki)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Xp=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Xp=!1}function cw(e,t,n,r,i,a,o,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var yu=!1,hd=null,pd=!1,Yp=null,fw={onError:function(e){yu=!0,hd=e}};function dw(e,t,n,r,i,a,o,l,u){yu=!1,hd=null,cw.apply(fw,arguments)}function mw(e,t,n,r,i,a,o,l,u){if(dw.apply(this,arguments),yu){if(yu){var f=hd;yu=!1,hd=null}else throw Error(ke(198));pd||(pd=!0,Yp=f)}}function jo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qg(e){if(jo(e)!==e)throw Error(ke(188))}function hw(e){var t=e.alternate;if(!t){if(t=jo(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Qg(i),e;if(a===r)return Qg(i),t;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function xx(e){return e=hw(e),e!==null?Ex(e):null}function Ex(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ex(e);if(t!==null)return t;e=e.sibling}return null}var _x=Nr.unstable_scheduleCallback,Kg=Nr.unstable_cancelCallback,pw=Nr.unstable_shouldYield,vw=Nr.unstable_requestPaint,kn=Nr.unstable_now,gw=Nr.unstable_getCurrentPriorityLevel,K0=Nr.unstable_ImmediatePriority,Sx=Nr.unstable_UserBlockingPriority,vd=Nr.unstable_NormalPriority,yw=Nr.unstable_LowPriority,wx=Nr.unstable_IdlePriority,Jd=null,Ri=null;function xw(e){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(Jd,e,void 0,(e.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:Sw,Ew=Math.log,_w=Math.LN2;function Sw(e){return e>>>=0,e===0?32:31-(Ew(e)/_w|0)|0}var Cf=64,Lf=4194304;function hu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=hu(l):(a&=o,a!==0&&(r=hu(a)))}else o=n&~i,o!==0?r=hu(o):a!==0&&(r=hu(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-si(t),i=1<<n,r|=e[n],t&=~i;return r}function ww(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-si(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=ww(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}function Qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tx(){var e=Cf;return Cf<<=1,!(Cf&4194240)&&(Cf=64),e}function zh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ku(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-si(t),e[t]=n}function bw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-si(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function q0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-si(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qt=0;function bx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ax,Z0,Cx,Lx,Rx,Kp=!1,Rf=[],ka=null,Na=null,Ia=null,Ru=new Map,Ou=new Map,Ca=[],Aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(e,t){switch(e){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Ru.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(t.pointerId)}}function tu(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Zu(t),t!==null&&Z0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Cw(e,t,n,r,i){switch(t){case"focusin":return ka=tu(ka,e,t,n,r,i),!0;case"dragenter":return Na=tu(Na,e,t,n,r,i),!0;case"mouseover":return Ia=tu(Ia,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ru.set(a,tu(Ru.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ou.set(a,tu(Ou.get(a)||null,e,t,n,r,i)),!0}return!1}function Ox(e){var t=wo(e.target);if(t!==null){var n=jo(t);if(n!==null){if(t=n.tag,t===13){if(t=yx(n),t!==null){e.blockedOn=t,Rx(e.priority,function(){Cx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ed(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Hp=r,n.target.dispatchEvent(r),Hp=null}else return t=Zu(n),t!==null&&Z0(t),e.blockedOn=n,!1;t.shift()}return!0}function Zg(e,t,n){ed(e)&&n.delete(t)}function Lw(){Kp=!1,ka!==null&&ed(ka)&&(ka=null),Na!==null&&ed(Na)&&(Na=null),Ia!==null&&ed(Ia)&&(Ia=null),Ru.forEach(Zg),Ou.forEach(Zg)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Kp||(Kp=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,Lw)))}function Pu(e){function t(i){return nu(i,e)}if(0<Rf.length){nu(Rf[0],e);for(var n=1;n<Rf.length;n++){var r=Rf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ka!==null&&nu(ka,e),Na!==null&&nu(Na,e),Ia!==null&&nu(Ia,e),Ru.forEach(t),Ou.forEach(t),n=0;n<Ca.length;n++)r=Ca[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ca.length&&(n=Ca[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&Ca.shift()}var $l=ea.ReactCurrentBatchConfig,yd=!0;function Rw(e,t,n,r){var i=qt,a=$l.transition;$l.transition=null;try{qt=1,J0(e,t,n,r)}finally{qt=i,$l.transition=a}}function Ow(e,t,n,r){var i=qt,a=$l.transition;$l.transition=null;try{qt=4,J0(e,t,n,r)}finally{qt=i,$l.transition=a}}function J0(e,t,n,r){if(yd){var i=qp(e,t,n,r);if(i===null)Zh(e,t,r,xd,n),qg(e,r);else if(Cw(i,e,t,n,r))r.stopPropagation();else if(qg(e,r),t&4&&-1<Aw.indexOf(e)){for(;i!==null;){var a=Zu(i);if(a!==null&&Ax(a),a=qp(e,t,n,r),a===null&&Zh(e,t,r,xd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Zh(e,t,r,null,n)}}var xd=null;function qp(e,t,n,r){if(xd=null,e=Q0(r),e=wo(e),e!==null)if(t=jo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xd=e,null}function Px(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gw()){case K0:return 1;case Sx:return 4;case vd:case yw:return 16;case wx:return 536870912;default:return 16}default:return 16}}var Ra=null,ev=null,td=null;function kx(){if(td)return td;var e,t=ev,n=t.length,r,i="value"in Ra?Ra.value:Ra.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return td=i.slice(e,1<r?1-r:void 0)}function nd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Of(){return!0}function Jg(){return!1}function Dr(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Of:Jg,this.isPropagationStopped=Jg,this}return xn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Of)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Of)},persist:function(){},isPersistent:Of}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tv=Dr(es),qu=xn({},es,{view:0,detail:0}),Pw=Dr(qu),Uh,Vh,ru,em=xn({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ru&&(ru&&e.type==="mousemove"?(Uh=e.screenX-ru.screenX,Vh=e.screenY-ru.screenY):Vh=Uh=0,ru=e),Uh)},movementY:function(e){return"movementY"in e?e.movementY:Vh}}),ey=Dr(em),kw=xn({},em,{dataTransfer:0}),Nw=Dr(kw),Iw=xn({},qu,{relatedTarget:0}),Hh=Dr(Iw),Dw=xn({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Mw=Dr(Dw),Fw=xn({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jw=Dr(Fw),Bw=xn({},es,{data:0}),ty=Dr(Bw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zw[e])?!!t[e]:!1}function nv(){return Uw}var Vw=xn({},qu,{key:function(e){if(e.key){var t=$w[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nv,charCode:function(e){return e.type==="keypress"?nd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hw=Dr(Vw),Ww=xn({},em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ny=Dr(Ww),Xw=xn({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nv}),Yw=Dr(Xw),Qw=xn({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kw=Dr(Qw),qw=xn({},em,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zw=Dr(qw),Jw=[9,13,27,32],rv=Ki&&"CompositionEvent"in window,xu=null;Ki&&"documentMode"in document&&(xu=document.documentMode);var eT=Ki&&"TextEvent"in window&&!xu,Nx=Ki&&(!rv||xu&&8<xu&&11>=xu),ry=" ",iy=!1;function Ix(e,t){switch(e){case"keyup":return Jw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bl=!1;function tT(e,t){switch(e){case"compositionend":return Dx(t);case"keypress":return t.which!==32?null:(iy=!0,ry);case"textInput":return e=t.data,e===ry&&iy?null:e;default:return null}}function nT(e,t){if(bl)return e==="compositionend"||!rv&&Ix(e,t)?(e=kx(),td=ev=Ra=null,bl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nx&&t.locale!=="ko"?null:t.data;default:return null}}var rT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rT[e.type]:t==="textarea"}function Mx(e,t,n,r){mx(r),t=Ed(t,"onChange"),0<t.length&&(n=new tv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eu=null,ku=null;function iT(e){Xx(e,0)}function tm(e){var t=Ll(e);if(ox(t))return e}function aT(e,t){if(e==="change")return t}var Fx=!1;if(Ki){var Wh;if(Ki){var Xh="oninput"in document;if(!Xh){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Xh=typeof oy.oninput=="function"}Wh=Xh}else Wh=!1;Fx=Wh&&(!document.documentMode||9<document.documentMode)}function ly(){Eu&&(Eu.detachEvent("onpropertychange",jx),ku=Eu=null)}function jx(e){if(e.propertyName==="value"&&tm(ku)){var t=[];Mx(t,ku,e,Q0(e)),gx(iT,t)}}function oT(e,t,n){e==="focusin"?(ly(),Eu=t,ku=n,Eu.attachEvent("onpropertychange",jx)):e==="focusout"&&ly()}function lT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tm(ku)}function sT(e,t){if(e==="click")return tm(t)}function uT(e,t){if(e==="input"||e==="change")return tm(t)}function cT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ci=typeof Object.is=="function"?Object.is:cT;function Nu(e,t){if(ci(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Np.call(t,i)||!ci(e[i],t[i]))return!1}return!0}function sy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uy(e,t){var n=sy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sy(n)}}function Bx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $x(){for(var e=window,t=md();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=md(e.document)}return t}function iv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fT(e){var t=$x(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bx(n.ownerDocument.documentElement,n)){if(r!==null&&iv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=uy(n,a);var o=uy(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dT=Ki&&"documentMode"in document&&11>=document.documentMode,Al=null,Zp=null,_u=null,Jp=!1;function cy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jp||Al==null||Al!==md(r)||(r=Al,"selectionStart"in r&&iv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&Nu(_u,r)||(_u=r,r=Ed(Zp,"onSelect"),0<r.length&&(t=new tv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Al)))}function Pf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cl={animationend:Pf("Animation","AnimationEnd"),animationiteration:Pf("Animation","AnimationIteration"),animationstart:Pf("Animation","AnimationStart"),transitionend:Pf("Transition","TransitionEnd")},Yh={},Gx={};Ki&&(Gx=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function nm(e){if(Yh[e])return Yh[e];if(!Cl[e])return e;var t=Cl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gx)return Yh[e]=t[n];return e}var zx=nm("animationend"),Ux=nm("animationiteration"),Vx=nm("animationstart"),Hx=nm("transitionend"),Wx=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){Wx.set(e,t),Fo(t,[e])}for(var Qh=0;Qh<fy.length;Qh++){var Kh=fy[Qh],mT=Kh.toLowerCase(),hT=Kh[0].toUpperCase()+Kh.slice(1);Ua(mT,"on"+hT)}Ua(zx,"onAnimationEnd");Ua(Ux,"onAnimationIteration");Ua(Vx,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(Hx,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);Fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function dy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mw(r,t,void 0,e),e.currentTarget=null}function Xx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;dy(i,l,f),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,f=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;dy(i,l,f),a=u}}}if(pd)throw e=Yp,pd=!1,Yp=null,e}function un(e,t){var n=t[i0];n===void 0&&(n=t[i0]=new Set);var r=e+"__bubble";n.has(r)||(Yx(t,e,2,!1),n.add(r))}function qh(e,t,n){var r=0;t&&(r|=4),Yx(n,e,r,t)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[kf]){e[kf]=!0,tx.forEach(function(n){n!=="selectionchange"&&(pT.has(n)||qh(n,!1,e),qh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kf]||(t[kf]=!0,qh("selectionchange",!1,t))}}function Yx(e,t,n,r){switch(Px(t)){case 1:var i=Rw;break;case 4:i=Ow;break;default:i=J0}n=i.bind(null,t,n,e),i=void 0,!Xp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zh(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wo(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}gx(function(){var f=a,p=Q0(n),h=[];e:{var d=Wx.get(e);if(d!==void 0){var w=tv,x=e;switch(e){case"keypress":if(nd(n)===0)break e;case"keydown":case"keyup":w=Hw;break;case"focusin":x="focus",w=Hh;break;case"focusout":x="blur",w=Hh;break;case"beforeblur":case"afterblur":w=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Yw;break;case zx:case Ux:case Vx:w=Mw;break;case Hx:w=Kw;break;case"scroll":w=Pw;break;case"wheel":w=Zw;break;case"copy":case"cut":case"paste":w=jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ny}var L=(t&4)!==0,I=!L&&e==="scroll",v=L?d!==null?d+"Capture":null:d;L=[];for(var b=f,C;b!==null;){C=b;var H=C.stateNode;if(C.tag===5&&H!==null&&(C=H,v!==null&&(H=Lu(b,v),H!=null&&L.push(Du(b,H,C)))),I)break;b=b.return}0<L.length&&(d=new w(d,x,null,n,p),h.push({event:d,listeners:L}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&n!==Hp&&(x=n.relatedTarget||n.fromElement)&&(wo(x)||x[qi]))break e;if((w||d)&&(d=p.window===p?p:(d=p.ownerDocument)?d.defaultView||d.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=f,x=x?wo(x):null,x!==null&&(I=jo(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=f),w!==x)){if(L=ey,H="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(L=ny,H="onPointerLeave",v="onPointerEnter",b="pointer"),I=w==null?d:Ll(w),C=x==null?d:Ll(x),d=new L(H,b+"leave",w,n,p),d.target=I,d.relatedTarget=C,H=null,wo(p)===f&&(L=new L(v,b+"enter",x,n,p),L.target=C,L.relatedTarget=I,H=L),I=H,w&&x)t:{for(L=w,v=x,b=0,C=L;C;C=El(C))b++;for(C=0,H=v;H;H=El(H))C++;for(;0<b-C;)L=El(L),b--;for(;0<C-b;)v=El(v),C--;for(;b--;){if(L===v||v!==null&&L===v.alternate)break t;L=El(L),v=El(v)}L=null}else L=null;w!==null&&my(h,d,w,L,!1),x!==null&&I!==null&&my(h,I,x,L,!0)}}e:{if(d=f?Ll(f):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var q=aT;else if(ay(d))if(Fx)q=uT;else{q=lT;var ie=oT}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(q=sT);if(q&&(q=q(e,f))){Mx(h,q,n,p);break e}ie&&ie(e,d,f),e==="focusout"&&(ie=d._wrapperState)&&ie.controlled&&d.type==="number"&&$p(d,"number",d.value)}switch(ie=f?Ll(f):window,e){case"focusin":(ay(ie)||ie.contentEditable==="true")&&(Al=ie,Zp=f,_u=null);break;case"focusout":_u=Zp=Al=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,cy(h,n,p);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":cy(h,n,p)}var we;if(rv)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else bl?Ix(e,n)&&(se="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(se="onCompositionStart");se&&(Nx&&n.locale!=="ko"&&(bl||se!=="onCompositionStart"?se==="onCompositionEnd"&&bl&&(we=kx()):(Ra=p,ev="value"in Ra?Ra.value:Ra.textContent,bl=!0)),ie=Ed(f,se),0<ie.length&&(se=new ty(se,e,null,n,p),h.push({event:se,listeners:ie}),we?se.data=we:(we=Dx(n),we!==null&&(se.data=we)))),(we=eT?tT(e,n):nT(e,n))&&(f=Ed(f,"onBeforeInput"),0<f.length&&(p=new ty("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:f}),p.data=we))}Xx(h,t)})}function Du(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ed(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Lu(e,n),a!=null&&r.unshift(Du(e,a,i)),a=Lu(e,t),a!=null&&r.push(Du(e,a,i))),e=e.return}return r}function El(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function my(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Lu(n,a),u!=null&&o.unshift(Du(n,u,l))):i||(u=Lu(n,a),u!=null&&o.push(Du(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var vT=/\r\n?/g,gT=/\u0000|\uFFFD/g;function hy(e){return(typeof e=="string"?e:""+e).replace(vT,`
`).replace(gT,"")}function Nf(e,t,n){if(t=hy(t),hy(e)!==t&&n)throw Error(ke(425))}function _d(){}var e0=null,t0=null;function n0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var r0=typeof setTimeout=="function"?setTimeout:void 0,yT=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(e){return py.resolve(null).then(e).catch(ET)}:r0;function ET(e){setTimeout(function(){throw e})}function Jh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Pu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(t)}function Da(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ts=Math.random().toString(36).slice(2),Li="__reactFiber$"+ts,Mu="__reactProps$"+ts,qi="__reactContainer$"+ts,i0="__reactEvents$"+ts,_T="__reactListeners$"+ts,ST="__reactHandles$"+ts;function wo(e){var t=e[Li];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qi]||n[Li]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vy(e);e!==null;){if(n=e[Li])return n;e=vy(e)}return t}e=n,n=e.parentNode}return null}function Zu(e){return e=e[Li]||e[qi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ll(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function rm(e){return e[Mu]||null}var a0=[],Rl=-1;function Va(e){return{current:e}}function cn(e){0>Rl||(e.current=a0[Rl],a0[Rl]=null,Rl--)}function on(e,t){Rl++,a0[Rl]=e.current,e.current=t}var za={},tr=Va(za),xr=Va(!1),Po=za;function Hl(e,t){var n=e.type.contextTypes;if(!n)return za;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Er(e){return e=e.childContextTypes,e!=null}function Sd(){cn(xr),cn(tr)}function gy(e,t,n){if(tr.current!==za)throw Error(ke(168));on(tr,t),on(xr,n)}function Qx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ke(108,ow(e)||"Unknown",i));return xn({},n,r)}function wd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||za,Po=tr.current,on(tr,e),on(xr,xr.current),!0}function yy(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=Qx(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,cn(xr),cn(tr),on(tr,e)):cn(xr),on(xr,n)}var Wi=null,im=!1,ep=!1;function Kx(e){Wi===null?Wi=[e]:Wi.push(e)}function wT(e){im=!0,Kx(e)}function Ha(){if(!ep&&Wi!==null){ep=!0;var e=0,t=qt;try{var n=Wi;for(qt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wi=null,im=!1}catch(i){throw Wi!==null&&(Wi=Wi.slice(e+1)),_x(K0,Ha),i}finally{qt=t,ep=!1}}return null}var Ol=[],Pl=0,Td=null,bd=0,Vr=[],Hr=0,ko=null,Xi=1,Yi="";function _o(e,t){Ol[Pl++]=bd,Ol[Pl++]=Td,Td=e,bd=t}function qx(e,t,n){Vr[Hr++]=Xi,Vr[Hr++]=Yi,Vr[Hr++]=ko,ko=e;var r=Xi;e=Yi;var i=32-si(r)-1;r&=~(1<<i),n+=1;var a=32-si(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-si(t)+i|n<<i|r,Yi=a+e}else Xi=1<<a|n<<i|r,Yi=e}function av(e){e.return!==null&&(_o(e,1),qx(e,1,0))}function ov(e){for(;e===Td;)Td=Ol[--Pl],Ol[Pl]=null,bd=Ol[--Pl],Ol[Pl]=null;for(;e===ko;)ko=Vr[--Hr],Vr[Hr]=null,Yi=Vr[--Hr],Vr[Hr]=null,Xi=Vr[--Hr],Vr[Hr]=null}var kr=null,Pr=null,fn=!1,oi=null;function Zx(e,t){var n=Wr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kr=e,Pr=Da(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kr=e,Pr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ko!==null?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kr=e,Pr=null,!0):!1;default:return!1}}function o0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function l0(e){if(fn){var t=Pr;if(t){var n=t;if(!xy(e,t)){if(o0(e))throw Error(ke(418));t=Da(n.nextSibling);var r=kr;t&&xy(e,t)?Zx(r,n):(e.flags=e.flags&-4097|2,fn=!1,kr=e)}}else{if(o0(e))throw Error(ke(418));e.flags=e.flags&-4097|2,fn=!1,kr=e}}}function Ey(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kr=e}function If(e){if(e!==kr)return!1;if(!fn)return Ey(e),fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!n0(e.type,e.memoizedProps)),t&&(t=Pr)){if(o0(e))throw Jx(),Error(ke(418));for(;t;)Zx(e,t),t=Da(t.nextSibling)}if(Ey(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pr=Da(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pr=null}}else Pr=kr?Da(e.stateNode.nextSibling):null;return!0}function Jx(){for(var e=Pr;e;)e=Da(e.nextSibling)}function Wl(){Pr=kr=null,fn=!1}function lv(e){oi===null?oi=[e]:oi.push(e)}var TT=ea.ReactCurrentBatchConfig;function ii(e,t){if(e&&e.defaultProps){t=xn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Ad=Va(null),Cd=null,kl=null,sv=null;function uv(){sv=kl=Cd=null}function cv(e){var t=Ad.current;cn(Ad),e._currentValue=t}function s0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gl(e,t){Cd=e,sv=kl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function Yr(e){var t=e._currentValue;if(sv!==e)if(e={context:e,memoizedValue:t,next:null},kl===null){if(Cd===null)throw Error(ke(308));kl=e,Cd.dependencies={lanes:0,firstContext:e}}else kl=kl.next=e;return t}var To=null;function fv(e){To===null?To=[e]:To.push(e)}function eE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,fv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Zi(e,r)}function Zi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Aa=!1;function dv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Zi(e,n)}return i=r.interleaved,i===null?(t.next=t,fv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Zi(e,n)}function rd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,q0(e,n)}}function _y(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ld(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,o===null?a=f:o.next=f,o=u;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=u))}if(a!==null){var h=i.baseState;o=0,p=f=u=null,l=a;do{var d=l.lane,w=l.eventTime;if((r&d)===d){p!==null&&(p=p.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,L=l;switch(d=t,w=n,L.tag){case 1:if(x=L.payload,typeof x=="function"){h=x.call(w,h,d);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=L.payload,d=typeof x=="function"?x.call(w,h,d):x,d==null)break e;h=xn({},h,d);break e;case 2:Aa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else w={eventTime:w,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=w,u=h):p=p.next=w,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(p===null&&(u=h),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Io|=o,e.lanes=o,e.memoizedState=h}}function Sy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var nE=new ex.Component().refs;function u0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:xn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var am={isMounted:function(e){return(e=e._reactInternals)?jo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lr(),i=ja(e),a=Qi(r,i);a.payload=t,n!=null&&(a.callback=n),t=Ma(e,a,i),t!==null&&(ui(t,e,i,r),rd(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lr(),i=ja(e),a=Qi(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ma(e,a,i),t!==null&&(ui(t,e,i,r),rd(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lr(),r=ja(e),i=Qi(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ma(e,i,r),t!==null&&(ui(t,e,r,n),rd(t,e,r))}};function wy(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Nu(n,r)||!Nu(i,a):!0}function rE(e,t,n){var r=!1,i=za,a=t.contextType;return typeof a=="object"&&a!==null?a=Yr(a):(i=Er(t)?Po:tr.current,r=t.contextTypes,a=(r=r!=null)?Hl(e,i):za),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=am,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ty(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&am.enqueueReplaceState(t,t.state,null)}function c0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=nE,dv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Yr(a):(a=Er(t)?Po:tr.current,i.context=Hl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(u0(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&am.enqueueReplaceState(i,i.state,null),Ld(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;l===nE&&(l=i.refs={}),o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function Df(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function by(e){var t=e._init;return t(e._payload)}function iE(e){function t(v,b){if(e){var C=v.deletions;C===null?(v.deletions=[b],v.flags|=16):C.push(b)}}function n(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Ba(v,b),v.index=0,v.sibling=null,v}function a(v,b,C){return v.index=C,e?(C=v.alternate,C!==null?(C=C.index,C<b?(v.flags|=2,b):C):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,C,H){return b===null||b.tag!==6?(b=lp(C,v.mode,H),b.return=v,b):(b=i(b,C),b.return=v,b)}function u(v,b,C,H){var q=C.type;return q===Tl?p(v,b,C.props.children,H,C.key):b!==null&&(b.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===ba&&by(q)===b.type)?(H=i(b,C.props),H.ref=iu(v,b,C),H.return=v,H):(H=ud(C.type,C.key,C.props,null,v.mode,H),H.ref=iu(v,b,C),H.return=v,H)}function f(v,b,C,H){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=sp(C,v.mode,H),b.return=v,b):(b=i(b,C.children||[]),b.return=v,b)}function p(v,b,C,H,q){return b===null||b.tag!==7?(b=Ro(C,v.mode,H,q),b.return=v,b):(b=i(b,C),b.return=v,b)}function h(v,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=lp(""+b,v.mode,C),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tf:return C=ud(b.type,b.key,b.props,null,v.mode,C),C.ref=iu(v,null,b),C.return=v,C;case wl:return b=sp(b,v.mode,C),b.return=v,b;case ba:var H=b._init;return h(v,H(b._payload),C)}if(mu(b)||Js(b))return b=Ro(b,v.mode,C,null),b.return=v,b;Df(v,b)}return null}function d(v,b,C,H){var q=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:l(v,b,""+C,H);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Tf:return C.key===q?u(v,b,C,H):null;case wl:return C.key===q?f(v,b,C,H):null;case ba:return q=C._init,d(v,b,q(C._payload),H)}if(mu(C)||Js(C))return q!==null?null:p(v,b,C,H,null);Df(v,C)}return null}function w(v,b,C,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return v=v.get(C)||null,l(b,v,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Tf:return v=v.get(H.key===null?C:H.key)||null,u(b,v,H,q);case wl:return v=v.get(H.key===null?C:H.key)||null,f(b,v,H,q);case ba:var ie=H._init;return w(v,b,C,ie(H._payload),q)}if(mu(H)||Js(H))return v=v.get(C)||null,p(b,v,H,q,null);Df(b,H)}return null}function x(v,b,C,H){for(var q=null,ie=null,we=b,se=b=0,at=null;we!==null&&se<C.length;se++){we.index>se?(at=we,we=null):at=we.sibling;var Ve=d(v,we,C[se],H);if(Ve===null){we===null&&(we=at);break}e&&we&&Ve.alternate===null&&t(v,we),b=a(Ve,b,se),ie===null?q=Ve:ie.sibling=Ve,ie=Ve,we=at}if(se===C.length)return n(v,we),fn&&_o(v,se),q;if(we===null){for(;se<C.length;se++)we=h(v,C[se],H),we!==null&&(b=a(we,b,se),ie===null?q=we:ie.sibling=we,ie=we);return fn&&_o(v,se),q}for(we=r(v,we);se<C.length;se++)at=w(we,v,se,C[se],H),at!==null&&(e&&at.alternate!==null&&we.delete(at.key===null?se:at.key),b=a(at,b,se),ie===null?q=at:ie.sibling=at,ie=at);return e&&we.forEach(function(Se){return t(v,Se)}),fn&&_o(v,se),q}function L(v,b,C,H){var q=Js(C);if(typeof q!="function")throw Error(ke(150));if(C=q.call(C),C==null)throw Error(ke(151));for(var ie=q=null,we=b,se=b=0,at=null,Ve=C.next();we!==null&&!Ve.done;se++,Ve=C.next()){we.index>se?(at=we,we=null):at=we.sibling;var Se=d(v,we,Ve.value,H);if(Se===null){we===null&&(we=at);break}e&&we&&Se.alternate===null&&t(v,we),b=a(Se,b,se),ie===null?q=Se:ie.sibling=Se,ie=Se,we=at}if(Ve.done)return n(v,we),fn&&_o(v,se),q;if(we===null){for(;!Ve.done;se++,Ve=C.next())Ve=h(v,Ve.value,H),Ve!==null&&(b=a(Ve,b,se),ie===null?q=Ve:ie.sibling=Ve,ie=Ve);return fn&&_o(v,se),q}for(we=r(v,we);!Ve.done;se++,Ve=C.next())Ve=w(we,v,se,Ve.value,H),Ve!==null&&(e&&Ve.alternate!==null&&we.delete(Ve.key===null?se:Ve.key),b=a(Ve,b,se),ie===null?q=Ve:ie.sibling=Ve,ie=Ve);return e&&we.forEach(function(Ke){return t(v,Ke)}),fn&&_o(v,se),q}function I(v,b,C,H){if(typeof C=="object"&&C!==null&&C.type===Tl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Tf:e:{for(var q=C.key,ie=b;ie!==null;){if(ie.key===q){if(q=C.type,q===Tl){if(ie.tag===7){n(v,ie.sibling),b=i(ie,C.props.children),b.return=v,v=b;break e}}else if(ie.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===ba&&by(q)===ie.type){n(v,ie.sibling),b=i(ie,C.props),b.ref=iu(v,ie,C),b.return=v,v=b;break e}n(v,ie);break}else t(v,ie);ie=ie.sibling}C.type===Tl?(b=Ro(C.props.children,v.mode,H,C.key),b.return=v,v=b):(H=ud(C.type,C.key,C.props,null,v.mode,H),H.ref=iu(v,b,C),H.return=v,v=H)}return o(v);case wl:e:{for(ie=C.key;b!==null;){if(b.key===ie)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){n(v,b.sibling),b=i(b,C.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else t(v,b);b=b.sibling}b=sp(C,v.mode,H),b.return=v,v=b}return o(v);case ba:return ie=C._init,I(v,b,ie(C._payload),H)}if(mu(C))return x(v,b,C,H);if(Js(C))return L(v,b,C,H);Df(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,C),b.return=v,v=b):(n(v,b),b=lp(C,v.mode,H),b.return=v,v=b),o(v)):n(v,b)}return I}var Xl=iE(!0),aE=iE(!1),Ju={},Oi=Va(Ju),Fu=Va(Ju),ju=Va(Ju);function bo(e){if(e===Ju)throw Error(ke(174));return e}function mv(e,t){switch(on(ju,t),on(Fu,e),on(Oi,Ju),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zp(t,e)}cn(Oi),on(Oi,t)}function Yl(){cn(Oi),cn(Fu),cn(ju)}function oE(e){bo(ju.current);var t=bo(Oi.current),n=zp(t,e.type);t!==n&&(on(Fu,e),on(Oi,n))}function hv(e){Fu.current===e&&(cn(Oi),cn(Fu))}var gn=Va(0);function Rd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tp=[];function pv(){for(var e=0;e<tp.length;e++)tp[e]._workInProgressVersionPrimary=null;tp.length=0}var id=ea.ReactCurrentDispatcher,np=ea.ReactCurrentBatchConfig,No=0,yn=null,$n=null,Hn=null,Od=!1,Su=!1,Bu=0,bT=0;function Zn(){throw Error(ke(321))}function vv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ci(e[n],t[n]))return!1;return!0}function gv(e,t,n,r,i,a){if(No=a,yn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,id.current=e===null||e.memoizedState===null?RT:OT,e=n(r,i),Su){a=0;do{if(Su=!1,Bu=0,25<=a)throw Error(ke(301));a+=1,Hn=$n=null,t.updateQueue=null,id.current=PT,e=n(r,i)}while(Su)}if(id.current=Pd,t=$n!==null&&$n.next!==null,No=0,Hn=$n=yn=null,Od=!1,t)throw Error(ke(300));return e}function yv(){var e=Bu!==0;return Bu=0,e}function Ai(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?yn.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function Qr(){if($n===null){var e=yn.alternate;e=e!==null?e.memoizedState:null}else e=$n.next;var t=Hn===null?yn.memoizedState:Hn.next;if(t!==null)Hn=t,$n=e;else{if(e===null)throw Error(ke(310));$n=e,e={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Hn===null?yn.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function $u(e,t){return typeof t=="function"?t(e):t}function rp(e){var t=Qr(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=$n,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,u=null,f=a;do{var p=f.lane;if((No&p)===p)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,yn.lanes|=p,Io|=p}f=f.next}while(f!==null&&f!==a);u===null?o=r:u.next=l,ci(r,t.memoizedState)||(gr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,yn.lanes|=a,Io|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ip(e){var t=Qr(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);ci(a,t.memoizedState)||(gr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function lE(){}function sE(e,t){var n=yn,r=Qr(),i=t(),a=!ci(r.memoizedState,i);if(a&&(r.memoizedState=i,gr=!0),r=r.queue,xv(fE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,Gu(9,cE.bind(null,n,r,i,t),void 0,null),Wn===null)throw Error(ke(349));No&30||uE(n,t,i)}return i}function uE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=yn.updateQueue,t===null?(t={lastEffect:null,stores:null},yn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cE(e,t,n,r){t.value=n,t.getSnapshot=r,dE(t)&&mE(e)}function fE(e,t,n){return n(function(){dE(t)&&mE(e)})}function dE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ci(e,n)}catch{return!0}}function mE(e){var t=Zi(e,1);t!==null&&ui(t,e,1,-1)}function Ay(e){var t=Ai();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:e},t.queue=e,e=e.dispatch=LT.bind(null,yn,e),[t.memoizedState,e]}function Gu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=yn.updateQueue,t===null?(t={lastEffect:null,stores:null},yn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hE(){return Qr().memoizedState}function ad(e,t,n,r){var i=Ai();yn.flags|=e,i.memoizedState=Gu(1|t,n,void 0,r===void 0?null:r)}function om(e,t,n,r){var i=Qr();r=r===void 0?null:r;var a=void 0;if($n!==null){var o=$n.memoizedState;if(a=o.destroy,r!==null&&vv(r,o.deps)){i.memoizedState=Gu(t,n,a,r);return}}yn.flags|=e,i.memoizedState=Gu(1|t,n,a,r)}function Cy(e,t){return ad(8390656,8,e,t)}function xv(e,t){return om(2048,8,e,t)}function pE(e,t){return om(4,2,e,t)}function vE(e,t){return om(4,4,e,t)}function gE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yE(e,t,n){return n=n!=null?n.concat([e]):null,om(4,4,gE.bind(null,t,e),n)}function Ev(){}function xE(e,t){var n=Qr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function EE(e,t){var n=Qr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _E(e,t,n){return No&21?(ci(n,t)||(n=Tx(),yn.lanes|=n,Io|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=n)}function AT(e,t){var n=qt;qt=n!==0&&4>n?n:4,e(!0);var r=np.transition;np.transition={};try{e(!1),t()}finally{qt=n,np.transition=r}}function SE(){return Qr().memoizedState}function CT(e,t,n){var r=ja(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wE(e))TE(t,n);else if(n=eE(e,t,n,r),n!==null){var i=lr();ui(n,e,r,i),bE(n,t,r)}}function LT(e,t,n){var r=ja(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wE(e))TE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ci(l,o)){var u=t.interleaved;u===null?(i.next=i,fv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=eE(e,t,i,r),n!==null&&(i=lr(),ui(n,e,r,i),bE(n,t,r))}}function wE(e){var t=e.alternate;return e===yn||t!==null&&t===yn}function TE(e,t){Su=Od=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,q0(e,n)}}var Pd={readContext:Yr,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},RT={readContext:Yr,useCallback:function(e,t){return Ai().memoizedState=[e,t===void 0?null:t],e},useContext:Yr,useEffect:Cy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ad(4194308,4,gE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ad(4194308,4,e,t)},useInsertionEffect:function(e,t){return ad(4,2,e,t)},useMemo:function(e,t){var n=Ai();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ai();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=CT.bind(null,yn,e),[r.memoizedState,e]},useRef:function(e){var t=Ai();return e={current:e},t.memoizedState=e},useState:Ay,useDebugValue:Ev,useDeferredValue:function(e){return Ai().memoizedState=e},useTransition:function(){var e=Ay(!1),t=e[0];return e=AT.bind(null,e[1]),Ai().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=yn,i=Ai();if(fn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=t(),Wn===null)throw Error(ke(349));No&30||uE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Cy(fE.bind(null,r,a,e),[e]),r.flags|=2048,Gu(9,cE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ai(),t=Wn.identifierPrefix;if(fn){var n=Yi,r=Xi;n=(r&~(1<<32-si(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OT={readContext:Yr,useCallback:xE,useContext:Yr,useEffect:xv,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:rp,useRef:hE,useState:function(){return rp($u)},useDebugValue:Ev,useDeferredValue:function(e){var t=Qr();return _E(t,$n.memoizedState,e)},useTransition:function(){var e=rp($u)[0],t=Qr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1},PT={readContext:Yr,useCallback:xE,useContext:Yr,useEffect:xv,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:ip,useRef:hE,useState:function(){return ip($u)},useDebugValue:Ev,useDeferredValue:function(e){var t=Qr();return $n===null?t.memoizedState=e:_E(t,$n.memoizedState,e)},useTransition:function(){var e=ip($u)[0],t=Qr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1};function Ql(e,t){try{var n="",r=t;do n+=aw(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function ap(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function f0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function AE(e,t,n){n=Qi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Nd||(Nd=!0,_0=r),f0(e,t)},n}function CE(e,t,n){n=Qi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){f0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){f0(e,t),typeof r!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ly(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=WT.bind(null,e,t,n),t.then(e,e))}function Ry(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qi(-1,1),t.tag=2,Ma(n,t,1))),n.lanes|=1),e)}var NT=ea.ReactCurrentOwner,gr=!1;function ar(e,t,n,r){t.child=e===null?aE(t,null,n,r):Xl(t,e.child,n,r)}function Py(e,t,n,r,i){n=n.render;var a=t.ref;return Gl(t,i),r=gv(e,t,n,r,a,i),n=yv(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ji(e,t,i)):(fn&&n&&av(t),t.flags|=1,ar(e,t,r,i),t.child)}function ky(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Lv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,LE(e,t,a,r,i)):(e=ud(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Nu,n(o,r)&&e.ref===t.ref)return Ji(e,t,i)}return t.flags|=1,e=Ba(a,r),e.ref=t.ref,e.return=t,t.child=e}function LE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Nu(a,r)&&e.ref===t.ref)if(gr=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,Ji(e,t,i)}return d0(e,t,n,r,i)}function RE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Il,Or),Or|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,on(Il,Or),Or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,on(Il,Or),Or|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,on(Il,Or),Or|=r;return ar(e,t,i,n),t.child}function OE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function d0(e,t,n,r,i){var a=Er(n)?Po:tr.current;return a=Hl(t,a),Gl(t,i),n=gv(e,t,n,r,a,i),r=yv(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ji(e,t,i)):(fn&&r&&av(t),t.flags|=1,ar(e,t,n,i),t.child)}function Ny(e,t,n,r,i){if(Er(n)){var a=!0;wd(t)}else a=!1;if(Gl(t,i),t.stateNode===null)od(e,t),rE(t,n,r),c0(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Yr(f):(f=Er(n)?Po:tr.current,f=Hl(t,f));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==f)&&Ty(t,o,r,f),Aa=!1;var d=t.memoizedState;o.state=d,Ld(t,r,o,i),u=t.memoizedState,l!==r||d!==u||xr.current||Aa?(typeof p=="function"&&(u0(t,n,p,r),u=t.memoizedState),(l=Aa||wy(t,n,l,r,d,u,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,tE(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:ii(t.type,l),o.props=f,h=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yr(u):(u=Er(n)?Po:tr.current,u=Hl(t,u));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==u)&&Ty(t,o,r,u),Aa=!1,d=t.memoizedState,o.state=d,Ld(t,r,o,i);var x=t.memoizedState;l!==h||d!==x||xr.current||Aa?(typeof w=="function"&&(u0(t,n,w,r),x=t.memoizedState),(f=Aa||wy(t,n,f,r,d,x,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=u,r=f):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return m0(e,t,n,r,a,i)}function m0(e,t,n,r,i,a){OE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&yy(t,n,!1),Ji(e,t,a);r=t.stateNode,NT.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Xl(t,e.child,null,a),t.child=Xl(t,null,l,a)):ar(e,t,l,a),t.memoizedState=r.state,i&&yy(t,n,!0),t.child}function PE(e){var t=e.stateNode;t.pendingContext?gy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gy(e,t.context,!1),mv(e,t.containerInfo)}function Iy(e,t,n,r,i){return Wl(),lv(i),t.flags|=256,ar(e,t,n,r),t.child}var h0={dehydrated:null,treeContext:null,retryLane:0};function p0(e){return{baseLanes:e,cachePool:null,transitions:null}}function kE(e,t,n){var r=t.pendingProps,i=gn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),on(gn,i&1),e===null)return l0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=um(o,r,0,null),e=Ro(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=p0(n),t.memoizedState=h0,e):_v(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return IT(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ba(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Ba(l,a):(a=Ro(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?p0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=h0,r}return a=e.child,e=a.sibling,r=Ba(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _v(e,t){return t=um({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mf(e,t,n,r){return r!==null&&lv(r),Xl(t,e.child,null,n),e=_v(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IT(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=ap(Error(ke(422))),Mf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=um({mode:"visible",children:r.children},i,0,null),a=Ro(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Xl(t,e.child,null,o),t.child.memoizedState=p0(o),t.memoizedState=h0,a);if(!(t.mode&1))return Mf(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ke(419)),r=ap(a,r,void 0),Mf(e,t,o,r)}if(l=(o&e.childLanes)!==0,gr||l){if(r=Wn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Zi(e,i),ui(r,e,i,-1))}return Cv(),r=ap(Error(ke(421))),Mf(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=XT.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Pr=Da(i.nextSibling),kr=t,fn=!0,oi=null,e!==null&&(Vr[Hr++]=Xi,Vr[Hr++]=Yi,Vr[Hr++]=ko,Xi=e.id,Yi=e.overflow,ko=t),t=_v(t,r.children),t.flags|=4096,t)}function Dy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),s0(e.return,t,n)}function op(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function NE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ar(e,t,r.children,n),r=gn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dy(e,n,t);else if(e.tag===19)Dy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(on(gn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Rd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),op(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Rd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}op(t,!0,n,null,a);break;case"together":op(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function od(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ji(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Io|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=Ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function DT(e,t,n){switch(t.tag){case 3:PE(t),Wl();break;case 5:oE(t);break;case 1:Er(t.type)&&wd(t);break;case 4:mv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;on(Ad,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(on(gn,gn.current&1),t.flags|=128,null):n&t.child.childLanes?kE(e,t,n):(on(gn,gn.current&1),e=Ji(e,t,n),e!==null?e.sibling:null);on(gn,gn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return NE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),on(gn,gn.current),r)break;return null;case 22:case 23:return t.lanes=0,RE(e,t,n)}return Ji(e,t,n)}var IE,v0,DE,ME;IE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};v0=function(){};DE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,bo(Oi.current);var a=null;switch(n){case"input":i=jp(e,i),r=jp(e,r),a=[];break;case"select":i=xn({},i,{value:void 0}),r=xn({},r,{value:void 0}),a=[];break;case"textarea":i=Gp(e,i),r=Gp(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_d)}Up(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Au.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Au.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&un("scroll",e),a||l===u||(a=[])):(a=a||[]).push(f,u))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};ME=function(e,t,n,r){n!==r&&(t.flags|=4)};function au(e,t){if(!fn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function MT(e,t,n){var r=t.pendingProps;switch(ov(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return Er(t.type)&&Sd(),Jn(t),null;case 3:return r=t.stateNode,Yl(),cn(xr),cn(tr),pv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(If(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oi!==null&&(T0(oi),oi=null))),v0(e,t),Jn(t),null;case 5:hv(t);var i=bo(ju.current);if(n=t.type,e!==null&&t.stateNode!=null)DE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return Jn(t),null}if(e=bo(Oi.current),If(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Li]=t,r[Mu]=a,e=(t.mode&1)!==0,n){case"dialog":un("cancel",r),un("close",r);break;case"iframe":case"object":case"embed":un("load",r);break;case"video":case"audio":for(i=0;i<pu.length;i++)un(pu[i],r);break;case"source":un("error",r);break;case"img":case"image":case"link":un("error",r),un("load",r);break;case"details":un("toggle",r);break;case"input":Vg(r,a),un("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},un("invalid",r);break;case"textarea":Wg(r,a),un("invalid",r)}Up(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Nf(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Nf(r.textContent,l,e),i=["children",""+l]):Au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&un("scroll",r)}switch(n){case"input":bf(r),Hg(r,a,!0);break;case"textarea":bf(r),Xg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=_d)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ux(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Li]=t,e[Mu]=r,IE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Vp(n,r),n){case"dialog":un("cancel",e),un("close",e),i=r;break;case"iframe":case"object":case"embed":un("load",e),i=r;break;case"video":case"audio":for(i=0;i<pu.length;i++)un(pu[i],e);i=r;break;case"source":un("error",e),i=r;break;case"img":case"image":case"link":un("error",e),un("load",e),i=r;break;case"details":un("toggle",e),i=r;break;case"input":Vg(e,r),i=jp(e,r),un("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=xn({},r,{value:void 0}),un("invalid",e);break;case"textarea":Wg(e,r),i=Gp(e,r),un("invalid",e);break;default:i=r}Up(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?dx(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cx(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Cu(e,u):typeof u=="number"&&Cu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Au.hasOwnProperty(a)?u!=null&&a==="onScroll"&&un("scroll",e):u!=null&&H0(e,a,u,o))}switch(n){case"input":bf(e),Hg(e,r,!1);break;case"textarea":bf(e),Xg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ga(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Fl(e,!!r.multiple,a,!1):r.defaultValue!=null&&Fl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=_d)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)ME(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));if(n=bo(ju.current),bo(Oi.current),If(t)){if(r=t.stateNode,n=t.memoizedProps,r[Li]=t,(a=r.nodeValue!==n)&&(e=kr,e!==null))switch(e.tag){case 3:Nf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nf(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Li]=t,t.stateNode=r}return Jn(t),null;case 13:if(cn(gn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fn&&Pr!==null&&t.mode&1&&!(t.flags&128))Jx(),Wl(),t.flags|=98560,a=!1;else if(a=If(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ke(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[Li]=t}else Wl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),a=!1}else oi!==null&&(T0(oi),oi=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||gn.current&1?Gn===0&&(Gn=3):Cv())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return Yl(),v0(e,t),e===null&&Iu(t.stateNode.containerInfo),Jn(t),null;case 10:return cv(t.type._context),Jn(t),null;case 17:return Er(t.type)&&Sd(),Jn(t),null;case 19:if(cn(gn),a=t.memoizedState,a===null)return Jn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)au(a,!1);else{if(Gn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Rd(e),o!==null){for(t.flags|=128,au(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return on(gn,gn.current&1|2),t.child}e=e.sibling}a.tail!==null&&kn()>Kl&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304)}else{if(!r)if(e=Rd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),au(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!fn)return Jn(t),null}else 2*kn()-a.renderingStartTime>Kl&&n!==1073741824&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=kn(),t.sibling=null,n=gn.current,on(gn,r?n&1|2:n&1),t):(Jn(t),null);case 22:case 23:return Av(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Or&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function FT(e,t){switch(ov(t),t.tag){case 1:return Er(t.type)&&Sd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yl(),cn(xr),cn(tr),pv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hv(t),null;case 13:if(cn(gn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));Wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(gn),null;case 4:return Yl(),null;case 10:return cv(t.type._context),null;case 22:case 23:return Av(),null;case 24:return null;default:return null}}var Ff=!1,er=!1,jT=typeof WeakSet=="function"?WeakSet:Set,et=null;function Nl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bn(e,t,r)}else n.current=null}function g0(e,t,n){try{n()}catch(r){bn(e,t,r)}}var My=!1;function BT(e,t){if(e0=yd,e=$x(),iv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,f=0,p=0,h=e,d=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)d=h,h=w;for(;;){if(h===e)break t;if(d===n&&++f===i&&(l=o),d===a&&++p===r&&(u=o),(w=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(t0={focusedElem:e,selectionRange:n},yd=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){t=et;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var L=x.memoizedProps,I=x.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?L:ii(t.type,L),I);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(H){bn(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}return x=My,My=!1,x}function wu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&g0(t,n,a)}i=i.next}while(i!==r)}}function lm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function y0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FE(e){var t=e.alternate;t!==null&&(e.alternate=null,FE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Li],delete t[Mu],delete t[i0],delete t[_T],delete t[ST])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jE(e){return e.tag===5||e.tag===3||e.tag===4}function Fy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function x0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_d));else if(r!==4&&(e=e.child,e!==null))for(x0(e,t,n),e=e.sibling;e!==null;)x0(e,t,n),e=e.sibling}function E0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(E0(e,t,n),e=e.sibling;e!==null;)E0(e,t,n),e=e.sibling}var Qn=null,ai=!1;function _a(e,t,n){for(n=n.child;n!==null;)BE(e,t,n),n=n.sibling}function BE(e,t,n){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:er||Nl(n,t);case 6:var r=Qn,i=ai;Qn=null,_a(e,t,n),Qn=r,ai=i,Qn!==null&&(ai?(e=Qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(ai?(e=Qn,n=n.stateNode,e.nodeType===8?Jh(e.parentNode,n):e.nodeType===1&&Jh(e,n),Pu(e)):Jh(Qn,n.stateNode));break;case 4:r=Qn,i=ai,Qn=n.stateNode.containerInfo,ai=!0,_a(e,t,n),Qn=r,ai=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&g0(n,t,o),i=i.next}while(i!==r)}_a(e,t,n);break;case 1:if(!er&&(Nl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){bn(n,t,l)}_a(e,t,n);break;case 21:_a(e,t,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,_a(e,t,n),er=r):_a(e,t,n);break;default:_a(e,t,n)}}function jy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jT),t.forEach(function(r){var i=YT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ri(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,ai=!1;break e;case 3:Qn=l.stateNode.containerInfo,ai=!0;break e;case 4:Qn=l.stateNode.containerInfo,ai=!0;break e}l=l.return}if(Qn===null)throw Error(ke(160));BE(a,o,i),Qn=null,ai=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){bn(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$E(t,e),t=t.sibling}function $E(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ri(t,e),Ti(e),r&4){try{wu(3,e,e.return),lm(3,e)}catch(L){bn(e,e.return,L)}try{wu(5,e,e.return)}catch(L){bn(e,e.return,L)}}break;case 1:ri(t,e),Ti(e),r&512&&n!==null&&Nl(n,n.return);break;case 5:if(ri(t,e),Ti(e),r&512&&n!==null&&Nl(n,n.return),e.flags&32){var i=e.stateNode;try{Cu(i,"")}catch(L){bn(e,e.return,L)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lx(i,a),Vp(l,o);var f=Vp(l,a);for(o=0;o<u.length;o+=2){var p=u[o],h=u[o+1];p==="style"?dx(i,h):p==="dangerouslySetInnerHTML"?cx(i,h):p==="children"?Cu(i,h):H0(i,p,h,f)}switch(l){case"input":Bp(i,a);break;case"textarea":sx(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?Fl(i,!!a.multiple,w,!1):d!==!!a.multiple&&(a.defaultValue!=null?Fl(i,!!a.multiple,a.defaultValue,!0):Fl(i,!!a.multiple,a.multiple?[]:"",!1))}i[Mu]=a}catch(L){bn(e,e.return,L)}}break;case 6:if(ri(t,e),Ti(e),r&4){if(e.stateNode===null)throw Error(ke(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(L){bn(e,e.return,L)}}break;case 3:if(ri(t,e),Ti(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(t.containerInfo)}catch(L){bn(e,e.return,L)}break;case 4:ri(t,e),Ti(e);break;case 13:ri(t,e),Ti(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Tv=kn())),r&4&&jy(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(er=(f=er)||p,ri(t,e),er=f):ri(t,e),Ti(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(et=e,p=e.child;p!==null;){for(h=et=p;et!==null;){switch(d=et,w=d.child,d.tag){case 0:case 11:case 14:case 15:wu(4,d,d.return);break;case 1:Nl(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(L){bn(r,n,L)}}break;case 5:Nl(d,d.return);break;case 22:if(d.memoizedState!==null){$y(h);continue}}w!==null?(w.return=d,et=w):$y(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fx("display",o))}catch(L){bn(e,e.return,L)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(L){bn(e,e.return,L)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ri(t,e),Ti(e),r&4&&jy(e);break;case 21:break;default:ri(t,e),Ti(e)}}function Ti(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jE(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cu(i,""),r.flags&=-33);var a=Fy(e);E0(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fy(e);x0(e,l,o);break;default:throw Error(ke(161))}}catch(u){bn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $T(e,t,n){et=e,GE(e)}function GE(e,t,n){for(var r=(e.mode&1)!==0;et!==null;){var i=et,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ff;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||er;l=Ff;var f=er;if(Ff=o,(er=u)&&!f)for(et=i;et!==null;)o=et,u=o.child,o.tag===22&&o.memoizedState!==null?Gy(i):u!==null?(u.return=o,et=u):Gy(i);for(;a!==null;)et=a,GE(a),a=a.sibling;et=i,Ff=l,er=f}By(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,et=a):By(e)}}function By(e){for(;et!==null;){var t=et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:er||lm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ii(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Sy(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sy(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Pu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}er||t.flags&512&&y0(t)}catch(d){bn(t,t.return,d)}}if(t===e){et=null;break}if(n=t.sibling,n!==null){n.return=t.return,et=n;break}et=t.return}}function $y(e){for(;et!==null;){var t=et;if(t===e){et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,et=n;break}et=t.return}}function Gy(e){for(;et!==null;){var t=et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lm(4,t)}catch(u){bn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){bn(t,i,u)}}var a=t.return;try{y0(t)}catch(u){bn(t,a,u)}break;case 5:var o=t.return;try{y0(t)}catch(u){bn(t,o,u)}}}catch(u){bn(t,t.return,u)}if(t===e){et=null;break}var l=t.sibling;if(l!==null){l.return=t.return,et=l;break}et=t.return}}var GT=Math.ceil,kd=ea.ReactCurrentDispatcher,Sv=ea.ReactCurrentOwner,Xr=ea.ReactCurrentBatchConfig,Ht=0,Wn=null,Mn=null,Kn=0,Or=0,Il=Va(0),Gn=0,zu=null,Io=0,sm=0,wv=0,Tu=null,vr=null,Tv=0,Kl=1/0,Hi=null,Nd=!1,_0=null,Fa=null,jf=!1,Oa=null,Id=0,bu=0,S0=null,ld=-1,sd=0;function lr(){return Ht&6?kn():ld!==-1?ld:ld=kn()}function ja(e){return e.mode&1?Ht&2&&Kn!==0?Kn&-Kn:TT.transition!==null?(sd===0&&(sd=Tx()),sd):(e=qt,e!==0||(e=window.event,e=e===void 0?16:Px(e.type)),e):1}function ui(e,t,n,r){if(50<bu)throw bu=0,S0=null,Error(ke(185));Ku(e,n,r),(!(Ht&2)||e!==Wn)&&(e===Wn&&(!(Ht&2)&&(sm|=n),Gn===4&&La(e,Kn)),_r(e,r),n===1&&Ht===0&&!(t.mode&1)&&(Kl=kn()+500,im&&Ha()))}function _r(e,t){var n=e.callbackNode;Tw(e,t);var r=gd(e,e===Wn?Kn:0);if(r===0)n!==null&&Kg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kg(n),t===1)e.tag===0?wT(zy.bind(null,e)):Kx(zy.bind(null,e)),xT(function(){!(Ht&6)&&Ha()}),n=null;else{switch(bx(r)){case 1:n=K0;break;case 4:n=Sx;break;case 16:n=vd;break;case 536870912:n=wx;break;default:n=vd}n=QE(n,zE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zE(e,t){if(ld=-1,sd=0,Ht&6)throw Error(ke(327));var n=e.callbackNode;if(zl()&&e.callbackNode!==n)return null;var r=gd(e,e===Wn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Dd(e,r);else{t=r;var i=Ht;Ht|=2;var a=VE();(Wn!==e||Kn!==t)&&(Hi=null,Kl=kn()+500,Lo(e,t));do try{VT();break}catch(l){UE(e,l)}while(!0);uv(),kd.current=a,Ht=i,Mn!==null?t=0:(Wn=null,Kn=0,t=Gn)}if(t!==0){if(t===2&&(i=Qp(e),i!==0&&(r=i,t=w0(e,i))),t===1)throw n=zu,Lo(e,0),La(e,r),_r(e,kn()),n;if(t===6)La(e,r);else{if(i=e.current.alternate,!(r&30)&&!zT(i)&&(t=Dd(e,r),t===2&&(a=Qp(e),a!==0&&(r=a,t=w0(e,a))),t===1))throw n=zu,Lo(e,0),La(e,r),_r(e,kn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ke(345));case 2:So(e,vr,Hi);break;case 3:if(La(e,r),(r&130023424)===r&&(t=Tv+500-kn(),10<t)){if(gd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){lr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=r0(So.bind(null,e,vr,Hi),t);break}So(e,vr,Hi);break;case 4:if(La(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-si(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=kn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GT(r/1960))-r,10<r){e.timeoutHandle=r0(So.bind(null,e,vr,Hi),r);break}So(e,vr,Hi);break;case 5:So(e,vr,Hi);break;default:throw Error(ke(329))}}}return _r(e,kn()),e.callbackNode===n?zE.bind(null,e):null}function w0(e,t){var n=Tu;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),e=Dd(e,t),e!==2&&(t=vr,vr=n,t!==null&&T0(t)),e}function T0(e){vr===null?vr=e:vr.push.apply(vr,e)}function zT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ci(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~wv,t&=~sm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-si(t),r=1<<n;e[n]=-1,t&=~r}}function zy(e){if(Ht&6)throw Error(ke(327));zl();var t=gd(e,0);if(!(t&1))return _r(e,kn()),null;var n=Dd(e,t);if(e.tag!==0&&n===2){var r=Qp(e);r!==0&&(t=r,n=w0(e,r))}if(n===1)throw n=zu,Lo(e,0),La(e,t),_r(e,kn()),n;if(n===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,So(e,vr,Hi),_r(e,kn()),null}function bv(e,t){var n=Ht;Ht|=1;try{return e(t)}finally{Ht=n,Ht===0&&(Kl=kn()+500,im&&Ha())}}function Do(e){Oa!==null&&Oa.tag===0&&!(Ht&6)&&zl();var t=Ht;Ht|=1;var n=Xr.transition,r=qt;try{if(Xr.transition=null,qt=1,e)return e()}finally{qt=r,Xr.transition=n,Ht=t,!(Ht&6)&&Ha()}}function Av(){Or=Il.current,cn(Il)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yT(n)),Mn!==null)for(n=Mn.return;n!==null;){var r=n;switch(ov(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sd();break;case 3:Yl(),cn(xr),cn(tr),pv();break;case 5:hv(r);break;case 4:Yl();break;case 13:cn(gn);break;case 19:cn(gn);break;case 10:cv(r.type._context);break;case 22:case 23:Av()}n=n.return}if(Wn=e,Mn=e=Ba(e.current,null),Kn=Or=t,Gn=0,zu=null,wv=sm=Io=0,vr=Tu=null,To!==null){for(t=0;t<To.length;t++)if(n=To[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}To=null}return e}function UE(e,t){do{var n=Mn;try{if(uv(),id.current=Pd,Od){for(var r=yn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Od=!1}if(No=0,Hn=$n=yn=null,Su=!1,Bu=0,Sv.current=null,n===null||n.return===null){Gn=1,zu=t,Mn=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Kn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,p=l,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var d=p.alternate;d?(p.updateQueue=d.updateQueue,p.memoizedState=d.memoizedState,p.lanes=d.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=Ry(o);if(w!==null){w.flags&=-257,Oy(w,o,l,a,t),w.mode&1&&Ly(a,f,t),t=w,u=f;var x=t.updateQueue;if(x===null){var L=new Set;L.add(u),t.updateQueue=L}else x.add(u);break e}else{if(!(t&1)){Ly(a,f,t),Cv();break e}u=Error(ke(426))}}else if(fn&&l.mode&1){var I=Ry(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Oy(I,o,l,a,t),lv(Ql(u,l));break e}}a=u=Ql(u,l),Gn!==4&&(Gn=2),Tu===null?Tu=[a]:Tu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=AE(a,u,t);_y(a,v);break e;case 1:l=u;var b=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fa===null||!Fa.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var H=CE(a,l,t);_y(a,H);break e}}a=a.return}while(a!==null)}WE(n)}catch(q){t=q,Mn===n&&n!==null&&(Mn=n=n.return);continue}break}while(!0)}function VE(){var e=kd.current;return kd.current=Pd,e===null?Pd:e}function Cv(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),Wn===null||!(Io&268435455)&&!(sm&268435455)||La(Wn,Kn)}function Dd(e,t){var n=Ht;Ht|=2;var r=VE();(Wn!==e||Kn!==t)&&(Hi=null,Lo(e,t));do try{UT();break}catch(i){UE(e,i)}while(!0);if(uv(),Ht=n,kd.current=r,Mn!==null)throw Error(ke(261));return Wn=null,Kn=0,Gn}function UT(){for(;Mn!==null;)HE(Mn)}function VT(){for(;Mn!==null&&!pw();)HE(Mn)}function HE(e){var t=YE(e.alternate,e,Or);e.memoizedProps=e.pendingProps,t===null?WE(e):Mn=t,Sv.current=null}function WE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FT(n,t),n!==null){n.flags&=32767,Mn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gn=6,Mn=null;return}}else if(n=MT(n,t,Or),n!==null){Mn=n;return}if(t=t.sibling,t!==null){Mn=t;return}Mn=t=e}while(t!==null);Gn===0&&(Gn=5)}function So(e,t,n){var r=qt,i=Xr.transition;try{Xr.transition=null,qt=1,HT(e,t,n,r)}finally{Xr.transition=i,qt=r}return null}function HT(e,t,n,r){do zl();while(Oa!==null);if(Ht&6)throw Error(ke(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(bw(e,a),e===Wn&&(Mn=Wn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jf||(jf=!0,QE(vd,function(){return zl(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Xr.transition,Xr.transition=null;var o=qt;qt=1;var l=Ht;Ht|=4,Sv.current=null,BT(e,n),$E(n,e),fT(t0),yd=!!e0,t0=e0=null,e.current=n,$T(n),vw(),Ht=l,qt=o,Xr.transition=a}else e.current=n;if(jf&&(jf=!1,Oa=e,Id=i),a=e.pendingLanes,a===0&&(Fa=null),xw(n.stateNode),_r(e,kn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nd)throw Nd=!1,e=_0,_0=null,e;return Id&1&&e.tag!==0&&zl(),a=e.pendingLanes,a&1?e===S0?bu++:(bu=0,S0=e):bu=0,Ha(),null}function zl(){if(Oa!==null){var e=bx(Id),t=Xr.transition,n=qt;try{if(Xr.transition=null,qt=16>e?16:e,Oa===null)var r=!1;else{if(e=Oa,Oa=null,Id=0,Ht&6)throw Error(ke(331));var i=Ht;for(Ht|=4,et=e.current;et!==null;){var a=et,o=a.child;if(et.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(et=f;et!==null;){var p=et;switch(p.tag){case 0:case 11:case 15:wu(8,p,a)}var h=p.child;if(h!==null)h.return=p,et=h;else for(;et!==null;){p=et;var d=p.sibling,w=p.return;if(FE(p),p===f){et=null;break}if(d!==null){d.return=w,et=d;break}et=w}}}var x=a.alternate;if(x!==null){var L=x.child;if(L!==null){x.child=null;do{var I=L.sibling;L.sibling=null,L=I}while(L!==null)}}et=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,et=o;else e:for(;et!==null;){if(a=et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wu(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,et=v;break e}et=a.return}}var b=e.current;for(et=b;et!==null;){o=et;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,et=C;else e:for(o=b;et!==null;){if(l=et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lm(9,l)}}catch(q){bn(l,l.return,q)}if(l===o){et=null;break e}var H=l.sibling;if(H!==null){H.return=l.return,et=H;break e}et=l.return}}if(Ht=i,Ha(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(Jd,e)}catch{}r=!0}return r}finally{qt=n,Xr.transition=t}}return!1}function Uy(e,t,n){t=Ql(n,t),t=AE(e,t,1),e=Ma(e,t,1),t=lr(),e!==null&&(Ku(e,1,t),_r(e,t))}function bn(e,t,n){if(e.tag===3)Uy(e,e,n);else for(;t!==null;){if(t.tag===3){Uy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fa===null||!Fa.has(r))){e=Ql(n,e),e=CE(t,e,1),t=Ma(t,e,1),e=lr(),t!==null&&(Ku(t,1,e),_r(t,e));break}}t=t.return}}function WT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lr(),e.pingedLanes|=e.suspendedLanes&n,Wn===e&&(Kn&n)===n&&(Gn===4||Gn===3&&(Kn&130023424)===Kn&&500>kn()-Tv?Lo(e,0):wv|=n),_r(e,t)}function XE(e,t){t===0&&(e.mode&1?(t=Lf,Lf<<=1,!(Lf&130023424)&&(Lf=4194304)):t=1);var n=lr();e=Zi(e,t),e!==null&&(Ku(e,t,n),_r(e,n))}function XT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XE(e,n)}function YT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(t),XE(e,n)}var YE;YE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xr.current)gr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gr=!1,DT(e,t,n);gr=!!(e.flags&131072)}else gr=!1,fn&&t.flags&1048576&&qx(t,bd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;od(e,t),e=t.pendingProps;var i=Hl(t,tr.current);Gl(t,n),i=gv(null,t,r,e,i,n);var a=yv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Er(r)?(a=!0,wd(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dv(t),i.updater=am,t.stateNode=i,i._reactInternals=t,c0(t,r,e,n),t=m0(null,t,r,!0,a,n)):(t.tag=0,fn&&a&&av(t),ar(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(od(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=KT(r),e=ii(r,e),i){case 0:t=d0(null,t,r,e,n);break e;case 1:t=Ny(null,t,r,e,n);break e;case 11:t=Py(null,t,r,e,n);break e;case 14:t=ky(null,t,r,ii(r.type,e),n);break e}throw Error(ke(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ii(r,i),d0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ii(r,i),Ny(e,t,r,i,n);case 3:e:{if(PE(t),e===null)throw Error(ke(387));r=t.pendingProps,a=t.memoizedState,i=a.element,tE(e,t),Ld(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Ql(Error(ke(423)),t),t=Iy(e,t,r,n,i);break e}else if(r!==i){i=Ql(Error(ke(424)),t),t=Iy(e,t,r,n,i);break e}else for(Pr=Da(t.stateNode.containerInfo.firstChild),kr=t,fn=!0,oi=null,n=aE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wl(),r===i){t=Ji(e,t,n);break e}ar(e,t,r,n)}t=t.child}return t;case 5:return oE(t),e===null&&l0(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,n0(r,i)?o=null:a!==null&&n0(r,a)&&(t.flags|=32),OE(e,t),ar(e,t,o,n),t.child;case 6:return e===null&&l0(t),null;case 13:return kE(e,t,n);case 4:return mv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xl(t,null,r,n):ar(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ii(r,i),Py(e,t,r,i,n);case 7:return ar(e,t,t.pendingProps,n),t.child;case 8:return ar(e,t,t.pendingProps.children,n),t.child;case 12:return ar(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,on(Ad,r._currentValue),r._currentValue=o,a!==null)if(ci(a.value,o)){if(a.children===i.children&&!xr.current){t=Ji(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Qi(-1,n&-n),u.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?u.next=u:(u.next=p.next,p.next=u),f.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),s0(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ke(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),s0(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ar(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Gl(t,n),i=Yr(i),r=r(i),t.flags|=1,ar(e,t,r,n),t.child;case 14:return r=t.type,i=ii(r,t.pendingProps),i=ii(r.type,i),ky(e,t,r,i,n);case 15:return LE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ii(r,i),od(e,t),t.tag=1,Er(r)?(e=!0,wd(t)):e=!1,Gl(t,n),rE(t,r,i),c0(t,r,i,n),m0(null,t,r,!0,e,n);case 19:return NE(e,t,n);case 22:return RE(e,t,n)}throw Error(ke(156,t.tag))};function QE(e,t){return _x(e,t)}function QT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(e,t,n,r){return new QT(e,t,n,r)}function Lv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KT(e){if(typeof e=="function")return Lv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X0)return 11;if(e===Y0)return 14}return 2}function Ba(e,t){var n=e.alternate;return n===null?(n=Wr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ud(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")Lv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tl:return Ro(n.children,i,a,t);case W0:o=8,i|=8;break;case Ip:return e=Wr(12,n,t,i|2),e.elementType=Ip,e.lanes=a,e;case Dp:return e=Wr(13,n,t,i),e.elementType=Dp,e.lanes=a,e;case Mp:return e=Wr(19,n,t,i),e.elementType=Mp,e.lanes=a,e;case ix:return um(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nx:o=10;break e;case rx:o=9;break e;case X0:o=11;break e;case Y0:o=14;break e;case ba:o=16,r=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Wr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ro(e,t,n,r){return e=Wr(7,e,r,t),e.lanes=n,e}function um(e,t,n,r){return e=Wr(22,e,r,t),e.elementType=ix,e.lanes=n,e.stateNode={isHidden:!1},e}function lp(e,t,n){return e=Wr(6,e,null,t),e.lanes=n,e}function sp(e,t,n){return t=Wr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zh(0),this.expirationTimes=zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rv(e,t,n,r,i,a,o,l,u){return e=new qT(e,t,n,l,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Wr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dv(a),e}function ZT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function KE(e){if(!e)return za;e=e._reactInternals;e:{if(jo(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var n=e.type;if(Er(n))return Qx(e,n,t)}return t}function qE(e,t,n,r,i,a,o,l,u){return e=Rv(n,r,!0,e,i,a,o,l,u),e.context=KE(null),n=e.current,r=lr(),i=ja(n),a=Qi(r,i),a.callback=t??null,Ma(n,a,i),e.current.lanes=i,Ku(e,i,r),_r(e,r),e}function cm(e,t,n,r){var i=t.current,a=lr(),o=ja(i);return n=KE(n),t.context===null?t.context=n:t.pendingContext=n,t=Qi(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ma(i,t,o),e!==null&&(ui(e,i,o,a),rd(e,i,o)),o}function Md(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ov(e,t){Vy(e,t),(e=e.alternate)&&Vy(e,t)}function JT(){return null}var ZE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Pv(e){this._internalRoot=e}fm.prototype.render=Pv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));cm(e,t,null,null)};fm.prototype.unmount=Pv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Do(function(){cm(null,e,null,null)}),t[qi]=null}};function fm(e){this._internalRoot=e}fm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ca.length&&t!==0&&t<Ca[n].priority;n++);Ca.splice(n,0,e),n===0&&Ox(e)}};function kv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hy(){}function eb(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=Md(o);a.call(f)}}var o=qE(t,r,e,0,null,!1,!1,"",Hy);return e._reactRootContainer=o,e[qi]=o.current,Iu(e.nodeType===8?e.parentNode:e),Do(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Md(u);l.call(f)}}var u=Rv(e,0,!1,null,null,!1,!1,"",Hy);return e._reactRootContainer=u,e[qi]=u.current,Iu(e.nodeType===8?e.parentNode:e),Do(function(){cm(t,u,n,r)}),u}function mm(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Md(o);l.call(u)}}cm(t,o,e,i)}else o=eb(n,t,e,i,r);return Md(o)}Ax=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hu(t.pendingLanes);n!==0&&(q0(t,n|1),_r(t,kn()),!(Ht&6)&&(Kl=kn()+500,Ha()))}break;case 13:Do(function(){var r=Zi(e,1);if(r!==null){var i=lr();ui(r,e,1,i)}}),Ov(e,1)}};Z0=function(e){if(e.tag===13){var t=Zi(e,134217728);if(t!==null){var n=lr();ui(t,e,134217728,n)}Ov(e,134217728)}};Cx=function(e){if(e.tag===13){var t=ja(e),n=Zi(e,t);if(n!==null){var r=lr();ui(n,e,t,r)}Ov(e,t)}};Lx=function(){return qt};Rx=function(e,t){var n=qt;try{return qt=e,t()}finally{qt=n}};Wp=function(e,t,n){switch(t){case"input":if(Bp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=rm(r);if(!i)throw Error(ke(90));ox(r),Bp(r,i)}}}break;case"textarea":sx(e,n);break;case"select":t=n.value,t!=null&&Fl(e,!!n.multiple,t,!1)}};px=bv;vx=Do;var tb={usingClientEntryPoint:!1,Events:[Zu,Ll,rm,mx,hx,bv]},ou={findFiberByHostInstance:wo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nb={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xx(e),e===null?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bf.isDisabled&&Bf.supportsFiber)try{Jd=Bf.inject(nb),Ri=Bf}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tb;Ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(t))throw Error(ke(200));return ZT(e,t,null,n)};Ir.createRoot=function(e,t){if(!kv(e))throw Error(ke(299));var n=!1,r="",i=ZE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Rv(e,1,!1,null,null,n,!1,r,i),e[qi]=t.current,Iu(e.nodeType===8?e.parentNode:e),new Pv(t)};Ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=xx(t),e=e===null?null:e.stateNode,e};Ir.flushSync=function(e){return Do(e)};Ir.hydrate=function(e,t,n){if(!dm(t))throw Error(ke(200));return mm(null,e,t,!0,n)};Ir.hydrateRoot=function(e,t,n){if(!kv(e))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=qE(t,null,e,1,n??null,i,!1,a,o),e[qi]=t.current,Iu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new fm(t)};Ir.render=function(e,t,n){if(!dm(t))throw Error(ke(200));return mm(null,e,t,!1,n)};Ir.unmountComponentAtNode=function(e){if(!dm(e))throw Error(ke(40));return e._reactRootContainer?(Do(function(){mm(null,null,e,!1,function(){e._reactRootContainer=null,e[qi]=null})}),!0):!1};Ir.unstable_batchedUpdates=bv;Ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!dm(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return mm(e,t,n,!1,r)};Ir.version="18.2.0-next-9e3b772b8-20220608";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(e){console.error(e)}}JE(),q1.exports=Ir;var rb=q1.exports,Wy=rb;kp.createRoot=Wy.createRoot,kp.hydrateRoot=Wy.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}var Pa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pa||(Pa={}));const Xy="popstate";function ib(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return b0("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Fd(i)}return ob(t,n,null,e)}function Fn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ab(){return Math.random().toString(36).substr(2,8)}function Yy(e,t){return{usr:e.state,key:e.key,idx:t}}function b0(e,t,n,r){return n===void 0&&(n=null),Uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ns(t):t,{state:n,key:t&&t.key||r||ab()})}function Fd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ns(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ob(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Pa.Pop,u=null,f=p();f==null&&(f=0,o.replaceState(Uu({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function h(){l=Pa.Pop;let I=p(),v=I==null?null:I-f;f=I,u&&u({action:l,location:L.location,delta:v})}function d(I,v){l=Pa.Push;let b=b0(L.location,I,v);n&&n(b,I),f=p()+1;let C=Yy(b,f),H=L.createHref(b);try{o.pushState(C,"",H)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(H)}a&&u&&u({action:l,location:L.location,delta:1})}function w(I,v){l=Pa.Replace;let b=b0(L.location,I,v);n&&n(b,I),f=p();let C=Yy(b,f),H=L.createHref(b);o.replaceState(C,"",H),a&&u&&u({action:l,location:L.location,delta:0})}function x(I){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof I=="string"?I:Fd(I);return Fn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let L={get action(){return l},get location(){return e(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Xy,h),u=I,()=>{i.removeEventListener(Xy,h),u=null}},createHref(I){return t(i,I)},createURL:x,encodeLocation(I){let v=x(I);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:w,go(I){return o.go(I)}};return L}var Qy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qy||(Qy={}));function lb(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ns(t):t,i=Iv(r.pathname||"/",n);if(i==null)return null;let a=e_(e);sb(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=gb(a[l],Eb(i));return o}function e_(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Fn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=$a([r,u.relativePath]),p=n.concat(u);a.children&&a.children.length>0&&(Fn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),e_(a.children,t,p,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:pb(f,a.index),routesMeta:p})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of t_(a.path))i(a,o,u)}),t}function t_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=t_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function sb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vb(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ub=/^:\w+$/,cb=3,fb=2,db=1,mb=10,hb=-2,Ky=e=>e==="*";function pb(e,t){let n=e.split("/"),r=n.length;return n.some(Ky)&&(r+=hb),t&&(r+=fb),n.filter(i=>!Ky(i)).reduce((i,a)=>i+(ub.test(a)?cb:a===""?db:mb),r)}function vb(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function gb(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=yb({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f);if(!p)return null;Object.assign(r,p.params);let h=l.route;a.push({params:r,pathname:$a([i,p.pathname]),pathnameBase:Tb($a([i,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(i=$a([i,p.pathnameBase]))}return a}function yb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xb(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,h)=>{let{paramName:d,isOptional:w}=p;if(d==="*"){let L=l[h]||"";o=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const x=l[h];return w&&!x?f[d]=void 0:f[d]=_b(x||"",d),f},{}),pathname:a,pathnameBase:o,pattern:e}}function xb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Nv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Eb(e){try{return decodeURI(e)}catch(t){return Nv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _b(e,t){try{return decodeURIComponent(e)}catch(n){return Nv(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Iv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Sb(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ns(e):e;return{pathname:n?n.startsWith("/")?n:wb(n,t):t,search:bb(r),hash:Ab(i)}}function wb(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function up(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function n_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function r_(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ns(e):(i=Uu({},e),Fn(!i.pathname||!i.pathname.includes("?"),up("?","pathname","search",i)),Fn(!i.pathname||!i.pathname.includes("#"),up("#","pathname","hash",i)),Fn(!i.search||!i.search.includes("#"),up("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else if(r){let h=t[t.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h.pop();i.pathname=d.join("/")}l="/"+h.join("/")}else{let h=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}l=h>=0?t[h]:"/"}let u=Sb(i,l),f=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||p)&&(u.pathname+="/"),u}const $a=e=>e.join("/").replace(/\/\/+/g,"/"),Tb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ab=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Cb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const i_=["post","put","patch","delete"];new Set(i_);const Lb=["get",...i_];new Set(Lb);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(this,arguments)}const Dv=j.createContext(null),Rb=j.createContext(null),rs=j.createContext(null),hm=j.createContext(null),Wa=j.createContext({outlet:null,matches:[],isDataRoute:!1}),a_=j.createContext(null);function Ob(e,t){let{relative:n}=t===void 0?{}:t;ec()||Fn(!1);let{basename:r,navigator:i}=j.useContext(rs),{hash:a,pathname:o,search:l}=s_(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:$a([r,o])),i.createHref({pathname:u,search:l,hash:a})}function ec(){return j.useContext(hm)!=null}function pm(){return ec()||Fn(!1),j.useContext(hm).location}function o_(e){j.useContext(rs).static||j.useLayoutEffect(e)}function vm(){let{isDataRoute:e}=j.useContext(Wa);return e?Ub():Pb()}function Pb(){ec()||Fn(!1);let e=j.useContext(Dv),{basename:t,navigator:n}=j.useContext(rs),{matches:r}=j.useContext(Wa),{pathname:i}=pm(),a=JSON.stringify(n_(r).map(u=>u.pathnameBase)),o=j.useRef(!1);return o_(()=>{o.current=!0}),j.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=r_(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:$a([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,a,i,e])}function l_(){let{matches:e}=j.useContext(Wa),t=e[e.length-1];return t?t.params:{}}function s_(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=j.useContext(Wa),{pathname:i}=pm(),a=JSON.stringify(n_(r).map(o=>o.pathnameBase));return j.useMemo(()=>r_(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function kb(e,t){return Nb(e,t)}function Nb(e,t,n){ec()||Fn(!1);let{navigator:r}=j.useContext(rs),{matches:i}=j.useContext(Wa),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=pm(),f;if(t){var p;let L=typeof t=="string"?ns(t):t;l==="/"||(p=L.pathname)!=null&&p.startsWith(l)||Fn(!1),f=L}else f=u;let h=f.pathname||"/",d=l==="/"?h:h.slice(l.length)||"/",w=lb(e,{pathname:d}),x=jb(w&&w.map(L=>Object.assign({},L,{params:Object.assign({},o,L.params),pathname:$a([l,r.encodeLocation?r.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?l:$a([l,r.encodeLocation?r.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),i,n);return t&&x?j.createElement(hm.Provider,{value:{location:jd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Pa.Pop}},x):x}function Ib(){let e=zb(),t=Cb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,a)}const Db=j.createElement(Ib,null);class Mb extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?j.createElement(Wa.Provider,{value:this.props.routeContext},j.createElement(a_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fb(e){let{routeContext:t,match:n,children:r}=e,i=j.useContext(Dv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Wa.Provider,{value:t},r)}function jb(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id]));l>=0||Fn(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,u,f)=>{let p=u.route.id?o==null?void 0:o[u.route.id]:null,h=null;n&&(h=u.route.errorElement||Db);let d=t.concat(a.slice(0,f+1)),w=()=>{let x;return p?x=h:u.route.Component?x=j.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,j.createElement(Fb,{match:u,routeContext:{outlet:l,matches:d,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?j.createElement(Mb,{location:n.location,revalidation:n.revalidation,component:h,error:p,children:w(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):w()},null)}var u_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(u_||{}),Bd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bd||{});function Bb(e){let t=j.useContext(Dv);return t||Fn(!1),t}function $b(e){let t=j.useContext(Rb);return t||Fn(!1),t}function Gb(e){let t=j.useContext(Wa);return t||Fn(!1),t}function c_(e){let t=Gb(),n=t.matches[t.matches.length-1];return n.route.id||Fn(!1),n.route.id}function zb(){var e;let t=j.useContext(a_),n=$b(Bd.UseRouteError),r=c_(Bd.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function Ub(){let{router:e}=Bb(u_.UseNavigateStable),t=c_(Bd.UseNavigateStable),n=j.useRef(!1);return o_(()=>{n.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,jd({fromRouteId:t},a)))},[e,t])}function vu(e){Fn(!1)}function Vb(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Pa.Pop,navigator:a,static:o=!1}=e;ec()&&Fn(!1);let l=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof r=="string"&&(r=ns(r));let{pathname:f="/",search:p="",hash:h="",state:d=null,key:w="default"}=r,x=j.useMemo(()=>{let L=Iv(f,l);return L==null?null:{location:{pathname:L,search:p,hash:h,state:d,key:w},navigationType:i}},[l,f,p,h,d,w,i]);return x==null?null:j.createElement(rs.Provider,{value:u},j.createElement(hm.Provider,{children:n,value:x}))}function Hb(e){let{children:t,location:n}=e;return kb(A0(t),n)}new Promise(()=>{});function A0(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let a=[...t,i];if(r.type===j.Fragment){n.push.apply(n,A0(r.props.children,a));return}r.type!==vu&&Fn(!1),!r.props.index||!r.props.children||Fn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=A0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C0.apply(this,arguments)}function Wb(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Xb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yb(e,t){return e.button===0&&(!t||t==="_self")&&!Xb(e)}const Qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Kb="startTransition",qy=XS[Kb];function qb(e){let{basename:t,children:n,future:r,window:i}=e,a=j.useRef();a.current==null&&(a.current=ib({window:i,v5Compat:!0}));let o=a.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},p=j.useCallback(h=>{f&&qy?qy(()=>u(h)):u(h)},[u,f]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.createElement(Vb,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o})}const Zb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L0=j.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:f,preventScrollReset:p,unstable_viewTransition:h}=t,d=Wb(t,Qb),{basename:w}=j.useContext(rs),x,L=!1;if(typeof f=="string"&&Jb.test(f)&&(x=f,Zb))try{let C=new URL(window.location.href),H=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Iv(H.pathname,w);H.origin===C.origin&&q!=null?f=q+H.search+H.hash:L=!0}catch{}let I=Ob(f,{relative:i}),v=eA(f,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,unstable_viewTransition:h});function b(C){r&&r(C),C.defaultPrevented||v(C)}return j.createElement("a",C0({},d,{href:x||I,onClick:L||a?r:b,ref:n,target:u}))});var Zy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var Jy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Jy||(Jy={}));function eA(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,u=vm(),f=pm(),p=s_(e,{relative:o});return j.useCallback(h=>{if(Yb(h,n)){h.preventDefault();let d=r!==void 0?r:Fd(f)===Fd(p);u(e,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[f,u,p,r,i,n,e,a,o,l])}const tA="http://localhost:5001/api";function f_(e,t,n){let r=null;return console.log("start polling",n),r=setInterval(()=>{fetch(`${tA}/jobs/job?dataset=${e.id}&job_id=${n}`).then(i=>{if(!i.ok)throw clearInterval(r),t(null),new Error(`HTTP error! status: ${i.status}`);return i.json()}).then(i=>{console.log("polling job status",i),t(i),(i.status==="completed"||i.status==="error")&&(clearInterval(r),setTimeout(()=>{t(null),t(i)},200))}).catch(i=>{console.error("Error polling job status",i),clearInterval(r),t(null)})},200),console.log("returning jobPolling cleanup"),()=>{console.log("inside cleanup",r),r&&clearInterval(r)}}function ql(e,t,n){return{startJob:j.useCallback(i=>{fetch(`${n}?dataset=${e.id}&${new URLSearchParams(i)}`).then(a=>a.json()).then(a=>{const o=a.job_id;f_(e,t,o)})},[e,t,n])}}var d_={exports:{}},nA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rA=nA,iA=rA;function m_(){}function h_(){}h_.resetWarningCache=m_;var aA=function(){function e(r,i,a,o,l,u){if(u!==iA){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:h_,resetWarningCache:m_};return n.PropTypes=n,n};d_.exports=aA();var oA=d_.exports;const qe=j0(oA);is.propTypes={job:qe.object,onlyLast:qe.bool,clearJob:qe.func.isRequired};function is({job:e,onlyLast:t,clearJob:n}){const r=j.useRef(null);return j.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),O.jsx(O.Fragment,{children:e?O.jsxs("div",{className:"job-progress",children:["Running ",O.jsx("b",{children:e.job_name}),O.jsx("br",{}),O.jsx("code",{children:e.command}),O.jsx("pre",{ref:r,children:t?e.progress[e.progress.length-1]:e.progress.join(`
`)}),e.status=="completed"?O.jsx("button",{onClick:n,children:"👍"}):null,e.status=="error"?O.jsx("button",{onClick:n,children:"🤬"}):null]}):O.jsx(O.Fragment,{})})}var lA={VITE_API_URL:"http://localhost:5001/api",BASE_URL:"/latent-scope/",MODE:"read_only",DEV:!1,PROD:!0,SSR:!1};const $f="http://localhost:5001/api";console.log("ENV",lA);function sA(){const[e,t]=j.useState([]);j.useEffect(()=>{fetch(`${$f}/datasets`).then(d=>d.json()).then(d=>t(d))},[]);const[n,r]=j.useState({});j.useEffect(()=>{e.forEach(d=>{fetch(`${$f}/datasets/${d.id}/scopes`).then(w=>w.json()).then(w=>r(x=>{const L={...x};return L[d.id]=w,L}))})},[e]),j.useEffect(()=>{console.log("scopes",n)},[n]);const[i,a]=j.useState(null),o=d=>{d.preventDefault();const w=d.target[1].value,L=d.target[0].files[0],I=new FormData;I.append("dataset",w),I.append("file",L),fetch(`${$f}/jobs/ingest`,{method:"POST",body:I}).then(v=>v.json()).then(v=>{console.log("Job ID:",v.job_id),f_({id:w},a,v.job_id)}).catch(v=>{console.error("Error:",v)})},l=d=>{d.preventDefault()};function u(d){let w=d.substring(0,d.lastIndexOf("."));return w=w.replace(/\s/g,"-"),w}const f=d=>{d.preventDefault(),document.getElementById("upload-button").files=d.dataTransfer.files;const w=d.dataTransfer.files[0].name,x=u(w);document.getElementById("dataset-name").value=x},p=d=>{const w=d.target.files[0].name,x=u(w);document.getElementById("dataset-name").value=x},h=vm();return j.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){h(`/datasets/${i.dataset}/setup`)},1e3)},[i,h]),O.jsxs("div",{className:"home",children:[O.jsxs("div",{className:"new-dataset",children:[O.jsx("h3",{children:"Create new dataset"}),O.jsxs("form",{onSubmit:o,onDragOver:l,onDrop:f,children:[O.jsx("label",{htmlFor:"upload-button",children:O.jsx("span",{children:"Import a CSV to create a new dataset"})}),O.jsx("input",{hidden:!0,id:"upload-button",type:"file",onChange:p}),O.jsx("input",{id:"dataset-name",type:"text",placeholder:"Dataset name"}),O.jsx("button",{type:"submit",children:"Submit"})]}),O.jsx(is,{job:i,clearJob:()=>a(null)})]}),O.jsx("h3",{children:"Datasets"}),O.jsx("ul",{children:e.map(d=>{var w;return O.jsxs("li",{children:[O.jsxs(L0,{to:`/datasets/${d.name}/setup`,children:["Setup ",d.name]}),O.jsx("div",{className:"scope-links",children:n[d.id]&&n[d.id].map&&((w=n[d.id])==null?void 0:w.map((x,L)=>O.jsxs("div",{className:"scope-link",children:[O.jsxs(L0,{to:`/datasets/${d.name}/explore/${x.name}`,children:["Explore ",x.name," - ",x.label,O.jsx("br",{}),O.jsx("img",{width:"120px",src:`${$f}/files/${d.id}/clusters/${x.cluster}.png`})]}),O.jsx("br",{})]},L)))})]},d.id)})})]})}const e1="http://localhost:5001/api";Ao.propTypes={data:qe.array.isRequired,tagset:qe.object,datasetId:qe.string,maxRows:qe.number,onTagset:qe.func,onHover:qe.func,onClick:qe.func};function Ao({data:e,tagset:t,datasetId:n,maxRows:r,onTagset:i,onHover:a,onClick:o}){if(!e.length)return O.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let u;function f(h,d){console.log("tag",h),console.log("index",d),console.log("tagset",t),console.log("tagset[tag]",t[h]),t[h].includes(d)?(console.log("removing"),fetch(`${e1}/tags/remove?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("removed",w),i(w)})):(console.log("adding"),fetch(`${e1}/tags/add?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("added",w),i(w)}))}t&&(u=Object.keys(t));const p=r?e.slice(0,r):e;return O.jsxs(O.Fragment,{children:[O.jsxs("table",{className:"datatable",children:[O.jsx("thead",{children:O.jsxs("tr",{children:[l.map((h,d)=>O.jsx("th",{children:h},d)),u?O.jsx("th",{children:"tags"}):null]})}),O.jsx("tbody",{children:p.map((h,d)=>O.jsxs("tr",{onMouseEnter:()=>a&&a(h.index),onMouseLeave:()=>a&&a(),onClick:()=>o&&o(h.index),children:[l.map((w,x)=>O.jsx("td",{children:h[w]},x)),u?O.jsx("td",{children:u.map((w,x)=>O.jsx("button",{onClick:L=>{f(w,h.index),L.preventDefault(),L.stopPropagation()},className:t[w].includes(h.index)?"tag-active":"tag-inactive",children:w},x))}):null]},d))})]}),r&&e.length>r?O.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const p_=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),Mv=(e,t)=>t?e.toLowerCase():e,v_=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const a=Mv(n,t);return e[a]||(e[a]=[],e.__times__[a]=[]),e[a].push(r),e.__times__[a].push(+i||1/0),{event:a,handler:r}},Fv=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=Mv(n,t);if(!e[i])return;const a=e[i].indexOf(r);a===-1||a>=e[i].length||(e[i].splice(a,1),e.__times__[i].splice(a,1))},t1=(e,t)=>()=>{e.forEach(n=>n(t))},g_=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=Fv(e);return(a,o,l={})=>{const u=Mv(a,n);if(!e[u])return;const f=[...e[u]];if(f.forEach((p,h)=>{--e.__times__[u][h]<1&&i(u,p)}),r||l.async?setTimeout(t1(f,o),0):t1(f,o)(),t&&!l.isNoGlobalBroadcast)try{p_.postMessage({event:u,news:o})}catch(p){if(p instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw p}}},uA=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},y_=()=>({__times__:{}}),cA=({async:e=!1,caseInsensitive:t=!1,stack:n=y_()}={})=>(n.__times__||(n.__times__={}),{publish:g_(n,{async:e,caseInsensitive:t}),subscribe:v_(n,{caseInsensitive:t}),unsubscribe:Fv(n,{caseInsensitive:t}),clear:uA(n),stack:n}),Gf=y_(),fA={publish:g_(Gf,{isGlobal:!0}),subscribe:v_(Gf),unsubscribe:Fv(Gf),stack:Gf};p_.onmessage=({data:{event:e,news:t}})=>fA.publish(e,t,{isNoGlobalBroadcast:!0});var x_={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(PS,function(){var n=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray},r=function(c,g){for(var R=Object.keys(g),X=0;X<R.length;++X)c[R[X]]=g[R[X]];return c},i=`
`;function a(c){return typeof atob<"u"?atob(c):"base64:"+c}function o(c){var g=new Error("(regl) "+c);throw console.error(g),g}function l(c,g){c||o(g)}function u(c){return c?": "+c:""}function f(c,g,R){c in g||o("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(g).join())}function p(c,g){n(c)||o("invalid parameter type"+u(g)+". must be a typed array")}function h(c,g){switch(g){case"number":return typeof c=="number";case"object":return typeof c=="object";case"string":return typeof c=="string";case"boolean":return typeof c=="boolean";case"function":return typeof c=="function";case"undefined":return typeof c>"u";case"symbol":return typeof c=="symbol"}}function d(c,g,R){h(c,g)||o("invalid parameter type"+u(R)+". expected "+g+", got "+typeof c)}function w(c,g){c>=0&&(c|0)===c||o("invalid parameter type, ("+c+")"+u(g)+". must be a nonnegative integer")}function x(c,g,R){g.indexOf(c)<0&&o("invalid value"+u(R)+". must be one of: "+g)}var L=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function I(c){Object.keys(c).forEach(function(g){L.indexOf(g)<0&&o('invalid regl constructor argument "'+g+'". must be one of '+L)})}function v(c,g){for(c=c+"";c.length<g;)c=" "+c;return c}function b(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(c,g){this.number=c,this.line=g,this.errors=[]}function H(c,g,R){this.file=c,this.line=g,this.message=R}function q(){var c=new Error,g=(c.stack||c).toString(),R=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(g);if(R)return R[1];var X=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(g);return X?X[1]:"unknown"}function ie(){var c=new Error,g=(c.stack||c).toString(),R=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(g);if(R)return R[1];var X=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(g);return X?X[1]:"unknown"}function we(c,g){var R=c.split(`
`),X=1,te=0,W={unknown:new b,0:new b};W.unknown.name=W[0].name=g||q(),W.unknown.lines.push(new C(0,""));for(var K=0;K<R.length;++K){var fe=R[K],ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fe);if(ce)switch(ce[1]){case"line":var ge=/(\d+)(\s+\d+)?/.exec(ce[2]);ge&&(X=ge[1]|0,ge[2]&&(te=ge[2]|0,te in W||(W[te]=new b)));break;case"define":var xe=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ce[2]);xe&&(W[te].name=xe[1]?a(xe[2]):xe[2]);break}W[te].lines.push(new C(X++,fe))}return Object.keys(W).forEach(function(ye){var Te=W[ye];Te.lines.forEach(function(de){Te.index[de.number]=de})}),W}function se(c){var g=[];return c.split(`
`).forEach(function(R){if(!(R.length<5)){var X=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(R);X?g.push(new H(X[1]|0,X[2]|0,X[3].trim())):R.length>0&&g.push(new H("unknown",0,R))}}),g}function at(c,g){g.forEach(function(R){var X=c[R.file];if(X){var te=X.index[R.line];if(te){te.errors.push(R),X.hasErrors=!0;return}}c.unknown.hasErrors=!0,c.unknown.lines[0].errors.push(R)})}function Ve(c,g,R,X,te){if(!c.getShaderParameter(g,c.COMPILE_STATUS)){var W=c.getShaderInfoLog(g),K=X===c.FRAGMENT_SHADER?"fragment":"vertex";ht(R,"string",K+" shader source must be a string",te);var fe=we(R,te),ce=se(W);at(fe,ce),Object.keys(fe).forEach(function(ge){var xe=fe[ge];if(!xe.hasErrors)return;var ye=[""],Te=[""];function de(ve,B){ye.push(ve),Te.push(B||"")}de("file number "+ge+": "+xe.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),xe.lines.forEach(function(ve){if(ve.errors.length>0){de(v(ve.number,4)+"|  ","background-color:yellow; font-weight:bold"),de(ve.line+i,"color:red; background-color:yellow; font-weight:bold");var B=0;ve.errors.forEach(function(Q){var he=Q.message,Fe=/^\s*'(.*)'\s*:\s*(.*)$/.exec(he);if(Fe){var le=Fe[1];switch(he=Fe[2],le){case"assign":le="=";break}B=Math.max(ve.line.indexOf(le,B),0)}else B=0;de(v("| ",6)),de(v("^^^",B+3)+i,"font-weight:bold"),de(v("| ",6)),de(he+i,"font-weight:bold")}),de(v("| ",6)+i)}else de(v(ve.number,4)+"|  "),de(ve.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Te[0]=ye.join("%c"),console.log.apply(console,Te)):console.log(ye.join(""))}),l.raise("Error compiling "+K+" shader, "+fe[0].name)}}function Se(c,g,R,X,te){if(!c.getProgramParameter(g,c.LINK_STATUS)){var W=c.getProgramInfoLog(g),K=we(R,te),fe=we(X,te),ce='Error linking program with vertex shader, "'+fe[0].name+'", and fragment shader "'+K[0].name+'"';typeof document<"u"?console.log("%c"+ce+i+"%c"+W,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ce+i+W),l.raise(ce)}}function Ke(c){c._commandRef=q()}function Qe(c,g,R,X){Ke(c);function te(ce){return ce?X.id(ce):0}c._fragId=te(c.static.frag),c._vertId=te(c.static.vert);function W(ce,ge){Object.keys(ge).forEach(function(xe){ce[X.id(xe)]=!0})}var K=c._uniformSet={};W(K,g.static),W(K,g.dynamic);var fe=c._attributeSet={};W(fe,R.static),W(fe,R.dynamic),c._hasCount="count"in c.static||"count"in c.dynamic||"elements"in c.static||"elements"in c.dynamic}function ze(c,g){var R=ie();o(c+" in command "+(g||q())+(R==="unknown"?"":" called from "+R))}function Pt(c,g,R){c||ze(g,R||q())}function mt(c,g,R,X){c in g||ze("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(g).join(),X||q())}function ht(c,g,R,X){h(c,g)||ze("invalid parameter type"+u(R)+". expected "+g+", got "+typeof c,X||q())}function pe(c){c()}function We(c,g,R){c.texture?x(c.texture._texture.internalformat,g,"unsupported texture format for attachment"):x(c.renderbuffer._renderbuffer.format,R,"unsupported renderbuffer format for attachment")}var Le=33071,Ee=9728,$e=9984,lt=9985,xt=9986,Wt=9987,Yt=5120,Qt=5121,It=5122,pt=5123,Xn=5124,dn=5125,Xt=5126,en=32819,Et=32820,St=33635,kt=34042,At=36193,Ct={};Ct[Yt]=Ct[Qt]=1,Ct[It]=Ct[pt]=Ct[At]=Ct[St]=Ct[en]=Ct[Et]=2,Ct[Xn]=Ct[dn]=Ct[Xt]=Ct[kt]=4;function Ut(c,g){return c===Et||c===en||c===St?2:c===kt?4:Ct[c]*g}function mn(c){return!(c&c-1)&&!!c}function ln(c,g,R){var X,te=g.width,W=g.height,K=g.channels;l(te>0&&te<=R.maxTextureSize&&W>0&&W<=R.maxTextureSize,"invalid texture shape"),(c.wrapS!==Le||c.wrapT!==Le)&&l(mn(te)&&mn(W),"incompatible wrap mode for texture, both width and height must be power of 2"),g.mipmask===1?te!==1&&W!==1&&l(c.minFilter!==$e&&c.minFilter!==xt&&c.minFilter!==lt&&c.minFilter!==Wt,"min filter requires mipmap"):(l(mn(te)&&mn(W),"texture must be a square power of 2 to support mipmapping"),l(g.mipmask===(te<<1)-1,"missing or incomplete mipmap data")),g.type===Xt&&(R.extensions.indexOf("oes_texture_float_linear")<0&&l(c.minFilter===Ee&&c.magFilter===Ee,"filter not supported, must enable oes_texture_float_linear"),l(!c.genMipmaps,"mipmap generation not supported with float textures"));var fe=g.images;for(X=0;X<16;++X)if(fe[X]){var ce=te>>X,ge=W>>X;l(g.mipmask&1<<X,"missing mipmap data");var xe=fe[X];if(l(xe.width===ce&&xe.height===ge,"invalid shape for mip images"),l(xe.format===g.format&&xe.internalformat===g.internalformat&&xe.type===g.type,"incompatible type for mip image"),!xe.compressed)if(xe.data){var ye=Math.ceil(Ut(xe.type,K)*ce/xe.unpackAlignment)*xe.unpackAlignment;l(xe.data.byteLength===ye*ge,"invalid data for image, buffer size is inconsistent with image format")}else xe.element||xe.copy}else c.genMipmaps||l((g.mipmask&1<<X)===0,"extra mipmap data");g.compressed&&l(!c.genMipmaps,"mipmap generation for compressed images not supported")}function Kr(c,g,R,X){var te=c.width,W=c.height,K=c.channels;l(te>0&&te<=X.maxTextureSize&&W>0&&W<=X.maxTextureSize,"invalid texture shape"),l(te===W,"cube map must be square"),l(g.wrapS===Le&&g.wrapT===Le,"wrap mode not supported by cube map");for(var fe=0;fe<R.length;++fe){var ce=R[fe];l(ce.width===te&&ce.height===W,"inconsistent cube map face shape"),g.genMipmaps&&(l(!ce.compressed,"can not generate mipmap for compressed textures"),l(ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ge=ce.images,xe=0;xe<16;++xe){var ye=ge[xe];if(ye){var Te=te>>xe,de=W>>xe;l(ce.mipmask&1<<xe,"missing mipmap data"),l(ye.width===Te&&ye.height===de,"invalid shape for mip images"),l(ye.format===c.format&&ye.internalformat===c.internalformat&&ye.type===c.type,"incompatible type for mip image"),ye.compressed||(ye.data?l(ye.data.byteLength===Te*de*Math.max(Ut(ye.type,K),ye.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ye.element||ye.copy)}}}}var y=r(l,{optional:pe,raise:o,commandRaise:ze,command:Pt,parameter:f,commandParameter:mt,constructor:I,type:d,commandType:ht,isTypedArray:p,nni:w,oneOf:x,shaderError:Ve,linkError:Se,callSite:ie,saveCommandRef:Ke,saveDrawInfo:Qe,framebufferFormat:We,guessCommand:q,texture2D:ln,textureCube:Kr}),wt=0,Ft=0,Ie=5,Kt=6;function gt(c,g){this.id=wt++,this.type=c,this.data=g}function De(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(c){if(c.length===0)return[];var g=c.charAt(0),R=c.charAt(c.length-1);if(c.length>1&&g===R&&(g==='"'||g==="'"))return['"'+De(c.substr(1,c.length-2))+'"'];var X=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c);if(X)return ut(c.substr(0,X.index)).concat(ut(X[1])).concat(ut(c.substr(X.index+X[0].length)));var te=c.split(".");if(te.length===1)return['"'+De(c)+'"'];for(var W=[],K=0;K<te.length;++K)W=W.concat(ut(te[K]));return W}function jt(c){return"["+ut(c).join("][")+"]"}function st(c,g){return new gt(c,jt(g+""))}function tn(c){return typeof c=="function"&&!c._reglType||c instanceof gt}function nn(c,g){if(typeof c=="function")return new gt(Ft,c);if(typeof c=="number"||typeof c=="boolean")return new gt(Ie,c);if(Array.isArray(c))return new gt(Kt,c.map(function(R,X){return nn(R,g+"["+X+"]")}));if(c instanceof gt)return c;y(!1,"invalid option type in uniform "+g)}var Rt={DynamicVariable:gt,define:st,isDynamic:tn,unbox:nn,accessor:jt},En={next:typeof requestAnimationFrame=="function"?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:typeof cancelAnimationFrame=="function"?function(c){return cancelAnimationFrame(c)}:clearTimeout},hn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Sr(){var c={"":0},g=[""];return{id:function(R){var X=c[R];return X||(X=c[R]=g.length,g.push(R),X)},str:function(R){return g[R]}}}function nr(c,g,R){var X=document.createElement("canvas");r(X.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),c.appendChild(X),c===document.body&&(X.style.position="absolute",r(c.style,{margin:0,padding:0}));function te(){var fe=window.innerWidth,ce=window.innerHeight;if(c!==document.body){var ge=X.getBoundingClientRect();fe=ge.right-ge.left,ce=ge.bottom-ge.top}X.width=R*fe,X.height=R*ce}var W;c!==document.body&&typeof ResizeObserver=="function"?(W=new ResizeObserver(function(){setTimeout(te)}),W.observe(c)):window.addEventListener("resize",te,!1);function K(){W?W.disconnect():window.removeEventListener("resize",te),c.removeChild(X)}return te(),{canvas:X,onDestroy:K}}function qr(c,g){function R(X){try{return c.getContext(X,g)}catch{return null}}return R("webgl")||R("experimental-webgl")||R("webgl-experimental")}function An(c){return typeof c.nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"}function fi(c){return typeof c.drawArrays=="function"||typeof c.drawElements=="function"}function ta(c){return typeof c=="string"?c.split():(y(Array.isArray(c),"invalid extension array"),c)}function Zr(c){return typeof c=="string"?(y(typeof document<"u","not supported outside of DOM"),document.querySelector(c)):c}function cr(c){var g=c||{},R,X,te,W,K={},fe=[],ce=[],ge=typeof window>"u"?1:window.devicePixelRatio,xe=!1,ye=function(ve){ve&&y.raise(ve)},Te=function(){};if(typeof g=="string"?(y(typeof document<"u","selector queries only supported in DOM enviroments"),R=document.querySelector(g),y(R,"invalid query string for element")):typeof g=="object"?An(g)?R=g:fi(g)?(W=g,te=W.canvas):(y.constructor(g),"gl"in g?W=g.gl:"canvas"in g?te=Zr(g.canvas):"container"in g&&(X=Zr(g.container)),"attributes"in g&&(K=g.attributes,y.type(K,"object","invalid context attributes")),"extensions"in g&&(fe=ta(g.extensions)),"optionalExtensions"in g&&(ce=ta(g.optionalExtensions)),"onDone"in g&&(y.type(g.onDone,"function","invalid or missing onDone callback"),ye=g.onDone),"profile"in g&&(xe=!!g.profile),"pixelRatio"in g&&(ge=+g.pixelRatio,y(ge>0,"invalid pixel ratio"))):y.raise("invalid arguments to regl"),R&&(R.nodeName.toLowerCase()==="canvas"?te=R:X=R),!W){if(!te){y(typeof document<"u","must manually specify webgl context outside of DOM environments");var de=nr(X||document.body,ye,ge);if(!de)return null;te=de.canvas,Te=de.onDestroy}K.premultipliedAlpha===void 0&&(K.premultipliedAlpha=!0),W=qr(te,K)}return W?{gl:W,canvas:te,container:X,extensions:fe,optionalExtensions:ce,pixelRatio:ge,profile:xe,onDone:ye,onDestroy:Te}:(Te(),ye("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Jr(c,g){var R={};function X(K){y.type(K,"string","extension name must be string");var fe=K.toLowerCase(),ce;try{ce=R[fe]=c.getExtension(fe)}catch{}return!!ce}for(var te=0;te<g.extensions.length;++te){var W=g.extensions[te];if(!X(W))return g.onDestroy(),g.onDone('"'+W+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return g.optionalExtensions.forEach(X),{extensions:R,restore:function(){Object.keys(R).forEach(function(K){if(R[K]&&!X(K))throw new Error("(regl): error restoring extension "+K)})}}}function rn(c,g){for(var R=Array(c),X=0;X<c;++X)R[X]=g(X);return R}var ue=5120,Ot=5121,Nn=5122,Yn=5123,Mr=5124,di=5125,Fr=5126;function Xa(c){for(var g=16;g<=1<<28;g*=16)if(c<=g)return g;return 0}function na(c){var g,R;return g=(c>65535)<<4,c>>>=g,R=(c>255)<<3,c>>>=R,g|=R,R=(c>15)<<2,c>>>=R,g|=R,R=(c>3)<<1,c>>>=R,g|=R,g|c>>1}function Bo(){var c=rn(8,function(){return[]});function g(W){var K=Xa(W),fe=c[na(K)>>2];return fe.length>0?fe.pop():new ArrayBuffer(K)}function R(W){c[na(W.byteLength)>>2].push(W)}function X(W,K){var fe=null;switch(W){case ue:fe=new Int8Array(g(K),0,K);break;case Ot:fe=new Uint8Array(g(K),0,K);break;case Nn:fe=new Int16Array(g(2*K),0,K);break;case Yn:fe=new Uint16Array(g(2*K),0,K);break;case Mr:fe=new Int32Array(g(4*K),0,K);break;case di:fe=new Uint32Array(g(4*K),0,K);break;case Fr:fe=new Float32Array(g(4*K),0,K);break;default:return null}return fe.length!==K?fe.subarray(0,K):fe}function te(W){R(W.buffer)}return{alloc:g,free:R,allocType:X,freeType:te}}var yt=Bo();yt.zero=Bo();var ki=3408,$o=3410,nc=3411,mi=3412,hi=3413,pi=3414,rc=3415,wr=33901,as=33902,Ya=3379,os=3386,Qa=34921,Go=36347,zo=36348,Uo=35661,Vo=35660,Ni=34930,Ka=36349,ls=34076,ss=34024,ic=7936,ra=7937,ia=7938,Ho=35724,aa=34047,us=36063,fr=34852,vi=3553,gi=34067,Ii=34069,In=33984,jr=6408,jn=5126,_n=5121,oa=36160,Wo=36053,Xo=36064,Yo=16384,ac=function(c,g){var R=1;g.ext_texture_filter_anisotropic&&(R=c.getParameter(aa));var X=1,te=1;g.webgl_draw_buffers&&(X=c.getParameter(fr),te=c.getParameter(us));var W=!!g.oes_texture_float;if(W){var K=c.createTexture();c.bindTexture(vi,K),c.texImage2D(vi,0,jr,1,1,0,jr,jn,null);var fe=c.createFramebuffer();if(c.bindFramebuffer(oa,fe),c.framebufferTexture2D(oa,Xo,vi,K,0),c.bindTexture(vi,null),c.checkFramebufferStatus(oa)!==Wo)W=!1;else{c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(Yo);var ce=yt.allocType(jn,4);c.readPixels(0,0,1,1,jr,jn,ce),c.getError()?W=!1:(c.deleteFramebuffer(fe),c.deleteTexture(K),W=ce[0]===1),yt.freeType(ce)}}var ge=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),xe=!0;if(!ge){var ye=c.createTexture(),Te=yt.allocType(_n,36);c.activeTexture(In),c.bindTexture(gi,ye),c.texImage2D(Ii,0,jr,3,3,0,jr,_n,Te),yt.freeType(Te),c.bindTexture(gi,null),c.deleteTexture(ye),xe=!c.getError()}return{colorBits:[c.getParameter($o),c.getParameter(nc),c.getParameter(mi),c.getParameter(hi)],depthBits:c.getParameter(pi),stencilBits:c.getParameter(rc),subpixelBits:c.getParameter(ki),extensions:Object.keys(g).filter(function(de){return!!g[de]}),maxAnisotropic:R,maxDrawbuffers:X,maxColorAttachments:te,pointSizeDims:c.getParameter(wr),lineWidthDims:c.getParameter(as),maxViewportDims:c.getParameter(os),maxCombinedTextureUnits:c.getParameter(Uo),maxCubeMapSize:c.getParameter(ls),maxRenderbufferSize:c.getParameter(ss),maxTextureUnits:c.getParameter(Ni),maxTextureSize:c.getParameter(Ya),maxAttributes:c.getParameter(Qa),maxVertexUniforms:c.getParameter(Go),maxVertexTextureUnits:c.getParameter(Vo),maxVaryingVectors:c.getParameter(zo),maxFragmentUniforms:c.getParameter(Ka),glsl:c.getParameter(Ho),renderer:c.getParameter(ra),vendor:c.getParameter(ic),version:c.getParameter(ia),readFloat:W,npotTextureCube:xe}};function dr(c){return!!c&&typeof c=="object"&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&typeof c.offset=="number"&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||n(c.data))}var rr=function(c){return Object.keys(c).map(function(g){return c[g]})},Tr={shape:ym,flatten:gm};function oc(c,g,R){for(var X=0;X<g;++X)R[X]=c[X]}function cs(c,g,R,X){for(var te=0,W=0;W<g;++W)for(var K=c[W],fe=0;fe<R;++fe)X[te++]=K[fe]}function Qo(c,g,R,X,te,W){for(var K=W,fe=0;fe<g;++fe)for(var ce=c[fe],ge=0;ge<R;++ge)for(var xe=ce[ge],ye=0;ye<X;++ye)te[K++]=xe[ye]}function fs(c,g,R,X,te){for(var W=1,K=R+1;K<g.length;++K)W*=g[K];var fe=g[R];if(g.length-R===4){var ce=g[R+1],ge=g[R+2],xe=g[R+3];for(K=0;K<fe;++K)Qo(c[K],ce,ge,xe,X,te),te+=W}else for(K=0;K<fe;++K)fs(c[K],g,R+1,X,te),te+=W}function gm(c,g,R,X){var te=1;if(g.length)for(var W=0;W<g.length;++W)te*=g[W];else te=0;var K=X||yt.allocType(R,te);switch(g.length){case 0:break;case 1:oc(c,g[0],K);break;case 2:cs(c,g[0],g[1],K);break;case 3:Qo(c,g[0],g[1],g[2],K,0);break;default:fs(c,g,0,K,0)}return K}function ym(c){for(var g=[],R=c;R.length;R=R[0])g.push(R.length);return g}var la={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},qa=5120,Di=5122,Ko=5124,xm=5121,qo=5123,sa=5125,Za=5126,ds=5126,ua={int8:qa,int16:Di,int32:Ko,uint8:xm,uint16:qo,uint32:sa,float:Za,float32:ds},Jv=35048,Cn=35040,Zo={dynamic:Jv,stream:Cn,static:35044},Ja=Tr.flatten,lc=Tr.shape,ms=35044,hs=35040,Jo=5121,el=5126,ei=[];ei[5120]=1,ei[5122]=2,ei[5124]=4,ei[5121]=1,ei[5123]=2,ei[5125]=4,ei[5126]=4;function eo(c){return la[Object.prototype.toString.call(c)]|0}function tl(c,g){for(var R=0;R<g.length;++R)c[R]=g[R]}function ps(c,g,R,X,te,W,K){for(var fe=0,ce=0;ce<R;++ce)for(var ge=0;ge<X;++ge)c[fe++]=g[te*ce+W*ge+K]}function vs(c,g,R,X){var te=0,W={};function K(B){this.id=te++,this.buffer=c.createBuffer(),this.type=B,this.usage=ms,this.byteLength=0,this.dimension=1,this.dtype=Jo,this.persistentData=null,R.profile&&(this.stats={size:0})}K.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)},K.prototype.destroy=function(){Te(this)};var fe=[];function ce(B,Q){var he=fe.pop();return he||(he=new K(B)),he.bind(),ye(he,Q,hs,0,1,!1),he}function ge(B){fe.push(B)}function xe(B,Q,he){B.byteLength=Q.byteLength,c.bufferData(B.type,Q,he)}function ye(B,Q,he,Fe,le,Ne){var Oe;if(B.usage=he,Array.isArray(Q)){if(B.dtype=Fe||el,Q.length>0){var Je;if(Array.isArray(Q[0])){Oe=lc(Q);for(var ne=1,ee=1;ee<Oe.length;++ee)ne*=Oe[ee];B.dimension=ne,Je=Ja(Q,Oe,B.dtype),xe(B,Je,he),Ne?B.persistentData=Je:yt.freeType(Je)}else if(typeof Q[0]=="number"){B.dimension=le;var Ue=yt.allocType(B.dtype,Q.length);tl(Ue,Q),xe(B,Ue,he),Ne?B.persistentData=Ue:yt.freeType(Ue)}else n(Q[0])?(B.dimension=Q[0].length,B.dtype=Fe||eo(Q[0])||el,Je=Ja(Q,[Q.length,Q[0].length],B.dtype),xe(B,Je,he),Ne?B.persistentData=Je:yt.freeType(Je)):y.raise("invalid buffer data")}}else if(n(Q))B.dtype=Fe||eo(Q),B.dimension=le,xe(B,Q,he),Ne&&(B.persistentData=new Uint8Array(new Uint8Array(Q.buffer)));else if(dr(Q)){Oe=Q.shape;var Ae=Q.stride,me=Q.offset,Ce=0,Re=0,ct=0,ot=0;Oe.length===1?(Ce=Oe[0],Re=1,ct=Ae[0],ot=0):Oe.length===2?(Ce=Oe[0],Re=Oe[1],ct=Ae[0],ot=Ae[1]):y.raise("invalid shape"),B.dtype=Fe||eo(Q.data)||el,B.dimension=Re;var Pe=yt.allocType(B.dtype,Ce*Re);ps(Pe,Q.data,Ce,Re,ct,ot,me),xe(B,Pe,he),Ne?B.persistentData=Pe:yt.freeType(Pe)}else Q instanceof ArrayBuffer?(B.dtype=Jo,B.dimension=le,xe(B,Q,he),Ne&&(B.persistentData=new Uint8Array(new Uint8Array(Q)))):y.raise("invalid buffer data")}function Te(B){g.bufferCount--,X(B);var Q=B.buffer;y(Q,"buffer must not be deleted already"),c.deleteBuffer(Q),B.buffer=null,delete W[B.id]}function de(B,Q,he,Fe){g.bufferCount++;var le=new K(Q);W[le.id]=le;function Ne(ne){var ee=ms,Ue=null,Ae=0,me=0,Ce=1;return Array.isArray(ne)||n(ne)||dr(ne)||ne instanceof ArrayBuffer?Ue=ne:typeof ne=="number"?Ae=ne|0:ne&&(y.type(ne,"object","buffer arguments must be an object, a number or an array"),"data"in ne&&(y(Ue===null||Array.isArray(Ue)||n(Ue)||dr(Ue),"invalid data for buffer"),Ue=ne.data),"usage"in ne&&(y.parameter(ne.usage,Zo,"invalid buffer usage"),ee=Zo[ne.usage]),"type"in ne&&(y.parameter(ne.type,ua,"invalid buffer type"),me=ua[ne.type]),"dimension"in ne&&(y.type(ne.dimension,"number","invalid dimension"),Ce=ne.dimension|0),"length"in ne&&(y.nni(Ae,"buffer length must be a nonnegative integer"),Ae=ne.length|0)),le.bind(),Ue?ye(le,Ue,ee,me,Ce,Fe):(Ae&&c.bufferData(le.type,Ae,ee),le.dtype=me||Jo,le.usage=ee,le.dimension=Ce,le.byteLength=Ae),R.profile&&(le.stats.size=le.byteLength*ei[le.dtype]),Ne}function Oe(ne,ee){y(ee+ne.byteLength<=le.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ne.byteLength+" starting from offset "+ee+" to a buffer of size "+le.byteLength),c.bufferSubData(le.type,ee,ne)}function Je(ne,ee){var Ue=(ee||0)|0,Ae;if(le.bind(),n(ne)||ne instanceof ArrayBuffer)Oe(ne,Ue);else if(Array.isArray(ne)){if(ne.length>0)if(typeof ne[0]=="number"){var me=yt.allocType(le.dtype,ne.length);tl(me,ne),Oe(me,Ue),yt.freeType(me)}else if(Array.isArray(ne[0])||n(ne[0])){Ae=lc(ne);var Ce=Ja(ne,Ae,le.dtype);Oe(Ce,Ue),yt.freeType(Ce)}else y.raise("invalid buffer data")}else if(dr(ne)){Ae=ne.shape;var Re=ne.stride,ct=0,ot=0,Pe=0,Me=0;Ae.length===1?(ct=Ae[0],ot=1,Pe=Re[0],Me=0):Ae.length===2?(ct=Ae[0],ot=Ae[1],Pe=Re[0],Me=Re[1]):y.raise("invalid shape");var nt=Array.isArray(ne.data)?le.dtype:eo(ne.data),ft=yt.allocType(nt,ct*ot);ps(ft,ne.data,ct,ot,Pe,Me,ne.offset),Oe(ft,Ue),yt.freeType(ft)}else y.raise("invalid data for buffer subdata");return Ne}return he||Ne(B),Ne._reglType="buffer",Ne._buffer=le,Ne.subdata=Je,R.profile&&(Ne.stats=le.stats),Ne.destroy=function(){Te(le)},Ne}function ve(){rr(W).forEach(function(B){B.buffer=c.createBuffer(),c.bindBuffer(B.type,B.buffer),c.bufferData(B.type,B.persistentData||B.byteLength,B.usage)})}return R.profile&&(g.getTotalBufferSize=function(){var B=0;return Object.keys(W).forEach(function(Q){B+=W[Q].stats.size}),B}),{create:de,createStream:ce,destroyStream:ge,clear:function(){rr(W).forEach(Te),fe.forEach(Te)},getBuffer:function(B){return B&&B._buffer instanceof K?B._buffer:null},restore:ve,_initBuffer:ye}}var Em=0,gs=0,_m=1,ys=1,Sm=4,wm=4,yi={points:Em,point:gs,lines:_m,line:ys,triangles:Sm,triangle:wm,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Tm=0,Mi=1,Fi=4,bm=5120,xi=5121,sc=5122,ca=5123,uc=5124,ti=5125,xs=34963,Am=35040,Es=35044;function _s(c,g,R,X){var te={},W=0,K={uint8:xi,uint16:ca};g.oes_element_index_uint&&(K.uint32=ti);function fe(ve){this.id=W++,te[this.id]=this,this.buffer=ve,this.primType=Fi,this.vertCount=0,this.type=0}fe.prototype.bind=function(){this.buffer.bind()};var ce=[];function ge(ve){var B=ce.pop();return B||(B=new fe(R.create(null,xs,!0,!1)._buffer)),ye(B,ve,Am,-1,-1,0,0),B}function xe(ve){ce.push(ve)}function ye(ve,B,Q,he,Fe,le,Ne){ve.buffer.bind();var Oe;if(B){var Je=Ne;!Ne&&(!n(B)||dr(B)&&!n(B.data))&&(Je=g.oes_element_index_uint?ti:ca),R._initBuffer(ve.buffer,B,Q,Je,3)}else c.bufferData(xs,le,Q),ve.buffer.dtype=Oe||xi,ve.buffer.usage=Q,ve.buffer.dimension=3,ve.buffer.byteLength=le;if(Oe=Ne,!Ne){switch(ve.buffer.dtype){case xi:case bm:Oe=xi;break;case ca:case sc:Oe=ca;break;case ti:case uc:Oe=ti;break;default:y.raise("unsupported type for element array")}ve.buffer.dtype=Oe}ve.type=Oe,y(Oe!==ti||!!g.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ne=Fe;ne<0&&(ne=ve.buffer.byteLength,Oe===ca?ne>>=1:Oe===ti&&(ne>>=2)),ve.vertCount=ne;var ee=he;if(he<0){ee=Fi;var Ue=ve.buffer.dimension;Ue===1&&(ee=Tm),Ue===2&&(ee=Mi),Ue===3&&(ee=Fi)}ve.primType=ee}function Te(ve){X.elementsCount--,y(ve.buffer!==null,"must not double destroy elements"),delete te[ve.id],ve.buffer.destroy(),ve.buffer=null}function de(ve,B){var Q=R.create(null,xs,!0),he=new fe(Q._buffer);X.elementsCount++;function Fe(le){if(!le)Q(),he.primType=Fi,he.vertCount=0,he.type=xi;else if(typeof le=="number")Q(le),he.primType=Fi,he.vertCount=le|0,he.type=xi;else{var Ne=null,Oe=Es,Je=-1,ne=-1,ee=0,Ue=0;Array.isArray(le)||n(le)||dr(le)?Ne=le:(y.type(le,"object","invalid arguments for elements"),"data"in le&&(Ne=le.data,y(Array.isArray(Ne)||n(Ne)||dr(Ne),"invalid data for element buffer")),"usage"in le&&(y.parameter(le.usage,Zo,"invalid element buffer usage"),Oe=Zo[le.usage]),"primitive"in le&&(y.parameter(le.primitive,yi,"invalid element buffer primitive"),Je=yi[le.primitive]),"count"in le&&(y(typeof le.count=="number"&&le.count>=0,"invalid vertex count for elements"),ne=le.count|0),"type"in le&&(y.parameter(le.type,K,"invalid buffer type"),Ue=K[le.type]),"length"in le?ee=le.length|0:(ee=ne,Ue===ca||Ue===sc?ee*=2:(Ue===ti||Ue===uc)&&(ee*=4))),ye(he,Ne,Oe,Je,ne,ee,Ue)}return Fe}return Fe(ve),Fe._reglType="elements",Fe._elements=he,Fe.subdata=function(le,Ne){return Q.subdata(le,Ne),Fe},Fe.destroy=function(){Te(he)},Fe}return{create:de,createStream:ge,destroyStream:xe,getElements:function(ve){return typeof ve=="function"&&ve._elements instanceof fe?ve._elements:null},clear:function(){rr(te).forEach(Te)}}}var cc=new Float32Array(1),Cm=new Uint32Array(cc.buffer),Lm=5123;function fc(c){for(var g=yt.allocType(Lm,c.length),R=0;R<c.length;++R)if(isNaN(c[R]))g[R]=65535;else if(c[R]===1/0)g[R]=31744;else if(c[R]===-1/0)g[R]=64512;else{cc[0]=c[R];var X=Cm[0],te=X>>>31<<15,W=(X<<1>>>24)-127,K=X>>13&1023;if(W<-24)g[R]=te;else if(W<-14){var fe=-14-W;g[R]=te+(K+1024>>fe)}else W>15?g[R]=te+31744:g[R]=te+(W+15<<10)+K}return g}function Zt(c){return Array.isArray(c)||n(c)}var dc=function(c){return!(c&c-1)&&!!c},Rm=34467,Br=3553,Ss=34067,nl=34069,ji=6408,ws=6406,rl=6407,Bi=6409,il=6410,mc=32854,Ts=32855,bs=36194,Om=32819,Pm=32820,km=33635,hc=34042,al=6402,to=34041,no=35904,ro=35906,fa=36193,$i=33776,As=33777,Cs=33778,Ls=33779,pc=35986,vc=35987,gc=34798,yc=35840,xc=35841,Ec=35842,_c=35843,Sc=36196,da=5121,Rs=5123,Os=5125,br=5126,Nm=10242,Im=10243,Dm=10497,Ps=33071,Mm=33648,Fm=10240,jm=10241,ks=9728,Bm=9729,ol=9984,Ns=9985,wc=9986,Is=9987,$m=33170,io=4352,Tc=4353,Gm=4354,zm=34046,Um=3317,Vm=37440,Hm=37441,Wm=37443,ma=37444,ao=33984,bc=[ol,wc,Ns,Is],oo=[0,Bi,il,rl,ji],Ar={};Ar[Bi]=Ar[ws]=Ar[al]=1,Ar[to]=Ar[il]=2,Ar[rl]=Ar[no]=3,Ar[ji]=Ar[ro]=4;function ha(c){return"[object "+c+"]"}var Ac=ha("HTMLCanvasElement"),Cc=ha("OffscreenCanvas"),Lc=ha("CanvasRenderingContext2D"),Rc=ha("ImageBitmap"),Oc=ha("HTMLImageElement"),ll=ha("HTMLVideoElement"),Xm=Object.keys(la).concat([Ac,Cc,Lc,Rc,Oc,ll]),pa=[];pa[da]=1,pa[br]=4,pa[fa]=2,pa[Rs]=2,pa[Os]=4;var Ln=[];Ln[mc]=2,Ln[Ts]=2,Ln[bs]=2,Ln[to]=4,Ln[$i]=.5,Ln[As]=.5,Ln[Cs]=1,Ln[Ls]=1,Ln[pc]=.5,Ln[vc]=1,Ln[gc]=1,Ln[yc]=.5,Ln[xc]=.25,Ln[Ec]=.5,Ln[_c]=.25,Ln[Sc]=.5;function Pc(c){return Array.isArray(c)&&(c.length===0||typeof c[0]=="number")}function Ds(c){if(!Array.isArray(c))return!1;var g=c.length;return!(g===0||!Zt(c[0]))}function Gi(c){return Object.prototype.toString.call(c)}function Ms(c){return Gi(c)===Ac}function kc(c){return Gi(c)===Cc}function Ym(c){return Gi(c)===Lc}function Fs(c){return Gi(c)===Rc}function Nc(c){return Gi(c)===Oc}function Ic(c){return Gi(c)===ll}function js(c){if(!c)return!1;var g=Gi(c);return Xm.indexOf(g)>=0?!0:Pc(c)||Ds(c)||dr(c)}function Dc(c){return la[Object.prototype.toString.call(c)]|0}function Qm(c,g){var R=g.length;switch(c.type){case da:case Rs:case Os:case br:var X=yt.allocType(c.type,R);X.set(g),c.data=X;break;case fa:c.data=fc(g);break;default:y.raise("unsupported texture type, must specify a typed array")}}function Mc(c,g){return yt.allocType(c.type===fa?br:c.type,g)}function Fc(c,g){c.type===fa?(c.data=fc(g),yt.freeType(g)):c.data=g}function jc(c,g,R,X,te,W){for(var K=c.width,fe=c.height,ce=c.channels,ge=K*fe*ce,xe=Mc(c,ge),ye=0,Te=0;Te<fe;++Te)for(var de=0;de<K;++de)for(var ve=0;ve<ce;++ve)xe[ye++]=g[R*de+X*Te+te*ve+W];Fc(c,xe)}function sl(c,g,R,X,te,W){var K;if(typeof Ln[c]<"u"?K=Ln[c]:K=Ar[c]*pa[g],W&&(K*=6),te){for(var fe=0,ce=R;ce>=1;)fe+=K*ce*ce,ce/=2;return fe}else return K*R*X}function Km(c,g,R,X,te,W,K){var fe={"don't care":io,"dont care":io,nice:Gm,fast:Tc},ce={repeat:Dm,clamp:Ps,mirror:Mm},ge={nearest:ks,linear:Bm},xe=r({mipmap:Is,"nearest mipmap nearest":ol,"linear mipmap nearest":Ns,"nearest mipmap linear":wc,"linear mipmap linear":Is},ge),ye={none:0,browser:ma},Te={uint8:da,rgba4:Om,rgb565:km,"rgb5 a1":Pm},de={alpha:ws,luminance:Bi,"luminance alpha":il,rgb:rl,rgba:ji,rgba4:mc,"rgb5 a1":Ts,rgb565:bs},ve={};g.ext_srgb&&(de.srgb=no,de.srgba=ro),g.oes_texture_float&&(Te.float32=Te.float=br),g.oes_texture_half_float&&(Te.float16=Te["half float"]=fa),g.webgl_depth_texture&&(r(de,{depth:al,"depth stencil":to}),r(Te,{uint16:Rs,uint32:Os,"depth stencil":hc})),g.webgl_compressed_texture_s3tc&&r(ve,{"rgb s3tc dxt1":$i,"rgba s3tc dxt1":As,"rgba s3tc dxt3":Cs,"rgba s3tc dxt5":Ls}),g.webgl_compressed_texture_atc&&r(ve,{"rgb atc":pc,"rgba atc explicit alpha":vc,"rgba atc interpolated alpha":gc}),g.webgl_compressed_texture_pvrtc&&r(ve,{"rgb pvrtc 4bppv1":yc,"rgb pvrtc 2bppv1":xc,"rgba pvrtc 4bppv1":Ec,"rgba pvrtc 2bppv1":_c}),g.webgl_compressed_texture_etc1&&(ve["rgb etc1"]=Sc);var B=Array.prototype.slice.call(c.getParameter(Rm));Object.keys(ve).forEach(function(T){var Y=ve[T];B.indexOf(Y)>=0&&(de[T]=Y)});var Q=Object.keys(de);R.textureFormats=Q;var he=[];Object.keys(de).forEach(function(T){var Y=de[T];he[Y]=T});var Fe=[];Object.keys(Te).forEach(function(T){var Y=Te[T];Fe[Y]=T});var le=[];Object.keys(ge).forEach(function(T){var Y=ge[T];le[Y]=T});var Ne=[];Object.keys(xe).forEach(function(T){var Y=xe[T];Ne[Y]=T});var Oe=[];Object.keys(ce).forEach(function(T){var Y=ce[T];Oe[Y]=T});var Je=Q.reduce(function(T,Y){var V=de[Y];return V===Bi||V===ws||V===Bi||V===il||V===al||V===to||g.ext_srgb&&(V===no||V===ro)?T[V]=V:V===Ts||Y.indexOf("rgba")>=0?T[V]=ji:T[V]=rl,T},{});function ne(){this.internalformat=ji,this.format=ji,this.type=da,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ma,this.width=0,this.height=0,this.channels=0}function ee(T,Y){T.internalformat=Y.internalformat,T.format=Y.format,T.type=Y.type,T.compressed=Y.compressed,T.premultiplyAlpha=Y.premultiplyAlpha,T.flipY=Y.flipY,T.unpackAlignment=Y.unpackAlignment,T.colorSpace=Y.colorSpace,T.width=Y.width,T.height=Y.height,T.channels=Y.channels}function Ue(T,Y){if(!(typeof Y!="object"||!Y)){if("premultiplyAlpha"in Y&&(y.type(Y.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),T.premultiplyAlpha=Y.premultiplyAlpha),"flipY"in Y&&(y.type(Y.flipY,"boolean","invalid texture flip"),T.flipY=Y.flipY),"alignment"in Y&&(y.oneOf(Y.alignment,[1,2,4,8],"invalid texture unpack alignment"),T.unpackAlignment=Y.alignment),"colorSpace"in Y&&(y.parameter(Y.colorSpace,ye,"invalid colorSpace"),T.colorSpace=ye[Y.colorSpace]),"type"in Y){var V=Y.type;y(g.oes_texture_float||!(V==="float"||V==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),y(g.oes_texture_half_float||!(V==="half float"||V==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),y(g.webgl_depth_texture||!(V==="uint16"||V==="uint32"||V==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(V,Te,"invalid texture type"),T.type=Te[V]}var Ge=T.width,_t=T.height,E=T.channels,m=!1;"shape"in Y?(y(Array.isArray(Y.shape)&&Y.shape.length>=2,"shape must be an array"),Ge=Y.shape[0],_t=Y.shape[1],Y.shape.length===3&&(E=Y.shape[2],y(E>0&&E<=4,"invalid number of channels"),m=!0),y(Ge>=0&&Ge<=R.maxTextureSize,"invalid width"),y(_t>=0&&_t<=R.maxTextureSize,"invalid height")):("radius"in Y&&(Ge=_t=Y.radius,y(Ge>=0&&Ge<=R.maxTextureSize,"invalid radius")),"width"in Y&&(Ge=Y.width,y(Ge>=0&&Ge<=R.maxTextureSize,"invalid width")),"height"in Y&&(_t=Y.height,y(_t>=0&&_t<=R.maxTextureSize,"invalid height")),"channels"in Y&&(E=Y.channels,y(E>0&&E<=4,"invalid number of channels"),m=!0)),T.width=Ge|0,T.height=_t|0,T.channels=E|0;var P=!1;if("format"in Y){var F=Y.format;y(g.webgl_depth_texture||!(F==="depth"||F==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(F,de,"invalid texture format");var $=T.internalformat=de[F];T.format=Je[$],F in Te&&("type"in Y||(T.type=Te[F])),F in ve&&(T.compressed=!0),P=!0}!m&&P?T.channels=Ar[T.format]:m&&!P?T.channels!==oo[T.format]&&(T.format=T.internalformat=oo[T.channels]):P&&m&&y(T.channels===Ar[T.format],"number of channels inconsistent with specified format")}}function Ae(T){c.pixelStorei(Vm,T.flipY),c.pixelStorei(Hm,T.premultiplyAlpha),c.pixelStorei(Wm,T.colorSpace),c.pixelStorei(Um,T.unpackAlignment)}function me(){ne.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ce(T,Y){var V=null;if(js(Y)?V=Y:Y&&(y.type(Y,"object","invalid pixel data type"),Ue(T,Y),"x"in Y&&(T.xOffset=Y.x|0),"y"in Y&&(T.yOffset=Y.y|0),js(Y.data)&&(V=Y.data)),y(!T.compressed||V instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Y.copy){y(!V,"can not specify copy and data field for the same texture");var Ge=te.viewportWidth,_t=te.viewportHeight;T.width=T.width||Ge-T.xOffset,T.height=T.height||_t-T.yOffset,T.needsCopy=!0,y(T.xOffset>=0&&T.xOffset<Ge&&T.yOffset>=0&&T.yOffset<_t&&T.width>0&&T.width<=Ge&&T.height>0&&T.height<=_t,"copy texture read out of bounds")}else if(!V)T.width=T.width||1,T.height=T.height||1,T.channels=T.channels||4;else if(n(V))T.channels=T.channels||4,T.data=V,!("type"in Y)&&T.type===da&&(T.type=Dc(V));else if(Pc(V))T.channels=T.channels||4,Qm(T,V),T.alignment=1,T.needsFree=!0;else if(dr(V)){var E=V.data;!Array.isArray(E)&&T.type===da&&(T.type=Dc(E));var m=V.shape,P=V.stride,F,$,N,k,M,_;m.length===3?(N=m[2],_=P[2]):(y(m.length===2,"invalid ndarray pixel data, must be 2 or 3D"),N=1,_=1),F=m[0],$=m[1],k=P[0],M=P[1],T.alignment=1,T.width=F,T.height=$,T.channels=N,T.format=T.internalformat=oo[N],T.needsFree=!0,jc(T,E,k,M,_,V.offset)}else if(Ms(V)||kc(V)||Ym(V))Ms(V)||kc(V)?T.element=V:T.element=V.canvas,T.width=T.element.width,T.height=T.element.height,T.channels=4;else if(Fs(V))T.element=V,T.width=V.width,T.height=V.height,T.channels=4;else if(Nc(V))T.element=V,T.width=V.naturalWidth,T.height=V.naturalHeight,T.channels=4;else if(Ic(V))T.element=V,T.width=V.videoWidth,T.height=V.videoHeight,T.channels=4;else if(Ds(V)){var A=T.width||V[0].length,S=T.height||V.length,U=T.channels;Zt(V[0][0])?U=U||V[0][0].length:U=U||1;for(var G=Tr.shape(V),J=1,re=0;re<G.length;++re)J*=G[re];var _e=Mc(T,J);Tr.flatten(V,G,"",_e),Fc(T,_e),T.alignment=1,T.width=A,T.height=S,T.channels=U,T.format=T.internalformat=oo[U],T.needsFree=!0}T.type===br?y(R.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):T.type===fa&&y(R.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Re(T,Y,V){var Ge=T.element,_t=T.data,E=T.internalformat,m=T.format,P=T.type,F=T.width,$=T.height;Ae(T),Ge?c.texImage2D(Y,V,m,m,P,Ge):T.compressed?c.compressedTexImage2D(Y,V,E,F,$,0,_t):T.needsCopy?(X(),c.copyTexImage2D(Y,V,m,T.xOffset,T.yOffset,F,$,0)):c.texImage2D(Y,V,m,F,$,0,m,P,_t||null)}function ct(T,Y,V,Ge,_t){var E=T.element,m=T.data,P=T.internalformat,F=T.format,$=T.type,N=T.width,k=T.height;Ae(T),E?c.texSubImage2D(Y,_t,V,Ge,F,$,E):T.compressed?c.compressedTexSubImage2D(Y,_t,V,Ge,P,N,k,m):T.needsCopy?(X(),c.copyTexSubImage2D(Y,_t,V,Ge,T.xOffset,T.yOffset,N,k)):c.texSubImage2D(Y,_t,V,Ge,N,k,F,$,m)}var ot=[];function Pe(){return ot.pop()||new me}function Me(T){T.needsFree&&yt.freeType(T.data),me.call(T),ot.push(T)}function nt(){ne.call(this),this.genMipmaps=!1,this.mipmapHint=io,this.mipmask=0,this.images=Array(16)}function ft(T,Y,V){var Ge=T.images[0]=Pe();T.mipmask=1,Ge.width=T.width=Y,Ge.height=T.height=V,Ge.channels=T.channels=4}function Tt(T,Y){var V=null;if(js(Y))V=T.images[0]=Pe(),ee(V,T),Ce(V,Y),T.mipmask=1;else if(Ue(T,Y),Array.isArray(Y.mipmap))for(var Ge=Y.mipmap,_t=0;_t<Ge.length;++_t)V=T.images[_t]=Pe(),ee(V,T),V.width>>=_t,V.height>>=_t,Ce(V,Ge[_t]),T.mipmask|=1<<_t;else V=T.images[0]=Pe(),ee(V,T),Ce(V,Y),T.mipmask=1;ee(T,T.images[0]),T.compressed&&(T.internalformat===$i||T.internalformat===As||T.internalformat===Cs||T.internalformat===Ls)&&y(T.width%4===0&&T.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function an(T,Y){for(var V=T.images,Ge=0;Ge<V.length;++Ge){if(!V[Ge])return;Re(V[Ge],Y,Ge)}}var sn=[];function Lt(){var T=sn.pop()||new nt;ne.call(T),T.mipmask=0;for(var Y=0;Y<16;++Y)T.images[Y]=null;return T}function Rn(T){for(var Y=T.images,V=0;V<Y.length;++V)Y[V]&&Me(Y[V]),Y[V]=null;sn.push(T)}function Jt(){this.minFilter=ks,this.magFilter=ks,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=io}function Tn(T,Y){if("min"in Y){var V=Y.min;y.parameter(V,xe),T.minFilter=xe[V],bc.indexOf(T.minFilter)>=0&&!("faces"in Y)&&(T.genMipmaps=!0)}if("mag"in Y){var Ge=Y.mag;y.parameter(Ge,ge),T.magFilter=ge[Ge]}var _t=T.wrapS,E=T.wrapT;if("wrap"in Y){var m=Y.wrap;typeof m=="string"?(y.parameter(m,ce),_t=E=ce[m]):Array.isArray(m)&&(y.parameter(m[0],ce),y.parameter(m[1],ce),_t=ce[m[0]],E=ce[m[1]])}else{if("wrapS"in Y){var P=Y.wrapS;y.parameter(P,ce),_t=ce[P]}if("wrapT"in Y){var F=Y.wrapT;y.parameter(F,ce),E=ce[F]}}if(T.wrapS=_t,T.wrapT=E,"anisotropic"in Y){var $=Y.anisotropic;y(typeof $=="number"&&$>=1&&$<=R.maxAnisotropic,"aniso samples must be between 1 and "),T.anisotropic=Y.anisotropic}if("mipmap"in Y){var N=!1;switch(typeof Y.mipmap){case"string":y.parameter(Y.mipmap,fe,"invalid mipmap hint"),T.mipmapHint=fe[Y.mipmap],T.genMipmaps=!0,N=!0;break;case"boolean":N=T.genMipmaps=Y.mipmap;break;case"object":y(Array.isArray(Y.mipmap),"invalid mipmap type"),T.genMipmaps=!1,N=!0;break;default:y.raise("invalid mipmap type")}N&&!("min"in Y)&&(T.minFilter=ol)}}function On(T,Y){c.texParameteri(Y,jm,T.minFilter),c.texParameteri(Y,Fm,T.magFilter),c.texParameteri(Y,Nm,T.wrapS),c.texParameteri(Y,Im,T.wrapT),g.ext_texture_filter_anisotropic&&c.texParameteri(Y,zm,T.anisotropic),T.genMipmaps&&(c.hint($m,T.mipmapHint),c.generateMipmap(Y))}var Pn=0,Bn={},zn=R.maxTextureUnits,pn=Array(zn).map(function(){return null});function vt(T){ne.call(this),this.mipmask=0,this.internalformat=ji,this.id=Pn++,this.refCount=1,this.target=T,this.texture=c.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Jt,K.profile&&(this.stats={size:0})}function Un(T){c.activeTexture(ao),c.bindTexture(T.target,T.texture)}function $t(){var T=pn[0];T?c.bindTexture(T.target,T.texture):c.bindTexture(Br,null)}function tt(T){var Y=T.texture;y(Y,"must not double destroy texture");var V=T.unit,Ge=T.target;V>=0&&(c.activeTexture(ao+V),c.bindTexture(Ge,null),pn[V]=null),c.deleteTexture(Y),T.texture=null,T.params=null,T.pixels=null,T.refCount=0,delete Bn[T.id],W.textureCount--}r(vt.prototype,{bind:function(){var T=this;T.bindCount+=1;var Y=T.unit;if(Y<0){for(var V=0;V<zn;++V){var Ge=pn[V];if(Ge){if(Ge.bindCount>0)continue;Ge.unit=-1}pn[V]=T,Y=V;break}Y>=zn&&y.raise("insufficient number of texture units"),K.profile&&W.maxTextureUnits<Y+1&&(W.maxTextureUnits=Y+1),T.unit=Y,c.activeTexture(ao+Y),c.bindTexture(T.target,T.texture)}return Y},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tt(this)}});function bt(T,Y){var V=new vt(Br);Bn[V.id]=V,W.textureCount++;function Ge(m,P){var F=V.texInfo;Jt.call(F);var $=Lt();return typeof m=="number"?typeof P=="number"?ft($,m|0,P|0):ft($,m|0,m|0):m?(y.type(m,"object","invalid arguments to regl.texture"),Tn(F,m),Tt($,m)):ft($,1,1),F.genMipmaps&&($.mipmask=($.width<<1)-1),V.mipmask=$.mipmask,ee(V,$),y.texture2D(F,$,R),V.internalformat=$.internalformat,Ge.width=$.width,Ge.height=$.height,Un(V),an($,Br),On(F,Br),$t(),Rn($),K.profile&&(V.stats.size=sl(V.internalformat,V.type,$.width,$.height,F.genMipmaps,!1)),Ge.format=he[V.internalformat],Ge.type=Fe[V.type],Ge.mag=le[F.magFilter],Ge.min=Ne[F.minFilter],Ge.wrapS=Oe[F.wrapS],Ge.wrapT=Oe[F.wrapT],Ge}function _t(m,P,F,$){y(!!m,"must specify image data");var N=P|0,k=F|0,M=$|0,_=Pe();return ee(_,V),_.width=0,_.height=0,Ce(_,m),_.width=_.width||(V.width>>M)-N,_.height=_.height||(V.height>>M)-k,y(V.type===_.type&&V.format===_.format&&V.internalformat===_.internalformat,"incompatible format for texture.subimage"),y(N>=0&&k>=0&&N+_.width<=V.width&&k+_.height<=V.height,"texture.subimage write out of bounds"),y(V.mipmask&1<<M,"missing mipmap data"),y(_.data||_.element||_.needsCopy,"missing image data"),Un(V),ct(_,Br,N,k,M),$t(),Me(_),Ge}function E(m,P){var F=m|0,$=P|0||F;if(F===V.width&&$===V.height)return Ge;Ge.width=V.width=F,Ge.height=V.height=$,Un(V);for(var N=0;V.mipmask>>N;++N){var k=F>>N,M=$>>N;if(!k||!M)break;c.texImage2D(Br,N,V.format,k,M,0,V.format,V.type,null)}return $t(),K.profile&&(V.stats.size=sl(V.internalformat,V.type,F,$,!1,!1)),Ge}return Ge(T,Y),Ge.subimage=_t,Ge.resize=E,Ge._reglType="texture2d",Ge._texture=V,K.profile&&(Ge.stats=V.stats),Ge.destroy=function(){V.decRef()},Ge}function Nt(T,Y,V,Ge,_t,E){var m=new vt(Ss);Bn[m.id]=m,W.cubeCount++;var P=new Array(6);function F(k,M,_,A,S,U){var G,J=m.texInfo;for(Jt.call(J),G=0;G<6;++G)P[G]=Lt();if(typeof k=="number"||!k){var re=k|0||1;for(G=0;G<6;++G)ft(P[G],re,re)}else if(typeof k=="object")if(M)Tt(P[0],k),Tt(P[1],M),Tt(P[2],_),Tt(P[3],A),Tt(P[4],S),Tt(P[5],U);else if(Tn(J,k),Ue(m,k),"faces"in k){var _e=k.faces;for(y(Array.isArray(_e)&&_e.length===6,"cube faces must be a length 6 array"),G=0;G<6;++G)y(typeof _e[G]=="object"&&!!_e[G],"invalid input for cube map face"),ee(P[G],m),Tt(P[G],_e[G])}else for(G=0;G<6;++G)Tt(P[G],k);else y.raise("invalid arguments to cube map");for(ee(m,P[0]),y.optional(function(){R.npotTextureCube||y(dc(m.width)&&dc(m.height),"your browser does not support non power or two texture dimensions")}),J.genMipmaps?m.mipmask=(P[0].width<<1)-1:m.mipmask=P[0].mipmask,y.textureCube(m,J,P,R),m.internalformat=P[0].internalformat,F.width=P[0].width,F.height=P[0].height,Un(m),G=0;G<6;++G)an(P[G],nl+G);for(On(J,Ss),$t(),K.profile&&(m.stats.size=sl(m.internalformat,m.type,F.width,F.height,J.genMipmaps,!0)),F.format=he[m.internalformat],F.type=Fe[m.type],F.mag=le[J.magFilter],F.min=Ne[J.minFilter],F.wrapS=Oe[J.wrapS],F.wrapT=Oe[J.wrapT],G=0;G<6;++G)Rn(P[G]);return F}function $(k,M,_,A,S){y(!!M,"must specify image data"),y(typeof k=="number"&&k===(k|0)&&k>=0&&k<6,"invalid face");var U=_|0,G=A|0,J=S|0,re=Pe();return ee(re,m),re.width=0,re.height=0,Ce(re,M),re.width=re.width||(m.width>>J)-U,re.height=re.height||(m.height>>J)-G,y(m.type===re.type&&m.format===re.format&&m.internalformat===re.internalformat,"incompatible format for texture.subimage"),y(U>=0&&G>=0&&U+re.width<=m.width&&G+re.height<=m.height,"texture.subimage write out of bounds"),y(m.mipmask&1<<J,"missing mipmap data"),y(re.data||re.element||re.needsCopy,"missing image data"),Un(m),ct(re,nl+k,U,G,J),$t(),Me(re),F}function N(k){var M=k|0;if(M!==m.width){F.width=m.width=M,F.height=m.height=M,Un(m);for(var _=0;_<6;++_)for(var A=0;m.mipmask>>A;++A)c.texImage2D(nl+_,A,m.format,M>>A,M>>A,0,m.format,m.type,null);return $t(),K.profile&&(m.stats.size=sl(m.internalformat,m.type,F.width,F.height,!1,!0)),F}}return F(T,Y,V,Ge,_t,E),F.subimage=$,F.resize=N,F._reglType="textureCube",F._texture=m,K.profile&&(F.stats=m.stats),F.destroy=function(){m.decRef()},F}function vn(){for(var T=0;T<zn;++T)c.activeTexture(ao+T),c.bindTexture(Br,null),pn[T]=null;rr(Bn).forEach(tt),W.cubeCount=0,W.textureCount=0}K.profile&&(W.getTotalTextureSize=function(){var T=0;return Object.keys(Bn).forEach(function(Y){T+=Bn[Y].stats.size}),T});function Si(){for(var T=0;T<zn;++T){var Y=pn[T];Y&&(Y.bindCount=0,Y.unit=-1,pn[T]=null)}rr(Bn).forEach(function(V){V.texture=c.createTexture(),c.bindTexture(V.target,V.texture);for(var Ge=0;Ge<32;++Ge)if(V.mipmask&1<<Ge)if(V.target===Br)c.texImage2D(Br,Ge,V.internalformat,V.width>>Ge,V.height>>Ge,0,V.internalformat,V.type,null);else for(var _t=0;_t<6;++_t)c.texImage2D(nl+_t,Ge,V.internalformat,V.width>>Ge,V.height>>Ge,0,V.internalformat,V.type,null);On(V.texInfo,V.target)})}function po(){for(var T=0;T<zn;++T){var Y=pn[T];Y&&(Y.bindCount=0,Y.unit=-1,pn[T]=null),c.activeTexture(ao+T),c.bindTexture(Br,null),c.bindTexture(Ss,null)}}return{create2D:bt,createCube:Nt,clear:vn,getTexture:function(T){return null},restore:Si,refresh:po}}var Ei=36161,ul=32854,Bc=32855,$c=36194,Gc=33189,zc=36168,Uc=34041,Vc=35907,Hc=34836,Wc=34842,Xc=34843,Cr=[];Cr[ul]=2,Cr[Bc]=2,Cr[$c]=2,Cr[Gc]=2,Cr[zc]=1,Cr[Uc]=4,Cr[Vc]=4,Cr[Hc]=16,Cr[Wc]=8,Cr[Xc]=6;function Yc(c,g,R){return Cr[c]*g*R}var qm=function(c,g,R,X,te){var W={rgba4:ul,rgb565:$c,"rgb5 a1":Bc,depth:Gc,stencil:zc,"depth stencil":Uc};g.ext_srgb&&(W.srgba=Vc),g.ext_color_buffer_half_float&&(W.rgba16f=Wc,W.rgb16f=Xc),g.webgl_color_buffer_float&&(W.rgba32f=Hc);var K=[];Object.keys(W).forEach(function(de){var ve=W[de];K[ve]=de});var fe=0,ce={};function ge(de){this.id=fe++,this.refCount=1,this.renderbuffer=de,this.format=ul,this.width=0,this.height=0,te.profile&&(this.stats={size:0})}ge.prototype.decRef=function(){--this.refCount<=0&&xe(this)};function xe(de){var ve=de.renderbuffer;y(ve,"must not double destroy renderbuffer"),c.bindRenderbuffer(Ei,null),c.deleteRenderbuffer(ve),de.renderbuffer=null,de.refCount=0,delete ce[de.id],X.renderbufferCount--}function ye(de,ve){var B=new ge(c.createRenderbuffer());ce[B.id]=B,X.renderbufferCount++;function Q(Fe,le){var Ne=0,Oe=0,Je=ul;if(typeof Fe=="object"&&Fe){var ne=Fe;if("shape"in ne){var ee=ne.shape;y(Array.isArray(ee)&&ee.length>=2,"invalid renderbuffer shape"),Ne=ee[0]|0,Oe=ee[1]|0}else"radius"in ne&&(Ne=Oe=ne.radius|0),"width"in ne&&(Ne=ne.width|0),"height"in ne&&(Oe=ne.height|0);"format"in ne&&(y.parameter(ne.format,W,"invalid renderbuffer format"),Je=W[ne.format])}else typeof Fe=="number"?(Ne=Fe|0,typeof le=="number"?Oe=le|0:Oe=Ne):Fe?y.raise("invalid arguments to renderbuffer constructor"):Ne=Oe=1;if(y(Ne>0&&Oe>0&&Ne<=R.maxRenderbufferSize&&Oe<=R.maxRenderbufferSize,"invalid renderbuffer size"),!(Ne===B.width&&Oe===B.height&&Je===B.format))return Q.width=B.width=Ne,Q.height=B.height=Oe,B.format=Je,c.bindRenderbuffer(Ei,B.renderbuffer),c.renderbufferStorage(Ei,Je,Ne,Oe),y(c.getError()===0,"invalid render buffer format"),te.profile&&(B.stats.size=Yc(B.format,B.width,B.height)),Q.format=K[B.format],Q}function he(Fe,le){var Ne=Fe|0,Oe=le|0||Ne;return Ne===B.width&&Oe===B.height||(y(Ne>0&&Oe>0&&Ne<=R.maxRenderbufferSize&&Oe<=R.maxRenderbufferSize,"invalid renderbuffer size"),Q.width=B.width=Ne,Q.height=B.height=Oe,c.bindRenderbuffer(Ei,B.renderbuffer),c.renderbufferStorage(Ei,B.format,Ne,Oe),y(c.getError()===0,"invalid render buffer format"),te.profile&&(B.stats.size=Yc(B.format,B.width,B.height))),Q}return Q(de,ve),Q.resize=he,Q._reglType="renderbuffer",Q._renderbuffer=B,te.profile&&(Q.stats=B.stats),Q.destroy=function(){B.decRef()},Q}te.profile&&(X.getTotalRenderbufferSize=function(){var de=0;return Object.keys(ce).forEach(function(ve){de+=ce[ve].stats.size}),de});function Te(){rr(ce).forEach(function(de){de.renderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(Ei,de.renderbuffer),c.renderbufferStorage(Ei,de.format,de.width,de.height)}),c.bindRenderbuffer(Ei,null)}return{create:ye,clear:function(){rr(ce).forEach(xe)},restore:Te}},ni=36160,Bs=36161,zi=3553,cl=34069,Qc=36064,fl=36096,Kc=36128,qc=33306,Zc=36053,Zm=36054,Jm=36055,eh=36057,th=36061,nh=36193,rh=5121,ih=5126,Jc=6407,ef=6408,ah=6402,oh=[Jc,ef],$s=[];$s[ef]=4,$s[Jc]=3;var lo=[];lo[rh]=1,lo[ih]=4,lo[nh]=2;var lh=32854,tf=32855,sh=36194,nf=33189,rf=36168,Gs=34041,af=35907,uh=34836,so=34842,ch=34843,fh=[lh,tf,sh,af,so,ch,uh],va={};va[Zc]="complete",va[Zm]="incomplete attachment",va[eh]="incomplete dimensions",va[Jm]="incomplete, missing attachment",va[th]="unsupported";function dh(c,g,R,X,te,W){var K={cur:null,next:null,dirty:!1,setFBO:null},fe=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];g.ext_srgb&&ce.push("srgba"),g.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),g.webgl_color_buffer_float&&ce.push("rgba32f");var ge=["uint8"];g.oes_texture_half_float&&ge.push("half float","float16"),g.oes_texture_float&&ge.push("float","float32");function xe(me,Ce,Re){this.target=me,this.texture=Ce,this.renderbuffer=Re;var ct=0,ot=0;Ce?(ct=Ce.width,ot=Ce.height):Re&&(ct=Re.width,ot=Re.height),this.width=ct,this.height=ot}function ye(me){me&&(me.texture&&me.texture._texture.decRef(),me.renderbuffer&&me.renderbuffer._renderbuffer.decRef())}function Te(me,Ce,Re){if(me)if(me.texture){var ct=me.texture._texture,ot=Math.max(1,ct.width),Pe=Math.max(1,ct.height);y(ot===Ce&&Pe===Re,"inconsistent width/height for supplied texture"),ct.refCount+=1}else{var Me=me.renderbuffer._renderbuffer;y(Me.width===Ce&&Me.height===Re,"inconsistent width/height for renderbuffer"),Me.refCount+=1}}function de(me,Ce){Ce&&(Ce.texture?c.framebufferTexture2D(ni,me,Ce.target,Ce.texture._texture.texture,0):c.framebufferRenderbuffer(ni,me,Bs,Ce.renderbuffer._renderbuffer.renderbuffer))}function ve(me){var Ce=zi,Re=null,ct=null,ot=me;typeof me=="object"&&(ot=me.data,"target"in me&&(Ce=me.target|0)),y.type(ot,"function","invalid attachment data");var Pe=ot._reglType;return Pe==="texture2d"?(Re=ot,y(Ce===zi)):Pe==="textureCube"?(Re=ot,y(Ce>=cl&&Ce<cl+6,"invalid cube map target")):Pe==="renderbuffer"?(ct=ot,Ce=Bs):y.raise("invalid regl object for attachment"),new xe(Ce,Re,ct)}function B(me,Ce,Re,ct,ot){if(Re){var Pe=X.create2D({width:me,height:Ce,format:ct,type:ot});return Pe._texture.refCount=0,new xe(zi,Pe,null)}else{var Me=te.create({width:me,height:Ce,format:ct});return Me._renderbuffer.refCount=0,new xe(Bs,null,Me)}}function Q(me){return me&&(me.texture||me.renderbuffer)}function he(me,Ce,Re){me&&(me.texture?me.texture.resize(Ce,Re):me.renderbuffer&&me.renderbuffer.resize(Ce,Re),me.width=Ce,me.height=Re)}var Fe=0,le={};function Ne(){this.id=Fe++,le[this.id]=this,this.framebuffer=c.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Oe(me){me.colorAttachments.forEach(ye),ye(me.depthAttachment),ye(me.stencilAttachment),ye(me.depthStencilAttachment)}function Je(me){var Ce=me.framebuffer;y(Ce,"must not double destroy framebuffer"),c.deleteFramebuffer(Ce),me.framebuffer=null,W.framebufferCount--,delete le[me.id]}function ne(me){var Ce;c.bindFramebuffer(ni,me.framebuffer);var Re=me.colorAttachments;for(Ce=0;Ce<Re.length;++Ce)de(Qc+Ce,Re[Ce]);for(Ce=Re.length;Ce<R.maxColorAttachments;++Ce)c.framebufferTexture2D(ni,Qc+Ce,zi,null,0);c.framebufferTexture2D(ni,qc,zi,null,0),c.framebufferTexture2D(ni,fl,zi,null,0),c.framebufferTexture2D(ni,Kc,zi,null,0),de(fl,me.depthAttachment),de(Kc,me.stencilAttachment),de(qc,me.depthStencilAttachment);var ct=c.checkFramebufferStatus(ni);!c.isContextLost()&&ct!==Zc&&y.raise("framebuffer configuration not supported, status = "+va[ct]),c.bindFramebuffer(ni,K.next?K.next.framebuffer:null),K.cur=K.next,c.getError()}function ee(me,Ce){var Re=new Ne;W.framebufferCount++;function ct(Pe,Me){var nt;y(K.next!==Re,"can not update framebuffer which is currently in use");var ft=0,Tt=0,an=!0,sn=!0,Lt=null,Rn=!0,Jt="rgba",Tn="uint8",On=1,Pn=null,Bn=null,zn=null,pn=!1;if(typeof Pe=="number")ft=Pe|0,Tt=Me|0||ft;else if(!Pe)ft=Tt=1;else{y.type(Pe,"object","invalid arguments for framebuffer");var vt=Pe;if("shape"in vt){var Un=vt.shape;y(Array.isArray(Un)&&Un.length>=2,"invalid shape for framebuffer"),ft=Un[0],Tt=Un[1]}else"radius"in vt&&(ft=Tt=vt.radius),"width"in vt&&(ft=vt.width),"height"in vt&&(Tt=vt.height);("color"in vt||"colors"in vt)&&(Lt=vt.color||vt.colors,Array.isArray(Lt)&&y(Lt.length===1||g.webgl_draw_buffers,"multiple render targets not supported")),Lt||("colorCount"in vt&&(On=vt.colorCount|0,y(On>0,"invalid color buffer count")),"colorTexture"in vt&&(Rn=!!vt.colorTexture,Jt="rgba4"),"colorType"in vt&&(Tn=vt.colorType,Rn?(y(g.oes_texture_float||!(Tn==="float"||Tn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),y(g.oes_texture_half_float||!(Tn==="half float"||Tn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Tn==="half float"||Tn==="float16"?(y(g.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Jt="rgba16f"):(Tn==="float"||Tn==="float32")&&(y(g.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Jt="rgba32f"),y.oneOf(Tn,ge,"invalid color type")),"colorFormat"in vt&&(Jt=vt.colorFormat,fe.indexOf(Jt)>=0?Rn=!0:ce.indexOf(Jt)>=0?Rn=!1:y.optional(function(){Rn?y.oneOf(vt.colorFormat,fe,"invalid color format for texture"):y.oneOf(vt.colorFormat,ce,"invalid color format for renderbuffer")}))),("depthTexture"in vt||"depthStencilTexture"in vt)&&(pn=!!(vt.depthTexture||vt.depthStencilTexture),y(!pn||g.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in vt&&(typeof vt.depth=="boolean"?an=vt.depth:(Pn=vt.depth,sn=!1)),"stencil"in vt&&(typeof vt.stencil=="boolean"?sn=vt.stencil:(Bn=vt.stencil,an=!1)),"depthStencil"in vt&&(typeof vt.depthStencil=="boolean"?an=sn=vt.depthStencil:(zn=vt.depthStencil,an=!1,sn=!1))}var $t=null,tt=null,bt=null,Nt=null;if(Array.isArray(Lt))$t=Lt.map(ve);else if(Lt)$t=[ve(Lt)];else for($t=new Array(On),nt=0;nt<On;++nt)$t[nt]=B(ft,Tt,Rn,Jt,Tn);y(g.webgl_draw_buffers||$t.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),y($t.length<=R.maxColorAttachments,"too many color attachments, not supported"),ft=ft||$t[0].width,Tt=Tt||$t[0].height,Pn?tt=ve(Pn):an&&!sn&&(tt=B(ft,Tt,pn,"depth","uint32")),Bn?bt=ve(Bn):sn&&!an&&(bt=B(ft,Tt,!1,"stencil","uint8")),zn?Nt=ve(zn):!Pn&&!Bn&&sn&&an&&(Nt=B(ft,Tt,pn,"depth stencil","depth stencil")),y(!!Pn+!!Bn+!!zn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var vn=null;for(nt=0;nt<$t.length;++nt)if(Te($t[nt],ft,Tt),y(!$t[nt]||$t[nt].texture&&oh.indexOf($t[nt].texture._texture.format)>=0||$t[nt].renderbuffer&&fh.indexOf($t[nt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+nt+" is invalid"),$t[nt]&&$t[nt].texture){var Si=$s[$t[nt].texture._texture.format]*lo[$t[nt].texture._texture.type];vn===null?vn=Si:y(vn===Si,"all color attachments much have the same number of bits per pixel.")}return Te(tt,ft,Tt),y(!tt||tt.texture&&tt.texture._texture.format===ah||tt.renderbuffer&&tt.renderbuffer._renderbuffer.format===nf,"invalid depth attachment for framebuffer object"),Te(bt,ft,Tt),y(!bt||bt.renderbuffer&&bt.renderbuffer._renderbuffer.format===rf,"invalid stencil attachment for framebuffer object"),Te(Nt,ft,Tt),y(!Nt||Nt.texture&&Nt.texture._texture.format===Gs||Nt.renderbuffer&&Nt.renderbuffer._renderbuffer.format===Gs,"invalid depth-stencil attachment for framebuffer object"),Oe(Re),Re.width=ft,Re.height=Tt,Re.colorAttachments=$t,Re.depthAttachment=tt,Re.stencilAttachment=bt,Re.depthStencilAttachment=Nt,ct.color=$t.map(Q),ct.depth=Q(tt),ct.stencil=Q(bt),ct.depthStencil=Q(Nt),ct.width=Re.width,ct.height=Re.height,ne(Re),ct}function ot(Pe,Me){y(K.next!==Re,"can not resize a framebuffer which is currently in use");var nt=Math.max(Pe|0,1),ft=Math.max(Me|0||nt,1);if(nt===Re.width&&ft===Re.height)return ct;for(var Tt=Re.colorAttachments,an=0;an<Tt.length;++an)he(Tt[an],nt,ft);return he(Re.depthAttachment,nt,ft),he(Re.stencilAttachment,nt,ft),he(Re.depthStencilAttachment,nt,ft),Re.width=ct.width=nt,Re.height=ct.height=ft,ne(Re),ct}return ct(me,Ce),r(ct,{resize:ot,_reglType:"framebuffer",_framebuffer:Re,destroy:function(){Je(Re),Oe(Re)},use:function(Pe){K.setFBO({framebuffer:ct},Pe)}})}function Ue(me){var Ce=Array(6);function Re(ot){var Pe;y(Ce.indexOf(K.next)<0,"can not update framebuffer which is currently in use");var Me={color:null},nt=0,ft=null,Tt="rgba",an="uint8",sn=1;if(typeof ot=="number")nt=ot|0;else if(!ot)nt=1;else{y.type(ot,"object","invalid arguments for framebuffer");var Lt=ot;if("shape"in Lt){var Rn=Lt.shape;y(Array.isArray(Rn)&&Rn.length>=2,"invalid shape for framebuffer"),y(Rn[0]===Rn[1],"cube framebuffer must be square"),nt=Rn[0]}else"radius"in Lt&&(nt=Lt.radius|0),"width"in Lt?(nt=Lt.width|0,"height"in Lt&&y(Lt.height===nt,"must be square")):"height"in Lt&&(nt=Lt.height|0);("color"in Lt||"colors"in Lt)&&(ft=Lt.color||Lt.colors,Array.isArray(ft)&&y(ft.length===1||g.webgl_draw_buffers,"multiple render targets not supported")),ft||("colorCount"in Lt&&(sn=Lt.colorCount|0,y(sn>0,"invalid color buffer count")),"colorType"in Lt&&(y.oneOf(Lt.colorType,ge,"invalid color type"),an=Lt.colorType),"colorFormat"in Lt&&(Tt=Lt.colorFormat,y.oneOf(Lt.colorFormat,fe,"invalid color format for texture"))),"depth"in Lt&&(Me.depth=Lt.depth),"stencil"in Lt&&(Me.stencil=Lt.stencil),"depthStencil"in Lt&&(Me.depthStencil=Lt.depthStencil)}var Jt;if(ft)if(Array.isArray(ft))for(Jt=[],Pe=0;Pe<ft.length;++Pe)Jt[Pe]=ft[Pe];else Jt=[ft];else{Jt=Array(sn);var Tn={radius:nt,format:Tt,type:an};for(Pe=0;Pe<sn;++Pe)Jt[Pe]=X.createCube(Tn)}for(Me.color=Array(Jt.length),Pe=0;Pe<Jt.length;++Pe){var On=Jt[Pe];y(typeof On=="function"&&On._reglType==="textureCube","invalid cube map"),nt=nt||On.width,y(On.width===nt&&On.height===nt,"invalid cube map shape"),Me.color[Pe]={target:cl,data:Jt[Pe]}}for(Pe=0;Pe<6;++Pe){for(var Pn=0;Pn<Jt.length;++Pn)Me.color[Pn].target=cl+Pe;Pe>0&&(Me.depth=Ce[0].depth,Me.stencil=Ce[0].stencil,Me.depthStencil=Ce[0].depthStencil),Ce[Pe]?Ce[Pe](Me):Ce[Pe]=ee(Me)}return r(Re,{width:nt,height:nt,color:Jt})}function ct(ot){var Pe,Me=ot|0;if(y(Me>0&&Me<=R.maxCubeMapSize,"invalid radius for cube fbo"),Me===Re.width)return Re;var nt=Re.color;for(Pe=0;Pe<nt.length;++Pe)nt[Pe].resize(Me);for(Pe=0;Pe<6;++Pe)Ce[Pe].resize(Me);return Re.width=Re.height=Me,Re}return Re(me),r(Re,{faces:Ce,resize:ct,_reglType:"framebufferCube",destroy:function(){Ce.forEach(function(ot){ot.destroy()})}})}function Ae(){K.cur=null,K.next=null,K.dirty=!0,rr(le).forEach(function(me){me.framebuffer=c.createFramebuffer(),ne(me)})}return r(K,{getFramebuffer:function(me){if(typeof me=="function"&&me._reglType==="framebuffer"){var Ce=me._framebuffer;if(Ce instanceof Ne)return Ce}return null},create:ee,createCube:Ue,clear:function(){rr(le).forEach(Je)},restore:Ae})}var mh=5126,s=34962,D=34963,z=["attributes","elements","offset","count","primitive","instances"];function ae(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=mh,this.offset=0,this.stride=0,this.divisor=0}function be(c,g,R,X,te,W,K){for(var fe=R.maxAttributes,ce=new Array(fe),ge=0;ge<fe;++ge)ce[ge]=new ae;var xe=0,ye={},Te={Record:ae,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:ve()?Oe:function(){},createVAO:Je,getVAO:Q,destroyBuffer:de,setVAO:ve()?he:Fe,clear:ve()?le:function(){}};function de(ne){for(var ee=0;ee<ce.length;++ee){var Ue=ce[ee];Ue.buffer===ne&&(c.disableVertexAttribArray(ee),Ue.buffer=null)}}function ve(){return g.oes_vertex_array_object}function B(){return g.angle_instanced_arrays}function Q(ne){return typeof ne=="function"&&ne._vao?ne._vao:null}function he(ne){if(ne!==Te.currentVAO){var ee=ve();ne?ee.bindVertexArrayOES(ne.vao):ee.bindVertexArrayOES(null),Te.currentVAO=ne}}function Fe(ne){if(ne!==Te.currentVAO){if(ne)ne.bindAttrs();else{for(var ee=B(),Ue=0;Ue<ce.length;++Ue){var Ae=ce[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),Ae.buffer.bind(),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offfset),ee&&Ae.divisor&&ee.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}K.elements?c.bindBuffer(D,K.elements.buffer.buffer):c.bindBuffer(D,null)}Te.currentVAO=ne}}function le(){rr(ye).forEach(function(ne){ne.destroy()})}function Ne(){this.id=++xe,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var ne=ve();ne?this.vao=ne.createVertexArrayOES():this.vao=null,ye[this.id]=this,this.buffers=[]}Ne.prototype.bindAttrs=function(){for(var ne=B(),ee=this.attributes,Ue=0;Ue<ee.length;++Ue){var Ae=ee[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),c.bindBuffer(s,Ae.buffer.buffer),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offset),ne&&Ae.divisor&&ne.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}for(var me=ee.length;me<fe;++me)c.disableVertexAttribArray(me);var Ce=W.getElements(this.elements);Ce?c.bindBuffer(D,Ce.buffer.buffer):c.bindBuffer(D,null)},Ne.prototype.refresh=function(){var ne=ve();ne&&(ne.bindVertexArrayOES(this.vao),this.bindAttrs(),Te.currentVAO=null,ne.bindVertexArrayOES(null))},Ne.prototype.destroy=function(){if(this.vao){var ne=ve();this===Te.currentVAO&&(Te.currentVAO=null,ne.bindVertexArrayOES(null)),ne.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ye[this.id]&&(delete ye[this.id],X.vaoCount-=1)};function Oe(){var ne=ve();ne&&rr(ye).forEach(function(ee){ee.refresh()})}function Je(ne){var ee=new Ne;X.vaoCount+=1;function Ue(Ae){var me;if(Array.isArray(Ae))me=Ae,ee.elements&&ee.ownsElements&&ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1,ee.offset=0,ee.count=0,ee.instances=-1,ee.primitive=4;else{if(y(typeof Ae=="object","invalid arguments for create vao"),y("attributes"in Ae,"must specify attributes for vao"),Ae.elements){var Ce=Ae.elements;ee.ownsElements?typeof Ce=="function"&&Ce._reglType==="elements"?(ee.elements.destroy(),ee.ownsElements=!1):(ee.elements(Ce),ee.ownsElements=!1):W.getElements(Ae.elements)?(ee.elements=Ae.elements,ee.ownsElements=!1):(ee.elements=W.create(Ae.elements),ee.ownsElements=!0)}else ee.elements=null,ee.ownsElements=!1;me=Ae.attributes,ee.offset=0,ee.count=-1,ee.instances=-1,ee.primitive=4,ee.elements&&(ee.count=ee.elements._elements.vertCount,ee.primitive=ee.elements._elements.primType),"offset"in Ae&&(ee.offset=Ae.offset|0),"count"in Ae&&(ee.count=Ae.count|0),"instances"in Ae&&(ee.instances=Ae.instances|0),"primitive"in Ae&&(y(Ae.primitive in yi,"bad primitive type: "+Ae.primitive),ee.primitive=yi[Ae.primitive]),y.optional(()=>{for(var an=Object.keys(Ae),sn=0;sn<an.length;++sn)y(z.indexOf(an[sn])>=0,'invalid option for vao: "'+an[sn]+'" valid options are '+z)}),y(Array.isArray(me),"attributes must be an array")}y(me.length<fe,"too many attributes"),y(me.length>0,"must specify at least one attribute");var Re={},ct=ee.attributes;ct.length=me.length;for(var ot=0;ot<me.length;++ot){var Pe=me[ot],Me=ct[ot]=new ae,nt=Pe.data||Pe;if(Array.isArray(nt)||n(nt)||dr(nt)){var ft;ee.buffers[ot]&&(ft=ee.buffers[ot],n(nt)&&ft._buffer.byteLength>=nt.byteLength?ft.subdata(nt):(ft.destroy(),ee.buffers[ot]=null)),ee.buffers[ot]||(ft=ee.buffers[ot]=te.create(Pe,s,!1,!0)),Me.buffer=te.getBuffer(ft),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1,Re[ot]=1}else te.getBuffer(Pe)?(Me.buffer=te.getBuffer(Pe),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1):te.getBuffer(Pe.buffer)?(Me.buffer=te.getBuffer(Pe.buffer),Me.size=(+Pe.size||Me.buffer.dimension)|0,Me.normalized=!!Pe.normalized||!1,"type"in Pe?(y.parameter(Pe.type,ua,"invalid buffer type"),Me.type=ua[Pe.type]):Me.type=Me.buffer.dtype,Me.offset=(Pe.offset||0)|0,Me.stride=(Pe.stride||0)|0,Me.divisor=(Pe.divisor||0)|0,Me.state=1,y(Me.size>=1&&Me.size<=4,"size must be between 1 and 4"),y(Me.offset>=0,"invalid offset"),y(Me.stride>=0&&Me.stride<=255,"stride must be between 0 and 255"),y(Me.divisor>=0,"divisor must be positive"),y(!Me.divisor||!!g.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Pe?(y(ot>0,"first attribute must not be a constant"),Me.x=+Pe.x||0,Me.y=+Pe.y||0,Me.z=+Pe.z||0,Me.w=+Pe.w||0,Me.state=2):y(!1,"invalid attribute spec for location "+ot)}for(var Tt=0;Tt<ee.buffers.length;++Tt)!Re[Tt]&&ee.buffers[Tt]&&(ee.buffers[Tt].destroy(),ee.buffers[Tt]=null);return ee.refresh(),Ue}return Ue.destroy=function(){for(var Ae=0;Ae<ee.buffers.length;++Ae)ee.buffers[Ae]&&ee.buffers[Ae].destroy();ee.buffers.length=0,ee.ownsElements&&(ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1),ee.destroy()},Ue._vao=ee,Ue._reglType="vao",Ue(ne)}return Te}var je=35632,Xe=35633,dt=35718,Bt=35721;function Dt(c,g,R,X){var te={},W={};function K(B,Q,he,Fe){this.name=B,this.id=Q,this.location=he,this.info=Fe}function fe(B,Q){for(var he=0;he<B.length;++he)if(B[he].id===Q.id){B[he].location=Q.location;return}B.push(Q)}function ce(B,Q,he){var Fe=B===je?te:W,le=Fe[Q];if(!le){var Ne=g.str(Q);le=c.createShader(B),c.shaderSource(le,Ne),c.compileShader(le),y.shaderError(c,le,Ne,B,he),Fe[Q]=le}return le}var ge={},xe=[],ye=0;function Te(B,Q){this.id=ye++,this.fragId=B,this.vertId=Q,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,X.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function de(B,Q,he){var Fe,le,Ne=ce(je,B.fragId),Oe=ce(Xe,B.vertId),Je=B.program=c.createProgram();if(c.attachShader(Je,Ne),c.attachShader(Je,Oe),he)for(Fe=0;Fe<he.length;++Fe){var ne=he[Fe];c.bindAttribLocation(Je,ne[0],ne[1])}c.linkProgram(Je),y.linkError(c,Je,g.str(B.fragId),g.str(B.vertId),Q);var ee=c.getProgramParameter(Je,dt);X.profile&&(B.stats.uniformsCount=ee);var Ue=B.uniforms;for(Fe=0;Fe<ee;++Fe)if(le=c.getActiveUniform(Je,Fe),le){if(le.size>1)for(var Ae=0;Ae<le.size;++Ae){var me=le.name.replace("[0]","["+Ae+"]");fe(Ue,new K(me,g.id(me),c.getUniformLocation(Je,me),le))}var Ce=le.name;le.size>1&&(Ce=Ce.replace("[0]","")),fe(Ue,new K(Ce,g.id(Ce),c.getUniformLocation(Je,Ce),le))}var Re=c.getProgramParameter(Je,Bt);X.profile&&(B.stats.attributesCount=Re);var ct=B.attributes;for(Fe=0;Fe<Re;++Fe)le=c.getActiveAttrib(Je,Fe),le&&fe(ct,new K(le.name,g.id(le.name),c.getAttribLocation(Je,le.name),le))}X.profile&&(R.getMaxUniformsCount=function(){var B=0;return xe.forEach(function(Q){Q.stats.uniformsCount>B&&(B=Q.stats.uniformsCount)}),B},R.getMaxAttributesCount=function(){var B=0;return xe.forEach(function(Q){Q.stats.attributesCount>B&&(B=Q.stats.attributesCount)}),B});function ve(){te={},W={};for(var B=0;B<xe.length;++B)de(xe[B],null,xe[B].attributes.map(function(Q){return[Q.location,Q.name]}))}return{clear:function(){var B=c.deleteShader.bind(c);rr(te).forEach(B),te={},rr(W).forEach(B),W={},xe.forEach(function(Q){c.deleteProgram(Q.program)}),xe.length=0,ge={},R.shaderCount=0},program:function(B,Q,he,Fe){y.command(B>=0,"missing vertex shader",he),y.command(Q>=0,"missing fragment shader",he);var le=ge[Q];le||(le=ge[Q]={});var Ne=le[B];if(Ne&&(Ne.refCount++,!Fe))return Ne;var Oe=new Te(Q,B);return R.shaderCount++,de(Oe,he,Fe),Ne||(le[B]=Oe),xe.push(Oe),r(Oe,{destroy:function(){if(Oe.refCount--,Oe.refCount<=0){c.deleteProgram(Oe.program);var Je=xe.indexOf(Oe);xe.splice(Je,1),R.shaderCount--}le[Oe.vertId].refCount<=0&&(c.deleteShader(W[Oe.vertId]),delete W[Oe.vertId],delete ge[Oe.fragId][Oe.vertId]),Object.keys(ge[Oe.fragId]).length||(c.deleteShader(te[Oe.fragId]),delete te[Oe.fragId],delete ge[Oe.fragId])}})},restore:ve,shader:ce,frag:-1,vert:-1}}var Sn=6408,Vt=5121,Mt=3333,of=5126;function K_(c,g,R,X,te,W,K){function fe(xe){var ye;g.next===null?(y(te.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ye=Vt):(y(g.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ye=g.next.colorAttachments[0].texture._texture.type,y.optional(function(){W.oes_texture_float?(y(ye===Vt||ye===of,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ye===of&&y(K.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):y(ye===Vt,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Te=0,de=0,ve=X.framebufferWidth,B=X.framebufferHeight,Q=null;n(xe)?Q=xe:xe&&(y.type(xe,"object","invalid arguments to regl.read()"),Te=xe.x|0,de=xe.y|0,y(Te>=0&&Te<X.framebufferWidth,"invalid x offset for regl.read"),y(de>=0&&de<X.framebufferHeight,"invalid y offset for regl.read"),ve=(xe.width||X.framebufferWidth-Te)|0,B=(xe.height||X.framebufferHeight-de)|0,Q=xe.data||null),Q&&(ye===Vt?y(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ye===of&&y(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),y(ve>0&&ve+Te<=X.framebufferWidth,"invalid width for read pixels"),y(B>0&&B+de<=X.framebufferHeight,"invalid height for read pixels"),R();var he=ve*B*4;return Q||(ye===Vt?Q=new Uint8Array(he):ye===of&&(Q=Q||new Float32Array(he))),y.isTypedArray(Q,"data buffer for regl.read() must be a typedarray"),y(Q.byteLength>=he,"data buffer for regl.read() too small"),c.pixelStorei(Mt,4),c.readPixels(Te,de,ve,B,Sn,ye,Q),Q}function ce(xe){var ye;return g.setFBO({framebuffer:xe.framebuffer},function(){ye=fe(xe)}),ye}function ge(xe){return!xe||!("framebuffer"in xe)?fe(xe):ce(xe)}return ge}function dl(c){return Array.prototype.slice.call(c)}function ml(c){return dl(c).join("")}function q_(){var c=0,g=[],R=[];function X(ye){for(var Te=0;Te<R.length;++Te)if(R[Te]===ye)return g[Te];var de="g"+c++;return g.push(de),R.push(ye),de}function te(){var ye=[];function Te(){ye.push.apply(ye,dl(arguments))}var de=[];function ve(){var B="v"+c++;return de.push(B),arguments.length>0&&(ye.push(B,"="),ye.push.apply(ye,dl(arguments)),ye.push(";")),B}return r(Te,{def:ve,toString:function(){return ml([de.length>0?"var "+de.join(",")+";":"",ml(ye)])}})}function W(){var ye=te(),Te=te(),de=ye.toString,ve=Te.toString;function B(Q,he){Te(Q,he,"=",ye.def(Q,he),";")}return r(function(){ye.apply(ye,dl(arguments))},{def:ye.def,entry:ye,exit:Te,save:B,set:function(Q,he,Fe){B(Q,he),ye(Q,he,"=",Fe,";")},toString:function(){return de()+ve()}})}function K(){var ye=ml(arguments),Te=W(),de=W(),ve=Te.toString,B=de.toString;return r(Te,{then:function(){return Te.apply(Te,dl(arguments)),this},else:function(){return de.apply(de,dl(arguments)),this},toString:function(){var Q=B();return Q&&(Q="else{"+Q+"}"),ml(["if(",ye,"){",ve(),"}",Q])}})}var fe=te(),ce={};function ge(ye,Te){var de=[];function ve(){var le="a"+de.length;return de.push(le),le}Te=Te||0;for(var B=0;B<Te;++B)ve();var Q=W(),he=Q.toString,Fe=ce[ye]=r(Q,{arg:ve,toString:function(){return ml(["function(",de.join(),"){",he(),"}"])}});return Fe}function xe(){var ye=['"use strict";',fe,"return {"];Object.keys(ce).forEach(function(ve){ye.push('"',ve,'":',ce[ve].toString(),",")}),ye.push("}");var Te=ml(ye).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),de=Function.apply(null,g.concat(Te));return de.apply(null,R)}return{global:fe,link:X,block:te,proc:ge,scope:W,cond:K,compile:xe}}var hl="xyzw".split(""),eg=5121,pl=1,hh=2,ph=0,vh=1,gh=2,yh=3,lf=4,tg=5,ng=6,rg="dither",ig="blend.enable",ag="blend.color",xh="blend.equation",Eh="blend.func",og="depth.enable",lg="depth.func",sg="depth.range",ug="depth.mask",_h="colorMask",cg="cull.enable",fg="cull.face",Sh="frontFace",wh="lineWidth",dg="polygonOffset.enable",Th="polygonOffset.offset",mg="sample.alpha",hg="sample.enable",bh="sample.coverage",pg="stencil.enable",vg="stencil.mask",Ah="stencil.func",Ch="stencil.opFront",zs="stencil.opBack",gg="scissor.enable",sf="scissor.box",Ui="viewport",Us="profile",uo="framebuffer",Vs="vert",Hs="frag",co="elements",fo="primitive",mo="count",uf="offset",cf="instances",Ws="vao",Lh="Width",Rh="Height",vl=uo+Lh,gl=uo+Rh,Z_=Ui+Lh,J_=Ui+Rh,yg="drawingBuffer",xg=yg+Lh,Eg=yg+Rh,eS=[Eh,xh,Ah,Ch,zs,bh,Ui,sf,Th],yl=34962,Oh=34963,tS=35632,nS=35633,_g=3553,rS=34067,iS=2884,aS=3042,oS=3024,lS=2960,sS=2929,uS=3089,cS=32823,fS=32926,dS=32928,Ph=5126,ff=35664,df=35665,mf=35666,kh=5124,hf=35667,pf=35668,vf=35669,Nh=35670,gf=35671,yf=35672,xf=35673,Xs=35674,Ys=35675,Qs=35676,Ks=35678,qs=35680,Ih=4,Zs=1028,ho=1029,Sg=2304,Dh=2305,mS=32775,hS=32776,pS=519,ga=7680,wg=0,Tg=1,bg=32774,vS=513,Ag=36160,gS=36064,_i={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Cg=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ya={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Lg={frag:tS,vert:nS},Mh={cw:Sg,ccw:Dh};function Ef(c){return Array.isArray(c)||n(c)||dr(c)}function Rg(c){return c.sort(function(g,R){return g===Ui?-1:R===Ui?1:g<R?-1:1})}function Dn(c,g,R,X){this.thisDep=c,this.contextDep=g,this.propDep=R,this.append=X}function xa(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function wn(c){return new Dn(!1,!1,!1,c)}function mr(c,g){var R=c.type;if(R===ph){var X=c.data.length;return new Dn(!0,X>=1,X>=2,g)}else if(R===lf){var te=c.data;return new Dn(te.thisDep,te.contextDep,te.propDep,g)}else{if(R===tg)return new Dn(!1,!1,!1,g);if(R===ng){for(var W=!1,K=!1,fe=!1,ce=0;ce<c.data.length;++ce){var ge=c.data[ce];if(ge.type===vh)fe=!0;else if(ge.type===gh)K=!0;else if(ge.type===yh)W=!0;else if(ge.type===ph){W=!0;var xe=ge.data;xe>=1&&(K=!0),xe>=2&&(fe=!0)}else ge.type===lf&&(W=W||ge.data.thisDep,K=K||ge.data.contextDep,fe=fe||ge.data.propDep)}return new Dn(W,K,fe,g)}else return new Dn(R===yh,R===gh,R===vh,g)}}var Og=new Dn(!1,!1,!1,function(){});function yS(c,g,R,X,te,W,K,fe,ce,ge,xe,ye,Te,de,ve){var B=ge.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};R.ext_blend_minmax&&(Q.min=mS,Q.max=hS);var he=R.angle_instanced_arrays,Fe=R.webgl_draw_buffers,le=R.oes_vertex_array_object,Ne={dirty:!0,profile:ve.profile},Oe={},Je=[],ne={},ee={};function Ue(E){return E.replace(".","_")}function Ae(E,m,P){var F=Ue(E);Je.push(E),Oe[F]=Ne[F]=!!P,ne[F]=m}function me(E,m,P){var F=Ue(E);Je.push(E),Array.isArray(P)?(Ne[F]=P.slice(),Oe[F]=P.slice()):Ne[F]=Oe[F]=P,ee[F]=m}Ae(rg,oS),Ae(ig,aS),me(ag,"blendColor",[0,0,0,0]),me(xh,"blendEquationSeparate",[bg,bg]),me(Eh,"blendFuncSeparate",[Tg,wg,Tg,wg]),Ae(og,sS,!0),me(lg,"depthFunc",vS),me(sg,"depthRange",[0,1]),me(ug,"depthMask",!0),me(_h,_h,[!0,!0,!0,!0]),Ae(cg,iS),me(fg,"cullFace",ho),me(Sh,Sh,Dh),me(wh,wh,1),Ae(dg,cS),me(Th,"polygonOffset",[0,0]),Ae(mg,fS),Ae(hg,dS),me(bh,"sampleCoverage",[1,!1]),Ae(pg,lS),me(vg,"stencilMask",-1),me(Ah,"stencilFunc",[pS,0,-1]),me(Ch,"stencilOpSeparate",[Zs,ga,ga,ga]),me(zs,"stencilOpSeparate",[ho,ga,ga,ga]),Ae(gg,uS),me(sf,"scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]),me(Ui,Ui,[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ce={gl:c,context:Te,strings:g,next:Oe,current:Ne,draw:ye,elements:W,buffer:te,shader:xe,attributes:ge.state,vao:ge,uniforms:ce,framebuffer:fe,extensions:R,timer:de,isBufferArgs:Ef},Re={primTypes:yi,compareFuncs:xl,blendFuncs:_i,blendEquations:Q,stencilOps:ya,glTypes:ua,orientationType:Mh};y.optional(function(){Ce.isArrayLike=Zt}),Fe&&(Re.backBuffer=[ho],Re.drawBuffer=rn(X.maxDrawbuffers,function(E){return E===0?[0]:rn(E,function(m){return gS+m})}));var ct=0;function ot(){var E=q_(),m=E.link,P=E.global;E.id=ct++,E.batchId="0";var F=m(Ce),$=E.shared={props:"a0"};Object.keys(Ce).forEach(function(A){$[A]=P.def(F,".",A)}),y.optional(function(){E.CHECK=m(y),E.commandStr=y.guessCommand(),E.command=m(E.commandStr),E.assert=function(A,S,U){A("if(!(",S,"))",this.CHECK,".commandRaise(",m(U),",",this.command,");")},Re.invalidBlendCombinations=Cg});var N=E.next={},k=E.current={};Object.keys(ee).forEach(function(A){Array.isArray(Ne[A])&&(N[A]=P.def($.next,".",A),k[A]=P.def($.current,".",A))});var M=E.constants={};Object.keys(Re).forEach(function(A){M[A]=P.def(JSON.stringify(Re[A]))}),E.invoke=function(A,S){switch(S.type){case ph:var U=["this",$.context,$.props,E.batchId];return A.def(m(S.data),".call(",U.slice(0,Math.max(S.data.length+1,4)),")");case vh:return A.def($.props,S.data);case gh:return A.def($.context,S.data);case yh:return A.def("this",S.data);case lf:return S.data.append(E,A),S.data.ref;case tg:return S.data.toString();case ng:return S.data.map(function(G){return E.invoke(A,G)})}},E.attribCache={};var _={};return E.scopeAttrib=function(A){var S=g.id(A);if(S in _)return _[S];var U=ge.scope[S];U||(U=ge.scope[S]=new B);var G=_[S]=m(U);return G},E}function Pe(E){var m=E.static,P=E.dynamic,F;if(Us in m){var $=!!m[Us];F=wn(function(k,M){return $}),F.enable=$}else if(Us in P){var N=P[Us];F=mr(N,function(k,M){return k.invoke(M,N)})}return F}function Me(E,m){var P=E.static,F=E.dynamic;if(uo in P){var $=P[uo];return $?($=fe.getFramebuffer($),y.command($,"invalid framebuffer object"),wn(function(k,M){var _=k.link($),A=k.shared;M.set(A.framebuffer,".next",_);var S=A.context;return M.set(S,"."+vl,_+".width"),M.set(S,"."+gl,_+".height"),_})):wn(function(k,M){var _=k.shared;M.set(_.framebuffer,".next","null");var A=_.context;return M.set(A,"."+vl,A+"."+xg),M.set(A,"."+gl,A+"."+Eg),"null"})}else if(uo in F){var N=F[uo];return mr(N,function(k,M){var _=k.invoke(M,N),A=k.shared,S=A.framebuffer,U=M.def(S,".getFramebuffer(",_,")");y.optional(function(){k.assert(M,"!"+_+"||"+U,"invalid framebuffer object")}),M.set(S,".next",U);var G=A.context;return M.set(G,"."+vl,U+"?"+U+".width:"+G+"."+xg),M.set(G,"."+gl,U+"?"+U+".height:"+G+"."+Eg),U})}else return null}function nt(E,m,P){var F=E.static,$=E.dynamic;function N(_){if(_ in F){var A=F[_];y.commandType(A,"object","invalid "+_,P.commandStr);var S=!0,U=A.x|0,G=A.y|0,J,re;return"width"in A?(J=A.width|0,y.command(J>=0,"invalid "+_,P.commandStr)):S=!1,"height"in A?(re=A.height|0,y.command(re>=0,"invalid "+_,P.commandStr)):S=!1,new Dn(!S&&m&&m.thisDep,!S&&m&&m.contextDep,!S&&m&&m.propDep,function(Ze,Be){var oe=Ze.shared.context,Z=J;"width"in A||(Z=Be.def(oe,".",vl,"-",U));var Ye=re;return"height"in A||(Ye=Be.def(oe,".",gl,"-",G)),[U,G,Z,Ye]})}else if(_ in $){var _e=$[_],it=mr(_e,function(Ze,Be){var oe=Ze.invoke(Be,_e);y.optional(function(){Ze.assert(Be,oe+"&&typeof "+oe+'==="object"',"invalid "+_)});var Z=Ze.shared.context,Ye=Be.def(oe,".x|0"),He=Be.def(oe,".y|0"),rt=Be.def('"width" in ',oe,"?",oe,".width|0:","(",Z,".",vl,"-",Ye,")"),zt=Be.def('"height" in ',oe,"?",oe,".height|0:","(",Z,".",gl,"-",He,")");return y.optional(function(){Ze.assert(Be,rt+">=0&&"+zt+">=0","invalid "+_)}),[Ye,He,rt,zt]});return m&&(it.thisDep=it.thisDep||m.thisDep,it.contextDep=it.contextDep||m.contextDep,it.propDep=it.propDep||m.propDep),it}else return m?new Dn(m.thisDep,m.contextDep,m.propDep,function(Ze,Be){var oe=Ze.shared.context;return[0,0,Be.def(oe,".",vl),Be.def(oe,".",gl)]}):null}var k=N(Ui);if(k){var M=k;k=new Dn(k.thisDep,k.contextDep,k.propDep,function(_,A){var S=M.append(_,A),U=_.shared.context;return A.set(U,"."+Z_,S[2]),A.set(U,"."+J_,S[3]),S})}return{viewport:k,scissor_box:N(sf)}}function ft(E,m){var P=E.static,F=typeof P[Hs]=="string"&&typeof P[Vs]=="string";if(F){if(Object.keys(m.dynamic).length>0)return null;var $=m.static,N=Object.keys($);if(N.length>0&&typeof $[N[0]]=="number"){for(var k=[],M=0;M<N.length;++M)y(typeof $[N[M]]=="number","must specify all vertex attribute locations when using vaos"),k.push([$[N[M]]|0,N[M]]);return k}}return null}function Tt(E,m,P){var F=E.static,$=E.dynamic;function N(S){if(S in F){var U=g.id(F[S]);y.optional(function(){xe.shader(Lg[S],U,y.guessCommand())});var G=wn(function(){return U});return G.id=U,G}else if(S in $){var J=$[S];return mr(J,function(re,_e){var it=re.invoke(_e,J),Ze=_e.def(re.shared.strings,".id(",it,")");return y.optional(function(){_e(re.shared.shader,".shader(",Lg[S],",",Ze,",",re.command,");")}),Ze})}return null}var k=N(Hs),M=N(Vs),_=null,A;return xa(k)&&xa(M)?(_=xe.program(M.id,k.id,null,P),A=wn(function(S,U){return S.link(_)})):A=new Dn(k&&k.thisDep||M&&M.thisDep,k&&k.contextDep||M&&M.contextDep,k&&k.propDep||M&&M.propDep,function(S,U){var G=S.shared.shader,J;k?J=k.append(S,U):J=U.def(G,".",Hs);var re;M?re=M.append(S,U):re=U.def(G,".",Vs);var _e=G+".program("+re+","+J;return y.optional(function(){_e+=","+S.command}),U.def(_e+")")}),{frag:k,vert:M,progVar:A,program:_}}function an(E,m){var P=E.static,F=E.dynamic,$={},N=!1;function k(){if(Ws in P){var Be=P[Ws];return Be!==null&&ge.getVAO(Be)===null&&(Be=ge.createVAO(Be)),N=!0,$.vao=Be,wn(function(Z){var Ye=ge.getVAO(Be);return Ye?Z.link(Ye):"null"})}else if(Ws in F){N=!0;var oe=F[Ws];return mr(oe,function(Z,Ye){var He=Z.invoke(Ye,oe);return Ye.def(Z.shared.vao+".getVAO("+He+")")})}return null}var M=k(),_=!1;function A(){if(co in P){var Be=P[co];if($.elements=Be,Ef(Be)){var oe=$.elements=W.create(Be,!0);Be=W.getElements(oe),_=!0}else Be&&(Be=W.getElements(Be),_=!0,y.command(Be,"invalid elements",m.commandStr));var Z=wn(function(He,rt){if(Be){var zt=He.link(Be);return He.ELEMENTS=zt,zt}return He.ELEMENTS=null,null});return Z.value=Be,Z}else if(co in F){_=!0;var Ye=F[co];return mr(Ye,function(He,rt){var zt=He.shared,Vn=zt.isBufferArgs,vo=zt.elements,Vi=He.invoke(rt,Ye),wi=rt.def("null"),Ea=rt.def(Vn,"(",Vi,")"),go=He.cond(Ea).then(wi,"=",vo,".createStream(",Vi,");").else(wi,"=",vo,".getElements(",Vi,");");return y.optional(function(){He.assert(go.else,"!"+Vi+"||"+wi,"invalid elements")}),rt.entry(go),rt.exit(He.cond(Ea).then(vo,".destroyStream(",wi,");")),He.ELEMENTS=wi,wi})}else if(N)return new Dn(M.thisDep,M.contextDep,M.propDep,function(He,rt){return rt.def(He.shared.vao+".currentVAO?"+He.shared.elements+".getElements("+He.shared.vao+".currentVAO.elements):null")});return null}var S=A();function U(){if(fo in P){var Be=P[fo];return $.primitive=Be,y.commandParameter(Be,yi,"invalid primitve",m.commandStr),wn(function(Z,Ye){return yi[Be]})}else if(fo in F){var oe=F[fo];return mr(oe,function(Z,Ye){var He=Z.constants.primTypes,rt=Z.invoke(Ye,oe);return y.optional(function(){Z.assert(Ye,rt+" in "+He,"invalid primitive, must be one of "+Object.keys(yi))}),Ye.def(He,"[",rt,"]")})}else{if(_)return xa(S)?S.value?wn(function(Z,Ye){return Ye.def(Z.ELEMENTS,".primType")}):wn(function(){return Ih}):new Dn(S.thisDep,S.contextDep,S.propDep,function(Z,Ye){var He=Z.ELEMENTS;return Ye.def(He,"?",He,".primType:",Ih)});if(N)return new Dn(M.thisDep,M.contextDep,M.propDep,function(Z,Ye){return Ye.def(Z.shared.vao+".currentVAO?"+Z.shared.vao+".currentVAO.primitive:"+Ih)})}return null}function G(Be,oe){if(Be in P){var Z=P[Be]|0;return oe?$.offset=Z:$.instances=Z,y.command(!oe||Z>=0,"invalid "+Be,m.commandStr),wn(function(He,rt){return oe&&(He.OFFSET=Z),Z})}else if(Be in F){var Ye=F[Be];return mr(Ye,function(He,rt){var zt=He.invoke(rt,Ye);return oe&&(He.OFFSET=zt,y.optional(function(){He.assert(rt,zt+">=0","invalid "+Be)})),zt})}else if(oe){if(_)return wn(function(He,rt){return He.OFFSET=0,0});if(N)return new Dn(M.thisDep,M.contextDep,M.propDep,function(He,rt){return rt.def(He.shared.vao+".currentVAO?"+He.shared.vao+".currentVAO.offset:0")})}else if(N)return new Dn(M.thisDep,M.contextDep,M.propDep,function(He,rt){return rt.def(He.shared.vao+".currentVAO?"+He.shared.vao+".currentVAO.instances:-1")});return null}var J=G(uf,!0);function re(){if(mo in P){var Be=P[mo]|0;return $.count=Be,y.command(typeof Be=="number"&&Be>=0,"invalid vertex count",m.commandStr),wn(function(){return Be})}else if(mo in F){var oe=F[mo];return mr(oe,function(rt,zt){var Vn=rt.invoke(zt,oe);return y.optional(function(){rt.assert(zt,"typeof "+Vn+'==="number"&&'+Vn+">=0&&"+Vn+"===("+Vn+"|0)","invalid vertex count")}),Vn})}else if(_)if(xa(S)){if(S)return J?new Dn(J.thisDep,J.contextDep,J.propDep,function(rt,zt){var Vn=zt.def(rt.ELEMENTS,".vertCount-",rt.OFFSET);return y.optional(function(){rt.assert(zt,Vn+">=0","invalid vertex offset/element buffer too small")}),Vn}):wn(function(rt,zt){return zt.def(rt.ELEMENTS,".vertCount")});var Z=wn(function(){return-1});return y.optional(function(){Z.MISSING=!0}),Z}else{var Ye=new Dn(S.thisDep||J.thisDep,S.contextDep||J.contextDep,S.propDep||J.propDep,function(rt,zt){var Vn=rt.ELEMENTS;return rt.OFFSET?zt.def(Vn,"?",Vn,".vertCount-",rt.OFFSET,":-1"):zt.def(Vn,"?",Vn,".vertCount:-1")});return y.optional(function(){Ye.DYNAMIC=!0}),Ye}else if(N){var He=new Dn(M.thisDep,M.contextDep,M.propDep,function(rt,zt){return zt.def(rt.shared.vao,".currentVAO?",rt.shared.vao,".currentVAO.count:-1")});return He}return null}var _e=U(),it=re(),Ze=G(cf,!1);return{elements:S,primitive:_e,count:it,instances:Ze,offset:J,vao:M,vaoActive:N,elementsActive:_,static:$}}function sn(E,m){var P=E.static,F=E.dynamic,$={};return Je.forEach(function(N){var k=Ue(N);function M(_,A){if(N in P){var S=_(P[N]);$[k]=wn(function(){return S})}else if(N in F){var U=F[N];$[k]=mr(U,function(G,J){return A(G,J,G.invoke(J,U))})}}switch(N){case cg:case ig:case rg:case pg:case og:case gg:case dg:case mg:case hg:case ug:return M(function(_){return y.commandType(_,"boolean",N,m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="boolean"',"invalid flag "+N,_.commandStr)}),S});case lg:return M(function(_){return y.commandParameter(_,xl,"invalid "+N,m.commandStr),xl[_]},function(_,A,S){var U=_.constants.compareFuncs;return y.optional(function(){_.assert(A,S+" in "+U,"invalid "+N+", must be one of "+Object.keys(xl))}),A.def(U,"[",S,"]")});case sg:return M(function(_){return y.command(Zt(_)&&_.length===2&&typeof _[0]=="number"&&typeof _[1]=="number"&&_[0]<=_[1],"depth range is 2d array",m.commandStr),_},function(_,A,S){y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===2&&typeof "+S+'[0]==="number"&&typeof '+S+'[1]==="number"&&'+S+"[0]<="+S+"[1]","depth range must be a 2d array")});var U=A.def("+",S,"[0]"),G=A.def("+",S,"[1]");return[U,G]});case Eh:return M(function(_){y.commandType(_,"object","blend.func",m.commandStr);var A="srcRGB"in _?_.srcRGB:_.src,S="srcAlpha"in _?_.srcAlpha:_.src,U="dstRGB"in _?_.dstRGB:_.dst,G="dstAlpha"in _?_.dstAlpha:_.dst;return y.commandParameter(A,_i,k+".srcRGB",m.commandStr),y.commandParameter(S,_i,k+".srcAlpha",m.commandStr),y.commandParameter(U,_i,k+".dstRGB",m.commandStr),y.commandParameter(G,_i,k+".dstAlpha",m.commandStr),y.command(Cg.indexOf(A+", "+U)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+A+", "+U+")",m.commandStr),[_i[A],_i[U],_i[S],_i[G]]},function(_,A,S){var U=_.constants.blendFuncs;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid blend func, must be an object")});function G(oe,Z){var Ye=A.def('"',oe,Z,'" in ',S,"?",S,".",oe,Z,":",S,".",oe);return y.optional(function(){_.assert(A,Ye+" in "+U,"invalid "+N+"."+oe+Z+", must be one of "+Object.keys(_i))}),Ye}var J=G("src","RGB"),re=G("dst","RGB");y.optional(function(){var oe=_.constants.invalidBlendCombinations;_.assert(A,oe+".indexOf("+J+'+", "+'+re+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var _e=A.def(U,"[",J,"]"),it=A.def(U,"[",G("src","Alpha"),"]"),Ze=A.def(U,"[",re,"]"),Be=A.def(U,"[",G("dst","Alpha"),"]");return[_e,Ze,it,Be]});case xh:return M(function(_){if(typeof _=="string")return y.commandParameter(_,Q,"invalid "+N,m.commandStr),[Q[_],Q[_]];if(typeof _=="object")return y.commandParameter(_.rgb,Q,N+".rgb",m.commandStr),y.commandParameter(_.alpha,Q,N+".alpha",m.commandStr),[Q[_.rgb],Q[_.alpha]];y.commandRaise("invalid blend.equation",m.commandStr)},function(_,A,S){var U=_.constants.blendEquations,G=A.def(),J=A.def(),re=_.cond("typeof ",S,'==="string"');return y.optional(function(){function _e(it,Ze,Be){_.assert(it,Be+" in "+U,"invalid "+Ze+", must be one of "+Object.keys(Q))}_e(re.then,N,S),_.assert(re.else,S+"&&typeof "+S+'==="object"',"invalid "+N),_e(re.else,N+".rgb",S+".rgb"),_e(re.else,N+".alpha",S+".alpha")}),re.then(G,"=",J,"=",U,"[",S,"];"),re.else(G,"=",U,"[",S,".rgb];",J,"=",U,"[",S,".alpha];"),A(re),[G,J]});case ag:return M(function(_){return y.command(Zt(_)&&_.length===4,"blend.color must be a 4d array",m.commandStr),rn(4,function(A){return+_[A]})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","blend.color must be a 4d array")}),rn(4,function(U){return A.def("+",S,"[",U,"]")})});case vg:return M(function(_){return y.commandType(_,"number",k,m.commandStr),_|0},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"',"invalid stencil.mask")}),A.def(S,"|0")});case Ah:return M(function(_){y.commandType(_,"object",k,m.commandStr);var A=_.cmp||"keep",S=_.ref||0,U="mask"in _?_.mask:-1;return y.commandParameter(A,xl,N+".cmp",m.commandStr),y.commandType(S,"number",N+".ref",m.commandStr),y.commandType(U,"number",N+".mask",m.commandStr),[xl[A],S,U]},function(_,A,S){var U=_.constants.compareFuncs;y.optional(function(){function _e(){_.assert(A,Array.prototype.join.call(arguments,""),"invalid stencil.func")}_e(S+"&&typeof ",S,'==="object"'),_e('!("cmp" in ',S,")||(",S,".cmp in ",U,")")});var G=A.def('"cmp" in ',S,"?",U,"[",S,".cmp]",":",ga),J=A.def(S,".ref|0"),re=A.def('"mask" in ',S,"?",S,".mask|0:-1");return[G,J,re]});case Ch:case zs:return M(function(_){y.commandType(_,"object",k,m.commandStr);var A=_.fail||"keep",S=_.zfail||"keep",U=_.zpass||"keep";return y.commandParameter(A,ya,N+".fail",m.commandStr),y.commandParameter(S,ya,N+".zfail",m.commandStr),y.commandParameter(U,ya,N+".zpass",m.commandStr),[N===zs?ho:Zs,ya[A],ya[S],ya[U]]},function(_,A,S){var U=_.constants.stencilOps;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+N)});function G(J){return y.optional(function(){_.assert(A,'!("'+J+'" in '+S+")||("+S+"."+J+" in "+U+")","invalid "+N+"."+J+", must be one of "+Object.keys(ya))}),A.def('"',J,'" in ',S,"?",U,"[",S,".",J,"]:",ga)}return[N===zs?ho:Zs,G("fail"),G("zfail"),G("zpass")]});case Th:return M(function(_){y.commandType(_,"object",k,m.commandStr);var A=_.factor|0,S=_.units|0;return y.commandType(A,"number",k+".factor",m.commandStr),y.commandType(S,"number",k+".units",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+N)});var U=A.def(S,".factor|0"),G=A.def(S,".units|0");return[U,G]});case fg:return M(function(_){var A=0;return _==="front"?A=Zs:_==="back"&&(A=ho),y.command(!!A,k,m.commandStr),A},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="front"||'+S+'==="back"',"invalid cull.face")}),A.def(S,'==="front"?',Zs,":",ho)});case wh:return M(function(_){return y.command(typeof _=="number"&&_>=X.lineWidthDims[0]&&_<=X.lineWidthDims[1],"invalid line width, must be a positive number between "+X.lineWidthDims[0]+" and "+X.lineWidthDims[1],m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"&&'+S+">="+X.lineWidthDims[0]+"&&"+S+"<="+X.lineWidthDims[1],"invalid line width")}),S});case Sh:return M(function(_){return y.commandParameter(_,Mh,k,m.commandStr),Mh[_]},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="cw"||'+S+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),A.def(S+'==="cw"?'+Sg+":"+Dh)});case _h:return M(function(_){return y.command(Zt(_)&&_.length===4,"color.mask must be length 4 array",m.commandStr),_.map(function(A){return!!A})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","invalid color.mask")}),rn(4,function(U){return"!!"+S+"["+U+"]"})});case bh:return M(function(_){y.command(typeof _=="object"&&_,k,m.commandStr);var A="value"in _?_.value:1,S=!!_.invert;return y.command(typeof A=="number"&&A>=0&&A<=1,"sample.coverage.value must be a number between 0 and 1",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid sample.coverage")});var U=A.def('"value" in ',S,"?+",S,".value:1"),G=A.def("!!",S,".invert");return[U,G]})}}),$}function Lt(E,m){var P=E.static,F=E.dynamic,$={};return Object.keys(P).forEach(function(N){var k=P[N],M;if(typeof k=="number"||typeof k=="boolean")M=wn(function(){return k});else if(typeof k=="function"){var _=k._reglType;_==="texture2d"||_==="textureCube"?M=wn(function(A){return A.link(k)}):_==="framebuffer"||_==="framebufferCube"?(y.command(k.color.length>0,'missing color attachment for framebuffer sent to uniform "'+N+'"',m.commandStr),M=wn(function(A){return A.link(k.color[0])})):y.commandRaise('invalid data for uniform "'+N+'"',m.commandStr)}else Zt(k)?M=wn(function(A){var S=A.global.def("[",rn(k.length,function(U){return y.command(typeof k[U]=="number"||typeof k[U]=="boolean","invalid uniform "+N,A.commandStr),k[U]}),"]");return S}):y.commandRaise('invalid or missing data for uniform "'+N+'"',m.commandStr);M.value=k,$[N]=M}),Object.keys(F).forEach(function(N){var k=F[N];$[N]=mr(k,function(M,_){return M.invoke(_,k)})}),$}function Rn(E,m){var P=E.static,F=E.dynamic,$={};return Object.keys(P).forEach(function(N){var k=P[N],M=g.id(N),_=new B;if(Ef(k))_.state=pl,_.buffer=te.getBuffer(te.create(k,yl,!1,!0)),_.type=0;else{var A=te.getBuffer(k);if(A)_.state=pl,_.buffer=A,_.type=0;else if(y.command(typeof k=="object"&&k,"invalid data for attribute "+N,m.commandStr),"constant"in k){var S=k.constant;_.buffer="null",_.state=hh,typeof S=="number"?_.x=S:(y.command(Zt(S)&&S.length>0&&S.length<=4,"invalid constant for attribute "+N,m.commandStr),hl.forEach(function(Ze,Be){Be<S.length&&(_[Ze]=S[Be])}))}else{Ef(k.buffer)?A=te.getBuffer(te.create(k.buffer,yl,!1,!0)):A=te.getBuffer(k.buffer),y.command(!!A,'missing buffer for attribute "'+N+'"',m.commandStr);var U=k.offset|0;y.command(U>=0,'invalid offset for attribute "'+N+'"',m.commandStr);var G=k.stride|0;y.command(G>=0&&G<256,'invalid stride for attribute "'+N+'", must be integer betweeen [0, 255]',m.commandStr);var J=k.size|0;y.command(!("size"in k)||J>0&&J<=4,'invalid size for attribute "'+N+'", must be 1,2,3,4',m.commandStr);var re=!!k.normalized,_e=0;"type"in k&&(y.commandParameter(k.type,ua,"invalid type for attribute "+N,m.commandStr),_e=ua[k.type]);var it=k.divisor|0;y.optional(function(){"divisor"in k&&(y.command(it===0||he,'cannot specify divisor for attribute "'+N+'", instancing not supported',m.commandStr),y.command(it>=0,'invalid divisor for attribute "'+N+'"',m.commandStr));var Ze=m.commandStr,Be=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(k).forEach(function(oe){y.command(Be.indexOf(oe)>=0,'unknown parameter "'+oe+'" for attribute pointer "'+N+'" (valid parameters are '+Be+")",Ze)})}),_.buffer=A,_.state=pl,_.size=J,_.normalized=re,_.type=_e||A.dtype,_.offset=U,_.stride=G,_.divisor=it}}$[N]=wn(function(Ze,Be){var oe=Ze.attribCache;if(M in oe)return oe[M];var Z={isStream:!1};return Object.keys(_).forEach(function(Ye){Z[Ye]=_[Ye]}),_.buffer&&(Z.buffer=Ze.link(_.buffer),Z.type=Z.type||Z.buffer+".dtype"),oe[M]=Z,Z})}),Object.keys(F).forEach(function(N){var k=F[N];function M(_,A){var S=_.invoke(A,k),U=_.shared,G=_.constants,J=U.isBufferArgs,re=U.buffer;y.optional(function(){_.assert(A,S+"&&(typeof "+S+'==="object"||typeof '+S+'==="function")&&('+J+"("+S+")||"+re+".getBuffer("+S+")||"+re+".getBuffer("+S+".buffer)||"+J+"("+S+'.buffer)||("constant" in '+S+"&&(typeof "+S+'.constant==="number"||'+U.isArrayLike+"("+S+".constant))))",'invalid dynamic attribute "'+N+'"')});var _e={isStream:A.def(!1)},it=new B;it.state=pl,Object.keys(it).forEach(function(Z){_e[Z]=A.def(""+it[Z])});var Ze=_e.buffer,Be=_e.type;A("if(",J,"(",S,")){",_e.isStream,"=true;",Ze,"=",re,".createStream(",yl,",",S,");",Be,"=",Ze,".dtype;","}else{",Ze,"=",re,".getBuffer(",S,");","if(",Ze,"){",Be,"=",Ze,".dtype;",'}else if("constant" in ',S,"){",_e.state,"=",hh,";","if(typeof "+S+'.constant === "number"){',_e[hl[0]],"=",S,".constant;",hl.slice(1).map(function(Z){return _e[Z]}).join("="),"=0;","}else{",hl.map(function(Z,Ye){return _e[Z]+"="+S+".constant.length>"+Ye+"?"+S+".constant["+Ye+"]:0;"}).join(""),"}}else{","if(",J,"(",S,".buffer)){",Ze,"=",re,".createStream(",yl,",",S,".buffer);","}else{",Ze,"=",re,".getBuffer(",S,".buffer);","}",Be,'="type" in ',S,"?",G.glTypes,"[",S,".type]:",Ze,".dtype;",_e.normalized,"=!!",S,".normalized;");function oe(Z){A(_e[Z],"=",S,".",Z,"|0;")}return oe("size"),oe("offset"),oe("stride"),oe("divisor"),A("}}"),A.exit("if(",_e.isStream,"){",re,".destroyStream(",Ze,");","}"),_e}$[N]=mr(k,M)}),$}function Jt(E){var m=E.static,P=E.dynamic,F={};return Object.keys(m).forEach(function($){var N=m[$];F[$]=wn(function(k,M){return typeof N=="number"||typeof N=="boolean"?""+N:k.link(N)})}),Object.keys(P).forEach(function($){var N=P[$];F[$]=mr(N,function(k,M){return k.invoke(M,N)})}),F}function Tn(E,m,P,F,$){var N=E.static,k=E.dynamic;y.optional(function(){var oe=[uo,Vs,Hs,co,fo,uf,mo,cf,Us,Ws].concat(Je);function Z(Ye){Object.keys(Ye).forEach(function(He){y.command(oe.indexOf(He)>=0,'unknown parameter "'+He+'"',$.commandStr)})}Z(N),Z(k)});var M=ft(E,m),_=Me(E),A=nt(E,_,$),S=an(E,$),U=sn(E,$),G=Tt(E,$,M);function J(oe){var Z=A[oe];Z&&(U[oe]=Z)}J(Ui),J(Ue(sf));var re=Object.keys(U).length>0,_e={framebuffer:_,draw:S,shader:G,state:U,dirty:re,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(_e.profile=Pe(E),_e.uniforms=Lt(P,$),_e.drawVAO=_e.scopeVAO=S.vao,!_e.drawVAO&&G.program&&!M&&R.angle_instanced_arrays&&S.static.elements){var it=!0,Ze=G.program.attributes.map(function(oe){var Z=m.static[oe];return it=it&&!!Z,Z});if(it&&Ze.length>0){var Be=ge.getVAO(ge.createVAO({attributes:Ze,elements:S.static.elements}));_e.drawVAO=new Dn(null,null,null,function(oe,Z){return oe.link(Be)}),_e.useVAO=!0}}return M?_e.useVAO=!0:_e.attributes=Rn(m,$),_e.context=Jt(F),_e}function On(E,m,P){var F=E.shared,$=F.context,N=E.scope();Object.keys(P).forEach(function(k){m.save($,"."+k);var M=P[k],_=M.append(E,m);Array.isArray(_)?N($,".",k,"=[",_.join(),"];"):N($,".",k,"=",_,";")}),m(N)}function Pn(E,m,P,F){var $=E.shared,N=$.gl,k=$.framebuffer,M;Fe&&(M=m.def($.extensions,".webgl_draw_buffers"));var _=E.constants,A=_.drawBuffer,S=_.backBuffer,U;P?U=P.append(E,m):U=m.def(k,".next"),F||m("if(",U,"!==",k,".cur){"),m("if(",U,"){",N,".bindFramebuffer(",Ag,",",U,".framebuffer);"),Fe&&m(M,".drawBuffersWEBGL(",A,"[",U,".colorAttachments.length]);"),m("}else{",N,".bindFramebuffer(",Ag,",null);"),Fe&&m(M,".drawBuffersWEBGL(",S,");"),m("}",k,".cur=",U,";"),F||m("}")}function Bn(E,m,P){var F=E.shared,$=F.gl,N=E.current,k=E.next,M=F.current,_=F.next,A=E.cond(M,".dirty");Je.forEach(function(S){var U=Ue(S);if(!(U in P.state)){var G,J;if(U in k){G=k[U],J=N[U];var re=rn(Ne[U].length,function(it){return A.def(G,"[",it,"]")});A(E.cond(re.map(function(it,Ze){return it+"!=="+J+"["+Ze+"]"}).join("||")).then($,".",ee[U],"(",re,");",re.map(function(it,Ze){return J+"["+Ze+"]="+it}).join(";"),";"))}else{G=A.def(_,".",U);var _e=E.cond(G,"!==",M,".",U);A(_e),U in ne?_e(E.cond(G).then($,".enable(",ne[U],");").else($,".disable(",ne[U],");"),M,".",U,"=",G,";"):_e($,".",ee[U],"(",G,");",M,".",U,"=",G,";")}}}),Object.keys(P.state).length===0&&A(M,".dirty=false;"),m(A)}function zn(E,m,P,F){var $=E.shared,N=E.current,k=$.current,M=$.gl;Rg(Object.keys(P)).forEach(function(_){var A=P[_];if(!(F&&!F(A))){var S=A.append(E,m);if(ne[_]){var U=ne[_];xa(A)?S?m(M,".enable(",U,");"):m(M,".disable(",U,");"):m(E.cond(S).then(M,".enable(",U,");").else(M,".disable(",U,");")),m(k,".",_,"=",S,";")}else if(Zt(S)){var G=N[_];m(M,".",ee[_],"(",S,");",S.map(function(J,re){return G+"["+re+"]="+J}).join(";"),";")}else m(M,".",ee[_],"(",S,");",k,".",_,"=",S,";")}})}function pn(E,m){he&&(E.instancing=m.def(E.shared.extensions,".angle_instanced_arrays"))}function vt(E,m,P,F,$){var N=E.shared,k=E.stats,M=N.current,_=N.timer,A=P.profile;function S(){return typeof performance>"u"?"Date.now()":"performance.now()"}var U,G;function J(oe){U=m.def(),oe(U,"=",S(),";"),typeof $=="string"?oe(k,".count+=",$,";"):oe(k,".count++;"),de&&(F?(G=m.def(),oe(G,"=",_,".getNumPendingQueries();")):oe(_,".beginQuery(",k,");"))}function re(oe){oe(k,".cpuTime+=",S(),"-",U,";"),de&&(F?oe(_,".pushScopeStats(",G,",",_,".getNumPendingQueries(),",k,");"):oe(_,".endQuery();"))}function _e(oe){var Z=m.def(M,".profile");m(M,".profile=",oe,";"),m.exit(M,".profile=",Z,";")}var it;if(A){if(xa(A)){A.enable?(J(m),re(m.exit),_e("true")):_e("false");return}it=A.append(E,m),_e(it)}else it=m.def(M,".profile");var Ze=E.block();J(Ze),m("if(",it,"){",Ze,"}");var Be=E.block();re(Be),m.exit("if(",it,"){",Be,"}")}function Un(E,m,P,F,$){var N=E.shared;function k(_){switch(_){case ff:case hf:case gf:return 2;case df:case pf:case yf:return 3;case mf:case vf:case xf:return 4;default:return 1}}function M(_,A,S){var U=N.gl,G=m.def(_,".location"),J=m.def(N.attributes,"[",G,"]"),re=S.state,_e=S.buffer,it=[S.x,S.y,S.z,S.w],Ze=["buffer","normalized","offset","stride"];function Be(){m("if(!",J,".buffer){",U,".enableVertexAttribArray(",G,");}");var Z=S.type,Ye;if(S.size?Ye=m.def(S.size,"||",A):Ye=A,m("if(",J,".type!==",Z,"||",J,".size!==",Ye,"||",Ze.map(function(rt){return J+"."+rt+"!=="+S[rt]}).join("||"),"){",U,".bindBuffer(",yl,",",_e,".buffer);",U,".vertexAttribPointer(",[G,Ye,Z,S.normalized,S.stride,S.offset],");",J,".type=",Z,";",J,".size=",Ye,";",Ze.map(function(rt){return J+"."+rt+"="+S[rt]+";"}).join(""),"}"),he){var He=S.divisor;m("if(",J,".divisor!==",He,"){",E.instancing,".vertexAttribDivisorANGLE(",[G,He],");",J,".divisor=",He,";}")}}function oe(){m("if(",J,".buffer){",U,".disableVertexAttribArray(",G,");",J,".buffer=null;","}if(",hl.map(function(Z,Ye){return J+"."+Z+"!=="+it[Ye]}).join("||"),"){",U,".vertexAttrib4f(",G,",",it,");",hl.map(function(Z,Ye){return J+"."+Z+"="+it[Ye]+";"}).join(""),"}")}re===pl?Be():re===hh?oe():(m("if(",re,"===",pl,"){"),Be(),m("}else{"),oe(),m("}"))}F.forEach(function(_){var A=_.name,S=P.attributes[A],U;if(S){if(!$(S))return;U=S.append(E,m)}else{if(!$(Og))return;var G=E.scopeAttrib(A);y.optional(function(){E.assert(m,G+".state","missing attribute "+A)}),U={},Object.keys(new B).forEach(function(J){U[J]=m.def(G,".",J)})}M(E.link(_),k(_.info.type),U)})}function $t(E,m,P,F,$,N){for(var k=E.shared,M=k.gl,_={},A,S=0;S<F.length;++S){var U=F[S],G=U.name,J=U.info.type,re=U.info.size,_e=P.uniforms[G];if(re>1){if(!_e)continue;var it=G.replace("[0]","");if(_[it])continue;_[it]=1}var Ze=E.link(U),Be=Ze+".location",oe;if(_e){if(!$(_e))continue;if(xa(_e)){var Z=_e.value;if(y.command(Z!==null&&typeof Z<"u",'missing uniform "'+G+'"',E.commandStr),J===Ks||J===qs){y.command(typeof Z=="function"&&(J===Ks&&(Z._reglType==="texture2d"||Z._reglType==="framebuffer")||J===qs&&(Z._reglType==="textureCube"||Z._reglType==="framebufferCube")),"invalid texture for uniform "+G,E.commandStr);var Ye=E.link(Z._texture||Z.color[0]._texture);m(M,".uniform1i(",Be,",",Ye+".bind());"),m.exit(Ye,".unbind();")}else if(J===Xs||J===Ys||J===Qs){y.optional(function(){y.command(Zt(Z),"invalid matrix for uniform "+G,E.commandStr),y.command(J===Xs&&Z.length===4||J===Ys&&Z.length===9||J===Qs&&Z.length===16,"invalid length for matrix uniform "+G,E.commandStr)});var He=E.global.def("new Float32Array(["+Array.prototype.slice.call(Z)+"])"),rt=2;J===Ys?rt=3:J===Qs&&(rt=4),m(M,".uniformMatrix",rt,"fv(",Be,",false,",He,");")}else{switch(J){case Ph:re===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1f";break;case ff:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2f";break;case df:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3f";break;case mf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4f";break;case Nh:re===1?y.commandType(Z,"boolean","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1i";break;case kh:re===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1i";break;case gf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2i";break;case hf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2i";break;case yf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3i";break;case pf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3i";break;case xf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4i";break;case vf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4i";break}re>1?(A+="v",Z=E.global.def("["+Array.prototype.slice.call(Z)+"]")):Z=Zt(Z)?Array.prototype.slice.call(Z):Z,m(M,".uniform",A,"(",Be,",",Z,");")}continue}else oe=_e.append(E,m)}else{if(!$(Og))continue;oe=m.def(k.uniforms,"[",g.id(G),"]")}J===Ks?(y(!Array.isArray(oe),"must specify a scalar prop for textures"),m("if(",oe,"&&",oe,'._reglType==="framebuffer"){',oe,"=",oe,".color[0];","}")):J===qs&&(y(!Array.isArray(oe),"must specify a scalar prop for cube maps"),m("if(",oe,"&&",oe,'._reglType==="framebufferCube"){',oe,"=",oe,".color[0];","}")),y.optional(function(){function Lr(hr,_f){E.assert(m,hr,'bad data or missing for uniform "'+G+'".  '+_f)}function yo(hr,_f){_f===1&&y(!Array.isArray(oe),"must not specify an array type for uniform"),Lr("Array.isArray("+oe+") && typeof "+oe+'[0]===" '+hr+'" || typeof '+oe+'==="'+hr+'"',"invalid type, expected "+hr)}function $r(hr,_f,Sf){Array.isArray(oe)?y(oe.length&&oe.length%hr===0&&oe.length<=hr*Sf,"must have length of "+(Sf===1?"":"n * ")+hr):Lr(k.isArrayLike+"("+oe+")&&"+oe+".length && "+oe+".length % "+hr+" === 0 && "+oe+".length<="+hr*Sf,"invalid vector, should have length of "+(Sf===1?"":"n * ")+hr,E.commandStr)}function Fg(hr){y(!Array.isArray(oe),"must not specify a value type"),Lr("typeof "+oe+'==="function"&&'+oe+'._reglType==="texture'+(hr===_g?"2d":"Cube")+'"',"invalid texture type",E.commandStr)}switch(J){case kh:yo("number",re);break;case hf:$r(2,"number",re);break;case pf:$r(3,"number",re);break;case vf:$r(4,"number",re);break;case Ph:yo("number",re);break;case ff:$r(2,"number",re);break;case df:$r(3,"number",re);break;case mf:$r(4,"number",re);break;case Nh:yo("boolean",re);break;case gf:$r(2,"boolean",re);break;case yf:$r(3,"boolean",re);break;case xf:$r(4,"boolean",re);break;case Xs:$r(4,"number",re);break;case Ys:$r(9,"number",re);break;case Qs:$r(16,"number",re);break;case Ks:Fg(_g);break;case qs:Fg(rS);break}});var zt=1;switch(J){case Ks:case qs:var Vn=m.def(oe,"._texture");m(M,".uniform1i(",Be,",",Vn,".bind());"),m.exit(Vn,".unbind();");continue;case kh:case Nh:A="1i";break;case hf:case gf:A="2i",zt=2;break;case pf:case yf:A="3i",zt=3;break;case vf:case xf:A="4i",zt=4;break;case Ph:A="1f";break;case ff:A="2f",zt=2;break;case df:A="3f",zt=3;break;case mf:A="4f",zt=4;break;case Xs:A="Matrix2fv";break;case Ys:A="Matrix3fv";break;case Qs:A="Matrix4fv";break}if(A.indexOf("Matrix")===-1&&re>1&&(A+="v",zt=1),A.charAt(0)==="M"){m(M,".uniform",A,"(",Be,",");var vo=Math.pow(J-Xs+2,2),Vi=E.global.def("new Float32Array(",vo,")");Array.isArray(oe)?m("false,(",rn(vo,function(Lr){return Vi+"["+Lr+"]="+oe[Lr]}),",",Vi,")"):m("false,(Array.isArray(",oe,")||",oe," instanceof Float32Array)?",oe,":(",rn(vo,function(Lr){return Vi+"["+Lr+"]="+oe+"["+Lr+"]"}),",",Vi,")"),m(");")}else if(zt>1){for(var wi=[],Ea=[],go=0;go<zt;++go)Array.isArray(oe)?Ea.push(oe[go]):Ea.push(m.def(oe+"["+go+"]")),N&&wi.push(m.def());N&&m("if(!",E.batchId,"||",wi.map(function(Lr,yo){return Lr+"!=="+Ea[yo]}).join("||"),"){",wi.map(function(Lr,yo){return Lr+"="+Ea[yo]+";"}).join("")),m(M,".uniform",A,"(",Be,",",Ea.join(","),");"),N&&m("}")}else{if(y(!Array.isArray(oe),"uniform value must not be an array"),N){var Mg=m.def();m("if(!",E.batchId,"||",Mg,"!==",oe,"){",Mg,"=",oe,";")}m(M,".uniform",A,"(",Be,",",oe,");"),N&&m("}")}}}function tt(E,m,P,F){var $=E.shared,N=$.gl,k=$.draw,M=F.draw;function _(){var Ye=M.elements,He,rt=m;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(rt=P),He=Ye.append(E,rt),M.elementsActive&&rt("if("+He+")"+N+".bindBuffer("+Oh+","+He+".buffer.buffer);")):(He=rt.def(),rt(He,"=",k,".",co,";","if(",He,"){",N,".bindBuffer(",Oh,",",He,".buffer.buffer);}","else if(",$.vao,".currentVAO){",He,"=",E.shared.elements+".getElements("+$.vao,".currentVAO.elements);",le?"":"if("+He+")"+N+".bindBuffer("+Oh+","+He+".buffer.buffer);","}")),He}function A(){var Ye=M.count,He,rt=m;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(rt=P),He=Ye.append(E,rt),y.optional(function(){Ye.MISSING&&E.assert(m,"false","missing vertex count"),Ye.DYNAMIC&&E.assert(rt,He+">=0","missing vertex count")})):(He=rt.def(k,".",mo),y.optional(function(){E.assert(rt,He+">=0","missing vertex count")})),He}var S=_();function U(Ye){var He=M[Ye];return He?He.contextDep&&F.contextDynamic||He.propDep?He.append(E,P):He.append(E,m):m.def(k,".",Ye)}var G=U(fo),J=U(uf),re=A();if(typeof re=="number"){if(re===0)return}else P("if(",re,"){"),P.exit("}");var _e,it;he&&(_e=U(cf),it=E.instancing);var Ze=S+".type",Be=M.elements&&xa(M.elements)&&!M.vaoActive;function oe(){function Ye(){P(it,".drawElementsInstancedANGLE(",[G,re,Ze,J+"<<(("+Ze+"-"+eg+")>>1)",_e],");")}function He(){P(it,".drawArraysInstancedANGLE(",[G,J,re,_e],");")}S&&S!=="null"?Be?Ye():(P("if(",S,"){"),Ye(),P("}else{"),He(),P("}")):He()}function Z(){function Ye(){P(N+".drawElements("+[G,re,Ze,J+"<<(("+Ze+"-"+eg+")>>1)"]+");")}function He(){P(N+".drawArrays("+[G,J,re]+");")}S&&S!=="null"?Be?Ye():(P("if(",S,"){"),Ye(),P("}else{"),He(),P("}")):He()}he&&(typeof _e!="number"||_e>=0)?typeof _e=="string"?(P("if(",_e,">0){"),oe(),P("}else if(",_e,"<0){"),Z(),P("}")):oe():Z()}function bt(E,m,P,F,$){var N=ot(),k=N.proc("body",$);return y.optional(function(){N.commandStr=m.commandStr,N.command=N.link(m.commandStr)}),he&&(N.instancing=k.def(N.shared.extensions,".angle_instanced_arrays")),E(N,k,P,F),N.compile().body}function Nt(E,m,P,F){pn(E,m),P.useVAO?P.drawVAO?m(E.shared.vao,".setVAO(",P.drawVAO.append(E,m),");"):m(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(m(E.shared.vao,".setVAO(null);"),Un(E,m,P,F.attributes,function(){return!0})),$t(E,m,P,F.uniforms,function(){return!0},!1),tt(E,m,m,P)}function vn(E,m){var P=E.proc("draw",1);pn(E,P),On(E,P,m.context),Pn(E,P,m.framebuffer),Bn(E,P,m),zn(E,P,m.state),vt(E,P,m,!1,!0);var F=m.shader.progVar.append(E,P);if(P(E.shared.gl,".useProgram(",F,".program);"),m.shader.program)Nt(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var $=E.global.def("{}"),N=P.def(F,".id"),k=P.def($,"[",N,"]");P(E.cond(k).then(k,".call(this,a0);").else(k,"=",$,"[",N,"]=",E.link(function(M){return bt(Nt,E,m,M,1)}),"(",F,");",k,".call(this,a0);"))}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Si(E,m,P,F){E.batchId="a1",pn(E,m);function $(){return!0}Un(E,m,P,F.attributes,$),$t(E,m,P,F.uniforms,$,!1),tt(E,m,m,P)}function po(E,m,P,F){pn(E,m);var $=P.contextDep,N=m.def(),k="a0",M="a1",_=m.def();E.shared.props=_,E.batchId=N;var A=E.scope(),S=E.scope();m(A.entry,"for(",N,"=0;",N,"<",M,";++",N,"){",_,"=",k,"[",N,"];",S,"}",A.exit);function U(Ze){return Ze.contextDep&&$||Ze.propDep}function G(Ze){return!U(Ze)}if(P.needsContext&&On(E,S,P.context),P.needsFramebuffer&&Pn(E,S,P.framebuffer),zn(E,S,P.state,U),P.profile&&U(P.profile)&&vt(E,S,P,!1,!0),F)P.useVAO?P.drawVAO?U(P.drawVAO)?S(E.shared.vao,".setVAO(",P.drawVAO.append(E,S),");"):A(E.shared.vao,".setVAO(",P.drawVAO.append(E,A),");"):A(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(A(E.shared.vao,".setVAO(null);"),Un(E,A,P,F.attributes,G),Un(E,S,P,F.attributes,U)),$t(E,A,P,F.uniforms,G,!1),$t(E,S,P,F.uniforms,U,!0),tt(E,A,S,P);else{var J=E.global.def("{}"),re=P.shader.progVar.append(E,S),_e=S.def(re,".id"),it=S.def(J,"[",_e,"]");S(E.shared.gl,".useProgram(",re,".program);","if(!",it,"){",it,"=",J,"[",_e,"]=",E.link(function(Ze){return bt(Si,E,P,Ze,2)}),"(",re,");}",it,".call(this,a0[",N,"],",N,");")}}function T(E,m){var P=E.proc("batch",2);E.batchId="0",pn(E,P);var F=!1,$=!0;Object.keys(m.context).forEach(function(J){F=F||m.context[J].propDep}),F||(On(E,P,m.context),$=!1);var N=m.framebuffer,k=!1;N?(N.propDep?F=k=!0:N.contextDep&&F&&(k=!0),k||Pn(E,P,N)):Pn(E,P,null),m.state.viewport&&m.state.viewport.propDep&&(F=!0);function M(J){return J.contextDep&&F||J.propDep}Bn(E,P,m),zn(E,P,m.state,function(J){return!M(J)}),(!m.profile||!M(m.profile))&&vt(E,P,m,!1,"a1"),m.contextDep=F,m.needsContext=$,m.needsFramebuffer=k;var _=m.shader.progVar;if(_.contextDep&&F||_.propDep)po(E,P,m,null);else{var A=_.append(E,P);if(P(E.shared.gl,".useProgram(",A,".program);"),m.shader.program)po(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var S=E.global.def("{}"),U=P.def(A,".id"),G=P.def(S,"[",U,"]");P(E.cond(G).then(G,".call(this,a0,a1);").else(G,"=",S,"[",U,"]=",E.link(function(J){return bt(po,E,m,J,2)}),"(",A,");",G,".call(this,a0,a1);"))}}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Y(E,m){var P=E.proc("scope",3);E.batchId="a2";var F=E.shared,$=F.current;On(E,P,m.context),m.framebuffer&&m.framebuffer.append(E,P),Rg(Object.keys(m.state)).forEach(function(k){var M=m.state[k],_=M.append(E,P);Zt(_)?_.forEach(function(A,S){P.set(E.next[k],"["+S+"]",A)}):P.set(F.next,"."+k,_)}),vt(E,P,m,!0,!0),[co,uf,mo,cf,fo].forEach(function(k){var M=m.draw[k];M&&P.set(F.draw,"."+k,""+M.append(E,P))}),Object.keys(m.uniforms).forEach(function(k){var M=m.uniforms[k].append(E,P);Array.isArray(M)&&(M="["+M.join()+"]"),P.set(F.uniforms,"["+g.id(k)+"]",M)}),Object.keys(m.attributes).forEach(function(k){var M=m.attributes[k].append(E,P),_=E.scopeAttrib(k);Object.keys(new B).forEach(function(A){P.set(_,"."+A,M[A])})}),m.scopeVAO&&P.set(F.vao,".targetVAO",m.scopeVAO.append(E,P));function N(k){var M=m.shader[k];M&&P.set(F.shader,"."+k,M.append(E,P))}N(Vs),N(Hs),Object.keys(m.state).length>0&&(P($,".dirty=true;"),P.exit($,".dirty=true;")),P("a1(",E.shared.context,",a0,",E.batchId,");")}function V(E){if(!(typeof E!="object"||Zt(E))){for(var m=Object.keys(E),P=0;P<m.length;++P)if(Rt.isDynamic(E[m[P]]))return!0;return!1}}function Ge(E,m,P){var F=m.static[P];if(!F||!V(F))return;var $=E.global,N=Object.keys(F),k=!1,M=!1,_=!1,A=E.global.def("{}");N.forEach(function(U){var G=F[U];if(Rt.isDynamic(G)){typeof G=="function"&&(G=F[U]=Rt.unbox(G));var J=mr(G,null);k=k||J.thisDep,_=_||J.propDep,M=M||J.contextDep}else{switch($(A,".",U,"="),typeof G){case"number":$(G);break;case"string":$('"',G,'"');break;case"object":Array.isArray(G)&&$("[",G.join(),"]");break;default:$(E.link(G));break}$(";")}});function S(U,G){N.forEach(function(J){var re=F[J];if(Rt.isDynamic(re)){var _e=U.invoke(G,re);G(A,".",J,"=",_e,";")}})}m.dynamic[P]=new Rt.DynamicVariable(lf,{thisDep:k,contextDep:M,propDep:_,ref:A,append:S}),delete m.static[P]}function _t(E,m,P,F,$){var N=ot();N.stats=N.link($),Object.keys(m.static).forEach(function(M){Ge(N,m,M)}),eS.forEach(function(M){Ge(N,E,M)});var k=Tn(E,m,P,F,N);return vn(N,k),Y(N,k),T(N,k),r(N.compile(),{destroy:function(){k.shader.program.destroy()}})}return{next:Oe,current:Ne,procs:function(){var E=ot(),m=E.proc("poll"),P=E.proc("refresh"),F=E.block();m(F),P(F);var $=E.shared,N=$.gl,k=$.next,M=$.current;F(M,".dirty=false;"),Pn(E,m),Pn(E,P,null,!0);var _;he&&(_=E.link(he)),R.oes_vertex_array_object&&P(E.link(R.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var A=0;A<X.maxAttributes;++A){var S=P.def($.attributes,"[",A,"]"),U=E.cond(S,".buffer");U.then(N,".enableVertexAttribArray(",A,");",N,".bindBuffer(",yl,",",S,".buffer.buffer);",N,".vertexAttribPointer(",A,",",S,".size,",S,".type,",S,".normalized,",S,".stride,",S,".offset);").else(N,".disableVertexAttribArray(",A,");",N,".vertexAttrib4f(",A,",",S,".x,",S,".y,",S,".z,",S,".w);",S,".buffer=null;"),P(U),he&&P(_,".vertexAttribDivisorANGLE(",A,",",S,".divisor);")}return P(E.shared.vao,".currentVAO=null;",E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"),Object.keys(ne).forEach(function(G){var J=ne[G],re=F.def(k,".",G),_e=E.block();_e("if(",re,"){",N,".enable(",J,")}else{",N,".disable(",J,")}",M,".",G,"=",re,";"),P(_e),m("if(",re,"!==",M,".",G,"){",_e,"}")}),Object.keys(ee).forEach(function(G){var J=ee[G],re=Ne[G],_e,it,Ze=E.block();if(Ze(N,".",J,"("),Zt(re)){var Be=re.length;_e=E.global.def(k,".",G),it=E.global.def(M,".",G),Ze(rn(Be,function(oe){return _e+"["+oe+"]"}),");",rn(Be,function(oe){return it+"["+oe+"]="+_e+"["+oe+"];"}).join("")),m("if(",rn(Be,function(oe){return _e+"["+oe+"]!=="+it+"["+oe+"]"}).join("||"),"){",Ze,"}")}else _e=F.def(k,".",G),it=F.def(M,".",G),Ze(_e,");",M,".",G,"=",_e,";"),m("if(",_e,"!==",it,"){",Ze,"}");P(Ze)}),E.compile()}(),compile:_t}}function xS(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ES=34918,_S=34919,Pg=35007,SS=function(c,g){if(!g.ext_disjoint_timer_query)return null;var R=[];function X(){return R.pop()||g.ext_disjoint_timer_query.createQueryEXT()}function te(he){R.push(he)}var W=[];function K(he){var Fe=X();g.ext_disjoint_timer_query.beginQueryEXT(Pg,Fe),W.push(Fe),de(W.length-1,W.length,he)}function fe(){g.ext_disjoint_timer_query.endQueryEXT(Pg)}function ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ge=[];function xe(){return ge.pop()||new ce}function ye(he){ge.push(he)}var Te=[];function de(he,Fe,le){var Ne=xe();Ne.startQueryIndex=he,Ne.endQueryIndex=Fe,Ne.sum=0,Ne.stats=le,Te.push(Ne)}var ve=[],B=[];function Q(){var he,Fe,le=W.length;if(le!==0){B.length=Math.max(B.length,le+1),ve.length=Math.max(ve.length,le+1),ve[0]=0,B[0]=0;var Ne=0;for(he=0,Fe=0;Fe<W.length;++Fe){var Oe=W[Fe];g.ext_disjoint_timer_query.getQueryObjectEXT(Oe,_S)?(Ne+=g.ext_disjoint_timer_query.getQueryObjectEXT(Oe,ES),te(Oe)):W[he++]=Oe,ve[Fe+1]=Ne,B[Fe+1]=he}for(W.length=he,he=0,Fe=0;Fe<Te.length;++Fe){var Je=Te[Fe],ne=Je.startQueryIndex,ee=Je.endQueryIndex;Je.sum+=ve[ee]-ve[ne];var Ue=B[ne],Ae=B[ee];Ae===Ue?(Je.stats.gpuTime+=Je.sum/1e6,ye(Je)):(Je.startQueryIndex=Ue,Je.endQueryIndex=Ae,Te[he++]=Je)}Te.length=he}}return{beginQuery:K,endQuery:fe,pushScopeStats:de,update:Q,getNumPendingQueries:function(){return W.length},clear:function(){R.push.apply(R,W);for(var he=0;he<R.length;he++)g.ext_disjoint_timer_query.deleteQueryEXT(R[he]);W.length=0,R.length=0},restore:function(){W.length=0,R.length=0}}},wS=16384,TS=256,bS=1024,AS=34962,kg="webglcontextlost",Ng="webglcontextrestored",Ig=1,CS=2,LS=3;function Dg(c,g){for(var R=0;R<c.length;++R)if(c[R]===g)return R;return-1}function RS(c){var g=cr(c);if(!g)return null;var R=g.gl,X=R.getContextAttributes(),te=R.isContextLost(),W=Jr(R,g);if(!W)return null;var K=Sr(),fe=xS(),ce=W.extensions,ge=SS(R,ce),xe=hn(),ye=R.drawingBufferWidth,Te=R.drawingBufferHeight,de={tick:0,time:0,viewportWidth:ye,viewportHeight:Te,framebufferWidth:ye,framebufferHeight:Te,drawingBufferWidth:ye,drawingBufferHeight:Te,pixelRatio:g.pixelRatio},ve={},B={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q=ac(R,ce),he=vs(R,fe,g,Ne),Fe=_s(R,ce,he,fe),le=be(R,ce,Q,fe,he,Fe,B);function Ne(tt){return le.destroyBuffer(tt)}var Oe=Dt(R,K,fe,g),Je=Km(R,ce,Q,function(){Ue.procs.poll()},de,fe,g),ne=qm(R,ce,Q,fe,g),ee=dh(R,ce,Q,Je,ne,fe),Ue=yS(R,K,ce,Q,he,Fe,Je,ee,ve,le,Oe,B,de,ge,g),Ae=K_(R,ee,Ue.procs.poll,de,X,ce,Q),me=Ue.next,Ce=R.canvas,Re=[],ct=[],ot=[],Pe=[g.onDestroy],Me=null;function nt(){if(Re.length===0){ge&&ge.update(),Me=null;return}Me=En.next(nt),zn();for(var tt=Re.length-1;tt>=0;--tt){var bt=Re[tt];bt&&bt(de,null,0)}R.flush(),ge&&ge.update()}function ft(){!Me&&Re.length>0&&(Me=En.next(nt))}function Tt(){Me&&(En.cancel(nt),Me=null)}function an(tt){tt.preventDefault(),te=!0,Tt(),ct.forEach(function(bt){bt()})}function sn(tt){R.getError(),te=!1,W.restore(),Oe.restore(),he.restore(),Je.restore(),ne.restore(),ee.restore(),le.restore(),ge&&ge.restore(),Ue.procs.refresh(),ft(),ot.forEach(function(bt){bt()})}Ce&&(Ce.addEventListener(kg,an,!1),Ce.addEventListener(Ng,sn,!1));function Lt(){Re.length=0,Tt(),Ce&&(Ce.removeEventListener(kg,an),Ce.removeEventListener(Ng,sn)),Oe.clear(),ee.clear(),ne.clear(),le.clear(),Je.clear(),Fe.clear(),he.clear(),ge&&ge.clear(),Pe.forEach(function(tt){tt()})}function Rn(tt){y(!!tt,"invalid args to regl({...})"),y.type(tt,"object","invalid args to regl({...})");function bt($){var N=r({},$);delete N.uniforms,delete N.attributes,delete N.context,delete N.vao,"stencil"in N&&N.stencil.op&&(N.stencil.opBack=N.stencil.opFront=N.stencil.op,delete N.stencil.op);function k(M){if(M in N){var _=N[M];delete N[M],Object.keys(_).forEach(function(A){N[M+"."+A]=_[A]})}}return k("blend"),k("depth"),k("cull"),k("stencil"),k("polygonOffset"),k("scissor"),k("sample"),"vao"in $&&(N.vao=$.vao),N}function Nt($,N){var k={},M={};return Object.keys($).forEach(function(_){var A=$[_];if(Rt.isDynamic(A)){M[_]=Rt.unbox(A,_);return}else if(N&&Array.isArray(A)){for(var S=0;S<A.length;++S)if(Rt.isDynamic(A[S])){M[_]=Rt.unbox(A,_);return}}k[_]=A}),{dynamic:M,static:k}}var vn=Nt(tt.context||{},!0),Si=Nt(tt.uniforms||{},!0),po=Nt(tt.attributes||{},!1),T=Nt(bt(tt),!1),Y={gpuTime:0,cpuTime:0,count:0},V=Ue.compile(T,po,Si,vn,Y),Ge=V.draw,_t=V.batch,E=V.scope,m=[];function P($){for(;m.length<$;)m.push(null);return m}function F($,N){var k;if(te&&y.raise("context lost"),typeof $=="function")return E.call(this,null,$,0);if(typeof N=="function")if(typeof $=="number")for(k=0;k<$;++k)E.call(this,null,N,k);else if(Array.isArray($))for(k=0;k<$.length;++k)E.call(this,$[k],N,k);else return E.call(this,$,N,0);else if(typeof $=="number"){if($>0)return _t.call(this,P($|0),$|0)}else if(Array.isArray($)){if($.length)return _t.call(this,$,$.length)}else return Ge.call(this,$)}return r(F,{stats:Y,destroy:function(){V.destroy()}})}var Jt=ee.setFBO=Rn({framebuffer:Rt.define.call(null,Ig,"framebuffer")});function Tn(tt,bt){var Nt=0;Ue.procs.poll();var vn=bt.color;vn&&(R.clearColor(+vn[0]||0,+vn[1]||0,+vn[2]||0,+vn[3]||0),Nt|=wS),"depth"in bt&&(R.clearDepth(+bt.depth),Nt|=TS),"stencil"in bt&&(R.clearStencil(bt.stencil|0),Nt|=bS),y(!!Nt,"called regl.clear with no buffer specified"),R.clear(Nt)}function On(tt){if(y(typeof tt=="object"&&tt,"regl.clear() takes an object as input"),"framebuffer"in tt)if(tt.framebuffer&&tt.framebuffer_reglType==="framebufferCube")for(var bt=0;bt<6;++bt)Jt(r({framebuffer:tt.framebuffer.faces[bt]},tt),Tn);else Jt(tt,Tn);else Tn(null,tt)}function Pn(tt){y.type(tt,"function","regl.frame() callback must be a function"),Re.push(tt);function bt(){var Nt=Dg(Re,tt);y(Nt>=0,"cannot cancel a frame twice");function vn(){var Si=Dg(Re,vn);Re[Si]=Re[Re.length-1],Re.length-=1,Re.length<=0&&Tt()}Re[Nt]=vn}return ft(),{cancel:bt}}function Bn(){var tt=me.viewport,bt=me.scissor_box;tt[0]=tt[1]=bt[0]=bt[1]=0,de.viewportWidth=de.framebufferWidth=de.drawingBufferWidth=tt[2]=bt[2]=R.drawingBufferWidth,de.viewportHeight=de.framebufferHeight=de.drawingBufferHeight=tt[3]=bt[3]=R.drawingBufferHeight}function zn(){de.tick+=1,de.time=vt(),Bn(),Ue.procs.poll()}function pn(){Je.refresh(),Bn(),Ue.procs.refresh(),ge&&ge.update()}function vt(){return(hn()-xe)/1e3}pn();function Un(tt,bt){y.type(bt,"function","listener callback must be a function");var Nt;switch(tt){case"frame":return Pn(bt);case"lost":Nt=ct;break;case"restore":Nt=ot;break;case"destroy":Nt=Pe;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}return Nt.push(bt),{cancel:function(){for(var vn=0;vn<Nt.length;++vn)if(Nt[vn]===bt){Nt[vn]=Nt[Nt.length-1],Nt.pop();return}}}}var $t=r(Rn,{clear:On,prop:Rt.define.bind(null,Ig),context:Rt.define.bind(null,CS),this:Rt.define.bind(null,LS),draw:Rn({}),buffer:function(tt){return he.create(tt,AS,!1,!1)},elements:function(tt){return Fe.create(tt,!1)},texture:Je.create2D,cube:Je.createCube,renderbuffer:ne.create,framebuffer:ee.create,framebufferCube:ee.createCube,vao:le.createVAO,attributes:X,frame:Pn,on:Un,limits:Q,hasExtension:function(tt){return Q.extensions.indexOf(tt.toLowerCase())>=0},read:Ae,destroy:Lt,_gl:R,_refresh:pn,poll:function(){zn(),ge&&ge.update()},now:vt,stats:fe});return g.onDone(null,$t),$t}return RS})})(x_);var dA=x_.exports;const mA=j0(dA);var hA=1e-6,Mo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function cp(){var e=new Mo(16);return Mo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function n1(e){var t=new Mo(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function R0(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=t[7],p=t[8],h=t[9],d=t[10],w=t[11],x=t[12],L=t[13],I=t[14],v=t[15],b=n*l-r*o,C=n*u-i*o,H=n*f-a*o,q=r*u-i*l,ie=r*f-a*l,we=i*f-a*u,se=p*L-h*x,at=p*I-d*x,Ve=p*v-w*x,Se=h*I-d*L,Ke=h*v-w*L,Qe=d*v-w*I,ze=b*Qe-C*Ke+H*Se+q*Ve-ie*at+we*se;return ze?(ze=1/ze,e[0]=(l*Qe-u*Ke+f*Se)*ze,e[1]=(i*Ke-r*Qe-a*Se)*ze,e[2]=(L*we-I*ie+v*q)*ze,e[3]=(d*ie-h*we-w*q)*ze,e[4]=(u*Ve-o*Qe-f*at)*ze,e[5]=(n*Qe-i*Ve+a*at)*ze,e[6]=(I*H-x*we-v*C)*ze,e[7]=(p*we-d*H+w*C)*ze,e[8]=(o*Ke-l*Ve+f*se)*ze,e[9]=(r*Ve-n*Ke-a*se)*ze,e[10]=(x*ie-L*H+v*b)*ze,e[11]=(h*H-p*ie-w*b)*ze,e[12]=(l*at-o*Se-u*se)*ze,e[13]=(n*Se-r*at+i*se)*ze,e[14]=(L*C-x*q-I*b)*ze,e[15]=(p*q-h*C+d*b)*ze,e):null}function or(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],p=t[7],h=t[8],d=t[9],w=t[10],x=t[11],L=t[12],I=t[13],v=t[14],b=t[15],C=n[0],H=n[1],q=n[2],ie=n[3];return e[0]=C*r+H*l+q*h+ie*L,e[1]=C*i+H*u+q*d+ie*I,e[2]=C*a+H*f+q*w+ie*v,e[3]=C*o+H*p+q*x+ie*b,C=n[4],H=n[5],q=n[6],ie=n[7],e[4]=C*r+H*l+q*h+ie*L,e[5]=C*i+H*u+q*d+ie*I,e[6]=C*a+H*f+q*w+ie*v,e[7]=C*o+H*p+q*x+ie*b,C=n[8],H=n[9],q=n[10],ie=n[11],e[8]=C*r+H*l+q*h+ie*L,e[9]=C*i+H*u+q*d+ie*I,e[10]=C*a+H*f+q*w+ie*v,e[11]=C*o+H*p+q*x+ie*b,C=n[12],H=n[13],q=n[14],ie=n[15],e[12]=C*r+H*l+q*h+ie*L,e[13]=C*i+H*u+q*d+ie*I,e[14]=C*a+H*f+q*w+ie*v,e[15]=C*o+H*p+q*x+ie*b,e}function r1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function cd(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pA(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,u,f;return o<hA?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=r*r*f+u,e[1]=i*r*f+a*l,e[2]=a*r*f-i*l,e[3]=0,e[4]=r*i*f-a*l,e[5]=i*i*f+u,e[6]=a*i*f+r*l,e[7]=0,e[8]=r*a*f+i*l,e[9]=i*a*f-r*l,e[10]=a*a*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function vA(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function gA(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],l=t[6],u=t[8],f=t[9],p=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,l),e[2]=Math.hypot(u,f,p),e}function yA(){var e=new Mo(4);return Mo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function fd(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}(function(){var e=yA();return function(t,n,r,i,a,o){var l,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function xA(){var e=new Mo(2);return Mo!=Float32Array&&(e[0]=0,e[1]=0),e}function EA(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),l=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=xA();return function(t,n,r,i,a,o){var l,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}})();const _A=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],a=[[-1/0,1/0],[-1/0,1/0]])=>{const o=new Float32Array(16),l=new Float32Array(16),u=new Float32Array(16);let f=cp(),p=[...r.slice(0,2),0,1];const h=Array.isArray(i[0])?[...i[0]]:[...i],d=Array.isArray(i[0])?[...i[1]]:[...i],w=Array.isArray(a[0])?[...a[0]]:[...a],x=Array.isArray(a[0])?[...a[1]]:[...a],L=()=>gA(o,f).slice(0,2),I=()=>{const Ee=L();return Math.min(Ee[0],Ee[1])},v=()=>{const Ee=L();return Math.max(Ee[0],Ee[1])},b=()=>Math.acos(f[0]/v()),C=()=>[[...h],[...d]],H=()=>[[...w],[...x]],q=()=>{const Ee=L();return[1/Ee[0],1/Ee[1]]},ie=()=>1/I(),we=()=>1/v(),se=()=>vA(o,f).slice(0,2),at=()=>fd(o,p,R0(u,f)).slice(0,2),Ve=()=>f,Se=()=>p.slice(0,2),Ke=([Ee=0,$e=0]=[],lt=1,xt=0)=>{f=cp(),Qe([-Ee,-$e]),Pt(xt),ze(1/lt)},Qe=([Ee=0,$e=0]=[])=>{o[0]=Ee,o[1]=$e,o[2]=0;const lt=r1(l,o);or(f,lt,f)},ze=(Ee,$e)=>{const lt=Array.isArray(Ee);let xt=lt?Ee[0]:Ee,Wt=lt?Ee[1]:Ee;if(xt<=0||Wt<=0||xt===1&&Wt===1)return;const Yt=L(),Qt=Yt[0]*xt,It=Yt[1]*Wt;if(xt=Math.max(h[0],Math.min(Qt,h[1]))/Yt[0],Wt=Math.max(d[0],Math.min(It,d[1]))/Yt[1],xt===1&&Wt===1)return;o[0]=xt,o[1]=Wt,o[2]=1;const pt=cd(l,o),Xn=$e?[...$e,0]:p,dn=r1(o,Xn);or(f,dn,or(f,pt,or(f,R0(u,dn),f)))},Pt=Ee=>{const $e=cp();pA($e,Ee,[0,0,1]),or(f,$e,f)},mt=Ee=>{const $e=Array.isArray(Ee[0]);h[0]=$e?Ee[0][0]:Ee[0],h[1]=$e?Ee[0][1]:Ee[1],d[0]=$e?Ee[1][0]:Ee[0],d[1]=$e?Ee[1][1]:Ee[1]},ht=Ee=>{const $e=Array.isArray(Ee[0]);w[0]=$e?Ee[0][0]:Ee[0],w[1]=$e?Ee[0][1]:Ee[1],x[0]=$e?Ee[1][0]:Ee[0],x[1]=$e?Ee[1][1]:Ee[1]},pe=Ee=>{!Ee||Ee.length<16||(f=Ee)},We=Ee=>{p=[...Ee.slice(0,2),0,1]},Le=()=>{Ke(e,t,n)};return Ke(e,t,n),{get translation(){return se()},get target(){return at()},get scaling(){return L()},get minScaling(){return I()},get maxScaling(){return v()},get scaleBounds(){return C()},get translationBounds(){return H()},get distance(){return q()},get minDistance(){return ie()},get maxDistance(){return we()},get rotation(){return b()},get view(){return Ve()},get viewCenter(){return Se()},lookAt:Ke,translate:Qe,pan:Qe,rotate:Pt,scale:ze,zoom:ze,reset:Le,set:(...Ee)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),pe(...Ee)),setScaleBounds:mt,setTranslationBounds:ht,setView:pe,setViewCenter:We}},SA=["pan","rotate"],i1={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},wA=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:a=!1,isPan:o=!0,isPanInverted:l=[!1,!0],panSpeed:u=1,isRotate:f=!0,rotateSpeed:p=1,defaultMouseDownMoveAction:h="pan",mouseDownMoveModKey:d="alt",isZoom:w=!0,zoomSpeed:x=1,viewCenter:L,scaleBounds:I,translationBounds:v,onKeyDown:b=()=>{},onKeyUp:C=()=>{},onMouseDown:H=()=>{},onMouseUp:q=()=>{},onMouseMove:ie=()=>{},onWheel:we=()=>{}}={})=>{let se=_A(n,t,r,L,I,v),at=0,Ve=0,Se=0,Ke=0,Qe=0,ze=0,Pt=!1,mt=0,ht=1,pe=1,We=1,Le=!1,Ee=!1,$e=!1,lt=h==="pan",xt=o,Wt=o,Yt=l,Qt=l,It=w,pt=w;const Xn=()=>{xt=Array.isArray(o)?!!o[0]:o,Wt=Array.isArray(o)?!!o[1]:o,Yt=Array.isArray(l)?!!l[0]:l,Qt=Array.isArray(l)?!!l[1]:l,It=Array.isArray(w)?!!w[0]:w,pt=Array.isArray(w)?!!w[1]:w};Xn();const dn=i?De=>De/ht*2*We:De=>De,Xt=i?De=>De/pe*2:De=>-De,en=i?De=>(-1+De/ht*2)*We:De=>De,Et=i?De=>1-De/pe*2:De=>De,St=()=>{if(a){const st=Ee;return Ee=!1,st}Le=!1;const De=at,ut=Ve;if((xt||Wt)&&Pt&&(lt&&!$e||!lt&&$e)){const st=Yt?Qe-De:De-Qe,tn=xt?dn(u*st):0,nn=Qt?ze-ut:ut-ze,Rt=Wt?Xt(u*nn):0;(tn!==0||Rt!==0)&&(se.pan([tn,Rt]),Le=!0)}if((It||pt)&&mt){const st=x*Math.exp(mt/pe),tn=en(Se),nn=Et(Ke);se.scale([It?1/st:1,pt?1/st:1],[tn,nn]),Le=!0}if(f&&Pt&&(lt&&$e||!lt&&!$e)&&Math.abs(Qe-De)+Math.abs(ze-ut)>0){const st=ht/2,tn=pe/2,nn=Qe-st,Rt=tn-ze,En=De-st,hn=tn-ut,Sr=EA([nn,Rt],[En,hn]),nr=nn*hn-En*Rt;se.rotate(p*Sr*Math.sign(nr)),Le=!0}mt=0,Qe=De,ze=ut;const jt=Le||Ee;return Ee=!1,jt},kt=({defaultMouseDownMoveAction:De=null,isFixed:ut=null,isPan:jt=null,isPanInverted:st=null,isRotate:tn=null,isZoom:nn=null,panSpeed:Rt=null,rotateSpeed:En=null,zoomSpeed:hn=null,mouseDownMoveModKey:Sr=null}={})=>{h=De!==null&&SA.includes(De)?De:h,lt=h==="pan",a=ut!==null?ut:a,o=jt!==null?jt:o,l=st!==null?st:l,f=tn!==null?tn:f,w=nn!==null?nn:w,u=+Rt>0?Rt:u,p=+En>0?En:p,x=+hn>0?hn:x,Xn(),d=Sr!==null&&Object.keys(i1).includes(Sr)?Sr:d},At=()=>{const De=e.getBoundingClientRect();ht=De.width,pe=De.height,We=ht/pe},Ct=De=>{$e=!1,C(De)},Ut=De=>{$e=De[i1[d]],b(De)},mn=De=>{Pt=!1,q(De)},ln=De=>{Pt=De.buttons===1,H(De)},y=document.createEvent("MouseEvent").offsetX!==void 0?De=>{Se=De.offsetX,Ke=De.offsetY}:De=>{const ut=e.getBoundingClientRect();Se=De.clientX-ut.left,Ke=De.clientY-ut.top},wt=De=>{at=De.clientX,Ve=De.clientY},Ft=De=>{wt(De),ie(De)},Ie=De=>{if(It||pt){De.preventDefault(),wt(De),y(De);const ut=De.deltaMode===1?12:1;mt+=ut*(De.deltaY||De.deltaX||0)}we(De)},Kt=()=>{se=void 0,window.removeEventListener("keydown",Ut),window.removeEventListener("keyup",Ct),e.removeEventListener("mousedown",ln),window.removeEventListener("mouseup",mn),window.removeEventListener("mousemove",Ft),e.removeEventListener("wheel",Ie)};window.addEventListener("keydown",Ut,{passive:!0}),window.addEventListener("keyup",Ct,{passive:!0}),e.addEventListener("mousedown",ln,{passive:!0}),window.addEventListener("mouseup",mn,{passive:!0}),window.addEventListener("mousemove",Ft,{passive:!0}),e.addEventListener("wheel",Ie,{passive:!1}),se.config=kt,se.dispose=Kt,se.refresh=At,se.tick=St;const gt=De=>function(){De.apply(null,arguments),Ee=!0};return se.lookAt=gt(se.lookAt),se.translate=gt(se.translate),se.pan=gt(se.pan),se.rotate=gt(se.rotate),se.scale=gt(se.scale),se.zoom=gt(se.zoom),se.reset=gt(se.reset),se.set=gt(se.set),se.setScaleBounds=gt(se.setScaleBounds),se.setTranslationBounds=gt(se.setTranslationBounds),se.setView=gt(se.setView),se.setViewCenter=gt(se.setViewCenter),At(),se};function O0(e,t,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;E_(e,t,o,r,i,a%2),O0(e,t,n,r,o-1,a+1),O0(e,t,n,o+1,i,a+1)}function E_(e,t,n,r,i,a){for(;i>r;){if(i-r>600){const f=i-r+1,p=n-r+1,h=Math.log(f),d=.5*Math.exp(2*h/3),w=.5*Math.sqrt(h*d*(f-d)/f)*(p-f/2<0?-1:1),x=Math.max(r,Math.floor(n-p*d/f+w)),L=Math.min(i,Math.floor(n+(f-p)*d/f+w));E_(e,t,n,x,L,a)}const o=t[2*n+a];let l=r,u=i;for(lu(e,t,r,n),t[2*i+a]>o&&lu(e,t,r,i);l<u;){for(lu(e,t,l,u),l++,u--;t[2*l+a]<o;)l++;for(;t[2*u+a]>o;)u--}t[2*r+a]===o?lu(e,t,r,u):(u++,lu(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function lu(e,t,n,r){fp(e,n,r),fp(t,2*n,2*r),fp(t,2*n+1,2*r+1)}function fp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function TA(e,t,n,r,i,a,o){const l=[0,e.length-1,0],u=[];let f,p;for(;l.length;){const h=l.pop(),d=l.pop(),w=l.pop();if(d-w<=o){for(let I=w;I<=d;I++)f=t[2*I],p=t[2*I+1],f>=n&&f<=i&&p>=r&&p<=a&&u.push(e[I]);continue}const x=Math.floor((w+d)/2);f=t[2*x],p=t[2*x+1],f>=n&&f<=i&&p>=r&&p<=a&&u.push(e[x]);const L=(h+1)%2;(h===0?n<=f:r<=p)&&(l.push(w),l.push(x-1),l.push(L)),(h===0?i>=f:a>=p)&&(l.push(x+1),l.push(d),l.push(L))}return u}function bA(e,t,n,r,i,a){const o=[0,e.length-1,0],l=[],u=i*i;for(;o.length;){const f=o.pop(),p=o.pop(),h=o.pop();if(p-h<=a){for(let I=h;I<=p;I++)a1(t[2*I],t[2*I+1],n,r)<=u&&l.push(e[I]);continue}const d=Math.floor((h+p)/2),w=t[2*d],x=t[2*d+1];a1(w,x,n,r)<=u&&l.push(e[d]);const L=(f+1)%2;(f===0?n-i<=w:r-i<=x)&&(o.push(h),o.push(d-1),o.push(L)),(f===0?n+i>=w:r+i>=x)&&(o.push(d+1),o.push(p),o.push(L))}return l}function a1(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}const AA=e=>e[0],CA=e=>e[1];class LA{constructor(t,n=AA,r=CA,i=64,a=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new o(t.length),u=this.coords=new a(t.length*2);for(let f=0;f<t.length;f++)l[f]=f,u[2*f]=n(t[f]),u[2*f+1]=r(t[f]);O0(l,u,i,0,l.length-1,0)}range(t,n,r,i){return TA(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return bA(this.ids,this.coords,t,n,r,this.nodeSize)}}const RA=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var OA=RA;const PA=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var kA=PA;const{push:o1,splice:NA}=Array.prototype,dp=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ir=Float32Array.BYTES_PER_ELEMENT,IA=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const a=n+i*2,o=a+1,l=a+2,u=a+3;t.push(a,o,l,l,o,u)}n+=(r+2)*2}),t},Rr={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let a=0,o=e.length/t;a<o;a++){const l=a*t;for(let u=0;u<t;u++){const f=e[l+u];i[u]=f,i[u+t]=f*n}o1.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,a=e.length/n;i<a;i++){const o=t+i*n;e[o]=r(e[o],o,i)}return e},copyElement(e,t,n,r){const i=new Array(r),a=t*r;for(let o=0;o<r;o++)i[o]=e[a+o];return NA.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],a=new Array(n).fill(r);for(let o=0,l=e.length/t;o<l;o++){const u=o*t;for(let f=0;f<t;f++)a[f]=e[u+f];o1.apply(i,a)}return i}},DA=(e,{projection:t=dp,model:n=dp,view:r=dp,points:i=[],colorIndices:a=[],color:o=[.8,.5,0,1],opacity:l=null,opacities:u=[],width:f=1,widths:p=[],miter:h=1,is2d:d=!1,zPos2d:w=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const x=new Float32Array(16);let L,I,v,b,C,H,q,ie,we,se,at,Ve,Se,Ke,Qe,ze,Pt,mt,ht=d?2:3;const pe=()=>+(u.length===I||l!==null),We=()=>{se=e.buffer(),at=e.buffer(),Ve=e.buffer(),Qe=e.buffer(),ze={prevPosition:{buffer:()=>se,offset:0,stride:ir*3},currPosition:{buffer:()=>se,offset:ir*3*2,stride:ir*3},nextPosition:{buffer:()=>se,offset:ir*3*4,stride:ir*3},opacity:{buffer:()=>at,offset:ir*2,stride:ir},offsetScale:{buffer:()=>Ve,offset:ir*2,stride:ir},colorIndex:{buffer:()=>Qe,offset:ir*2,stride:ir}},Pt=e.elements(),mt=e({attributes:ze,depth:{enable:!d},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(Et,St)=>{const kt=Et.projection||St.projection,At=Et.model||St.model,Ct=Et.view||St.view;return or(x,kt,or(x,Ct,At))},aspectRatio:({viewportWidth:Et,viewportHeight:St})=>Et/St,colorTex:()=>Se,colorTexRes:()=>Ke,colorTexEps:()=>.5/Ke,pixelRatio:({pixelRatio:Et})=>Et,width:({pixelRatio:Et,viewportHeight:St})=>f/St*Et,useOpacity:pe,useColorOpacity:()=>+!pe(),miter:h},elements:()=>Pt,vert:kA,frag:OA})},Le=()=>{L===1&&i.length%ht>0&&console.warn(`The length of points (${I}) does not match the dimensions (${ht}). Incomplete points are ignored.`),b=i.flat().slice(0,I*ht),d&&(b=Rr.increaseStride(b,2,3,w)),a.length!==I&&(a=new Array(I).fill(0)),p.length!==I&&(p=new Array(I).fill(1));let Et=a.slice(),St=u.length===I?u.slice():new Array(I).fill(+l),kt=p.slice(),At=0;v.forEach(Ct=>{const Ut=At+Ct-1;Rr.copyElement(b,Ut,Ut,3),Rr.copyElement(b,At,At,3),Rr.copyElement(Et,Ut,Ut,1),Rr.copyElement(Et,At,At,1),Rr.copyElement(St,Ut,Ut,1),Rr.copyElement(St,At,At,1),Rr.copyElement(kt,Ut,Ut,1),Rr.copyElement(kt,At,At,1),At+=Ct+2}),C=new Float32Array(Rr.duplicate(b,3)),H=Rr.duplicate(Et),q=Rr.duplicate(St),ie=Rr.duplicate(kt,1,-1),we=IA(v),se({usage:"dynamic",type:"float",length:C.length*ir,data:C}),at({usage:"dynamic",type:"float",length:q.length*ir,data:q}),Ve({usage:"dynamic",type:"float",length:ie.length*ir,data:ie}),Qe({usage:"dynamic",type:"float",length:H.length*ir,data:H}),Pt({primitive:"triangles",usage:"dynamic",type:we.length>2**16?"uint32":"uint16",data:we})},Ee=()=>{$e(),We()},$e=()=>{i=null,b=null,C=null,ie=null,we=null,se.destroy(),Ve.destroy(),Pt.destroy()},lt=({projection:Et,model:St,view:kt}={})=>{Et&&(t=Et),St&&(n=St),kt&&(r=kt),i&&i.length>1&&mt({projection:t,model:n,view:r})},xt=(Et,St)=>{const kt=St.flat(2);return kt.length===I?kt:kt.length===L?v.map((At,Ct)=>Array(At).fill(kt[Ct])).flat():Et},Wt=()=>i,Yt=(Et=[],{colorIndices:St=a,opacities:kt=u,widths:At=p,is2d:Ct=d}={})=>{i=Et,d=Ct,ht=d?2:3,L=Array.isArray(i[0])?i.length:1,v=L>1?i.map(Ut=>Math.floor(Ut.length/ht)):[Math.floor(i.length/ht)],I=v.reduce((Ut,mn)=>Ut+mn,0),a=xt(a,St),u=xt(u,kt),p=xt(p,At),i&&I>1?Le():Ee()},Qt=(Et,St=-1)=>Array.isArray(Et)?Et.length&&!Array.isArray(Et[0])?St+1:Qt(Et[0],++St):St,It=()=>{const Et=Qt(o)===0?[o]:o;Ke=Math.max(2,Math.ceil(Math.sqrt(Et.length)));const St=new Uint8Array(Ke**2*4);Et.forEach((kt,At)=>{St[At*4]=Math.min(255,Math.max(0,Math.round(kt[0]*255))),St[At*4+1]=Math.min(255,Math.max(0,Math.round(kt[1]*255))),St[At*4+2]=Math.min(255,Math.max(0,Math.round(kt[2]*255))),St[At*4+3]=Number.isNaN(+kt[3])?255:Math.min(255,Math.max(0,Math.round(kt[3]*255)))}),Se=e.texture({data:St,shape:[Ke,Ke,4]})},pt=(Et,St=l)=>{o=Et,l=St,Se&&Se.destroy(),It()},Xn=()=>({color:o,miter:h,width:f}),dn=({color:Et,opacity:St,miter:kt,width:At}={})=>{Et&&pt(Et,St),kt&&(h=kt),+At>0&&(f=At)},Xt=()=>({points:se,widths:Ve,opacities:at,colorIndices:Qe}),en=()=>({points:C,widths:ie,opacities:q,colorIndices:H});return We(),It(),i&&i.length>1&&Yt(i),{clear:Ee,destroy:$e,draw:lt,getPoints:Wt,setPoints:Yt,getData:en,getBuffer:Xt,getStyle:Xn,setStyle:dn}};var zf=DA;const MA=e=>e*e*e,__=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,FA=e=>--e*e*e+1,jA=e=>e,BA=e=>e*e,$A=e=>e<.5?2*e*e:-1+(4-2*e)*e,GA=e=>e*(2-e),Dl=e=>e,zA=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},UA=e=>e.reduce((t,n)=>n>t?n:t,-1/0),l1=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},VA=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,a)=>(i&&r.push(a),r),[])},jv=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,a)=>(i[a]=Object.getOwnPropertyDescriptor(n,a),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const a=Object.getOwnPropertyDescriptor(n,i);a.enumerable&&(r[i]=a)}),Object.defineProperties(e,r)}),e),HA=(...e)=>t=>e.reduce((n,r)=>r(n),t),WA=e=>t=>jv({__proto__:{constructor:e}},t),s1=(e,t)=>n=>jv(n,{get[e](){return t}}),XA=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),YA=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),_l=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),S_=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const a=(...u)=>{const f=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(f,n)};let o=!1;const l=(...u)=>{o?(i++,a(...u)):(e(...u),a(...u),o=!0,i=0,setTimeout(()=>{o=!1},t))};return l.reset=()=>{o=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...u)=>e(...u),l},Ci="auto",QA=0,mp=1,KA=2,u1=3,qA=4,ZA=Float32Array.BYTES_PER_ELEMENT,w_=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],c1={color:[0,0,0,0],depth:1},Bv="panZoom",T_="lasso",b_="rotate",JA=[Bv,T_,b_],eC=Bv,tC={cubicIn:MA,cubicInOut:__,cubicOut:FA,linear:jA,quadIn:BA,quadInOut:$A,quadOut:GA},f1=__,bi="continuous",Sl="categorical",d1=[bi,Sl],P0="deselect",$v="lassoEnd",nC=[P0,$v],rC=[0,.666666667,1,1],iC=2,aC=!1,oC=10,lC=3,sC=$v,uC=!1,$d=750,Gd=500,zd=100,Ud=250,Gv="lasso",Vd="rotate",Hd="merge",cC=[Gv,Vd,Hd],zv="alt",Uv="cmd",A_="ctrl",C_="meta",Vv="shift",fC=[zv,Uv,A_,C_,Vv],dC={[zv]:Vd,[Vv]:Gv,[Uv]:Hd},mC=1,hC=Ci,pC=Ci,vC=1,hp=1,gC=6,yC=2,xC=2,pp=null,EC=2,_C=2,vp=null,SC=null,gp=null,wC=.66,TC=1,yp=null,bC=.15,AC=25,CC=1,LC=1,su=null,RC=[.66,.66,.66,TC],OC=[0,.55,1,1],PC=[1,1,1,1],kC=[0,0,0,1],xp=null,NC=[.66,.66,.66,.2],IC=[0,.55,1,1],DC=[1,1,1,1],MC=[0,0],FC=1,jC=0,BC=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),$C="IMAGE_LOAD_ERROR",GC=null,zC=!1,UC=[1,1,1,.5],VC=!0,HC=!0,WC=!1,XC=100,YC=1/500,QC="auto",KC=!1,qC=200,ZC=500,L_=new Set(["z","valueZ","valueA","value1","category"]),R_=new Set(["w","valueW","valueB","value2","value"]),Hv=15e3,m1="Points have not been drawn",JC=(e,t)=>e?w_.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,e2=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return w_.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),mA({gl:t,extensions:n})},Ep=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),t2=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let a=0;a<e.length;a+=2)t=e[a]<t?e[a]:t,n=e[a]>n?e[a]:n,r=e[a+1]<r?e[a+1]:r,i=e[a+1]>i?e[a+1]:i;return[t,r,n,i]},n2=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,r2=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,a)=>`#${r}${r}${i}${i}${a}${a}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),Sa=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),wa=e=>!Number.isNaN(+e)&&+e>=0,Uf=e=>!Number.isNaN(+e)&&+e>0,h1=(e,t)=>n=>e.indexOf(n)>=0?n:t,i2=(e,t=!1,n=Hv)=>new Promise((r,i)=>{const a=new Image;t&&(a.crossOrigin="anonymous"),a.src=e,a.onload=()=>{r(a)};const o=()=>{i(new Error($C))};a.onerror=o,setTimeout(o,n)}),p1=(e,t,n=Hv)=>new Promise((r,i)=>{i2(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(a=>{r(e.texture(a))}).catch(a=>{i(a)})}),a2=(e,t=!1)=>[...r2(e,t),255**!t],o2=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),l2=e=>e>=0&&e<=1,Wd=e=>Array.isArray(e)&&e.every(l2),s2=(e,[t,n]=[])=>{let r,i,a,o,l=!1;for(let u=0,f=e.length-2;u<e.length;u+=2)r=e[u],i=e[u+1],a=e[f],o=e[f+1],i>n!=o>n&&t<(a-r)*(n-i)/(o-i)+r&&(l=!l),f=u;return l},k0=e=>typeof e=="string"||e instanceof String,u2=e=>Number.isInteger(e)&&e>=0&&e<=255,O_=e=>Array.isArray(e)&&e.every(u2),c2=e=>e.length===3&&(Wd(e)||O_(e)),f2=e=>e.length===4&&(Wd(e)||O_(e)),Ta=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||k0(e[0])),Vf=(e,t)=>e>t?e:t,v1=(e,t)=>e<t?e:t,pr=(e,t)=>{if(f2(e)){const n=Wd(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(c2(e)){const n=255**!t,r=Wd(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return o2(e)?a2(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},g1=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),y1=e=>.21*e[0]+.72*e[1]+.07*e[2],d2=(e,t,n)=>Math.min(n,Math.max(t,e)),m2=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=vC}=e;t||(t=e2(n));const i=JC(t),a=[n.width,n.height],o=t.framebuffer({width:a[0],height:a[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>o,srcRes:()=>a,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),u=I=>{const v=I.getContext("2d");v.clearRect(0,0,I.width,I.height),v.drawImage(n,(n.width-I.width)/2,(n.height-I.height)/2,I.width,I.height,0,0,I.width,I.height)},f=(I,v)=>{t.clear(c1),o.use(()=>{t.clear(c1),I()}),l(),u(v)},p=()=>{t.poll()},h=new Set,d=I=>(h.add(I),()=>{h.delete(I)}),w=t.frame(()=>{const I=h.values();let v=I.next();for(;!v.done;)v.value(),v=I.next()}),x=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,a[0]=n.width,a[1]=n.height,o.resize(...a)};return e.canvas||(window.addEventListener("resize",x),window.addEventListener("orientationchange",x),x()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(I){r=+I},get isSupported(){return i},render:f,onFrame:d,refresh:p,destroy:()=>{w.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}}},h2=!0,_p=8,x1=2,p2=2500,v2=250,g2=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const a=document.createElement("div");return a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.width="1.25rem",a.style.height="1.25rem",a.style.borderRadius="1.25rem",a.style.background="currentcolor",a.style.transform="scale(0)",a.style.opacity=0,e.appendChild(a),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:a}},y2=(e,t,n)=>(1-e)*t+n,x2=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,E2=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,_2=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,S2=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,w2=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,T2=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,b2=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,A2=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,C2=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,L2=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,R2=({time:e=$d,extraTime:t=Gd,delay:n=zd,currentColor:r,targetColor:i,effectOpacity:a,effectScale:o,circleLeftRotation:l,circleRightRotation:u,circleClipPath:f,circleOpacity:p})=>{const h=l/360,d=y2(h,e,t),w=Math.round((1-h)*e/d*100),x=Math.round(w/2),L=w+(100-w)/4;return{rules:{main:T2(w,r,i),effect:b2(w,L,a,o),circleRight:L2(x,u),circleLeft:C2(w,l),circle:A2(x,f,p)},names:{main:x2(d,n),effect:E2(d,n),circleLeft:_2(d,n),circleRight:S2(d,n),circle:w2(d,n)}}},O2=e=>`${e}ms linear mainOut 0s 1 normal forwards`,P2=e=>`${e}ms linear effectOut 0s 1 normal forwards`,k2=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,N2=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,I2=e=>`${e}ms linear circleOut 0s 1 normal forwards`,D2=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,M2=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,F2=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,j2=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,B2=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,$2=({time:e=Ud,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:a,circleRightRotation:o,circleClipPath:l,circleOpacity:u})=>{const f=a/360,p=f*e,h=Math.min(100,f*100),d=h>50?Math.round((1-50/h)*100):0;return{rules:{main:D2(t,n),effect:M2(r,i),circleRight:F2(d,o),circleLeft:j2(a),circle:B2(d,l,u)},names:{main:O2(p),effect:P2(p),circleRight:k2(p),circleLeft:N2(p),circle:I2(p)}}},uu=(e,t=null)=>e===null?t:e;let Sp;const P_=()=>{if(!Sp){const e=document.createElement("style");document.head.appendChild(e),Sp=e.sheet}return Sp},Gr=e=>{const t=P_(),n=t.rules.length;return t.insertRule(e,n),n},zr=e=>{P_().deleteRule(e)},G2=`${p2}ms ease scaleInFadeOut 0s 1 normal backwards`,z2=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let wp=null;const U2=`${v2}ms ease fadeScaleOut 0s 1 normal backwards`,V2=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let Tp=null;const k_=(e,{onDraw:t=Dl,onStart:n=Dl,onEnd:r=Dl,enableInitiator:i=h2,initiatorParentElement:a=document.body,longPressIndicatorParentElement:o=document.body,minDelay:l=_p,minDist:u=x1,pointNorm:f=Dl}={})=>{let p=i,h=a,d=o,w=t,x=n,L=r,I=f;const v=document.createElement("div"),b=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);v.id=`lasso-initiator-${b}`,v.style.position="fixed",v.style.display="flex",v.style.justifyContent="center",v.style.alignItems="center",v.style.zIndex=99,v.style.width="4rem",v.style.height="4rem",v.style.borderRadius="4rem",v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:C,longPressCircle:H,longPressCircleLeft:q,longPressCircleRight:ie,longPressEffect:we}=g2();let se=!1,at=!1,Ve=[],Se=[],Ke,Qe=!1,ze=null,Pt=null,mt=null,ht=null,pe=null,We=null,Le=null,Ee=null,$e=null,lt=null;const xt=()=>{se=!1},Wt=wt=>{const{left:Ft,top:Ie}=e.getBoundingClientRect();return[wt.clientX-Ft,wt.clientY-Ie]};window.addEventListener("mouseup",xt);const Yt=()=>{v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},Qt=(wt,Ft)=>{const Ie=getComputedStyle(wt),Kt=+Ie.opacity,gt=Ie.transform.match(/([0-9.-]+)+/g),De=+gt[0],ut=+gt[1],jt=Math.sqrt(De*De+ut*ut);let st=Math.atan2(ut,De)*(180/Math.PI);return st=Ft&&st<=0?360+st:st,{opacity:Kt,scale:jt,rotate:st}},It=wt=>{if(!p||se)return;const Ft=wt.clientX,Ie=wt.clientY;v.style.top=`${Ie}px`,v.style.left=`${Ft}px`;const Kt=Qt(v),gt=Kt.opacity,De=Kt.scale,ut=Kt.rotate;v.style.opacity=gt,v.style.transform=`translate(-50%,-50%) scale(${De}) rotate(${ut}deg)`,v.style.animation="none",_l().then(()=>{wp!==null&&zr(wp),wp=Gr(z2(gt,De,ut)),v.style.animation=G2,_l().then(()=>{Yt()})})},pt=()=>{const{opacity:wt,scale:Ft,rotate:Ie}=Qt(v);v.style.opacity=wt,v.style.transform=`translate(-50%,-50%) scale(${Ft}) rotate(${Ie}deg)`,v.style.animation="none",_l(2).then(()=>{Tp!==null&&zr(Tp),Tp=Gr(V2(wt,Ft,Ie)),v.style.animation=U2,_l().then(()=>{Yt()})})},Xn=(wt,Ft,{time:Ie=$d,extraTime:Kt=Gd,delay:gt=zd}={time:$d,extraTime:Gd,delay:zd})=>{Qe=!0;const De=getComputedStyle(C);C.style.color=De.color,C.style.top=`${Ft}px`,C.style.left=`${wt}px`,C.style.animation="none";const ut=getComputedStyle(H);H.style.clipPath=ut.clipPath,H.style.opacity=ut.opacity,H.style.animation="none";const jt=Qt(we);we.style.opacity=jt.opacity,we.style.transform=`scale(${jt.scale})`,we.style.animation="none";const st=Qt(q);q.style.transform=`rotate(${st.rotate}deg)`,q.style.animation="none";const tn=Qt(ie);ie.style.transform=`rotate(${tn.rotate}deg)`,ie.style.animation="none",_l().then(()=>{if(!Qe)return;pe!==null&&zr(pe),ht!==null&&zr(ht),mt!==null&&zr(mt),Pt!==null&&zr(Pt),ze!==null&&zr(ze);const{rules:nn,names:Rt}=R2({time:Ie,extraTime:Kt,delay:gt,currentColor:De.color||"currentcolor",targetColor:C.dataset.activeColor,effectOpacity:jt.opacity||0,effectScale:jt.scale||0,circleLeftRotation:st.rotate||0,circleRightRotation:tn.rotate||0,circleClipPath:ut.clipPath||"inset(0 0 0 50%)",circleOpacity:ut.opacity||0});ze=Gr(nn.main),Pt=Gr(nn.effect),mt=Gr(nn.circleLeft),ht=Gr(nn.circleRight),pe=Gr(nn.circle),C.style.animation=Rt.main,we.style.animation=Rt.effect,q.style.animation=Rt.circleLeft,ie.style.animation=Rt.circleRight,H.style.animation=Rt.circle})},dn=({time:wt=Ud}={time:Ud})=>{if(!Qe)return;Qe=!1;const Ft=getComputedStyle(C);C.style.color=Ft.color,C.style.animation="none";const Ie=getComputedStyle(H);H.style.clipPath=Ie.clipPath,H.style.opacity=Ie.opacity,H.style.animation="none";const Kt=Qt(we);we.style.opacity=Kt.opacity,we.style.transform=`scale(${Kt.scale})`,we.style.animation="none";const gt=Ie.clipPath.slice(-2,-1)==="x",De=Qt(q,gt);q.style.transform=`rotate(${De.rotate}deg)`,q.style.animation="none";const ut=Qt(ie);ie.style.transform=`rotate(${ut.rotate}deg)`,ie.style.animation="none",_l().then(()=>{lt!==null&&zr(lt),$e!==null&&zr($e),Ee!==null&&zr(Ee),Le!==null&&zr(Le),We!==null&&zr(We);const{rules:jt,names:st}=$2({time:wt,currentColor:Ft.color||"currentcolor",targetColor:C.dataset.color,effectOpacity:Kt.opacity||0,effectScale:Kt.scale||0,circleLeftRotation:De.rotate||0,circleRightRotation:ut.rotate||0,circleClipPath:Ie.clipPath||"inset(0px)",circleOpacity:Ie.opacity||1});We=Gr(jt.main),Le=Gr(jt.effect),Ee=Gr(jt.circleLeft),$e=Gr(jt.circleRight),lt=Gr(jt.circle),C.style.animation=st.main,we.style.animation=st.effect,q.style.animation=st.circleLeft,ie.style.animation=st.circleRight,H.style.animation=st.circle})},Xt=()=>{w(Ve,Se)},en=wt=>{if(Ke){if(XA(wt[0],wt[1],Ke[0],Ke[1])>x1){Ke=wt;const Ie=I(wt);Ve.push(Ie),Se.push(Ie[0],Ie[1]),Ve.length>1&&Xt()}}else{at||(at=!0,x()),Ke=wt;const Ft=I(wt);Ve=[Ft],Se=[Ft[0],Ft[1]]}},Et=S_(en,_p,_p),St=(wt,Ft)=>{const Ie=Wt(wt);return Ft?Et(Ie):en(Ie)},kt=()=>{Ve=[],Se=[],Ke=void 0,Xt()},At=wt=>{It(wt)},Ct=()=>{se=!0,at=!0,kt(),x()},Ut=()=>{pt()},mn=({merge:wt=!1}={})=>{at=!1;const Ft=[...Ve],Ie=[...Se];return Et.cancel(),kt(),Ft.length&&L(Ft,Ie,{merge:wt}),Ft},ln=({onDraw:wt=null,onStart:Ft=null,onEnd:Ie=null,enableInitiator:Kt=null,initiatorParentElement:gt=null,longPressIndicatorParentElement:De=null,minDelay:ut=null,minDist:jt=null,pointNorm:st=null}={})=>{w=uu(wt,w),x=uu(Ft,x),L=uu(Ie,L),p=uu(Kt,p),I=uu(st,I),gt!==null&&gt!==h&&(h.removeChild(v),gt.appendChild(v),h=gt),De!==null&&De!==d&&(d.removeChild(C),De.appendChild(C),d=De),p?(v.addEventListener("click",At),v.addEventListener("mousedown",Ct),v.addEventListener("mouseleave",Ut)):(v.removeEventListener("mousedown",Ct),v.removeEventListener("mouseleave",Ut))},Kr=()=>{h.removeChild(v),d.removeChild(C),window.removeEventListener("mouseup",xt),v.removeEventListener("click",At),v.removeEventListener("mousedown",Ct),v.removeEventListener("mouseleave",Ut)},y=()=>wt=>jv(wt,{clear:kt,destroy:Kr,end:mn,extend:St,set:ln,showInitiator:It,hideInitiator:pt,showLongPressIndicator:Xn,hideLongPressIndicator:dn});return h.appendChild(v),d.appendChild(C),ln({onDraw:w,onStart:x,onEnd:L,enableInitiator:p,initiatorParentElement:h}),HA(s1("initiator",v),s1("longPressIndicator",C),y(),WA(k_))({})},H2=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,W2=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,X2=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,Y2=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,Q2=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,K2=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,q2=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,Z2=function(){const t=(f,p,h,d,w)=>{const x=(d-p)*.5,L=(w-h)*.5;return(2*h-2*d+x+L)*f*f*f+(-3*h+3*d-2*x-L)*f*f+x*f+h},n=(f,p,h)=>{const d=h*f,w=Math.floor(d),x=d-w,L=p[Math.max(0,w-1)],I=p[w],v=p[Math.min(h,w+1)],b=p[Math.min(h,w+2)];return[t(x,L[0],I[0],v[0],b[0]),t(x,L[1],I[1],v[1],b[1])]},r=(f,p,h,d)=>(f-h)**2+(p-d)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(f,p,h)=>{let d=p[0],w=p[1],x=h[0]-d,L=h[1]-w;if(x!==0||L!==0){const I=((f[0]-d)*x+(f[1]-w)*L)/(x*x+L*L);I>1?(d=h[0],w=h[1]):I>0&&(d+=x*I,w+=L*I)}return x=f[0]-d,L=f[1]-w,x*x+L*L};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const a=(f,p,h,d,w)=>{let x=d,L;for(let I=p+1;I<h;I++){const v=i(f[I],f[p],f[h]);v>x&&(L=I,x=v)}x>d&&(L-p>1&&a(f,p,L,d,w),w.push(f[L]),h-L>1&&a(f,L,h,d,w))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const o=(f,p)=>{const h=f.length-1,d=[f[0]];return a(f,0,h,p,d),d.push(f[h]),d},l=(f,{maxIntPointsPerSegment:p=100,tolerance:h=.002}={})=>{const d=f.length,w=d-1,x=w*p+1,L=h**2;let I=[],v;for(let b=0;b<d-1;b++){let C=[f[b].slice(0,2)];v=f[b];for(let H=1;H<p;H++){const q=(b*p+H)/x,ie=n(q,f,w);r(v[0],v[1],ie[0],ie[1])>L&&(C.push(ie),v=ie)}C.push(f[b+1]),C=o(C,L),I=I.concat(C.slice(0,C.length-1))}return I.push(f[f.length-1].slice(0,2)),I.flat()},u=f=>{const p={},h=!Number.isNaN(+f[0][5]);return f.forEach(d=>{const w=d[4];p[w]||(p[w]=[]),h?p[w][d[5]]=d:p[w].push(d)}),Object.entries(p).forEach(d=>{p[d[0]]=d[1].filter(w=>w),p[d[0]].reference=d[1][0]}),p};self.onmessage=function(p){(p.data.points?+p.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),p.data.points;const d=u(p.data.points);self.postMessage({points:Object.entries(d).reduce((w,x)=>(w[x[0]]=l(x[1],p.data.options),w[x[0]].reference=x[1].reference,w),{})})}},J2=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=YA(Z2);i.onmessage=a=>{a.data.error?r(a.data.error):n(a.data.points),i.terminate()},i.postMessage({points:e,options:t})});var eL="1.8.5";const bp={showRecticle:"showReticle",recticleColor:"reticleColor"},Ap=e=>{Object.keys(e).filter(t=>bp[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${bp[t]}" instead.`),e[bp[t]]=e[t],delete e[t]})},Ur=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>L_.has(e)?"valueZ":R_.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Cp=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},tL=(e={})=>{const t=cA({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];Ap(e);let{renderer:a,backgroundColor:o=kC,backgroundImage:l=GC,canvas:u=document.createElement("canvas"),colorBy:f=su,deselectOnDblClick:p=VC,deselectOnEscape:h=HC,lassoColor:d=rC,lassoLineWidth:w=iC,lassoMinDelay:x=oC,lassoMinDist:L=lC,lassoClearEvent:I=sC,lassoInitiator:v=aC,lassoInitiatorParentElement:b=document.body,lassoOnLongPress:C=uC,lassoLongPressTime:H=$d,lassoLongPressAfterEffectTime:q=Gd,lassoLongPressEffectDelay:ie=zd,lassoLongPressRevertEffectTime:we=Ud,keyMap:se=dC,mouseMode:at=eC,showReticle:Ve=zC,reticleColor:Se=UC,pointColor:Ke=RC,pointColorActive:Qe=OC,pointColorHover:ze=PC,showPointConnections:Pt=WC,pointConnectionColor:mt=NC,pointConnectionColorActive:ht=IC,pointConnectionColorHover:pe=DC,pointConnectionColorBy:We=xp,pointConnectionOpacity:Le=SC,pointConnectionOpacityBy:Ee=gp,pointConnectionOpacityActive:$e=wC,pointConnectionSize:lt=EC,pointConnectionSizeActive:xt=_C,pointConnectionSizeBy:Wt=vp,pointConnectionMaxIntPointsPerSegment:Yt=XC,pointConnectionTolerance:Qt=YC,pointSize:It=gC,pointSizeSelected:pt=yC,pointSizeMouseDetection:Xn=QC,pointOutlineWidth:dn=xC,opacity:Xt=Ci,opacityBy:en=yp,opacityByDensityFill:Et=bC,opacityInactiveMax:St=CC,opacityInactiveScale:kt=LC,sizeBy:At=pp,height:Ct=pC,width:Ut=hC}=e,mn=Ut===Ci?1:Ut,ln=Ct===Ci?1:Ct;const{performanceMode:Kr=KC,opacityByDensityDebounceTime:y=AC}=e;a||(a=m2({regl:e.regl,gamma:e.gamma})),o=pr(o,!0),d=pr(d,!0),Se=pr(Se,!0);let wt=!1,Ft=y1(o),Ie,Kt,gt=!1,De=null,ut=[0,0],jt=-1,st=[];const tn=new Set,nn=new Set;let Rt=!1;const En=new Set;let hn=0,Sr=0,nr=!1,qr=[],An,fi,ta=e.aspectRatio||mC,Zr,cr,Jr,rn,ue,Ot,Nn,Yn,Mr,di=g1(se),Fr,Xa,na,Bo=!1,yt=!0,ki=!1,$o;Ke=Ta(Ke)?[...Ke]:[Ke],Qe=Ta(Qe)?[...Qe]:[Qe],ze=Ta(ze)?[...ze]:[ze],Ke=Ke.map(s=>pr(s,!0)),Qe=Qe.map(s=>pr(s,!0)),ze=ze.map(s=>pr(s,!0)),Xt=!Array.isArray(Xt)&&Number.isNaN(+Xt)?Ke[0][3]:Xt,Xt=Sa(Xt,wa,{minLength:1})?[...Xt]:[Xt],It=Sa(It,wa,{minLength:1})?[...It]:[It];let nc=hp/It[0];mt==="inherit"?mt=[...Ke]:(mt=Ta(mt)?[...mt]:[mt],mt=mt.map(s=>pr(s,!0))),ht==="inherit"?ht=[...Qe]:(ht=Ta(ht)?[...ht]:[ht],ht=ht.map(s=>pr(s,!0))),pe==="inherit"?pe=[...ze]:(pe=Ta(pe)?[...pe]:[pe],pe=pe.map(s=>pr(s,!0))),Le==="inherit"?Le=[...Xt]:Le=Sa(Le,wa,{minLength:1})?[...Le]:[Le],lt==="inherit"?lt=[...It]:lt=Sa(lt,wa,{minLength:1})?[...lt]:[lt],f=Ur(f,su),en=Ur(en,yp,{allowDensity:!0}),At=Ur(At,pp),We=Ur(We,xp,{allowSegment:!0}),Ee=Ur(Ee,gp,{allowSegment:!0}),Wt=Ur(Wt,vp,{allowSegment:!0});let mi,hi,pi,rc,wr=0,as=0,Ya,os,Qa,Go,zo,Uo,Vo,Ni=!1,Ka=null,ls,ss,ic=Ve,ra,ia=0,Ho,aa=0,us=!1,fr=!1,vi=!1,gi=Sl,Ii=Sl,In,jr=!1,jn=e.xScale||null,_n=e.yScale||null,oa=0,Wo=0,Xo=0,Yo=0;jn&&(oa=jn.domain()[0],Wo=jn.domain()[1]-jn.domain()[0],jn.range([0,mn])),_n&&(Xo=_n.domain()[0],Yo=_n.domain()[1]-_n.domain()[0],_n.range([ln,0]));const ac=s=>-1+s/mn*2,dr=s=>1+s/ln*-2,rr=()=>[ac(i[0]),dr(i[1])],Tr=(s,D)=>{const z=[s,D,1,1],ae=R0(n,or(n,Zr,or(n,Ie.view,Jr)));return fd(z,z,ae),z.slice(0,2)},oc=(s=0)=>{const D=ro(),ae=(Xa[1]-na[1])/u.height;return(Mr*D+s)*ae},cs=()=>Rt?An.points.filter((s,D)=>En.has(D)):An.points,Qo=(s,D,z,ae)=>{const be=An.range(s,D,z,ae);return Rt?be.filter(je=>En.has(je)):be},fs=()=>{const[s,D]=rr(),[z,ae]=Tr(s,D),be=oc(4),je=Qo(z-be,ae-be,z+be,ae+be);let Xe=be,dt=-1;return je.forEach(Bt=>{const[Dt,Sn]=An.points[Bt],Vt=Ep(Dt,Sn,z,ae);Vt<Xe&&(Xe=Vt,dt=Bt)}),dt},gm=(s,D)=>{qr=s,Kt.setPoints(D),t.publish("lassoExtend",{coordinates:s})},ym=s=>{const D=t2(s);if(!n2(D))return[];const z=Qo(...D),ae=[];return z.forEach(be=>{s2(s,An.points[be])&&ae.push(be)}),ae},la=()=>{qr=[],Kt&&Kt.clear()},qa=s=>s&&s.length>4,Di=(s,D)=>{if(Ot||!Pt||!qa(An.points[s[0]]))return;const z=D===0,ae=D===1?Xe=>nn.add(Xe):Dl,be=Object.keys(s.reduce((Xe,dt)=>{const Bt=An.points[dt],Sn=Array.isArray(Bt[4])?Bt[4][0]:Bt[4];return Xe[Sn]=!0,Xe},{})),je=rn.getData().opacities;be.filter(Xe=>!nn.has(+Xe)).forEach(Xe=>{const dt=ue[Xe][0],Bt=ue[Xe][2],Dt=ue[Xe][3],Sn=dt*4+Dt*2,Vt=Sn+Bt*2+4;je.__original__===void 0&&(je.__original__=je.slice());for(let Mt=Sn;Mt<Vt;Mt++)je[Mt]=z?je.__original__[Mt]:$e;ae(Xe)}),rn.getBuffer().opacities.subdata(je,0)},Ko=s=>[s%wr/wr+as,Math.floor(s/wr)/wr+as],xm=s=>Rt&&!En.has(s),qo=({preventEvent:s=!1}={})=>{I===P0&&la(),st.length&&(s||t.publish("deselect"),nn.clear(),Di(st,0),st=[],tn.clear(),yt=!0)},sa=(s,{merge:D=!1,preventEvent:z=!1}={})=>{const ae=Array.isArray(s)?s:[s],be=[...st];if(D){if(st=VA(st,ae),be.length===st.length){yt=!0;return}}else{if(st&&st.length&&Di(st,0),be.length>0&&ae.length===0){qo({preventEvent:z});return}st=ae}if(zA(be,st)){yt=!0;return}const je=[];tn.clear(),nn.clear();for(let Xe=st.length-1;Xe>=0;Xe--){const dt=st[Xe];if(dt<0||dt>=hn||xm(dt)){st.splice(Xe,1);continue}tn.add(dt),je.push.apply(je,Ko(dt))}os({usage:"dynamic",type:"float",data:je}),Di(st,1),z||t.publish("select",{points:st}),yt=!0},Za=(s,{showReticleOnce:D=!1,preventEvent:z=!1}={})=>{let ae=!1;if(s>=0&&s<hn){ae=!0;const be=In,je=s!==In;+be>=0&&je&&!tn.has(be)&&Di([be],0),In=s,Qa.subdata(Ko(s)),tn.has(s)||Di([s],2),je&&!z&&t.publish("pointover",In)}else ae=+In>=0,ae&&(tn.has(In)||Di([In],0),z||t.publish("pointout",In)),In=void 0;ae&&(yt=!0,ki=D)},ds=s=>{const D=u.getBoundingClientRect();return i[0]=s.clientX-D.left,i[1]=s.clientY-D.top,[...i]},Cn=k_(u,{onStart:()=>{Ie.config({isFixed:!0}),gt=!0,nr=!0,la(),jt>=0&&(clearTimeout(jt),jt=-1),t.publish("lassoStart")},onDraw:gm,onEnd:(s,D,{merge:z=!1}={})=>{Ie.config({isFixed:!1}),qr=[...s];const ae=ym(D);sa(ae,{merge:z}),t.publish("lassoEnd",{coordinates:qr}),I===$v&&la()},enableInitiator:v,initiatorParentElement:b,pointNorm:([s,D])=>Tr(ac(s),dr(D))}),Zo=()=>at===T_,Ja=(s,D)=>{switch(di[D]){case zv:return s.altKey;case Uv:return s.metaKey;case A_:return s.ctrlKey;case C_:return s.metaKey;case Vv:return s.shiftKey;default:return!1}},lc=s=>document.elementsFromPoint(s.clientX,s.clientY).some(D=>D===u),ms=s=>{!fr||s.buttons!==1||(gt=!0,De=performance.now(),ut=ds(s),nr=Zo()||Ja(s,Gv),!nr&&C&&(Cn.showLongPressIndicator(s.clientX,s.clientY,{time:H,extraTime:q,delay:ie}),jt=setTimeout(()=>{jt=-1,nr=!0},H)))},hs=s=>{fr&&(gt=!1,jt>=0&&(clearTimeout(jt),jt=-1),nr&&(s.preventDefault(),nr=!1,Cn.end({merge:Ja(s,Hd)})),C&&Cn.hideLongPressIndicator({time:we}))},Jo=s=>{if(!fr)return;s.preventDefault();const D=ds(s);if(Ep(...D,...ut)>=L)return;const z=performance.now()-De;if(!v||z<ZC){const ae=fs();ae>=0?(st.length&&I===P0&&la(),sa([ae],{merge:Ja(s,Hd)})):Fr||(Fr=setTimeout(()=>{Fr=null,Cn.showInitiator(s)},qC))}},el=s=>{Cn.hideInitiator(),Fr&&(clearTimeout(Fr),Fr=null),p&&(s.preventDefault(),qo())},ei=s=>{if(vi||(jr=lc(s),vi=!0),!fr||!jr&&!gt)return;const D=ds(s),ae=Ep(...D,...ut)>=L;jr&&!nr&&Za(fs()),nr?(s.preventDefault(),Cn.extend(s,!0)):gt&&C&&ae&&Cn.hideLongPressIndicator({time:we}),jt>=0&&ae&&(clearTimeout(jt),jt=-1),gt&&(yt=!0)},eo=()=>{In=void 0,jr=!1,vi=!1,fr&&(+In>=0&&!tn.has(In)&&Di([In],0),hs(),yt=!0)},tl=()=>{const s=Math.max(It.length,Xt.length);aa=Math.max(2,Math.ceil(Math.sqrt(s)));const D=new Float32Array(aa**2*4);for(let z=0;z<s;z++){D[z*4]=It[z]||0,D[z*4+1]=Math.min(1,Xt[z]||0);const ae=Number((Qe[z]||Qe[0])[3]);D[z*4+2]=Math.min(1,Number.isNaN(ae)?1:ae);const be=Number((ze[z]||ze[0])[3]);D[z*4+3]=Math.min(1,Number.isNaN(be)?1:be)}return a.regl.texture({data:D,shape:[aa,aa,4],type:"float"})},ps=(s=Ke,D=Qe,z=ze)=>{const ae=s.length,be=D.length,je=z.length,Xe=[];if(ae===be&&be===je)for(let dt=0;dt<ae;dt++)Xe.push(s[dt],D[dt],z[dt],o);else for(let dt=0;dt<ae;dt++){const Bt=[s[dt][0],s[dt][1],s[dt][2],1],Dt=f===su?D[0]:Bt,Sn=f===su?z[0]:Bt;Xe.push(s[dt],Dt,Sn,o)}return Xe},vs=()=>{const s=ps(),D=s.length;ia=Math.max(2,Math.ceil(Math.sqrt(D)));const z=new Float32Array(ia**2*4);return s.forEach((ae,be)=>{z[be*4]=ae[0],z[be*4+1]=ae[1],z[be*4+2]=ae[2],z[be*4+3]=ae[3]}),a.regl.texture({data:z,shape:[ia,ia,4],type:"float"})},Em=(s,D)=>{cr[0]=s/fi,cr[5]=D},gs=()=>{fi=mn/ln,Zr=cd([],[1/fi,1,1]),cr=cd([],[1/fi,1,1]),Jr=cd([],[ta,1,1])},_m=s=>{+s<=0||(ta=s)},ys=(s,D)=>z=>{if(!z||!z.length)return;const be=[...s()];let je=Ta(z)?z:[z];je=je.map(Xe=>pr(Xe,!0)),ra&&ra.destroy();try{D(je),ra=vs()}catch{console.error("Invalid colors. Switching back to default colors."),D(be),ra=vs()}},Sm=ys(()=>Ke,s=>{Ke=s}),wm=ys(()=>Qe,s=>{Qe=s}),yi=ys(()=>ze,s=>{ze=s}),Tm=()=>{const s=Tr(-1,-1),D=Tr(1,1),z=(s[0]+1)/2,ae=(D[0]+1)/2,be=(s[1]+1)/2,je=(D[1]+1)/2,Xe=[oa+z*Wo,oa+ae*Wo],dt=[Xo+be*Yo,Xo+je*Yo];return[Xe,dt]},Mi=()=>{if(!jn&&!_n)return;const[s,D]=Tm();jn&&jn.domain(s),_n&&_n.domain(D)},Fi=s=>{ln=Math.max(1,s),u.height=Math.floor(ln*window.devicePixelRatio),_n&&(_n.range([ln,0]),Mi())},bm=s=>{if(s===Ci){Ct=s,u.style.height="100%",window.requestAnimationFrame(()=>{u&&Fi(u.getBoundingClientRect().height)});return}!+s||+s<=0||(Ct=+s,Fi(Ct),u.style.height=`${Ct}px`)},xi=()=>{Mr=Xn,Xn===Ci&&(Mr=Array.isArray(It)?UA(It):It)},sc=s=>{Sa(s,wa,{minLength:1})&&(It=[...s]),Uf(+s)&&(It=[+s]),nc=hp/It[0],Ho=tl(),xi()},ca=s=>{!+s||+s<0||(pt=+s)},uc=s=>{!+s||+s<0||(dn=+s)},ti=s=>{mn=Math.max(1,s),u.width=Math.floor(mn*window.devicePixelRatio),jn&&(jn.range([0,mn]),Mi())},xs=s=>{if(s===Ci){Ut=s,u.style.width="100%",window.requestAnimationFrame(()=>{u&&ti(u.getBoundingClientRect().width)});return}!+s||+s<=0||(Ut=+s,ti(Ut),u.style.width=`${mn}px`)},Am=s=>{Sa(s,wa,{minLength:1})&&(Xt=[...s]),Uf(+s)&&(Xt=[+s]),Ho=tl()},Es=s=>{switch(s){case"valueZ":return gi;case"valueW":return Ii;default:return null}},_s=(s,D)=>{switch(s){case bi:return z=>Math.round(z*(D.length-1));case Sl:default:return Dl}},cc=s=>{f=Ur(s,su)},Cm=s=>{en=Ur(s,yp,{allowDensity:!0})},Lm=s=>{At=Ur(s,pp)},fc=s=>{We=Ur(s,xp,{allowSegment:!0})},Zt=s=>{Ee=Ur(s,gp,{allowSegment:!0})},dc=s=>{Wt=Ur(s,vp,{allowSegment:!0})},Rm=()=>[u.width,u.height],Br=()=>l,Ss=()=>ra,nl=()=>ia,ji=()=>.5/ia,ws=()=>window.devicePixelRatio,rl=()=>Ya,Bi=()=>os,il=()=>Ho,mc=()=>aa,Ts=()=>.5/aa,bs=()=>0,Om=()=>pi||mi,Pm=()=>wr,km=()=>.5/wr,hc=()=>cr,al=()=>Ie.view,to=()=>Jr,no=()=>or(r,cr,or(r,Ie.view,Jr)),ro=()=>Ie.scaling[0]>1?Math.asinh(Vf(1,Ie.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:Vf(nc,Ie.scaling[0])*window.devicePixelRatio,fa=()=>Rt?En.size:hn,$i=()=>st.length,As=()=>$i()>0?St:1,Cs=()=>$i()>0?kt:1,Ls=()=>+(f==="valueZ"),pc=()=>+(f==="valueW"),vc=()=>+(en==="valueZ"),gc=()=>+(en==="valueW"),yc=()=>+(en==="density"),xc=()=>+(At==="valueZ"),Ec=()=>+(At==="valueW"),_c=()=>f==="valueZ"?gi===bi?Ke.length-1:1:Ii===bi?Ke.length-1:1,Sc=()=>en==="valueZ"?gi===bi?Xt.length-1:1:Ii===bi?Xt.length-1:1,da=()=>At==="valueZ"?gi===bi?It.length-1:1:Ii===bi?It.length-1:1,Rs=s=>{if(en!=="density")return 1;const D=ro(),z=It[0]*D,ae=2/(2/Ie.view[0])*(2/(2/Ie.view[5])),be=s.viewportHeight,je=s.viewportWidth;let Xe=Et*je*be/(Sr*z*z)*v1(1,ae);Xe*=Kr?1:1/(.25*Math.PI);const dt=Vf(hp,z)+.5;return Xe*=(z/dt)**2,v1(1,Vf(0,Xe))},Os=a.regl({framebuffer:()=>rc,vert:q2,frag:K2,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>hi,endStateTex:()=>mi,t:(s,D)=>D.t},count:3}),br=(s,D,z,ae=QA,be=As,je=Cs)=>a.regl({frag:Kr?Y2:X2,vert:Q2(ae),blend:{enable:!Kr,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:z,size:2}},uniforms:{resolution:Rm,modelViewProjection:no,devicePixelRatio:ws,pointScale:ro,encodingTex:il,encodingTexRes:mc,encodingTexEps:Ts,pointOpacityMax:be,pointOpacityScale:je,pointSizeExtra:s,globalState:ae,colorTex:Ss,colorTexRes:nl,colorTexEps:ji,stateTex:Om,stateTexRes:Pm,stateTexEps:km,isColoredByZ:Ls,isColoredByW:pc,isOpacityByZ:vc,isOpacityByW:gc,isOpacityByDensity:yc,isSizedByZ:xc,isSizedByW:Ec,colorMultiplicator:_c,opacityMultiplicator:Sc,opacityDensity:Rs,sizeMultiplicator:da,numColorStates:qA},count:D,primitive:"points"}),Nm=br(bs,fa,rl),Im=br(bs,()=>1,()=>Qa,KA,()=>1,()=>1),Dm=br(()=>(pt+dn*2)*window.devicePixelRatio,$i,Bi,mp,()=>1,()=>1),Ps=br(()=>(pt+dn)*window.devicePixelRatio,$i,Bi,u1,()=>1,()=>1),Mm=br(()=>pt*window.devicePixelRatio,$i,Bi,mp,()=>1,()=>1),Fm=()=>{Dm(),Ps(),Mm()},jm=a.regl({frag:H2,vert:W2,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:no,texture:Br},count:6}),ks=a.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>qr},uniforms:{modelViewProjection:no,color:()=>d},elements:()=>Array.from({length:qr.length-2},(s,D)=>[0,D+1,D+2])}),Bm=()=>{if(!(In>=0))return;const[s,D]=An.points[In].slice(0,2),z=[s,D,0,1];or(n,cr,or(n,Ie.view,Jr)),fd(z,z,n),Nn.setPoints([-1,z[1],1,z[1]]),Yn.setPoints([z[0],1,z[0],-1]),Nn.draw(),Yn.draw(),br(()=>(pt+dn*2)*window.devicePixelRatio,()=>1,Qa,mp)(),br(()=>(pt+dn)*window.devicePixelRatio,()=>1,Qa,u1)()},ol=s=>{const D=new Float32Array(s*2);let z=0;for(let ae=0;ae<s;++ae){const be=Ko(ae);D[z]=be[0],D[z+1]=be[1],z+=2}return D},Ns=(s,D={})=>{const z=s.length;wr=Math.max(2,Math.ceil(Math.sqrt(z))),as=.5/wr;const ae=new Float32Array(wr**2*4);let be=!0,je=!0,Xe=0,dt=0,Bt=0;for(let Dt=0;Dt<z;++Dt)Xe=Dt*4,ae[Xe]=s[Dt][0],ae[Xe+1]=s[Dt][1],dt=s[Dt][2]||0,Bt=s[Dt][3]||0,ae[Xe+2]=dt,ae[Xe+3]=Bt,be&&(be=Number.isInteger(dt)),je&&(je=Number.isInteger(Bt));return D.z&&d1.includes(D.z)?gi=D.z:gi=be?Sl:bi,D.w&&d1.includes(D.w)?Ii=D.w:Ii=je?Sl:bi,a.regl.texture({data:ae,shape:[wr,wr,4],type:"float"})},wc=(s,D={})=>{if(!mi)return!1;if(Ni){const z=hi;hi=pi,z.destroy()}else hi=mi;return pi=Ns(s,D),rc=a.regl.framebuffer({color:pi,depth:!1,stencil:!1}),mi=void 0,!0},Is=()=>!!(hi&&pi),$m=()=>{hi&&(hi.destroy(),hi=void 0),pi&&(pi.destroy(),pi=void 0)},io=(s,D={})=>{fr=!1,hn=s.length,Sr=hn,mi&&mi.destroy(),mi=Ns(s,D),Ya({usage:"static",type:"float",data:ol(hn)}),An=new LA(s,z=>z[0],z=>z[1],16),fr=!0},Tc=(s,D)=>{Go=Ie.target,zo=s,Uo=Ie.distance[0],Vo=D},Gm=()=>Go!==void 0&&zo!==void 0&&Uo!==void 0&&Vo!==void 0,zm=()=>{Go=void 0,zo=void 0,Uo=void 0,Vo=void 0},Um=s=>{const D=We==="inherit"?f:We;if(D==="segment"){const z=mt.length-1;return z<1?[]:s.reduce((ae,be,je)=>{let Xe=0;const dt=[];for(let Dt=2;Dt<be.length;Dt+=2){const Sn=Math.sqrt((be[Dt-2]-be[Dt])**2+(be[Dt-1]-be[Dt+1])**2);dt.push(Sn),Xe+=Sn}ae[je]=[0];let Bt=0;for(let Dt=0;Dt<be.length/2-1;Dt++)Bt+=dt[Dt],ae[je].push(Math.floor(Bt/Xe*z)*4);return ae},[])}if(D){const z=Cp(D),ae=_s(Es(D),We==="inherit"?Ke:mt);return ue.reduce((be,[je,Xe])=>(be[je]=ae(Xe[z])*4,be),[])}return Array(ue.length).fill(0)},Vm=()=>{const s=Ee==="inherit"?en:Ee;if(s==="segment"){const D=Le.length-1;return D<1?[]:ue.reduce((z,[ae,be,je])=>(z[ae]=l1(je,Xe=>Le[Math.floor(Xe/(je-1)*D)]),z),[])}if(s){const D=Cp(s),z=Ee==="inherit"?Xt:Le,ae=_s(Es(s),z);return ue.reduce((be,[je,Xe])=>(be[je]=z[ae(Xe[D])],be),[])}},Hm=()=>{const s=Wt==="inherit"?At:Wt;if(s==="segment"){const D=lt.length-1;return D<1?[]:ue.reduce((z,[ae,be,je])=>(z[ae]=l1(je,Xe=>lt[Math.floor(Xe/(je-1)*D)]),z),[])}if(s){const D=Cp(s),z=Wt==="inherit"?It:lt,ae=_s(Es(s),z);return ue.reduce((be,[je,Xe])=>(be[je]=z[ae(Xe[D])],be),[])}},Wm=s=>{ue=[];let D=0;Object.keys(s).forEach((z,ae)=>{ue[z]=[ae,s[z].reference,s[z].length/2,D],D+=s[z].length/2})},ma=s=>new Promise(D=>{rn.setPoints([]),!s||!s.length?D():(Ot=!0,J2(s,{maxIntPointsPerSegment:Yt,tolerance:Qt}).then(z=>{Wm(z);const ae=Object.values(z);rn.setPoints(ae.length===1?ae[0]:ae,{colorIndices:Um(ae),opacities:Vm(),widths:Hm()}),Ot=!1,D()}))}),ao=({preventEvent:s=!1}={})=>(Rt=!1,En.clear(),Ya.subdata(ol(hn)),new Promise(D=>{const z=()=>{t.subscribe("draw",()=>{s||t.publish("unfilter"),D()},1),yt=!0};Pt||qa(An.points[0])?ma(cs()).then(()=>{s||t.publish("pointConnectionsDraw"),z()}):z()})),bc=(s,{preventEvent:D=!1}={})=>{const z=Array.isArray(s)?s:[s];Rt=!0,En.clear();const ae=[],be=[];for(let je=z.length-1;je>=0;je--){const Xe=z[je];if(Xe<0||Xe>=hn){z.splice(je,1);continue}En.add(Xe),ae.push.apply(ae,Ko(Xe)),tn.has(Xe)&&be.push(Xe)}return Ya.subdata(ae),sa(be,{preventEvent:D}),En.has(In)||Za(-1,{preventEvent:D}),new Promise(je=>{const Xe=()=>{t.subscribe("draw",()=>{D||t.publish("filter",{points:z}),je()},1),yt=!0};Pt||qa(An.points[0])?ma(cs()).then(()=>{D||t.publish("pointConnectionsDraw"),sa(be,{preventEvent:D}),Xe()}):Xe()})},oo=()=>Qo(na[0],na[1],Xa[0],Xa[1]),ha=S_(()=>{Sr=oo().length},y),Ac=s=>{const[D,z]=Go,[ae,be]=zo,je=1-s,Xe=D*je+ae*s,dt=z*je+be*s,Bt=Uo*je+Vo*s;Ie.lookAt([Xe,dt],Bt)},Cc=()=>Is(),Lc=()=>Gm(),Rc=(s,D)=>{Ka||(Ka=performance.now());const z=performance.now()-Ka,ae=d2(D(z/s),0,1);return Cc()&&Os({t:ae}),Lc()&&Ac(ae),z<s},Oc=()=>{Ni=!1,Ka=null,ls=void 0,ss=void 0,Ve=ic,$m(),zm(),t.publish("transitionEnd")},ll=({duration:s=500,easing:D=f1})=>{Ni&&t.publish("transitionEnd"),Ni=!0,Ka=null,ls=s,ss=k0(D)?tC[D]||f1:D,ic=Ve,Ve=!1,t.publish("transitionStart")},Xm=s=>new Promise((D,z)=>{if(!s||Array.isArray(s))D(s);else{const ae=Array.isArray(s.x)||ArrayBuffer.isView(s.x)?s.x.length:0,be=(Array.isArray(s.x)||ArrayBuffer.isView(s.x))&&(Vt=>s.x[Vt]),je=(Array.isArray(s.y)||ArrayBuffer.isView(s.y))&&(Vt=>s.y[Vt]),Xe=(Array.isArray(s.line)||ArrayBuffer.isView(s.line))&&(Vt=>s.line[Vt]),dt=(Array.isArray(s.lineOrder)||ArrayBuffer.isView(s.lineOrder))&&(Vt=>s.lineOrder[Vt]),Bt=Object.keys(s),Dt=(()=>{const Vt=Bt.find(Mt=>L_.has(Mt));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Mt=>s[Vt][Mt])})(),Sn=(()=>{const Vt=Bt.find(Mt=>R_.has(Mt));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Mt=>s[Vt][Mt])})();be&&je&&Dt&&Sn&&Xe&&dt?D(s.x.map((Vt,Mt)=>[Vt,je(Mt),Dt(Mt),Sn(Mt),Xe(Mt),dt(Mt)])):be&&je&&Dt&&Sn&&Xe?D(Array.from({length:ae},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt),Sn(Mt),Xe(Mt)])):be&&je&&Dt&&Sn?D(Array.from({length:ae},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt),Sn(Mt)])):be&&je&&Dt?D(Array.from({length:ae},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt)])):be&&je?D(Array.from({length:ae},(Vt,Mt)=>[be(Mt),je(Mt)])):z(new Error("You need to specify at least x and y"))}}),pa=(s,D={})=>wt?Promise.reject(new Error("The instance was already destroyed")):Xm(s).then(z=>new Promise(ae=>{if(wt){ae();return}let be=!1;(!D.preventFilterReset||(z==null?void 0:z.length)!==hn)&&(Rt=!1,En.clear());const je=z&&qa(z[0])&&(Pt||D.showPointConnectionsOnce),{zDataType:Xe,wDataType:dt}=D;z&&(D.transition&&(z.length===hn?be=wc(z,{z:Xe,w:dt}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),io(z,{z:Xe,w:dt}),D.hover!==void 0&&Za(D.hover,{preventEvent:!0}),D.select!==void 0&&sa(D.select,{preventEvent:!0}),D.filter!==void 0&&bc(D.filter,{preventEvent:!0}),je&&ma(z).then(()=>{t.publish("pointConnectionsDraw"),yt=!0,ki=D.showReticleOnce})),D.transition&&be?(je?Promise.all([new Promise(Bt=>{t.subscribe("transitionEnd",()=>{yt=!0,ki=D.showReticleOnce,Bt()},1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(ae):t.subscribe("transitionEnd",()=>{yt=!0,ki=D.showReticleOnce,ae()},1),ll({duration:D.transitionDuration,easing:D.transitionEasing})):(je?Promise.all([new Promise(Bt=>{t.subscribe("draw",Bt,1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(ae):t.subscribe("draw",ae,1),yt=!0,ki=D.showReticleOnce)})),Ln=s=>(...D)=>{const z=s(...D);return yt=!0,z},Pc=s=>{let D=1/0,z=-1/0,ae=1/0,be=-1/0;for(let je=0;je<s.length;je++){const[Xe,dt]=An.points[s[je]];D=Math.min(D,Xe),z=Math.max(z,Xe),ae=Math.min(ae,dt),be=Math.max(be,dt)}return{x:D,y:ae,width:z-D,height:be-ae}},Ds=(s,D={})=>new Promise(z=>{const ae=[s.x+s.width/2,s.y+s.height/2],be=2*Math.atan(1),je=s.height*fi>s.width?s.height/2/Math.tan(be/2):s.width/2/Math.tan(be*fi/2);D.transition?(Ie.config({isFixed:!0}),Tc(ae,je),t.subscribe("transitionEnd",()=>{z(),Ie.config({isFixed:!1})},1),ll({duration:D.transitionDuration,easing:D.transitionEasing})):(Ie.lookAt(ae,je),t.subscribe("draw",z,1),yt=!0)}),Gi=(s,D={})=>{if(!fr)return Promise.reject(new Error(m1));const z=Pc(s),ae=z.x+z.width/2,be=z.y+z.height/2,je=oc(),Xe=1+(D.padding||0),dt=Math.max(z.width,je)*Xe,Bt=Math.max(z.height,je)*Xe,Dt=ae-dt/2,Sn=be-Bt/2;return Ds({x:Dt,y:Sn,width:dt,height:Bt},D)},Ms=(s,D,z={})=>new Promise(ae=>{z.transition?(Ie.config({isFixed:!0}),Tc(s,D),t.subscribe("transitionEnd",()=>{ae(),Ie.config({isFixed:!1})},1),ll({duration:z.transitionDuration,easing:z.transitionEasing})):(Ie.lookAt(s,D),t.subscribe("draw",ae,1),yt=!0)}),kc=(s={})=>Ms([0,0],1,s),Ym=s=>{if(!fr)throw new Error(m1);const D=An.points[s];if(!D)return;const z=[D[0],D[1],0,1];or(n,Zr,or(n,Ie.view,Jr)),fd(z,z,n);const ae=mn*(z[0]+1)/2,be=ln*(.5-z[1]/2);return[ae,be]},Fs=()=>{rn.setStyle({color:ps(mt,ht,pe),opacity:Le===null?null:Le[0],width:lt[0]})},Nc=()=>{const s=Math.round(Ft)>.5?0:255;Cn.initiator.style.border=`1px dashed rgba(${s}, ${s}, ${s}, 0.33)`,Cn.initiator.style.background=`rgba(${s}, ${s}, ${s}, 0.1)`},Ic=()=>{const s=Math.round(Ft)>.5?0:255;Cn.longPressIndicator.style.color=`rgb(${s}, ${s}, ${s})`,Cn.longPressIndicator.dataset.color=`rgb(${s}, ${s}, ${s})`;const D=d.map(z=>Math.round(z*255));Cn.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},js=s=>{s&&(o=pr(s,!0),Ft=y1(o),Nc(),Ic())},Dc=s=>{s?k0(s)?p1(a.regl,s).then(D=>{l=D,yt=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${s}`),l=null}):s._reglType==="texture2d"?l=s:l=null:l=null},Qm=s=>{s>0&&Ie.lookAt(Ie.target,s,Ie.rotation)},Mc=s=>{s!==null&&Ie.lookAt(Ie.target,Ie.distance[0],s)},Fc=s=>{s&&Ie.lookAt(s,Ie.distance[0],Ie.rotation)},jc=s=>{s&&Ie.setView(s)},sl=s=>{if(!s)return;d=pr(s,!0),Kt.setStyle({color:d});const D=d.map(z=>Math.round(z*255));Cn.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},Km=s=>{Number.isNaN(+s)||+s<1||(w=+s,Kt.setStyle({width:w}))},Ei=s=>{+s&&(x=+s,Cn.set({minDelay:x}))},ul=s=>{+s&&(L=+s,Cn.set({minDist:L}))},Bc=s=>{I=h1(nC,I)(s)},$c=s=>{v=!!s,Cn.set({enableInitiator:v})},Gc=s=>{b=s,Cn.set({startInitiatorParentElement:b})},zc=s=>{C=!!s},Uc=s=>{H=Number(s)},Vc=s=>{q=Number(s)},Hc=s=>{ie=Number(s)},Wc=s=>{we=Number(s)},Xc=s=>{se=Object.entries(s).reduce((D,[z,ae])=>(fC.includes(z)&&cC.includes(ae)&&(D[z]=ae),D),{}),di=g1(se),di[Vd]?Ie.config({isRotate:!0,mouseDownMoveModKey:di[Vd]}):Ie.config({isRotate:!1})},Cr=s=>{at=h1(JA,Bv)(s),Ie.config({defaultMouseDownMoveAction:at===b_?"rotate":"pan"})},Yc=s=>{s!==null&&(Ve=s)},qm=s=>{s&&(Se=pr(s,!0),Nn.setStyle({color:Se}),Yn.setStyle({color:Se}))},ni=s=>{s&&(jn=s,oa=s.domain()[0],Wo=s?s.domain()[1]-s.domain()[0]:0,jn.range([0,mn]),Mi())},Bs=s=>{s&&(_n=s,Xo=_n.domain()[0],Yo=_n?_n.domain()[1]-_n.domain()[0]:0,_n.range([ln,0]),Mi())},zi=s=>{p=!!s},cl=s=>{h=!!s},Qc=s=>{Pt=!!s,Pt?qa(An.points[0])&&ma(cs()).then(()=>{t.publish("pointConnectionsDraw"),yt=!0}):ma()},fl=(s,D)=>z=>{if(z==="inherit")s([...D()]);else{const ae=Ta(z)?z:[z];s(ae.map(be=>pr(be,!0)))}Fs()},Kc=fl(s=>{mt=s},()=>Ke),qc=fl(s=>{ht=s},()=>Qe),Zc=fl(s=>{pe=s},()=>ze),Zm=s=>{Sa(s,wa,{minLength:1})&&(Le=[...s]),Uf(+s)&&(Le=[+s]),mt=mt.map(D=>(D[3]=Number.isNaN(+Le[0])?D[3]:+Le[0],D)),Fs()},Jm=s=>{!Number.isNaN(+s)&&+s&&($e=+s)},eh=s=>{Sa(s,wa,{minLength:1})&&(lt=[...s]),Uf(+s)&&(lt=[+s]),Fs()},th=s=>{!Number.isNaN(+s)&&+s&&(xt=Math.max(0,s))},nh=s=>{Yt=Math.max(0,s)},rh=s=>{Qt=Math.max(0,s)},ih=s=>{Xn=s,xi()},Jc=s=>{Et=+s},ef=s=>{St=+s},ah=s=>{kt=+s},oh=s=>{a.gamma=s},$s=s=>{if(Ap({property:!0}),s==="aspectRatio")return ta;if(s==="background"||s==="backgroundColor")return o;if(s==="backgroundImage")return l;if(s==="camera")return Ie;if(s==="cameraTarget")return Ie.target;if(s==="cameraDistance")return Ie.distance[0];if(s==="cameraRotation")return Ie.rotation;if(s==="cameraView")return Ie.view;if(s==="canvas")return u;if(s==="colorBy")return f;if(s==="sizeBy")return At;if(s==="deselectOnDblClick")return p;if(s==="deselectOnEscape")return h;if(s==="height")return Ct;if(s==="lassoColor")return d;if(s==="lassoLineWidth")return w;if(s==="lassoMinDelay")return x;if(s==="lassoMinDist")return L;if(s==="lassoClearEvent")return I;if(s==="lassoInitiator")return v;if(s==="lassoInitiatorElement")return Cn.initiator;if(s==="lassoInitiatorParentElement")return b;if(s==="keyMap")return{...se};if(s==="mouseMode")return at;if(s==="opacity")return Xt.length===1?Xt[0]:Xt;if(s==="opacityBy")return en;if(s==="opacityByDensityFill")return Et;if(s==="opacityByDensityDebounceTime")return y;if(s==="opacityInactiveMax")return St;if(s==="opacityInactiveScale")return kt;if(s==="points")return An.points;if(s==="hoveredPoint")return In;if(s==="selectedPoints")return[...st];if(s==="filteredPoints")return Rt?Array.from(En):Array.from({length:An.points.length},(D,z)=>z);if(s==="pointsInView")return oo();if(s==="pointColor")return Ke.length===1?Ke[0]:Ke;if(s==="pointColorActive")return Qe.length===1?Qe[0]:Qe;if(s==="pointColorHover")return ze.length===1?ze[0]:ze;if(s==="pointOutlineWidth")return dn;if(s==="pointSize")return It.length===1?It[0]:It;if(s==="pointSizeSelected")return pt;if(s==="pointSizeMouseDetection")return Xn;if(s==="showPointConnections")return Pt;if(s==="pointConnectionColor")return mt.length===1?mt[0]:mt;if(s==="pointConnectionColorActive")return ht.length===1?ht[0]:ht;if(s==="pointConnectionColorHover")return pe.length===1?pe[0]:pe;if(s==="pointConnectionColorBy")return We;if(s==="pointConnectionOpacity")return Le.length===1?Le[0]:Le;if(s==="pointConnectionOpacityBy")return Ee;if(s==="pointConnectionOpacityActive")return $e;if(s==="pointConnectionSize")return lt.length===1?lt[0]:lt;if(s==="pointConnectionSizeActive")return xt;if(s==="pointConnectionSizeBy")return Wt;if(s==="pointConnectionMaxIntPointsPerSegment")return Yt;if(s==="pointConnectionTolerance")return Qt;if(s==="reticleColor")return Se;if(s==="regl")return a.regl;if(s==="showReticle")return Ve;if(s==="version")return eL;if(s==="width")return Ut;if(s==="xScale")return jn;if(s==="yScale")return _n;if(s==="performanceMode")return Kr;if(s==="gamma")return a.gamma;if(s==="renderer")return a;if(s==="isDestroyed")return wt;if(s==="isPointsDrawn")return fr;if(s==="isPointsFiltered")return Rt;if(s==="zDataType")return gi;if(s==="wDataType")return Ii},lo=(s={})=>(Ap(s),(s.backgroundColor!==void 0||s.background!==void 0)&&js(s.backgroundColor||s.background),s.backgroundImage!==void 0&&Dc(s.backgroundImage),s.cameraTarget!==void 0&&Fc(s.cameraTarget),s.cameraDistance!==void 0&&Qm(s.cameraDistance),s.cameraRotation!==void 0&&Mc(s.cameraRotation),s.cameraView!==void 0&&jc(s.cameraView),s.colorBy!==void 0&&cc(s.colorBy),s.pointColor!==void 0&&Sm(s.pointColor),s.pointColorActive!==void 0&&wm(s.pointColorActive),s.pointColorHover!==void 0&&yi(s.pointColorHover),s.pointSize!==void 0&&sc(s.pointSize),s.pointSizeSelected!==void 0&&ca(s.pointSizeSelected),s.pointSizeMouseDetection!==void 0&&ih(s.pointSizeMouseDetection),s.sizeBy!==void 0&&Lm(s.sizeBy),s.opacity!==void 0&&Am(s.opacity),s.showPointConnections!==void 0&&Qc(s.showPointConnections),s.pointConnectionColor!==void 0&&Kc(s.pointConnectionColor),s.pointConnectionColorActive!==void 0&&qc(s.pointConnectionColorActive),s.pointConnectionColorHover!==void 0&&Zc(s.pointConnectionColorHover),s.pointConnectionColorBy!==void 0&&fc(s.pointConnectionColorBy),s.pointConnectionOpacityBy!==void 0&&Zt(s.pointConnectionOpacityBy),s.pointConnectionOpacity!==void 0&&Zm(s.pointConnectionOpacity),s.pointConnectionOpacityActive!==void 0&&Jm(s.pointConnectionOpacityActive),s.pointConnectionSize!==void 0&&eh(s.pointConnectionSize),s.pointConnectionSizeActive!==void 0&&th(s.pointConnectionSizeActive),s.pointConnectionSizeBy!==void 0&&dc(s.pointConnectionSizeBy),s.pointConnectionMaxIntPointsPerSegment!==void 0&&nh(s.pointConnectionMaxIntPointsPerSegment),s.pointConnectionTolerance!==void 0&&rh(s.pointConnectionTolerance),s.opacityBy!==void 0&&Cm(s.opacityBy),s.lassoColor!==void 0&&sl(s.lassoColor),s.lassoLineWidth!==void 0&&Km(s.lassoLineWidth),s.lassoMinDelay!==void 0&&Ei(s.lassoMinDelay),s.lassoMinDist!==void 0&&ul(s.lassoMinDist),s.lassoClearEvent!==void 0&&Bc(s.lassoClearEvent),s.lassoInitiator!==void 0&&$c(s.lassoInitiator),s.lassoInitiatorParentElement!==void 0&&Gc(s.lassoInitiatorParentElement),s.lassoOnLongPress!==void 0&&zc(s.lassoOnLongPress),s.lassoLongPressTime!==void 0&&Uc(s.lassoLongPressTime),s.lassoLongPressAfterEffectTime!==void 0&&Vc(s.lassoLongPressAfterEffectTime),s.lassoLongPressEffectDelay!==void 0&&Hc(s.lassoLongPressEffectDelay),s.lassoLongPressRevertEffectTime!==void 0&&Wc(s.lassoLongPressRevertEffectTime),s.keyMap!==void 0&&Xc(s.keyMap),s.mouseMode!==void 0&&Cr(s.mouseMode),s.showReticle!==void 0&&Yc(s.showReticle),s.reticleColor!==void 0&&qm(s.reticleColor),s.pointOutlineWidth!==void 0&&uc(s.pointOutlineWidth),s.height!==void 0&&bm(s.height),s.width!==void 0&&xs(s.width),s.aspectRatio!==void 0&&_m(s.aspectRatio),s.xScale!==void 0&&ni(s.xScale),s.yScale!==void 0&&Bs(s.yScale),s.deselectOnDblClick!==void 0&&zi(s.deselectOnDblClick),s.deselectOnEscape!==void 0&&cl(s.deselectOnEscape),s.opacityByDensityFill!==void 0&&Jc(s.opacityByDensityFill),s.opacityInactiveMax!==void 0&&ef(s.opacityInactiveMax),s.opacityInactiveScale!==void 0&&ah(s.opacityInactiveScale),s.gamma!==void 0&&oh(s.gamma),new Promise(D=>{window.requestAnimationFrame(()=>{u&&(gs(),Ie.refresh(),a.refresh(),yt=!0,D())})})),lh=(s,{preventEvent:D=!1}={})=>{jc(s),yt=!0,Bo=D},tf=()=>{Ie||(Ie=wA(u,{isPanInverted:[!1,!0]})),e.cameraView?Ie.setView(n1(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?Ie.lookAt([...e.cameraTarget||MC],e.cameraDistance||FC,e.cameraRotation||jC):Ie.setView(n1(BC)),Xa=Tr(1,1),na=Tr(-1,-1)},sh=({preventEvent:s=!1}={})=>{tf(),Mi(),!s&&t.publish("view",{view:Ie.view,camera:Ie,xScale:jn,yScale:_n})},nf=({key:s})=>{switch(s){case"Escape":h&&qo();break}},rf=()=>{jr=!0,vi=!0},Gs=()=>{Za(),jr=!1,vi=!0,yt=!0},af=()=>{yt=!0},uh=()=>{io([]),rn.clear()},so=()=>{Ie.refresh();const s=Ut===Ci,D=Ct===Ci;if(s||D){const{width:z,height:ae}=u.getBoundingClientRect();s&&ti(z),D&&Fi(ae),gs(),yt=!0}},ch=()=>u.getContext("2d").getImageData(0,0,u.width,u.height),fh=()=>{gs(),tf(),Mi(),Kt=zf(a.regl,{color:d,width:w,is2d:!0}),rn=zf(a.regl,{color:mt,colorHover:pe,colorActive:ht,opacity:Le===null?null:Le[0],width:lt[0],widthActive:xt,is2d:!0}),Nn=zf(a.regl,{color:Se,width:1,is2d:!0}),Yn=zf(a.regl,{color:Se,width:1,is2d:!0}),xi(),u.addEventListener("wheel",af),Ya=a.regl.buffer(),os=a.regl.buffer(),Qa=a.regl.buffer({usage:"dynamic",type:"float",length:ZA*2}),ra=vs(),Ho=tl();const s=lo({backgroundImage:l,width:Ut,height:Ct,keyMap:se});Nc(),Ic(),window.addEventListener("keyup",nf,!1),window.addEventListener("blur",eo,!1),window.addEventListener("mouseup",hs,!1),window.addEventListener("mousemove",ei,!1),u.addEventListener("mousedown",ms,!1),u.addEventListener("mouseenter",rf,!1),u.addEventListener("mouseleave",Gs,!1),u.addEventListener("click",Jo,!1),u.addEventListener("dblclick",el,!1),"ResizeObserver"in window?($o=new ResizeObserver(so),$o.observe(u)):(window.addEventListener("resize",so),window.addEventListener("orientationchange",so)),s.then(()=>{t.publish("init")})},va=a.onFrame(()=>{us=Ie.tick(),!(!fr||!(yt||Ni))&&(Ni&&!Rc(ls,ss)&&Oc(),us&&(Xa=Tr(1,1),na=Tr(-1,-1),en==="density"&&ha()),a.render(()=>{const s=u.width/a.canvas.width,D=u.height/a.canvas.height;Em(s,D),l&&l._reglType&&jm(),qr.length>2&&ks(),Ni||rn.draw({projection:hc(),model:to(),view:al()}),Nm(),!gt&&(Ve||ki)&&Bm(),In>=0&&Im(),st.length&&Fm(),Kt.draw({projection:hc(),model:to(),view:al()})},u),us&&(Mi(),Bo?Bo=!1:t.publish("view",{view:Ie.view,camera:Ie,xScale:jn,yScale:_n})),yt=!1,ki=!1,t.publish("draw"))}),dh=()=>{yt=!0},mh=()=>{fr=!1,wt=!0,va(),window.removeEventListener("keyup",nf,!1),window.removeEventListener("blur",eo,!1),window.removeEventListener("mouseup",hs,!1),window.removeEventListener("mousemove",ei,!1),u.removeEventListener("mousedown",ms,!1),u.removeEventListener("mouseenter",rf,!1),u.removeEventListener("mouseleave",Gs,!1),u.removeEventListener("click",Jo,!1),u.removeEventListener("dblclick",el,!1),u.removeEventListener("wheel",af,!1),$o?$o.disconnect():(window.removeEventListener("resize",so),window.removeEventListener("orientationchange",so)),u=void 0,Ie.dispose(),Ie=void 0,Kt.destroy(),Cn.destroy(),rn.destroy(),Nn.destroy(),Yn.destroy(),e.renderer||a.destroy(),t.publish("destroy"),t.clear()};return fh(),{get isSupported(){return a.isSupported},clear:Ln(uh),createTextureFromUrl:(s,D=Hv)=>p1(a.regl,s,D),deselect:qo,destroy:mh,draw:pa,filter:bc,get:$s,getScreenPosition:Ym,hover:Za,redraw:dh,refresh:a.refresh,reset:Ln(sh),select:sa,set:lo,export:ch,subscribe:t.subscribe,unfilter:ao,unsubscribe:t.unsubscribe,view:lh,zoomToLocation:Ms,zoomToArea:Ds,zoomToPoints:Gi,zoomToOrigin:kc}};function dd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function N_(e){let t,n,r;e.length!==2?(t=dd,n=(l,u)=>dd(e(l),u),r=(l,u)=>e(l)-u):(t=e===dd||e===nL?e:rL,n=e,r=e);function i(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const h=f+p>>>1;n(l[h],u)<0?f=h+1:p=h}while(f<p)}return f}function a(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const h=f+p>>>1;n(l[h],u)<=0?f=h+1:p=h}while(f<p)}return f}function o(l,u,f=0,p=l.length){const h=i(l,u,f,p-1);return h>f&&r(l[h-1],u)>-r(l[h],u)?h-1:h}return{left:i,center:o,right:a}}function rL(){return 0}function iL(e){return e===null?NaN:+e}const aL=N_(dd),oL=aL.right;N_(iL).center;const lL=oL,sL=Math.sqrt(50),uL=Math.sqrt(10),cL=Math.sqrt(2);function Xd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=sL?10:a>=uL?5:a>=cL?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?Xd(e,t,n*2):[l,u,f]}function N0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Xd(t,e,n):Xd(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let f=0;f<l;++f)u[f]=(a-f)/-o;else for(let f=0;f<l;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(i+f)/-o;else for(let f=0;f<l;++f)u[f]=(i+f)*o;return u}function I0(e,t,n){return t=+t,e=+e,n=+n,Xd(e,t,n)[2]}function fL(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?I0(t,e,n):I0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function D_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tc(){}var Vu=.7,Yd=1/Vu,Ul="\\s*([+-]?\\d+)\\s*",Hu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dL=/^#([0-9a-f]{3,8})$/,mL=new RegExp(`^rgb\\(${Ul},${Ul},${Ul}\\)$`),hL=new RegExp(`^rgb\\(${Pi},${Pi},${Pi}\\)$`),pL=new RegExp(`^rgba\\(${Ul},${Ul},${Ul},${Hu}\\)$`),vL=new RegExp(`^rgba\\(${Pi},${Pi},${Pi},${Hu}\\)$`),gL=new RegExp(`^hsl\\(${Hu},${Pi},${Pi}\\)$`),yL=new RegExp(`^hsla\\(${Hu},${Pi},${Pi},${Hu}\\)$`),E1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wv(tc,Wu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_1,formatHex:_1,formatHex8:xL,formatHsl:EL,formatRgb:S1,toString:S1});function _1(){return this.rgb().formatHex()}function xL(){return this.rgb().formatHex8()}function EL(){return M_(this).formatHsl()}function S1(){return this.rgb().formatRgb()}function Wu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?w1(t):n===3?new yr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mL.exec(e))?new yr(t[1],t[2],t[3],1):(t=hL.exec(e))?new yr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pL.exec(e))?Hf(t[1],t[2],t[3],t[4]):(t=vL.exec(e))?Hf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gL.exec(e))?A1(t[1],t[2]/100,t[3]/100,1):(t=yL.exec(e))?A1(t[1],t[2]/100,t[3]/100,t[4]):E1.hasOwnProperty(e)?w1(E1[e]):e==="transparent"?new yr(NaN,NaN,NaN,0):null}function w1(e){return new yr(e>>16&255,e>>8&255,e&255,1)}function Hf(e,t,n,r){return r<=0&&(e=t=n=NaN),new yr(e,t,n,r)}function _L(e){return e instanceof tc||(e=Wu(e)),e?(e=e.rgb(),new yr(e.r,e.g,e.b,e.opacity)):new yr}function D0(e,t,n,r){return arguments.length===1?_L(e):new yr(e,t,n,r??1)}function yr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wv(yr,D0,D_(tc,{brighter(e){return e=e==null?Yd:Math.pow(Yd,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vu:Math.pow(Vu,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yr(Oo(this.r),Oo(this.g),Oo(this.b),Qd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T1,formatHex:T1,formatHex8:SL,formatRgb:b1,toString:b1}));function T1(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function SL(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function b1(){const e=Qd(this.opacity);return`${e===1?"rgb(":"rgba("}${Oo(this.r)}, ${Oo(this.g)}, ${Oo(this.b)}${e===1?")":`, ${e})`}`}function Qd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Oo(e),(e<16?"0":"")+e.toString(16)}function A1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new li(e,t,n,r)}function M_(e){if(e instanceof li)return new li(e.h,e.s,e.l,e.opacity);if(e instanceof tc||(e=Wu(e)),!e)return new li;if(e instanceof li)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new li(o,l,u,e.opacity)}function wL(e,t,n,r){return arguments.length===1?M_(e):new li(e,t,n,r??1)}function li(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wv(li,wL,D_(tc,{brighter(e){return e=e==null?Yd:Math.pow(Yd,e),new li(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vu:Math.pow(Vu,e),new li(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yr(Lp(e>=240?e-240:e+120,i,r),Lp(e,i,r),Lp(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new li(C1(this.h),Wf(this.s),Wf(this.l),Qd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qd(this.opacity);return`${e===1?"hsl(":"hsla("}${C1(this.h)}, ${Wf(this.s)*100}%, ${Wf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function C1(e){return e=(e||0)%360,e<0?e+360:e}function Wf(e){return Math.max(0,Math.min(1,e||0))}function Lp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xv=e=>()=>e;function TL(e,t){return function(n){return e+n*t}}function bL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function AL(e){return(e=+e)==1?F_:function(t,n){return n-t?bL(t,n,e):Xv(isNaN(t)?n:t)}}function F_(e,t){var n=t-e;return n?TL(e,n):Xv(isNaN(e)?t:e)}const L1=function e(t){var n=AL(t);function r(i,a){var o=n((i=D0(i)).r,(a=D0(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),f=F_(i.opacity,a.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=e,r}(1);function CL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function LL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Yv(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function OL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Kd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function PL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Yv(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var M0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rp=new RegExp(M0.source,"g");function kL(e){return function(){return e}}function NL(e){return function(t){return e(t)+""}}function IL(e,t){var n=M0.lastIndex=Rp.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=M0.exec(e))&&(i=Rp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Kd(r,i)})),n=Rp.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?NL(u[0].x):kL(t):(t=u.length,function(f){for(var p=0,h;p<t;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}function Yv(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xv(t):(n==="number"?Kd:n==="string"?(r=Wu(t))?(t=r,L1):IL:t instanceof Wu?L1:t instanceof Date?OL:LL(t)?CL:Array.isArray(t)?RL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?PL:Kd)(e,t)}function DL(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ML(e){return function(){return e}}function FL(e){return+e}var R1=[0,1];function Ml(e){return e}function F0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ML(isNaN(t)?NaN:.5)}function jL(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function BL(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=F0(i,r),a=n(o,a)):(r=F0(r,i),a=n(a,o)),function(l){return a(r(l))}}function $L(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=F0(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=lL(e,l,1,r)-1;return a[u](i[u](l))}}function j_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B_(){var e=R1,t=R1,n=Yv,r,i,a,o=Ml,l,u,f;function p(){var d=Math.min(e.length,t.length);return o!==Ml&&(o=jL(e[0],e[d-1])),l=d>2?$L:BL,u=f=null,h}function h(d){return d==null||isNaN(d=+d)?a:(u||(u=l(e.map(r),t,n)))(r(o(d)))}return h.invert=function(d){return o(i((f||(f=l(t,e.map(r),Kd)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,FL),p()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),p()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=DL,p()},h.clamp=function(d){return arguments.length?(o=d?!0:Ml,p()):o!==Ml},h.interpolate=function(d){return arguments.length?(n=d,p()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,w){return r=d,i=w,p()}}function GL(){return B_()(Ml,Ml)}function zL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Zl(e){return e=qd(Math.abs(e)),e?e[1]:NaN}function UL(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function VL(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var HL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xu(e){if(!(t=HL.exec(e)))throw new Error("invalid format: "+e);var t;return new Qv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xu.prototype=Qv.prototype;function Qv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WL(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $_;function XL(e,t){var n=qd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-($_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+qd(e,Math.max(0,t+a-1))[0]}function O1(e,t){var n=qd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const P1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zL,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>O1(e*100,t),r:O1,s:XL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function k1(e){return e}var N1=Array.prototype.map,I1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function YL(e){var t=e.grouping===void 0||e.thousands===void 0?k1:UL(N1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?k1:VL(N1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Xu(h);var d=h.fill,w=h.align,x=h.sign,L=h.symbol,I=h.zero,v=h.width,b=h.comma,C=h.precision,H=h.trim,q=h.type;q==="n"?(b=!0,q="g"):P1[q]||(C===void 0&&(C=12),H=!0,q="g"),(I||d==="0"&&w==="=")&&(I=!0,d="0",w="=");var ie=L==="$"?n:L==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",we=L==="$"?r:/[%p]/.test(q)?o:"",se=P1[q],at=/[defgprs%]/.test(q);C=C===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function Ve(Se){var Ke=ie,Qe=we,ze,Pt,mt;if(q==="c")Qe=se(Se)+Qe,Se="";else{Se=+Se;var ht=Se<0||1/Se<0;if(Se=isNaN(Se)?u:se(Math.abs(Se),C),H&&(Se=WL(Se)),ht&&+Se==0&&x!=="+"&&(ht=!1),Ke=(ht?x==="("?x:l:x==="-"||x==="("?"":x)+Ke,Qe=(q==="s"?I1[8+$_/3]:"")+Qe+(ht&&x==="("?")":""),at){for(ze=-1,Pt=Se.length;++ze<Pt;)if(mt=Se.charCodeAt(ze),48>mt||mt>57){Qe=(mt===46?i+Se.slice(ze+1):Se.slice(ze))+Qe,Se=Se.slice(0,ze);break}}}b&&!I&&(Se=t(Se,1/0));var pe=Ke.length+Se.length+Qe.length,We=pe<v?new Array(v-pe+1).join(d):"";switch(b&&I&&(Se=t(We+Se,We.length?v-Qe.length:1/0),We=""),w){case"<":Se=Ke+Se+Qe+We;break;case"=":Se=Ke+We+Se+Qe;break;case"^":Se=We.slice(0,pe=We.length>>1)+Ke+Se+Qe+We.slice(pe);break;default:Se=We+Ke+Se+Qe;break}return a(Se)}return Ve.toString=function(){return h+""},Ve}function p(h,d){var w=f((h=Xu(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Zl(d)/3)))*3,L=Math.pow(10,-x),I=I1[8+x/3];return function(v){return w(L*v)+I}}return{format:f,formatPrefix:p}}var Xf,Kv,G_;QL({thousands:",",grouping:[3],currency:["$",""]});function QL(e){return Xf=YL(e),Kv=Xf.format,G_=Xf.formatPrefix,Xf}function KL(e){return Math.max(0,-Zl(Math.abs(e)))}function qL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zl(t)/3)))*3-Zl(Math.abs(e)))}function ZL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zl(t)-Zl(e))+1}function JL(e,t,n,r){var i=fL(e,t,n),a;switch(r=Xu(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=qL(i,o))&&(r.precision=a),G_(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ZL(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=KL(i))&&(r.precision=a-(r.type==="%")*2);break}}return Kv(r)}function eR(e){var t=e.domain;return e.ticks=function(n){var r=t();return N0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return JL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,f,p=10;for(l<o&&(f=o,o=l,l=f,f=i,i=a,a=f);p-- >0;){if(f=I0(o,l,n),f===u)return r[i]=o,r[a]=l,t(r);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function Yu(){var e=GL();return e.copy=function(){return j_(e,Yu())},I_.apply(e,arguments),eR(e)}function tR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function D1(e){return Math.log(e)}function M1(e){return Math.exp(e)}function nR(e){return-Math.log(-e)}function rR(e){return-Math.exp(-e)}function iR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function aR(e){return e===10?iR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function oR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function F1(e){return(t,n)=>-e(-t,n)}function lR(e){const t=e(D1,M1),n=t.domain;let r=10,i,a;function o(){return i=oR(r),a=aR(r),n()[0]<0?(i=F1(i),a=F1(a),e(nR,rR)):e(D1,M1),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],p=u[u.length-1];const h=p<f;h&&([f,p]=[p,f]);let d=i(f),w=i(p),x,L;const I=l==null?10:+l;let v=[];if(!(r%1)&&w-d<I){if(d=Math.floor(d),w=Math.ceil(w),f>0){for(;d<=w;++d)for(x=1;x<r;++x)if(L=d<0?x/a(-d):x*a(d),!(L<f)){if(L>p)break;v.push(L)}}else for(;d<=w;++d)for(x=r-1;x>=1;--x)if(L=d>0?x/a(-d):x*a(d),!(L<f)){if(L>p)break;v.push(L)}v.length*2<I&&(v=N0(f,p,I))}else v=N0(d,w,Math.min(w-d,I)).map(a);return h?v.reverse():v},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Xu(u)).precision==null&&(u.trim=!0),u=Kv(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return p=>{let h=p/a(Math.round(i(p)));return h*r<r-.5&&(h*=r),h<=f?u(p):""}},t.nice=()=>n(tR(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function qv(){const e=lR(B_()).domain([1,10]);return e.copy=()=>j_(e,qv()).base(e.base()),I_.apply(e,arguments),e}const sR="_scatter_10z4g_2",uR={scatter:sR};Zv.propTypes={points:qe.array.isRequired,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onView:qe.func,onSelect:qe.func,onHover:qe.func};const cR=e=>qv().domain([100,1e6]).range([6,1]).clamp(!0)(e),fR=e=>qv().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function Zv({points:e,width:t,height:n,onScatter:r,onView:i,onSelect:a,onHover:o}){const l=j.useRef(),u=j.useRef([-1,1]),f=j.useRef([-1,1]),p=Yu().domain(u.current),h=Yu().domain(f.current);return j.useEffect(()=>{const d=cR(e.length),w=fR(e.length);console.log("point size",d,w);const x=tL({canvas:l.current,width:t,height:n,pointSize:d,opacity:w,pointColor:[250/255,128/255,114/255,1],pointColorHover:[.1,.1,.1,.5],xScale:p,yScale:h});return x.draw(e),i&&i(p,h),x.subscribe("view",({camera:L,view:I,xScale:v,yScale:b})=>{u.current=v.domain(),f.current=b.domain(),i&&i(u.current,f.current)}),x.subscribe("select",({points:L})=>{a&&a(L)}),x.subscribe("deselect",()=>{a&&a([])}),x.subscribe("pointOver",L=>{o&&o(L)}),x.subscribe("pointOut",()=>{o&&o(null)}),r&&r(x),()=>{x.destroy()}},[e]),O.jsx("canvas",{className:uR.scatter,ref:l})}const cu=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:a,yDomain:o,width:l,height:u})=>{const f=j.useRef();return j.useEffect(()=>{if(a&&o){const p=Yu().domain(a).range([0,l]),h=Yu().domain(o).range([u,0]),d=I=>I/(.1+a[1]-a[0]),x=f.current.getContext("2d");x.clearRect(0,0,l,u),x.fillStyle=t,x.strokeStyle=n,x.font=`${d(r)}px monospace`,x.globalAlpha=.75;let L=d(r);if(!e.length)return;e.map(I=>{t&&x.fillRect(p(I[0])-L/2,h(I[1])-L/2,L,L),n&&x.strokeRect(p(I[0])-L/2,h(I[1])-L/2,L,L),i&&x.fillText(i,p(I[0])-L/3.2,h(I[1])+L/3.2)})}},[e,t,n,r,a,o,l,u]),O.jsx("canvas",{className:"annotation-plot",ref:f,width:l,height:u})};z_.propTypes={dataset:qe.object.isRequired,slides:qe.array.isRequired,selected:qe.object,onHover:qe.func,onClick:qe.func};function z_({dataset:e,slides:t,selected:n,onHover:r,onClick:i}){return O.jsxs("div",{className:"slide-bar",children:[O.jsxs("div",{className:"slide-bar-header",children:[t.length," Slides"]}),O.jsx("div",{className:"slide-bar-body",children:t.map((a,o)=>O.jsx("div",{className:a===n?"slide-active slide-bar-item":"slide-bar-item",onMouseEnter:()=>r?r(a):null,onMouseLeave:()=>r?r(null):null,onClick:()=>i?i(a):null,children:a.label},o))})]})}const xo=640,Eo=640;function dR(){var Jr,rn;const e="http://localhost:5001/api",[t,n]=j.useState(null),{dataset:r,scope:i}=l_();j.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then(ue=>ue.json()).then(ue=>{n(ue)})},[r]);const[a,o]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/embeddings`).then(ue=>ue.json()).then(ue=>{o(ue)})},[r]);const[l,u]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/umaps`).then(ue=>ue.json()).then(ue=>{u(ue)})},[r]);const[f,p]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/clusters`).then(ue=>ue.json()).then(ue=>{console.log("clusters",ue),p(ue)})},[r]);const[h,d]=j.useState([]),[w,x]=j.useState(null),[L,I]=j.useState(null),[v,b]=j.useState(null),[C,H]=j.useState(L),q=ue=>{console.log("selected",ue),H(ue)};j.useEffect(()=>{fetch(`${e}/datasets/${r}/scopes`).then(ue=>ue.json()).then(ue=>{d(ue.sort((Ot,Nn)=>Ot.name.localeCompare(Nn.name)))})},[r,d]),j.useEffect(()=>{if(i&&h.length){const ue=h.find(Ot=>Ot.name==i);if(ue){x(ue);const Ot=l.find(Nn=>Nn.name===ue.umap);I(ue.embeddings),H(ue.embeddings),b(Ot)}}else x(null)},[i,h,l,f,x,b]);const[ie,we]=j.useState([]),[se,at]=j.useState(!1);j.useEffect(()=>{v&&fetch(`${e}/datasets/${t.id}/umaps/${v.name}/points`).then(ue=>ue.json()).then(ue=>{console.log("umap points",ue),we(ue.map(Ot=>[Ot.x,Ot.y]))})},[t,v]);const Ve=j.useCallback((ue,Ot,Nn=[])=>{fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ue)}`).then(Yn=>Yn.json()).then(Yn=>{if(!t)return;t.text_column;let Mr=Yn.map((di,Fr)=>({index:ue[Fr],...di}));Mr.sort((di,Fr)=>Fr.score-di.score),Ot(Mr)})},[t,r]),[Se,Ke]=j.useState({});j.useEffect(()=>{fetch(`${e}/tags?dataset=${r}`).then(ue=>ue.json()).then(ue=>Ke(ue))},[r]);const Qe=j.useMemo(()=>{const ue=[];for(const Ot in Se)ue.push(Ot);return ue},[Se]),[ze,Pt]=j.useState(Qe[0]),[mt,ht]=j.useState([]);j.useEffect(()=>{Se[ze]?Ve(Se[ze],ht):ht([])},[t,ze,Se]);const[pe,We]=j.useState([]);j.useEffect(()=>{if(Se[ze]){const ue=Se[ze].map(Ot=>ie[Ot]);We(ue)}else We([]),pt&&pt.config&&(pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500}))},[Se,ze,ie]);const[Le,Ee]=j.useState([]),[$e,lt]=j.useState([]),xt=j.useCallback(ue=>{fetch(`${e}/search/nn?dataset=${r}&query=${ue}&model=${C}`).then(Ot=>Ot.json()).then(Ot=>{lt(Ot.distances),Ee(Ot.indices),console.log("SEARCH RESULTS",Ot),pt==null||pt.zoomToPoints(Ot.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[C]),[Wt,Yt]=j.useState([]);j.useEffect(()=>{Ve(Le,Yt,$e)},[Le,Yt,$e]);const[Qt,It]=j.useState([]);j.useEffect(()=>{const ue=Le.map(Ot=>ie[Ot]);It(ue)},[Le,ie]);const[pt,Xn]=j.useState({}),[dn,Xt]=j.useState([-1,1]),[en,Et]=j.useState([-1,1]),St=j.useCallback((ue,Ot)=>{Xt(ue),Et(Ot)}),[kt,At]=j.useState([]),[Ct,Ut]=j.useState([]);j.useEffect(()=>{Ve(kt,Ut)},[kt,Ut]);const mn=j.useCallback(ue=>{At(ue),De(0)}),[ln,Kr]=j.useState(null),[y,wt]=j.useState([]);j.useEffect(()=>{ln!=null?Ve([ln],wt):wt([])},[ln,wt]);const[Ft,Ie]=j.useState([]);j.useEffect(()=>{ln!=null?Ie([ie[ln]]):Ie([])},[ln,ie]);const Kt=[{id:0,name:"Selected"},{id:1,name:"Search"},{id:2,name:"Slide"},{id:3,name:"Tag"}],[gt,De]=j.useState(0);j.useState([]);const[ut,jt]=j.useState(null),[st,tn]=j.useState(null),[nn,Rt]=j.useState([]),[En,hn]=j.useState([]);j.useEffect(()=>{w?fetch(`${e}/datasets/${r}/clusters/${w.cluster}/labels`).then(ue=>ue.json()).then(ue=>{console.log("cluster labels",ue),hn(ue)}):hn([])},[w,hn,r]),j.useEffect(()=>{ut?fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ut.indices)}`).then(ue=>ue.json()).then(ue=>{const Ot=t.text_column;let Nn=ue.map((Yn,Mr)=>({index:ut.indices[Mr],text:Yn[Ot],score:Yn.score,date:Yn.date}));Nn.sort((Yn,Mr)=>Mr.score-Yn.score),Rt(Nn)}).catch(ue=>console.log(ue)):Rt([])},[r,ut]);const[Sr,nr]=j.useState([]);j.useEffect(()=>{if(ut){const ue=ut.indices.map(Ot=>ie[Ot]);nr(ue)}else nr([]),pt&&pt.config&&(pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500}))},[ut,ie]);const[qr,An]=j.useState([]);j.useEffect(()=>{if(st){const ue=st.indices.map(Ot=>ie[Ot]);An(ue)}else An([])},[st,ie]);const fi=j.useCallback(ue=>{jt(ue),De(2),pt==null||pt.zoomToPoints(ue.indices,{transition:!0,padding:.5,transitionDuration:1500})}),ta=j.useCallback(ue=>{tn(ue)}),Zr=j.useCallback(ue=>{pt==null||pt.zoomToPoints([ue],{transition:!0,padding:.9,transitionDuration:1500})}),cr=j.useCallback(ue=>{Kr(ue)});return t?O.jsxs("div",{className:"dataset--explore",children:[O.jsxs("h2",{children:["Dataset: ",r]}),O.jsxs("div",{className:"dataset--explore-summary",children:["[ ",t.length," rows ]",O.jsx("br",{}),w==null?void 0:w.name,": [",L,"][ ",v==null?void 0:v.name," ] [ ",w==null?void 0:w.cluster," ] [ ",O.jsx("a",{href:`/datasets/${r}/setup/${i}`,children:"setup"})," ]",O.jsx("br",{}),"Tags: ",Qe.map(ue=>O.jsxs("button",{className:"dataset--tag-link",onClick:()=>{Pt(ue),De(3),pt==null||pt.zoomToPoints(Se[ue],{transition:!0,padding:.2,transitionDuration:1500})},children:[ue,"(",Se[ue].length,")"]},ue)),O.jsxs("form",{className:"new-tag",onSubmit:ue=>{ue.preventDefault();const Ot=ue.target.elements.newTag.value;fetch(`${e}/tags/new?dataset=${r}&tag=${Ot}`).then(Nn=>Nn.json()).then(Nn=>{console.log("new tag",Nn),Ke(Nn)})},children:[O.jsx("input",{type:"text",id:"newTag"}),O.jsx("button",{type:"submit",children:"New Tag"})]}),O.jsx("br",{})]}),O.jsx("div",{className:"dataset--search-box",children:O.jsxs("form",{onSubmit:ue=>{ue.preventDefault(),xt(ue.target.elements.searchBox.value),De(1)},children:[O.jsx("input",{type:"text",id:"searchBox"}),O.jsx("button",{type:"submit",children:"Similarity Search"}),O.jsx("label",{htmlFor:"embeddingModel",children:"Using:"}),O.jsx("select",{id:"embeddingModel",onChange:ue=>q(ue.target.value),value:C,children:a.map((ue,Ot)=>O.jsx("option",{value:ue,children:ue},Ot))})]})}),O.jsxs("div",{className:"dataset--scope-container",children:[O.jsxs("div",{className:"dataset--scope",style:{width:xo,height:Eo},children:[O.jsx(Zv,{points:ie,loading:se,width:xo,height:Eo,onScatter:Xn,onView:St,onSelect:mn,onHover:cr}),O.jsx(cu,{points:Qt,fill:"black",size:"5",xDomain:dn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Sr,fill:"darkred",size:"5",xDomain:dn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:qr,fill:"red",size:"8",xDomain:dn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:pe,symbol:ze,size:"10",xDomain:dn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Ft,stroke:"black",fill:"orange",size:"6",xDomain:dn,yDomain:en,width:xo,height:Eo})]}),O.jsxs("div",{className:"dataset--tabs",children:[O.jsx("div",{className:"dataset--tab-header",children:Kt.map(ue=>O.jsx("button",{onClick:()=>De(ue.id),className:ue.id===gt?"tab-active":"tab-inactive",children:ue.name},ue.id))}),O.jsxs("div",{className:"dataset--tab-content",children:[gt===0?O.jsxs("div",{className:"dataset--selected-table",children:[O.jsxs("span",{children:["Selected: ",Ct.length,Ct.length>0?O.jsx("button",{className:"deselect",onClick:()=>{At([]),pt==null||pt.select([]),pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Ct.length>0?O.jsx(Ao,{data:Ct,tagset:Se,datasetId:r,maxRows:150,onTagset:ue=>Ke(ue),onHover:cr,onClick:Zr}):null]}):null,gt===1?O.jsxs("div",{className:"dataset--neighbors",children:[O.jsxs("span",{children:["Nearest Neighbors: ",Le.length,Le.length>0?O.jsx("button",{className:"deselect",onClick:()=>{Ee([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),Wt.length>0?O.jsx(Ao,{data:Wt,tagset:Se,datasetId:r,onTagset:ue=>Ke(ue),onHover:cr,onClick:Zr}):null]}):null,gt===2?O.jsxs("div",{className:"dataset--slide",children:[O.jsxs("span",{children:[ut==null?void 0:ut.label," ",ut==null?void 0:ut.indices.length,ut?O.jsx("button",{className:"deselect",onClick:()=>{jt(null)},children:"X"}):null]}),nn.length?O.jsx(Ao,{data:nn,tagset:Se,datasetId:r,onTagset:ue=>Ke(ue),onHover:cr,onClick:Zr}):null]}):null,gt===3?O.jsxs("div",{className:"dataset--tag",children:[O.jsxs("span",{children:[ze," ",(Jr=Se[ze])==null?void 0:Jr.length,ze?O.jsx("button",{className:"deselect",onClick:()=>{Pt(null)},children:"X"}):null]}),mt.length?O.jsx(Ao,{data:mt,tagset:Se,datasetId:r,onTagset:ue=>Ke(ue),onHover:cr,onClick:Zr}):null]}):null]})]})]}),O.jsx(z_,{dataset:t,slides:En,selected:ut,onClick:fi,onHover:ta}),O.jsx("div",{className:"dataset--hovered-table",children:O.jsx("span",{children:(rn=y[0])==null?void 0:rn.text})})]}):O.jsx("div",{children:"Loading..."})}const Op="http://localhost:5001/api";U_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,textColumn:qe.string.isRequired,embedding:qe.string,umaps:qe.array,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function U_({dataset:e,textColumn:t,embedding:n,umaps:r,clusters:i,onNew:a,onChange:o}){const[l,u]=j.useState([]),[f,p]=j.useState(null),{startJob:h}=ql(e,p,`${Op}/jobs/embed`),[d,w]=j.useState([]);j.useEffect(()=>{fetch(`${Op}/embedding_models`).then(I=>I.json()).then(w).catch(console.error)},[]);const x=(I,v)=>{fetch(`${Op}/datasets/${I}/embeddings`).then(b=>b.json()).then(b=>{v(b)})};j.useEffect(()=>{x(e==null?void 0:e.id,I=>{u(I),a(I)})},[e,u,a]),j.useEffect(()=>{(f==null?void 0:f.status)==="completed"&&x(e.id,I=>{u(I),a(I)})},[f,e,u,a]);const L=I=>{I.preventDefault();const v=I.target,b=new FormData(v),C=d.find(q=>q.id===b.get("modelName"));let H={text_column:t,provider:C.provider,model:C.id};h(H)};return O.jsxs("div",{children:[O.jsxs("div",{children:["Embedding on column: ",O.jsx("b",{children:t})]}),O.jsxs("form",{onSubmit:L,children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"modelName",children:"Model:"}),O.jsx("select",{id:"modelName",name:"modelName",disabled:!!f,children:d.filter(I=>(l==null?void 0:l.indexOf(I.id))<0).map((I,v)=>O.jsxs("option",{value:I.id,children:[I.provider,": ",I.name]},v))})]}),O.jsx("button",{type:"submit",disabled:!!f,children:"New Embedding"})]}),O.jsx(is,{job:f,clearJob:()=>{p(null)}}),O.jsx("div",{className:"embeddings-list",children:l.map((I,v)=>O.jsxs("div",{children:[O.jsx("input",{type:"radio",id:`embedding${v}`,name:"embedding",value:I,checked:I===n,onChange:()=>o(I)}),O.jsx("label",{htmlFor:`embedding${v}`,children:O.jsxs("span",{children:[I," [",r.filter(b=>b.embeddings==I).length," umaps, ",i.filter(b=>r.filter(C=>C.embeddings==I).map(C=>C.name).indexOf(b.umap_name)>=0).length," clusters ]"]})})]},v))})]})}const j1={"umaps-list":"_umaps-list_p5rgt_1","umaps-item":"_umaps-item_p5rgt_9"},Yf="http://localhost:5001/api";V_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,umap:qe.object,embedding:qe.string,clusters:qe.array.isRequired,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function V_({dataset:e,umap:t,embedding:n,clusters:r,onNew:i,onChange:a}){const[o,l]=j.useState(null),{startJob:u}=ql(e,l,`${Yf}/jobs/umap`),{startJob:f}=ql(e,l,`${Yf}/jobs/delete/umap`),[p,h]=j.useState([]);function d(x,L){fetch(`${Yf}/datasets/${x}/umaps`).then(I=>I.json()).then(I=>{const v=I.map(b=>({...b,url:`${Yf}/files/${x}/umaps/${b.name}.png`}));L(v.reverse())})}j.useEffect(()=>{d(e.id,x=>{h(x),i(x)})},[e,i]),j.useEffect(()=>{(o==null?void 0:o.status)=="completed"&&d(e.id,x=>{h(x),i(x)})},[o,e,h,i]);const w=j.useCallback(x=>{x.preventDefault();const L=x.target,I=new FormData(L),v=I.get("neighbors"),b=I.get("min_dist");u({embeddings:n,neighbors:v,min_dist:b})},[u,n]);return O.jsxs("div",{className:"dataset--umaps-new",children:[O.jsxs("form",{onSubmit:w,children:[O.jsxs("label",{children:["Neighbors:",O.jsx("input",{type:"number",name:"neighbors",defaultValue:"25",disabled:!!o})]}),O.jsxs("label",{children:["Min Dist:",O.jsx("input",{type:"text",name:"min_dist",defaultValue:"0.1",disabled:!!o})]}),O.jsx("button",{type:"submit",disabled:!!o,children:"New UMAP"})]}),O.jsx(is,{job:o,clearJob:()=>l(null)}),O.jsx("div",{className:j1["umaps-list"],children:p.filter(x=>x.embeddings==n).map((x,L)=>O.jsxs("div",{className:j1["umaps-item"],children:[O.jsx("input",{type:"radio",id:`umap${L}`,name:"umap",value:x,checked:x.name===(t==null?void 0:t.name),onChange:()=>a(x)}),O.jsxs("label",{htmlFor:`umap${L}`,children:[x.name,O.jsx("br",{}),"Neighbors: ",x.neighbors,O.jsx("br",{}),"Min Dist: ",x.min_dist,O.jsx("br",{}),O.jsx("img",{src:x.url,alt:x.name}),O.jsx("br",{}),r.filter(I=>I.umap_name==x.name).length," clusters",O.jsx("button",{onClick:()=>f({umap_name:x.name}),disabled:o&&o.status!=="completed",children:"🗑️ umap"})]})]},L))})]})}const Qf="http://localhost:5001/api";H_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,umap:qe.object,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function H_({dataset:e,cluster:t,umap:n,onNew:r,onChange:i}){const[a,o]=j.useState(null),{startJob:l}=ql(e,o,`${Qf}/jobs/cluster`),{startJob:u}=ql(e,o,`${Qf}/jobs/delete/cluster`),[f,p]=j.useState([]);function h(w,x){fetch(`${Qf}/datasets/${w}/clusters`).then(L=>L.json()).then(L=>{const I=L.map(v=>({...v,url:`${Qf}/files/${w}/clusters/${v.cluster_name}.png`}));x(I.reverse())})}j.useEffect(()=>{h(e.id,w=>{p(w),r(w)})},[e,r]),j.useEffect(()=>{(a==null?void 0:a.status)=="completed"&&h(e.id,w=>{p(w),r(w)})},[a,e,p,r]);const d=j.useCallback(w=>{w.preventDefault();const x=w.target,L=new FormData(x),I=L.get("samples"),v=L.get("min_samples");l({umap_name:n.name,samples:I,min_samples:v})},[l,n]);return O.jsxs("div",{className:"dataset--clusters-new",children:[O.jsxs("form",{onSubmit:w=>d(w,n),children:[O.jsxs("label",{children:["Samples:",O.jsx("input",{type:"number",name:"samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("br",{}),O.jsxs("label",{children:["Min Samples:",O.jsx("input",{type:"number",name:"min_samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("button",{type:"submit",disabled:!!a||!n,children:"New Clusters"})]}),O.jsx(is,{job:a,clearJob:()=>o(null)}),O.jsx("div",{className:"dataset--setup-clusters-list",children:n&&f.filter(w=>w.umap_name==n.name).map((w,x)=>O.jsxs("div",{className:"dataset--setup-clusters-item",children:[O.jsx("input",{type:"radio",id:`cluster${x}`,name:"cluster",value:t,checked:w.cluster_name===(t==null?void 0:t.cluster_name),onChange:()=>i(w)}),O.jsxs("label",{htmlFor:`cluster${x}`,children:[w.cluster_name,O.jsx("br",{}),"Clusters: ",w.n_clusters,O.jsx("br",{}),"Noise points: ",w.n_noise,O.jsx("br",{}),"Samples: ",w.samples,O.jsx("br",{}),"Min Samples: ",w.min_samples,O.jsx("br",{}),O.jsx("img",{src:w.url,alt:w.name}),O.jsx("button",{onClick:()=>u({cluster_name:w.cluster_name}),children:"🗑️ cluster"})]})]},x))})]})}const Kf="http://localhost:5001/api";W_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,selectedModel:qe.string,onChange:qe.func.isRequired};function W_({dataset:e,cluster:t,selectedModel:n,onChange:r}){const[i,a]=j.useState(null),{startJob:o}=ql(e,a,`${Kf}/jobs/cluster_label`),[l,u]=j.useState([]);j.useEffect(()=>{fetch(`${Kf}/chat_models`).then(x=>x.json()).then(x=>{u(x)}).catch(x=>{console.log(x),u([])})},[]);const[f,p]=j.useState([]),[h,d]=j.useState([]);j.useEffect(()=>{if(e&&t){const x=n?`labels/${n}`:"labels";fetch(`${Kf}/datasets/${e.id}/clusters/${t.cluster_name}/${x}`).then(L=>L.json()).then(L=>{d(L)}).catch(L=>{console.log(L),d([])})}else d([])},[n,d,e,t]),j.useEffect(()=>{console.log("cluster changed, set label models",t==null?void 0:t.cluster_name),t?fetch(`${Kf}/datasets/${e.id}/clusters/${t.cluster_name}/labels_available`).then(x=>x.json()).then(x=>{console.log("cluster changed, set label models fetched",t.cluster_name,x),p(x)}).catch(x=>{console.log(x),p([])}):p([])},[e,t,i,p]);const w=j.useCallback(x=>{x.preventDefault();const L=x.target,I=new FormData(L),v=I.get("chatModel"),b=e.text_column,C=t==null?void 0:t.cluster_name,H=I.get("context");o({model:v,cluster:C,text_column:b,context:H})},[t,o]);return O.jsxs("div",{className:"dataset--setup-cluster-labels-content",children:[O.jsxs("div",{className:"dataset--slides-new",children:[O.jsxs("p",{children:["Automatically create labels for each cluster",t?` in ${t.cluster_name}`:""," using a chat model. "]}),O.jsxs("form",{onSubmit:w,children:[O.jsxs("label",{children:["Chat Models:",O.jsx("select",{id:"chatModel",name:"chatModel",disabled:!!i,children:l.filter(x=>(f==null?void 0:f.indexOf(x.id))<0).map((x,L)=>O.jsxs("option",{value:x.id,children:[x.provider," - ",x.name]},L))}),O.jsx("br",{}),O.jsx("textarea",{name:"context",disabled:!!i||!t})]}),O.jsx("button",{type:"submit",disabled:!!i||!t,children:"Auto Label"})]}),O.jsx(is,{job:i,clearJob:()=>a(null)})]}),t?O.jsxs("div",{className:"dataset--setup-cluster-labels-list",children:[O.jsxs("label",{children:["View Labels:",O.jsxs("select",{name:"model",value:n,onChange:x=>r(x.target.value),children:[O.jsx("option",{value:"",children:"Default labels"}),f.map((x,L)=>O.jsx("option",{value:x,children:x},L))]})]}),O.jsx("div",{className:"dataset--setup-labels-list",children:O.jsx(Ao,{data:h.map((x,L)=>({cluster:L,label:x.label,items:x.indices.length}))})})]}):null]})}const Pp="http://localhost:5001/api";X_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,scope:qe.object,umap:qe.object,embedding:qe.string,cluster:qe.object,clusterLabelModel:qe.string,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function X_({dataset:e,scope:t,umap:n,embedding:r,cluster:i,clusterLabelModel:a,onNew:o,onChange:l}){const u=vm();j.useEffect(()=>{e&&fetch(`${Pp}/datasets/${e.id}/scopes`).then(p=>p.json()).then(p=>{const h=p.sort((d,w)=>d.name.localeCompare(w.name));o(h)})},[e,o]);const f=j.useCallback(p=>{if(p.preventDefault(),!n||!i)return;const h=p.target,d=new FormData(h),w={embeddings:r,umap:n.name,cluster:i.cluster_name,cluster_labels:a,label:d.get("label"),description:d.get("description")},x=d.get("action");console.log("action",x),x=="save"&&(w.name=t.name),fetch(`${Pp}/datasets/${e.id}/scopes/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).then(L=>L.json()).then(L=>{const I=L;fetch(`${Pp}/datasets/${e.id}/scopes`).then(v=>v.json()).then(v=>{o(v),l(v.find(b=>b.name==I.name))}),u(`/datasets/${e.id}/setup/${L.name}`)}).catch(L=>{console.error("Error saving scope:",L)})},[e,i,a,n,r,u,o,l]);return O.jsxs("div",{className:"setup-scope",children:[O.jsxs("div",{className:"dataset--setup-save-box-title",children:["Embedding: ",r,O.jsx("br",{}),"Labels: ",a||"Default"]}),O.jsxs("div",{className:"dataset--setup-save-box-boxes",children:[n?O.jsxs("div",{className:"box-item",children:[n.name,O.jsx("img",{src:n.url,alt:n.name})]}):O.jsx("div",{className:"empty-box"}),i?O.jsxs("div",{className:"box-item",children:[i.cluster_name,O.jsx("img",{src:i.url,alt:i.name})]}):O.jsx("div",{className:"empty-box"})]}),O.jsx("div",{className:"dataset--setup-save-box-nav",children:O.jsxs("form",{onSubmit:f,children:[O.jsxs("label",{children:["Label:",O.jsx("input",{type:"text",name:"label",defaultValue:t?t.label:""})]}),O.jsxs("label",{children:["Description:",O.jsx("input",{type:"text",name:"description",defaultValue:t?t.description:""})]}),O.jsx("input",{type:"hidden",name:"action",value:""}),t?O.jsxs("div",{className:"previous-scope",children:[O.jsx("h4",{children:"Previous Scope Settings"}),"Embedding: ",t.embeddings,O.jsx("br",{}),"Umap: ",t.umap,O.jsx("br",{}),"Cluster: ",t.cluster,O.jsx("br",{}),"Labels: ",t.cluster_labels||"Default",O.jsx("br",{})]}):null,t?O.jsxs("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="save"},children:["Overwrite ",t.name]}):null,O.jsx("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="new"},children:"New scope"})]})})]})}const mR="_stage_lm7gt_1",hR="_content_lm7gt_13",pR="_complete_lm7gt_17",vR="_active_lm7gt_28",qf={stage:mR,content:hR,complete:pR,active:vR};function fu({active:e,complete:t,title:n,children:r}){return O.jsxs("div",{className:`${qf.stage} ${e?qf.active:""} ${t?qf.complete:""}`,children:[O.jsx("h3",{children:n}),O.jsx("div",{className:qf.content,children:r})]})}const gR="http://localhost:5001/api";Y_.propTypes={dataset:qe.object.isRequired,indices:qe.array.isRequired,distances:qe.array,maxRows:qe.number,tagset:qe.object,onHover:qe.func,onClick:qe.func,onTagset:qe.func};function Y_({dataset:e,indices:t,distances:n=[],maxRows:r,tagset:i,onHover:a,onClick:o,onTagset:l}){const[u,f]=j.useState([]),p=j.useCallback(h=>{e&&fetch(`${gR}/indexed?dataset=${e.id}&indices=${JSON.stringify(h)}`).then(d=>d.json()).then(d=>{let w=d.map((x,L)=>{let I={index:h[L],...x};return n&&n.length&&(I.distance=n[L]),I});f(w)})},[e,f,n]);return j.useEffect(()=>{t&&t.length&&p(t)},[t,p]),O.jsx("div",{children:O.jsx(Ao,{data:u,tagset:i,datasetId:e==null?void 0:e.id,maxRows:r,onTagset:l,onHover:a,onClick:o})})}const yR="http://localhost:5001/api";Q_.propTypes={dataset:qe.object.isRequired,umap:qe.object,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onSelect:qe.func};function Q_({dataset:e,umap:t,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l}){const[u,f]=j.useState([]);return j.useEffect(()=>{t?fetch(`${yR}/datasets/${e.id}/umaps/${t.name}/points`).then(p=>p.json()).then(p=>{f(p.map(h=>[h.x,h.y]))}):f([])},[e,t]),O.jsx("div",{style:{width:`${n}px`,height:`${r}px`},children:O.jsx(Zv,{points:u,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l})})}function B1(){const e="http://localhost:5001/api",[t,n]=j.useState(null),{dataset:r,scope:i}=l_();vm();const a=500,o=500;j.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then($e=>$e.json()).then($e=>n($e))},[r]);const l=j.useMemo(()=>t?t.text_column||t.columns[0]:"",[t]),u=j.useCallback($e=>{const lt=$e.target.value;console.log("setting column",lt),fetch(`${e}/datasets/${r}/meta/update?key=text_column&value=${lt}`).then(xt=>xt.json()).then(xt=>{n(xt)})},[r]),[f,p]=j.useState([]),[h,d]=j.useState(f[0]);j.useEffect(()=>{f!=null&&f.length&&!h&&d(f[0])},[f,h]);const[w,x]=j.useState([]),[L,I]=j.useState(null),[v,b]=j.useState(null);j.useEffect(()=>{if(w.length){const $e=w.filter(xt=>xt.embeddings==h),lt=$e.find(xt=>xt.name==v);I(v&&lt?lt:$e[0])}},[v,w,h]);const[C,H]=j.useState([]),[q,ie]=j.useState(null),[we,se]=j.useState(null);j.useEffect(()=>{if(C.length&&L){const $e=C.filter(xt=>xt.umap_name==L.name),lt=$e.find(xt=>xt.cluster_name==we);ie(we&&lt?lt:$e[0])}else ie(null)},[we,C,L]);const[at,Ve]=j.useState(null),[Se,Ke]=j.useState([]),[Qe,ze]=j.useState(null);j.useEffect(()=>{if(i&&(Se!=null&&Se.length)){const $e=Se.find(lt=>lt.name==i);$e&&(ze($e),d($e.embeddings),b($e.umap),se($e.cluster),Ve($e.cluster_labels))}else ze(null)},[i,Se]);const[Pt,mt]=j.useState([]),ht=j.useCallback($e=>{mt($e)},[mt]),[pe,We]=j.useState({}),[Le,Ee]=j.useState(1);return j.useEffect(()=>{Ee(h?L?q?at?Qe?6:5:4:3:2:1),console.log("sup",Qe,at)},[h,L,q,at,Qe]),t?O.jsxs("div",{className:"dataset--setup",children:[O.jsxs("div",{className:"dataset--setup-summary",children:[O.jsxs("div",{className:"dataset--setup-info",children:[O.jsx("h3",{children:r}),O.jsxs("div",{className:"dataset--setup-info-content",children:["[ ",t.length," rows ] Columns: ",t.columns.join(", "),O.jsxs("div",{className:"dataset--details-text-column",children:["Set Text Column:",O.jsx("select",{value:l,onChange:u,children:t.columns.map(($e,lt)=>O.jsx("option",{value:$e,children:$e},lt))})]})]})]}),Qe?O.jsxs("a",{href:`/datasets/${t==null?void 0:t.id}/explore/${Qe.name}`,children:["Explore ",Qe.label," (",Qe.name,")"]}):null]}),O.jsxs("div",{className:"dataset--setup-layout",children:[O.jsxs("div",{className:"dataset--setup-left-column",children:[O.jsx(fu,{active:Le==1,complete:Le>1,title:"1. Embeddings",children:O.jsx(U_,{dataset:t,textColumn:l,embedding:h,umaps:w,clusters:C,onNew:p,onChange:d})}),O.jsx(fu,{active:Le==2,complete:Le>2,title:"2. UMAP",children:O.jsx(V_,{dataset:t,umap:L,embedding:h,clusters:C,onNew:x,onChange:I})}),O.jsx(fu,{active:Le==3,complete:Le>3,title:"3. Clusters",children:O.jsx(H_,{dataset:t,cluster:q,umap:L,onNew:H,onChange:ie})}),O.jsx(fu,{active:Le==4,complete:Le>4,title:"4. Auto-Label Clusters",children:O.jsx(W_,{dataset:t,cluster:q,selectedModel:at,onChange:Ve})}),O.jsx(fu,{active:Le==5,complete:Le>5,title:"5. Save Scope",children:O.jsx(X_,{dataset:t,scope:Qe,embedding:h,umap:L,cluster:q,clusterLabelModel:at,onNew:Ke,onChange:ze})})]}),O.jsxs("div",{className:"dataset--setup-right-column",children:[O.jsx("div",{className:"dataset--setup-umap",children:O.jsx(Q_,{dataset:t,umap:L,width:a,height:o,onScatter:We,onSelect:ht})}),O.jsxs("div",{className:"dataset--selected",children:[O.jsxs("span",{children:["Points Selected: ",Pt.length," ",Pt.length?null:"(Hold shift and drag an area of the map to select)",Pt.length>0?O.jsx("button",{className:"deselect",onClick:()=>{mt([]),pe==null||pe.select([]),pe==null||pe.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Pt.length>0?O.jsx("div",{className:"dataset--selected-table",children:O.jsx(Y_,{dataset:t,indices:Pt,datasetId:r,maxRows:150})}):null]})]})]})]}):O.jsx("div",{children:"Loading..."})}const xR=()=>O.jsx("nav",{children:O.jsx("ul",{children:O.jsx("li",{children:O.jsx(L0,{to:"/",children:"Latent Scope"})})})});var ER={VITE_API_URL:"http://localhost:5001/api",BASE_URL:"/latent-scope/",MODE:"read_only",DEV:!1,PROD:!0,SSR:!1};function _R(){const e=ER;return O.jsxs(qb,{basename:e.BASE_NAME,children:[O.jsx(xR,{}),O.jsx("div",{className:"page",children:O.jsxs(Hb,{children:[O.jsx(vu,{path:"/",element:O.jsx(sA,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup/:scope",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/explore/:scope",element:O.jsx(dR,{})})]})})]})}kp.createRoot(document.getElementById("root")).render(O.jsx(Q1.StrictMode,{children:O.jsx(_R,{})}));
