function p_(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C4={exports:{}},Oh={},b4={exports:{}},fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=Symbol.for("react.element"),g_=Symbol.for("react.portal"),v_=Symbol.for("react.fragment"),y_=Symbol.for("react.strict_mode"),x_=Symbol.for("react.profiler"),__=Symbol.for("react.provider"),w_=Symbol.for("react.context"),S_=Symbol.for("react.forward_ref"),E_=Symbol.for("react.suspense"),C_=Symbol.for("react.memo"),b_=Symbol.for("react.lazy"),My=Symbol.iterator;function A_(e){return e===null||typeof e!="object"?null:(e=My&&e[My]||e["@@iterator"],typeof e=="function"?e:null)}var A4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T4=Object.assign,R4={};function lu(e,t,n){this.props=e,this.context=t,this.refs=R4,this.updater=n||A4}lu.prototype.isReactComponent={};lu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function L4(){}L4.prototype=lu.prototype;function gv(e,t,n){this.props=e,this.context=t,this.refs=R4,this.updater=n||A4}var vv=gv.prototype=new L4;vv.constructor=gv;T4(vv,lu.prototype);vv.isPureReactComponent=!0;var Ny=Array.isArray,P4=Object.prototype.hasOwnProperty,yv={current:null},O4={key:!0,ref:!0,__self:!0,__source:!0};function k4(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)P4.call(t,r)&&!O4.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var s=Array(l),u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ff,type:e,key:o,ref:a,props:i,_owner:yv.current}}function T_(e,t){return{$$typeof:ff,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xv(e){return typeof e=="object"&&e!==null&&e.$$typeof===ff}function R_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Iy=/\/+/g;function Mp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?R_(""+e.key):t.toString(36)}function x0(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ff:case g_:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Mp(a,0):r,Ny(i)?(n="",e!=null&&(n=e.replace(Iy,"$&/")+"/"),x0(i,t,n,"",function(u){return u})):i!=null&&(xv(i)&&(i=T_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Iy,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Ny(e))for(var l=0;l<e.length;l++){o=e[l];var s=r+Mp(o,l);a+=x0(o,t,n,s,i)}else if(s=A_(e),typeof s=="function")for(e=s.call(e),l=0;!(o=e.next()).done;)o=o.value,s=r+Mp(o,l++),a+=x0(o,t,n,s,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function jd(e,t,n){if(e==null)return e;var r=[],i=0;return x0(e,r,"","",function(o){return t.call(n,o,i++)}),r}function L_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Hr={current:null},_0={transition:null},P_={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:_0,ReactCurrentOwner:yv};fn.Children={map:jd,forEach:function(e,t,n){jd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jd(e,function(){t++}),t},toArray:function(e){return jd(e,function(t){return t})||[]},only:function(e){if(!xv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fn.Component=lu;fn.Fragment=v_;fn.Profiler=x_;fn.PureComponent=gv;fn.StrictMode=y_;fn.Suspense=E_;fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P_;fn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=T4({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=yv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(s in t)P4.call(t,s)&&!O4.hasOwnProperty(s)&&(r[s]=t[s]===void 0&&l!==void 0?l[s]:t[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){l=Array(s);for(var u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ff,type:e.type,key:i,ref:o,props:r,_owner:a}};fn.createContext=function(e){return e={$$typeof:w_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:__,_context:e},e.Consumer=e};fn.createElement=k4;fn.createFactory=function(e){var t=k4.bind(null,e);return t.type=e,t};fn.createRef=function(){return{current:null}};fn.forwardRef=function(e){return{$$typeof:S_,render:e}};fn.isValidElement=xv;fn.lazy=function(e){return{$$typeof:b_,_payload:{_status:-1,_result:e},_init:L_}};fn.memo=function(e,t){return{$$typeof:C_,type:e,compare:t===void 0?null:t}};fn.startTransition=function(e){var t=_0.transition;_0.transition={};try{e()}finally{_0.transition=t}};fn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};fn.useCallback=function(e,t){return Hr.current.useCallback(e,t)};fn.useContext=function(e){return Hr.current.useContext(e)};fn.useDebugValue=function(){};fn.useDeferredValue=function(e){return Hr.current.useDeferredValue(e)};fn.useEffect=function(e,t){return Hr.current.useEffect(e,t)};fn.useId=function(){return Hr.current.useId()};fn.useImperativeHandle=function(e,t,n){return Hr.current.useImperativeHandle(e,t,n)};fn.useInsertionEffect=function(e,t){return Hr.current.useInsertionEffect(e,t)};fn.useLayoutEffect=function(e,t){return Hr.current.useLayoutEffect(e,t)};fn.useMemo=function(e,t){return Hr.current.useMemo(e,t)};fn.useReducer=function(e,t,n){return Hr.current.useReducer(e,t,n)};fn.useRef=function(e){return Hr.current.useRef(e)};fn.useState=function(e){return Hr.current.useState(e)};fn.useSyncExternalStore=function(e,t,n){return Hr.current.useSyncExternalStore(e,t,n)};fn.useTransition=function(){return Hr.current.useTransition()};fn.version="18.2.0";b4.exports=fn;var T=b4.exports;const $o=cf(T),O_=p_({__proto__:null,default:$o},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=T,M_=Symbol.for("react.element"),N_=Symbol.for("react.fragment"),I_=Object.prototype.hasOwnProperty,F_=k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D_={key:!0,ref:!0,__self:!0,__source:!0};function M4(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)I_.call(t,r)&&!D_.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:M_,type:e,key:o,ref:a,props:i,_owner:F_.current}}Oh.Fragment=N_;Oh.jsx=M4;Oh.jsxs=M4;C4.exports=Oh;var b=C4.exports,zm={},N4={exports:{}},Ei={},I4={exports:{}},F4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,ue){var ce=ee.length;ee.push(ue);e:for(;0<ce;){var xe=ce-1>>>1,Qe=ee[xe];if(0<i(Qe,ue))ee[xe]=ue,ee[ce]=Qe,ce=xe;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ue=ee[0],ce=ee.pop();if(ce!==ue){ee[0]=ce;e:for(var xe=0,Qe=ee.length,st=Qe>>>1;xe<st;){var wt=2*(xe+1)-1,At=ee[wt],$t=wt+1,ct=ee[$t];if(0>i(At,ce))$t<Qe&&0>i(ct,At)?(ee[xe]=ct,ee[$t]=ce,xe=$t):(ee[xe]=At,ee[wt]=ce,xe=wt);else if($t<Qe&&0>i(ct,ce))ee[xe]=ct,ee[$t]=ce,xe=$t;else break e}}return ue}function i(ee,ue){var ce=ee.sortIndex-ue.sortIndex;return ce!==0?ce:ee.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var s=[],u=[],f=1,d=null,c=3,p=!1,g=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(ee){for(var ue=n(u);ue!==null;){if(ue.callback===null)r(u);else if(ue.startTime<=ee)r(u),ue.sortIndex=ue.expirationTime,t(s,ue);else break;ue=n(u)}}function O(ee){if(y=!1,x(ee),!g)if(n(s)!==null)g=!0,at(I);else{var ue=n(u);ue!==null&&qe(O,ue.startTime-ee)}}function I(ee,ue){g=!1,y&&(y=!1,v(K),K=-1),p=!0;var ce=c;try{for(x(ue),d=n(s);d!==null&&(!(d.expirationTime>ue)||ee&&!Re());){var xe=d.callback;if(typeof xe=="function"){d.callback=null,c=d.priorityLevel;var Qe=xe(d.expirationTime<=ue);ue=e.unstable_now(),typeof Qe=="function"?d.callback=Qe:d===n(s)&&r(s),x(ue)}else r(s);d=n(s)}if(d!==null)var st=!0;else{var wt=n(u);wt!==null&&qe(O,wt.startTime-ue),st=!1}return st}finally{d=null,c=ce,p=!1}}var U=!1,te=null,K=-1,$e=5,Ee=-1;function Re(){return!(e.unstable_now()-Ee<$e)}function Fe(){if(te!==null){var ee=e.unstable_now();Ee=ee;var ue=!0;try{ue=te(!0,ee)}finally{ue?Ve():(U=!1,te=null)}}else U=!1}var Ve;if(typeof _=="function")Ve=function(){_(Fe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Rt=Ce.port2;Ce.port1.onmessage=Fe,Ve=function(){Rt.postMessage(null)}}else Ve=function(){S(Fe,0)};function at(ee){te=ee,U||(U=!0,Ve())}function qe(ee,ue){K=S(function(){ee(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,at(I))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$e=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return n(s)},e.unstable_next=function(ee){switch(c){case 1:case 2:case 3:var ue=3;break;default:ue=c}var ce=c;c=ue;try{return ee()}finally{c=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,ue){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ce=c;c=ee;try{return ue()}finally{c=ce}},e.unstable_scheduleCallback=function(ee,ue,ce){var xe=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?xe+ce:xe):ce=xe,ee){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ce+Qe,ee={id:f++,callback:ue,priorityLevel:ee,startTime:ce,expirationTime:Qe,sortIndex:-1},ce>xe?(ee.sortIndex=ce,t(u,ee),n(s)===null&&ee===n(u)&&(y?(v(K),K=-1):y=!0,qe(O,ce-xe))):(ee.sortIndex=Qe,t(s,ee),g||p||(g=!0,at(I))),ee},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(ee){var ue=c;return function(){var ce=c;c=ue;try{return ee.apply(this,arguments)}finally{c=ce}}}})(F4);I4.exports=F4;var $_=I4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4=T,_i=$_;function ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $4=new Set,Nc={};function Bl(e,t){Xs(e,t),Xs(e+"Capture",t)}function Xs(e,t){for(Nc[e]=t,e=0;e<t.length;e++)$4.add(t[e])}var Go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gm=Object.prototype.hasOwnProperty,j_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fy={},Dy={};function B_(e){return Gm.call(Dy,e)?!0:Gm.call(Fy,e)?!1:j_.test(e)?Dy[e]=!0:(Fy[e]=!0,!1)}function z_(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G_(e,t,n,r){if(t===null||typeof t>"u"||z_(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wr(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ar[e]=new Wr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ar[t]=new Wr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ar[e]=new Wr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ar[e]=new Wr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ar[e]=new Wr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ar[e]=new Wr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ar[e]=new Wr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ar[e]=new Wr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ar[e]=new Wr(e,5,!1,e.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function wv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_v,wv);Ar[t]=new Wr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_v,wv);Ar[t]=new Wr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_v,wv);Ar[t]=new Wr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ar[e]=new Wr(e,1,!1,e.toLowerCase(),null,!1,!1)});Ar.xlinkHref=new Wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ar[e]=new Wr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sv(e,t,n,r){var i=Ar.hasOwnProperty(t)?Ar[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G_(t,n,i,r)&&(n=null),r||i===null?B_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var qo=D4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bd=Symbol.for("react.element"),Es=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),j4=Symbol.for("react.provider"),B4=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),Um=Symbol.for("react.suspense"),Hm=Symbol.for("react.suspense_list"),bv=Symbol.for("react.memo"),ya=Symbol.for("react.lazy"),z4=Symbol.for("react.offscreen"),$y=Symbol.iterator;function nc(e){return e===null||typeof e!="object"?null:(e=$y&&e[$y]||e["@@iterator"],typeof e=="function"?e:null)}var Un=Object.assign,Np;function mc(e){if(Np===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Np=t&&t[1]||""}return`
`+Np+e}var Ip=!1;function Fp(e,t){if(!e||Ip)return"";Ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var s=`
`+i[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}while(1<=a&&0<=l);break}}}finally{Ip=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mc(e):""}function V_(e){switch(e.tag){case 5:return mc(e.type);case 16:return mc("Lazy");case 13:return mc("Suspense");case 19:return mc("SuspenseList");case 0:case 2:case 15:return e=Fp(e.type,!1),e;case 11:return e=Fp(e.type.render,!1),e;case 1:return e=Fp(e.type,!0),e;default:return""}}function Wm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cs:return"Fragment";case Es:return"Portal";case Vm:return"Profiler";case Ev:return"StrictMode";case Um:return"Suspense";case Hm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B4:return(e.displayName||"Context")+".Consumer";case j4:return(e._context.displayName||"Context")+".Provider";case Cv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bv:return t=e.displayName||null,t!==null?t:Wm(e.type)||"Memo";case ya:t=e._payload,e=e._init;try{return Wm(e(t))}catch{}}return null}function U_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(t);case 8:return t===Ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function G4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function H_(e){var t=G4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zd(e){e._valueTracker||(e._valueTracker=H_(e))}function V4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G4(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function j0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xm(e,t){var n=t.checked;return Un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U4(e,t){t=t.checked,t!=null&&Sv(e,"checked",t,!1)}function qm(e,t){U4(e,t);var n=Fa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ym(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ym(e,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function By(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ym(e,t,n){(t!=="number"||j0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gc=Array.isArray;function Ds(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Km(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ze(91));return Un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ze(92));if(gc(n)){if(1<n.length)throw Error(ze(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fa(n)}}function H4(e,t){var n=Fa(t.value),r=Fa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Gy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gd,X4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gd=Gd||document.createElement("div"),Gd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ic(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W_=["Webkit","ms","Moz","O"];Object.keys(wc).forEach(function(e){W_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wc[t]=wc[e]})});function q4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wc.hasOwnProperty(e)&&wc[e]?(""+t).trim():t+"px"}function Y4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q4(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var X_=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zm(e,t){if(t){if(X_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ze(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ze(62))}}function Jm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eg=null;function Av(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tg=null,$s=null,js=null;function Vy(e){if(e=pf(e)){if(typeof tg!="function")throw Error(ze(280));var t=e.stateNode;t&&(t=Fh(t),tg(e.stateNode,e.type,t))}}function K4(e){$s?js?js.push(e):js=[e]:$s=e}function Q4(){if($s){var e=$s,t=js;if(js=$s=null,Vy(e),t)for(e=0;e<t.length;e++)Vy(t[e])}}function Z4(e,t){return e(t)}function J4(){}var Dp=!1;function e5(e,t,n){if(Dp)return e(t,n);Dp=!0;try{return Z4(e,t,n)}finally{Dp=!1,($s!==null||js!==null)&&(J4(),Q4())}}function Fc(e,t){var n=e.stateNode;if(n===null)return null;var r=Fh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ze(231,t,typeof n));return n}var ng=!1;if(Go)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){ng=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{ng=!1}function q_(e,t,n,r,i,o,a,l,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Sc=!1,B0=null,z0=!1,rg=null,Y_={onError:function(e){Sc=!0,B0=e}};function K_(e,t,n,r,i,o,a,l,s){Sc=!1,B0=null,q_.apply(Y_,arguments)}function Q_(e,t,n,r,i,o,a,l,s){if(K_.apply(this,arguments),Sc){if(Sc){var u=B0;Sc=!1,B0=null}else throw Error(ze(198));z0||(z0=!0,rg=u)}}function zl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function t5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uy(e){if(zl(e)!==e)throw Error(ze(188))}function Z_(e){var t=e.alternate;if(!t){if(t=zl(e),t===null)throw Error(ze(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Uy(i),e;if(o===r)return Uy(i),t;o=o.sibling}throw Error(ze(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(ze(189))}}if(n.alternate!==r)throw Error(ze(190))}if(n.tag!==3)throw Error(ze(188));return n.stateNode.current===n?e:t}function n5(e){return e=Z_(e),e!==null?r5(e):null}function r5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=r5(e);if(t!==null)return t;e=e.sibling}return null}var i5=_i.unstable_scheduleCallback,Hy=_i.unstable_cancelCallback,J_=_i.unstable_shouldYield,e7=_i.unstable_requestPaint,ir=_i.unstable_now,t7=_i.unstable_getCurrentPriorityLevel,Tv=_i.unstable_ImmediatePriority,o5=_i.unstable_UserBlockingPriority,G0=_i.unstable_NormalPriority,n7=_i.unstable_LowPriority,a5=_i.unstable_IdlePriority,kh=null,go=null;function r7(e){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(kh,e,void 0,(e.current.flags&128)===128)}catch{}}var Yi=Math.clz32?Math.clz32:a7,i7=Math.log,o7=Math.LN2;function a7(e){return e>>>=0,e===0?32:31-(i7(e)/o7|0)|0}var Vd=64,Ud=4194304;function vc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function V0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=vc(l):(o&=a,o!==0&&(r=vc(o)))}else a=n&~i,a!==0?r=vc(a):o!==0&&(r=vc(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yi(t),i=1<<n,r|=e[n],t&=~i;return r}function l7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s7(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Yi(o),l=1<<a,s=i[a];s===-1?(!(l&n)||l&r)&&(i[a]=l7(l,t)):s<=t&&(e.expiredLanes|=l),o&=~l}}function ig(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function l5(){var e=Vd;return Vd<<=1,!(Vd&4194240)&&(Vd=64),e}function $p(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function df(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yi(t),e[t]=n}function u7(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Yi(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Rv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _n=0;function s5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var u5,Lv,c5,f5,d5,og=!1,Hd=[],Ta=null,Ra=null,La=null,Dc=new Map,$c=new Map,_a=[],c7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wy(e,t){switch(e){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Dc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(t.pointerId)}}function ic(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=pf(t),t!==null&&Lv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function f7(e,t,n,r,i){switch(t){case"focusin":return Ta=ic(Ta,e,t,n,r,i),!0;case"dragenter":return Ra=ic(Ra,e,t,n,r,i),!0;case"mouseover":return La=ic(La,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dc.set(o,ic(Dc.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,$c.set(o,ic($c.get(o)||null,e,t,n,r,i)),!0}return!1}function h5(e){var t=xl(e.target);if(t!==null){var n=zl(t);if(n!==null){if(t=n.tag,t===13){if(t=t5(n),t!==null){e.blockedOn=t,d5(e.priority,function(){c5(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function w0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ag(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);eg=r,n.target.dispatchEvent(r),eg=null}else return t=pf(n),t!==null&&Lv(t),e.blockedOn=n,!1;t.shift()}return!0}function Xy(e,t,n){w0(e)&&n.delete(t)}function d7(){og=!1,Ta!==null&&w0(Ta)&&(Ta=null),Ra!==null&&w0(Ra)&&(Ra=null),La!==null&&w0(La)&&(La=null),Dc.forEach(Xy),$c.forEach(Xy)}function oc(e,t){e.blockedOn===t&&(e.blockedOn=null,og||(og=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,d7)))}function jc(e){function t(i){return oc(i,e)}if(0<Hd.length){oc(Hd[0],e);for(var n=1;n<Hd.length;n++){var r=Hd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ta!==null&&oc(Ta,e),Ra!==null&&oc(Ra,e),La!==null&&oc(La,e),Dc.forEach(t),$c.forEach(t),n=0;n<_a.length;n++)r=_a[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<_a.length&&(n=_a[0],n.blockedOn===null);)h5(n),n.blockedOn===null&&_a.shift()}var Bs=qo.ReactCurrentBatchConfig,U0=!0;function h7(e,t,n,r){var i=_n,o=Bs.transition;Bs.transition=null;try{_n=1,Pv(e,t,n,r)}finally{_n=i,Bs.transition=o}}function p7(e,t,n,r){var i=_n,o=Bs.transition;Bs.transition=null;try{_n=4,Pv(e,t,n,r)}finally{_n=i,Bs.transition=o}}function Pv(e,t,n,r){if(U0){var i=ag(e,t,n,r);if(i===null)qp(e,t,r,H0,n),Wy(e,r);else if(f7(i,e,t,n,r))r.stopPropagation();else if(Wy(e,r),t&4&&-1<c7.indexOf(e)){for(;i!==null;){var o=pf(i);if(o!==null&&u5(o),o=ag(e,t,n,r),o===null&&qp(e,t,r,H0,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else qp(e,t,r,null,n)}}var H0=null;function ag(e,t,n,r){if(H0=null,e=Av(r),e=xl(e),e!==null)if(t=zl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=t5(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return H0=e,null}function p5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t7()){case Tv:return 1;case o5:return 4;case G0:case n7:return 16;case a5:return 536870912;default:return 16}default:return 16}}var Sa=null,Ov=null,S0=null;function m5(){if(S0)return S0;var e,t=Ov,n=t.length,r,i="value"in Sa?Sa.value:Sa.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return S0=i.slice(e,1<r?1-r:void 0)}function E0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wd(){return!0}function qy(){return!1}function Ci(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wd:qy,this.isPropagationStopped=qy,this}return Un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wd)},persist:function(){},isPersistent:Wd}),t}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kv=Ci(su),hf=Un({},su,{view:0,detail:0}),m7=Ci(hf),jp,Bp,ac,Mh=Un({},hf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ac&&(ac&&e.type==="mousemove"?(jp=e.screenX-ac.screenX,Bp=e.screenY-ac.screenY):Bp=jp=0,ac=e),jp)},movementY:function(e){return"movementY"in e?e.movementY:Bp}}),Yy=Ci(Mh),g7=Un({},Mh,{dataTransfer:0}),v7=Ci(g7),y7=Un({},hf,{relatedTarget:0}),zp=Ci(y7),x7=Un({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),_7=Ci(x7),w7=Un({},su,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S7=Ci(w7),E7=Un({},su,{data:0}),Ky=Ci(E7),C7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A7[e])?!!t[e]:!1}function Mv(){return T7}var R7=Un({},hf,{key:function(e){if(e.key){var t=C7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=E0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(e){return e.type==="keypress"?E0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?E0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),L7=Ci(R7),P7=Un({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qy=Ci(P7),O7=Un({},hf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),k7=Ci(O7),M7=Un({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),N7=Ci(M7),I7=Un({},Mh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F7=Ci(I7),D7=[9,13,27,32],Nv=Go&&"CompositionEvent"in window,Ec=null;Go&&"documentMode"in document&&(Ec=document.documentMode);var $7=Go&&"TextEvent"in window&&!Ec,g5=Go&&(!Nv||Ec&&8<Ec&&11>=Ec),Zy=" ",Jy=!1;function v5(e,t){switch(e){case"keyup":return D7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function j7(e,t){switch(e){case"compositionend":return y5(t);case"keypress":return t.which!==32?null:(Jy=!0,Zy);case"textInput":return e=t.data,e===Zy&&Jy?null:e;default:return null}}function B7(e,t){if(bs)return e==="compositionend"||!Nv&&v5(e,t)?(e=m5(),S0=Ov=Sa=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return g5&&t.locale!=="ko"?null:t.data;default:return null}}var z7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!z7[e.type]:t==="textarea"}function x5(e,t,n,r){K4(r),t=W0(t,"onChange"),0<t.length&&(n=new kv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cc=null,Bc=null;function G7(e){P5(e,0)}function Nh(e){var t=Rs(e);if(V4(t))return e}function V7(e,t){if(e==="change")return t}var _5=!1;if(Go){var Gp;if(Go){var Vp="oninput"in document;if(!Vp){var t3=document.createElement("div");t3.setAttribute("oninput","return;"),Vp=typeof t3.oninput=="function"}Gp=Vp}else Gp=!1;_5=Gp&&(!document.documentMode||9<document.documentMode)}function n3(){Cc&&(Cc.detachEvent("onpropertychange",w5),Bc=Cc=null)}function w5(e){if(e.propertyName==="value"&&Nh(Bc)){var t=[];x5(t,Bc,e,Av(e)),e5(G7,t)}}function U7(e,t,n){e==="focusin"?(n3(),Cc=t,Bc=n,Cc.attachEvent("onpropertychange",w5)):e==="focusout"&&n3()}function H7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nh(Bc)}function W7(e,t){if(e==="click")return Nh(t)}function X7(e,t){if(e==="input"||e==="change")return Nh(t)}function q7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zi=typeof Object.is=="function"?Object.is:q7;function zc(e,t){if(Zi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gm.call(t,i)||!Zi(e[i],t[i]))return!1}return!0}function r3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i3(e,t){var n=r3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r3(n)}}function S5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E5(){for(var e=window,t=j0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=j0(e.document)}return t}function Iv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Y7(e){var t=E5(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&S5(n.ownerDocument.documentElement,n)){if(r!==null&&Iv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=i3(n,o);var a=i3(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K7=Go&&"documentMode"in document&&11>=document.documentMode,As=null,lg=null,bc=null,sg=!1;function o3(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sg||As==null||As!==j0(r)||(r=As,"selectionStart"in r&&Iv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bc&&zc(bc,r)||(bc=r,r=W0(lg,"onSelect"),0<r.length&&(t=new kv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=As)))}function Xd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ts={animationend:Xd("Animation","AnimationEnd"),animationiteration:Xd("Animation","AnimationIteration"),animationstart:Xd("Animation","AnimationStart"),transitionend:Xd("Transition","TransitionEnd")},Up={},C5={};Go&&(C5=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Ih(e){if(Up[e])return Up[e];if(!Ts[e])return e;var t=Ts[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in C5)return Up[e]=t[n];return e}var b5=Ih("animationend"),A5=Ih("animationiteration"),T5=Ih("animationstart"),R5=Ih("transitionend"),L5=new Map,a3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ga(e,t){L5.set(e,t),Bl(t,[e])}for(var Hp=0;Hp<a3.length;Hp++){var Wp=a3[Hp],Q7=Wp.toLowerCase(),Z7=Wp[0].toUpperCase()+Wp.slice(1);Ga(Q7,"on"+Z7)}Ga(b5,"onAnimationEnd");Ga(A5,"onAnimationIteration");Ga(T5,"onAnimationStart");Ga("dblclick","onDoubleClick");Ga("focusin","onFocus");Ga("focusout","onBlur");Ga(R5,"onTransitionEnd");Xs("onMouseEnter",["mouseout","mouseover"]);Xs("onMouseLeave",["mouseout","mouseover"]);Xs("onPointerEnter",["pointerout","pointerover"]);Xs("onPointerLeave",["pointerout","pointerover"]);Bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J7=new Set("cancel close invalid load scroll toggle".split(" ").concat(yc));function l3(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Q_(r,t,void 0,e),e.currentTarget=null}function P5(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==o&&i.isPropagationStopped())break e;l3(i,l,u),o=s}else for(a=0;a<r.length;a++){if(l=r[a],s=l.instance,u=l.currentTarget,l=l.listener,s!==o&&i.isPropagationStopped())break e;l3(i,l,u),o=s}}}if(z0)throw e=rg,z0=!1,rg=null,e}function On(e,t){var n=t[hg];n===void 0&&(n=t[hg]=new Set);var r=e+"__bubble";n.has(r)||(O5(t,e,2,!1),n.add(r))}function Xp(e,t,n){var r=0;t&&(r|=4),O5(n,e,r,t)}var qd="_reactListening"+Math.random().toString(36).slice(2);function Gc(e){if(!e[qd]){e[qd]=!0,$4.forEach(function(n){n!=="selectionchange"&&(J7.has(n)||Xp(n,!1,e),Xp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qd]||(t[qd]=!0,Xp("selectionchange",!1,t))}}function O5(e,t,n,r){switch(p5(t)){case 1:var i=h7;break;case 4:i=p7;break;default:i=Pv}n=i.bind(null,t,n,e),i=void 0,!ng||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qp(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var s=a.tag;if((s===3||s===4)&&(s=a.stateNode.containerInfo,s===i||s.nodeType===8&&s.parentNode===i))return;a=a.return}for(;l!==null;){if(a=xl(l),a===null)return;if(s=a.tag,s===5||s===6){r=o=a;continue e}l=l.parentNode}}r=r.return}e5(function(){var u=o,f=Av(n),d=[];e:{var c=L5.get(e);if(c!==void 0){var p=kv,g=e;switch(e){case"keypress":if(E0(n)===0)break e;case"keydown":case"keyup":p=L7;break;case"focusin":g="focus",p=zp;break;case"focusout":g="blur",p=zp;break;case"beforeblur":case"afterblur":p=zp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=v7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=k7;break;case b5:case A5:case T5:p=_7;break;case R5:p=N7;break;case"scroll":p=m7;break;case"wheel":p=F7;break;case"copy":case"cut":case"paste":p=S7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qy}var y=(t&4)!==0,S=!y&&e==="scroll",v=y?c!==null?c+"Capture":null:c;y=[];for(var _=u,x;_!==null;){x=_;var O=x.stateNode;if(x.tag===5&&O!==null&&(x=O,v!==null&&(O=Fc(_,v),O!=null&&y.push(Vc(_,O,x)))),S)break;_=_.return}0<y.length&&(c=new p(c,g,null,n,f),d.push({event:c,listeners:y}))}}if(!(t&7)){e:{if(c=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",c&&n!==eg&&(g=n.relatedTarget||n.fromElement)&&(xl(g)||g[Vo]))break e;if((p||c)&&(c=f.window===f?f:(c=f.ownerDocument)?c.defaultView||c.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?xl(g):null,g!==null&&(S=zl(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=Yy,O="onMouseLeave",v="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(y=Qy,O="onPointerLeave",v="onPointerEnter",_="pointer"),S=p==null?c:Rs(p),x=g==null?c:Rs(g),c=new y(O,_+"leave",p,n,f),c.target=S,c.relatedTarget=x,O=null,xl(f)===u&&(y=new y(v,_+"enter",g,n,f),y.target=x,y.relatedTarget=S,O=y),S=O,p&&g)t:{for(y=p,v=g,_=0,x=y;x;x=vs(x))_++;for(x=0,O=v;O;O=vs(O))x++;for(;0<_-x;)y=vs(y),_--;for(;0<x-_;)v=vs(v),x--;for(;_--;){if(y===v||v!==null&&y===v.alternate)break t;y=vs(y),v=vs(v)}y=null}else y=null;p!==null&&s3(d,c,p,y,!1),g!==null&&S!==null&&s3(d,S,g,y,!0)}}e:{if(c=u?Rs(u):window,p=c.nodeName&&c.nodeName.toLowerCase(),p==="select"||p==="input"&&c.type==="file")var I=V7;else if(e3(c))if(_5)I=X7;else{I=H7;var U=U7}else(p=c.nodeName)&&p.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(I=W7);if(I&&(I=I(e,u))){x5(d,I,n,f);break e}U&&U(e,c,u),e==="focusout"&&(U=c._wrapperState)&&U.controlled&&c.type==="number"&&Ym(c,"number",c.value)}switch(U=u?Rs(u):window,e){case"focusin":(e3(U)||U.contentEditable==="true")&&(As=U,lg=u,bc=null);break;case"focusout":bc=lg=As=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,o3(d,n,f);break;case"selectionchange":if(K7)break;case"keydown":case"keyup":o3(d,n,f)}var te;if(Nv)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else bs?v5(e,n)&&(K="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(g5&&n.locale!=="ko"&&(bs||K!=="onCompositionStart"?K==="onCompositionEnd"&&bs&&(te=m5()):(Sa=f,Ov="value"in Sa?Sa.value:Sa.textContent,bs=!0)),U=W0(u,K),0<U.length&&(K=new Ky(K,e,null,n,f),d.push({event:K,listeners:U}),te?K.data=te:(te=y5(n),te!==null&&(K.data=te)))),(te=$7?j7(e,n):B7(e,n))&&(u=W0(u,"onBeforeInput"),0<u.length&&(f=new Ky("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=te))}P5(d,t)})}function Vc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function W0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Fc(e,n),o!=null&&r.unshift(Vc(e,o,i)),o=Fc(e,t),o!=null&&r.push(Vc(e,o,i))),e=e.return}return r}function vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function s3(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,s=l.alternate,u=l.stateNode;if(s!==null&&s===r)break;l.tag===5&&u!==null&&(l=u,i?(s=Fc(n,o),s!=null&&a.unshift(Vc(n,s,l))):i||(s=Fc(n,o),s!=null&&a.push(Vc(n,s,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ew=/\r\n?/g,tw=/\u0000|\uFFFD/g;function u3(e){return(typeof e=="string"?e:""+e).replace(ew,`
`).replace(tw,"")}function Yd(e,t,n){if(t=u3(t),u3(e)!==t&&n)throw Error(ze(425))}function X0(){}var ug=null,cg=null;function fg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,nw=typeof clearTimeout=="function"?clearTimeout:void 0,c3=typeof Promise=="function"?Promise:void 0,rw=typeof queueMicrotask=="function"?queueMicrotask:typeof c3<"u"?function(e){return c3.resolve(null).then(e).catch(iw)}:dg;function iw(e){setTimeout(function(){throw e})}function Yp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),jc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jc(t)}function Pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function f3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var uu=Math.random().toString(36).slice(2),mo="__reactFiber$"+uu,Uc="__reactProps$"+uu,Vo="__reactContainer$"+uu,hg="__reactEvents$"+uu,ow="__reactListeners$"+uu,aw="__reactHandles$"+uu;function xl(e){var t=e[mo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vo]||n[mo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=f3(e);e!==null;){if(n=e[mo])return n;e=f3(e)}return t}e=n,n=e.parentNode}return null}function pf(e){return e=e[mo]||e[Vo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ze(33))}function Fh(e){return e[Uc]||null}var pg=[],Ls=-1;function Va(e){return{current:e}}function kn(e){0>Ls||(e.current=pg[Ls],pg[Ls]=null,Ls--)}function An(e,t){Ls++,pg[Ls]=e.current,e.current=t}var Da={},Ir=Va(Da),ti=Va(!1),Rl=Da;function qs(e,t){var n=e.type.contextTypes;if(!n)return Da;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ni(e){return e=e.childContextTypes,e!=null}function q0(){kn(ti),kn(Ir)}function d3(e,t,n){if(Ir.current!==Da)throw Error(ze(168));An(Ir,t),An(ti,n)}function k5(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ze(108,U_(e)||"Unknown",i));return Un({},n,r)}function Y0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Da,Rl=Ir.current,An(Ir,e),An(ti,ti.current),!0}function h3(e,t,n){var r=e.stateNode;if(!r)throw Error(ze(169));n?(e=k5(e,t,Rl),r.__reactInternalMemoizedMergedChildContext=e,kn(ti),kn(Ir),An(Ir,e)):kn(ti),An(ti,n)}var Do=null,Dh=!1,Kp=!1;function M5(e){Do===null?Do=[e]:Do.push(e)}function lw(e){Dh=!0,M5(e)}function Ua(){if(!Kp&&Do!==null){Kp=!0;var e=0,t=_n;try{var n=Do;for(_n=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Do=null,Dh=!1}catch(i){throw Do!==null&&(Do=Do.slice(e+1)),i5(Tv,Ua),i}finally{_n=t,Kp=!1}}return null}var Ps=[],Os=0,K0=null,Q0=0,Oi=[],ki=0,Ll=null,jo=1,Bo="";function ml(e,t){Ps[Os++]=Q0,Ps[Os++]=K0,K0=e,Q0=t}function N5(e,t,n){Oi[ki++]=jo,Oi[ki++]=Bo,Oi[ki++]=Ll,Ll=e;var r=jo;e=Bo;var i=32-Yi(r)-1;r&=~(1<<i),n+=1;var o=32-Yi(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,jo=1<<32-Yi(t)+i|n<<i|r,Bo=o+e}else jo=1<<o|n<<i|r,Bo=e}function Fv(e){e.return!==null&&(ml(e,1),N5(e,1,0))}function Dv(e){for(;e===K0;)K0=Ps[--Os],Ps[Os]=null,Q0=Ps[--Os],Ps[Os]=null;for(;e===Ll;)Ll=Oi[--ki],Oi[ki]=null,Bo=Oi[--ki],Oi[ki]=null,jo=Oi[--ki],Oi[ki]=null}var yi=null,vi=null,Fn=!1,Wi=null;function I5(e,t){var n=Mi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function p3(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yi=e,vi=Pa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yi=e,vi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ll!==null?{id:jo,overflow:Bo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yi=e,vi=null,!0):!1;default:return!1}}function mg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gg(e){if(Fn){var t=vi;if(t){var n=t;if(!p3(e,t)){if(mg(e))throw Error(ze(418));t=Pa(n.nextSibling);var r=yi;t&&p3(e,t)?I5(r,n):(e.flags=e.flags&-4097|2,Fn=!1,yi=e)}}else{if(mg(e))throw Error(ze(418));e.flags=e.flags&-4097|2,Fn=!1,yi=e}}}function m3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yi=e}function Kd(e){if(e!==yi)return!1;if(!Fn)return m3(e),Fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fg(e.type,e.memoizedProps)),t&&(t=vi)){if(mg(e))throw F5(),Error(ze(418));for(;t;)I5(e,t),t=Pa(t.nextSibling)}if(m3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vi=Pa(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vi=null}}else vi=yi?Pa(e.stateNode.nextSibling):null;return!0}function F5(){for(var e=vi;e;)e=Pa(e.nextSibling)}function Ys(){vi=yi=null,Fn=!1}function $v(e){Wi===null?Wi=[e]:Wi.push(e)}var sw=qo.ReactCurrentBatchConfig;function Ui(e,t){if(e&&e.defaultProps){t=Un({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Z0=Va(null),J0=null,ks=null,jv=null;function Bv(){jv=ks=J0=null}function zv(e){var t=Z0.current;kn(Z0),e._currentValue=t}function vg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zs(e,t){J0=e,jv=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ei=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(jv!==e)if(e={context:e,memoizedValue:t,next:null},ks===null){if(J0===null)throw Error(ze(308));ks=e,J0.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var _l=null;function Gv(e){_l===null?_l=[e]:_l.push(e)}function D5(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Gv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Uo(e,r)}function Uo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xa=!1;function Vv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,mn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Uo(e,n)}return i=r.interleaved,i===null?(t.next=t,Gv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Uo(e,n)}function C0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rv(e,n)}}function g3(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function eh(e,t,n,r){var i=e.updateQueue;xa=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var s=l,u=s.next;s.next=null,a===null?o=u:a.next=u,a=s;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=s))}if(o!==null){var d=i.baseState;a=0,f=u=s=null,l=o;do{var c=l.lane,p=l.eventTime;if((r&c)===c){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(c=t,p=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(p,d,c);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,c=typeof g=="function"?g.call(p,d,c):g,c==null)break e;d=Un({},d,c);break e;case 2:xa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,c=i.effects,c===null?i.effects=[l]:c.push(l))}else p={eventTime:p,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=p,s=d):f=f.next=p,a|=c;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;c=l,l=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}while(!0);if(f===null&&(s=d),i.baseState=s,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function v3(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ze(191,i));i.call(r)}}}var j5=new D4.Component().refs;function yg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Un({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $h={isMounted:function(e){return(e=e._reactInternals)?zl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ur(),i=Ma(e),o=zo(r,i);o.payload=t,n!=null&&(o.callback=n),t=Oa(e,o,i),t!==null&&(Ki(t,e,i,r),C0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ur(),i=Ma(e),o=zo(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Oa(e,o,i),t!==null&&(Ki(t,e,i,r),C0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ur(),r=Ma(e),i=zo(n,r);i.tag=2,t!=null&&(i.callback=t),t=Oa(e,i,r),t!==null&&(Ki(t,e,r,n),C0(t,e,r))}};function y3(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!zc(n,r)||!zc(i,o):!0}function B5(e,t,n){var r=!1,i=Da,o=t.contextType;return typeof o=="object"&&o!==null?o=Ii(o):(i=ni(t)?Rl:Ir.current,r=t.contextTypes,o=(r=r!=null)?qs(e,i):Da),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$h,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function x3(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$h.enqueueReplaceState(t,t.state,null)}function xg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=j5,Vv(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ii(o):(o=ni(t)?Rl:Ir.current,i.context=qs(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(yg(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&$h.enqueueReplaceState(i,i.state,null),eh(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function lc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ze(309));var r=n.stateNode}if(!r)throw Error(ze(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=i.refs;l===j5&&(l=i.refs={}),a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ze(284));if(!n._owner)throw Error(ze(290,e))}return e}function Qd(e,t){throw e=Object.prototype.toString.call(t),Error(ze(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _3(e){var t=e._init;return t(e._payload)}function z5(e){function t(v,_){if(e){var x=v.deletions;x===null?(v.deletions=[_],v.flags|=16):x.push(_)}}function n(v,_){if(!e)return null;for(;_!==null;)t(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Na(v,_),v.index=0,v.sibling=null,v}function o(v,_,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<_?(v.flags|=2,_):x):(v.flags|=2,_)):(v.flags|=1048576,_)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,_,x,O){return _===null||_.tag!==6?(_=rm(x,v.mode,O),_.return=v,_):(_=i(_,x),_.return=v,_)}function s(v,_,x,O){var I=x.type;return I===Cs?f(v,_,x.props.children,O,x.key):_!==null&&(_.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ya&&_3(I)===_.type)?(O=i(_,x.props),O.ref=lc(v,_,x),O.return=v,O):(O=P0(x.type,x.key,x.props,null,v.mode,O),O.ref=lc(v,_,x),O.return=v,O)}function u(v,_,x,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=im(x,v.mode,O),_.return=v,_):(_=i(_,x.children||[]),_.return=v,_)}function f(v,_,x,O,I){return _===null||_.tag!==7?(_=Cl(x,v.mode,O,I),_.return=v,_):(_=i(_,x),_.return=v,_)}function d(v,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=rm(""+_,v.mode,x),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bd:return x=P0(_.type,_.key,_.props,null,v.mode,x),x.ref=lc(v,null,_),x.return=v,x;case Es:return _=im(_,v.mode,x),_.return=v,_;case ya:var O=_._init;return d(v,O(_._payload),x)}if(gc(_)||nc(_))return _=Cl(_,v.mode,x,null),_.return=v,_;Qd(v,_)}return null}function c(v,_,x,O){var I=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return I!==null?null:l(v,_,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bd:return x.key===I?s(v,_,x,O):null;case Es:return x.key===I?u(v,_,x,O):null;case ya:return I=x._init,c(v,_,I(x._payload),O)}if(gc(x)||nc(x))return I!==null?null:f(v,_,x,O,null);Qd(v,x)}return null}function p(v,_,x,O,I){if(typeof O=="string"&&O!==""||typeof O=="number")return v=v.get(x)||null,l(_,v,""+O,I);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Bd:return v=v.get(O.key===null?x:O.key)||null,s(_,v,O,I);case Es:return v=v.get(O.key===null?x:O.key)||null,u(_,v,O,I);case ya:var U=O._init;return p(v,_,x,U(O._payload),I)}if(gc(O)||nc(O))return v=v.get(x)||null,f(_,v,O,I,null);Qd(_,O)}return null}function g(v,_,x,O){for(var I=null,U=null,te=_,K=_=0,$e=null;te!==null&&K<x.length;K++){te.index>K?($e=te,te=null):$e=te.sibling;var Ee=c(v,te,x[K],O);if(Ee===null){te===null&&(te=$e);break}e&&te&&Ee.alternate===null&&t(v,te),_=o(Ee,_,K),U===null?I=Ee:U.sibling=Ee,U=Ee,te=$e}if(K===x.length)return n(v,te),Fn&&ml(v,K),I;if(te===null){for(;K<x.length;K++)te=d(v,x[K],O),te!==null&&(_=o(te,_,K),U===null?I=te:U.sibling=te,U=te);return Fn&&ml(v,K),I}for(te=r(v,te);K<x.length;K++)$e=p(te,v,K,x[K],O),$e!==null&&(e&&$e.alternate!==null&&te.delete($e.key===null?K:$e.key),_=o($e,_,K),U===null?I=$e:U.sibling=$e,U=$e);return e&&te.forEach(function(Re){return t(v,Re)}),Fn&&ml(v,K),I}function y(v,_,x,O){var I=nc(x);if(typeof I!="function")throw Error(ze(150));if(x=I.call(x),x==null)throw Error(ze(151));for(var U=I=null,te=_,K=_=0,$e=null,Ee=x.next();te!==null&&!Ee.done;K++,Ee=x.next()){te.index>K?($e=te,te=null):$e=te.sibling;var Re=c(v,te,Ee.value,O);if(Re===null){te===null&&(te=$e);break}e&&te&&Re.alternate===null&&t(v,te),_=o(Re,_,K),U===null?I=Re:U.sibling=Re,U=Re,te=$e}if(Ee.done)return n(v,te),Fn&&ml(v,K),I;if(te===null){for(;!Ee.done;K++,Ee=x.next())Ee=d(v,Ee.value,O),Ee!==null&&(_=o(Ee,_,K),U===null?I=Ee:U.sibling=Ee,U=Ee);return Fn&&ml(v,K),I}for(te=r(v,te);!Ee.done;K++,Ee=x.next())Ee=p(te,v,K,Ee.value,O),Ee!==null&&(e&&Ee.alternate!==null&&te.delete(Ee.key===null?K:Ee.key),_=o(Ee,_,K),U===null?I=Ee:U.sibling=Ee,U=Ee);return e&&te.forEach(function(Fe){return t(v,Fe)}),Fn&&ml(v,K),I}function S(v,_,x,O){if(typeof x=="object"&&x!==null&&x.type===Cs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Bd:e:{for(var I=x.key,U=_;U!==null;){if(U.key===I){if(I=x.type,I===Cs){if(U.tag===7){n(v,U.sibling),_=i(U,x.props.children),_.return=v,v=_;break e}}else if(U.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ya&&_3(I)===U.type){n(v,U.sibling),_=i(U,x.props),_.ref=lc(v,U,x),_.return=v,v=_;break e}n(v,U);break}else t(v,U);U=U.sibling}x.type===Cs?(_=Cl(x.props.children,v.mode,O,x.key),_.return=v,v=_):(O=P0(x.type,x.key,x.props,null,v.mode,O),O.ref=lc(v,_,x),O.return=v,v=O)}return a(v);case Es:e:{for(U=x.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(v,_.sibling),_=i(_,x.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else t(v,_);_=_.sibling}_=im(x,v.mode,O),_.return=v,v=_}return a(v);case ya:return U=x._init,S(v,_,U(x._payload),O)}if(gc(x))return g(v,_,x,O);if(nc(x))return y(v,_,x,O);Qd(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,x),_.return=v,v=_):(n(v,_),_=rm(x,v.mode,O),_.return=v,v=_),a(v)):n(v,_)}return S}var Ks=z5(!0),G5=z5(!1),mf={},vo=Va(mf),Hc=Va(mf),Wc=Va(mf);function wl(e){if(e===mf)throw Error(ze(174));return e}function Uv(e,t){switch(An(Wc,t),An(Hc,e),An(vo,mf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qm(t,e)}kn(vo),An(vo,t)}function Qs(){kn(vo),kn(Hc),kn(Wc)}function V5(e){wl(Wc.current);var t=wl(vo.current),n=Qm(t,e.type);t!==n&&(An(Hc,e),An(vo,n))}function Hv(e){Hc.current===e&&(kn(vo),kn(Hc))}var Bn=Va(0);function th(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qp=[];function Wv(){for(var e=0;e<Qp.length;e++)Qp[e]._workInProgressVersionPrimary=null;Qp.length=0}var b0=qo.ReactCurrentDispatcher,Zp=qo.ReactCurrentBatchConfig,Pl=0,Vn=null,pr=null,Sr=null,nh=!1,Ac=!1,Xc=0,uw=0;function Pr(){throw Error(ze(321))}function Xv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zi(e[n],t[n]))return!1;return!0}function qv(e,t,n,r,i,o){if(Pl=o,Vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,b0.current=e===null||e.memoizedState===null?hw:pw,e=n(r,i),Ac){o=0;do{if(Ac=!1,Xc=0,25<=o)throw Error(ze(301));o+=1,Sr=pr=null,t.updateQueue=null,b0.current=mw,e=n(r,i)}while(Ac)}if(b0.current=rh,t=pr!==null&&pr.next!==null,Pl=0,Sr=pr=Vn=null,nh=!1,t)throw Error(ze(300));return e}function Yv(){var e=Xc!==0;return Xc=0,e}function ho(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Vn.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function Fi(){if(pr===null){var e=Vn.alternate;e=e!==null?e.memoizedState:null}else e=pr.next;var t=Sr===null?Vn.memoizedState:Sr.next;if(t!==null)Sr=t,pr=e;else{if(e===null)throw Error(ze(310));pr=e,e={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Sr===null?Vn.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function qc(e,t){return typeof t=="function"?t(e):t}function Jp(e){var t=Fi(),n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=e;var r=pr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,s=null,u=o;do{var f=u.lane;if((Pl&f)===f)s!==null&&(s=s.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};s===null?(l=s=d,a=r):s=s.next=d,Vn.lanes|=f,Ol|=f}u=u.next}while(u!==null&&u!==o);s===null?a=r:s.next=l,Zi(r,t.memoizedState)||(ei=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Vn.lanes|=o,Ol|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function em(e){var t=Fi(),n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Zi(o,t.memoizedState)||(ei=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function U5(){}function H5(e,t){var n=Vn,r=Fi(),i=t(),o=!Zi(r.memoizedState,i);if(o&&(r.memoizedState=i,ei=!0),r=r.queue,Kv(q5.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Sr!==null&&Sr.memoizedState.tag&1){if(n.flags|=2048,Yc(9,X5.bind(null,n,r,i,t),void 0,null),Er===null)throw Error(ze(349));Pl&30||W5(n,t,i)}return i}function W5(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function X5(e,t,n,r){t.value=n,t.getSnapshot=r,Y5(t)&&K5(e)}function q5(e,t,n){return n(function(){Y5(t)&&K5(e)})}function Y5(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zi(e,n)}catch{return!0}}function K5(e){var t=Uo(e,1);t!==null&&Ki(t,e,1,-1)}function w3(e){var t=ho();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:e},t.queue=e,e=e.dispatch=dw.bind(null,Vn,e),[t.memoizedState,e]}function Yc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Q5(){return Fi().memoizedState}function A0(e,t,n,r){var i=ho();Vn.flags|=e,i.memoizedState=Yc(1|t,n,void 0,r===void 0?null:r)}function jh(e,t,n,r){var i=Fi();r=r===void 0?null:r;var o=void 0;if(pr!==null){var a=pr.memoizedState;if(o=a.destroy,r!==null&&Xv(r,a.deps)){i.memoizedState=Yc(t,n,o,r);return}}Vn.flags|=e,i.memoizedState=Yc(1|t,n,o,r)}function S3(e,t){return A0(8390656,8,e,t)}function Kv(e,t){return jh(2048,8,e,t)}function Z5(e,t){return jh(4,2,e,t)}function J5(e,t){return jh(4,4,e,t)}function e8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function t8(e,t,n){return n=n!=null?n.concat([e]):null,jh(4,4,e8.bind(null,t,e),n)}function Qv(){}function n8(e,t){var n=Fi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function r8(e,t){var n=Fi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function i8(e,t,n){return Pl&21?(Zi(n,t)||(n=l5(),Vn.lanes|=n,Ol|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ei=!0),e.memoizedState=n)}function cw(e,t){var n=_n;_n=n!==0&&4>n?n:4,e(!0);var r=Zp.transition;Zp.transition={};try{e(!1),t()}finally{_n=n,Zp.transition=r}}function o8(){return Fi().memoizedState}function fw(e,t,n){var r=Ma(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a8(e))l8(t,n);else if(n=D5(e,t,n,r),n!==null){var i=Ur();Ki(n,e,r,i),s8(n,t,r)}}function dw(e,t,n){var r=Ma(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a8(e))l8(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,Zi(l,a)){var s=t.interleaved;s===null?(i.next=i,Gv(t)):(i.next=s.next,s.next=i),t.interleaved=i;return}}catch{}finally{}n=D5(e,t,i,r),n!==null&&(i=Ur(),Ki(n,e,r,i),s8(n,t,r))}}function a8(e){var t=e.alternate;return e===Vn||t!==null&&t===Vn}function l8(e,t){Ac=nh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function s8(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rv(e,n)}}var rh={readContext:Ii,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},hw={readContext:Ii,useCallback:function(e,t){return ho().memoizedState=[e,t===void 0?null:t],e},useContext:Ii,useEffect:S3,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,A0(4194308,4,e8.bind(null,t,e),n)},useLayoutEffect:function(e,t){return A0(4194308,4,e,t)},useInsertionEffect:function(e,t){return A0(4,2,e,t)},useMemo:function(e,t){var n=ho();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ho();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=fw.bind(null,Vn,e),[r.memoizedState,e]},useRef:function(e){var t=ho();return e={current:e},t.memoizedState=e},useState:w3,useDebugValue:Qv,useDeferredValue:function(e){return ho().memoizedState=e},useTransition:function(){var e=w3(!1),t=e[0];return e=cw.bind(null,e[1]),ho().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Vn,i=ho();if(Fn){if(n===void 0)throw Error(ze(407));n=n()}else{if(n=t(),Er===null)throw Error(ze(349));Pl&30||W5(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,S3(q5.bind(null,r,o,e),[e]),r.flags|=2048,Yc(9,X5.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ho(),t=Er.identifierPrefix;if(Fn){var n=Bo,r=jo;n=(r&~(1<<32-Yi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pw={readContext:Ii,useCallback:n8,useContext:Ii,useEffect:Kv,useImperativeHandle:t8,useInsertionEffect:Z5,useLayoutEffect:J5,useMemo:r8,useReducer:Jp,useRef:Q5,useState:function(){return Jp(qc)},useDebugValue:Qv,useDeferredValue:function(e){var t=Fi();return i8(t,pr.memoizedState,e)},useTransition:function(){var e=Jp(qc)[0],t=Fi().memoizedState;return[e,t]},useMutableSource:U5,useSyncExternalStore:H5,useId:o8,unstable_isNewReconciler:!1},mw={readContext:Ii,useCallback:n8,useContext:Ii,useEffect:Kv,useImperativeHandle:t8,useInsertionEffect:Z5,useLayoutEffect:J5,useMemo:r8,useReducer:em,useRef:Q5,useState:function(){return em(qc)},useDebugValue:Qv,useDeferredValue:function(e){var t=Fi();return pr===null?t.memoizedState=e:i8(t,pr.memoizedState,e)},useTransition:function(){var e=em(qc)[0],t=Fi().memoizedState;return[e,t]},useMutableSource:U5,useSyncExternalStore:H5,useId:o8,unstable_isNewReconciler:!1};function Zs(e,t){try{var n="",r=t;do n+=V_(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function tm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _g(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gw=typeof WeakMap=="function"?WeakMap:Map;function u8(e,t,n){n=zo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){oh||(oh=!0,Pg=r),_g(e,t)},n}function c8(e,t,n){n=zo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_g(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){_g(e,t),typeof r!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function E3(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gw;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Pw.bind(null,e,t,n),t.then(e,e))}function C3(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function b3(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zo(-1,1),t.tag=2,Oa(n,t,1))),n.lanes|=1),e)}var vw=qo.ReactCurrentOwner,ei=!1;function Gr(e,t,n,r){t.child=e===null?G5(t,null,n,r):Ks(t,e.child,n,r)}function A3(e,t,n,r,i){n=n.render;var o=t.ref;return zs(t,i),r=qv(e,t,n,r,o,i),n=Yv(),e!==null&&!ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i)):(Fn&&n&&Fv(t),t.flags|=1,Gr(e,t,r,i),t.child)}function T3(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!o2(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,f8(e,t,o,r,i)):(e=P0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:zc,n(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,e=Na(o,r),e.ref=t.ref,e.return=t,t.child=e}function f8(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(zc(o,r)&&e.ref===t.ref)if(ei=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(ei=!0);else return t.lanes=e.lanes,Ho(e,t,i)}return wg(e,t,n,r,i)}function d8(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},An(Ns,gi),gi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,An(Ns,gi),gi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,An(Ns,gi),gi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,An(Ns,gi),gi|=r;return Gr(e,t,i,n),t.child}function h8(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wg(e,t,n,r,i){var o=ni(n)?Rl:Ir.current;return o=qs(t,o),zs(t,i),n=qv(e,t,n,r,o,i),r=Yv(),e!==null&&!ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i)):(Fn&&r&&Fv(t),t.flags|=1,Gr(e,t,n,i),t.child)}function R3(e,t,n,r,i){if(ni(n)){var o=!0;Y0(t)}else o=!1;if(zs(t,i),t.stateNode===null)T0(e,t),B5(t,n,r),xg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var s=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ii(u):(u=ni(n)?Rl:Ir.current,u=qs(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||s!==u)&&x3(t,a,r,u),xa=!1;var c=t.memoizedState;a.state=c,eh(t,r,a,i),s=t.memoizedState,l!==r||c!==s||ti.current||xa?(typeof f=="function"&&(yg(t,n,f,r),s=t.memoizedState),(l=xa||y3(t,n,l,r,c,s,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,$5(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ui(t.type,l),a.props=u,d=t.pendingProps,c=a.context,s=n.contextType,typeof s=="object"&&s!==null?s=Ii(s):(s=ni(n)?Rl:Ir.current,s=qs(t,s));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||c!==s)&&x3(t,a,r,s),xa=!1,c=t.memoizedState,a.state=c,eh(t,r,a,i);var g=t.memoizedState;l!==d||c!==g||ti.current||xa?(typeof p=="function"&&(yg(t,n,p,r),g=t.memoizedState),(u=xa||y3(t,n,u,r,c,g,s)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,s),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,s)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=s,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),r=!1)}return Sg(e,t,n,r,o,i)}function Sg(e,t,n,r,i,o){h8(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&h3(t,n,!1),Ho(e,t,o);r=t.stateNode,vw.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ks(t,e.child,null,o),t.child=Ks(t,null,l,o)):Gr(e,t,l,o),t.memoizedState=r.state,i&&h3(t,n,!0),t.child}function p8(e){var t=e.stateNode;t.pendingContext?d3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&d3(e,t.context,!1),Uv(e,t.containerInfo)}function L3(e,t,n,r,i){return Ys(),$v(i),t.flags|=256,Gr(e,t,n,r),t.child}var Eg={dehydrated:null,treeContext:null,retryLane:0};function Cg(e){return{baseLanes:e,cachePool:null,transitions:null}}function m8(e,t,n){var r=t.pendingProps,i=Bn.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),An(Bn,i&1),e===null)return gg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Gh(a,r,0,null),e=Cl(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Cg(n),t.memoizedState=Eg,e):Zv(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return yw(e,t,a,r,l,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,l=i.sibling;var s={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=s,t.deletions=null):(r=Na(i,s),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Na(l,o):(o=Cl(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Cg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Eg,r}return o=e.child,e=o.sibling,r=Na(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zv(e,t){return t=Gh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zd(e,t,n,r){return r!==null&&$v(r),Ks(t,e.child,null,n),e=Zv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yw(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=tm(Error(ze(422))),Zd(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Gh({mode:"visible",children:r.children},i,0,null),o=Cl(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ks(t,e.child,null,a),t.child.memoizedState=Cg(a),t.memoizedState=Eg,o);if(!(t.mode&1))return Zd(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ze(419)),r=tm(o,r,void 0),Zd(e,t,a,r)}if(l=(a&e.childLanes)!==0,ei||l){if(r=Er,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Uo(e,i),Ki(r,e,i,-1))}return i2(),r=tm(Error(ze(421))),Zd(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Ow.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,vi=Pa(i.nextSibling),yi=t,Fn=!0,Wi=null,e!==null&&(Oi[ki++]=jo,Oi[ki++]=Bo,Oi[ki++]=Ll,jo=e.id,Bo=e.overflow,Ll=t),t=Zv(t,r.children),t.flags|=4096,t)}function P3(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vg(e.return,t,n)}function nm(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function g8(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Gr(e,t,r.children,n),r=Bn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P3(e,n,t);else if(e.tag===19)P3(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(An(Bn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&th(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nm(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&th(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nm(t,!0,n,null,o);break;case"together":nm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function T0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ol|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ze(153));if(t.child!==null){for(e=t.child,n=Na(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Na(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xw(e,t,n){switch(t.tag){case 3:p8(t),Ys();break;case 5:V5(t);break;case 1:ni(t.type)&&Y0(t);break;case 4:Uv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;An(Z0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(An(Bn,Bn.current&1),t.flags|=128,null):n&t.child.childLanes?m8(e,t,n):(An(Bn,Bn.current&1),e=Ho(e,t,n),e!==null?e.sibling:null);An(Bn,Bn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return g8(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),An(Bn,Bn.current),r)break;return null;case 22:case 23:return t.lanes=0,d8(e,t,n)}return Ho(e,t,n)}var v8,bg,y8,x8;v8=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bg=function(){};y8=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,wl(vo.current);var o=null;switch(n){case"input":i=Xm(e,i),r=Xm(e,r),o=[];break;case"select":i=Un({},i,{value:void 0}),r=Un({},r,{value:void 0}),o=[];break;case"textarea":i=Km(e,i),r=Km(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=X0)}Zm(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Nc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var s=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&s!==l&&(s!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in s)s.hasOwnProperty(a)&&l[a]!==s[a]&&(n||(n={}),n[a]=s[a])}else n||(o||(o=[]),o.push(u,n)),n=s;else u==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,l=l?l.__html:void 0,s!=null&&l!==s&&(o=o||[]).push(u,s)):u==="children"?typeof s!="string"&&typeof s!="number"||(o=o||[]).push(u,""+s):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Nc.hasOwnProperty(u)?(s!=null&&u==="onScroll"&&On("scroll",e),o||l===s||(o=[])):(o=o||[]).push(u,s))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};x8=function(e,t,n,r){n!==r&&(t.flags|=4)};function sc(e,t){if(!Fn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Or(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _w(e,t,n){var r=t.pendingProps;switch(Dv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(t),null;case 1:return ni(t.type)&&q0(),Or(t),null;case 3:return r=t.stateNode,Qs(),kn(ti),kn(Ir),Wv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Kd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wi!==null&&(Mg(Wi),Wi=null))),bg(e,t),Or(t),null;case 5:Hv(t);var i=wl(Wc.current);if(n=t.type,e!==null&&t.stateNode!=null)y8(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ze(166));return Or(t),null}if(e=wl(vo.current),Kd(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[mo]=t,r[Uc]=o,e=(t.mode&1)!==0,n){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(i=0;i<yc.length;i++)On(yc[i],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":jy(r,o),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},On("invalid",r);break;case"textarea":zy(r,o),On("invalid",r)}Zm(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Yd(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Yd(r.textContent,l,e),i=["children",""+l]):Nc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&On("scroll",r)}switch(n){case"input":zd(r),By(r,o,!0);break;case"textarea":zd(r),Gy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=X0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[mo]=t,e[Uc]=r,v8(e,t,!1,!1),t.stateNode=e;e:{switch(a=Jm(n,r),n){case"dialog":On("cancel",e),On("close",e),i=r;break;case"iframe":case"object":case"embed":On("load",e),i=r;break;case"video":case"audio":for(i=0;i<yc.length;i++)On(yc[i],e);i=r;break;case"source":On("error",e),i=r;break;case"img":case"image":case"link":On("error",e),On("load",e),i=r;break;case"details":On("toggle",e),i=r;break;case"input":jy(e,r),i=Xm(e,r),On("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Un({},r,{value:void 0}),On("invalid",e);break;case"textarea":zy(e,r),i=Km(e,r),On("invalid",e);break;default:i=r}Zm(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var s=l[o];o==="style"?Y4(e,s):o==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&X4(e,s)):o==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&Ic(e,s):typeof s=="number"&&Ic(e,""+s):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Nc.hasOwnProperty(o)?s!=null&&o==="onScroll"&&On("scroll",e):s!=null&&Sv(e,o,s,a))}switch(n){case"input":zd(e),By(e,r,!1);break;case"textarea":zd(e),Gy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fa(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ds(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ds(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=X0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Or(t),null;case 6:if(e&&t.stateNode!=null)x8(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ze(166));if(n=wl(Wc.current),wl(vo.current),Kd(t)){if(r=t.stateNode,n=t.memoizedProps,r[mo]=t,(o=r.nodeValue!==n)&&(e=yi,e!==null))switch(e.tag){case 3:Yd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yd(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mo]=t,t.stateNode=r}return Or(t),null;case 13:if(kn(Bn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fn&&vi!==null&&t.mode&1&&!(t.flags&128))F5(),Ys(),t.flags|=98560,o=!1;else if(o=Kd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ze(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ze(317));o[mo]=t}else Ys(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Or(t),o=!1}else Wi!==null&&(Mg(Wi),Wi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Bn.current&1?mr===0&&(mr=3):i2())),t.updateQueue!==null&&(t.flags|=4),Or(t),null);case 4:return Qs(),bg(e,t),e===null&&Gc(t.stateNode.containerInfo),Or(t),null;case 10:return zv(t.type._context),Or(t),null;case 17:return ni(t.type)&&q0(),Or(t),null;case 19:if(kn(Bn),o=t.memoizedState,o===null)return Or(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)sc(o,!1);else{if(mr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=th(e),a!==null){for(t.flags|=128,sc(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return An(Bn,Bn.current&1|2),t.child}e=e.sibling}o.tail!==null&&ir()>Js&&(t.flags|=128,r=!0,sc(o,!1),t.lanes=4194304)}else{if(!r)if(e=th(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Fn)return Or(t),null}else 2*ir()-o.renderingStartTime>Js&&n!==1073741824&&(t.flags|=128,r=!0,sc(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ir(),t.sibling=null,n=Bn.current,An(Bn,r?n&1|2:n&1),t):(Or(t),null);case 22:case 23:return r2(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gi&1073741824&&(Or(t),t.subtreeFlags&6&&(t.flags|=8192)):Or(t),null;case 24:return null;case 25:return null}throw Error(ze(156,t.tag))}function ww(e,t){switch(Dv(t),t.tag){case 1:return ni(t.type)&&q0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),kn(ti),kn(Ir),Wv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hv(t),null;case 13:if(kn(Bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ze(340));Ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kn(Bn),null;case 4:return Qs(),null;case 10:return zv(t.type._context),null;case 22:case 23:return r2(),null;case 24:return null;default:return null}}var Jd=!1,Mr=!1,Sw=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Ms(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yn(e,t,r)}else n.current=null}function Ag(e,t,n){try{n()}catch(r){Yn(e,t,r)}}var O3=!1;function Ew(e,t){if(ug=U0,e=E5(),Iv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,s=-1,u=0,f=0,d=e,c=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(l=a+i),d!==o||r!==0&&d.nodeType!==3||(s=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)c=d,d=p;for(;;){if(d===e)break t;if(c===n&&++u===i&&(l=a),c===o&&++f===r&&(s=a),(p=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=p}n=l===-1||s===-1?null:{start:l,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(cg={focusedElem:e,selectionRange:n},U0=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,S=g.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Ui(t.type,y),S);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(O){Yn(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return g=O3,O3=!1,g}function Tc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Ag(t,n,o)}i=i.next}while(i!==r)}}function Bh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Tg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _8(e){var t=e.alternate;t!==null&&(e.alternate=null,_8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mo],delete t[Uc],delete t[hg],delete t[ow],delete t[aw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function w8(e){return e.tag===5||e.tag===3||e.tag===4}function k3(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||w8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=X0));else if(r!==4&&(e=e.child,e!==null))for(Rg(e,t,n),e=e.sibling;e!==null;)Rg(e,t,n),e=e.sibling}function Lg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Lg(e,t,n),e=e.sibling;e!==null;)Lg(e,t,n),e=e.sibling}var Cr=null,Hi=!1;function ha(e,t,n){for(n=n.child;n!==null;)S8(e,t,n),n=n.sibling}function S8(e,t,n){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(kh,n)}catch{}switch(n.tag){case 5:Mr||Ms(n,t);case 6:var r=Cr,i=Hi;Cr=null,ha(e,t,n),Cr=r,Hi=i,Cr!==null&&(Hi?(e=Cr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Cr.removeChild(n.stateNode));break;case 18:Cr!==null&&(Hi?(e=Cr,n=n.stateNode,e.nodeType===8?Yp(e.parentNode,n):e.nodeType===1&&Yp(e,n),jc(e)):Yp(Cr,n.stateNode));break;case 4:r=Cr,i=Hi,Cr=n.stateNode.containerInfo,Hi=!0,ha(e,t,n),Cr=r,Hi=i;break;case 0:case 11:case 14:case 15:if(!Mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ag(n,t,a),i=i.next}while(i!==r)}ha(e,t,n);break;case 1:if(!Mr&&(Ms(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Yn(n,t,l)}ha(e,t,n);break;case 21:ha(e,t,n);break;case 22:n.mode&1?(Mr=(r=Mr)||n.memoizedState!==null,ha(e,t,n),Mr=r):ha(e,t,n);break;default:ha(e,t,n)}}function M3(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sw),t.forEach(function(r){var i=kw.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Cr=l.stateNode,Hi=!1;break e;case 3:Cr=l.stateNode.containerInfo,Hi=!0;break e;case 4:Cr=l.stateNode.containerInfo,Hi=!0;break e}l=l.return}if(Cr===null)throw Error(ze(160));S8(o,a,i),Cr=null,Hi=!1;var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(u){Yn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)E8(t,e),t=t.sibling}function E8(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zi(t,e),uo(e),r&4){try{Tc(3,e,e.return),Bh(3,e)}catch(y){Yn(e,e.return,y)}try{Tc(5,e,e.return)}catch(y){Yn(e,e.return,y)}}break;case 1:zi(t,e),uo(e),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(zi(t,e),uo(e),r&512&&n!==null&&Ms(n,n.return),e.flags&32){var i=e.stateNode;try{Ic(i,"")}catch(y){Yn(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,s=e.updateQueue;if(e.updateQueue=null,s!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&U4(i,o),Jm(l,a);var u=Jm(l,o);for(a=0;a<s.length;a+=2){var f=s[a],d=s[a+1];f==="style"?Y4(i,d):f==="dangerouslySetInnerHTML"?X4(i,d):f==="children"?Ic(i,d):Sv(i,f,d,u)}switch(l){case"input":qm(i,o);break;case"textarea":H4(i,o);break;case"select":var c=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Ds(i,!!o.multiple,p,!1):c!==!!o.multiple&&(o.defaultValue!=null?Ds(i,!!o.multiple,o.defaultValue,!0):Ds(i,!!o.multiple,o.multiple?[]:"",!1))}i[Uc]=o}catch(y){Yn(e,e.return,y)}}break;case 6:if(zi(t,e),uo(e),r&4){if(e.stateNode===null)throw Error(ze(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Yn(e,e.return,y)}}break;case 3:if(zi(t,e),uo(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jc(t.containerInfo)}catch(y){Yn(e,e.return,y)}break;case 4:zi(t,e),uo(e);break;case 13:zi(t,e),uo(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(t2=ir())),r&4&&M3(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Mr=(u=Mr)||f,zi(t,e),Mr=u):zi(t,e),uo(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(mt=e,f=e.child;f!==null;){for(d=mt=f;mt!==null;){switch(c=mt,p=c.child,c.tag){case 0:case 11:case 14:case 15:Tc(4,c,c.return);break;case 1:Ms(c,c.return);var g=c.stateNode;if(typeof g.componentWillUnmount=="function"){r=c,n=c.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Yn(r,n,y)}}break;case 5:Ms(c,c.return);break;case 22:if(c.memoizedState!==null){I3(d);continue}}p!==null?(p.return=c,mt=p):I3(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,s=d.memoizedProps.style,a=s!=null&&s.hasOwnProperty("display")?s.display:null,l.style.display=q4("display",a))}catch(y){Yn(e,e.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Yn(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zi(t,e),uo(e),r&4&&M3(e);break;case 21:break;default:zi(t,e),uo(e)}}function uo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(w8(n)){var r=n;break e}n=n.return}throw Error(ze(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ic(i,""),r.flags&=-33);var o=k3(e);Lg(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=k3(e);Rg(e,l,a);break;default:throw Error(ze(161))}}catch(s){Yn(e,e.return,s)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cw(e,t,n){mt=e,C8(e)}function C8(e,t,n){for(var r=(e.mode&1)!==0;mt!==null;){var i=mt,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Jd;if(!a){var l=i.alternate,s=l!==null&&l.memoizedState!==null||Mr;l=Jd;var u=Mr;if(Jd=a,(Mr=s)&&!u)for(mt=i;mt!==null;)a=mt,s=a.child,a.tag===22&&a.memoizedState!==null?F3(i):s!==null?(s.return=a,mt=s):F3(i);for(;o!==null;)mt=o,C8(o),o=o.sibling;mt=i,Jd=l,Mr=u}N3(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,mt=o):N3(e)}}function N3(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mr||Bh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Mr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ui(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&v3(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}v3(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&jc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}Mr||t.flags&512&&Tg(t)}catch(c){Yn(t,t.return,c)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function I3(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function F3(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Bh(4,t)}catch(s){Yn(t,n,s)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(s){Yn(t,i,s)}}var o=t.return;try{Tg(t)}catch(s){Yn(t,o,s)}break;case 5:var a=t.return;try{Tg(t)}catch(s){Yn(t,a,s)}}}catch(s){Yn(t,t.return,s)}if(t===e){mt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,mt=l;break}mt=t.return}}var bw=Math.ceil,ih=qo.ReactCurrentDispatcher,Jv=qo.ReactCurrentOwner,Ni=qo.ReactCurrentBatchConfig,mn=0,Er=null,sr=null,br=0,gi=0,Ns=Va(0),mr=0,Kc=null,Ol=0,zh=0,e2=0,Rc=null,Jr=null,t2=0,Js=1/0,Io=null,oh=!1,Pg=null,ka=null,e0=!1,Ea=null,ah=0,Lc=0,Og=null,R0=-1,L0=0;function Ur(){return mn&6?ir():R0!==-1?R0:R0=ir()}function Ma(e){return e.mode&1?mn&2&&br!==0?br&-br:sw.transition!==null?(L0===0&&(L0=l5()),L0):(e=_n,e!==0||(e=window.event,e=e===void 0?16:p5(e.type)),e):1}function Ki(e,t,n,r){if(50<Lc)throw Lc=0,Og=null,Error(ze(185));df(e,n,r),(!(mn&2)||e!==Er)&&(e===Er&&(!(mn&2)&&(zh|=n),mr===4&&wa(e,br)),ri(e,r),n===1&&mn===0&&!(t.mode&1)&&(Js=ir()+500,Dh&&Ua()))}function ri(e,t){var n=e.callbackNode;s7(e,t);var r=V0(e,e===Er?br:0);if(r===0)n!==null&&Hy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Hy(n),t===1)e.tag===0?lw(D3.bind(null,e)):M5(D3.bind(null,e)),rw(function(){!(mn&6)&&Ua()}),n=null;else{switch(s5(r)){case 1:n=Tv;break;case 4:n=o5;break;case 16:n=G0;break;case 536870912:n=a5;break;default:n=G0}n=k8(n,b8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function b8(e,t){if(R0=-1,L0=0,mn&6)throw Error(ze(327));var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var r=V0(e,e===Er?br:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=lh(e,r);else{t=r;var i=mn;mn|=2;var o=T8();(Er!==e||br!==t)&&(Io=null,Js=ir()+500,El(e,t));do try{Rw();break}catch(l){A8(e,l)}while(!0);Bv(),ih.current=o,mn=i,sr!==null?t=0:(Er=null,br=0,t=mr)}if(t!==0){if(t===2&&(i=ig(e),i!==0&&(r=i,t=kg(e,i))),t===1)throw n=Kc,El(e,0),wa(e,r),ri(e,ir()),n;if(t===6)wa(e,r);else{if(i=e.current.alternate,!(r&30)&&!Aw(i)&&(t=lh(e,r),t===2&&(o=ig(e),o!==0&&(r=o,t=kg(e,o))),t===1))throw n=Kc,El(e,0),wa(e,r),ri(e,ir()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ze(345));case 2:gl(e,Jr,Io);break;case 3:if(wa(e,r),(r&130023424)===r&&(t=t2+500-ir(),10<t)){if(V0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ur(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=dg(gl.bind(null,e,Jr,Io),t);break}gl(e,Jr,Io);break;case 4:if(wa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Yi(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=ir()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bw(r/1960))-r,10<r){e.timeoutHandle=dg(gl.bind(null,e,Jr,Io),r);break}gl(e,Jr,Io);break;case 5:gl(e,Jr,Io);break;default:throw Error(ze(329))}}}return ri(e,ir()),e.callbackNode===n?b8.bind(null,e):null}function kg(e,t){var n=Rc;return e.current.memoizedState.isDehydrated&&(El(e,t).flags|=256),e=lh(e,t),e!==2&&(t=Jr,Jr=n,t!==null&&Mg(t)),e}function Mg(e){Jr===null?Jr=e:Jr.push.apply(Jr,e)}function Aw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Zi(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wa(e,t){for(t&=~e2,t&=~zh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yi(t),r=1<<n;e[n]=-1,t&=~r}}function D3(e){if(mn&6)throw Error(ze(327));Gs();var t=V0(e,0);if(!(t&1))return ri(e,ir()),null;var n=lh(e,t);if(e.tag!==0&&n===2){var r=ig(e);r!==0&&(t=r,n=kg(e,r))}if(n===1)throw n=Kc,El(e,0),wa(e,t),ri(e,ir()),n;if(n===6)throw Error(ze(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gl(e,Jr,Io),ri(e,ir()),null}function n2(e,t){var n=mn;mn|=1;try{return e(t)}finally{mn=n,mn===0&&(Js=ir()+500,Dh&&Ua())}}function kl(e){Ea!==null&&Ea.tag===0&&!(mn&6)&&Gs();var t=mn;mn|=1;var n=Ni.transition,r=_n;try{if(Ni.transition=null,_n=1,e)return e()}finally{_n=r,Ni.transition=n,mn=t,!(mn&6)&&Ua()}}function r2(){gi=Ns.current,kn(Ns)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nw(n)),sr!==null)for(n=sr.return;n!==null;){var r=n;switch(Dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&q0();break;case 3:Qs(),kn(ti),kn(Ir),Wv();break;case 5:Hv(r);break;case 4:Qs();break;case 13:kn(Bn);break;case 19:kn(Bn);break;case 10:zv(r.type._context);break;case 22:case 23:r2()}n=n.return}if(Er=e,sr=e=Na(e.current,null),br=gi=t,mr=0,Kc=null,e2=zh=Ol=0,Jr=Rc=null,_l!==null){for(t=0;t<_l.length;t++)if(n=_l[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}_l=null}return e}function A8(e,t){do{var n=sr;try{if(Bv(),b0.current=rh,nh){for(var r=Vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nh=!1}if(Pl=0,Sr=pr=Vn=null,Ac=!1,Xc=0,Jv.current=null,n===null||n.return===null){mr=1,Kc=t,sr=null;break}e:{var o=e,a=n.return,l=n,s=t;if(t=br,l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var u=s,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var c=f.alternate;c?(f.updateQueue=c.updateQueue,f.memoizedState=c.memoizedState,f.lanes=c.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=C3(a);if(p!==null){p.flags&=-257,b3(p,a,l,o,t),p.mode&1&&E3(o,u,t),t=p,s=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(s),t.updateQueue=y}else g.add(s);break e}else{if(!(t&1)){E3(o,u,t),i2();break e}s=Error(ze(426))}}else if(Fn&&l.mode&1){var S=C3(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),b3(S,a,l,o,t),$v(Zs(s,l));break e}}o=s=Zs(s,l),mr!==4&&(mr=2),Rc===null?Rc=[o]:Rc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=u8(o,s,t);g3(o,v);break e;case 1:l=s;var _=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ka===null||!ka.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var O=c8(o,l,t);g3(o,O);break e}}o=o.return}while(o!==null)}L8(n)}catch(I){t=I,sr===n&&n!==null&&(sr=n=n.return);continue}break}while(!0)}function T8(){var e=ih.current;return ih.current=rh,e===null?rh:e}function i2(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(Ol&268435455)&&!(zh&268435455)||wa(Er,br)}function lh(e,t){var n=mn;mn|=2;var r=T8();(Er!==e||br!==t)&&(Io=null,El(e,t));do try{Tw();break}catch(i){A8(e,i)}while(!0);if(Bv(),mn=n,ih.current=r,sr!==null)throw Error(ze(261));return Er=null,br=0,mr}function Tw(){for(;sr!==null;)R8(sr)}function Rw(){for(;sr!==null&&!J_();)R8(sr)}function R8(e){var t=O8(e.alternate,e,gi);e.memoizedProps=e.pendingProps,t===null?L8(e):sr=t,Jv.current=null}function L8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ww(n,t),n!==null){n.flags&=32767,sr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mr=6,sr=null;return}}else if(n=_w(n,t,gi),n!==null){sr=n;return}if(t=t.sibling,t!==null){sr=t;return}sr=t=e}while(t!==null);mr===0&&(mr=5)}function gl(e,t,n){var r=_n,i=Ni.transition;try{Ni.transition=null,_n=1,Lw(e,t,n,r)}finally{Ni.transition=i,_n=r}return null}function Lw(e,t,n,r){do Gs();while(Ea!==null);if(mn&6)throw Error(ze(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ze(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(u7(e,o),e===Er&&(sr=Er=null,br=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||e0||(e0=!0,k8(G0,function(){return Gs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ni.transition,Ni.transition=null;var a=_n;_n=1;var l=mn;mn|=4,Jv.current=null,Ew(e,n),E8(n,e),Y7(cg),U0=!!ug,cg=ug=null,e.current=n,Cw(n),e7(),mn=l,_n=a,Ni.transition=o}else e.current=n;if(e0&&(e0=!1,Ea=e,ah=i),o=e.pendingLanes,o===0&&(ka=null),r7(n.stateNode),ri(e,ir()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oh)throw oh=!1,e=Pg,Pg=null,e;return ah&1&&e.tag!==0&&Gs(),o=e.pendingLanes,o&1?e===Og?Lc++:(Lc=0,Og=e):Lc=0,Ua(),null}function Gs(){if(Ea!==null){var e=s5(ah),t=Ni.transition,n=_n;try{if(Ni.transition=null,_n=16>e?16:e,Ea===null)var r=!1;else{if(e=Ea,Ea=null,ah=0,mn&6)throw Error(ze(331));var i=mn;for(mn|=4,mt=e.current;mt!==null;){var o=mt,a=o.child;if(mt.flags&16){var l=o.deletions;if(l!==null){for(var s=0;s<l.length;s++){var u=l[s];for(mt=u;mt!==null;){var f=mt;switch(f.tag){case 0:case 11:case 15:Tc(8,f,o)}var d=f.child;if(d!==null)d.return=f,mt=d;else for(;mt!==null;){f=mt;var c=f.sibling,p=f.return;if(_8(f),f===u){mt=null;break}if(c!==null){c.return=p,mt=c;break}mt=p}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}mt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,mt=a;else e:for(;mt!==null;){if(o=mt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Tc(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,mt=v;break e}mt=o.return}}var _=e.current;for(mt=_;mt!==null;){a=mt;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,mt=x;else e:for(a=_;mt!==null;){if(l=mt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bh(9,l)}}catch(I){Yn(l,l.return,I)}if(l===a){mt=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,mt=O;break e}mt=l.return}}if(mn=i,Ua(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(kh,e)}catch{}r=!0}return r}finally{_n=n,Ni.transition=t}}return!1}function $3(e,t,n){t=Zs(n,t),t=u8(e,t,1),e=Oa(e,t,1),t=Ur(),e!==null&&(df(e,1,t),ri(e,t))}function Yn(e,t,n){if(e.tag===3)$3(e,e,n);else for(;t!==null;){if(t.tag===3){$3(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ka===null||!ka.has(r))){e=Zs(n,e),e=c8(t,e,1),t=Oa(t,e,1),e=Ur(),t!==null&&(df(t,1,e),ri(t,e));break}}t=t.return}}function Pw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ur(),e.pingedLanes|=e.suspendedLanes&n,Er===e&&(br&n)===n&&(mr===4||mr===3&&(br&130023424)===br&&500>ir()-t2?El(e,0):e2|=n),ri(e,t)}function P8(e,t){t===0&&(e.mode&1?(t=Ud,Ud<<=1,!(Ud&130023424)&&(Ud=4194304)):t=1);var n=Ur();e=Uo(e,t),e!==null&&(df(e,t,n),ri(e,n))}function Ow(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),P8(e,n)}function kw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ze(314))}r!==null&&r.delete(t),P8(e,n)}var O8;O8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ti.current)ei=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ei=!1,xw(e,t,n);ei=!!(e.flags&131072)}else ei=!1,Fn&&t.flags&1048576&&N5(t,Q0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;T0(e,t),e=t.pendingProps;var i=qs(t,Ir.current);zs(t,n),i=qv(null,t,r,e,i,n);var o=Yv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ni(r)?(o=!0,Y0(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vv(t),i.updater=$h,t.stateNode=i,i._reactInternals=t,xg(t,r,e,n),t=Sg(null,t,r,!0,o,n)):(t.tag=0,Fn&&o&&Fv(t),Gr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(T0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Nw(r),e=Ui(r,e),i){case 0:t=wg(null,t,r,e,n);break e;case 1:t=R3(null,t,r,e,n);break e;case 11:t=A3(null,t,r,e,n);break e;case 14:t=T3(null,t,r,Ui(r.type,e),n);break e}throw Error(ze(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),wg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),R3(e,t,r,i,n);case 3:e:{if(p8(t),e===null)throw Error(ze(387));r=t.pendingProps,o=t.memoizedState,i=o.element,$5(e,t),eh(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Zs(Error(ze(423)),t),t=L3(e,t,r,n,i);break e}else if(r!==i){i=Zs(Error(ze(424)),t),t=L3(e,t,r,n,i);break e}else for(vi=Pa(t.stateNode.containerInfo.firstChild),yi=t,Fn=!0,Wi=null,n=G5(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===i){t=Ho(e,t,n);break e}Gr(e,t,r,n)}t=t.child}return t;case 5:return V5(t),e===null&&gg(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,fg(r,i)?a=null:o!==null&&fg(r,o)&&(t.flags|=32),h8(e,t),Gr(e,t,a,n),t.child;case 6:return e===null&&gg(t),null;case 13:return m8(e,t,n);case 4:return Uv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ks(t,null,r,n):Gr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),A3(e,t,r,i,n);case 7:return Gr(e,t,t.pendingProps,n),t.child;case 8:return Gr(e,t,t.pendingProps.children,n),t.child;case 12:return Gr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,An(Z0,r._currentValue),r._currentValue=a,o!==null)if(Zi(o.value,a)){if(o.children===i.children&&!ti.current){t=Ho(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var s=l.firstContext;s!==null;){if(s.context===r){if(o.tag===1){s=zo(-1,n&-n),s.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s}}o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),vg(o.return,n,t),l.lanes|=n;break}s=s.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ze(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),vg(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Gr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,zs(t,n),i=Ii(i),r=r(i),t.flags|=1,Gr(e,t,r,n),t.child;case 14:return r=t.type,i=Ui(r,t.pendingProps),i=Ui(r.type,i),T3(e,t,r,i,n);case 15:return f8(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),T0(e,t),t.tag=1,ni(r)?(e=!0,Y0(t)):e=!1,zs(t,n),B5(t,r,i),xg(t,r,i,n),Sg(null,t,r,!0,e,n);case 19:return g8(e,t,n);case 22:return d8(e,t,n)}throw Error(ze(156,t.tag))};function k8(e,t){return i5(e,t)}function Mw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(e,t,n,r){return new Mw(e,t,n,r)}function o2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nw(e){if(typeof e=="function")return o2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cv)return 11;if(e===bv)return 14}return 2}function Na(e,t){var n=e.alternate;return n===null?(n=Mi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function P0(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")o2(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Cs:return Cl(n.children,i,o,t);case Ev:a=8,i|=8;break;case Vm:return e=Mi(12,n,t,i|2),e.elementType=Vm,e.lanes=o,e;case Um:return e=Mi(13,n,t,i),e.elementType=Um,e.lanes=o,e;case Hm:return e=Mi(19,n,t,i),e.elementType=Hm,e.lanes=o,e;case z4:return Gh(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j4:a=10;break e;case B4:a=9;break e;case Cv:a=11;break e;case bv:a=14;break e;case ya:a=16,r=null;break e}throw Error(ze(130,e==null?e:typeof e,""))}return t=Mi(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Cl(e,t,n,r){return e=Mi(7,e,r,t),e.lanes=n,e}function Gh(e,t,n,r){return e=Mi(22,e,r,t),e.elementType=z4,e.lanes=n,e.stateNode={isHidden:!1},e}function rm(e,t,n){return e=Mi(6,e,null,t),e.lanes=n,e}function im(e,t,n){return t=Mi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Iw(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$p(0),this.expirationTimes=$p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$p(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function a2(e,t,n,r,i,o,a,l,s){return e=new Iw(e,t,n,l,s),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Mi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vv(o),e}function Fw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Es,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function M8(e){if(!e)return Da;e=e._reactInternals;e:{if(zl(e)!==e||e.tag!==1)throw Error(ze(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ze(171))}if(e.tag===1){var n=e.type;if(ni(n))return k5(e,n,t)}return t}function N8(e,t,n,r,i,o,a,l,s){return e=a2(n,r,!0,e,i,o,a,l,s),e.context=M8(null),n=e.current,r=Ur(),i=Ma(n),o=zo(r,i),o.callback=t??null,Oa(n,o,i),e.current.lanes=i,df(e,i,r),ri(e,r),e}function Vh(e,t,n,r){var i=t.current,o=Ur(),a=Ma(i);return n=M8(n),t.context===null?t.context=n:t.pendingContext=n,t=zo(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Oa(i,t,a),e!==null&&(Ki(e,i,a,o),C0(e,i,a)),a}function sh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function j3(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function l2(e,t){j3(e,t),(e=e.alternate)&&j3(e,t)}function Dw(){return null}var I8=typeof reportError=="function"?reportError:function(e){console.error(e)};function s2(e){this._internalRoot=e}Uh.prototype.render=s2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ze(409));Vh(e,t,null,null)};Uh.prototype.unmount=s2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kl(function(){Vh(null,e,null,null)}),t[Vo]=null}};function Uh(e){this._internalRoot=e}Uh.prototype.unstable_scheduleHydration=function(e){if(e){var t=f5();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_a.length&&t!==0&&t<_a[n].priority;n++);_a.splice(n,0,e),n===0&&h5(e)}};function u2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function B3(){}function $w(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=sh(a);o.call(u)}}var a=N8(t,r,e,0,null,!1,!1,"",B3);return e._reactRootContainer=a,e[Vo]=a.current,Gc(e.nodeType===8?e.parentNode:e),kl(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=sh(s);l.call(u)}}var s=a2(e,0,!1,null,null,!1,!1,"",B3);return e._reactRootContainer=s,e[Vo]=s.current,Gc(e.nodeType===8?e.parentNode:e),kl(function(){Vh(t,s,n,r)}),s}function Wh(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var s=sh(a);l.call(s)}}Vh(t,a,e,i)}else a=$w(n,t,e,i,r);return sh(a)}u5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vc(t.pendingLanes);n!==0&&(Rv(t,n|1),ri(t,ir()),!(mn&6)&&(Js=ir()+500,Ua()))}break;case 13:kl(function(){var r=Uo(e,1);if(r!==null){var i=Ur();Ki(r,e,1,i)}}),l2(e,1)}};Lv=function(e){if(e.tag===13){var t=Uo(e,134217728);if(t!==null){var n=Ur();Ki(t,e,134217728,n)}l2(e,134217728)}};c5=function(e){if(e.tag===13){var t=Ma(e),n=Uo(e,t);if(n!==null){var r=Ur();Ki(n,e,t,r)}l2(e,t)}};f5=function(){return _n};d5=function(e,t){var n=_n;try{return _n=e,t()}finally{_n=n}};tg=function(e,t,n){switch(t){case"input":if(qm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Fh(r);if(!i)throw Error(ze(90));V4(r),qm(r,i)}}}break;case"textarea":H4(e,n);break;case"select":t=n.value,t!=null&&Ds(e,!!n.multiple,t,!1)}};Z4=n2;J4=kl;var jw={usingClientEntryPoint:!1,Events:[pf,Rs,Fh,K4,Q4,n2]},uc={findFiberByHostInstance:xl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Bw={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=n5(e),e===null?null:e.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||Dw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{kh=t0.inject(Bw),go=t0}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jw;Ei.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u2(t))throw Error(ze(200));return Fw(e,t,null,n)};Ei.createRoot=function(e,t){if(!u2(e))throw Error(ze(299));var n=!1,r="",i=I8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=a2(e,1,!1,null,null,n,!1,r,i),e[Vo]=t.current,Gc(e.nodeType===8?e.parentNode:e),new s2(t)};Ei.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ze(188)):(e=Object.keys(e).join(","),Error(ze(268,e)));return e=n5(t),e=e===null?null:e.stateNode,e};Ei.flushSync=function(e){return kl(e)};Ei.hydrate=function(e,t,n){if(!Hh(t))throw Error(ze(200));return Wh(null,e,t,!0,n)};Ei.hydrateRoot=function(e,t,n){if(!u2(e))throw Error(ze(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=I8;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=N8(t,null,e,1,n??null,i,!1,o,a),e[Vo]=t.current,Gc(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Uh(t)};Ei.render=function(e,t,n){if(!Hh(t))throw Error(ze(200));return Wh(null,e,t,!1,n)};Ei.unmountComponentAtNode=function(e){if(!Hh(e))throw Error(ze(40));return e._reactRootContainer?(kl(function(){Wh(null,null,e,!1,function(){e._reactRootContainer=null,e[Vo]=null})}),!0):!1};Ei.unstable_batchedUpdates=n2;Ei.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Hh(n))throw Error(ze(200));if(e==null||e._reactInternals===void 0)throw Error(ze(38));return Wh(e,t,n,!1,r)};Ei.version="18.2.0-next-9e3b772b8-20220608";function F8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F8)}catch(e){console.error(e)}}F8(),N4.exports=Ei;var zw=N4.exports,z3=zw;zm.createRoot=z3.createRoot,zm.hydrateRoot=z3.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qc.apply(this,arguments)}var Ca;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ca||(Ca={}));const G3="popstate";function Gw(e){e===void 0&&(e={});function t(i,o){let{pathname:a="/",search:l="",hash:s=""}=Gl(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ng("",{pathname:a,search:l,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let s=i.location.href,u=s.indexOf("#");l=u===-1?s:s.slice(0,u)}return l+"#"+(typeof o=="string"?o:uh(o))}function r(i,o){Xh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Uw(t,n,r,e)}function ur(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vw(){return Math.random().toString(36).substr(2,8)}function V3(e,t){return{usr:e.state,key:e.key,idx:t}}function Ng(e,t,n,r){return n===void 0&&(n=null),Qc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Gl(t):t,{state:n,key:t&&t.key||r||Vw()})}function uh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Gl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Uw(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=Ca.Pop,s=null,u=f();u==null&&(u=0,a.replaceState(Qc({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function d(){l=Ca.Pop;let S=f(),v=S==null?null:S-u;u=S,s&&s({action:l,location:y.location,delta:v})}function c(S,v){l=Ca.Push;let _=Ng(y.location,S,v);n&&n(_,S),u=f()+1;let x=V3(_,u),O=y.createHref(_);try{a.pushState(x,"",O)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(O)}o&&s&&s({action:l,location:y.location,delta:1})}function p(S,v){l=Ca.Replace;let _=Ng(y.location,S,v);n&&n(_,S),u=f();let x=V3(_,u),O=y.createHref(_);a.replaceState(x,"",O),o&&s&&s({action:l,location:y.location,delta:0})}function g(S){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof S=="string"?S:uh(S);return ur(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let y={get action(){return l},get location(){return e(i,a)},listen(S){if(s)throw new Error("A history only accepts one active listener");return i.addEventListener(G3,d),s=S,()=>{i.removeEventListener(G3,d),s=null}},createHref(S){return t(i,S)},createURL:g,encodeLocation(S){let v=g(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:c,replace:p,go(S){return a.go(S)}};return y}var U3;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(U3||(U3={}));function Hw(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Gl(t):t,i=c2(r.pathname||"/",n);if(i==null)return null;let o=D8(e);Ww(o);let a=null;for(let l=0;a==null&&l<o.length;++l)a=tS(o[l],iS(i));return a}function D8(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,l)=>{let s={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};s.relativePath.startsWith("/")&&(ur(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(r.length));let u=Ia([r,s.relativePath]),f=n.concat(s);o.children&&o.children.length>0&&(ur(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),D8(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Jw(u,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let s of $8(o.path))i(o,a,s)}),t}function $8(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=$8(r.join("/")),l=[];return l.push(...a.map(s=>s===""?o:[o,s].join("/"))),i&&l.push(...a),l.map(s=>e.startsWith("/")&&s===""?"/":s)}function Ww(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:eS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Xw=/^:\w+$/,qw=3,Yw=2,Kw=1,Qw=10,Zw=-2,H3=e=>e==="*";function Jw(e,t){let n=e.split("/"),r=n.length;return n.some(H3)&&(r+=Zw),t&&(r+=Yw),n.filter(i=>!H3(i)).reduce((i,o)=>i+(Xw.test(o)?qw:o===""?Kw:Qw),r)}function eS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function tS(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],s=a===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=nS({path:l.relativePath,caseSensitive:l.caseSensitive,end:s},u);if(!f)return null;Object.assign(r,f.params);let d=l.route;o.push({params:r,pathname:Ia([i,f.pathname]),pathnameBase:sS(Ia([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Ia([i,f.pathnameBase]))}return o}function nS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rS(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:c,isOptional:p}=f;if(c==="*"){let y=l[d]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[d];return p&&!g?u[c]=void 0:u[c]=oS(g||"",c),u},{}),pathname:o,pathnameBase:a,pattern:e}}function rS(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Xh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(a,l,s)=>(r.push({paramName:l,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function iS(e){try{return decodeURI(e)}catch(t){return Xh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function oS(e,t){try{return decodeURIComponent(e)}catch(n){return Xh(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function c2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function aS(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Gl(e):e;return{pathname:n?n.startsWith("/")?n:lS(n,t):t,search:uS(r),hash:cS(i)}}function lS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function om(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j8(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function B8(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Gl(e):(i=Qc({},e),ur(!i.pathname||!i.pathname.includes("?"),om("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),om("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),om("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,l;if(a==null)l=n;else if(r){let d=t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let c=a.split("/");for(;c[0]==="..";)c.shift(),d.pop();i.pathname=c.join("/")}l="/"+d.join("/")}else{let d=t.length-1;if(a.startsWith("..")){let c=a.split("/");for(;c[0]==="..";)c.shift(),d-=1;i.pathname=c.join("/")}l=d>=0?t[d]:"/"}let s=aS(i,l),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&n.endsWith("/");return!s.pathname.endsWith("/")&&(u||f)&&(s.pathname+="/"),s}const Ia=e=>e.join("/").replace(/\/\/+/g,"/"),sS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z8=["post","put","patch","delete"];new Set(z8);const dS=["get",...z8];new Set(dS);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}const f2=T.createContext(null),hS=T.createContext(null),cu=T.createContext(null),qh=T.createContext(null),Ha=T.createContext({outlet:null,matches:[],isDataRoute:!1}),G8=T.createContext(null);function pS(e,t){let{relative:n}=t===void 0?{}:t;gf()||ur(!1);let{basename:r,navigator:i}=T.useContext(cu),{hash:o,pathname:a,search:l}=U8(e,{relative:n}),s=a;return r!=="/"&&(s=a==="/"?r:Ia([r,a])),i.createHref({pathname:s,search:l,hash:o})}function gf(){return T.useContext(qh)!=null}function Yh(){return gf()||ur(!1),T.useContext(qh).location}function V8(e){T.useContext(cu).static||T.useLayoutEffect(e)}function Kh(){let{isDataRoute:e}=T.useContext(Ha);return e?TS():mS()}function mS(){gf()||ur(!1);let e=T.useContext(f2),{basename:t,navigator:n}=T.useContext(cu),{matches:r}=T.useContext(Ha),{pathname:i}=Yh(),o=JSON.stringify(j8(r).map(s=>s.pathnameBase)),a=T.useRef(!1);return V8(()=>{a.current=!0}),T.useCallback(function(s,u){if(u===void 0&&(u={}),!a.current)return;if(typeof s=="number"){n.go(s);return}let f=B8(s,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ia([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,i,e])}function d2(){let{matches:e}=T.useContext(Ha),t=e[e.length-1];return t?t.params:{}}function U8(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=T.useContext(Ha),{pathname:i}=Yh(),o=JSON.stringify(j8(r).map(a=>a.pathnameBase));return T.useMemo(()=>B8(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function gS(e,t){return vS(e,t)}function vS(e,t,n){gf()||ur(!1);let{navigator:r}=T.useContext(cu),{matches:i}=T.useContext(Ha),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let s=Yh(),u;if(t){var f;let y=typeof t=="string"?Gl(t):t;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||ur(!1),u=y}else u=s;let d=u.pathname||"/",c=l==="/"?d:d.slice(l.length)||"/",p=Hw(e,{pathname:c}),g=SS(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Ia([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ia([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n);return t&&g?T.createElement(qh.Provider,{value:{location:ch({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ca.Pop}},g):g}function yS(){let e=AS(),t=fS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:i},n):null,o)}const xS=T.createElement(yS,null);class _S extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?T.createElement(Ha.Provider,{value:this.props.routeContext},T.createElement(G8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wS(e){let{routeContext:t,match:n,children:r}=e,i=T.useContext(f2);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Ha.Provider,{value:t},r)}function SS(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let o=e,a=(r=n)==null?void 0:r.errors;if(a!=null){let l=o.findIndex(s=>s.route.id&&(a==null?void 0:a[s.route.id]));l>=0||ur(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((l,s,u)=>{let f=s.route.id?a==null?void 0:a[s.route.id]:null,d=null;n&&(d=s.route.errorElement||xS);let c=t.concat(o.slice(0,u+1)),p=()=>{let g;return f?g=d:s.route.Component?g=T.createElement(s.route.Component,null):s.route.element?g=s.route.element:g=l,T.createElement(wS,{match:s,routeContext:{outlet:l,matches:c,isDataRoute:n!=null},children:g})};return n&&(s.route.ErrorBoundary||s.route.errorElement||u===0)?T.createElement(_S,{location:n.location,revalidation:n.revalidation,component:d,error:f,children:p(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):p()},null)}var H8=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(H8||{}),fh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fh||{});function ES(e){let t=T.useContext(f2);return t||ur(!1),t}function CS(e){let t=T.useContext(hS);return t||ur(!1),t}function bS(e){let t=T.useContext(Ha);return t||ur(!1),t}function W8(e){let t=bS(),n=t.matches[t.matches.length-1];return n.route.id||ur(!1),n.route.id}function AS(){var e;let t=T.useContext(G8),n=CS(fh.UseRouteError),r=W8(fh.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function TS(){let{router:e}=ES(H8.UseNavigateStable),t=W8(fh.UseNavigateStable),n=T.useRef(!1);return V8(()=>{n.current=!0}),T.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ch({fromRouteId:t},o)))},[e,t])}function vl(e){ur(!1)}function RS(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ca.Pop,navigator:o,static:a=!1}=e;gf()&&ur(!1);let l=t.replace(/^\/*/,"/"),s=T.useMemo(()=>({basename:l,navigator:o,static:a}),[l,o,a]);typeof r=="string"&&(r=Gl(r));let{pathname:u="/",search:f="",hash:d="",state:c=null,key:p="default"}=r,g=T.useMemo(()=>{let y=c2(u,l);return y==null?null:{location:{pathname:y,search:f,hash:d,state:c,key:p},navigationType:i}},[l,u,f,d,c,p,i]);return g==null?null:T.createElement(cu.Provider,{value:s},T.createElement(qh.Provider,{children:n,value:g}))}function LS(e){let{children:t,location:n}=e;return gS(Ig(t),n)}new Promise(()=>{});function Ig(e,t){t===void 0&&(t=[]);let n=[];return T.Children.forEach(e,(r,i)=>{if(!T.isValidElement(r))return;let o=[...t,i];if(r.type===T.Fragment){n.push.apply(n,Ig(r.props.children,o));return}r.type!==vl&&ur(!1),!r.props.index||!r.props.children||ur(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ig(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fg(){return Fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fg.apply(this,arguments)}function PS(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function OS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kS(e,t){return e.button===0&&(!t||t==="_self")&&!OS(e)}const MS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],NS="startTransition",W3=O_[NS];function IS(e){let{basename:t,children:n,future:r,window:i}=e,o=T.useRef();o.current==null&&(o.current=Gw({window:i,v5Compat:!0}));let a=o.current,[l,s]=T.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=T.useCallback(d=>{u&&W3?W3(()=>s(d)):s(d)},[s,u]);return T.useLayoutEffect(()=>a.listen(f),[a,f]),T.createElement(RS,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}const FS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eu=T.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:s,to:u,preventScrollReset:f,unstable_viewTransition:d}=t,c=PS(t,MS),{basename:p}=T.useContext(cu),g,y=!1;if(typeof u=="string"&&DS.test(u)&&(g=u,FS))try{let x=new URL(window.location.href),O=u.startsWith("//")?new URL(x.protocol+u):new URL(u),I=c2(O.pathname,p);O.origin===x.origin&&I!=null?u=I+O.search+O.hash:y=!0}catch{}let S=pS(u,{relative:i}),v=$S(u,{replace:a,state:l,target:s,preventScrollReset:f,relative:i,unstable_viewTransition:d});function _(x){r&&r(x),x.defaultPrevented||v(x)}return T.createElement("a",Fg({},c,{href:g||S,onClick:y||o?r:_,ref:n,target:s}))});var X3;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(X3||(X3={}));var q3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(q3||(q3={}));function $S(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l}=t===void 0?{}:t,s=Kh(),u=Yh(),f=U8(e,{relative:a});return T.useCallback(d=>{if(kS(d,n)){d.preventDefault();let c=r!==void 0?r:uh(u)===uh(f);s(e,{replace:c,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l})}},[u,s,f,r,i,n,e,o,a,l])}var X8={exports:{}},jS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BS=jS,zS=BS;function q8(){}function Y8(){}Y8.resetWarningCache=q8;var GS=function(){function e(r,i,o,a,l,s){if(s!==zS){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Y8,resetWarningCache:q8};return n.PropTypes=n,n};X8.exports=GS();var VS=X8.exports;const Ge=cf(VS);Ge.object,Ge.bool,Ge.func,Ge.func,Ge.func;const n0="https://api.latentscope.com/api";function US(){const[e,t]=T.useState([]);T.useEffect(()=>{fetch(`${n0}/datasets`).then(f=>f.json()).then(f=>t(f))},[]);const[n,r]=T.useState({});T.useEffect(()=>{e.forEach(f=>{fetch(`${n0}/datasets/${f.id}/scopes`).then(d=>d.json()).then(d=>r(c=>{const p={...c};return p[f.id]=d,p}))})},[e]),T.useEffect(()=>{console.log("scopes",n)},[n]);const[i,o]=T.useState(null);function a(f){let d=f.substring(0,f.lastIndexOf("."));return d=d.replace(/\s/g,"-"),d}T.useCallback(f=>{const d=f.target.files[0].name,c=a(d),p=e.some(g=>g.id===c);console.log("is name taken?",p,c,e),u(!!p),document.getElementById("dataset-name").value=c},[e]);const l=Kh();T.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){l(`/datasets/${i.dataset}/setup`)},1e3)},[i,l]);const[s,u]=T.useState(!1);return b.jsxs("div",{className:"home",children:[null,b.jsxs("div",{className:"section datasets",children:[b.jsx("h3",{children:"Datasets"}),b.jsx("div",{className:"datasets-content",children:e.map(f=>{var d;return b.jsxs("div",{className:"dataset",children:[b.jsxs("h3",{children:[" ",f.id,"  ",null]}),b.jsxs("span",{children:[f.length," rows"]}),b.jsx("div",{className:"scope-links",children:n[f.id]&&n[f.id].map&&((d=n[f.id])==null?void 0:d.map((c,p)=>b.jsxs("div",{className:"scope-link",children:[b.jsxs(eu,{to:`/datasets/${f.id}/explore/${c.id}`,children:[c.label||c.id,b.jsx("br",{}),c.ignore_hulls?b.jsx("img",{src:`${n0}/files/${f.id}/umaps/${c.umap_id}.png`}):b.jsx("img",{src:`${n0}/files/${f.id}/clusters/${c.cluster_id}.png`})]}),b.jsx("br",{}),b.jsx("span",{className:"scope-description",children:c.description}),b.jsx("br",{}),null,null]},p)))})]},f.id)})})]})]})}const HS="_settings_rf3gr_2",WS="_header_rf3gr_5",co={settings:HS,header:WS,"dot-env":"_dot-env_rf3gr_14","data-dir":"_data-dir_rf3gr_17","api-keys":"_api-keys_rf3gr_21","api-key":"_api-key_rf3gr_21","key-text":"_key-text_rf3gr_34","api-key-input":"_api-key-input_rf3gr_39"},XS="https://api.latentscope.com/api",qS=()=>{var o;const[e,t]=T.useState({}),[n,r]=T.useState(0);T.useEffect(()=>{fetch(`${XS}/settings`).then(a=>a.json()).then(a=>{t(a),console.log("settings data",a)}).catch(a=>console.error("Error fetching settings:",a))},[n]);const i=T.useCallback((a,l)=>{l.preventDefault(),l.target.elements[0].value,console.error("Settings are read-only")},[n]);return b.jsxs("div",{className:co.settings,children:[b.jsx("h2",{className:co.header,children:"Settings"}),b.jsxs("div",{className:co["dot-env"],children:["Settings are stored in the following ",b.jsx("code",{children:".env"})," file:",b.jsx("br",{}),b.jsx("code",{children:e.env_file})]}),b.jsxs("div",{className:co["data-dir"],children:["All data is stored in the following directory:",b.jsx("br",{}),b.jsx("code",{children:e.data_dir}),b.jsx("br",{}),"As set in the environment variable ",b.jsx("code",{children:"LATENT_SCOPE_DATA"})]}),b.jsxs("div",{className:co["api-keys"],children:[b.jsx("b",{children:"The following API keys are available for use:"}),(o=e.supported_api_keys)==null?void 0:o.map(a=>b.jsxs("span",{className:co["api-key"],children:[e.api_keys.indexOf(a)>=0?b.jsx("span",{className:co["api-key-status"],children:"✅"}):b.jsx("span",{className:co["api-key-status"],children:"◻️"})," ",b.jsx("span",{className:co["key-text"],children:a}),b.jsxs("form",{onSubmit:l=>i(a,l),children:[b.jsx("input",{type:"password",className:co["api-key-input"]}),b.jsx("button",{children:e.api_keys.indexOf(a)>=0?"Update":"Save"})]})]},a))]})]})};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function ba(e,t){return typeof e=="function"?e(t):e}function wi(e,t){return n=>{t.setState(r=>({...r,[e]:ba(n,r[e])}))}}function Qh(e){return e instanceof Function}function YS(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function KS(e,t){const n=[],r=i=>{i.forEach(o=>{n.push(o);const a=t(o);a!=null&&a.length&&r(a)})};return r(e),n}function Ft(e,t,n){let r=[],i;return o=>{let a;n.key&&n.debug&&(a=Date.now());const l=e(o);if(!(l.length!==r.length||l.some((f,d)=>r[d]!==f)))return i;r=l;let u;if(n.key&&n.debug&&(u=Date.now()),i=t(...l),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-a)*100)/100,d=Math.round((Date.now()-u)*100)/100,c=d/16,p=(g,y)=>{for(g=String(g);g.length<y;)g=" "+g;return g};console.info(`%c⏱ ${p(d,5)} /${p(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*c,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function Dt(e,t,n,r){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function QS(e,t,n,r){const i=()=>{var a;return(a=o.getValue())!=null?a:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:Ft(()=>[e,n,t,o],(a,l,s,u)=>({table:a,column:l,row:s,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Dt(e.options,"debugCells"))};return e._features.forEach(a=>{a.createCell==null||a.createCell(o,n,t,e)},{}),o}function ZS(e,t,n,r){var i,o;const l={...e._getDefaultColumnDef(),...t},s=l.accessorKey;let u=(i=(o=l.id)!=null?o:s?s.replace(".","_"):void 0)!=null?i:typeof l.header=="string"?l.header:void 0,f;if(l.accessorFn?f=l.accessorFn:s&&(s.includes(".")?f=c=>{let p=c;for(const y of s.split(".")){var g;p=(g=p)==null?void 0:g[y]}return p}:f=c=>c[l.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:f,parent:r,depth:n,columnDef:l,columns:[],getFlatColumns:Ft(()=>[!0],()=>{var c;return[d,...(c=d.columns)==null?void 0:c.flatMap(p=>p.getFlatColumns())]},Dt(e.options,"debugColumns")),getLeafColumns:Ft(()=>[e._getOrderColumnsFn()],c=>{var p;if((p=d.columns)!=null&&p.length){let g=d.columns.flatMap(y=>y.getLeafColumns());return c(g)}return[d]},Dt(e.options,"debugColumns"))};for(const c of e._features)c.createColumn==null||c.createColumn(d,e);return d}const kr="debugHeaders";function Y3(e,t,n){var r;let o={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],l=s=>{s.subHeaders&&s.subHeaders.length&&s.subHeaders.map(l),a.push(s)};return l(o),a},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(a=>{a.createHeader==null||a.createHeader(o,e)}),o}const JS={createTable:e=>{e.getHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var o,a;const l=(o=r==null?void 0:r.map(d=>n.find(c=>c.id===d)).filter(Boolean))!=null?o:[],s=(a=i==null?void 0:i.map(d=>n.find(c=>c.id===d)).filter(Boolean))!=null?a:[],u=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(i!=null&&i.includes(d.id)));return r0(t,[...l,...u,...s],e)},Dt(e.options,kr)),e.getCenterHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(o=>!(r!=null&&r.includes(o.id))&&!(i!=null&&i.includes(o.id))),r0(t,n,e,"center")),Dt(e.options,kr)),e.getLeftHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const o=(i=r==null?void 0:r.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?i:[];return r0(t,o,e,"left")},Dt(e.options,kr)),e.getRightHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const o=(i=r==null?void 0:r.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?i:[];return r0(t,o,e,"right")},Dt(e.options,kr)),e.getFooterGroups=Ft(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Dt(e.options,kr)),e.getLeftFooterGroups=Ft(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Dt(e.options,kr)),e.getCenterFooterGroups=Ft(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Dt(e.options,kr)),e.getRightFooterGroups=Ft(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Dt(e.options,kr)),e.getFlatHeaders=Ft(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,kr)),e.getLeftFlatHeaders=Ft(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,kr)),e.getCenterFlatHeaders=Ft(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,kr)),e.getRightFlatHeaders=Ft(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Dt(e.options,kr)),e.getCenterLeafHeaders=Ft(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Dt(e.options,kr)),e.getLeftLeafHeaders=Ft(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Dt(e.options,kr)),e.getRightLeafHeaders=Ft(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Dt(e.options,kr)),e.getLeafHeaders=Ft(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,o,a,l,s,u;return[...(i=(o=t[0])==null?void 0:o.headers)!=null?i:[],...(a=(l=n[0])==null?void 0:l.headers)!=null?a:[],...(s=(u=r[0])==null?void 0:u.headers)!=null?s:[]].map(f=>f.getLeafHeaders()).flat()},Dt(e.options,kr))}};function r0(e,t,n,r){var i,o;let a=0;const l=function(c,p){p===void 0&&(p=1),a=Math.max(a,p),c.filter(g=>g.getIsVisible()).forEach(g=>{var y;(y=g.columns)!=null&&y.length&&l(g.columns,p+1)},0)};l(e);let s=[];const u=(c,p)=>{const g={depth:p,id:[r,`${p}`].filter(Boolean).join("_"),headers:[]},y=[];c.forEach(S=>{const v=[...y].reverse()[0],_=S.column.depth===g.depth;let x,O=!1;if(_&&S.column.parent?x=S.column.parent:(x=S.column,O=!0),v&&(v==null?void 0:v.column)===x)v.subHeaders.push(S);else{const I=Y3(n,x,{id:[r,p,x.id,S==null?void 0:S.id].filter(Boolean).join("_"),isPlaceholder:O,placeholderId:O?`${y.filter(U=>U.column===x).length}`:void 0,depth:p,index:y.length});I.subHeaders.push(S),y.push(I)}g.headers.push(S),S.headerGroup=g}),s.push(g),p>0&&u(y,p-1)},f=t.map((c,p)=>Y3(n,c,{depth:a,index:p}));u(f,a-1),s.reverse();const d=c=>c.filter(g=>g.column.getIsVisible()).map(g=>{let y=0,S=0,v=[0];g.subHeaders&&g.subHeaders.length?(v=[],d(g.subHeaders).forEach(x=>{let{colSpan:O,rowSpan:I}=x;y+=O,v.push(I)})):y=1;const _=Math.min(...v);return S=S+_,g.colSpan=y,g.rowSpan=S,{colSpan:y,rowSpan:S}});return d((i=(o=s[0])==null?void 0:o.headers)!=null?i:[]),s}const h2=(e,t,n,r,i,o,a)=>{let l={id:t,index:r,original:n,depth:i,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:s=>{if(l._valuesCache.hasOwnProperty(s))return l._valuesCache[s];const u=e.getColumn(s);if(u!=null&&u.accessorFn)return l._valuesCache[s]=u.accessorFn(l.original,r),l._valuesCache[s]},getUniqueValues:s=>{if(l._uniqueValuesCache.hasOwnProperty(s))return l._uniqueValuesCache[s];const u=e.getColumn(s);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(l._uniqueValuesCache[s]=u.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[s]):(l._uniqueValuesCache[s]=[l.getValue(s)],l._uniqueValuesCache[s])},renderValue:s=>{var u;return(u=l.getValue(s))!=null?u:e.options.renderFallbackValue},subRows:o??[],getLeafRows:()=>KS(l.subRows,s=>s.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let s=[],u=l;for(;;){const f=u.getParentRow();if(!f)break;s.push(f),u=f}return s.reverse()},getAllCells:Ft(()=>[e.getAllLeafColumns()],s=>s.map(u=>QS(e,l,u,u.id)),Dt(e.options,"debugRows")),_getAllCellsByColumnId:Ft(()=>[l.getAllCells()],s=>s.reduce((u,f)=>(u[f.column.id]=f,u),{}),Dt(e.options,"debugRows"))};for(let s=0;s<e._features.length;s++){const u=e._features[s];u==null||u.createRow==null||u.createRow(l,e)}return l},eE={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},K8=(e,t,n)=>{var r;const i=n.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};K8.autoRemove=e=>Qi(e);const Q8=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};Q8.autoRemove=e=>Qi(e);const Z8=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};Z8.autoRemove=e=>Qi(e);const J8=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};J8.autoRemove=e=>Qi(e)||!(e!=null&&e.length);const ex=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});ex.autoRemove=e=>Qi(e)||!(e!=null&&e.length);const tx=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});tx.autoRemove=e=>Qi(e)||!(e!=null&&e.length);const nx=(e,t,n)=>e.getValue(t)===n;nx.autoRemove=e=>Qi(e);const rx=(e,t,n)=>e.getValue(t)==n;rx.autoRemove=e=>Qi(e);const p2=(e,t,n)=>{let[r,i]=n;const o=e.getValue(t);return o>=r&&o<=i};p2.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(r)?-1/0:r,a=n===null||Number.isNaN(i)?1/0:i;if(o>a){const l=o;o=a,a=l}return[o,a]};p2.autoRemove=e=>Qi(e)||Qi(e[0])&&Qi(e[1]);const Fo={includesString:K8,includesStringSensitive:Q8,equalsString:Z8,arrIncludes:J8,arrIncludesAll:ex,arrIncludesSome:tx,equals:nx,weakEquals:rx,inNumberRange:p2};function Qi(e){return e==null||e===""}const tE={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:wi("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?Fo.includesString:typeof r=="number"?Fo.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Fo.equals:Array.isArray(r)?Fo.arrIncludes:Fo.weakEquals},e.getFilterFn=()=>{var n,r;return Qh(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:Fo[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),o=r==null?void 0:r.find(f=>f.id===e.id),a=ba(n,o?o.value:void 0);if(K3(i,a,e)){var l;return(l=r==null?void 0:r.filter(f=>f.id!==e.id))!=null?l:[]}const s={id:e.id,value:a};if(o){var u;return(u=r==null?void 0:r.map(f=>f.id===e.id?s:f))!=null?u:[]}return r!=null&&r.length?[...r,s]:[s]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var o;return(o=ba(t,i))==null?void 0:o.filter(a=>{const l=n.find(s=>s.id===a.id);if(l){const s=l.getFilterFn();if(K3(s,a.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function K3(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const nE=(e,t,n)=>n.reduce((r,i)=>{const o=i.getValue(e);return r+(typeof o=="number"?o:0)},0),rE=(e,t,n)=>{let r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}),r},iE=(e,t,n)=>{let r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}),r},oE=(e,t,n)=>{let r,i;return n.forEach(o=>{const a=o.getValue(e);a!=null&&(r===void 0?a>=a&&(r=i=a):(r>a&&(r=a),i<a&&(i=a)))}),[r,i]},aE=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let o=i.getValue(e);o!=null&&(o=+o)>=o&&(++n,r+=o)}),n)return r/n},lE=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!YS(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((o,a)=>o-a);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},sE=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),uE=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,cE=(e,t)=>t.length,am={sum:nE,min:rE,max:iE,extent:oE,mean:aE,median:lE,unique:sE,uniqueCount:uE,count:cE},fE={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:wi("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r,i,o;return(n=(r=(i=(o=e.columnDef.enableGrouping)!=null?o:!0)!=null?i:t.options.enableGrouping)!=null?r:!0)!=null?n:!!e.accessorFn},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return am.sum;if(Object.prototype.toString.call(r)==="[object Date]")return am.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Qh(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:am[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function dE(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(o=>!t.includes(o.id));return n==="remove"?r:[...t.map(o=>e.find(a=>a.id===o)).filter(Boolean),...r]}const hE={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:wi("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Ft(n=>[Pc(t,n)],n=>n.findIndex(r=>r.id===e.id),Dt(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=Pc(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=Pc(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Ft(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let o=[];if(!(t!=null&&t.length))o=i;else{const a=[...t],l=[...i];for(;l.length&&a.length;){const s=a.shift(),u=l.findIndex(f=>f.id===s);u>-1&&o.push(l.splice(u,1)[0])}o=[...o,...l]}return dE(o,n,r)},Dt(e.options,"debugTable"))}},lm=()=>({left:[],right:[]}),pE={getInitialState:e=>({columnPinning:lm(),...e}),getDefaultOptions:e=>({onColumnPinningChange:wi("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var o,a;if(n==="right"){var l,s;return{left:((l=i==null?void 0:i.left)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((s=i==null?void 0:i.right)!=null?s:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var u,f;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((f=i==null?void 0:i.right)!=null?f:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((o=i==null?void 0:i.left)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d))),right:((a=i==null?void 0:i.right)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,o,a;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((o=(a=t.options.enableColumnPinning)!=null?a:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:r,right:i}=t.getState().columnPinning,o=n.some(l=>r==null?void 0:r.includes(l)),a=n.some(l=>i==null?void 0:i.includes(l));return o?"left":a?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const o=[...r??[],...i??[]];return n.filter(a=>!o.includes(a.column.id))},Dt(t.options,"debugRows")),e.getLeftVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(o=>n.find(a=>a.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Dt(t.options,"debugRows")),e.getRightVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(o=>n.find(a=>a.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Dt(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?lm():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:lm())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,o;return!!((i=r.left)!=null&&i.length||(o=r.right)!=null&&o.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),Dt(e.options,"debugColumns")),e.getRightLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),Dt(e.options,"debugColumns")),e.getCenterLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(o=>!i.includes(o.id))},Dt(e.options,"debugColumns"))}},i0={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},sm=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),mE={getDefaultColumnDef:()=>i0,getInitialState:e=>({columnSizing:{},columnSizingInfo:sm(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:wi("columnSizing",e),onColumnSizingInfoChange:wi("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:i0.minSize,(r=o??e.columnDef.size)!=null?r:i0.size),(i=e.columnDef.maxSize)!=null?i:i0.maxSize)},e.getStart=Ft(n=>[n,Pc(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,o)=>i+o.getSize(),0),Dt(t.options,"debugColumns")),e.getAfter=Ft(n=>[n,Pc(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,o)=>i+o.getSize(),0),Dt(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var o;n+=(o=i.column.getSize())!=null?o:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r==null?void 0:r.getCanResize();return o=>{if(!r||!i||(o.persist==null||o.persist(),um(o)&&o.touches&&o.touches.length>1))return;const a=e.getSize(),l=e?e.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[r.id,r.getSize()]],s=um(o)?Math.round(o.touches[0].clientX):o.clientX,u={},f=(v,_)=>{typeof _=="number"&&(t.setColumnSizingInfo(x=>{var O,I;const U=t.options.columnResizeDirection==="rtl"?-1:1,te=(_-((O=x==null?void 0:x.startOffset)!=null?O:0))*U,K=Math.max(te/((I=x==null?void 0:x.startSize)!=null?I:0),-.999999);return x.columnSizingStart.forEach($e=>{let[Ee,Re]=$e;u[Ee]=Math.round(Math.max(Re+Re*K,0)*100)/100}),{...x,deltaOffset:te,deltaPercentage:K}}),(t.options.columnResizeMode==="onChange"||v==="end")&&t.setColumnSizing(x=>({...x,...u})))},d=v=>f("move",v),c=v=>{f("end",v),t.setColumnSizingInfo(_=>({..._,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||typeof document<"u"?document:null,g={moveHandler:v=>d(v.clientX),upHandler:v=>{p==null||p.removeEventListener("mousemove",g.moveHandler),p==null||p.removeEventListener("mouseup",g.upHandler),c(v.clientX)}},y={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),d(v.touches[0].clientX),!1),upHandler:v=>{var _;p==null||p.removeEventListener("touchmove",y.moveHandler),p==null||p.removeEventListener("touchend",y.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),c((_=v.touches[0])==null?void 0:_.clientX)}},S=gE()?{passive:!1}:!1;um(o)?(p==null||p.addEventListener("touchmove",y.moveHandler,S),p==null||p.addEventListener("touchend",y.upHandler,S)):(p==null||p.addEventListener("mousemove",g.moveHandler,S),p==null||p.addEventListener("mouseup",g.upHandler,S)),t.setColumnSizingInfo(v=>({...v,startOffset:s,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?sm():(n=e.initialState.columnSizingInfo)!=null?n:sm())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let o0=null;function gE(){if(typeof o0=="boolean")return o0;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return o0=e,o0}function um(e){return e.type==="touchstart"}const vE={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:wi("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(o=>o.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Ft(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Dt(t.options,"debugRows")),e.getVisibleCells=Ft(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],Dt(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>Ft(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Dt(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,o)=>({...i,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Pc(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const yE={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:wi("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Fo.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Qh(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:Fo[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},xE={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:wi("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,o;e.setExpanded(r?{}:(i=(o=e.initialState)==null?void 0:o.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const a=o.split(".");r=Math.max(r,a.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const o=r===!0?!0:!!(r!=null&&r[e.id]);let a={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{a[l]=!0}):a=r,n=(i=n)!=null?i:!o,!o&&n)return{...a,[e.id]:!0};if(o&&!n){const{[e.id]:l,...s}=a;return s}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Dg=0,$g=10,cm=()=>({pageIndex:Dg,pageSize:$g}),_E={getInitialState:e=>({...e,pagination:{...cm(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:wi("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=o=>ba(r,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?cm():(i=e.initialState.pagination)!=null?i:cm())},e.setPageIndex=r=>{e.setPagination(i=>{let o=ba(r,i.pageIndex);const a=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,a)),{...i,pageIndex:o}})},e.resetPageIndex=r=>{var i,o;e.setPageIndex(r?Dg:(i=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?i:Dg)},e.resetPageSize=r=>{var i,o;e.setPageSize(r?$g:(i=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?i:$g)},e.setPageSize=r=>{e.setPagination(i=>{const o=Math.max(1,ba(r,i.pageSize)),a=i.pageSize*i.pageIndex,l=Math.floor(a/o);return{...i,pageIndex:l,pageSize:o}})},e.setPageCount=r=>e.setPagination(i=>{var o;let a=ba(r,(o=e.options.pageCount)!=null?o:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...i,pageCount:a}}),e.getPageOptions=Ft(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((o,a)=>a)),i},Dt(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},fm=()=>({top:[],bottom:[]}),wE={getInitialState:e=>({rowPinning:fm(),...e}),getDefaultOptions:e=>({onRowPinningChange:wi("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const o=r?e.getLeafRows().map(s=>{let{id:u}=s;return u}):[],a=i?e.getParentRows().map(s=>{let{id:u}=s;return u}):[],l=new Set([...a,e.id,...o]);t.setRowPinning(s=>{var u,f;if(n==="bottom"){var d,c;return{top:((d=s==null?void 0:s.top)!=null?d:[]).filter(y=>!(l!=null&&l.has(y))),bottom:[...((c=s==null?void 0:s.bottom)!=null?c:[]).filter(y=>!(l!=null&&l.has(y))),...Array.from(l)]}}if(n==="top"){var p,g;return{top:[...((p=s==null?void 0:s.top)!=null?p:[]).filter(y=>!(l!=null&&l.has(y))),...Array.from(l)],bottom:((g=s==null?void 0:s.bottom)!=null?g:[]).filter(y=>!(l!=null&&l.has(y)))}}return{top:((u=s==null?void 0:s.top)!=null?u:[]).filter(y=>!(l!=null&&l.has(y))),bottom:((f=s==null?void 0:s.bottom)!=null?f:[]).filter(y=>!(l!=null&&l.has(y)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,o=n.some(l=>r==null?void 0:r.includes(l)),a=n.some(l=>i==null?void 0:i.includes(l));return o?"top":a?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const o=(n=t._getPinnedRows(i))==null?void 0:n.map(a=>{let{id:l}=a;return l});return(r=o==null?void 0:o.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?fm():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:fm())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,o;return!!((i=r.top)!=null&&i.length||(o=r.bottom)!=null&&o.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=Ft(t=>[e.getRowModel().rows,e.getState().rowPinning[t],t],(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(a=>{const l=e.getRow(a,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(a=>t.find(l=>l.id===a))).filter(Boolean).map(a=>({...a,position:r}))},Dt(e.options,"debugRows")),e.getTopRows=()=>e._getPinnedRows("top"),e.getBottomRows=()=>e._getPinnedRows("bottom"),e.getCenterRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(o=>!i.has(o.id))},Dt(e.options,"debugRows"))}},SE={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:wi("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(o=>{o.getCanSelect()&&(r[o.id]=!0)}):i.forEach(o=>{delete r[o.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(o=>{jg(i,o.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?dm(e,n):{rows:[],flatRows:[],rowsById:{}},Dt(e.options,"debugTable")),e.getFilteredSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?dm(e,n):{rows:[],flatRows:[],rowsById:{}},Dt(e.options,"debugTable")),e.getGroupedSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?dm(e,n):{rows:[],flatRows:[],rowsById:{}},Dt(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(o=>{var a;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return o;const l={...o};return jg(l,e.id,n,(a=r==null?void 0:r.selectChildren)!=null?a:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return m2(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Bg(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Bg(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},jg=(e,t,n,r,i)=>{var o;const a=i.getRow(t,!0);n?(a.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),a.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(o=a.subRows)!=null&&o.length&&a.getCanSelectSubRows()&&a.subRows.forEach(l=>jg(e,l.id,n,r,i))};function dm(e,t){const n=e.getState().rowSelection,r=[],i={},o=function(a,l){return a.map(s=>{var u;const f=m2(s,n);if(f&&(r.push(s),i[s.id]=s),(u=s.subRows)!=null&&u.length&&(s={...s,subRows:o(s.subRows)}),f)return s}).filter(Boolean)};return{rows:o(t.rows),flatRows:r,rowsById:i}}function m2(e,t){var n;return(n=t[e.id])!=null?n:!1}function Bg(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,o=!1;return e.subRows.forEach(a=>{if(!(o&&!i)&&(a.getCanSelect()&&(m2(a,t)?o=!0:i=!1),a.subRows&&a.subRows.length)){const l=Bg(a,t);l==="all"?o=!0:(l==="some"&&(o=!0),i=!1)}}),i?"all":o?"some":!1}const zg=/([0-9]+)/gm,EE=(e,t,n)=>ix($a(e.getValue(n)).toLowerCase(),$a(t.getValue(n)).toLowerCase()),CE=(e,t,n)=>ix($a(e.getValue(n)),$a(t.getValue(n))),bE=(e,t,n)=>g2($a(e.getValue(n)).toLowerCase(),$a(t.getValue(n)).toLowerCase()),AE=(e,t,n)=>g2($a(e.getValue(n)),$a(t.getValue(n))),TE=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},RE=(e,t,n)=>g2(e.getValue(n),t.getValue(n));function g2(e,t){return e===t?0:e>t?1:-1}function $a(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function ix(e,t){const n=e.split(zg).filter(Boolean),r=t.split(zg).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),o=r.shift(),a=parseInt(i,10),l=parseInt(o,10),s=[a,l].sort();if(isNaN(s[0])){if(i>o)return 1;if(o>i)return-1;continue}if(isNaN(s[1]))return isNaN(a)?-1:1;if(a>l)return 1;if(l>a)return-1}return n.length-r.length}const cc={alphanumeric:EE,alphanumericCaseSensitive:CE,text:bE,textCaseSensitive:AE,datetime:TE,basic:RE},LE={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:wi("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const o=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return cc.datetime;if(typeof o=="string"&&(r=!0,o.split(zg).length>1))return cc.alphanumeric}return r?cc.text:cc.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Qh(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:cc[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(a=>{const l=a==null?void 0:a.find(p=>p.id===e.id),s=a==null?void 0:a.findIndex(p=>p.id===e.id);let u=[],f,d=o?n:i==="desc";if(a!=null&&a.length&&e.getCanMultiSort()&&r?l?f="toggle":f="add":a!=null&&a.length&&s!==a.length-1?f="replace":l?f="toggle":f="replace",f==="toggle"&&(o||i||(f="remove")),f==="add"){var c;u=[...a,{id:e.id,desc:d}],u.splice(0,u.length-((c=t.options.maxMultiSortColCount)!=null?c:Number.MAX_SAFE_INTEGER))}else f==="toggle"?u=a.map(p=>p.id===e.id?{...p,desc:d}:p):f==="remove"?u=a.filter(p=>p.id!==e.id):u=[{id:e.id,desc:d}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const o=e.getFirstSortDir(),a=e.getIsSorted();return a?a!==o&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:a==="desc"?"asc":"desc":o},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},PE=[JS,vE,hE,pE,eE,tE,yE,LE,fE,xE,_E,wE,SE,mE];function OE(e){var t,n;const r=[...PE,...(t=e._features)!=null?t:[]];let i={_features:r};const o=i._features.reduce((c,p)=>Object.assign(c,p.getDefaultOptions==null?void 0:p.getDefaultOptions(i)),{}),a=c=>i.options.mergeOptions?i.options.mergeOptions(o,c):{...o,...c};let s={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(c=>{var p;s=(p=c.getInitialState==null?void 0:c.getInitialState(s))!=null?p:s});const u=[];let f=!1;const d={_features:r,options:{...o,...e},initialState:s,_queue:c=>{u.push(c),f||(f=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();f=!1}).catch(p=>setTimeout(()=>{throw p})))},reset:()=>{i.setState(i.initialState)},setOptions:c=>{const p=ba(c,i.options);i.options=a(p)},getState:()=>i.options.state,setState:c=>{i.options.onStateChange==null||i.options.onStateChange(c)},_getRowId:(c,p,g)=>{var y;return(y=i.options.getRowId==null?void 0:i.options.getRowId(c,p,g))!=null?y:`${g?[g.id,p].join("."):p}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(c,p)=>{let g=(p?i.getPrePaginationRowModel():i.getRowModel()).rowsById[c];if(!g&&(g=i.getCoreRowModel().rowsById[c],!g))throw new Error;return g},_getDefaultColumnDef:Ft(()=>[i.options.defaultColumn],c=>{var p;return c=(p=c)!=null?p:{},{header:g=>{const y=g.header.column.columnDef;return y.accessorKey?y.accessorKey:y.accessorFn?y.id:null},cell:g=>{var y,S;return(y=(S=g.renderValue())==null||S.toString==null?void 0:S.toString())!=null?y:null},...i._features.reduce((g,y)=>Object.assign(g,y.getDefaultColumnDef==null?void 0:y.getDefaultColumnDef()),{}),...c}},Dt(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Ft(()=>[i._getColumnDefs()],c=>{const p=function(g,y,S){return S===void 0&&(S=0),g.map(v=>{const _=ZS(i,v,S,y),x=v;return _.columns=x.columns?p(x.columns,_,S+1):[],_})};return p(c)},Dt(e,"debugColumns")),getAllFlatColumns:Ft(()=>[i.getAllColumns()],c=>c.flatMap(p=>p.getFlatColumns()),Dt(e,"debugColumns")),_getAllFlatColumnsById:Ft(()=>[i.getAllFlatColumns()],c=>c.reduce((p,g)=>(p[g.id]=g,p),{}),Dt(e,"debugColumns")),getAllLeafColumns:Ft(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(c,p)=>{let g=c.flatMap(y=>y.getLeafColumns());return p(g)},Dt(e,"debugColumns")),getColumn:c=>i._getAllFlatColumnsById()[c]};Object.assign(i,d);for(let c=0;c<i._features.length;c++){const p=i._features[c];p==null||p.createTable==null||p.createTable(i)}return i}function kE(){return e=>Ft(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,o,a){o===void 0&&(o=0);const l=[];for(let u=0;u<i.length;u++){const f=h2(e,e._getRowId(i[u],u,a),i[u],u,o,void 0,a==null?void 0:a.id);if(n.flatRows.push(f),n.rowsById[f.id]=f,l.push(f),e.options.getSubRows){var s;f.originalSubRows=e.options.getSubRows(i[u],u),(s=f.originalSubRows)!=null&&s.length&&(f.subRows=r(f.originalSubRows,o+1,f))}}return l};return n.rows=r(t),n},Dt(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function ME(){return(e,t)=>Ft(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{var r;if(!n)return;const i=(r=n.flatRows[0])==null?void 0:r.getUniqueValues(t);if(typeof i>"u")return;let o=[i,i];for(let a=0;a<n.flatRows.length;a++){const l=n.flatRows[a].getUniqueValues(t);for(let s=0;s<l.length;s++){const u=l[s];u<o[0]?o[0]=u:u>o[1]&&(o[1]=u)}}return o},Dt(e.options,"debugTable"))}function ox(e,t,n){return n.options.filterFromLeafRows?NE(e,t,n):IE(e,t,n)}function NE(e,t,n){var r;const i=[],o={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(s,u){u===void 0&&(u=0);const f=[];for(let c=0;c<s.length;c++){var d;let p=s[c];const g=h2(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(g.columnFilters=p.columnFilters,(d=p.subRows)!=null&&d.length&&u<a){if(g.subRows=l(p.subRows,u+1),p=g,t(p)&&!g.subRows.length){f.push(p),o[p.id]=p,i.push(p);continue}if(t(p)||g.subRows.length){f.push(p),o[p.id]=p,i.push(p);continue}}else p=g,t(p)&&(f.push(p),o[p.id]=p,i.push(p))}return f};return{rows:l(e),flatRows:i,rowsById:o}}function IE(e,t,n){var r;const i=[],o={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(s,u){u===void 0&&(u=0);const f=[];for(let c=0;c<s.length;c++){let p=s[c];if(t(p)){var d;if((d=p.subRows)!=null&&d.length&&u<a){const y=h2(n,p.id,p.original,p.index,p.depth,void 0,p.parentId);y.subRows=l(p.subRows,u+1),p=y}f.push(p),i.push(p),o[p.id]=p}}return f};return{rows:l(e),flatRows:i,rowsById:o}}function FE(){return(e,t)=>Ft(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const o=[...r.map(l=>l.id).filter(l=>l!==t),i?"__global__":void 0].filter(Boolean),a=l=>{for(let s=0;s<o.length;s++)if(l.columnFilters[o[s]]===!1)return!1;return!0};return ox(n.rows,a,e)},Dt(e.options,"debugTable"))}function DE(){return(e,t)=>Ft(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return new Map;let r=new Map;for(let o=0;o<n.flatRows.length;o++){const a=n.flatRows[o].getUniqueValues(t);for(let l=0;l<a.length;l++){const s=a[l];if(r.has(s)){var i;r.set(s,((i=r.get(s))!=null?i:0)+1)}else r.set(s,1)}}return r},Dt(e.options,"debugTable"))}function $E(){return e=>Ft(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let c=0;c<t.flatRows.length;c++)t.flatRows[c].columnFilters={},t.flatRows[c].columnFiltersMeta={};return t}const i=[],o=[];(n??[]).forEach(c=>{var p;const g=e.getColumn(c.id);if(!g)return;const y=g.getFilterFn();y&&i.push({id:c.id,filterFn:y,resolvedValue:(p=y.resolveFilterValue==null?void 0:y.resolveFilterValue(c.value))!=null?p:c.value})});const a=n.map(c=>c.id),l=e.getGlobalFilterFn(),s=e.getAllLeafColumns().filter(c=>c.getCanGlobalFilter());r&&l&&s.length&&(a.push("__global__"),s.forEach(c=>{var p;o.push({id:c.id,filterFn:l,resolvedValue:(p=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?p:r})}));let u,f;for(let c=0;c<t.flatRows.length;c++){const p=t.flatRows[c];if(p.columnFilters={},i.length)for(let g=0;g<i.length;g++){u=i[g];const y=u.id;p.columnFilters[y]=u.filterFn(p,y,u.resolvedValue,S=>{p.columnFiltersMeta[y]=S})}if(o.length){for(let g=0;g<o.length;g++){f=o[g];const y=f.id;if(f.filterFn(p,y,f.resolvedValue,S=>{p.columnFiltersMeta[y]=S})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const d=c=>{for(let p=0;p<a.length;p++)if(c.columnFilters[a[p]]===!1)return!1;return!0};return ox(t.rows,d,e)},Dt(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function jE(){return e=>Ft(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],o=r.filter(s=>{var u;return(u=e.getColumn(s.id))==null?void 0:u.getCanSort()}),a={};o.forEach(s=>{const u=e.getColumn(s.id);u&&(a[s.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const l=s=>{const u=s.map(f=>({...f}));return u.sort((f,d)=>{for(let p=0;p<o.length;p+=1){var c;const g=o[p],y=a[g.id],S=(c=g==null?void 0:g.desc)!=null?c:!1;let v=0;if(y.sortUndefined){const _=f.getValue(g.id),x=d.getValue(g.id),O=_===void 0,I=x===void 0;(O||I)&&(v=O&&I?0:O?y.sortUndefined:-y.sortUndefined)}if(v===0&&(v=y.sortingFn(f,d,g.id)),v!==0)return S&&(v*=-1),y.invertSorting&&(v*=-1),v}return f.index-d.index}),u.forEach(f=>{var d;i.push(f),(d=f.subRows)!=null&&d.length&&(f.subRows=l(f.subRows))}),u};return{rows:l(n.rows),flatRows:i,rowsById:n.rowsById}},Dt(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function hm(e,t){return e?BE(e)?T.createElement(e,t):e:null}function BE(e){return zE(e)||typeof e=="function"||GE(e)}function zE(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function GE(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function VE(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=T.useState(()=>({current:OE(t)})),[r,i]=T.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...e,state:{...r,...e.state},onStateChange:a=>{i(a),e.onStateChange==null||e.onStateChange(a)}})),n.current}/**
   * match-sorter-utils
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */const ax={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},UE=Object.keys(ax).join("|"),HE=new RegExp(UE,"g");function WE(e){return e.replace(HE,t=>ax[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Zr={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function XE(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:Zr.MATCHES,!n.accessors){const a=Q3(e,t,n);return{rankedValue:e,rank:a,accessorIndex:-1,accessorThreshold:n.threshold,passed:a>=n.threshold}}const i=QE(e,n.accessors),o={rankedValue:e,rank:Zr.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let a=0;a<i.length;a++){const l=i[a];let s=Q3(l.itemValue,t,n);const{minRanking:u,maxRanking:f,threshold:d=n.threshold}=l.attributes;s<u&&s>=Zr.MATCHES?s=u:s>f&&(s=f),s=Math.min(s,f),s>=d&&s>o.rank&&(o.rank=s,o.passed=!0,o.accessorIndex=a,o.accessorThreshold=d,o.rankedValue=l.itemValue)}return o}function Q3(e,t,n){return e=Z3(e,n),t=Z3(t,n),t.length>e.length?Zr.NO_MATCH:e===t?Zr.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Zr.EQUAL:e.startsWith(t)?Zr.STARTS_WITH:e.includes(` ${t}`)?Zr.WORD_STARTS_WITH:e.includes(t)?Zr.CONTAINS:t.length===1?Zr.NO_MATCH:qE(e).includes(t)?Zr.ACRONYM:YE(e,t))}function qE(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(o=>{t+=o.substr(0,1)})}),t}function YE(e,t){let n=0,r=0;function i(s,u,f){for(let d=f,c=u.length;d<c;d++)if(u[d]===s)return n+=1,d+1;return-1}function o(s){const u=1/s,f=n/t.length;return Zr.MATCHES+f*u}const a=i(t[0],e,0);if(a<0)return Zr.NO_MATCH;r=a;for(let s=1,u=t.length;s<u;s++){const f=t[s];if(r=i(f,e,r),!(r>-1))return Zr.NO_MATCH}const l=r-a;return o(l)}function Z3(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=WE(e)),e}function KE(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function QE(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const o=t[r],a=ZE(o),l=KE(e,o);for(let s=0,u=l.length;s<u;s++)n.push({itemValue:l[s],attributes:a})}return n}const J3={maxRanking:1/0,minRanking:-1/0};function ZE(e){return typeof e=="function"?J3:{...J3,...e}}const a0="https://api.latentscope.com/api",e6=(e,t,n,r)=>{const i=XE(e.getValue(t),n);return r({itemRank:i}),i.passed};lx.propTypes={height:Ge.string,dataset:Ge.object.isRequired,scope:Ge.object.isRequired,indices:Ge.array.isRequired,distances:Ge.array,clusterMap:Ge.object,clusterLabels:Ge.array,tagset:Ge.object,onTagset:Ge.func,onScope:Ge.func,onHover:Ge.func,onClick:Ge.func};function lx({height:e="calc(100% - 40px)",dataset:t,scope:n,indices:r=[],distances:i=[],clusterMap:o={},clusterLabels:a,tagset:l,onTagset:s,onScope:u,onHover:f,onClick:d}){const[c,p]=T.useState([]),[g,y]=T.useState([]),[S,v]=T.useState(0),[_,x]=T.useState(0),[O,I]=T.useState([]);T.useEffect(()=>{l&&I(Object.keys(l))},[l]);function U(ee,ue){l[ee].includes(ue)?(console.log("removing"),fetch(`${a0}/tags/remove?dataset=${t==null?void 0:t.id}&tag=${ee}&index=${ue}`).then(ce=>ce.json()).then(ce=>{console.log("removed",ce),s()})):(console.log("adding"),fetch(`${a0}/tags/add?dataset=${t==null?void 0:t.id}&tag=${ee}&index=${ue}`).then(ce=>ce.json()).then(ce=>{console.log("added",ce),s()}))}const te=T.useCallback(ee=>{t&&ee.length?fetch(`${a0}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:t.id,indices:ee,page:_})}).then(ue=>ue.json()).then(ue=>{let{rows:ce,totalPages:xe,total:Qe}=ue;v(xe),Object.keys(o).length&&ce.forEach(st=>{let wt=st.ls_index,At=o[wt];At&&(st.ls_cluster=At)}),i&&i.length&&ce.forEach(st=>{let wt=st.ls_index;st.ls_distance=i[wt]}),y(ce)}):y([])},[t,i,o,_]);T.useEffect(()=>{if(t){let ee=["ls_index"];n&&ee.push("ls_cluster"),l&&Object.keys(l).length&&ee.push("tags"),ee.push(t.text_column),ee=ee.concat(t.columns.filter(ce=>ce!==t.text_column));let ue=ee.map((ce,xe)=>{const Qe=t.column_metadata?t.column_metadata[ce]:null;return{id:""+xe,cell:st=>{const wt=st.getValue();let At=wt,$t=st.row.getValue("0");return Qe!=null&&Qe.image?b.jsx("a",{href:wt,target:"_blank",rel:"noreferrer",children:b.jsx("img",{src:wt,alt:"",style:{height:"100px"}})}):Qe!=null&&Qe.url?b.jsx("a",{href:wt,target:"_blank",rel:"noopener noreferrer",children:"url"}):((Qe==null?void 0:Qe.type)==="array"?At=Array.isArray(wt)?`[${wt.length}]`:"":typeof wt=="object"&&(At=JSON.stringify(wt)),ce==="tags"?b.jsx("div",{className:"tags",children:O.map(ct=>{var Gt;let Ot=((Gt=l[ct])==null?void 0:Gt.indexOf($t))>=0;return b.jsx("button",{className:Ot?"tag-active":"tag-inactive",onClick:Vt=>{Vt.preventDefault(),Vt.stopPropagation(),U(ct,$t)},children:ct},ct)})}):ce==="ls_cluster"?b.jsx("div",{className:"ls-cluster",onClick:ct=>{ct.stopPropagation(),ct.preventDefault()},children:b.jsx("select",{value:wt==null?void 0:wt.cluster,onChange:ct=>{ct.stopPropagation(),ct.preventDefault(),console.log("was cluster",wt),console.log("updating to cluster",ct.target.value),fetch(`${a0}/bulk/change-cluster`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_id:t.id,scope_id:n.id,row_ids:[$t],new_cluster:ct.target.value})}).then(Ot=>Ot.json()).then(Ot=>{u()})},children:a.map((ct,Ot)=>b.jsxs("option",{value:ct.cluster,children:[ct.cluster,": ",ct.label]},Ot))})}):b.jsx("div",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,overflow:"hidden",maxWidth:ce===t.text_column?"640px":"200px",textOverflow:"ellipsis",whiteSpace:"normal"},title:At,onClick:()=>navigator.clipboard.writeText(At),children:At}))},header:ce,accessorKey:ce,footer:st=>st.column.id}});p(ue)}te(r)},[t,r,O,n,l,_,a]);const[K,$e]=T.useState([]),[Ee,Re]=T.useState(""),Fe=VE({data:g,columns:c,filterFns:{fuzzy:e6},state:{columnFilters:K,globalFilter:Ee},onColumnFiltersChange:$e,onGlobalFilterChange:Re,globalFilterFn:e6,getCoreRowModel:kE(),getFilteredRowModel:$E(),getSortedRowModel:jE(),getFacetedRowModel:FE(),getFacetedUniqueValues:DE(),getFacetedMinMaxValues:ME(),debugTable:!1,debugHeaders:!1,debugColumns:!1}),Ve=T.useRef(null),Ce=T.useRef(null),[Rt,at]=T.useState(0),qe=()=>{if(Ce.current){const ee=Ce.current.offsetWidth-Ce.current.clientWidth;at(ee)}};return T.useEffect(()=>{qe(),window.addEventListener("resize",qe);const ee=()=>{if(Ve.current&&Ce.current){const Qe=Ce.current.scrollWidth;Ve.current.querySelector("table").style.width=`${Qe}px`,Ve.current.style.overflowX="hidden"}};ee(),window.addEventListener("resize",ee);const ue=new ResizeObserver(Qe=>{for(let st of Qe)st.target===Ce.current&&ee()});Ce.current&&ue.observe(Ce.current);const ce=()=>{Ve.current&&Ce.current&&(Ve.current.scrollLeft=Ce.current.scrollLeft)},xe=Ce.current;return xe.addEventListener("scroll",ce),()=>{window.removeEventListener("resize",qe),window.removeEventListener("resize",ee),xe.removeEventListener("scroll",ce),ue.disconnect()}},[]),b.jsxs("div",{className:"filter-data-table",style:{height:e,visibility:r.length?"visible":"hidden"},children:[b.jsx("div",{className:"filter-data-table-fixed-header",style:{flexShrink:0,paddingRight:`${Rt}px`},ref:Ve,children:b.jsxs("table",{children:[b.jsx("thead",{children:Fe.getHeaderGroups().map(ee=>b.jsx("tr",{style:{backgroundColor:"#f9f9f9"},children:ee.headers.map(ue=>b.jsx("th",{colSpan:ue.colSpan,children:ue.isPlaceholder?null:b.jsx(b.Fragment,{children:b.jsxs("div",{className:ue.column.getCanSort()?"cursor-pointer select-none":"",onClick:ue.column.getToggleSortingHandler(),children:[hm(ue.column.columnDef.header,ue.getContext()),{asc:" 🔼",desc:" 🔽"}[ue.column.getIsSorted()]??null]})})},ue.id))},ee.id))}),b.jsx("tbody",{children:Fe.getRowModel().rows.map(ee=>b.jsx("tr",{style:{visibility:"collapse"},children:ee.getVisibleCells().map(ue=>b.jsx("td",{children:hm(ue.column.columnDef.cell,ue.getContext())},ue.id))},ee.id))})]})}),b.jsx("div",{className:"filter-table-scrollable-body table-body",style:{flexGrow:1,overflowY:"auto"},ref:Ce,children:b.jsxs("table",{style:{width:"100%"},children:[b.jsx("thead",{style:{visibility:"collapse"},children:b.jsx("tr",{children:c.map((ee,ue)=>b.jsx("th",{style:{textAlign:"left",paddingLeft:"6px"},children:ee.header},ue))})}),b.jsx("tbody",{children:Fe.getRowModel().rows.map(ee=>b.jsx("tr",{onMouseEnter:()=>{f&&f(ee.getValue("0"))},onClick:()=>d&&d(ee.getValue("0")),children:ee.getVisibleCells().map(ue=>b.jsx("td",{children:hm(ue.column.columnDef.cell,ue.getContext())},ue.id))},ee.id))})]})}),b.jsxs("div",{className:"filter-data-table-page-controls",children:[b.jsx("button",{onClick:()=>x(0),disabled:_===0,children:"First"}),b.jsx("button",{onClick:()=>x(ee=>Math.max(0,ee-1)),disabled:_===0,children:"Previous"}),b.jsxs("span",{children:["Page ",_+1," of ",S||1]}),b.jsx("button",{onClick:()=>x(ee=>Math.min(S-1,ee+1)),disabled:_===S-1,children:"Next"}),b.jsx("button",{onClick:()=>x(S-1),disabled:_===S-1,children:"Last"})]})]})}const sx=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),v2=(e,t)=>t?e.toLowerCase():e,ux=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const o=v2(n,t);return e[o]||(e[o]=[],e.__times__[o]=[]),e[o].push(r),e.__times__[o].push(+i||1/0),{event:o,handler:r}},y2=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=v2(n,t);if(!e[i])return;const o=e[i].indexOf(r);o===-1||o>=e[i].length||(e[i].splice(o,1),e.__times__[i].splice(o,1))},t6=(e,t)=>()=>{e.forEach(n=>n(t))},cx=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=y2(e);return(o,a,l={})=>{const s=v2(o,n);if(!e[s])return;const u=[...e[s]];if(u.forEach((f,d)=>{--e.__times__[s][d]<1&&i(s,f)}),r||l.async?setTimeout(t6(u,a),0):t6(u,a)(),t&&!l.isNoGlobalBroadcast)try{sx.postMessage({event:s,news:a})}catch(f){if(f instanceof DOMException)console.warn(`Could not broadcast '${s}' globally. Payload is not clonable.`);else throw f}}},JE=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},fx=()=>({__times__:{}}),eC=({async:e=!1,caseInsensitive:t=!1,stack:n=fx()}={})=>(n.__times__||(n.__times__={}),{publish:cx(n,{async:e,caseInsensitive:t}),subscribe:ux(n,{caseInsensitive:t}),unsubscribe:y2(n,{caseInsensitive:t}),clear:JE(n),stack:n}),l0=fx(),tC={publish:cx(l0,{isGlobal:!0}),subscribe:ux(l0),unsubscribe:y2(l0),stack:l0};sx.onmessage=({data:{event:e,news:t}})=>tC.publish(e,t,{isNoGlobalBroadcast:!0});var dx={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(m_,function(){var n=function(m){return m instanceof Uint8Array||m instanceof Uint16Array||m instanceof Uint32Array||m instanceof Int8Array||m instanceof Int16Array||m instanceof Int32Array||m instanceof Float32Array||m instanceof Float64Array||m instanceof Uint8ClampedArray},r=function(m,C){for(var M=Object.keys(C),Q=0;Q<M.length;++Q)m[M[Q]]=C[M[Q]];return m},i=`
`;function o(m){return typeof atob<"u"?atob(m):"base64:"+m}function a(m){var C=new Error("(regl) "+m);throw console.error(C),C}function l(m,C){m||a(C)}function s(m){return m?": "+m:""}function u(m,C,M){m in C||a("unknown parameter ("+m+")"+s(M)+". possible values: "+Object.keys(C).join())}function f(m,C){n(m)||a("invalid parameter type"+s(C)+". must be a typed array")}function d(m,C){switch(C){case"number":return typeof m=="number";case"object":return typeof m=="object";case"string":return typeof m=="string";case"boolean":return typeof m=="boolean";case"function":return typeof m=="function";case"undefined":return typeof m>"u";case"symbol":return typeof m=="symbol"}}function c(m,C,M){d(m,C)||a("invalid parameter type"+s(M)+". expected "+C+", got "+typeof m)}function p(m,C){m>=0&&(m|0)===m||a("invalid parameter type, ("+m+")"+s(C)+". must be a nonnegative integer")}function g(m,C,M){C.indexOf(m)<0&&a("invalid value"+s(M)+". must be one of: "+C)}var y=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function S(m){Object.keys(m).forEach(function(C){y.indexOf(C)<0&&a('invalid regl constructor argument "'+C+'". must be one of '+y)})}function v(m,C){for(m=m+"";m.length<C;)m=" "+m;return m}function _(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function x(m,C){this.number=m,this.line=C,this.errors=[]}function O(m,C,M){this.file=m,this.line=C,this.message=M}function I(){var m=new Error,C=(m.stack||m).toString(),M=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(C);if(M)return M[1];var Q=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(C);return Q?Q[1]:"unknown"}function U(){var m=new Error,C=(m.stack||m).toString(),M=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(C);if(M)return M[1];var Q=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(C);return Q?Q[1]:"unknown"}function te(m,C){var M=m.split(`
`),Q=1,ae=0,Y={unknown:new _,0:new _};Y.unknown.name=Y[0].name=C||I(),Y.unknown.lines.push(new x(0,""));for(var ne=0;ne<M.length;++ne){var ve=M[ne],ge=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ve);if(ge)switch(ge[1]){case"line":var be=/(\d+)(\s+\d+)?/.exec(ge[2]);be&&(Q=be[1]|0,be[2]&&(ae=be[2]|0,ae in Y||(Y[ae]=new _)));break;case"define":var Te=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ge[2]);Te&&(Y[ae].name=Te[1]?o(Te[2]):Te[2]);break}Y[ae].lines.push(new x(Q++,ve))}return Object.keys(Y).forEach(function(Ae){var Oe=Y[Ae];Oe.lines.forEach(function(ye){Oe.index[ye.number]=ye})}),Y}function K(m){var C=[];return m.split(`
`).forEach(function(M){if(!(M.length<5)){var Q=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(M);Q?C.push(new O(Q[1]|0,Q[2]|0,Q[3].trim())):M.length>0&&C.push(new O("unknown",0,M))}}),C}function $e(m,C){C.forEach(function(M){var Q=m[M.file];if(Q){var ae=Q.index[M.line];if(ae){ae.errors.push(M),Q.hasErrors=!0;return}}m.unknown.hasErrors=!0,m.unknown.lines[0].errors.push(M)})}function Ee(m,C,M,Q,ae){if(!m.getShaderParameter(C,m.COMPILE_STATUS)){var Y=m.getShaderInfoLog(C),ne=Q===m.FRAGMENT_SHADER?"fragment":"vertex";qe(M,"string",ne+" shader source must be a string",ae);var ve=te(M,ae),ge=K(Y);$e(ve,ge),Object.keys(ve).forEach(function(be){var Te=ve[be];if(!Te.hasErrors)return;var Ae=[""],Oe=[""];function ye(Se,z){Ae.push(Se),Oe.push(z||"")}ye("file number "+be+": "+Te.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Te.lines.forEach(function(Se){if(Se.errors.length>0){ye(v(Se.number,4)+"|  ","background-color:yellow; font-weight:bold"),ye(Se.line+i,"color:red; background-color:yellow; font-weight:bold");var z=0;Se.errors.forEach(function(J){var we=J.message,Xe=/^\s*'(.*)'\s*:\s*(.*)$/.exec(we);if(Xe){var pe=Xe[1];switch(we=Xe[2],pe){case"assign":pe="=";break}z=Math.max(Se.line.indexOf(pe,z),0)}else z=0;ye(v("| ",6)),ye(v("^^^",z+3)+i,"font-weight:bold"),ye(v("| ",6)),ye(we+i,"font-weight:bold")}),ye(v("| ",6)+i)}else ye(v(Se.number,4)+"|  "),ye(Se.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Oe[0]=Ae.join("%c"),console.log.apply(console,Oe)):console.log(Ae.join(""))}),l.raise("Error compiling "+ne+" shader, "+ve[0].name)}}function Re(m,C,M,Q,ae){if(!m.getProgramParameter(C,m.LINK_STATUS)){var Y=m.getProgramInfoLog(C),ne=te(M,ae),ve=te(Q,ae),ge='Error linking program with vertex shader, "'+ve[0].name+'", and fragment shader "'+ne[0].name+'"';typeof document<"u"?console.log("%c"+ge+i+"%c"+Y,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ge+i+Y),l.raise(ge)}}function Fe(m){m._commandRef=I()}function Ve(m,C,M,Q){Fe(m);function ae(ge){return ge?Q.id(ge):0}m._fragId=ae(m.static.frag),m._vertId=ae(m.static.vert);function Y(ge,be){Object.keys(be).forEach(function(Te){ge[Q.id(Te)]=!0})}var ne=m._uniformSet={};Y(ne,C.static),Y(ne,C.dynamic);var ve=m._attributeSet={};Y(ve,M.static),Y(ve,M.dynamic),m._hasCount="count"in m.static||"count"in m.dynamic||"elements"in m.static||"elements"in m.dynamic}function Ce(m,C){var M=U();a(m+" in command "+(C||I())+(M==="unknown"?"":" called from "+M))}function Rt(m,C,M){m||Ce(C,M||I())}function at(m,C,M,Q){m in C||Ce("unknown parameter ("+m+")"+s(M)+". possible values: "+Object.keys(C).join(),Q||I())}function qe(m,C,M,Q){d(m,C)||Ce("invalid parameter type"+s(M)+". expected "+C+", got "+typeof m,Q||I())}function ee(m){m()}function ue(m,C,M){m.texture?g(m.texture._texture.internalformat,C,"unsupported texture format for attachment"):g(m.renderbuffer._renderbuffer.format,M,"unsupported renderbuffer format for attachment")}var ce=33071,xe=9728,Qe=9984,st=9985,wt=9986,At=9987,$t=5120,ct=5121,Ot=5122,Gt=5123,Vt=5124,vn=5125,Ut=5126,ln=32819,ft=32820,kt=33635,jt=34042,dt=36193,ut={};ut[$t]=ut[ct]=1,ut[Ot]=ut[Gt]=ut[dt]=ut[kt]=ut[ln]=ut[ft]=2,ut[Vt]=ut[vn]=ut[Ut]=ut[jt]=4;function Jt(m,C){return m===ft||m===ln||m===kt?2:m===jt?4:ut[m]*C}function Zt(m){return!(m&m-1)&&!!m}function yn(m,C,M){var Q,ae=C.width,Y=C.height,ne=C.channels;l(ae>0&&ae<=M.maxTextureSize&&Y>0&&Y<=M.maxTextureSize,"invalid texture shape"),(m.wrapS!==ce||m.wrapT!==ce)&&l(Zt(ae)&&Zt(Y),"incompatible wrap mode for texture, both width and height must be power of 2"),C.mipmask===1?ae!==1&&Y!==1&&l(m.minFilter!==Qe&&m.minFilter!==wt&&m.minFilter!==st&&m.minFilter!==At,"min filter requires mipmap"):(l(Zt(ae)&&Zt(Y),"texture must be a square power of 2 to support mipmapping"),l(C.mipmask===(ae<<1)-1,"missing or incomplete mipmap data")),C.type===Ut&&(M.extensions.indexOf("oes_texture_float_linear")<0&&l(m.minFilter===xe&&m.magFilter===xe,"filter not supported, must enable oes_texture_float_linear"),l(!m.genMipmaps,"mipmap generation not supported with float textures"));var ve=C.images;for(Q=0;Q<16;++Q)if(ve[Q]){var ge=ae>>Q,be=Y>>Q;l(C.mipmask&1<<Q,"missing mipmap data");var Te=ve[Q];if(l(Te.width===ge&&Te.height===be,"invalid shape for mip images"),l(Te.format===C.format&&Te.internalformat===C.internalformat&&Te.type===C.type,"incompatible type for mip image"),!Te.compressed)if(Te.data){var Ae=Math.ceil(Jt(Te.type,ne)*ge/Te.unpackAlignment)*Te.unpackAlignment;l(Te.data.byteLength===Ae*be,"invalid data for image, buffer size is inconsistent with image format")}else Te.element||Te.copy}else m.genMipmaps||l((C.mipmask&1<<Q)===0,"extra mipmap data");C.compressed&&l(!m.genMipmaps,"mipmap generation for compressed images not supported")}function Kn(m,C,M,Q){var ae=m.width,Y=m.height,ne=m.channels;l(ae>0&&ae<=Q.maxTextureSize&&Y>0&&Y<=Q.maxTextureSize,"invalid texture shape"),l(ae===Y,"cube map must be square"),l(C.wrapS===ce&&C.wrapT===ce,"wrap mode not supported by cube map");for(var ve=0;ve<M.length;++ve){var ge=M[ve];l(ge.width===ae&&ge.height===Y,"inconsistent cube map face shape"),C.genMipmaps&&(l(!ge.compressed,"can not generate mipmap for compressed textures"),l(ge.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var be=ge.images,Te=0;Te<16;++Te){var Ae=be[Te];if(Ae){var Oe=ae>>Te,ye=Y>>Te;l(ge.mipmask&1<<Te,"missing mipmap data"),l(Ae.width===Oe&&Ae.height===ye,"invalid shape for mip images"),l(Ae.format===m.format&&Ae.internalformat===m.internalformat&&Ae.type===m.type,"incompatible type for mip image"),Ae.compressed||(Ae.data?l(Ae.data.byteLength===Oe*ye*Math.max(Jt(Ae.type,ne),Ae.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ae.element||Ae.copy)}}}}var E=r(l,{optional:ee,raise:a,commandRaise:Ce,command:Rt,parameter:u,commandParameter:at,constructor:S,type:c,commandType:qe,isTypedArray:f,nni:p,oneOf:g,shaderError:Ee,linkError:Re,callSite:U,saveCommandRef:Fe,saveDrawInfo:Ve,framebufferFormat:ue,guessCommand:I,texture2D:yn,textureCube:Kn}),me=0,Ue=0,he=5,Et=6;function lt(m,C){this.id=me++,this.type=m,this.data=C}function Le(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Tt(m){if(m.length===0)return[];var C=m.charAt(0),M=m.charAt(m.length-1);if(m.length>1&&C===M&&(C==='"'||C==="'"))return['"'+Le(m.substr(1,m.length-2))+'"'];var Q=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(m);if(Q)return Tt(m.substr(0,Q.index)).concat(Tt(Q[1])).concat(Tt(m.substr(Q.index+Q[0].length)));var ae=m.split(".");if(ae.length===1)return['"'+Le(m)+'"'];for(var Y=[],ne=0;ne<ae.length;++ne)Y=Y.concat(Tt(ae[ne]));return Y}function qt(m){return"["+Tt(m).join("][")+"]"}function tt(m,C){return new lt(m,qt(C+""))}function It(m){return typeof m=="function"&&!m._reglType||m instanceof lt}function xn(m,C){if(typeof m=="function")return new lt(Ue,m);if(typeof m=="number"||typeof m=="boolean")return new lt(he,m);if(Array.isArray(m))return new lt(Et,m.map(function(M,Q){return xn(M,C+"["+Q+"]")}));if(m instanceof lt)return m;E(!1,"invalid option type in uniform "+C)}var Ht={DynamicVariable:lt,define:tt,isDynamic:It,unbox:xn,accessor:qt},sn={next:typeof requestAnimationFrame=="function"?function(m){return requestAnimationFrame(m)}:function(m){return setTimeout(m,16)},cancel:typeof cancelAnimationFrame=="function"?function(m){return cancelAnimationFrame(m)}:clearTimeout},gn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function cr(){var m={"":0},C=[""];return{id:function(M){var Q=m[M];return Q||(Q=m[M]=C.length,C.push(M),Q)},str:function(M){return C[M]}}}function Qn(m,C,M){var Q=document.createElement("canvas");r(Q.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),m.appendChild(Q),m===document.body&&(Q.style.position="absolute",r(m.style,{margin:0,padding:0}));function ae(){var ve=window.innerWidth,ge=window.innerHeight;if(m!==document.body){var be=Q.getBoundingClientRect();ve=be.right-be.left,ge=be.bottom-be.top}Q.width=M*ve,Q.height=M*ge}var Y;m!==document.body&&typeof ResizeObserver=="function"?(Y=new ResizeObserver(function(){setTimeout(ae)}),Y.observe(m)):window.addEventListener("resize",ae,!1);function ne(){Y?Y.disconnect():window.removeEventListener("resize",ae),m.removeChild(Q)}return ae(),{canvas:Q,onDestroy:ne}}function gr(m,C){function M(Q){try{return m.getContext(Q,C)}catch{return null}}return M("webgl")||M("experimental-webgl")||M("webgl-experimental")}function Tn(m){return typeof m.nodeName=="string"&&typeof m.appendChild=="function"&&typeof m.getBoundingClientRect=="function"}function Fr(m){return typeof m.drawArrays=="function"||typeof m.drawElements=="function"}function Bt(m){return typeof m=="string"?m.split():(E(Array.isArray(m),"invalid extension array"),m)}function Mn(m){return typeof m=="string"?(E(typeof document<"u","not supported outside of DOM"),document.querySelector(m)):m}function vt(m){var C=m||{},M,Q,ae,Y,ne={},ve=[],ge=[],be=typeof window>"u"?1:window.devicePixelRatio,Te=!1,Ae=function(Se){Se&&E.raise(Se)},Oe=function(){};if(typeof C=="string"?(E(typeof document<"u","selector queries only supported in DOM enviroments"),M=document.querySelector(C),E(M,"invalid query string for element")):typeof C=="object"?Tn(C)?M=C:Fr(C)?(Y=C,ae=Y.canvas):(E.constructor(C),"gl"in C?Y=C.gl:"canvas"in C?ae=Mn(C.canvas):"container"in C&&(Q=Mn(C.container)),"attributes"in C&&(ne=C.attributes,E.type(ne,"object","invalid context attributes")),"extensions"in C&&(ve=Bt(C.extensions)),"optionalExtensions"in C&&(ge=Bt(C.optionalExtensions)),"onDone"in C&&(E.type(C.onDone,"function","invalid or missing onDone callback"),Ae=C.onDone),"profile"in C&&(Te=!!C.profile),"pixelRatio"in C&&(be=+C.pixelRatio,E(be>0,"invalid pixel ratio"))):E.raise("invalid arguments to regl"),M&&(M.nodeName.toLowerCase()==="canvas"?ae=M:Q=M),!Y){if(!ae){E(typeof document<"u","must manually specify webgl context outside of DOM environments");var ye=Qn(Q||document.body,Ae,be);if(!ye)return null;ae=ye.canvas,Oe=ye.onDestroy}ne.premultipliedAlpha===void 0&&(ne.premultipliedAlpha=!0),Y=gr(ae,ne)}return Y?{gl:Y,canvas:ae,container:Q,extensions:ve,optionalExtensions:ge,pixelRatio:be,profile:Te,onDone:Ae,onDestroy:Oe}:(Oe(),Ae("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Wt(m,C){var M={};function Q(ne){E.type(ne,"string","extension name must be string");var ve=ne.toLowerCase(),ge;try{ge=M[ve]=m.getExtension(ve)}catch{}return!!ge}for(var ae=0;ae<C.extensions.length;++ae){var Y=C.extensions[ae];if(!Q(Y))return C.onDestroy(),C.onDone('"'+Y+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return C.optionalExtensions.forEach(Q),{extensions:M,restore:function(){Object.keys(M).forEach(function(ne){if(M[ne]&&!Q(ne))throw new Error("(regl): error restoring extension "+ne)})}}}function tn(m,C){for(var M=Array(m),Q=0;Q<m;++Q)M[Q]=C(Q);return M}var Nn=5120,it=5121,Ct=5122,Mt=5123,En=5124,Cn=5125,Zn=5126;function or(m){for(var C=16;C<=1<<28;C*=16)if(m<=C)return C;return 0}function en(m){var C,M;return C=(m>65535)<<4,m>>>=C,M=(m>255)<<3,m>>>=M,C|=M,M=(m>15)<<2,m>>>=M,C|=M,M=(m>3)<<1,m>>>=M,C|=M,C|m>>1}function Rn(){var m=tn(8,function(){return[]});function C(Y){var ne=or(Y),ve=m[en(ne)>>2];return ve.length>0?ve.pop():new ArrayBuffer(ne)}function M(Y){m[en(Y.byteLength)>>2].push(Y)}function Q(Y,ne){var ve=null;switch(Y){case Nn:ve=new Int8Array(C(ne),0,ne);break;case it:ve=new Uint8Array(C(ne),0,ne);break;case Ct:ve=new Int16Array(C(2*ne),0,ne);break;case Mt:ve=new Uint16Array(C(2*ne),0,ne);break;case En:ve=new Int32Array(C(4*ne),0,ne);break;case Cn:ve=new Uint32Array(C(4*ne),0,ne);break;case Zn:ve=new Float32Array(C(4*ne),0,ne);break;default:return null}return ve.length!==ne?ve.subarray(0,ne):ve}function ae(Y){M(Y.buffer)}return{alloc:C,free:M,allocType:Q,freeType:ae}}var et=Rn();et.zero=Rn();var vr=3408,ii=3410,Ko=3411,Dr=3412,Tr=3413,$r=3414,an=3415,Ln=33901,yr=33902,jr=3379,wo=3386,oi=34921,Rr=36347,Lr=36348,So=35661,q=35660,Ie=34930,yt=36349,dn=34076,In=34024,ai=7936,li=7937,Dn=7938,si=35724,Qo=34047,du=36063,Xr=34852,to=3553,no=34067,Eo=34069,ar=33984,bi=6408,fr=5126,Hn=5121,Zo=36160,Vl=36053,Ul=36064,Hl=16384,Sf=function(m,C){var M=1;C.ext_texture_filter_anisotropic&&(M=m.getParameter(Qo));var Q=1,ae=1;C.webgl_draw_buffers&&(Q=m.getParameter(Xr),ae=m.getParameter(du));var Y=!!C.oes_texture_float;if(Y){var ne=m.createTexture();m.bindTexture(to,ne),m.texImage2D(to,0,bi,1,1,0,bi,fr,null);var ve=m.createFramebuffer();if(m.bindFramebuffer(Zo,ve),m.framebufferTexture2D(Zo,Ul,to,ne,0),m.bindTexture(to,null),m.checkFramebufferStatus(Zo)!==Vl)Y=!1;else{m.viewport(0,0,1,1),m.clearColor(1,0,0,1),m.clear(Hl);var ge=et.allocType(fr,4);m.readPixels(0,0,1,1,bi,fr,ge),m.getError()?Y=!1:(m.deleteFramebuffer(ve),m.deleteTexture(ne),Y=ge[0]===1),et.freeType(ge)}}var be=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Te=!0;if(!be){var Ae=m.createTexture(),Oe=et.allocType(Hn,36);m.activeTexture(ar),m.bindTexture(no,Ae),m.texImage2D(Eo,0,bi,3,3,0,bi,Hn,Oe),et.freeType(Oe),m.bindTexture(no,null),m.deleteTexture(Ae),Te=!m.getError()}return{colorBits:[m.getParameter(ii),m.getParameter(Ko),m.getParameter(Dr),m.getParameter(Tr)],depthBits:m.getParameter($r),stencilBits:m.getParameter(an),subpixelBits:m.getParameter(vr),extensions:Object.keys(C).filter(function(ye){return!!C[ye]}),maxAnisotropic:M,maxDrawbuffers:Q,maxColorAttachments:ae,pointSizeDims:m.getParameter(Ln),lineWidthDims:m.getParameter(yr),maxViewportDims:m.getParameter(wo),maxCombinedTextureUnits:m.getParameter(So),maxCubeMapSize:m.getParameter(dn),maxRenderbufferSize:m.getParameter(In),maxTextureUnits:m.getParameter(Ie),maxTextureSize:m.getParameter(jr),maxAttributes:m.getParameter(oi),maxVertexUniforms:m.getParameter(Rr),maxVertexTextureUnits:m.getParameter(q),maxVaryingVectors:m.getParameter(Lr),maxFragmentUniforms:m.getParameter(yt),glsl:m.getParameter(si),renderer:m.getParameter(li),vendor:m.getParameter(ai),version:m.getParameter(Dn),readFloat:Y,npotTextureCube:Te}};function qr(m){return!!m&&typeof m=="object"&&Array.isArray(m.shape)&&Array.isArray(m.stride)&&typeof m.offset=="number"&&m.shape.length===m.stride.length&&(Array.isArray(m.data)||n(m.data))}var Br=function(m){return Object.keys(m).map(function(C){return m[C]})},ui={shape:p1,flatten:h1};function Ef(m,C,M){for(var Q=0;Q<C;++Q)M[Q]=m[Q]}function hu(m,C,M,Q){for(var ae=0,Y=0;Y<C;++Y)for(var ne=m[Y],ve=0;ve<M;++ve)Q[ae++]=ne[ve]}function Wl(m,C,M,Q,ae,Y){for(var ne=Y,ve=0;ve<C;++ve)for(var ge=m[ve],be=0;be<M;++be)for(var Te=ge[be],Ae=0;Ae<Q;++Ae)ae[ne++]=Te[Ae]}function pu(m,C,M,Q,ae){for(var Y=1,ne=M+1;ne<C.length;++ne)Y*=C[ne];var ve=C[M];if(C.length-M===4){var ge=C[M+1],be=C[M+2],Te=C[M+3];for(ne=0;ne<ve;++ne)Wl(m[ne],ge,be,Te,Q,ae),ae+=Y}else for(ne=0;ne<ve;++ne)pu(m[ne],C,M+1,Q,ae),ae+=Y}function h1(m,C,M,Q){var ae=1;if(C.length)for(var Y=0;Y<C.length;++Y)ae*=C[Y];else ae=0;var ne=Q||et.allocType(M,ae);switch(C.length){case 0:break;case 1:Ef(m,C[0],ne);break;case 2:hu(m,C[0],C[1],ne);break;case 3:Wl(m,C[0],C[1],C[2],ne,0);break;default:pu(m,C,0,ne,0)}return ne}function p1(m){for(var C=[],M=m;M.length;M=M[0])C.push(M.length);return C}var Jo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Xa=5120,Co=5122,Xl=5124,m1=5121,ql=5123,ea=5125,qa=5126,mu=5126,ta={int8:Xa,int16:Co,int32:Xl,uint8:m1,uint16:ql,uint32:ea,float:qa,float32:mu},q2=35048,Jn=35040,Yl={dynamic:q2,stream:Jn,static:35044},Ya=ui.flatten,Cf=ui.shape,gu=35044,vu=35040,Kl=5121,Ql=5126,$i=[];$i[5120]=1,$i[5122]=2,$i[5124]=4,$i[5121]=1,$i[5123]=2,$i[5125]=4,$i[5126]=4;function Ka(m){return Jo[Object.prototype.toString.call(m)]|0}function Zl(m,C){for(var M=0;M<C.length;++M)m[M]=C[M]}function yu(m,C,M,Q,ae,Y,ne){for(var ve=0,ge=0;ge<M;++ge)for(var be=0;be<Q;++be)m[ve++]=C[ae*ge+Y*be+ne]}function xu(m,C,M,Q){var ae=0,Y={};function ne(z){this.id=ae++,this.buffer=m.createBuffer(),this.type=z,this.usage=gu,this.byteLength=0,this.dimension=1,this.dtype=Kl,this.persistentData=null,M.profile&&(this.stats={size:0})}ne.prototype.bind=function(){m.bindBuffer(this.type,this.buffer)},ne.prototype.destroy=function(){Oe(this)};var ve=[];function ge(z,J){var we=ve.pop();return we||(we=new ne(z)),we.bind(),Ae(we,J,vu,0,1,!1),we}function be(z){ve.push(z)}function Te(z,J,we){z.byteLength=J.byteLength,m.bufferData(z.type,J,we)}function Ae(z,J,we,Xe,pe,He){var je;if(z.usage=we,Array.isArray(J)){if(z.dtype=Xe||Ql,J.length>0){var pt;if(Array.isArray(J[0])){je=Cf(J);for(var le=1,oe=1;oe<je.length;++oe)le*=je[oe];z.dimension=le,pt=Ya(J,je,z.dtype),Te(z,pt,we),He?z.persistentData=pt:et.freeType(pt)}else if(typeof J[0]=="number"){z.dimension=pe;var Je=et.allocType(z.dtype,J.length);Zl(Je,J),Te(z,Je,we),He?z.persistentData=Je:et.freeType(Je)}else n(J[0])?(z.dimension=J[0].length,z.dtype=Xe||Ka(J[0])||Ql,pt=Ya(J,[J.length,J[0].length],z.dtype),Te(z,pt,we),He?z.persistentData=pt:et.freeType(pt)):E.raise("invalid buffer data")}}else if(n(J))z.dtype=Xe||Ka(J),z.dimension=pe,Te(z,J,we),He&&(z.persistentData=new Uint8Array(new Uint8Array(J.buffer)));else if(qr(J)){je=J.shape;var Me=J.stride,_e=J.offset,Ne=0,De=0,Lt=0,bt=0;je.length===1?(Ne=je[0],De=1,Lt=Me[0],bt=0):je.length===2?(Ne=je[0],De=je[1],Lt=Me[0],bt=Me[1]):E.raise("invalid shape"),z.dtype=Xe||Ka(J.data)||Ql,z.dimension=De;var Be=et.allocType(z.dtype,Ne*De);yu(Be,J.data,Ne,De,Lt,bt,_e),Te(z,Be,we),He?z.persistentData=Be:et.freeType(Be)}else J instanceof ArrayBuffer?(z.dtype=Kl,z.dimension=pe,Te(z,J,we),He&&(z.persistentData=new Uint8Array(new Uint8Array(J)))):E.raise("invalid buffer data")}function Oe(z){C.bufferCount--,Q(z);var J=z.buffer;E(J,"buffer must not be deleted already"),m.deleteBuffer(J),z.buffer=null,delete Y[z.id]}function ye(z,J,we,Xe){C.bufferCount++;var pe=new ne(J);Y[pe.id]=pe;function He(le){var oe=gu,Je=null,Me=0,_e=0,Ne=1;return Array.isArray(le)||n(le)||qr(le)||le instanceof ArrayBuffer?Je=le:typeof le=="number"?Me=le|0:le&&(E.type(le,"object","buffer arguments must be an object, a number or an array"),"data"in le&&(E(Je===null||Array.isArray(Je)||n(Je)||qr(Je),"invalid data for buffer"),Je=le.data),"usage"in le&&(E.parameter(le.usage,Yl,"invalid buffer usage"),oe=Yl[le.usage]),"type"in le&&(E.parameter(le.type,ta,"invalid buffer type"),_e=ta[le.type]),"dimension"in le&&(E.type(le.dimension,"number","invalid dimension"),Ne=le.dimension|0),"length"in le&&(E.nni(Me,"buffer length must be a nonnegative integer"),Me=le.length|0)),pe.bind(),Je?Ae(pe,Je,oe,_e,Ne,Xe):(Me&&m.bufferData(pe.type,Me,oe),pe.dtype=_e||Kl,pe.usage=oe,pe.dimension=Ne,pe.byteLength=Me),M.profile&&(pe.stats.size=pe.byteLength*$i[pe.dtype]),He}function je(le,oe){E(oe+le.byteLength<=pe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+le.byteLength+" starting from offset "+oe+" to a buffer of size "+pe.byteLength),m.bufferSubData(pe.type,oe,le)}function pt(le,oe){var Je=(oe||0)|0,Me;if(pe.bind(),n(le)||le instanceof ArrayBuffer)je(le,Je);else if(Array.isArray(le)){if(le.length>0)if(typeof le[0]=="number"){var _e=et.allocType(pe.dtype,le.length);Zl(_e,le),je(_e,Je),et.freeType(_e)}else if(Array.isArray(le[0])||n(le[0])){Me=Cf(le);var Ne=Ya(le,Me,pe.dtype);je(Ne,Je),et.freeType(Ne)}else E.raise("invalid buffer data")}else if(qr(le)){Me=le.shape;var De=le.stride,Lt=0,bt=0,Be=0,We=0;Me.length===1?(Lt=Me[0],bt=1,Be=De[0],We=0):Me.length===2?(Lt=Me[0],bt=Me[1],Be=De[0],We=De[1]):E.raise("invalid shape");var xt=Array.isArray(le.data)?pe.dtype:Ka(le.data),Pt=et.allocType(xt,Lt*bt);yu(Pt,le.data,Lt,bt,Be,We,le.offset),je(Pt,Je),et.freeType(Pt)}else E.raise("invalid data for buffer subdata");return He}return we||He(z),He._reglType="buffer",He._buffer=pe,He.subdata=pt,M.profile&&(He.stats=pe.stats),He.destroy=function(){Oe(pe)},He}function Se(){Br(Y).forEach(function(z){z.buffer=m.createBuffer(),m.bindBuffer(z.type,z.buffer),m.bufferData(z.type,z.persistentData||z.byteLength,z.usage)})}return M.profile&&(C.getTotalBufferSize=function(){var z=0;return Object.keys(Y).forEach(function(J){z+=Y[J].stats.size}),z}),{create:ye,createStream:ge,destroyStream:be,clear:function(){Br(Y).forEach(Oe),ve.forEach(Oe)},getBuffer:function(z){return z&&z._buffer instanceof ne?z._buffer:null},restore:Se,_initBuffer:Ae}}var g1=0,_u=0,v1=1,wu=1,y1=4,x1=4,ro={points:g1,point:_u,lines:v1,line:wu,triangles:y1,triangle:x1,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_1=0,bo=1,Ao=4,w1=5120,io=5121,bf=5122,na=5123,Af=5124,ji=5125,Su=34963,S1=35040,Eu=35044;function Cu(m,C,M,Q){var ae={},Y=0,ne={uint8:io,uint16:na};C.oes_element_index_uint&&(ne.uint32=ji);function ve(Se){this.id=Y++,ae[this.id]=this,this.buffer=Se,this.primType=Ao,this.vertCount=0,this.type=0}ve.prototype.bind=function(){this.buffer.bind()};var ge=[];function be(Se){var z=ge.pop();return z||(z=new ve(M.create(null,Su,!0,!1)._buffer)),Ae(z,Se,S1,-1,-1,0,0),z}function Te(Se){ge.push(Se)}function Ae(Se,z,J,we,Xe,pe,He){Se.buffer.bind();var je;if(z){var pt=He;!He&&(!n(z)||qr(z)&&!n(z.data))&&(pt=C.oes_element_index_uint?ji:na),M._initBuffer(Se.buffer,z,J,pt,3)}else m.bufferData(Su,pe,J),Se.buffer.dtype=je||io,Se.buffer.usage=J,Se.buffer.dimension=3,Se.buffer.byteLength=pe;if(je=He,!He){switch(Se.buffer.dtype){case io:case w1:je=io;break;case na:case bf:je=na;break;case ji:case Af:je=ji;break;default:E.raise("unsupported type for element array")}Se.buffer.dtype=je}Se.type=je,E(je!==ji||!!C.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var le=Xe;le<0&&(le=Se.buffer.byteLength,je===na?le>>=1:je===ji&&(le>>=2)),Se.vertCount=le;var oe=we;if(we<0){oe=Ao;var Je=Se.buffer.dimension;Je===1&&(oe=_1),Je===2&&(oe=bo),Je===3&&(oe=Ao)}Se.primType=oe}function Oe(Se){Q.elementsCount--,E(Se.buffer!==null,"must not double destroy elements"),delete ae[Se.id],Se.buffer.destroy(),Se.buffer=null}function ye(Se,z){var J=M.create(null,Su,!0),we=new ve(J._buffer);Q.elementsCount++;function Xe(pe){if(!pe)J(),we.primType=Ao,we.vertCount=0,we.type=io;else if(typeof pe=="number")J(pe),we.primType=Ao,we.vertCount=pe|0,we.type=io;else{var He=null,je=Eu,pt=-1,le=-1,oe=0,Je=0;Array.isArray(pe)||n(pe)||qr(pe)?He=pe:(E.type(pe,"object","invalid arguments for elements"),"data"in pe&&(He=pe.data,E(Array.isArray(He)||n(He)||qr(He),"invalid data for element buffer")),"usage"in pe&&(E.parameter(pe.usage,Yl,"invalid element buffer usage"),je=Yl[pe.usage]),"primitive"in pe&&(E.parameter(pe.primitive,ro,"invalid element buffer primitive"),pt=ro[pe.primitive]),"count"in pe&&(E(typeof pe.count=="number"&&pe.count>=0,"invalid vertex count for elements"),le=pe.count|0),"type"in pe&&(E.parameter(pe.type,ne,"invalid buffer type"),Je=ne[pe.type]),"length"in pe?oe=pe.length|0:(oe=le,Je===na||Je===bf?oe*=2:(Je===ji||Je===Af)&&(oe*=4))),Ae(we,He,je,pt,le,oe,Je)}return Xe}return Xe(Se),Xe._reglType="elements",Xe._elements=we,Xe.subdata=function(pe,He){return J.subdata(pe,He),Xe},Xe.destroy=function(){Oe(we)},Xe}return{create:ye,createStream:be,destroyStream:Te,getElements:function(Se){return typeof Se=="function"&&Se._elements instanceof ve?Se._elements:null},clear:function(){Br(ae).forEach(Oe)}}}var Tf=new Float32Array(1),E1=new Uint32Array(Tf.buffer),C1=5123;function Rf(m){for(var C=et.allocType(C1,m.length),M=0;M<m.length;++M)if(isNaN(m[M]))C[M]=65535;else if(m[M]===1/0)C[M]=31744;else if(m[M]===-1/0)C[M]=64512;else{Tf[0]=m[M];var Q=E1[0],ae=Q>>>31<<15,Y=(Q<<1>>>24)-127,ne=Q>>13&1023;if(Y<-24)C[M]=ae;else if(Y<-14){var ve=-14-Y;C[M]=ae+(ne+1024>>ve)}else Y>15?C[M]=ae+31744:C[M]=ae+(Y+15<<10)+ne}return C}function wn(m){return Array.isArray(m)||n(m)}var Lf=function(m){return!(m&m-1)&&!!m},b1=34467,Ai=3553,bu=34067,Jl=34069,To=6408,Au=6406,es=6407,Ro=6409,ts=6410,Pf=32854,Tu=32855,Ru=36194,A1=32819,T1=32820,R1=33635,Of=34042,ns=6402,Qa=34041,Za=35904,Ja=35906,ra=36193,Lo=33776,Lu=33777,Pu=33778,Ou=33779,kf=35986,Mf=35987,Nf=34798,If=35840,Ff=35841,Df=35842,$f=35843,jf=36196,ia=5121,ku=5123,Mu=5125,ci=5126,L1=10242,P1=10243,O1=10497,Nu=33071,k1=33648,M1=10240,N1=10241,Iu=9728,I1=9729,rs=9984,Fu=9985,Bf=9986,Du=9987,F1=33170,el=4352,zf=4353,D1=4354,$1=34046,j1=3317,B1=37440,z1=37441,G1=37443,oa=37444,tl=33984,Gf=[rs,Bf,Fu,Du],nl=[0,Ro,ts,es,To],fi={};fi[Ro]=fi[Au]=fi[ns]=1,fi[Qa]=fi[ts]=2,fi[es]=fi[Za]=3,fi[To]=fi[Ja]=4;function aa(m){return"[object "+m+"]"}var Vf=aa("HTMLCanvasElement"),Uf=aa("OffscreenCanvas"),Hf=aa("CanvasRenderingContext2D"),Wf=aa("ImageBitmap"),Xf=aa("HTMLImageElement"),is=aa("HTMLVideoElement"),V1=Object.keys(Jo).concat([Vf,Uf,Hf,Wf,Xf,is]),la=[];la[ia]=1,la[ci]=4,la[ra]=2,la[ku]=2,la[Mu]=4;var er=[];er[Pf]=2,er[Tu]=2,er[Ru]=2,er[Qa]=4,er[Lo]=.5,er[Lu]=.5,er[Pu]=1,er[Ou]=1,er[kf]=.5,er[Mf]=1,er[Nf]=1,er[If]=.5,er[Ff]=.25,er[Df]=.5,er[$f]=.25,er[jf]=.5;function qf(m){return Array.isArray(m)&&(m.length===0||typeof m[0]=="number")}function $u(m){if(!Array.isArray(m))return!1;var C=m.length;return!(C===0||!wn(m[0]))}function Po(m){return Object.prototype.toString.call(m)}function ju(m){return Po(m)===Vf}function Yf(m){return Po(m)===Uf}function U1(m){return Po(m)===Hf}function Bu(m){return Po(m)===Wf}function Kf(m){return Po(m)===Xf}function Qf(m){return Po(m)===is}function zu(m){if(!m)return!1;var C=Po(m);return V1.indexOf(C)>=0?!0:qf(m)||$u(m)||qr(m)}function Zf(m){return Jo[Object.prototype.toString.call(m)]|0}function H1(m,C){var M=C.length;switch(m.type){case ia:case ku:case Mu:case ci:var Q=et.allocType(m.type,M);Q.set(C),m.data=Q;break;case ra:m.data=Rf(C);break;default:E.raise("unsupported texture type, must specify a typed array")}}function Jf(m,C){return et.allocType(m.type===ra?ci:m.type,C)}function ed(m,C){m.type===ra?(m.data=Rf(C),et.freeType(C)):m.data=C}function td(m,C,M,Q,ae,Y){for(var ne=m.width,ve=m.height,ge=m.channels,be=ne*ve*ge,Te=Jf(m,be),Ae=0,Oe=0;Oe<ve;++Oe)for(var ye=0;ye<ne;++ye)for(var Se=0;Se<ge;++Se)Te[Ae++]=C[M*ye+Q*Oe+ae*Se+Y];ed(m,Te)}function os(m,C,M,Q,ae,Y){var ne;if(typeof er[m]<"u"?ne=er[m]:ne=fi[m]*la[C],Y&&(ne*=6),ae){for(var ve=0,ge=M;ge>=1;)ve+=ne*ge*ge,ge/=2;return ve}else return ne*M*Q}function W1(m,C,M,Q,ae,Y,ne){var ve={"don't care":el,"dont care":el,nice:D1,fast:zf},ge={repeat:O1,clamp:Nu,mirror:k1},be={nearest:Iu,linear:I1},Te=r({mipmap:Du,"nearest mipmap nearest":rs,"linear mipmap nearest":Fu,"nearest mipmap linear":Bf,"linear mipmap linear":Du},be),Ae={none:0,browser:oa},Oe={uint8:ia,rgba4:A1,rgb565:R1,"rgb5 a1":T1},ye={alpha:Au,luminance:Ro,"luminance alpha":ts,rgb:es,rgba:To,rgba4:Pf,"rgb5 a1":Tu,rgb565:Ru},Se={};C.ext_srgb&&(ye.srgb=Za,ye.srgba=Ja),C.oes_texture_float&&(Oe.float32=Oe.float=ci),C.oes_texture_half_float&&(Oe.float16=Oe["half float"]=ra),C.webgl_depth_texture&&(r(ye,{depth:ns,"depth stencil":Qa}),r(Oe,{uint16:ku,uint32:Mu,"depth stencil":Of})),C.webgl_compressed_texture_s3tc&&r(Se,{"rgb s3tc dxt1":Lo,"rgba s3tc dxt1":Lu,"rgba s3tc dxt3":Pu,"rgba s3tc dxt5":Ou}),C.webgl_compressed_texture_atc&&r(Se,{"rgb atc":kf,"rgba atc explicit alpha":Mf,"rgba atc interpolated alpha":Nf}),C.webgl_compressed_texture_pvrtc&&r(Se,{"rgb pvrtc 4bppv1":If,"rgb pvrtc 2bppv1":Ff,"rgba pvrtc 4bppv1":Df,"rgba pvrtc 2bppv1":$f}),C.webgl_compressed_texture_etc1&&(Se["rgb etc1"]=jf);var z=Array.prototype.slice.call(m.getParameter(b1));Object.keys(Se).forEach(function(P){var Z=Se[P];z.indexOf(Z)>=0&&(ye[P]=Z)});var J=Object.keys(ye);M.textureFormats=J;var we=[];Object.keys(ye).forEach(function(P){var Z=ye[P];we[Z]=P});var Xe=[];Object.keys(Oe).forEach(function(P){var Z=Oe[P];Xe[Z]=P});var pe=[];Object.keys(be).forEach(function(P){var Z=be[P];pe[Z]=P});var He=[];Object.keys(Te).forEach(function(P){var Z=Te[P];He[Z]=P});var je=[];Object.keys(ge).forEach(function(P){var Z=ge[P];je[Z]=P});var pt=J.reduce(function(P,Z){var X=ye[Z];return X===Ro||X===Au||X===Ro||X===ts||X===ns||X===Qa||C.ext_srgb&&(X===Za||X===Ja)?P[X]=X:X===Tu||Z.indexOf("rgba")>=0?P[X]=To:P[X]=es,P},{});function le(){this.internalformat=To,this.format=To,this.type=ia,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=oa,this.width=0,this.height=0,this.channels=0}function oe(P,Z){P.internalformat=Z.internalformat,P.format=Z.format,P.type=Z.type,P.compressed=Z.compressed,P.premultiplyAlpha=Z.premultiplyAlpha,P.flipY=Z.flipY,P.unpackAlignment=Z.unpackAlignment,P.colorSpace=Z.colorSpace,P.width=Z.width,P.height=Z.height,P.channels=Z.channels}function Je(P,Z){if(!(typeof Z!="object"||!Z)){if("premultiplyAlpha"in Z&&(E.type(Z.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),P.premultiplyAlpha=Z.premultiplyAlpha),"flipY"in Z&&(E.type(Z.flipY,"boolean","invalid texture flip"),P.flipY=Z.flipY),"alignment"in Z&&(E.oneOf(Z.alignment,[1,2,4,8],"invalid texture unpack alignment"),P.unpackAlignment=Z.alignment),"colorSpace"in Z&&(E.parameter(Z.colorSpace,Ae,"invalid colorSpace"),P.colorSpace=Ae[Z.colorSpace]),"type"in Z){var X=Z.type;E(C.oes_texture_float||!(X==="float"||X==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),E(C.oes_texture_half_float||!(X==="half float"||X==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),E(C.webgl_depth_texture||!(X==="uint16"||X==="uint32"||X==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(X,Oe,"invalid texture type"),P.type=Oe[X]}var Ze=P.width,Xt=P.height,A=P.channels,w=!1;"shape"in Z?(E(Array.isArray(Z.shape)&&Z.shape.length>=2,"shape must be an array"),Ze=Z.shape[0],Xt=Z.shape[1],Z.shape.length===3&&(A=Z.shape[2],E(A>0&&A<=4,"invalid number of channels"),w=!0),E(Ze>=0&&Ze<=M.maxTextureSize,"invalid width"),E(Xt>=0&&Xt<=M.maxTextureSize,"invalid height")):("radius"in Z&&(Ze=Xt=Z.radius,E(Ze>=0&&Ze<=M.maxTextureSize,"invalid radius")),"width"in Z&&(Ze=Z.width,E(Ze>=0&&Ze<=M.maxTextureSize,"invalid width")),"height"in Z&&(Xt=Z.height,E(Xt>=0&&Xt<=M.maxTextureSize,"invalid height")),"channels"in Z&&(A=Z.channels,E(A>0&&A<=4,"invalid number of channels"),w=!0)),P.width=Ze|0,P.height=Xt|0,P.channels=A|0;var N=!1;if("format"in Z){var B=Z.format;E(C.webgl_depth_texture||!(B==="depth"||B==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(B,ye,"invalid texture format");var G=P.internalformat=ye[B];P.format=pt[G],B in Oe&&("type"in Z||(P.type=Oe[B])),B in Se&&(P.compressed=!0),N=!0}!w&&N?P.channels=fi[P.format]:w&&!N?P.channels!==nl[P.format]&&(P.format=P.internalformat=nl[P.channels]):N&&w&&E(P.channels===fi[P.format],"number of channels inconsistent with specified format")}}function Me(P){m.pixelStorei(B1,P.flipY),m.pixelStorei(z1,P.premultiplyAlpha),m.pixelStorei(G1,P.colorSpace),m.pixelStorei(j1,P.unpackAlignment)}function _e(){le.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ne(P,Z){var X=null;if(zu(Z)?X=Z:Z&&(E.type(Z,"object","invalid pixel data type"),Je(P,Z),"x"in Z&&(P.xOffset=Z.x|0),"y"in Z&&(P.yOffset=Z.y|0),zu(Z.data)&&(X=Z.data)),E(!P.compressed||X instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Z.copy){E(!X,"can not specify copy and data field for the same texture");var Ze=ae.viewportWidth,Xt=ae.viewportHeight;P.width=P.width||Ze-P.xOffset,P.height=P.height||Xt-P.yOffset,P.needsCopy=!0,E(P.xOffset>=0&&P.xOffset<Ze&&P.yOffset>=0&&P.yOffset<Xt&&P.width>0&&P.width<=Ze&&P.height>0&&P.height<=Xt,"copy texture read out of bounds")}else if(!X)P.width=P.width||1,P.height=P.height||1,P.channels=P.channels||4;else if(n(X))P.channels=P.channels||4,P.data=X,!("type"in Z)&&P.type===ia&&(P.type=Zf(X));else if(qf(X))P.channels=P.channels||4,H1(P,X),P.alignment=1,P.needsFree=!0;else if(qr(X)){var A=X.data;!Array.isArray(A)&&P.type===ia&&(P.type=Zf(A));var w=X.shape,N=X.stride,B,G,D,F,j,R;w.length===3?(D=w[2],R=N[2]):(E(w.length===2,"invalid ndarray pixel data, must be 2 or 3D"),D=1,R=1),B=w[0],G=w[1],F=N[0],j=N[1],P.alignment=1,P.width=B,P.height=G,P.channels=D,P.format=P.internalformat=nl[D],P.needsFree=!0,td(P,A,F,j,R,X.offset)}else if(ju(X)||Yf(X)||U1(X))ju(X)||Yf(X)?P.element=X:P.element=X.canvas,P.width=P.element.width,P.height=P.element.height,P.channels=4;else if(Bu(X))P.element=X,P.width=X.width,P.height=X.height,P.channels=4;else if(Kf(X))P.element=X,P.width=X.naturalWidth,P.height=X.naturalHeight,P.channels=4;else if(Qf(X))P.element=X,P.width=X.videoWidth,P.height=X.videoHeight,P.channels=4;else if($u(X)){var k=P.width||X[0].length,L=P.height||X.length,W=P.channels;wn(X[0][0])?W=W||X[0][0].length:W=W||1;for(var V=ui.shape(X),ie=1,se=0;se<V.length;++se)ie*=V[se];var Pe=Jf(P,ie);ui.flatten(X,V,"",Pe),ed(P,Pe),P.alignment=1,P.width=k,P.height=L,P.channels=W,P.format=P.internalformat=nl[W],P.needsFree=!0}P.type===ci?E(M.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):P.type===ra&&E(M.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function De(P,Z,X){var Ze=P.element,Xt=P.data,A=P.internalformat,w=P.format,N=P.type,B=P.width,G=P.height;Me(P),Ze?m.texImage2D(Z,X,w,w,N,Ze):P.compressed?m.compressedTexImage2D(Z,X,A,B,G,0,Xt):P.needsCopy?(Q(),m.copyTexImage2D(Z,X,w,P.xOffset,P.yOffset,B,G,0)):m.texImage2D(Z,X,w,B,G,0,w,N,Xt||null)}function Lt(P,Z,X,Ze,Xt){var A=P.element,w=P.data,N=P.internalformat,B=P.format,G=P.type,D=P.width,F=P.height;Me(P),A?m.texSubImage2D(Z,Xt,X,Ze,B,G,A):P.compressed?m.compressedTexSubImage2D(Z,Xt,X,Ze,N,D,F,w):P.needsCopy?(Q(),m.copyTexSubImage2D(Z,Xt,X,Ze,P.xOffset,P.yOffset,D,F)):m.texSubImage2D(Z,Xt,X,Ze,D,F,B,G,w)}var bt=[];function Be(){return bt.pop()||new _e}function We(P){P.needsFree&&et.freeType(P.data),_e.call(P),bt.push(P)}function xt(){le.call(this),this.genMipmaps=!1,this.mipmapHint=el,this.mipmask=0,this.images=Array(16)}function Pt(P,Z,X){var Ze=P.images[0]=Be();P.mipmask=1,Ze.width=P.width=Z,Ze.height=P.height=X,Ze.channels=P.channels=4}function Yt(P,Z){var X=null;if(zu(Z))X=P.images[0]=Be(),oe(X,P),Ne(X,Z),P.mipmask=1;else if(Je(P,Z),Array.isArray(Z.mipmap))for(var Ze=Z.mipmap,Xt=0;Xt<Ze.length;++Xt)X=P.images[Xt]=Be(),oe(X,P),X.width>>=Xt,X.height>>=Xt,Ne(X,Ze[Xt]),P.mipmask|=1<<Xt;else X=P.images[0]=Be(),oe(X,P),Ne(X,Z),P.mipmask=1;oe(P,P.images[0]),P.compressed&&(P.internalformat===Lo||P.internalformat===Lu||P.internalformat===Pu||P.internalformat===Ou)&&E(P.width%4===0&&P.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function bn(P,Z){for(var X=P.images,Ze=0;Ze<X.length;++Ze){if(!X[Ze])return;De(X[Ze],Z,Ze)}}var Pn=[];function Qt(){var P=Pn.pop()||new xt;le.call(P),P.mipmask=0;for(var Z=0;Z<16;++Z)P.images[Z]=null;return P}function tr(P){for(var Z=P.images,X=0;X<Z.length;++X)Z[X]&&We(Z[X]),Z[X]=null;Pn.push(P)}function Sn(){this.minFilter=Iu,this.magFilter=Iu,this.wrapS=Nu,this.wrapT=Nu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=el}function qn(P,Z){if("min"in Z){var X=Z.min;E.parameter(X,Te),P.minFilter=Te[X],Gf.indexOf(P.minFilter)>=0&&!("faces"in Z)&&(P.genMipmaps=!0)}if("mag"in Z){var Ze=Z.mag;E.parameter(Ze,be),P.magFilter=be[Ze]}var Xt=P.wrapS,A=P.wrapT;if("wrap"in Z){var w=Z.wrap;typeof w=="string"?(E.parameter(w,ge),Xt=A=ge[w]):Array.isArray(w)&&(E.parameter(w[0],ge),E.parameter(w[1],ge),Xt=ge[w[0]],A=ge[w[1]])}else{if("wrapS"in Z){var N=Z.wrapS;E.parameter(N,ge),Xt=ge[N]}if("wrapT"in Z){var B=Z.wrapT;E.parameter(B,ge),A=ge[B]}}if(P.wrapS=Xt,P.wrapT=A,"anisotropic"in Z){var G=Z.anisotropic;E(typeof G=="number"&&G>=1&&G<=M.maxAnisotropic,"aniso samples must be between 1 and "),P.anisotropic=Z.anisotropic}if("mipmap"in Z){var D=!1;switch(typeof Z.mipmap){case"string":E.parameter(Z.mipmap,ve,"invalid mipmap hint"),P.mipmapHint=ve[Z.mipmap],P.genMipmaps=!0,D=!0;break;case"boolean":D=P.genMipmaps=Z.mipmap;break;case"object":E(Array.isArray(Z.mipmap),"invalid mipmap type"),P.genMipmaps=!1,D=!0;break;default:E.raise("invalid mipmap type")}D&&!("min"in Z)&&(P.minFilter=rs)}}function nr(P,Z){m.texParameteri(Z,N1,P.minFilter),m.texParameteri(Z,M1,P.magFilter),m.texParameteri(Z,L1,P.wrapS),m.texParameteri(Z,P1,P.wrapT),C.ext_texture_filter_anisotropic&&m.texParameteri(Z,$1,P.anisotropic),P.genMipmaps&&(m.hint(F1,P.mipmapHint),m.generateMipmap(Z))}var rr=0,dr={},xr=M.maxTextureUnits,$n=Array(xr).map(function(){return null});function zt(P){le.call(this),this.mipmask=0,this.internalformat=To,this.id=rr++,this.refCount=1,this.target=P,this.texture=m.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Sn,ne.profile&&(this.stats={size:0})}function _r(P){m.activeTexture(tl),m.bindTexture(P.target,P.texture)}function cn(){var P=$n[0];P?m.bindTexture(P.target,P.texture):m.bindTexture(Ai,null)}function gt(P){var Z=P.texture;E(Z,"must not double destroy texture");var X=P.unit,Ze=P.target;X>=0&&(m.activeTexture(tl+X),m.bindTexture(Ze,null),$n[X]=null),m.deleteTexture(Z),P.texture=null,P.params=null,P.pixels=null,P.refCount=0,delete dr[P.id],Y.textureCount--}r(zt.prototype,{bind:function(){var P=this;P.bindCount+=1;var Z=P.unit;if(Z<0){for(var X=0;X<xr;++X){var Ze=$n[X];if(Ze){if(Ze.bindCount>0)continue;Ze.unit=-1}$n[X]=P,Z=X;break}Z>=xr&&E.raise("insufficient number of texture units"),ne.profile&&Y.maxTextureUnits<Z+1&&(Y.maxTextureUnits=Z+1),P.unit=Z,m.activeTexture(tl+Z),m.bindTexture(P.target,P.texture)}return Z},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&gt(this)}});function Kt(P,Z){var X=new zt(Ai);dr[X.id]=X,Y.textureCount++;function Ze(w,N){var B=X.texInfo;Sn.call(B);var G=Qt();return typeof w=="number"?typeof N=="number"?Pt(G,w|0,N|0):Pt(G,w|0,w|0):w?(E.type(w,"object","invalid arguments to regl.texture"),qn(B,w),Yt(G,w)):Pt(G,1,1),B.genMipmaps&&(G.mipmask=(G.width<<1)-1),X.mipmask=G.mipmask,oe(X,G),E.texture2D(B,G,M),X.internalformat=G.internalformat,Ze.width=G.width,Ze.height=G.height,_r(X),bn(G,Ai),nr(B,Ai),cn(),tr(G),ne.profile&&(X.stats.size=os(X.internalformat,X.type,G.width,G.height,B.genMipmaps,!1)),Ze.format=we[X.internalformat],Ze.type=Xe[X.type],Ze.mag=pe[B.magFilter],Ze.min=He[B.minFilter],Ze.wrapS=je[B.wrapS],Ze.wrapT=je[B.wrapT],Ze}function Xt(w,N,B,G){E(!!w,"must specify image data");var D=N|0,F=B|0,j=G|0,R=Be();return oe(R,X),R.width=0,R.height=0,Ne(R,w),R.width=R.width||(X.width>>j)-D,R.height=R.height||(X.height>>j)-F,E(X.type===R.type&&X.format===R.format&&X.internalformat===R.internalformat,"incompatible format for texture.subimage"),E(D>=0&&F>=0&&D+R.width<=X.width&&F+R.height<=X.height,"texture.subimage write out of bounds"),E(X.mipmask&1<<j,"missing mipmap data"),E(R.data||R.element||R.needsCopy,"missing image data"),_r(X),Lt(R,Ai,D,F,j),cn(),We(R),Ze}function A(w,N){var B=w|0,G=N|0||B;if(B===X.width&&G===X.height)return Ze;Ze.width=X.width=B,Ze.height=X.height=G,_r(X);for(var D=0;X.mipmask>>D;++D){var F=B>>D,j=G>>D;if(!F||!j)break;m.texImage2D(Ai,D,X.format,F,j,0,X.format,X.type,null)}return cn(),ne.profile&&(X.stats.size=os(X.internalformat,X.type,B,G,!1,!1)),Ze}return Ze(P,Z),Ze.subimage=Xt,Ze.resize=A,Ze._reglType="texture2d",Ze._texture=X,ne.profile&&(Ze.stats=X.stats),Ze.destroy=function(){X.decRef()},Ze}function nn(P,Z,X,Ze,Xt,A){var w=new zt(bu);dr[w.id]=w,Y.cubeCount++;var N=new Array(6);function B(F,j,R,k,L,W){var V,ie=w.texInfo;for(Sn.call(ie),V=0;V<6;++V)N[V]=Qt();if(typeof F=="number"||!F){var se=F|0||1;for(V=0;V<6;++V)Pt(N[V],se,se)}else if(typeof F=="object")if(j)Yt(N[0],F),Yt(N[1],j),Yt(N[2],R),Yt(N[3],k),Yt(N[4],L),Yt(N[5],W);else if(qn(ie,F),Je(w,F),"faces"in F){var Pe=F.faces;for(E(Array.isArray(Pe)&&Pe.length===6,"cube faces must be a length 6 array"),V=0;V<6;++V)E(typeof Pe[V]=="object"&&!!Pe[V],"invalid input for cube map face"),oe(N[V],w),Yt(N[V],Pe[V])}else for(V=0;V<6;++V)Yt(N[V],F);else E.raise("invalid arguments to cube map");for(oe(w,N[0]),E.optional(function(){M.npotTextureCube||E(Lf(w.width)&&Lf(w.height),"your browser does not support non power or two texture dimensions")}),ie.genMipmaps?w.mipmask=(N[0].width<<1)-1:w.mipmask=N[0].mipmask,E.textureCube(w,ie,N,M),w.internalformat=N[0].internalformat,B.width=N[0].width,B.height=N[0].height,_r(w),V=0;V<6;++V)bn(N[V],Jl+V);for(nr(ie,bu),cn(),ne.profile&&(w.stats.size=os(w.internalformat,w.type,B.width,B.height,ie.genMipmaps,!0)),B.format=we[w.internalformat],B.type=Xe[w.type],B.mag=pe[ie.magFilter],B.min=He[ie.minFilter],B.wrapS=je[ie.wrapS],B.wrapT=je[ie.wrapT],V=0;V<6;++V)tr(N[V]);return B}function G(F,j,R,k,L){E(!!j,"must specify image data"),E(typeof F=="number"&&F===(F|0)&&F>=0&&F<6,"invalid face");var W=R|0,V=k|0,ie=L|0,se=Be();return oe(se,w),se.width=0,se.height=0,Ne(se,j),se.width=se.width||(w.width>>ie)-W,se.height=se.height||(w.height>>ie)-V,E(w.type===se.type&&w.format===se.format&&w.internalformat===se.internalformat,"incompatible format for texture.subimage"),E(W>=0&&V>=0&&W+se.width<=w.width&&V+se.height<=w.height,"texture.subimage write out of bounds"),E(w.mipmask&1<<ie,"missing mipmap data"),E(se.data||se.element||se.needsCopy,"missing image data"),_r(w),Lt(se,Jl+F,W,V,ie),cn(),We(se),B}function D(F){var j=F|0;if(j!==w.width){B.width=w.width=j,B.height=w.height=j,_r(w);for(var R=0;R<6;++R)for(var k=0;w.mipmask>>k;++k)m.texImage2D(Jl+R,k,w.format,j>>k,j>>k,0,w.format,w.type,null);return cn(),ne.profile&&(w.stats.size=os(w.internalformat,w.type,B.width,B.height,!1,!0)),B}}return B(P,Z,X,Ze,Xt,A),B.subimage=G,B.resize=D,B._reglType="textureCube",B._texture=w,ne.profile&&(B.stats=w.stats),B.destroy=function(){w.decRef()},B}function jn(){for(var P=0;P<xr;++P)m.activeTexture(tl+P),m.bindTexture(Ai,null),$n[P]=null;Br(dr).forEach(gt),Y.cubeCount=0,Y.textureCount=0}ne.profile&&(Y.getTotalTextureSize=function(){var P=0;return Object.keys(dr).forEach(function(Z){P+=dr[Z].stats.size}),P});function lo(){for(var P=0;P<xr;++P){var Z=$n[P];Z&&(Z.bindCount=0,Z.unit=-1,$n[P]=null)}Br(dr).forEach(function(X){X.texture=m.createTexture(),m.bindTexture(X.target,X.texture);for(var Ze=0;Ze<32;++Ze)if(X.mipmask&1<<Ze)if(X.target===Ai)m.texImage2D(Ai,Ze,X.internalformat,X.width>>Ze,X.height>>Ze,0,X.internalformat,X.type,null);else for(var Xt=0;Xt<6;++Xt)m.texImage2D(Jl+Xt,Ze,X.internalformat,X.width>>Ze,X.height>>Ze,0,X.internalformat,X.type,null);nr(X.texInfo,X.target)})}function cl(){for(var P=0;P<xr;++P){var Z=$n[P];Z&&(Z.bindCount=0,Z.unit=-1,$n[P]=null),m.activeTexture(tl+P),m.bindTexture(Ai,null),m.bindTexture(bu,null)}}return{create2D:Kt,createCube:nn,clear:jn,getTexture:function(P){return null},restore:lo,refresh:cl}}var oo=36161,as=32854,nd=32855,rd=36194,id=33189,od=36168,ad=34041,ld=35907,sd=34836,ud=34842,cd=34843,di=[];di[as]=2,di[nd]=2,di[rd]=2,di[id]=2,di[od]=1,di[ad]=4,di[ld]=4,di[sd]=16,di[ud]=8,di[cd]=6;function fd(m,C,M){return di[m]*C*M}var X1=function(m,C,M,Q,ae){var Y={rgba4:as,rgb565:rd,"rgb5 a1":nd,depth:id,stencil:od,"depth stencil":ad};C.ext_srgb&&(Y.srgba=ld),C.ext_color_buffer_half_float&&(Y.rgba16f=ud,Y.rgb16f=cd),C.webgl_color_buffer_float&&(Y.rgba32f=sd);var ne=[];Object.keys(Y).forEach(function(ye){var Se=Y[ye];ne[Se]=ye});var ve=0,ge={};function be(ye){this.id=ve++,this.refCount=1,this.renderbuffer=ye,this.format=as,this.width=0,this.height=0,ae.profile&&(this.stats={size:0})}be.prototype.decRef=function(){--this.refCount<=0&&Te(this)};function Te(ye){var Se=ye.renderbuffer;E(Se,"must not double destroy renderbuffer"),m.bindRenderbuffer(oo,null),m.deleteRenderbuffer(Se),ye.renderbuffer=null,ye.refCount=0,delete ge[ye.id],Q.renderbufferCount--}function Ae(ye,Se){var z=new be(m.createRenderbuffer());ge[z.id]=z,Q.renderbufferCount++;function J(Xe,pe){var He=0,je=0,pt=as;if(typeof Xe=="object"&&Xe){var le=Xe;if("shape"in le){var oe=le.shape;E(Array.isArray(oe)&&oe.length>=2,"invalid renderbuffer shape"),He=oe[0]|0,je=oe[1]|0}else"radius"in le&&(He=je=le.radius|0),"width"in le&&(He=le.width|0),"height"in le&&(je=le.height|0);"format"in le&&(E.parameter(le.format,Y,"invalid renderbuffer format"),pt=Y[le.format])}else typeof Xe=="number"?(He=Xe|0,typeof pe=="number"?je=pe|0:je=He):Xe?E.raise("invalid arguments to renderbuffer constructor"):He=je=1;if(E(He>0&&je>0&&He<=M.maxRenderbufferSize&&je<=M.maxRenderbufferSize,"invalid renderbuffer size"),!(He===z.width&&je===z.height&&pt===z.format))return J.width=z.width=He,J.height=z.height=je,z.format=pt,m.bindRenderbuffer(oo,z.renderbuffer),m.renderbufferStorage(oo,pt,He,je),E(m.getError()===0,"invalid render buffer format"),ae.profile&&(z.stats.size=fd(z.format,z.width,z.height)),J.format=ne[z.format],J}function we(Xe,pe){var He=Xe|0,je=pe|0||He;return He===z.width&&je===z.height||(E(He>0&&je>0&&He<=M.maxRenderbufferSize&&je<=M.maxRenderbufferSize,"invalid renderbuffer size"),J.width=z.width=He,J.height=z.height=je,m.bindRenderbuffer(oo,z.renderbuffer),m.renderbufferStorage(oo,z.format,He,je),E(m.getError()===0,"invalid render buffer format"),ae.profile&&(z.stats.size=fd(z.format,z.width,z.height))),J}return J(ye,Se),J.resize=we,J._reglType="renderbuffer",J._renderbuffer=z,ae.profile&&(J.stats=z.stats),J.destroy=function(){z.decRef()},J}ae.profile&&(Q.getTotalRenderbufferSize=function(){var ye=0;return Object.keys(ge).forEach(function(Se){ye+=ge[Se].stats.size}),ye});function Oe(){Br(ge).forEach(function(ye){ye.renderbuffer=m.createRenderbuffer(),m.bindRenderbuffer(oo,ye.renderbuffer),m.renderbufferStorage(oo,ye.format,ye.width,ye.height)}),m.bindRenderbuffer(oo,null)}return{create:Ae,clear:function(){Br(ge).forEach(Te)},restore:Oe}},Bi=36160,Gu=36161,Oo=3553,ls=34069,dd=36064,ss=36096,hd=36128,pd=33306,md=36053,q1=36054,Y1=36055,K1=36057,Q1=36061,Z1=36193,J1=5121,ep=5126,gd=6407,vd=6408,tp=6402,np=[gd,vd],Vu=[];Vu[vd]=4,Vu[gd]=3;var rl=[];rl[J1]=1,rl[ep]=4,rl[Z1]=2;var rp=32854,yd=32855,ip=36194,xd=33189,_d=36168,Uu=34041,wd=35907,op=34836,il=34842,ap=34843,lp=[rp,yd,ip,wd,il,ap,op],sa={};sa[md]="complete",sa[q1]="incomplete attachment",sa[K1]="incomplete dimensions",sa[Y1]="incomplete, missing attachment",sa[Q1]="unsupported";function sp(m,C,M,Q,ae,Y){var ne={cur:null,next:null,dirty:!1,setFBO:null},ve=["rgba"],ge=["rgba4","rgb565","rgb5 a1"];C.ext_srgb&&ge.push("srgba"),C.ext_color_buffer_half_float&&ge.push("rgba16f","rgb16f"),C.webgl_color_buffer_float&&ge.push("rgba32f");var be=["uint8"];C.oes_texture_half_float&&be.push("half float","float16"),C.oes_texture_float&&be.push("float","float32");function Te(_e,Ne,De){this.target=_e,this.texture=Ne,this.renderbuffer=De;var Lt=0,bt=0;Ne?(Lt=Ne.width,bt=Ne.height):De&&(Lt=De.width,bt=De.height),this.width=Lt,this.height=bt}function Ae(_e){_e&&(_e.texture&&_e.texture._texture.decRef(),_e.renderbuffer&&_e.renderbuffer._renderbuffer.decRef())}function Oe(_e,Ne,De){if(_e)if(_e.texture){var Lt=_e.texture._texture,bt=Math.max(1,Lt.width),Be=Math.max(1,Lt.height);E(bt===Ne&&Be===De,"inconsistent width/height for supplied texture"),Lt.refCount+=1}else{var We=_e.renderbuffer._renderbuffer;E(We.width===Ne&&We.height===De,"inconsistent width/height for renderbuffer"),We.refCount+=1}}function ye(_e,Ne){Ne&&(Ne.texture?m.framebufferTexture2D(Bi,_e,Ne.target,Ne.texture._texture.texture,0):m.framebufferRenderbuffer(Bi,_e,Gu,Ne.renderbuffer._renderbuffer.renderbuffer))}function Se(_e){var Ne=Oo,De=null,Lt=null,bt=_e;typeof _e=="object"&&(bt=_e.data,"target"in _e&&(Ne=_e.target|0)),E.type(bt,"function","invalid attachment data");var Be=bt._reglType;return Be==="texture2d"?(De=bt,E(Ne===Oo)):Be==="textureCube"?(De=bt,E(Ne>=ls&&Ne<ls+6,"invalid cube map target")):Be==="renderbuffer"?(Lt=bt,Ne=Gu):E.raise("invalid regl object for attachment"),new Te(Ne,De,Lt)}function z(_e,Ne,De,Lt,bt){if(De){var Be=Q.create2D({width:_e,height:Ne,format:Lt,type:bt});return Be._texture.refCount=0,new Te(Oo,Be,null)}else{var We=ae.create({width:_e,height:Ne,format:Lt});return We._renderbuffer.refCount=0,new Te(Gu,null,We)}}function J(_e){return _e&&(_e.texture||_e.renderbuffer)}function we(_e,Ne,De){_e&&(_e.texture?_e.texture.resize(Ne,De):_e.renderbuffer&&_e.renderbuffer.resize(Ne,De),_e.width=Ne,_e.height=De)}var Xe=0,pe={};function He(){this.id=Xe++,pe[this.id]=this,this.framebuffer=m.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function je(_e){_e.colorAttachments.forEach(Ae),Ae(_e.depthAttachment),Ae(_e.stencilAttachment),Ae(_e.depthStencilAttachment)}function pt(_e){var Ne=_e.framebuffer;E(Ne,"must not double destroy framebuffer"),m.deleteFramebuffer(Ne),_e.framebuffer=null,Y.framebufferCount--,delete pe[_e.id]}function le(_e){var Ne;m.bindFramebuffer(Bi,_e.framebuffer);var De=_e.colorAttachments;for(Ne=0;Ne<De.length;++Ne)ye(dd+Ne,De[Ne]);for(Ne=De.length;Ne<M.maxColorAttachments;++Ne)m.framebufferTexture2D(Bi,dd+Ne,Oo,null,0);m.framebufferTexture2D(Bi,pd,Oo,null,0),m.framebufferTexture2D(Bi,ss,Oo,null,0),m.framebufferTexture2D(Bi,hd,Oo,null,0),ye(ss,_e.depthAttachment),ye(hd,_e.stencilAttachment),ye(pd,_e.depthStencilAttachment);var Lt=m.checkFramebufferStatus(Bi);!m.isContextLost()&&Lt!==md&&E.raise("framebuffer configuration not supported, status = "+sa[Lt]),m.bindFramebuffer(Bi,ne.next?ne.next.framebuffer:null),ne.cur=ne.next,m.getError()}function oe(_e,Ne){var De=new He;Y.framebufferCount++;function Lt(Be,We){var xt;E(ne.next!==De,"can not update framebuffer which is currently in use");var Pt=0,Yt=0,bn=!0,Pn=!0,Qt=null,tr=!0,Sn="rgba",qn="uint8",nr=1,rr=null,dr=null,xr=null,$n=!1;if(typeof Be=="number")Pt=Be|0,Yt=We|0||Pt;else if(!Be)Pt=Yt=1;else{E.type(Be,"object","invalid arguments for framebuffer");var zt=Be;if("shape"in zt){var _r=zt.shape;E(Array.isArray(_r)&&_r.length>=2,"invalid shape for framebuffer"),Pt=_r[0],Yt=_r[1]}else"radius"in zt&&(Pt=Yt=zt.radius),"width"in zt&&(Pt=zt.width),"height"in zt&&(Yt=zt.height);("color"in zt||"colors"in zt)&&(Qt=zt.color||zt.colors,Array.isArray(Qt)&&E(Qt.length===1||C.webgl_draw_buffers,"multiple render targets not supported")),Qt||("colorCount"in zt&&(nr=zt.colorCount|0,E(nr>0,"invalid color buffer count")),"colorTexture"in zt&&(tr=!!zt.colorTexture,Sn="rgba4"),"colorType"in zt&&(qn=zt.colorType,tr?(E(C.oes_texture_float||!(qn==="float"||qn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),E(C.oes_texture_half_float||!(qn==="half float"||qn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):qn==="half float"||qn==="float16"?(E(C.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Sn="rgba16f"):(qn==="float"||qn==="float32")&&(E(C.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Sn="rgba32f"),E.oneOf(qn,be,"invalid color type")),"colorFormat"in zt&&(Sn=zt.colorFormat,ve.indexOf(Sn)>=0?tr=!0:ge.indexOf(Sn)>=0?tr=!1:E.optional(function(){tr?E.oneOf(zt.colorFormat,ve,"invalid color format for texture"):E.oneOf(zt.colorFormat,ge,"invalid color format for renderbuffer")}))),("depthTexture"in zt||"depthStencilTexture"in zt)&&($n=!!(zt.depthTexture||zt.depthStencilTexture),E(!$n||C.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in zt&&(typeof zt.depth=="boolean"?bn=zt.depth:(rr=zt.depth,Pn=!1)),"stencil"in zt&&(typeof zt.stencil=="boolean"?Pn=zt.stencil:(dr=zt.stencil,bn=!1)),"depthStencil"in zt&&(typeof zt.depthStencil=="boolean"?bn=Pn=zt.depthStencil:(xr=zt.depthStencil,bn=!1,Pn=!1))}var cn=null,gt=null,Kt=null,nn=null;if(Array.isArray(Qt))cn=Qt.map(Se);else if(Qt)cn=[Se(Qt)];else for(cn=new Array(nr),xt=0;xt<nr;++xt)cn[xt]=z(Pt,Yt,tr,Sn,qn);E(C.webgl_draw_buffers||cn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),E(cn.length<=M.maxColorAttachments,"too many color attachments, not supported"),Pt=Pt||cn[0].width,Yt=Yt||cn[0].height,rr?gt=Se(rr):bn&&!Pn&&(gt=z(Pt,Yt,$n,"depth","uint32")),dr?Kt=Se(dr):Pn&&!bn&&(Kt=z(Pt,Yt,!1,"stencil","uint8")),xr?nn=Se(xr):!rr&&!dr&&Pn&&bn&&(nn=z(Pt,Yt,$n,"depth stencil","depth stencil")),E(!!rr+!!dr+!!xr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var jn=null;for(xt=0;xt<cn.length;++xt)if(Oe(cn[xt],Pt,Yt),E(!cn[xt]||cn[xt].texture&&np.indexOf(cn[xt].texture._texture.format)>=0||cn[xt].renderbuffer&&lp.indexOf(cn[xt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+xt+" is invalid"),cn[xt]&&cn[xt].texture){var lo=Vu[cn[xt].texture._texture.format]*rl[cn[xt].texture._texture.type];jn===null?jn=lo:E(jn===lo,"all color attachments much have the same number of bits per pixel.")}return Oe(gt,Pt,Yt),E(!gt||gt.texture&&gt.texture._texture.format===tp||gt.renderbuffer&&gt.renderbuffer._renderbuffer.format===xd,"invalid depth attachment for framebuffer object"),Oe(Kt,Pt,Yt),E(!Kt||Kt.renderbuffer&&Kt.renderbuffer._renderbuffer.format===_d,"invalid stencil attachment for framebuffer object"),Oe(nn,Pt,Yt),E(!nn||nn.texture&&nn.texture._texture.format===Uu||nn.renderbuffer&&nn.renderbuffer._renderbuffer.format===Uu,"invalid depth-stencil attachment for framebuffer object"),je(De),De.width=Pt,De.height=Yt,De.colorAttachments=cn,De.depthAttachment=gt,De.stencilAttachment=Kt,De.depthStencilAttachment=nn,Lt.color=cn.map(J),Lt.depth=J(gt),Lt.stencil=J(Kt),Lt.depthStencil=J(nn),Lt.width=De.width,Lt.height=De.height,le(De),Lt}function bt(Be,We){E(ne.next!==De,"can not resize a framebuffer which is currently in use");var xt=Math.max(Be|0,1),Pt=Math.max(We|0||xt,1);if(xt===De.width&&Pt===De.height)return Lt;for(var Yt=De.colorAttachments,bn=0;bn<Yt.length;++bn)we(Yt[bn],xt,Pt);return we(De.depthAttachment,xt,Pt),we(De.stencilAttachment,xt,Pt),we(De.depthStencilAttachment,xt,Pt),De.width=Lt.width=xt,De.height=Lt.height=Pt,le(De),Lt}return Lt(_e,Ne),r(Lt,{resize:bt,_reglType:"framebuffer",_framebuffer:De,destroy:function(){pt(De),je(De)},use:function(Be){ne.setFBO({framebuffer:Lt},Be)}})}function Je(_e){var Ne=Array(6);function De(bt){var Be;E(Ne.indexOf(ne.next)<0,"can not update framebuffer which is currently in use");var We={color:null},xt=0,Pt=null,Yt="rgba",bn="uint8",Pn=1;if(typeof bt=="number")xt=bt|0;else if(!bt)xt=1;else{E.type(bt,"object","invalid arguments for framebuffer");var Qt=bt;if("shape"in Qt){var tr=Qt.shape;E(Array.isArray(tr)&&tr.length>=2,"invalid shape for framebuffer"),E(tr[0]===tr[1],"cube framebuffer must be square"),xt=tr[0]}else"radius"in Qt&&(xt=Qt.radius|0),"width"in Qt?(xt=Qt.width|0,"height"in Qt&&E(Qt.height===xt,"must be square")):"height"in Qt&&(xt=Qt.height|0);("color"in Qt||"colors"in Qt)&&(Pt=Qt.color||Qt.colors,Array.isArray(Pt)&&E(Pt.length===1||C.webgl_draw_buffers,"multiple render targets not supported")),Pt||("colorCount"in Qt&&(Pn=Qt.colorCount|0,E(Pn>0,"invalid color buffer count")),"colorType"in Qt&&(E.oneOf(Qt.colorType,be,"invalid color type"),bn=Qt.colorType),"colorFormat"in Qt&&(Yt=Qt.colorFormat,E.oneOf(Qt.colorFormat,ve,"invalid color format for texture"))),"depth"in Qt&&(We.depth=Qt.depth),"stencil"in Qt&&(We.stencil=Qt.stencil),"depthStencil"in Qt&&(We.depthStencil=Qt.depthStencil)}var Sn;if(Pt)if(Array.isArray(Pt))for(Sn=[],Be=0;Be<Pt.length;++Be)Sn[Be]=Pt[Be];else Sn=[Pt];else{Sn=Array(Pn);var qn={radius:xt,format:Yt,type:bn};for(Be=0;Be<Pn;++Be)Sn[Be]=Q.createCube(qn)}for(We.color=Array(Sn.length),Be=0;Be<Sn.length;++Be){var nr=Sn[Be];E(typeof nr=="function"&&nr._reglType==="textureCube","invalid cube map"),xt=xt||nr.width,E(nr.width===xt&&nr.height===xt,"invalid cube map shape"),We.color[Be]={target:ls,data:Sn[Be]}}for(Be=0;Be<6;++Be){for(var rr=0;rr<Sn.length;++rr)We.color[rr].target=ls+Be;Be>0&&(We.depth=Ne[0].depth,We.stencil=Ne[0].stencil,We.depthStencil=Ne[0].depthStencil),Ne[Be]?Ne[Be](We):Ne[Be]=oe(We)}return r(De,{width:xt,height:xt,color:Sn})}function Lt(bt){var Be,We=bt|0;if(E(We>0&&We<=M.maxCubeMapSize,"invalid radius for cube fbo"),We===De.width)return De;var xt=De.color;for(Be=0;Be<xt.length;++Be)xt[Be].resize(We);for(Be=0;Be<6;++Be)Ne[Be].resize(We);return De.width=De.height=We,De}return De(_e),r(De,{faces:Ne,resize:Lt,_reglType:"framebufferCube",destroy:function(){Ne.forEach(function(bt){bt.destroy()})}})}function Me(){ne.cur=null,ne.next=null,ne.dirty=!0,Br(pe).forEach(function(_e){_e.framebuffer=m.createFramebuffer(),le(_e)})}return r(ne,{getFramebuffer:function(_e){if(typeof _e=="function"&&_e._reglType==="framebuffer"){var Ne=_e._framebuffer;if(Ne instanceof He)return Ne}return null},create:oe,createCube:Je,clear:function(){Br(pe).forEach(pt)},restore:Me})}var up=5126,h=34962,$=34963,H=["attributes","elements","offset","count","primitive","instances"];function fe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=up,this.offset=0,this.stride=0,this.divisor=0}function ke(m,C,M,Q,ae,Y,ne){for(var ve=M.maxAttributes,ge=new Array(ve),be=0;be<ve;++be)ge[be]=new fe;var Te=0,Ae={},Oe={Record:fe,scope:{},state:ge,currentVAO:null,targetVAO:null,restore:Se()?je:function(){},createVAO:pt,getVAO:J,destroyBuffer:ye,setVAO:Se()?we:Xe,clear:Se()?pe:function(){}};function ye(le){for(var oe=0;oe<ge.length;++oe){var Je=ge[oe];Je.buffer===le&&(m.disableVertexAttribArray(oe),Je.buffer=null)}}function Se(){return C.oes_vertex_array_object}function z(){return C.angle_instanced_arrays}function J(le){return typeof le=="function"&&le._vao?le._vao:null}function we(le){if(le!==Oe.currentVAO){var oe=Se();le?oe.bindVertexArrayOES(le.vao):oe.bindVertexArrayOES(null),Oe.currentVAO=le}}function Xe(le){if(le!==Oe.currentVAO){if(le)le.bindAttrs();else{for(var oe=z(),Je=0;Je<ge.length;++Je){var Me=ge[Je];Me.buffer?(m.enableVertexAttribArray(Je),Me.buffer.bind(),m.vertexAttribPointer(Je,Me.size,Me.type,Me.normalized,Me.stride,Me.offfset),oe&&Me.divisor&&oe.vertexAttribDivisorANGLE(Je,Me.divisor)):(m.disableVertexAttribArray(Je),m.vertexAttrib4f(Je,Me.x,Me.y,Me.z,Me.w))}ne.elements?m.bindBuffer($,ne.elements.buffer.buffer):m.bindBuffer($,null)}Oe.currentVAO=le}}function pe(){Br(Ae).forEach(function(le){le.destroy()})}function He(){this.id=++Te,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var le=Se();le?this.vao=le.createVertexArrayOES():this.vao=null,Ae[this.id]=this,this.buffers=[]}He.prototype.bindAttrs=function(){for(var le=z(),oe=this.attributes,Je=0;Je<oe.length;++Je){var Me=oe[Je];Me.buffer?(m.enableVertexAttribArray(Je),m.bindBuffer(h,Me.buffer.buffer),m.vertexAttribPointer(Je,Me.size,Me.type,Me.normalized,Me.stride,Me.offset),le&&Me.divisor&&le.vertexAttribDivisorANGLE(Je,Me.divisor)):(m.disableVertexAttribArray(Je),m.vertexAttrib4f(Je,Me.x,Me.y,Me.z,Me.w))}for(var _e=oe.length;_e<ve;++_e)m.disableVertexAttribArray(_e);var Ne=Y.getElements(this.elements);Ne?m.bindBuffer($,Ne.buffer.buffer):m.bindBuffer($,null)},He.prototype.refresh=function(){var le=Se();le&&(le.bindVertexArrayOES(this.vao),this.bindAttrs(),Oe.currentVAO=null,le.bindVertexArrayOES(null))},He.prototype.destroy=function(){if(this.vao){var le=Se();this===Oe.currentVAO&&(Oe.currentVAO=null,le.bindVertexArrayOES(null)),le.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Ae[this.id]&&(delete Ae[this.id],Q.vaoCount-=1)};function je(){var le=Se();le&&Br(Ae).forEach(function(oe){oe.refresh()})}function pt(le){var oe=new He;Q.vaoCount+=1;function Je(Me){var _e;if(Array.isArray(Me))_e=Me,oe.elements&&oe.ownsElements&&oe.elements.destroy(),oe.elements=null,oe.ownsElements=!1,oe.offset=0,oe.count=0,oe.instances=-1,oe.primitive=4;else{if(E(typeof Me=="object","invalid arguments for create vao"),E("attributes"in Me,"must specify attributes for vao"),Me.elements){var Ne=Me.elements;oe.ownsElements?typeof Ne=="function"&&Ne._reglType==="elements"?(oe.elements.destroy(),oe.ownsElements=!1):(oe.elements(Ne),oe.ownsElements=!1):Y.getElements(Me.elements)?(oe.elements=Me.elements,oe.ownsElements=!1):(oe.elements=Y.create(Me.elements),oe.ownsElements=!0)}else oe.elements=null,oe.ownsElements=!1;_e=Me.attributes,oe.offset=0,oe.count=-1,oe.instances=-1,oe.primitive=4,oe.elements&&(oe.count=oe.elements._elements.vertCount,oe.primitive=oe.elements._elements.primType),"offset"in Me&&(oe.offset=Me.offset|0),"count"in Me&&(oe.count=Me.count|0),"instances"in Me&&(oe.instances=Me.instances|0),"primitive"in Me&&(E(Me.primitive in ro,"bad primitive type: "+Me.primitive),oe.primitive=ro[Me.primitive]),E.optional(()=>{for(var bn=Object.keys(Me),Pn=0;Pn<bn.length;++Pn)E(H.indexOf(bn[Pn])>=0,'invalid option for vao: "'+bn[Pn]+'" valid options are '+H)}),E(Array.isArray(_e),"attributes must be an array")}E(_e.length<ve,"too many attributes"),E(_e.length>0,"must specify at least one attribute");var De={},Lt=oe.attributes;Lt.length=_e.length;for(var bt=0;bt<_e.length;++bt){var Be=_e[bt],We=Lt[bt]=new fe,xt=Be.data||Be;if(Array.isArray(xt)||n(xt)||qr(xt)){var Pt;oe.buffers[bt]&&(Pt=oe.buffers[bt],n(xt)&&Pt._buffer.byteLength>=xt.byteLength?Pt.subdata(xt):(Pt.destroy(),oe.buffers[bt]=null)),oe.buffers[bt]||(Pt=oe.buffers[bt]=ae.create(Be,h,!1,!0)),We.buffer=ae.getBuffer(Pt),We.size=We.buffer.dimension|0,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1,De[bt]=1}else ae.getBuffer(Be)?(We.buffer=ae.getBuffer(Be),We.size=We.buffer.dimension|0,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1):ae.getBuffer(Be.buffer)?(We.buffer=ae.getBuffer(Be.buffer),We.size=(+Be.size||We.buffer.dimension)|0,We.normalized=!!Be.normalized||!1,"type"in Be?(E.parameter(Be.type,ta,"invalid buffer type"),We.type=ta[Be.type]):We.type=We.buffer.dtype,We.offset=(Be.offset||0)|0,We.stride=(Be.stride||0)|0,We.divisor=(Be.divisor||0)|0,We.state=1,E(We.size>=1&&We.size<=4,"size must be between 1 and 4"),E(We.offset>=0,"invalid offset"),E(We.stride>=0&&We.stride<=255,"stride must be between 0 and 255"),E(We.divisor>=0,"divisor must be positive"),E(!We.divisor||!!C.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Be?(E(bt>0,"first attribute must not be a constant"),We.x=+Be.x||0,We.y=+Be.y||0,We.z=+Be.z||0,We.w=+Be.w||0,We.state=2):E(!1,"invalid attribute spec for location "+bt)}for(var Yt=0;Yt<oe.buffers.length;++Yt)!De[Yt]&&oe.buffers[Yt]&&(oe.buffers[Yt].destroy(),oe.buffers[Yt]=null);return oe.refresh(),Je}return Je.destroy=function(){for(var Me=0;Me<oe.buffers.length;++Me)oe.buffers[Me]&&oe.buffers[Me].destroy();oe.buffers.length=0,oe.ownsElements&&(oe.elements.destroy(),oe.elements=null,oe.ownsElements=!1),oe.destroy()},Je._vao=oe,Je._reglType="vao",Je(le)}return Oe}var Ye=35632,rt=35633,Nt=35718,un=35721;function rn(m,C,M,Q){var ae={},Y={};function ne(z,J,we,Xe){this.name=z,this.id=J,this.location=we,this.info=Xe}function ve(z,J){for(var we=0;we<z.length;++we)if(z[we].id===J.id){z[we].location=J.location;return}z.push(J)}function ge(z,J,we){var Xe=z===Ye?ae:Y,pe=Xe[J];if(!pe){var He=C.str(J);pe=m.createShader(z),m.shaderSource(pe,He),m.compileShader(pe),E.shaderError(m,pe,He,z,we),Xe[J]=pe}return pe}var be={},Te=[],Ae=0;function Oe(z,J){this.id=Ae++,this.fragId=z,this.vertId=J,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Q.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ye(z,J,we){var Xe,pe,He=ge(Ye,z.fragId),je=ge(rt,z.vertId),pt=z.program=m.createProgram();if(m.attachShader(pt,He),m.attachShader(pt,je),we)for(Xe=0;Xe<we.length;++Xe){var le=we[Xe];m.bindAttribLocation(pt,le[0],le[1])}m.linkProgram(pt),E.linkError(m,pt,C.str(z.fragId),C.str(z.vertId),J);var oe=m.getProgramParameter(pt,Nt);Q.profile&&(z.stats.uniformsCount=oe);var Je=z.uniforms;for(Xe=0;Xe<oe;++Xe)if(pe=m.getActiveUniform(pt,Xe),pe){if(pe.size>1)for(var Me=0;Me<pe.size;++Me){var _e=pe.name.replace("[0]","["+Me+"]");ve(Je,new ne(_e,C.id(_e),m.getUniformLocation(pt,_e),pe))}var Ne=pe.name;pe.size>1&&(Ne=Ne.replace("[0]","")),ve(Je,new ne(Ne,C.id(Ne),m.getUniformLocation(pt,Ne),pe))}var De=m.getProgramParameter(pt,un);Q.profile&&(z.stats.attributesCount=De);var Lt=z.attributes;for(Xe=0;Xe<De;++Xe)pe=m.getActiveAttrib(pt,Xe),pe&&ve(Lt,new ne(pe.name,C.id(pe.name),m.getAttribLocation(pt,pe.name),pe))}Q.profile&&(M.getMaxUniformsCount=function(){var z=0;return Te.forEach(function(J){J.stats.uniformsCount>z&&(z=J.stats.uniformsCount)}),z},M.getMaxAttributesCount=function(){var z=0;return Te.forEach(function(J){J.stats.attributesCount>z&&(z=J.stats.attributesCount)}),z});function Se(){ae={},Y={};for(var z=0;z<Te.length;++z)ye(Te[z],null,Te[z].attributes.map(function(J){return[J.location,J.name]}))}return{clear:function(){var z=m.deleteShader.bind(m);Br(ae).forEach(z),ae={},Br(Y).forEach(z),Y={},Te.forEach(function(J){m.deleteProgram(J.program)}),Te.length=0,be={},M.shaderCount=0},program:function(z,J,we,Xe){E.command(z>=0,"missing vertex shader",we),E.command(J>=0,"missing fragment shader",we);var pe=be[J];pe||(pe=be[J]={});var He=pe[z];if(He&&(He.refCount++,!Xe))return He;var je=new Oe(J,z);return M.shaderCount++,ye(je,we,Xe),He||(pe[z]=je),Te.push(je),r(je,{destroy:function(){if(je.refCount--,je.refCount<=0){m.deleteProgram(je.program);var pt=Te.indexOf(je);Te.splice(pt,1),M.shaderCount--}pe[je.vertId].refCount<=0&&(m.deleteShader(Y[je.vertId]),delete Y[je.vertId],delete be[je.fragId][je.vertId]),Object.keys(be[je.fragId]).length||(m.deleteShader(ae[je.fragId]),delete ae[je.fragId],delete be[je.fragId])}})},restore:Se,shader:ge,frag:-1,vert:-1}}var Wn=6408,pn=5121,on=3333,Sd=5126;function N9(m,C,M,Q,ae,Y,ne){function ve(Te){var Ae;C.next===null?(E(ae.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ae=pn):(E(C.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ae=C.next.colorAttachments[0].texture._texture.type,E.optional(function(){Y.oes_texture_float?(E(Ae===pn||Ae===Sd,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ae===Sd&&E(ne.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):E(Ae===pn,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Oe=0,ye=0,Se=Q.framebufferWidth,z=Q.framebufferHeight,J=null;n(Te)?J=Te:Te&&(E.type(Te,"object","invalid arguments to regl.read()"),Oe=Te.x|0,ye=Te.y|0,E(Oe>=0&&Oe<Q.framebufferWidth,"invalid x offset for regl.read"),E(ye>=0&&ye<Q.framebufferHeight,"invalid y offset for regl.read"),Se=(Te.width||Q.framebufferWidth-Oe)|0,z=(Te.height||Q.framebufferHeight-ye)|0,J=Te.data||null),J&&(Ae===pn?E(J instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ae===Sd&&E(J instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),E(Se>0&&Se+Oe<=Q.framebufferWidth,"invalid width for read pixels"),E(z>0&&z+ye<=Q.framebufferHeight,"invalid height for read pixels"),M();var we=Se*z*4;return J||(Ae===pn?J=new Uint8Array(we):Ae===Sd&&(J=J||new Float32Array(we))),E.isTypedArray(J,"data buffer for regl.read() must be a typedarray"),E(J.byteLength>=we,"data buffer for regl.read() too small"),m.pixelStorei(on,4),m.readPixels(Oe,ye,Se,z,Wn,Ae,J),J}function ge(Te){var Ae;return C.setFBO({framebuffer:Te.framebuffer},function(){Ae=ve(Te)}),Ae}function be(Te){return!Te||!("framebuffer"in Te)?ve(Te):ge(Te)}return be}function us(m){return Array.prototype.slice.call(m)}function cs(m){return us(m).join("")}function I9(){var m=0,C=[],M=[];function Q(Ae){for(var Oe=0;Oe<M.length;++Oe)if(M[Oe]===Ae)return C[Oe];var ye="g"+m++;return C.push(ye),M.push(Ae),ye}function ae(){var Ae=[];function Oe(){Ae.push.apply(Ae,us(arguments))}var ye=[];function Se(){var z="v"+m++;return ye.push(z),arguments.length>0&&(Ae.push(z,"="),Ae.push.apply(Ae,us(arguments)),Ae.push(";")),z}return r(Oe,{def:Se,toString:function(){return cs([ye.length>0?"var "+ye.join(",")+";":"",cs(Ae)])}})}function Y(){var Ae=ae(),Oe=ae(),ye=Ae.toString,Se=Oe.toString;function z(J,we){Oe(J,we,"=",Ae.def(J,we),";")}return r(function(){Ae.apply(Ae,us(arguments))},{def:Ae.def,entry:Ae,exit:Oe,save:z,set:function(J,we,Xe){z(J,we),Ae(J,we,"=",Xe,";")},toString:function(){return ye()+Se()}})}function ne(){var Ae=cs(arguments),Oe=Y(),ye=Y(),Se=Oe.toString,z=ye.toString;return r(Oe,{then:function(){return Oe.apply(Oe,us(arguments)),this},else:function(){return ye.apply(ye,us(arguments)),this},toString:function(){var J=z();return J&&(J="else{"+J+"}"),cs(["if(",Ae,"){",Se(),"}",J])}})}var ve=ae(),ge={};function be(Ae,Oe){var ye=[];function Se(){var pe="a"+ye.length;return ye.push(pe),pe}Oe=Oe||0;for(var z=0;z<Oe;++z)Se();var J=Y(),we=J.toString,Xe=ge[Ae]=r(J,{arg:Se,toString:function(){return cs(["function(",ye.join(),"){",we(),"}"])}});return Xe}function Te(){var Ae=['"use strict";',ve,"return {"];Object.keys(ge).forEach(function(Se){Ae.push('"',Se,'":',ge[Se].toString(),",")}),Ae.push("}");var Oe=cs(Ae).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ye=Function.apply(null,C.concat(Oe));return ye.apply(null,M)}return{global:ve,link:Q,block:ae,proc:be,scope:Y,cond:ne,compile:Te}}var fs="xyzw".split(""),Y2=5121,ds=1,cp=2,fp=0,dp=1,hp=2,pp=3,Ed=4,K2=5,Q2=6,Z2="dither",J2="blend.enable",ey="blend.color",mp="blend.equation",gp="blend.func",ty="depth.enable",ny="depth.func",ry="depth.range",iy="depth.mask",vp="colorMask",oy="cull.enable",ay="cull.face",yp="frontFace",xp="lineWidth",ly="polygonOffset.enable",_p="polygonOffset.offset",sy="sample.alpha",uy="sample.enable",wp="sample.coverage",cy="stencil.enable",fy="stencil.mask",Sp="stencil.func",Ep="stencil.opFront",Hu="stencil.opBack",dy="scissor.enable",Cd="scissor.box",ko="viewport",Wu="profile",ol="framebuffer",Xu="vert",qu="frag",al="elements",ll="primitive",sl="count",bd="offset",Ad="instances",Yu="vao",Cp="Width",bp="Height",hs=ol+Cp,ps=ol+bp,F9=ko+Cp,D9=ko+bp,hy="drawingBuffer",py=hy+Cp,my=hy+bp,$9=[gp,mp,Sp,Ep,Hu,wp,ko,Cd,_p],ms=34962,Ap=34963,j9=35632,B9=35633,gy=3553,z9=34067,G9=2884,V9=3042,U9=3024,H9=2960,W9=2929,X9=3089,q9=32823,Y9=32926,K9=32928,Tp=5126,Td=35664,Rd=35665,Ld=35666,Rp=5124,Pd=35667,Od=35668,kd=35669,Lp=35670,Md=35671,Nd=35672,Id=35673,Ku=35674,Qu=35675,Zu=35676,Ju=35678,ec=35680,Pp=4,tc=1028,ul=1029,vy=2304,Op=2305,Q9=32775,Z9=32776,J9=519,ua=7680,yy=0,xy=1,_y=32774,e_=513,wy=36160,t_=36064,ao={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Sy=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],gs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ca={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ey={frag:j9,vert:B9},kp={cw:vy,ccw:Op};function Fd(m){return Array.isArray(m)||n(m)||qr(m)}function Cy(m){return m.sort(function(C,M){return C===ko?-1:M===ko?1:C<M?-1:1})}function lr(m,C,M,Q){this.thisDep=m,this.contextDep=C,this.propDep=M,this.append=Q}function fa(m){return m&&!(m.thisDep||m.contextDep||m.propDep)}function Xn(m){return new lr(!1,!1,!1,m)}function Yr(m,C){var M=m.type;if(M===fp){var Q=m.data.length;return new lr(!0,Q>=1,Q>=2,C)}else if(M===Ed){var ae=m.data;return new lr(ae.thisDep,ae.contextDep,ae.propDep,C)}else{if(M===K2)return new lr(!1,!1,!1,C);if(M===Q2){for(var Y=!1,ne=!1,ve=!1,ge=0;ge<m.data.length;++ge){var be=m.data[ge];if(be.type===dp)ve=!0;else if(be.type===hp)ne=!0;else if(be.type===pp)Y=!0;else if(be.type===fp){Y=!0;var Te=be.data;Te>=1&&(ne=!0),Te>=2&&(ve=!0)}else be.type===Ed&&(Y=Y||be.data.thisDep,ne=ne||be.data.contextDep,ve=ve||be.data.propDep)}return new lr(Y,ne,ve,C)}else return new lr(M===pp,M===hp,M===dp,C)}}var by=new lr(!1,!1,!1,function(){});function n_(m,C,M,Q,ae,Y,ne,ve,ge,be,Te,Ae,Oe,ye,Se){var z=be.Record,J={add:32774,subtract:32778,"reverse subtract":32779};M.ext_blend_minmax&&(J.min=Q9,J.max=Z9);var we=M.angle_instanced_arrays,Xe=M.webgl_draw_buffers,pe=M.oes_vertex_array_object,He={dirty:!0,profile:Se.profile},je={},pt=[],le={},oe={};function Je(A){return A.replace(".","_")}function Me(A,w,N){var B=Je(A);pt.push(A),je[B]=He[B]=!!N,le[B]=w}function _e(A,w,N){var B=Je(A);pt.push(A),Array.isArray(N)?(He[B]=N.slice(),je[B]=N.slice()):He[B]=je[B]=N,oe[B]=w}Me(Z2,U9),Me(J2,V9),_e(ey,"blendColor",[0,0,0,0]),_e(mp,"blendEquationSeparate",[_y,_y]),_e(gp,"blendFuncSeparate",[xy,yy,xy,yy]),Me(ty,W9,!0),_e(ny,"depthFunc",e_),_e(ry,"depthRange",[0,1]),_e(iy,"depthMask",!0),_e(vp,vp,[!0,!0,!0,!0]),Me(oy,G9),_e(ay,"cullFace",ul),_e(yp,yp,Op),_e(xp,xp,1),Me(ly,q9),_e(_p,"polygonOffset",[0,0]),Me(sy,Y9),Me(uy,K9),_e(wp,"sampleCoverage",[1,!1]),Me(cy,H9),_e(fy,"stencilMask",-1),_e(Sp,"stencilFunc",[J9,0,-1]),_e(Ep,"stencilOpSeparate",[tc,ua,ua,ua]),_e(Hu,"stencilOpSeparate",[ul,ua,ua,ua]),Me(dy,X9),_e(Cd,"scissor",[0,0,m.drawingBufferWidth,m.drawingBufferHeight]),_e(ko,ko,[0,0,m.drawingBufferWidth,m.drawingBufferHeight]);var Ne={gl:m,context:Oe,strings:C,next:je,current:He,draw:Ae,elements:Y,buffer:ae,shader:Te,attributes:be.state,vao:be,uniforms:ge,framebuffer:ve,extensions:M,timer:ye,isBufferArgs:Fd},De={primTypes:ro,compareFuncs:gs,blendFuncs:ao,blendEquations:J,stencilOps:ca,glTypes:ta,orientationType:kp};E.optional(function(){Ne.isArrayLike=wn}),Xe&&(De.backBuffer=[ul],De.drawBuffer=tn(Q.maxDrawbuffers,function(A){return A===0?[0]:tn(A,function(w){return t_+w})}));var Lt=0;function bt(){var A=I9(),w=A.link,N=A.global;A.id=Lt++,A.batchId="0";var B=w(Ne),G=A.shared={props:"a0"};Object.keys(Ne).forEach(function(k){G[k]=N.def(B,".",k)}),E.optional(function(){A.CHECK=w(E),A.commandStr=E.guessCommand(),A.command=w(A.commandStr),A.assert=function(k,L,W){k("if(!(",L,"))",this.CHECK,".commandRaise(",w(W),",",this.command,");")},De.invalidBlendCombinations=Sy});var D=A.next={},F=A.current={};Object.keys(oe).forEach(function(k){Array.isArray(He[k])&&(D[k]=N.def(G.next,".",k),F[k]=N.def(G.current,".",k))});var j=A.constants={};Object.keys(De).forEach(function(k){j[k]=N.def(JSON.stringify(De[k]))}),A.invoke=function(k,L){switch(L.type){case fp:var W=["this",G.context,G.props,A.batchId];return k.def(w(L.data),".call(",W.slice(0,Math.max(L.data.length+1,4)),")");case dp:return k.def(G.props,L.data);case hp:return k.def(G.context,L.data);case pp:return k.def("this",L.data);case Ed:return L.data.append(A,k),L.data.ref;case K2:return L.data.toString();case Q2:return L.data.map(function(V){return A.invoke(k,V)})}},A.attribCache={};var R={};return A.scopeAttrib=function(k){var L=C.id(k);if(L in R)return R[L];var W=be.scope[L];W||(W=be.scope[L]=new z);var V=R[L]=w(W);return V},A}function Be(A){var w=A.static,N=A.dynamic,B;if(Wu in w){var G=!!w[Wu];B=Xn(function(F,j){return G}),B.enable=G}else if(Wu in N){var D=N[Wu];B=Yr(D,function(F,j){return F.invoke(j,D)})}return B}function We(A,w){var N=A.static,B=A.dynamic;if(ol in N){var G=N[ol];return G?(G=ve.getFramebuffer(G),E.command(G,"invalid framebuffer object"),Xn(function(F,j){var R=F.link(G),k=F.shared;j.set(k.framebuffer,".next",R);var L=k.context;return j.set(L,"."+hs,R+".width"),j.set(L,"."+ps,R+".height"),R})):Xn(function(F,j){var R=F.shared;j.set(R.framebuffer,".next","null");var k=R.context;return j.set(k,"."+hs,k+"."+py),j.set(k,"."+ps,k+"."+my),"null"})}else if(ol in B){var D=B[ol];return Yr(D,function(F,j){var R=F.invoke(j,D),k=F.shared,L=k.framebuffer,W=j.def(L,".getFramebuffer(",R,")");E.optional(function(){F.assert(j,"!"+R+"||"+W,"invalid framebuffer object")}),j.set(L,".next",W);var V=k.context;return j.set(V,"."+hs,W+"?"+W+".width:"+V+"."+py),j.set(V,"."+ps,W+"?"+W+".height:"+V+"."+my),W})}else return null}function xt(A,w,N){var B=A.static,G=A.dynamic;function D(R){if(R in B){var k=B[R];E.commandType(k,"object","invalid "+R,N.commandStr);var L=!0,W=k.x|0,V=k.y|0,ie,se;return"width"in k?(ie=k.width|0,E.command(ie>=0,"invalid "+R,N.commandStr)):L=!1,"height"in k?(se=k.height|0,E.command(se>=0,"invalid "+R,N.commandStr)):L=!1,new lr(!L&&w&&w.thisDep,!L&&w&&w.contextDep,!L&&w&&w.propDep,function(ht,Ke){var de=ht.shared.context,re=ie;"width"in k||(re=Ke.def(de,".",hs,"-",W));var ot=se;return"height"in k||(ot=Ke.def(de,".",ps,"-",V)),[W,V,re,ot]})}else if(R in G){var Pe=G[R],St=Yr(Pe,function(ht,Ke){var de=ht.invoke(Ke,Pe);E.optional(function(){ht.assert(Ke,de+"&&typeof "+de+'==="object"',"invalid "+R)});var re=ht.shared.context,ot=Ke.def(de,".x|0"),nt=Ke.def(de,".y|0"),_t=Ke.def('"width" in ',de,"?",de,".width|0:","(",re,".",hs,"-",ot,")"),hn=Ke.def('"height" in ',de,"?",de,".height|0:","(",re,".",ps,"-",nt,")");return E.optional(function(){ht.assert(Ke,_t+">=0&&"+hn+">=0","invalid "+R)}),[ot,nt,_t,hn]});return w&&(St.thisDep=St.thisDep||w.thisDep,St.contextDep=St.contextDep||w.contextDep,St.propDep=St.propDep||w.propDep),St}else return w?new lr(w.thisDep,w.contextDep,w.propDep,function(ht,Ke){var de=ht.shared.context;return[0,0,Ke.def(de,".",hs),Ke.def(de,".",ps)]}):null}var F=D(ko);if(F){var j=F;F=new lr(F.thisDep,F.contextDep,F.propDep,function(R,k){var L=j.append(R,k),W=R.shared.context;return k.set(W,"."+F9,L[2]),k.set(W,"."+D9,L[3]),L})}return{viewport:F,scissor_box:D(Cd)}}function Pt(A,w){var N=A.static,B=typeof N[qu]=="string"&&typeof N[Xu]=="string";if(B){if(Object.keys(w.dynamic).length>0)return null;var G=w.static,D=Object.keys(G);if(D.length>0&&typeof G[D[0]]=="number"){for(var F=[],j=0;j<D.length;++j)E(typeof G[D[j]]=="number","must specify all vertex attribute locations when using vaos"),F.push([G[D[j]]|0,D[j]]);return F}}return null}function Yt(A,w,N){var B=A.static,G=A.dynamic;function D(L){if(L in B){var W=C.id(B[L]);E.optional(function(){Te.shader(Ey[L],W,E.guessCommand())});var V=Xn(function(){return W});return V.id=W,V}else if(L in G){var ie=G[L];return Yr(ie,function(se,Pe){var St=se.invoke(Pe,ie),ht=Pe.def(se.shared.strings,".id(",St,")");return E.optional(function(){Pe(se.shared.shader,".shader(",Ey[L],",",ht,",",se.command,");")}),ht})}return null}var F=D(qu),j=D(Xu),R=null,k;return fa(F)&&fa(j)?(R=Te.program(j.id,F.id,null,N),k=Xn(function(L,W){return L.link(R)})):k=new lr(F&&F.thisDep||j&&j.thisDep,F&&F.contextDep||j&&j.contextDep,F&&F.propDep||j&&j.propDep,function(L,W){var V=L.shared.shader,ie;F?ie=F.append(L,W):ie=W.def(V,".",qu);var se;j?se=j.append(L,W):se=W.def(V,".",Xu);var Pe=V+".program("+se+","+ie;return E.optional(function(){Pe+=","+L.command}),W.def(Pe+")")}),{frag:F,vert:j,progVar:k,program:R}}function bn(A,w){var N=A.static,B=A.dynamic,G={},D=!1;function F(){if(Yu in N){var Ke=N[Yu];return Ke!==null&&be.getVAO(Ke)===null&&(Ke=be.createVAO(Ke)),D=!0,G.vao=Ke,Xn(function(re){var ot=be.getVAO(Ke);return ot?re.link(ot):"null"})}else if(Yu in B){D=!0;var de=B[Yu];return Yr(de,function(re,ot){var nt=re.invoke(ot,de);return ot.def(re.shared.vao+".getVAO("+nt+")")})}return null}var j=F(),R=!1;function k(){if(al in N){var Ke=N[al];if(G.elements=Ke,Fd(Ke)){var de=G.elements=Y.create(Ke,!0);Ke=Y.getElements(de),R=!0}else Ke&&(Ke=Y.getElements(Ke),R=!0,E.command(Ke,"invalid elements",w.commandStr));var re=Xn(function(nt,_t){if(Ke){var hn=nt.link(Ke);return nt.ELEMENTS=hn,hn}return nt.ELEMENTS=null,null});return re.value=Ke,re}else if(al in B){R=!0;var ot=B[al];return Yr(ot,function(nt,_t){var hn=nt.shared,wr=hn.isBufferArgs,fl=hn.elements,Mo=nt.invoke(_t,ot),so=_t.def("null"),da=_t.def(wr,"(",Mo,")"),dl=nt.cond(da).then(so,"=",fl,".createStream(",Mo,");").else(so,"=",fl,".getElements(",Mo,");");return E.optional(function(){nt.assert(dl.else,"!"+Mo+"||"+so,"invalid elements")}),_t.entry(dl),_t.exit(nt.cond(da).then(fl,".destroyStream(",so,");")),nt.ELEMENTS=so,so})}else if(D)return new lr(j.thisDep,j.contextDep,j.propDep,function(nt,_t){return _t.def(nt.shared.vao+".currentVAO?"+nt.shared.elements+".getElements("+nt.shared.vao+".currentVAO.elements):null")});return null}var L=k();function W(){if(ll in N){var Ke=N[ll];return G.primitive=Ke,E.commandParameter(Ke,ro,"invalid primitve",w.commandStr),Xn(function(re,ot){return ro[Ke]})}else if(ll in B){var de=B[ll];return Yr(de,function(re,ot){var nt=re.constants.primTypes,_t=re.invoke(ot,de);return E.optional(function(){re.assert(ot,_t+" in "+nt,"invalid primitive, must be one of "+Object.keys(ro))}),ot.def(nt,"[",_t,"]")})}else{if(R)return fa(L)?L.value?Xn(function(re,ot){return ot.def(re.ELEMENTS,".primType")}):Xn(function(){return Pp}):new lr(L.thisDep,L.contextDep,L.propDep,function(re,ot){var nt=re.ELEMENTS;return ot.def(nt,"?",nt,".primType:",Pp)});if(D)return new lr(j.thisDep,j.contextDep,j.propDep,function(re,ot){return ot.def(re.shared.vao+".currentVAO?"+re.shared.vao+".currentVAO.primitive:"+Pp)})}return null}function V(Ke,de){if(Ke in N){var re=N[Ke]|0;return de?G.offset=re:G.instances=re,E.command(!de||re>=0,"invalid "+Ke,w.commandStr),Xn(function(nt,_t){return de&&(nt.OFFSET=re),re})}else if(Ke in B){var ot=B[Ke];return Yr(ot,function(nt,_t){var hn=nt.invoke(_t,ot);return de&&(nt.OFFSET=hn,E.optional(function(){nt.assert(_t,hn+">=0","invalid "+Ke)})),hn})}else if(de){if(R)return Xn(function(nt,_t){return nt.OFFSET=0,0});if(D)return new lr(j.thisDep,j.contextDep,j.propDep,function(nt,_t){return _t.def(nt.shared.vao+".currentVAO?"+nt.shared.vao+".currentVAO.offset:0")})}else if(D)return new lr(j.thisDep,j.contextDep,j.propDep,function(nt,_t){return _t.def(nt.shared.vao+".currentVAO?"+nt.shared.vao+".currentVAO.instances:-1")});return null}var ie=V(bd,!0);function se(){if(sl in N){var Ke=N[sl]|0;return G.count=Ke,E.command(typeof Ke=="number"&&Ke>=0,"invalid vertex count",w.commandStr),Xn(function(){return Ke})}else if(sl in B){var de=B[sl];return Yr(de,function(_t,hn){var wr=_t.invoke(hn,de);return E.optional(function(){_t.assert(hn,"typeof "+wr+'==="number"&&'+wr+">=0&&"+wr+"===("+wr+"|0)","invalid vertex count")}),wr})}else if(R)if(fa(L)){if(L)return ie?new lr(ie.thisDep,ie.contextDep,ie.propDep,function(_t,hn){var wr=hn.def(_t.ELEMENTS,".vertCount-",_t.OFFSET);return E.optional(function(){_t.assert(hn,wr+">=0","invalid vertex offset/element buffer too small")}),wr}):Xn(function(_t,hn){return hn.def(_t.ELEMENTS,".vertCount")});var re=Xn(function(){return-1});return E.optional(function(){re.MISSING=!0}),re}else{var ot=new lr(L.thisDep||ie.thisDep,L.contextDep||ie.contextDep,L.propDep||ie.propDep,function(_t,hn){var wr=_t.ELEMENTS;return _t.OFFSET?hn.def(wr,"?",wr,".vertCount-",_t.OFFSET,":-1"):hn.def(wr,"?",wr,".vertCount:-1")});return E.optional(function(){ot.DYNAMIC=!0}),ot}else if(D){var nt=new lr(j.thisDep,j.contextDep,j.propDep,function(_t,hn){return hn.def(_t.shared.vao,".currentVAO?",_t.shared.vao,".currentVAO.count:-1")});return nt}return null}var Pe=W(),St=se(),ht=V(Ad,!1);return{elements:L,primitive:Pe,count:St,instances:ht,offset:ie,vao:j,vaoActive:D,elementsActive:R,static:G}}function Pn(A,w){var N=A.static,B=A.dynamic,G={};return pt.forEach(function(D){var F=Je(D);function j(R,k){if(D in N){var L=R(N[D]);G[F]=Xn(function(){return L})}else if(D in B){var W=B[D];G[F]=Yr(W,function(V,ie){return k(V,ie,V.invoke(ie,W))})}}switch(D){case oy:case J2:case Z2:case cy:case ty:case dy:case ly:case sy:case uy:case iy:return j(function(R){return E.commandType(R,"boolean",D,w.commandStr),R},function(R,k,L){return E.optional(function(){R.assert(k,"typeof "+L+'==="boolean"',"invalid flag "+D,R.commandStr)}),L});case ny:return j(function(R){return E.commandParameter(R,gs,"invalid "+D,w.commandStr),gs[R]},function(R,k,L){var W=R.constants.compareFuncs;return E.optional(function(){R.assert(k,L+" in "+W,"invalid "+D+", must be one of "+Object.keys(gs))}),k.def(W,"[",L,"]")});case ry:return j(function(R){return E.command(wn(R)&&R.length===2&&typeof R[0]=="number"&&typeof R[1]=="number"&&R[0]<=R[1],"depth range is 2d array",w.commandStr),R},function(R,k,L){E.optional(function(){R.assert(k,R.shared.isArrayLike+"("+L+")&&"+L+".length===2&&typeof "+L+'[0]==="number"&&typeof '+L+'[1]==="number"&&'+L+"[0]<="+L+"[1]","depth range must be a 2d array")});var W=k.def("+",L,"[0]"),V=k.def("+",L,"[1]");return[W,V]});case gp:return j(function(R){E.commandType(R,"object","blend.func",w.commandStr);var k="srcRGB"in R?R.srcRGB:R.src,L="srcAlpha"in R?R.srcAlpha:R.src,W="dstRGB"in R?R.dstRGB:R.dst,V="dstAlpha"in R?R.dstAlpha:R.dst;return E.commandParameter(k,ao,F+".srcRGB",w.commandStr),E.commandParameter(L,ao,F+".srcAlpha",w.commandStr),E.commandParameter(W,ao,F+".dstRGB",w.commandStr),E.commandParameter(V,ao,F+".dstAlpha",w.commandStr),E.command(Sy.indexOf(k+", "+W)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+k+", "+W+")",w.commandStr),[ao[k],ao[W],ao[L],ao[V]]},function(R,k,L){var W=R.constants.blendFuncs;E.optional(function(){R.assert(k,L+"&&typeof "+L+'==="object"',"invalid blend func, must be an object")});function V(de,re){var ot=k.def('"',de,re,'" in ',L,"?",L,".",de,re,":",L,".",de);return E.optional(function(){R.assert(k,ot+" in "+W,"invalid "+D+"."+de+re+", must be one of "+Object.keys(ao))}),ot}var ie=V("src","RGB"),se=V("dst","RGB");E.optional(function(){var de=R.constants.invalidBlendCombinations;R.assert(k,de+".indexOf("+ie+'+", "+'+se+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Pe=k.def(W,"[",ie,"]"),St=k.def(W,"[",V("src","Alpha"),"]"),ht=k.def(W,"[",se,"]"),Ke=k.def(W,"[",V("dst","Alpha"),"]");return[Pe,ht,St,Ke]});case mp:return j(function(R){if(typeof R=="string")return E.commandParameter(R,J,"invalid "+D,w.commandStr),[J[R],J[R]];if(typeof R=="object")return E.commandParameter(R.rgb,J,D+".rgb",w.commandStr),E.commandParameter(R.alpha,J,D+".alpha",w.commandStr),[J[R.rgb],J[R.alpha]];E.commandRaise("invalid blend.equation",w.commandStr)},function(R,k,L){var W=R.constants.blendEquations,V=k.def(),ie=k.def(),se=R.cond("typeof ",L,'==="string"');return E.optional(function(){function Pe(St,ht,Ke){R.assert(St,Ke+" in "+W,"invalid "+ht+", must be one of "+Object.keys(J))}Pe(se.then,D,L),R.assert(se.else,L+"&&typeof "+L+'==="object"',"invalid "+D),Pe(se.else,D+".rgb",L+".rgb"),Pe(se.else,D+".alpha",L+".alpha")}),se.then(V,"=",ie,"=",W,"[",L,"];"),se.else(V,"=",W,"[",L,".rgb];",ie,"=",W,"[",L,".alpha];"),k(se),[V,ie]});case ey:return j(function(R){return E.command(wn(R)&&R.length===4,"blend.color must be a 4d array",w.commandStr),tn(4,function(k){return+R[k]})},function(R,k,L){return E.optional(function(){R.assert(k,R.shared.isArrayLike+"("+L+")&&"+L+".length===4","blend.color must be a 4d array")}),tn(4,function(W){return k.def("+",L,"[",W,"]")})});case fy:return j(function(R){return E.commandType(R,"number",F,w.commandStr),R|0},function(R,k,L){return E.optional(function(){R.assert(k,"typeof "+L+'==="number"',"invalid stencil.mask")}),k.def(L,"|0")});case Sp:return j(function(R){E.commandType(R,"object",F,w.commandStr);var k=R.cmp||"keep",L=R.ref||0,W="mask"in R?R.mask:-1;return E.commandParameter(k,gs,D+".cmp",w.commandStr),E.commandType(L,"number",D+".ref",w.commandStr),E.commandType(W,"number",D+".mask",w.commandStr),[gs[k],L,W]},function(R,k,L){var W=R.constants.compareFuncs;E.optional(function(){function Pe(){R.assert(k,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Pe(L+"&&typeof ",L,'==="object"'),Pe('!("cmp" in ',L,")||(",L,".cmp in ",W,")")});var V=k.def('"cmp" in ',L,"?",W,"[",L,".cmp]",":",ua),ie=k.def(L,".ref|0"),se=k.def('"mask" in ',L,"?",L,".mask|0:-1");return[V,ie,se]});case Ep:case Hu:return j(function(R){E.commandType(R,"object",F,w.commandStr);var k=R.fail||"keep",L=R.zfail||"keep",W=R.zpass||"keep";return E.commandParameter(k,ca,D+".fail",w.commandStr),E.commandParameter(L,ca,D+".zfail",w.commandStr),E.commandParameter(W,ca,D+".zpass",w.commandStr),[D===Hu?ul:tc,ca[k],ca[L],ca[W]]},function(R,k,L){var W=R.constants.stencilOps;E.optional(function(){R.assert(k,L+"&&typeof "+L+'==="object"',"invalid "+D)});function V(ie){return E.optional(function(){R.assert(k,'!("'+ie+'" in '+L+")||("+L+"."+ie+" in "+W+")","invalid "+D+"."+ie+", must be one of "+Object.keys(ca))}),k.def('"',ie,'" in ',L,"?",W,"[",L,".",ie,"]:",ua)}return[D===Hu?ul:tc,V("fail"),V("zfail"),V("zpass")]});case _p:return j(function(R){E.commandType(R,"object",F,w.commandStr);var k=R.factor|0,L=R.units|0;return E.commandType(k,"number",F+".factor",w.commandStr),E.commandType(L,"number",F+".units",w.commandStr),[k,L]},function(R,k,L){E.optional(function(){R.assert(k,L+"&&typeof "+L+'==="object"',"invalid "+D)});var W=k.def(L,".factor|0"),V=k.def(L,".units|0");return[W,V]});case ay:return j(function(R){var k=0;return R==="front"?k=tc:R==="back"&&(k=ul),E.command(!!k,F,w.commandStr),k},function(R,k,L){return E.optional(function(){R.assert(k,L+'==="front"||'+L+'==="back"',"invalid cull.face")}),k.def(L,'==="front"?',tc,":",ul)});case xp:return j(function(R){return E.command(typeof R=="number"&&R>=Q.lineWidthDims[0]&&R<=Q.lineWidthDims[1],"invalid line width, must be a positive number between "+Q.lineWidthDims[0]+" and "+Q.lineWidthDims[1],w.commandStr),R},function(R,k,L){return E.optional(function(){R.assert(k,"typeof "+L+'==="number"&&'+L+">="+Q.lineWidthDims[0]+"&&"+L+"<="+Q.lineWidthDims[1],"invalid line width")}),L});case yp:return j(function(R){return E.commandParameter(R,kp,F,w.commandStr),kp[R]},function(R,k,L){return E.optional(function(){R.assert(k,L+'==="cw"||'+L+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),k.def(L+'==="cw"?'+vy+":"+Op)});case vp:return j(function(R){return E.command(wn(R)&&R.length===4,"color.mask must be length 4 array",w.commandStr),R.map(function(k){return!!k})},function(R,k,L){return E.optional(function(){R.assert(k,R.shared.isArrayLike+"("+L+")&&"+L+".length===4","invalid color.mask")}),tn(4,function(W){return"!!"+L+"["+W+"]"})});case wp:return j(function(R){E.command(typeof R=="object"&&R,F,w.commandStr);var k="value"in R?R.value:1,L=!!R.invert;return E.command(typeof k=="number"&&k>=0&&k<=1,"sample.coverage.value must be a number between 0 and 1",w.commandStr),[k,L]},function(R,k,L){E.optional(function(){R.assert(k,L+"&&typeof "+L+'==="object"',"invalid sample.coverage")});var W=k.def('"value" in ',L,"?+",L,".value:1"),V=k.def("!!",L,".invert");return[W,V]})}}),G}function Qt(A,w){var N=A.static,B=A.dynamic,G={};return Object.keys(N).forEach(function(D){var F=N[D],j;if(typeof F=="number"||typeof F=="boolean")j=Xn(function(){return F});else if(typeof F=="function"){var R=F._reglType;R==="texture2d"||R==="textureCube"?j=Xn(function(k){return k.link(F)}):R==="framebuffer"||R==="framebufferCube"?(E.command(F.color.length>0,'missing color attachment for framebuffer sent to uniform "'+D+'"',w.commandStr),j=Xn(function(k){return k.link(F.color[0])})):E.commandRaise('invalid data for uniform "'+D+'"',w.commandStr)}else wn(F)?j=Xn(function(k){var L=k.global.def("[",tn(F.length,function(W){return E.command(typeof F[W]=="number"||typeof F[W]=="boolean","invalid uniform "+D,k.commandStr),F[W]}),"]");return L}):E.commandRaise('invalid or missing data for uniform "'+D+'"',w.commandStr);j.value=F,G[D]=j}),Object.keys(B).forEach(function(D){var F=B[D];G[D]=Yr(F,function(j,R){return j.invoke(R,F)})}),G}function tr(A,w){var N=A.static,B=A.dynamic,G={};return Object.keys(N).forEach(function(D){var F=N[D],j=C.id(D),R=new z;if(Fd(F))R.state=ds,R.buffer=ae.getBuffer(ae.create(F,ms,!1,!0)),R.type=0;else{var k=ae.getBuffer(F);if(k)R.state=ds,R.buffer=k,R.type=0;else if(E.command(typeof F=="object"&&F,"invalid data for attribute "+D,w.commandStr),"constant"in F){var L=F.constant;R.buffer="null",R.state=cp,typeof L=="number"?R.x=L:(E.command(wn(L)&&L.length>0&&L.length<=4,"invalid constant for attribute "+D,w.commandStr),fs.forEach(function(ht,Ke){Ke<L.length&&(R[ht]=L[Ke])}))}else{Fd(F.buffer)?k=ae.getBuffer(ae.create(F.buffer,ms,!1,!0)):k=ae.getBuffer(F.buffer),E.command(!!k,'missing buffer for attribute "'+D+'"',w.commandStr);var W=F.offset|0;E.command(W>=0,'invalid offset for attribute "'+D+'"',w.commandStr);var V=F.stride|0;E.command(V>=0&&V<256,'invalid stride for attribute "'+D+'", must be integer betweeen [0, 255]',w.commandStr);var ie=F.size|0;E.command(!("size"in F)||ie>0&&ie<=4,'invalid size for attribute "'+D+'", must be 1,2,3,4',w.commandStr);var se=!!F.normalized,Pe=0;"type"in F&&(E.commandParameter(F.type,ta,"invalid type for attribute "+D,w.commandStr),Pe=ta[F.type]);var St=F.divisor|0;E.optional(function(){"divisor"in F&&(E.command(St===0||we,'cannot specify divisor for attribute "'+D+'", instancing not supported',w.commandStr),E.command(St>=0,'invalid divisor for attribute "'+D+'"',w.commandStr));var ht=w.commandStr,Ke=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(F).forEach(function(de){E.command(Ke.indexOf(de)>=0,'unknown parameter "'+de+'" for attribute pointer "'+D+'" (valid parameters are '+Ke+")",ht)})}),R.buffer=k,R.state=ds,R.size=ie,R.normalized=se,R.type=Pe||k.dtype,R.offset=W,R.stride=V,R.divisor=St}}G[D]=Xn(function(ht,Ke){var de=ht.attribCache;if(j in de)return de[j];var re={isStream:!1};return Object.keys(R).forEach(function(ot){re[ot]=R[ot]}),R.buffer&&(re.buffer=ht.link(R.buffer),re.type=re.type||re.buffer+".dtype"),de[j]=re,re})}),Object.keys(B).forEach(function(D){var F=B[D];function j(R,k){var L=R.invoke(k,F),W=R.shared,V=R.constants,ie=W.isBufferArgs,se=W.buffer;E.optional(function(){R.assert(k,L+"&&(typeof "+L+'==="object"||typeof '+L+'==="function")&&('+ie+"("+L+")||"+se+".getBuffer("+L+")||"+se+".getBuffer("+L+".buffer)||"+ie+"("+L+'.buffer)||("constant" in '+L+"&&(typeof "+L+'.constant==="number"||'+W.isArrayLike+"("+L+".constant))))",'invalid dynamic attribute "'+D+'"')});var Pe={isStream:k.def(!1)},St=new z;St.state=ds,Object.keys(St).forEach(function(re){Pe[re]=k.def(""+St[re])});var ht=Pe.buffer,Ke=Pe.type;k("if(",ie,"(",L,")){",Pe.isStream,"=true;",ht,"=",se,".createStream(",ms,",",L,");",Ke,"=",ht,".dtype;","}else{",ht,"=",se,".getBuffer(",L,");","if(",ht,"){",Ke,"=",ht,".dtype;",'}else if("constant" in ',L,"){",Pe.state,"=",cp,";","if(typeof "+L+'.constant === "number"){',Pe[fs[0]],"=",L,".constant;",fs.slice(1).map(function(re){return Pe[re]}).join("="),"=0;","}else{",fs.map(function(re,ot){return Pe[re]+"="+L+".constant.length>"+ot+"?"+L+".constant["+ot+"]:0;"}).join(""),"}}else{","if(",ie,"(",L,".buffer)){",ht,"=",se,".createStream(",ms,",",L,".buffer);","}else{",ht,"=",se,".getBuffer(",L,".buffer);","}",Ke,'="type" in ',L,"?",V.glTypes,"[",L,".type]:",ht,".dtype;",Pe.normalized,"=!!",L,".normalized;");function de(re){k(Pe[re],"=",L,".",re,"|0;")}return de("size"),de("offset"),de("stride"),de("divisor"),k("}}"),k.exit("if(",Pe.isStream,"){",se,".destroyStream(",ht,");","}"),Pe}G[D]=Yr(F,j)}),G}function Sn(A){var w=A.static,N=A.dynamic,B={};return Object.keys(w).forEach(function(G){var D=w[G];B[G]=Xn(function(F,j){return typeof D=="number"||typeof D=="boolean"?""+D:F.link(D)})}),Object.keys(N).forEach(function(G){var D=N[G];B[G]=Yr(D,function(F,j){return F.invoke(j,D)})}),B}function qn(A,w,N,B,G){var D=A.static,F=A.dynamic;E.optional(function(){var de=[ol,Xu,qu,al,ll,bd,sl,Ad,Wu,Yu].concat(pt);function re(ot){Object.keys(ot).forEach(function(nt){E.command(de.indexOf(nt)>=0,'unknown parameter "'+nt+'"',G.commandStr)})}re(D),re(F)});var j=Pt(A,w),R=We(A),k=xt(A,R,G),L=bn(A,G),W=Pn(A,G),V=Yt(A,G,j);function ie(de){var re=k[de];re&&(W[de]=re)}ie(ko),ie(Je(Cd));var se=Object.keys(W).length>0,Pe={framebuffer:R,draw:L,shader:V,state:W,dirty:se,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Pe.profile=Be(A),Pe.uniforms=Qt(N,G),Pe.drawVAO=Pe.scopeVAO=L.vao,!Pe.drawVAO&&V.program&&!j&&M.angle_instanced_arrays&&L.static.elements){var St=!0,ht=V.program.attributes.map(function(de){var re=w.static[de];return St=St&&!!re,re});if(St&&ht.length>0){var Ke=be.getVAO(be.createVAO({attributes:ht,elements:L.static.elements}));Pe.drawVAO=new lr(null,null,null,function(de,re){return de.link(Ke)}),Pe.useVAO=!0}}return j?Pe.useVAO=!0:Pe.attributes=tr(w,G),Pe.context=Sn(B),Pe}function nr(A,w,N){var B=A.shared,G=B.context,D=A.scope();Object.keys(N).forEach(function(F){w.save(G,"."+F);var j=N[F],R=j.append(A,w);Array.isArray(R)?D(G,".",F,"=[",R.join(),"];"):D(G,".",F,"=",R,";")}),w(D)}function rr(A,w,N,B){var G=A.shared,D=G.gl,F=G.framebuffer,j;Xe&&(j=w.def(G.extensions,".webgl_draw_buffers"));var R=A.constants,k=R.drawBuffer,L=R.backBuffer,W;N?W=N.append(A,w):W=w.def(F,".next"),B||w("if(",W,"!==",F,".cur){"),w("if(",W,"){",D,".bindFramebuffer(",wy,",",W,".framebuffer);"),Xe&&w(j,".drawBuffersWEBGL(",k,"[",W,".colorAttachments.length]);"),w("}else{",D,".bindFramebuffer(",wy,",null);"),Xe&&w(j,".drawBuffersWEBGL(",L,");"),w("}",F,".cur=",W,";"),B||w("}")}function dr(A,w,N){var B=A.shared,G=B.gl,D=A.current,F=A.next,j=B.current,R=B.next,k=A.cond(j,".dirty");pt.forEach(function(L){var W=Je(L);if(!(W in N.state)){var V,ie;if(W in F){V=F[W],ie=D[W];var se=tn(He[W].length,function(St){return k.def(V,"[",St,"]")});k(A.cond(se.map(function(St,ht){return St+"!=="+ie+"["+ht+"]"}).join("||")).then(G,".",oe[W],"(",se,");",se.map(function(St,ht){return ie+"["+ht+"]="+St}).join(";"),";"))}else{V=k.def(R,".",W);var Pe=A.cond(V,"!==",j,".",W);k(Pe),W in le?Pe(A.cond(V).then(G,".enable(",le[W],");").else(G,".disable(",le[W],");"),j,".",W,"=",V,";"):Pe(G,".",oe[W],"(",V,");",j,".",W,"=",V,";")}}}),Object.keys(N.state).length===0&&k(j,".dirty=false;"),w(k)}function xr(A,w,N,B){var G=A.shared,D=A.current,F=G.current,j=G.gl;Cy(Object.keys(N)).forEach(function(R){var k=N[R];if(!(B&&!B(k))){var L=k.append(A,w);if(le[R]){var W=le[R];fa(k)?L?w(j,".enable(",W,");"):w(j,".disable(",W,");"):w(A.cond(L).then(j,".enable(",W,");").else(j,".disable(",W,");")),w(F,".",R,"=",L,";")}else if(wn(L)){var V=D[R];w(j,".",oe[R],"(",L,");",L.map(function(ie,se){return V+"["+se+"]="+ie}).join(";"),";")}else w(j,".",oe[R],"(",L,");",F,".",R,"=",L,";")}})}function $n(A,w){we&&(A.instancing=w.def(A.shared.extensions,".angle_instanced_arrays"))}function zt(A,w,N,B,G){var D=A.shared,F=A.stats,j=D.current,R=D.timer,k=N.profile;function L(){return typeof performance>"u"?"Date.now()":"performance.now()"}var W,V;function ie(de){W=w.def(),de(W,"=",L(),";"),typeof G=="string"?de(F,".count+=",G,";"):de(F,".count++;"),ye&&(B?(V=w.def(),de(V,"=",R,".getNumPendingQueries();")):de(R,".beginQuery(",F,");"))}function se(de){de(F,".cpuTime+=",L(),"-",W,";"),ye&&(B?de(R,".pushScopeStats(",V,",",R,".getNumPendingQueries(),",F,");"):de(R,".endQuery();"))}function Pe(de){var re=w.def(j,".profile");w(j,".profile=",de,";"),w.exit(j,".profile=",re,";")}var St;if(k){if(fa(k)){k.enable?(ie(w),se(w.exit),Pe("true")):Pe("false");return}St=k.append(A,w),Pe(St)}else St=w.def(j,".profile");var ht=A.block();ie(ht),w("if(",St,"){",ht,"}");var Ke=A.block();se(Ke),w.exit("if(",St,"){",Ke,"}")}function _r(A,w,N,B,G){var D=A.shared;function F(R){switch(R){case Td:case Pd:case Md:return 2;case Rd:case Od:case Nd:return 3;case Ld:case kd:case Id:return 4;default:return 1}}function j(R,k,L){var W=D.gl,V=w.def(R,".location"),ie=w.def(D.attributes,"[",V,"]"),se=L.state,Pe=L.buffer,St=[L.x,L.y,L.z,L.w],ht=["buffer","normalized","offset","stride"];function Ke(){w("if(!",ie,".buffer){",W,".enableVertexAttribArray(",V,");}");var re=L.type,ot;if(L.size?ot=w.def(L.size,"||",k):ot=k,w("if(",ie,".type!==",re,"||",ie,".size!==",ot,"||",ht.map(function(_t){return ie+"."+_t+"!=="+L[_t]}).join("||"),"){",W,".bindBuffer(",ms,",",Pe,".buffer);",W,".vertexAttribPointer(",[V,ot,re,L.normalized,L.stride,L.offset],");",ie,".type=",re,";",ie,".size=",ot,";",ht.map(function(_t){return ie+"."+_t+"="+L[_t]+";"}).join(""),"}"),we){var nt=L.divisor;w("if(",ie,".divisor!==",nt,"){",A.instancing,".vertexAttribDivisorANGLE(",[V,nt],");",ie,".divisor=",nt,";}")}}function de(){w("if(",ie,".buffer){",W,".disableVertexAttribArray(",V,");",ie,".buffer=null;","}if(",fs.map(function(re,ot){return ie+"."+re+"!=="+St[ot]}).join("||"),"){",W,".vertexAttrib4f(",V,",",St,");",fs.map(function(re,ot){return ie+"."+re+"="+St[ot]+";"}).join(""),"}")}se===ds?Ke():se===cp?de():(w("if(",se,"===",ds,"){"),Ke(),w("}else{"),de(),w("}"))}B.forEach(function(R){var k=R.name,L=N.attributes[k],W;if(L){if(!G(L))return;W=L.append(A,w)}else{if(!G(by))return;var V=A.scopeAttrib(k);E.optional(function(){A.assert(w,V+".state","missing attribute "+k)}),W={},Object.keys(new z).forEach(function(ie){W[ie]=w.def(V,".",ie)})}j(A.link(R),F(R.info.type),W)})}function cn(A,w,N,B,G,D){for(var F=A.shared,j=F.gl,R={},k,L=0;L<B.length;++L){var W=B[L],V=W.name,ie=W.info.type,se=W.info.size,Pe=N.uniforms[V];if(se>1){if(!Pe)continue;var St=V.replace("[0]","");if(R[St])continue;R[St]=1}var ht=A.link(W),Ke=ht+".location",de;if(Pe){if(!G(Pe))continue;if(fa(Pe)){var re=Pe.value;if(E.command(re!==null&&typeof re<"u",'missing uniform "'+V+'"',A.commandStr),ie===Ju||ie===ec){E.command(typeof re=="function"&&(ie===Ju&&(re._reglType==="texture2d"||re._reglType==="framebuffer")||ie===ec&&(re._reglType==="textureCube"||re._reglType==="framebufferCube")),"invalid texture for uniform "+V,A.commandStr);var ot=A.link(re._texture||re.color[0]._texture);w(j,".uniform1i(",Ke,",",ot+".bind());"),w.exit(ot,".unbind();")}else if(ie===Ku||ie===Qu||ie===Zu){E.optional(function(){E.command(wn(re),"invalid matrix for uniform "+V,A.commandStr),E.command(ie===Ku&&re.length===4||ie===Qu&&re.length===9||ie===Zu&&re.length===16,"invalid length for matrix uniform "+V,A.commandStr)});var nt=A.global.def("new Float32Array(["+Array.prototype.slice.call(re)+"])"),_t=2;ie===Qu?_t=3:ie===Zu&&(_t=4),w(j,".uniformMatrix",_t,"fv(",Ke,",false,",nt,");")}else{switch(ie){case Tp:se===1?E.commandType(re,"number","uniform "+V,A.commandStr):E.command(wn(re)&&re.length===se,"uniform "+V,A.commandStr),k="1f";break;case Td:E.command(wn(re)&&re.length&&re.length%2===0&&re.length<=se*2,"uniform "+V,A.commandStr),k="2f";break;case Rd:E.command(wn(re)&&re.length&&re.length%3===0&&re.length<=se*3,"uniform "+V,A.commandStr),k="3f";break;case Ld:E.command(wn(re)&&re.length&&re.length%4===0&&re.length<=se*4,"uniform "+V,A.commandStr),k="4f";break;case Lp:se===1?E.commandType(re,"boolean","uniform "+V,A.commandStr):E.command(wn(re)&&re.length===se,"uniform "+V,A.commandStr),k="1i";break;case Rp:se===1?E.commandType(re,"number","uniform "+V,A.commandStr):E.command(wn(re)&&re.length===se,"uniform "+V,A.commandStr),k="1i";break;case Md:E.command(wn(re)&&re.length&&re.length%2===0&&re.length<=se*2,"uniform "+V,A.commandStr),k="2i";break;case Pd:E.command(wn(re)&&re.length&&re.length%2===0&&re.length<=se*2,"uniform "+V,A.commandStr),k="2i";break;case Nd:E.command(wn(re)&&re.length&&re.length%3===0&&re.length<=se*3,"uniform "+V,A.commandStr),k="3i";break;case Od:E.command(wn(re)&&re.length&&re.length%3===0&&re.length<=se*3,"uniform "+V,A.commandStr),k="3i";break;case Id:E.command(wn(re)&&re.length&&re.length%4===0&&re.length<=se*4,"uniform "+V,A.commandStr),k="4i";break;case kd:E.command(wn(re)&&re.length&&re.length%4===0&&re.length<=se*4,"uniform "+V,A.commandStr),k="4i";break}se>1?(k+="v",re=A.global.def("["+Array.prototype.slice.call(re)+"]")):re=wn(re)?Array.prototype.slice.call(re):re,w(j,".uniform",k,"(",Ke,",",re,");")}continue}else de=Pe.append(A,w)}else{if(!G(by))continue;de=w.def(F.uniforms,"[",C.id(V),"]")}ie===Ju?(E(!Array.isArray(de),"must specify a scalar prop for textures"),w("if(",de,"&&",de,'._reglType==="framebuffer"){',de,"=",de,".color[0];","}")):ie===ec&&(E(!Array.isArray(de),"must specify a scalar prop for cube maps"),w("if(",de,"&&",de,'._reglType==="framebufferCube"){',de,"=",de,".color[0];","}")),E.optional(function(){function hi(Kr,Dd){A.assert(w,Kr,'bad data or missing for uniform "'+V+'".  '+Dd)}function hl(Kr,Dd){Dd===1&&E(!Array.isArray(de),"must not specify an array type for uniform"),hi("Array.isArray("+de+") && typeof "+de+'[0]===" '+Kr+'" || typeof '+de+'==="'+Kr+'"',"invalid type, expected "+Kr)}function Ti(Kr,Dd,$d){Array.isArray(de)?E(de.length&&de.length%Kr===0&&de.length<=Kr*$d,"must have length of "+($d===1?"":"n * ")+Kr):hi(F.isArrayLike+"("+de+")&&"+de+".length && "+de+".length % "+Kr+" === 0 && "+de+".length<="+Kr*$d,"invalid vector, should have length of "+($d===1?"":"n * ")+Kr,A.commandStr)}function ky(Kr){E(!Array.isArray(de),"must not specify a value type"),hi("typeof "+de+'==="function"&&'+de+'._reglType==="texture'+(Kr===gy?"2d":"Cube")+'"',"invalid texture type",A.commandStr)}switch(ie){case Rp:hl("number",se);break;case Pd:Ti(2,"number",se);break;case Od:Ti(3,"number",se);break;case kd:Ti(4,"number",se);break;case Tp:hl("number",se);break;case Td:Ti(2,"number",se);break;case Rd:Ti(3,"number",se);break;case Ld:Ti(4,"number",se);break;case Lp:hl("boolean",se);break;case Md:Ti(2,"boolean",se);break;case Nd:Ti(3,"boolean",se);break;case Id:Ti(4,"boolean",se);break;case Ku:Ti(4,"number",se);break;case Qu:Ti(9,"number",se);break;case Zu:Ti(16,"number",se);break;case Ju:ky(gy);break;case ec:ky(z9);break}});var hn=1;switch(ie){case Ju:case ec:var wr=w.def(de,"._texture");w(j,".uniform1i(",Ke,",",wr,".bind());"),w.exit(wr,".unbind();");continue;case Rp:case Lp:k="1i";break;case Pd:case Md:k="2i",hn=2;break;case Od:case Nd:k="3i",hn=3;break;case kd:case Id:k="4i",hn=4;break;case Tp:k="1f";break;case Td:k="2f",hn=2;break;case Rd:k="3f",hn=3;break;case Ld:k="4f",hn=4;break;case Ku:k="Matrix2fv";break;case Qu:k="Matrix3fv";break;case Zu:k="Matrix4fv";break}if(k.indexOf("Matrix")===-1&&se>1&&(k+="v",hn=1),k.charAt(0)==="M"){w(j,".uniform",k,"(",Ke,",");var fl=Math.pow(ie-Ku+2,2),Mo=A.global.def("new Float32Array(",fl,")");Array.isArray(de)?w("false,(",tn(fl,function(hi){return Mo+"["+hi+"]="+de[hi]}),",",Mo,")"):w("false,(Array.isArray(",de,")||",de," instanceof Float32Array)?",de,":(",tn(fl,function(hi){return Mo+"["+hi+"]="+de+"["+hi+"]"}),",",Mo,")"),w(");")}else if(hn>1){for(var so=[],da=[],dl=0;dl<hn;++dl)Array.isArray(de)?da.push(de[dl]):da.push(w.def(de+"["+dl+"]")),D&&so.push(w.def());D&&w("if(!",A.batchId,"||",so.map(function(hi,hl){return hi+"!=="+da[hl]}).join("||"),"){",so.map(function(hi,hl){return hi+"="+da[hl]+";"}).join("")),w(j,".uniform",k,"(",Ke,",",da.join(","),");"),D&&w("}")}else{if(E(!Array.isArray(de),"uniform value must not be an array"),D){var Oy=w.def();w("if(!",A.batchId,"||",Oy,"!==",de,"){",Oy,"=",de,";")}w(j,".uniform",k,"(",Ke,",",de,");"),D&&w("}")}}}function gt(A,w,N,B){var G=A.shared,D=G.gl,F=G.draw,j=B.draw;function R(){var ot=j.elements,nt,_t=w;return ot?((ot.contextDep&&B.contextDynamic||ot.propDep)&&(_t=N),nt=ot.append(A,_t),j.elementsActive&&_t("if("+nt+")"+D+".bindBuffer("+Ap+","+nt+".buffer.buffer);")):(nt=_t.def(),_t(nt,"=",F,".",al,";","if(",nt,"){",D,".bindBuffer(",Ap,",",nt,".buffer.buffer);}","else if(",G.vao,".currentVAO){",nt,"=",A.shared.elements+".getElements("+G.vao,".currentVAO.elements);",pe?"":"if("+nt+")"+D+".bindBuffer("+Ap+","+nt+".buffer.buffer);","}")),nt}function k(){var ot=j.count,nt,_t=w;return ot?((ot.contextDep&&B.contextDynamic||ot.propDep)&&(_t=N),nt=ot.append(A,_t),E.optional(function(){ot.MISSING&&A.assert(w,"false","missing vertex count"),ot.DYNAMIC&&A.assert(_t,nt+">=0","missing vertex count")})):(nt=_t.def(F,".",sl),E.optional(function(){A.assert(_t,nt+">=0","missing vertex count")})),nt}var L=R();function W(ot){var nt=j[ot];return nt?nt.contextDep&&B.contextDynamic||nt.propDep?nt.append(A,N):nt.append(A,w):w.def(F,".",ot)}var V=W(ll),ie=W(bd),se=k();if(typeof se=="number"){if(se===0)return}else N("if(",se,"){"),N.exit("}");var Pe,St;we&&(Pe=W(Ad),St=A.instancing);var ht=L+".type",Ke=j.elements&&fa(j.elements)&&!j.vaoActive;function de(){function ot(){N(St,".drawElementsInstancedANGLE(",[V,se,ht,ie+"<<(("+ht+"-"+Y2+")>>1)",Pe],");")}function nt(){N(St,".drawArraysInstancedANGLE(",[V,ie,se,Pe],");")}L&&L!=="null"?Ke?ot():(N("if(",L,"){"),ot(),N("}else{"),nt(),N("}")):nt()}function re(){function ot(){N(D+".drawElements("+[V,se,ht,ie+"<<(("+ht+"-"+Y2+")>>1)"]+");")}function nt(){N(D+".drawArrays("+[V,ie,se]+");")}L&&L!=="null"?Ke?ot():(N("if(",L,"){"),ot(),N("}else{"),nt(),N("}")):nt()}we&&(typeof Pe!="number"||Pe>=0)?typeof Pe=="string"?(N("if(",Pe,">0){"),de(),N("}else if(",Pe,"<0){"),re(),N("}")):de():re()}function Kt(A,w,N,B,G){var D=bt(),F=D.proc("body",G);return E.optional(function(){D.commandStr=w.commandStr,D.command=D.link(w.commandStr)}),we&&(D.instancing=F.def(D.shared.extensions,".angle_instanced_arrays")),A(D,F,N,B),D.compile().body}function nn(A,w,N,B){$n(A,w),N.useVAO?N.drawVAO?w(A.shared.vao,".setVAO(",N.drawVAO.append(A,w),");"):w(A.shared.vao,".setVAO(",A.shared.vao,".targetVAO);"):(w(A.shared.vao,".setVAO(null);"),_r(A,w,N,B.attributes,function(){return!0})),cn(A,w,N,B.uniforms,function(){return!0},!1),gt(A,w,w,N)}function jn(A,w){var N=A.proc("draw",1);$n(A,N),nr(A,N,w.context),rr(A,N,w.framebuffer),dr(A,N,w),xr(A,N,w.state),zt(A,N,w,!1,!0);var B=w.shader.progVar.append(A,N);if(N(A.shared.gl,".useProgram(",B,".program);"),w.shader.program)nn(A,N,w,w.shader.program);else{N(A.shared.vao,".setVAO(null);");var G=A.global.def("{}"),D=N.def(B,".id"),F=N.def(G,"[",D,"]");N(A.cond(F).then(F,".call(this,a0);").else(F,"=",G,"[",D,"]=",A.link(function(j){return Kt(nn,A,w,j,1)}),"(",B,");",F,".call(this,a0);"))}Object.keys(w.state).length>0&&N(A.shared.current,".dirty=true;"),A.shared.vao&&N(A.shared.vao,".setVAO(null);")}function lo(A,w,N,B){A.batchId="a1",$n(A,w);function G(){return!0}_r(A,w,N,B.attributes,G),cn(A,w,N,B.uniforms,G,!1),gt(A,w,w,N)}function cl(A,w,N,B){$n(A,w);var G=N.contextDep,D=w.def(),F="a0",j="a1",R=w.def();A.shared.props=R,A.batchId=D;var k=A.scope(),L=A.scope();w(k.entry,"for(",D,"=0;",D,"<",j,";++",D,"){",R,"=",F,"[",D,"];",L,"}",k.exit);function W(ht){return ht.contextDep&&G||ht.propDep}function V(ht){return!W(ht)}if(N.needsContext&&nr(A,L,N.context),N.needsFramebuffer&&rr(A,L,N.framebuffer),xr(A,L,N.state,W),N.profile&&W(N.profile)&&zt(A,L,N,!1,!0),B)N.useVAO?N.drawVAO?W(N.drawVAO)?L(A.shared.vao,".setVAO(",N.drawVAO.append(A,L),");"):k(A.shared.vao,".setVAO(",N.drawVAO.append(A,k),");"):k(A.shared.vao,".setVAO(",A.shared.vao,".targetVAO);"):(k(A.shared.vao,".setVAO(null);"),_r(A,k,N,B.attributes,V),_r(A,L,N,B.attributes,W)),cn(A,k,N,B.uniforms,V,!1),cn(A,L,N,B.uniforms,W,!0),gt(A,k,L,N);else{var ie=A.global.def("{}"),se=N.shader.progVar.append(A,L),Pe=L.def(se,".id"),St=L.def(ie,"[",Pe,"]");L(A.shared.gl,".useProgram(",se,".program);","if(!",St,"){",St,"=",ie,"[",Pe,"]=",A.link(function(ht){return Kt(lo,A,N,ht,2)}),"(",se,");}",St,".call(this,a0[",D,"],",D,");")}}function P(A,w){var N=A.proc("batch",2);A.batchId="0",$n(A,N);var B=!1,G=!0;Object.keys(w.context).forEach(function(ie){B=B||w.context[ie].propDep}),B||(nr(A,N,w.context),G=!1);var D=w.framebuffer,F=!1;D?(D.propDep?B=F=!0:D.contextDep&&B&&(F=!0),F||rr(A,N,D)):rr(A,N,null),w.state.viewport&&w.state.viewport.propDep&&(B=!0);function j(ie){return ie.contextDep&&B||ie.propDep}dr(A,N,w),xr(A,N,w.state,function(ie){return!j(ie)}),(!w.profile||!j(w.profile))&&zt(A,N,w,!1,"a1"),w.contextDep=B,w.needsContext=G,w.needsFramebuffer=F;var R=w.shader.progVar;if(R.contextDep&&B||R.propDep)cl(A,N,w,null);else{var k=R.append(A,N);if(N(A.shared.gl,".useProgram(",k,".program);"),w.shader.program)cl(A,N,w,w.shader.program);else{N(A.shared.vao,".setVAO(null);");var L=A.global.def("{}"),W=N.def(k,".id"),V=N.def(L,"[",W,"]");N(A.cond(V).then(V,".call(this,a0,a1);").else(V,"=",L,"[",W,"]=",A.link(function(ie){return Kt(cl,A,w,ie,2)}),"(",k,");",V,".call(this,a0,a1);"))}}Object.keys(w.state).length>0&&N(A.shared.current,".dirty=true;"),A.shared.vao&&N(A.shared.vao,".setVAO(null);")}function Z(A,w){var N=A.proc("scope",3);A.batchId="a2";var B=A.shared,G=B.current;nr(A,N,w.context),w.framebuffer&&w.framebuffer.append(A,N),Cy(Object.keys(w.state)).forEach(function(F){var j=w.state[F],R=j.append(A,N);wn(R)?R.forEach(function(k,L){N.set(A.next[F],"["+L+"]",k)}):N.set(B.next,"."+F,R)}),zt(A,N,w,!0,!0),[al,bd,sl,Ad,ll].forEach(function(F){var j=w.draw[F];j&&N.set(B.draw,"."+F,""+j.append(A,N))}),Object.keys(w.uniforms).forEach(function(F){var j=w.uniforms[F].append(A,N);Array.isArray(j)&&(j="["+j.join()+"]"),N.set(B.uniforms,"["+C.id(F)+"]",j)}),Object.keys(w.attributes).forEach(function(F){var j=w.attributes[F].append(A,N),R=A.scopeAttrib(F);Object.keys(new z).forEach(function(k){N.set(R,"."+k,j[k])})}),w.scopeVAO&&N.set(B.vao,".targetVAO",w.scopeVAO.append(A,N));function D(F){var j=w.shader[F];j&&N.set(B.shader,"."+F,j.append(A,N))}D(Xu),D(qu),Object.keys(w.state).length>0&&(N(G,".dirty=true;"),N.exit(G,".dirty=true;")),N("a1(",A.shared.context,",a0,",A.batchId,");")}function X(A){if(!(typeof A!="object"||wn(A))){for(var w=Object.keys(A),N=0;N<w.length;++N)if(Ht.isDynamic(A[w[N]]))return!0;return!1}}function Ze(A,w,N){var B=w.static[N];if(!B||!X(B))return;var G=A.global,D=Object.keys(B),F=!1,j=!1,R=!1,k=A.global.def("{}");D.forEach(function(W){var V=B[W];if(Ht.isDynamic(V)){typeof V=="function"&&(V=B[W]=Ht.unbox(V));var ie=Yr(V,null);F=F||ie.thisDep,R=R||ie.propDep,j=j||ie.contextDep}else{switch(G(k,".",W,"="),typeof V){case"number":G(V);break;case"string":G('"',V,'"');break;case"object":Array.isArray(V)&&G("[",V.join(),"]");break;default:G(A.link(V));break}G(";")}});function L(W,V){D.forEach(function(ie){var se=B[ie];if(Ht.isDynamic(se)){var Pe=W.invoke(V,se);V(k,".",ie,"=",Pe,";")}})}w.dynamic[N]=new Ht.DynamicVariable(Ed,{thisDep:F,contextDep:j,propDep:R,ref:k,append:L}),delete w.static[N]}function Xt(A,w,N,B,G){var D=bt();D.stats=D.link(G),Object.keys(w.static).forEach(function(j){Ze(D,w,j)}),$9.forEach(function(j){Ze(D,A,j)});var F=qn(A,w,N,B,D);return jn(D,F),Z(D,F),P(D,F),r(D.compile(),{destroy:function(){F.shader.program.destroy()}})}return{next:je,current:He,procs:function(){var A=bt(),w=A.proc("poll"),N=A.proc("refresh"),B=A.block();w(B),N(B);var G=A.shared,D=G.gl,F=G.next,j=G.current;B(j,".dirty=false;"),rr(A,w),rr(A,N,null,!0);var R;we&&(R=A.link(we)),M.oes_vertex_array_object&&N(A.link(M.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<Q.maxAttributes;++k){var L=N.def(G.attributes,"[",k,"]"),W=A.cond(L,".buffer");W.then(D,".enableVertexAttribArray(",k,");",D,".bindBuffer(",ms,",",L,".buffer.buffer);",D,".vertexAttribPointer(",k,",",L,".size,",L,".type,",L,".normalized,",L,".stride,",L,".offset);").else(D,".disableVertexAttribArray(",k,");",D,".vertexAttrib4f(",k,",",L,".x,",L,".y,",L,".z,",L,".w);",L,".buffer=null;"),N(W),we&&N(R,".vertexAttribDivisorANGLE(",k,",",L,".divisor);")}return N(A.shared.vao,".currentVAO=null;",A.shared.vao,".setVAO(",A.shared.vao,".targetVAO);"),Object.keys(le).forEach(function(V){var ie=le[V],se=B.def(F,".",V),Pe=A.block();Pe("if(",se,"){",D,".enable(",ie,")}else{",D,".disable(",ie,")}",j,".",V,"=",se,";"),N(Pe),w("if(",se,"!==",j,".",V,"){",Pe,"}")}),Object.keys(oe).forEach(function(V){var ie=oe[V],se=He[V],Pe,St,ht=A.block();if(ht(D,".",ie,"("),wn(se)){var Ke=se.length;Pe=A.global.def(F,".",V),St=A.global.def(j,".",V),ht(tn(Ke,function(de){return Pe+"["+de+"]"}),");",tn(Ke,function(de){return St+"["+de+"]="+Pe+"["+de+"];"}).join("")),w("if(",tn(Ke,function(de){return Pe+"["+de+"]!=="+St+"["+de+"]"}).join("||"),"){",ht,"}")}else Pe=B.def(F,".",V),St=B.def(j,".",V),ht(Pe,");",j,".",V,"=",Pe,";"),w("if(",Pe,"!==",St,"){",ht,"}");N(ht)}),A.compile()}(),compile:Xt}}function r_(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var i_=34918,o_=34919,Ay=35007,a_=function(m,C){if(!C.ext_disjoint_timer_query)return null;var M=[];function Q(){return M.pop()||C.ext_disjoint_timer_query.createQueryEXT()}function ae(we){M.push(we)}var Y=[];function ne(we){var Xe=Q();C.ext_disjoint_timer_query.beginQueryEXT(Ay,Xe),Y.push(Xe),ye(Y.length-1,Y.length,we)}function ve(){C.ext_disjoint_timer_query.endQueryEXT(Ay)}function ge(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var be=[];function Te(){return be.pop()||new ge}function Ae(we){be.push(we)}var Oe=[];function ye(we,Xe,pe){var He=Te();He.startQueryIndex=we,He.endQueryIndex=Xe,He.sum=0,He.stats=pe,Oe.push(He)}var Se=[],z=[];function J(){var we,Xe,pe=Y.length;if(pe!==0){z.length=Math.max(z.length,pe+1),Se.length=Math.max(Se.length,pe+1),Se[0]=0,z[0]=0;var He=0;for(we=0,Xe=0;Xe<Y.length;++Xe){var je=Y[Xe];C.ext_disjoint_timer_query.getQueryObjectEXT(je,o_)?(He+=C.ext_disjoint_timer_query.getQueryObjectEXT(je,i_),ae(je)):Y[we++]=je,Se[Xe+1]=He,z[Xe+1]=we}for(Y.length=we,we=0,Xe=0;Xe<Oe.length;++Xe){var pt=Oe[Xe],le=pt.startQueryIndex,oe=pt.endQueryIndex;pt.sum+=Se[oe]-Se[le];var Je=z[le],Me=z[oe];Me===Je?(pt.stats.gpuTime+=pt.sum/1e6,Ae(pt)):(pt.startQueryIndex=Je,pt.endQueryIndex=Me,Oe[we++]=pt)}Oe.length=we}}return{beginQuery:ne,endQuery:ve,pushScopeStats:ye,update:J,getNumPendingQueries:function(){return Y.length},clear:function(){M.push.apply(M,Y);for(var we=0;we<M.length;we++)C.ext_disjoint_timer_query.deleteQueryEXT(M[we]);Y.length=0,M.length=0},restore:function(){Y.length=0,M.length=0}}},l_=16384,s_=256,u_=1024,c_=34962,Ty="webglcontextlost",Ry="webglcontextrestored",Ly=1,f_=2,d_=3;function Py(m,C){for(var M=0;M<m.length;++M)if(m[M]===C)return M;return-1}function h_(m){var C=vt(m);if(!C)return null;var M=C.gl,Q=M.getContextAttributes(),ae=M.isContextLost(),Y=Wt(M,C);if(!Y)return null;var ne=cr(),ve=r_(),ge=Y.extensions,be=a_(M,ge),Te=gn(),Ae=M.drawingBufferWidth,Oe=M.drawingBufferHeight,ye={tick:0,time:0,viewportWidth:Ae,viewportHeight:Oe,framebufferWidth:Ae,framebufferHeight:Oe,drawingBufferWidth:Ae,drawingBufferHeight:Oe,pixelRatio:C.pixelRatio},Se={},z={elements:null,primitive:4,count:-1,offset:0,instances:-1},J=Sf(M,ge),we=xu(M,ve,C,He),Xe=Cu(M,ge,we,ve),pe=ke(M,ge,J,ve,we,Xe,z);function He(gt){return pe.destroyBuffer(gt)}var je=rn(M,ne,ve,C),pt=W1(M,ge,J,function(){Je.procs.poll()},ye,ve,C),le=X1(M,ge,J,ve,C),oe=sp(M,ge,J,pt,le,ve),Je=n_(M,ne,ge,J,we,Xe,pt,oe,Se,pe,je,z,ye,be,C),Me=N9(M,oe,Je.procs.poll,ye,Q,ge,J),_e=Je.next,Ne=M.canvas,De=[],Lt=[],bt=[],Be=[C.onDestroy],We=null;function xt(){if(De.length===0){be&&be.update(),We=null;return}We=sn.next(xt),xr();for(var gt=De.length-1;gt>=0;--gt){var Kt=De[gt];Kt&&Kt(ye,null,0)}M.flush(),be&&be.update()}function Pt(){!We&&De.length>0&&(We=sn.next(xt))}function Yt(){We&&(sn.cancel(xt),We=null)}function bn(gt){gt.preventDefault(),ae=!0,Yt(),Lt.forEach(function(Kt){Kt()})}function Pn(gt){M.getError(),ae=!1,Y.restore(),je.restore(),we.restore(),pt.restore(),le.restore(),oe.restore(),pe.restore(),be&&be.restore(),Je.procs.refresh(),Pt(),bt.forEach(function(Kt){Kt()})}Ne&&(Ne.addEventListener(Ty,bn,!1),Ne.addEventListener(Ry,Pn,!1));function Qt(){De.length=0,Yt(),Ne&&(Ne.removeEventListener(Ty,bn),Ne.removeEventListener(Ry,Pn)),je.clear(),oe.clear(),le.clear(),pe.clear(),pt.clear(),Xe.clear(),we.clear(),be&&be.clear(),Be.forEach(function(gt){gt()})}function tr(gt){E(!!gt,"invalid args to regl({...})"),E.type(gt,"object","invalid args to regl({...})");function Kt(G){var D=r({},G);delete D.uniforms,delete D.attributes,delete D.context,delete D.vao,"stencil"in D&&D.stencil.op&&(D.stencil.opBack=D.stencil.opFront=D.stencil.op,delete D.stencil.op);function F(j){if(j in D){var R=D[j];delete D[j],Object.keys(R).forEach(function(k){D[j+"."+k]=R[k]})}}return F("blend"),F("depth"),F("cull"),F("stencil"),F("polygonOffset"),F("scissor"),F("sample"),"vao"in G&&(D.vao=G.vao),D}function nn(G,D){var F={},j={};return Object.keys(G).forEach(function(R){var k=G[R];if(Ht.isDynamic(k)){j[R]=Ht.unbox(k,R);return}else if(D&&Array.isArray(k)){for(var L=0;L<k.length;++L)if(Ht.isDynamic(k[L])){j[R]=Ht.unbox(k,R);return}}F[R]=k}),{dynamic:j,static:F}}var jn=nn(gt.context||{},!0),lo=nn(gt.uniforms||{},!0),cl=nn(gt.attributes||{},!1),P=nn(Kt(gt),!1),Z={gpuTime:0,cpuTime:0,count:0},X=Je.compile(P,cl,lo,jn,Z),Ze=X.draw,Xt=X.batch,A=X.scope,w=[];function N(G){for(;w.length<G;)w.push(null);return w}function B(G,D){var F;if(ae&&E.raise("context lost"),typeof G=="function")return A.call(this,null,G,0);if(typeof D=="function")if(typeof G=="number")for(F=0;F<G;++F)A.call(this,null,D,F);else if(Array.isArray(G))for(F=0;F<G.length;++F)A.call(this,G[F],D,F);else return A.call(this,G,D,0);else if(typeof G=="number"){if(G>0)return Xt.call(this,N(G|0),G|0)}else if(Array.isArray(G)){if(G.length)return Xt.call(this,G,G.length)}else return Ze.call(this,G)}return r(B,{stats:Z,destroy:function(){X.destroy()}})}var Sn=oe.setFBO=tr({framebuffer:Ht.define.call(null,Ly,"framebuffer")});function qn(gt,Kt){var nn=0;Je.procs.poll();var jn=Kt.color;jn&&(M.clearColor(+jn[0]||0,+jn[1]||0,+jn[2]||0,+jn[3]||0),nn|=l_),"depth"in Kt&&(M.clearDepth(+Kt.depth),nn|=s_),"stencil"in Kt&&(M.clearStencil(Kt.stencil|0),nn|=u_),E(!!nn,"called regl.clear with no buffer specified"),M.clear(nn)}function nr(gt){if(E(typeof gt=="object"&&gt,"regl.clear() takes an object as input"),"framebuffer"in gt)if(gt.framebuffer&&gt.framebuffer_reglType==="framebufferCube")for(var Kt=0;Kt<6;++Kt)Sn(r({framebuffer:gt.framebuffer.faces[Kt]},gt),qn);else Sn(gt,qn);else qn(null,gt)}function rr(gt){E.type(gt,"function","regl.frame() callback must be a function"),De.push(gt);function Kt(){var nn=Py(De,gt);E(nn>=0,"cannot cancel a frame twice");function jn(){var lo=Py(De,jn);De[lo]=De[De.length-1],De.length-=1,De.length<=0&&Yt()}De[nn]=jn}return Pt(),{cancel:Kt}}function dr(){var gt=_e.viewport,Kt=_e.scissor_box;gt[0]=gt[1]=Kt[0]=Kt[1]=0,ye.viewportWidth=ye.framebufferWidth=ye.drawingBufferWidth=gt[2]=Kt[2]=M.drawingBufferWidth,ye.viewportHeight=ye.framebufferHeight=ye.drawingBufferHeight=gt[3]=Kt[3]=M.drawingBufferHeight}function xr(){ye.tick+=1,ye.time=zt(),dr(),Je.procs.poll()}function $n(){pt.refresh(),dr(),Je.procs.refresh(),be&&be.update()}function zt(){return(gn()-Te)/1e3}$n();function _r(gt,Kt){E.type(Kt,"function","listener callback must be a function");var nn;switch(gt){case"frame":return rr(Kt);case"lost":nn=Lt;break;case"restore":nn=bt;break;case"destroy":nn=Be;break;default:E.raise("invalid event, must be one of frame,lost,restore,destroy")}return nn.push(Kt),{cancel:function(){for(var jn=0;jn<nn.length;++jn)if(nn[jn]===Kt){nn[jn]=nn[nn.length-1],nn.pop();return}}}}var cn=r(tr,{clear:nr,prop:Ht.define.bind(null,Ly),context:Ht.define.bind(null,f_),this:Ht.define.bind(null,d_),draw:tr({}),buffer:function(gt){return we.create(gt,c_,!1,!1)},elements:function(gt){return Xe.create(gt,!1)},texture:pt.create2D,cube:pt.createCube,renderbuffer:le.create,framebuffer:oe.create,framebufferCube:oe.createCube,vao:pe.createVAO,attributes:Q,frame:rr,on:_r,limits:J,hasExtension:function(gt){return J.extensions.indexOf(gt.toLowerCase())>=0},read:Me,destroy:Qt,_gl:M,_refresh:$n,poll:function(){xr(),be&&be.update()},now:zt,stats:ve});return C.onDone(null,cn),cn}return h_})})(dx);var nC=dx.exports;const rC=cf(nC);var iC=1e-6,Ml=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function pm(){var e=new Ml(16);return Ml!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function n6(e){var t=new Ml(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Gg(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],s=t[6],u=t[7],f=t[8],d=t[9],c=t[10],p=t[11],g=t[12],y=t[13],S=t[14],v=t[15],_=n*l-r*a,x=n*s-i*a,O=n*u-o*a,I=r*s-i*l,U=r*u-o*l,te=i*u-o*s,K=f*y-d*g,$e=f*S-c*g,Ee=f*v-p*g,Re=d*S-c*y,Fe=d*v-p*y,Ve=c*v-p*S,Ce=_*Ve-x*Fe+O*Re+I*Ee-U*$e+te*K;return Ce?(Ce=1/Ce,e[0]=(l*Ve-s*Fe+u*Re)*Ce,e[1]=(i*Fe-r*Ve-o*Re)*Ce,e[2]=(y*te-S*U+v*I)*Ce,e[3]=(c*U-d*te-p*I)*Ce,e[4]=(s*Ee-a*Ve-u*$e)*Ce,e[5]=(n*Ve-i*Ee+o*$e)*Ce,e[6]=(S*O-g*te-v*x)*Ce,e[7]=(f*te-c*O+p*x)*Ce,e[8]=(a*Fe-l*Ee+u*K)*Ce,e[9]=(r*Ee-n*Fe-o*K)*Ce,e[10]=(g*U-y*O+v*_)*Ce,e[11]=(d*O-f*U-p*_)*Ce,e[12]=(l*$e-a*Re-s*K)*Ce,e[13]=(n*Re-r*$e+i*K)*Ce,e[14]=(y*x-g*I-S*_)*Ce,e[15]=(f*I-d*x+c*_)*Ce,e):null}function Vr(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],s=t[5],u=t[6],f=t[7],d=t[8],c=t[9],p=t[10],g=t[11],y=t[12],S=t[13],v=t[14],_=t[15],x=n[0],O=n[1],I=n[2],U=n[3];return e[0]=x*r+O*l+I*d+U*y,e[1]=x*i+O*s+I*c+U*S,e[2]=x*o+O*u+I*p+U*v,e[3]=x*a+O*f+I*g+U*_,x=n[4],O=n[5],I=n[6],U=n[7],e[4]=x*r+O*l+I*d+U*y,e[5]=x*i+O*s+I*c+U*S,e[6]=x*o+O*u+I*p+U*v,e[7]=x*a+O*f+I*g+U*_,x=n[8],O=n[9],I=n[10],U=n[11],e[8]=x*r+O*l+I*d+U*y,e[9]=x*i+O*s+I*c+U*S,e[10]=x*o+O*u+I*p+U*v,e[11]=x*a+O*f+I*g+U*_,x=n[12],O=n[13],I=n[14],U=n[15],e[12]=x*r+O*l+I*d+U*y,e[13]=x*i+O*s+I*c+U*S,e[14]=x*o+O*u+I*p+U*v,e[15]=x*a+O*f+I*g+U*_,e}function r6(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function O0(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oC(e,t,n){var r=n[0],i=n[1],o=n[2],a=Math.hypot(r,i,o),l,s,u;return a<iC?null:(a=1/a,r*=a,i*=a,o*=a,l=Math.sin(t),s=Math.cos(t),u=1-s,e[0]=r*r*u+s,e[1]=i*r*u+o*l,e[2]=o*r*u-i*l,e[3]=0,e[4]=r*i*u-o*l,e[5]=i*i*u+s,e[6]=o*i*u+r*l,e[7]=0,e[8]=r*o*u+i*l,e[9]=i*o*u-r*l,e[10]=o*o*u+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function aC(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function lC(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],l=t[6],s=t[8],u=t[9],f=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(s,u,f),e}function sC(){var e=new Ml(4);return Ml!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function k0(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}(function(){var e=sC();return function(t,n,r,i,o,a){var l,s;for(n||(n=4),r||(r=0),i?s=Math.min(i*n+r,t.length):s=t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],o(e,e,a),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function uC(){var e=new Ml(2);return Ml!=Float32Array&&(e[0]=0,e[1]=0),e}function cC(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),l=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=uC();return function(t,n,r,i,o,a){var l,s;for(n||(n=2),r||(r=0),i?s=Math.min(i*n+r,t.length):s=t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],o(e,e,a),t[l]=e[0],t[l+1]=e[1];return t}})();const fC=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],o=[[-1/0,1/0],[-1/0,1/0]])=>{const a=new Float32Array(16),l=new Float32Array(16),s=new Float32Array(16);let u=pm(),f=[...r.slice(0,2),0,1];const d=Array.isArray(i[0])?[...i[0]]:[...i],c=Array.isArray(i[0])?[...i[1]]:[...i],p=Array.isArray(o[0])?[...o[0]]:[...o],g=Array.isArray(o[0])?[...o[1]]:[...o],y=()=>lC(a,u).slice(0,2),S=()=>{const xe=y();return Math.min(xe[0],xe[1])},v=()=>{const xe=y();return Math.max(xe[0],xe[1])},_=()=>Math.acos(u[0]/v()),x=()=>[[...d],[...c]],O=()=>[[...p],[...g]],I=()=>{const xe=y();return[1/xe[0],1/xe[1]]},U=()=>1/S(),te=()=>1/v(),K=()=>aC(a,u).slice(0,2),$e=()=>k0(a,f,Gg(s,u)).slice(0,2),Ee=()=>u,Re=()=>f.slice(0,2),Fe=([xe=0,Qe=0]=[],st=1,wt=0)=>{u=pm(),Ve([-xe,-Qe]),Rt(wt),Ce(1/st)},Ve=([xe=0,Qe=0]=[])=>{a[0]=xe,a[1]=Qe,a[2]=0;const st=r6(l,a);Vr(u,st,u)},Ce=(xe,Qe)=>{const st=Array.isArray(xe);let wt=st?xe[0]:xe,At=st?xe[1]:xe;if(wt<=0||At<=0||wt===1&&At===1)return;const $t=y(),ct=$t[0]*wt,Ot=$t[1]*At;if(wt=Math.max(d[0],Math.min(ct,d[1]))/$t[0],At=Math.max(c[0],Math.min(Ot,c[1]))/$t[1],wt===1&&At===1)return;a[0]=wt,a[1]=At,a[2]=1;const Gt=O0(l,a),Vt=Qe?[...Qe,0]:f,vn=r6(a,Vt);Vr(u,vn,Vr(u,Gt,Vr(u,Gg(s,vn),u)))},Rt=xe=>{const Qe=pm();oC(Qe,xe,[0,0,1]),Vr(u,Qe,u)},at=xe=>{const Qe=Array.isArray(xe[0]);d[0]=Qe?xe[0][0]:xe[0],d[1]=Qe?xe[0][1]:xe[1],c[0]=Qe?xe[1][0]:xe[0],c[1]=Qe?xe[1][1]:xe[1]},qe=xe=>{const Qe=Array.isArray(xe[0]);p[0]=Qe?xe[0][0]:xe[0],p[1]=Qe?xe[0][1]:xe[1],g[0]=Qe?xe[1][0]:xe[0],g[1]=Qe?xe[1][1]:xe[1]},ee=xe=>{!xe||xe.length<16||(u=xe)},ue=xe=>{f=[...xe.slice(0,2),0,1]},ce=()=>{Fe(e,t,n)};return Fe(e,t,n),{get translation(){return K()},get target(){return $e()},get scaling(){return y()},get minScaling(){return S()},get maxScaling(){return v()},get scaleBounds(){return x()},get translationBounds(){return O()},get distance(){return I()},get minDistance(){return U()},get maxDistance(){return te()},get rotation(){return _()},get view(){return Ee()},get viewCenter(){return Re()},lookAt:Fe,translate:Ve,pan:Ve,rotate:Rt,scale:Ce,zoom:Ce,reset:ce,set:(...xe)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),ee(...xe)),setScaleBounds:at,setTranslationBounds:qe,setView:ee,setViewCenter:ue}},dC=["pan","rotate"],i6={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},hC=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:o=!1,isPan:a=!0,isPanInverted:l=[!1,!0],panSpeed:s=1,isRotate:u=!0,rotateSpeed:f=1,defaultMouseDownMoveAction:d="pan",mouseDownMoveModKey:c="alt",isZoom:p=!0,zoomSpeed:g=1,viewCenter:y,scaleBounds:S,translationBounds:v,onKeyDown:_=()=>{},onKeyUp:x=()=>{},onMouseDown:O=()=>{},onMouseUp:I=()=>{},onMouseMove:U=()=>{},onWheel:te=()=>{}}={})=>{let K=fC(n,t,r,y,S,v),$e=0,Ee=0,Re=0,Fe=0,Ve=0,Ce=0,Rt=!1,at=0,qe=1,ee=1,ue=1,ce=!1,xe=!1,Qe=!1,st=d==="pan",wt=a,At=a,$t=l,ct=l,Ot=p,Gt=p;const Vt=()=>{wt=Array.isArray(a)?!!a[0]:a,At=Array.isArray(a)?!!a[1]:a,$t=Array.isArray(l)?!!l[0]:l,ct=Array.isArray(l)?!!l[1]:l,Ot=Array.isArray(p)?!!p[0]:p,Gt=Array.isArray(p)?!!p[1]:p};Vt();const vn=i?Le=>Le/qe*2*ue:Le=>Le,Ut=i?Le=>Le/ee*2:Le=>-Le,ln=i?Le=>(-1+Le/qe*2)*ue:Le=>Le,ft=i?Le=>1-Le/ee*2:Le=>Le,kt=()=>{if(o){const tt=xe;return xe=!1,tt}ce=!1;const Le=$e,Tt=Ee;if((wt||At)&&Rt&&(st&&!Qe||!st&&Qe)){const tt=$t?Ve-Le:Le-Ve,It=wt?vn(s*tt):0,xn=ct?Ce-Tt:Tt-Ce,Ht=At?Ut(s*xn):0;(It!==0||Ht!==0)&&(K.pan([It,Ht]),ce=!0)}if((Ot||Gt)&&at){const tt=g*Math.exp(at/ee),It=ln(Re),xn=ft(Fe);K.scale([Ot?1/tt:1,Gt?1/tt:1],[It,xn]),ce=!0}if(u&&Rt&&(st&&Qe||!st&&!Qe)&&Math.abs(Ve-Le)+Math.abs(Ce-Tt)>0){const tt=qe/2,It=ee/2,xn=Ve-tt,Ht=It-Ce,sn=Le-tt,gn=It-Tt,cr=cC([xn,Ht],[sn,gn]),Qn=xn*gn-sn*Ht;K.rotate(f*cr*Math.sign(Qn)),ce=!0}at=0,Ve=Le,Ce=Tt;const qt=ce||xe;return xe=!1,qt},jt=({defaultMouseDownMoveAction:Le=null,isFixed:Tt=null,isPan:qt=null,isPanInverted:tt=null,isRotate:It=null,isZoom:xn=null,panSpeed:Ht=null,rotateSpeed:sn=null,zoomSpeed:gn=null,mouseDownMoveModKey:cr=null}={})=>{d=Le!==null&&dC.includes(Le)?Le:d,st=d==="pan",o=Tt!==null?Tt:o,a=qt!==null?qt:a,l=tt!==null?tt:l,u=It!==null?It:u,p=xn!==null?xn:p,s=+Ht>0?Ht:s,f=+sn>0?sn:f,g=+gn>0?gn:g,Vt(),c=cr!==null&&Object.keys(i6).includes(cr)?cr:c},dt=()=>{const Le=e.getBoundingClientRect();qe=Le.width,ee=Le.height,ue=qe/ee},ut=Le=>{Qe=!1,x(Le)},Jt=Le=>{Qe=Le[i6[c]],_(Le)},Zt=Le=>{Rt=!1,I(Le)},yn=Le=>{Rt=Le.buttons===1,O(Le)},E=document.createEvent("MouseEvent").offsetX!==void 0?Le=>{Re=Le.offsetX,Fe=Le.offsetY}:Le=>{const Tt=e.getBoundingClientRect();Re=Le.clientX-Tt.left,Fe=Le.clientY-Tt.top},me=Le=>{$e=Le.clientX,Ee=Le.clientY},Ue=Le=>{me(Le),U(Le)},he=Le=>{if(Ot||Gt){Le.preventDefault(),me(Le),E(Le);const Tt=Le.deltaMode===1?12:1;at+=Tt*(Le.deltaY||Le.deltaX||0)}te(Le)},Et=()=>{K=void 0,window.removeEventListener("keydown",Jt),window.removeEventListener("keyup",ut),e.removeEventListener("mousedown",yn),window.removeEventListener("mouseup",Zt),window.removeEventListener("mousemove",Ue),e.removeEventListener("wheel",he)};window.addEventListener("keydown",Jt,{passive:!0}),window.addEventListener("keyup",ut,{passive:!0}),e.addEventListener("mousedown",yn,{passive:!0}),window.addEventListener("mouseup",Zt,{passive:!0}),window.addEventListener("mousemove",Ue,{passive:!0}),e.addEventListener("wheel",he,{passive:!1}),K.config=jt,K.dispose=Et,K.refresh=dt,K.tick=kt;const lt=Le=>function(){Le.apply(null,arguments),xe=!0};return K.lookAt=lt(K.lookAt),K.translate=lt(K.translate),K.pan=lt(K.pan),K.rotate=lt(K.rotate),K.scale=lt(K.scale),K.zoom=lt(K.zoom),K.reset=lt(K.reset),K.set=lt(K.set),K.setScaleBounds=lt(K.setScaleBounds),K.setTranslationBounds=lt(K.setTranslationBounds),K.setView=lt(K.setView),K.setViewCenter=lt(K.setViewCenter),dt(),K};function Vg(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;hx(e,t,a,r,i,o%2),Vg(e,t,n,r,a-1,o+1),Vg(e,t,n,a+1,i,o+1)}function hx(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const u=i-r+1,f=n-r+1,d=Math.log(u),c=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*c*(u-c)/u)*(f-u/2<0?-1:1),g=Math.max(r,Math.floor(n-f*c/u+p)),y=Math.min(i,Math.floor(n+(u-f)*c/u+p));hx(e,t,n,g,y,o)}const a=t[2*n+o];let l=r,s=i;for(fc(e,t,r,n),t[2*i+o]>a&&fc(e,t,r,i);l<s;){for(fc(e,t,l,s),l++,s--;t[2*l+o]<a;)l++;for(;t[2*s+o]>a;)s--}t[2*r+o]===a?fc(e,t,r,s):(s++,fc(e,t,s,i)),s<=n&&(r=s+1),n<=s&&(i=s-1)}}function fc(e,t,n,r){mm(e,n,r),mm(t,2*n,2*r),mm(t,2*n+1,2*r+1)}function mm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pC(e,t,n,r,i,o,a){const l=[0,e.length-1,0],s=[];let u,f;for(;l.length;){const d=l.pop(),c=l.pop(),p=l.pop();if(c-p<=a){for(let S=p;S<=c;S++)u=t[2*S],f=t[2*S+1],u>=n&&u<=i&&f>=r&&f<=o&&s.push(e[S]);continue}const g=Math.floor((p+c)/2);u=t[2*g],f=t[2*g+1],u>=n&&u<=i&&f>=r&&f<=o&&s.push(e[g]);const y=(d+1)%2;(d===0?n<=u:r<=f)&&(l.push(p),l.push(g-1),l.push(y)),(d===0?i>=u:o>=f)&&(l.push(g+1),l.push(c),l.push(y))}return s}function mC(e,t,n,r,i,o){const a=[0,e.length-1,0],l=[],s=i*i;for(;a.length;){const u=a.pop(),f=a.pop(),d=a.pop();if(f-d<=o){for(let S=d;S<=f;S++)o6(t[2*S],t[2*S+1],n,r)<=s&&l.push(e[S]);continue}const c=Math.floor((d+f)/2),p=t[2*c],g=t[2*c+1];o6(p,g,n,r)<=s&&l.push(e[c]);const y=(u+1)%2;(u===0?n-i<=p:r-i<=g)&&(a.push(d),a.push(c-1),a.push(y)),(u===0?n+i>=p:r+i>=g)&&(a.push(c+1),a.push(f),a.push(y))}return l}function o6(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}const gC=e=>e[0],vC=e=>e[1];class yC{constructor(t,n=gC,r=vC,i=64,o=Float64Array){this.nodeSize=i,this.points=t;const a=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new a(t.length),s=this.coords=new o(t.length*2);for(let u=0;u<t.length;u++)l[u]=u,s[2*u]=n(t[u]),s[2*u+1]=r(t[u]);Vg(l,s,i,0,l.length-1,0)}range(t,n,r,i){return pC(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return mC(this.ids,this.coords,t,n,r,this.nodeSize)}}const xC=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var _C=xC;const wC=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var SC=wC;const{push:a6,splice:EC}=Array.prototype,gm=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),zr=Float32Array.BYTES_PER_ELEMENT,CC=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const o=n+i*2,a=o+1,l=o+2,s=o+3;t.push(o,a,l,l,a,s)}n+=(r+2)*2}),t},pi={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let o=0,a=e.length/t;o<a;o++){const l=o*t;for(let s=0;s<t;s++){const u=e[l+s];i[s]=u,i[s+t]=u*n}a6.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,o=e.length/n;i<o;i++){const a=t+i*n;e[a]=r(e[a],a,i)}return e},copyElement(e,t,n,r){const i=new Array(r),o=t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return EC.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],o=new Array(n).fill(r);for(let a=0,l=e.length/t;a<l;a++){const s=a*t;for(let u=0;u<t;u++)o[u]=e[s+u];a6.apply(i,o)}return i}},bC=(e,{projection:t=gm,model:n=gm,view:r=gm,points:i=[],colorIndices:o=[],color:a=[.8,.5,0,1],opacity:l=null,opacities:s=[],width:u=1,widths:f=[],miter:d=1,is2d:c=!1,zPos2d:p=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const g=new Float32Array(16);let y,S,v,_,x,O,I,U,te,K,$e,Ee,Re,Fe,Ve,Ce,Rt,at,qe=c?2:3;const ee=()=>+(s.length===S||l!==null),ue=()=>{K=e.buffer(),$e=e.buffer(),Ee=e.buffer(),Ve=e.buffer(),Ce={prevPosition:{buffer:()=>K,offset:0,stride:zr*3},currPosition:{buffer:()=>K,offset:zr*3*2,stride:zr*3},nextPosition:{buffer:()=>K,offset:zr*3*4,stride:zr*3},opacity:{buffer:()=>$e,offset:zr*2,stride:zr},offsetScale:{buffer:()=>Ee,offset:zr*2,stride:zr},colorIndex:{buffer:()=>Ve,offset:zr*2,stride:zr}},Rt=e.elements(),at=e({attributes:Ce,depth:{enable:!c},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(ft,kt)=>{const jt=ft.projection||kt.projection,dt=ft.model||kt.model,ut=ft.view||kt.view;return Vr(g,jt,Vr(g,ut,dt))},aspectRatio:({viewportWidth:ft,viewportHeight:kt})=>ft/kt,colorTex:()=>Re,colorTexRes:()=>Fe,colorTexEps:()=>.5/Fe,pixelRatio:({pixelRatio:ft})=>ft,width:({pixelRatio:ft,viewportHeight:kt})=>u/kt*ft,useOpacity:ee,useColorOpacity:()=>+!ee(),miter:d},elements:()=>Rt,vert:SC,frag:_C})},ce=()=>{y===1&&i.length%qe>0&&console.warn(`The length of points (${S}) does not match the dimensions (${qe}). Incomplete points are ignored.`),_=i.flat().slice(0,S*qe),c&&(_=pi.increaseStride(_,2,3,p)),o.length!==S&&(o=new Array(S).fill(0)),f.length!==S&&(f=new Array(S).fill(1));let ft=o.slice(),kt=s.length===S?s.slice():new Array(S).fill(+l),jt=f.slice(),dt=0;v.forEach(ut=>{const Jt=dt+ut-1;pi.copyElement(_,Jt,Jt,3),pi.copyElement(_,dt,dt,3),pi.copyElement(ft,Jt,Jt,1),pi.copyElement(ft,dt,dt,1),pi.copyElement(kt,Jt,Jt,1),pi.copyElement(kt,dt,dt,1),pi.copyElement(jt,Jt,Jt,1),pi.copyElement(jt,dt,dt,1),dt+=ut+2}),x=new Float32Array(pi.duplicate(_,3)),O=pi.duplicate(ft),I=pi.duplicate(kt),U=pi.duplicate(jt,1,-1),te=CC(v),K({usage:"dynamic",type:"float",length:x.length*zr,data:x}),$e({usage:"dynamic",type:"float",length:I.length*zr,data:I}),Ee({usage:"dynamic",type:"float",length:U.length*zr,data:U}),Ve({usage:"dynamic",type:"float",length:O.length*zr,data:O}),Rt({primitive:"triangles",usage:"dynamic",type:te.length>2**16?"uint32":"uint16",data:te})},xe=()=>{Qe(),ue()},Qe=()=>{i=null,_=null,x=null,U=null,te=null,K.destroy(),Ee.destroy(),Rt.destroy()},st=({projection:ft,model:kt,view:jt}={})=>{ft&&(t=ft),kt&&(n=kt),jt&&(r=jt),i&&i.length>1&&at({projection:t,model:n,view:r})},wt=(ft,kt)=>{const jt=kt.flat(2);return jt.length===S?jt:jt.length===y?v.map((dt,ut)=>Array(dt).fill(jt[ut])).flat():ft},At=()=>i,$t=(ft=[],{colorIndices:kt=o,opacities:jt=s,widths:dt=f,is2d:ut=c}={})=>{i=ft,c=ut,qe=c?2:3,y=Array.isArray(i[0])?i.length:1,v=y>1?i.map(Jt=>Math.floor(Jt.length/qe)):[Math.floor(i.length/qe)],S=v.reduce((Jt,Zt)=>Jt+Zt,0),o=wt(o,kt),s=wt(s,jt),f=wt(f,dt),i&&S>1?ce():xe()},ct=(ft,kt=-1)=>Array.isArray(ft)?ft.length&&!Array.isArray(ft[0])?kt+1:ct(ft[0],++kt):kt,Ot=()=>{const ft=ct(a)===0?[a]:a;Fe=Math.max(2,Math.ceil(Math.sqrt(ft.length)));const kt=new Uint8Array(Fe**2*4);ft.forEach((jt,dt)=>{kt[dt*4]=Math.min(255,Math.max(0,Math.round(jt[0]*255))),kt[dt*4+1]=Math.min(255,Math.max(0,Math.round(jt[1]*255))),kt[dt*4+2]=Math.min(255,Math.max(0,Math.round(jt[2]*255))),kt[dt*4+3]=Number.isNaN(+jt[3])?255:Math.min(255,Math.max(0,Math.round(jt[3]*255)))}),Re=e.texture({data:kt,shape:[Fe,Fe,4]})},Gt=(ft,kt=l)=>{a=ft,l=kt,Re&&Re.destroy(),Ot()},Vt=()=>({color:a,miter:d,width:u}),vn=({color:ft,opacity:kt,miter:jt,width:dt}={})=>{ft&&Gt(ft,kt),jt&&(d=jt),+dt>0&&(u=dt)},Ut=()=>({points:K,widths:Ee,opacities:$e,colorIndices:Ve}),ln=()=>({points:x,widths:U,opacities:I,colorIndices:O});return ue(),Ot(),i&&i.length>1&&$t(i),{clear:xe,destroy:Qe,draw:st,getPoints:At,setPoints:$t,getData:ln,getBuffer:Ut,getStyle:Vt,setStyle:vn}};var s0=bC;const AC=e=>e*e*e,px=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,TC=e=>--e*e*e+1,RC=e=>e,LC=e=>e*e,PC=e=>e<.5?2*e*e:-1+(4-2*e)*e,OC=e=>e*(2-e),Is=e=>e,kC=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},MC=e=>e.reduce((t,n)=>n>t?n:t,-1/0),l6=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},NC=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,o)=>(i&&r.push(o),r),[])},x2=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,o)=>(i[o]=Object.getOwnPropertyDescriptor(n,o),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const o=Object.getOwnPropertyDescriptor(n,i);o.enumerable&&(r[i]=o)}),Object.defineProperties(e,r)}),e),IC=(...e)=>t=>e.reduce((n,r)=>r(n),t),FC=e=>t=>x2({__proto__:{constructor:e}},t),s6=(e,t)=>n=>x2(n,{get[e](){return t}}),DC=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),$C=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),ys=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),mx=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const o=(...s)=>{const u=()=>{i>0&&(e(...s),i=0)};clearTimeout(r),r=setTimeout(u,n)};let a=!1;const l=(...s)=>{a?(i++,o(...s)):(e(...s),o(...s),a=!0,i=0,setTimeout(()=>{a=!1},t))};return l.reset=()=>{a=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...s)=>e(...s),l},po="auto",jC=0,vm=1,BC=2,u6=3,zC=4,GC=Float32Array.BYTES_PER_ELEMENT,gx=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],c6={color:[0,0,0,0],depth:1},_2="panZoom",vx="lasso",yx="rotate",VC=[_2,vx,yx],UC=_2,HC={cubicIn:AC,cubicInOut:px,cubicOut:TC,linear:RC,quadIn:LC,quadInOut:PC,quadOut:OC},f6=px,fo="continuous",Ss="categorical",d6=[fo,Ss],Ug="deselect",w2="lassoEnd",WC=[Ug,w2],XC=[0,.666666667,1,1],qC=2,YC=!1,KC=10,QC=3,ZC=w2,JC=!1,dh=750,hh=500,ph=100,mh=250,S2="lasso",gh="rotate",vh="merge",eb=[S2,gh,vh],E2="alt",C2="cmd",xx="ctrl",_x="meta",b2="shift",tb=[E2,C2,xx,_x,b2],nb={[E2]:gh,[b2]:S2,[C2]:vh},rb=1,ib=po,ob=po,ab=1,ym=1,lb=6,sb=2,ub=2,xm=null,cb=2,fb=2,_m=null,db=null,wm=null,hb=.66,pb=1,Sm=null,mb=.15,gb=25,vb=1,yb=1,dc=null,xb=[.66,.66,.66,pb],_b=[0,.55,1,1],wb=[1,1,1,1],Sb=[0,0,0,1],Em=null,Eb=[.66,.66,.66,.2],Cb=[0,.55,1,1],bb=[1,1,1,1],Ab=[0,0],Tb=1,Rb=0,Lb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Pb="IMAGE_LOAD_ERROR",Ob=null,kb=!1,Mb=[1,1,1,.5],Nb=!0,Ib=!0,Fb=!1,Db=100,$b=1/500,jb="auto",Bb=!1,zb=200,Gb=500,wx=new Set(["z","valueZ","valueA","value1","category"]),Sx=new Set(["w","valueW","valueB","value2","value"]),A2=15e3,h6="Points have not been drawn",Vb=(e,t)=>e?gx.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,Ub=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return gx.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),rC({gl:t,extensions:n})},Cm=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),Hb=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let o=0;o<e.length;o+=2)t=e[o]<t?e[o]:t,n=e[o]>n?e[o]:n,r=e[o+1]<r?e[o+1]:r,i=e[o+1]>i?e[o+1]:i;return[t,r,n,i]},Wb=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,Xb=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,o)=>`#${r}${r}${i}${i}${o}${o}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),pa=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),ma=e=>!Number.isNaN(+e)&&+e>=0,u0=e=>!Number.isNaN(+e)&&+e>0,p6=(e,t)=>n=>e.indexOf(n)>=0?n:t,qb=(e,t=!1,n=A2)=>new Promise((r,i)=>{const o=new Image;t&&(o.crossOrigin="anonymous"),o.src=e,o.onload=()=>{r(o)};const a=()=>{i(new Error(Pb))};o.onerror=a,setTimeout(a,n)}),m6=(e,t,n=A2)=>new Promise((r,i)=>{qb(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(o=>{r(e.texture(o))}).catch(o=>{i(o)})}),Yb=(e,t=!1)=>[...Xb(e,t),255**!t],Kb=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),Qb=e=>e>=0&&e<=1,yh=e=>Array.isArray(e)&&e.every(Qb),Zb=(e,[t,n]=[])=>{let r,i,o,a,l=!1;for(let s=0,u=e.length-2;s<e.length;s+=2)r=e[s],i=e[s+1],o=e[u],a=e[u+1],i>n!=a>n&&t<(o-r)*(n-i)/(a-i)+r&&(l=!l),u=s;return l},Hg=e=>typeof e=="string"||e instanceof String,Jb=e=>Number.isInteger(e)&&e>=0&&e<=255,Ex=e=>Array.isArray(e)&&e.every(Jb),eA=e=>e.length===3&&(yh(e)||Ex(e)),tA=e=>e.length===4&&(yh(e)||Ex(e)),ga=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||Hg(e[0])),c0=(e,t)=>e>t?e:t,g6=(e,t)=>e<t?e:t,Qr=(e,t)=>{if(tA(e)){const n=yh(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(eA(e)){const n=255**!t,r=yh(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return Kb(e)?Yb(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},v6=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),y6=e=>.21*e[0]+.72*e[1]+.07*e[2],nA=(e,t,n)=>Math.min(n,Math.max(t,e)),rA=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=ab}=e;t||(t=Ub(n));const i=Vb(t),o=[n.width,n.height],a=t.framebuffer({width:o[0],height:o[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>a,srcRes:()=>o,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),s=S=>{const v=S.getContext("2d");v.clearRect(0,0,S.width,S.height),v.drawImage(n,(n.width-S.width)/2,(n.height-S.height)/2,S.width,S.height,0,0,S.width,S.height)},u=(S,v)=>{t.clear(c6),a.use(()=>{t.clear(c6),S()}),l(),s(v)},f=()=>{t.poll()},d=new Set,c=S=>(d.add(S),()=>{d.delete(S)}),p=t.frame(()=>{const S=d.values();let v=S.next();for(;!v.done;)v.value(),v=S.next()}),g=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,o[0]=n.width,o[1]=n.height,a.resize(...o)};return e.canvas||(window.addEventListener("resize",g),window.addEventListener("orientationchange",g),g()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(S){r=+S},get isSupported(){return i},render:u,onFrame:c,refresh:f,destroy:()=>{p.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",g),window.removeEventListener("orientationchange",g)}}},iA=!0,bm=8,x6=2,oA=2500,aA=250,lA=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const o=document.createElement("div");return o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.width="1.25rem",o.style.height="1.25rem",o.style.borderRadius="1.25rem",o.style.background="currentcolor",o.style.transform="scale(0)",o.style.opacity=0,e.appendChild(o),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:o}},sA=(e,t,n)=>(1-e)*t+n,uA=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,cA=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,fA=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,dA=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,hA=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,pA=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,mA=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,gA=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,vA=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,yA=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,xA=({time:e=dh,extraTime:t=hh,delay:n=ph,currentColor:r,targetColor:i,effectOpacity:o,effectScale:a,circleLeftRotation:l,circleRightRotation:s,circleClipPath:u,circleOpacity:f})=>{const d=l/360,c=sA(d,e,t),p=Math.round((1-d)*e/c*100),g=Math.round(p/2),y=p+(100-p)/4;return{rules:{main:pA(p,r,i),effect:mA(p,y,o,a),circleRight:yA(g,s),circleLeft:vA(p,l),circle:gA(g,u,f)},names:{main:uA(c,n),effect:cA(c,n),circleLeft:fA(c,n),circleRight:dA(c,n),circle:hA(c,n)}}},_A=e=>`${e}ms linear mainOut 0s 1 normal forwards`,wA=e=>`${e}ms linear effectOut 0s 1 normal forwards`,SA=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,EA=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,CA=e=>`${e}ms linear circleOut 0s 1 normal forwards`,bA=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,AA=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,TA=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,RA=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,LA=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,PA=({time:e=mh,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:o,circleRightRotation:a,circleClipPath:l,circleOpacity:s})=>{const u=o/360,f=u*e,d=Math.min(100,u*100),c=d>50?Math.round((1-50/d)*100):0;return{rules:{main:bA(t,n),effect:AA(r,i),circleRight:TA(c,a),circleLeft:RA(o),circle:LA(c,l,s)},names:{main:_A(f),effect:wA(f),circleRight:SA(f),circleLeft:EA(f),circle:CA(f)}}},hc=(e,t=null)=>e===null?t:e;let Am;const Cx=()=>{if(!Am){const e=document.createElement("style");document.head.appendChild(e),Am=e.sheet}return Am},Ri=e=>{const t=Cx(),n=t.rules.length;return t.insertRule(e,n),n},Li=e=>{Cx().deleteRule(e)},OA=`${oA}ms ease scaleInFadeOut 0s 1 normal backwards`,kA=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let Tm=null;const MA=`${aA}ms ease fadeScaleOut 0s 1 normal backwards`,NA=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let Rm=null;const bx=(e,{onDraw:t=Is,onStart:n=Is,onEnd:r=Is,enableInitiator:i=iA,initiatorParentElement:o=document.body,longPressIndicatorParentElement:a=document.body,minDelay:l=bm,minDist:s=x6,pointNorm:u=Is}={})=>{let f=i,d=o,c=a,p=t,g=n,y=r,S=u;const v=document.createElement("div"),_=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);v.id=`lasso-initiator-${_}`,v.style.position="fixed",v.style.display="flex",v.style.justifyContent="center",v.style.alignItems="center",v.style.zIndex=99,v.style.width="4rem",v.style.height="4rem",v.style.borderRadius="4rem",v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:x,longPressCircle:O,longPressCircleLeft:I,longPressCircleRight:U,longPressEffect:te}=lA();let K=!1,$e=!1,Ee=[],Re=[],Fe,Ve=!1,Ce=null,Rt=null,at=null,qe=null,ee=null,ue=null,ce=null,xe=null,Qe=null,st=null;const wt=()=>{K=!1},At=me=>{const{left:Ue,top:he}=e.getBoundingClientRect();return[me.clientX-Ue,me.clientY-he]};window.addEventListener("mouseup",wt);const $t=()=>{v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},ct=(me,Ue)=>{const he=getComputedStyle(me),Et=+he.opacity,lt=he.transform.match(/([0-9.-]+)+/g),Le=+lt[0],Tt=+lt[1],qt=Math.sqrt(Le*Le+Tt*Tt);let tt=Math.atan2(Tt,Le)*(180/Math.PI);return tt=Ue&&tt<=0?360+tt:tt,{opacity:Et,scale:qt,rotate:tt}},Ot=me=>{if(!f||K)return;const Ue=me.clientX,he=me.clientY;v.style.top=`${he}px`,v.style.left=`${Ue}px`;const Et=ct(v),lt=Et.opacity,Le=Et.scale,Tt=Et.rotate;v.style.opacity=lt,v.style.transform=`translate(-50%,-50%) scale(${Le}) rotate(${Tt}deg)`,v.style.animation="none",ys().then(()=>{Tm!==null&&Li(Tm),Tm=Ri(kA(lt,Le,Tt)),v.style.animation=OA,ys().then(()=>{$t()})})},Gt=()=>{const{opacity:me,scale:Ue,rotate:he}=ct(v);v.style.opacity=me,v.style.transform=`translate(-50%,-50%) scale(${Ue}) rotate(${he}deg)`,v.style.animation="none",ys(2).then(()=>{Rm!==null&&Li(Rm),Rm=Ri(NA(me,Ue,he)),v.style.animation=MA,ys().then(()=>{$t()})})},Vt=(me,Ue,{time:he=dh,extraTime:Et=hh,delay:lt=ph}={time:dh,extraTime:hh,delay:ph})=>{Ve=!0;const Le=getComputedStyle(x);x.style.color=Le.color,x.style.top=`${Ue}px`,x.style.left=`${me}px`,x.style.animation="none";const Tt=getComputedStyle(O);O.style.clipPath=Tt.clipPath,O.style.opacity=Tt.opacity,O.style.animation="none";const qt=ct(te);te.style.opacity=qt.opacity,te.style.transform=`scale(${qt.scale})`,te.style.animation="none";const tt=ct(I);I.style.transform=`rotate(${tt.rotate}deg)`,I.style.animation="none";const It=ct(U);U.style.transform=`rotate(${It.rotate}deg)`,U.style.animation="none",ys().then(()=>{if(!Ve)return;ee!==null&&Li(ee),qe!==null&&Li(qe),at!==null&&Li(at),Rt!==null&&Li(Rt),Ce!==null&&Li(Ce);const{rules:xn,names:Ht}=xA({time:he,extraTime:Et,delay:lt,currentColor:Le.color||"currentcolor",targetColor:x.dataset.activeColor,effectOpacity:qt.opacity||0,effectScale:qt.scale||0,circleLeftRotation:tt.rotate||0,circleRightRotation:It.rotate||0,circleClipPath:Tt.clipPath||"inset(0 0 0 50%)",circleOpacity:Tt.opacity||0});Ce=Ri(xn.main),Rt=Ri(xn.effect),at=Ri(xn.circleLeft),qe=Ri(xn.circleRight),ee=Ri(xn.circle),x.style.animation=Ht.main,te.style.animation=Ht.effect,I.style.animation=Ht.circleLeft,U.style.animation=Ht.circleRight,O.style.animation=Ht.circle})},vn=({time:me=mh}={time:mh})=>{if(!Ve)return;Ve=!1;const Ue=getComputedStyle(x);x.style.color=Ue.color,x.style.animation="none";const he=getComputedStyle(O);O.style.clipPath=he.clipPath,O.style.opacity=he.opacity,O.style.animation="none";const Et=ct(te);te.style.opacity=Et.opacity,te.style.transform=`scale(${Et.scale})`,te.style.animation="none";const lt=he.clipPath.slice(-2,-1)==="x",Le=ct(I,lt);I.style.transform=`rotate(${Le.rotate}deg)`,I.style.animation="none";const Tt=ct(U);U.style.transform=`rotate(${Tt.rotate}deg)`,U.style.animation="none",ys().then(()=>{st!==null&&Li(st),Qe!==null&&Li(Qe),xe!==null&&Li(xe),ce!==null&&Li(ce),ue!==null&&Li(ue);const{rules:qt,names:tt}=PA({time:me,currentColor:Ue.color||"currentcolor",targetColor:x.dataset.color,effectOpacity:Et.opacity||0,effectScale:Et.scale||0,circleLeftRotation:Le.rotate||0,circleRightRotation:Tt.rotate||0,circleClipPath:he.clipPath||"inset(0px)",circleOpacity:he.opacity||1});ue=Ri(qt.main),ce=Ri(qt.effect),xe=Ri(qt.circleLeft),Qe=Ri(qt.circleRight),st=Ri(qt.circle),x.style.animation=tt.main,te.style.animation=tt.effect,I.style.animation=tt.circleLeft,U.style.animation=tt.circleRight,O.style.animation=tt.circle})},Ut=()=>{p(Ee,Re)},ln=me=>{if(Fe){if(DC(me[0],me[1],Fe[0],Fe[1])>x6){Fe=me;const he=S(me);Ee.push(he),Re.push(he[0],he[1]),Ee.length>1&&Ut()}}else{$e||($e=!0,g()),Fe=me;const Ue=S(me);Ee=[Ue],Re=[Ue[0],Ue[1]]}},ft=mx(ln,bm,bm),kt=(me,Ue)=>{const he=At(me);return Ue?ft(he):ln(he)},jt=()=>{Ee=[],Re=[],Fe=void 0,Ut()},dt=me=>{Ot(me)},ut=()=>{K=!0,$e=!0,jt(),g()},Jt=()=>{Gt()},Zt=({merge:me=!1}={})=>{$e=!1;const Ue=[...Ee],he=[...Re];return ft.cancel(),jt(),Ue.length&&y(Ue,he,{merge:me}),Ue},yn=({onDraw:me=null,onStart:Ue=null,onEnd:he=null,enableInitiator:Et=null,initiatorParentElement:lt=null,longPressIndicatorParentElement:Le=null,minDelay:Tt=null,minDist:qt=null,pointNorm:tt=null}={})=>{p=hc(me,p),g=hc(Ue,g),y=hc(he,y),f=hc(Et,f),S=hc(tt,S),lt!==null&&lt!==d&&(d.removeChild(v),lt.appendChild(v),d=lt),Le!==null&&Le!==c&&(c.removeChild(x),Le.appendChild(x),c=Le),f?(v.addEventListener("click",dt),v.addEventListener("mousedown",ut),v.addEventListener("mouseleave",Jt)):(v.removeEventListener("mousedown",ut),v.removeEventListener("mouseleave",Jt))},Kn=()=>{d.removeChild(v),c.removeChild(x),window.removeEventListener("mouseup",wt),v.removeEventListener("click",dt),v.removeEventListener("mousedown",ut),v.removeEventListener("mouseleave",Jt)},E=()=>me=>x2(me,{clear:jt,destroy:Kn,end:Zt,extend:kt,set:yn,showInitiator:Ot,hideInitiator:Gt,showLongPressIndicator:Vt,hideLongPressIndicator:vn});return d.appendChild(v),c.appendChild(x),yn({onDraw:p,onStart:g,onEnd:y,enableInitiator:f,initiatorParentElement:d}),IC(s6("initiator",v),s6("longPressIndicator",x),E(),FC(bx))({})},IA=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,FA=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,DA=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,$A=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,jA=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,BA=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,zA=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,GA=function(){const t=(u,f,d,c,p)=>{const g=(c-f)*.5,y=(p-d)*.5;return(2*d-2*c+g+y)*u*u*u+(-3*d+3*c-2*g-y)*u*u+g*u+d},n=(u,f,d)=>{const c=d*u,p=Math.floor(c),g=c-p,y=f[Math.max(0,p-1)],S=f[p],v=f[Math.min(d,p+1)],_=f[Math.min(d,p+2)];return[t(g,y[0],S[0],v[0],_[0]),t(g,y[1],S[1],v[1],_[1])]},r=(u,f,d,c)=>(u-d)**2+(f-c)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(u,f,d)=>{let c=f[0],p=f[1],g=d[0]-c,y=d[1]-p;if(g!==0||y!==0){const S=((u[0]-c)*g+(u[1]-p)*y)/(g*g+y*y);S>1?(c=d[0],p=d[1]):S>0&&(c+=g*S,p+=y*S)}return g=u[0]-c,y=u[1]-p,g*g+y*y};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const o=(u,f,d,c,p)=>{let g=c,y;for(let S=f+1;S<d;S++){const v=i(u[S],u[f],u[d]);v>g&&(y=S,g=v)}g>c&&(y-f>1&&o(u,f,y,c,p),p.push(u[y]),d-y>1&&o(u,y,d,c,p))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const a=(u,f)=>{const d=u.length-1,c=[u[0]];return o(u,0,d,f,c),c.push(u[d]),c},l=(u,{maxIntPointsPerSegment:f=100,tolerance:d=.002}={})=>{const c=u.length,p=c-1,g=p*f+1,y=d**2;let S=[],v;for(let _=0;_<c-1;_++){let x=[u[_].slice(0,2)];v=u[_];for(let O=1;O<f;O++){const I=(_*f+O)/g,U=n(I,u,p);r(v[0],v[1],U[0],U[1])>y&&(x.push(U),v=U)}x.push(u[_+1]),x=a(x,y),S=S.concat(x.slice(0,x.length-1))}return S.push(u[u.length-1].slice(0,2)),S.flat()},s=u=>{const f={},d=!Number.isNaN(+u[0][5]);return u.forEach(c=>{const p=c[4];f[p]||(f[p]=[]),d?f[p][c[5]]=c:f[p].push(c)}),Object.entries(f).forEach(c=>{f[c[0]]=c[1].filter(p=>p),f[c[0]].reference=c[1][0]}),f};self.onmessage=function(f){(f.data.points?+f.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),f.data.points;const c=s(f.data.points);self.postMessage({points:Object.entries(c).reduce((p,g)=>(p[g[0]]=l(g[1],f.data.options),p[g[0]].reference=g[1].reference,p),{})})}},VA=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=$C(GA);i.onmessage=o=>{o.data.error?r(o.data.error):n(o.data.points),i.terminate()},i.postMessage({points:e,options:t})});var UA="1.8.5";const Lm={showRecticle:"showReticle",recticleColor:"reticleColor"},Pm=e=>{Object.keys(e).filter(t=>Lm[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${Lm[t]}" instead.`),e[Lm[t]]=e[t],delete e[t]})},Pi=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>wx.has(e)?"valueZ":Sx.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Om=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},HA=(e={})=>{const t=eC({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];Pm(e);let{renderer:o,backgroundColor:a=Sb,backgroundImage:l=Ob,canvas:s=document.createElement("canvas"),colorBy:u=dc,deselectOnDblClick:f=Nb,deselectOnEscape:d=Ib,lassoColor:c=XC,lassoLineWidth:p=qC,lassoMinDelay:g=KC,lassoMinDist:y=QC,lassoClearEvent:S=ZC,lassoInitiator:v=YC,lassoInitiatorParentElement:_=document.body,lassoOnLongPress:x=JC,lassoLongPressTime:O=dh,lassoLongPressAfterEffectTime:I=hh,lassoLongPressEffectDelay:U=ph,lassoLongPressRevertEffectTime:te=mh,keyMap:K=nb,mouseMode:$e=UC,showReticle:Ee=kb,reticleColor:Re=Mb,pointColor:Fe=xb,pointColorActive:Ve=_b,pointColorHover:Ce=wb,showPointConnections:Rt=Fb,pointConnectionColor:at=Eb,pointConnectionColorActive:qe=Cb,pointConnectionColorHover:ee=bb,pointConnectionColorBy:ue=Em,pointConnectionOpacity:ce=db,pointConnectionOpacityBy:xe=wm,pointConnectionOpacityActive:Qe=hb,pointConnectionSize:st=cb,pointConnectionSizeActive:wt=fb,pointConnectionSizeBy:At=_m,pointConnectionMaxIntPointsPerSegment:$t=Db,pointConnectionTolerance:ct=$b,pointSize:Ot=lb,pointSizeSelected:Gt=sb,pointSizeMouseDetection:Vt=jb,pointOutlineWidth:vn=ub,opacity:Ut=po,opacityBy:ln=Sm,opacityByDensityFill:ft=mb,opacityInactiveMax:kt=vb,opacityInactiveScale:jt=yb,sizeBy:dt=xm,height:ut=ob,width:Jt=ib}=e,Zt=Jt===po?1:Jt,yn=ut===po?1:ut;const{performanceMode:Kn=Bb,opacityByDensityDebounceTime:E=gb}=e;o||(o=rA({regl:e.regl,gamma:e.gamma})),a=Qr(a,!0),c=Qr(c,!0),Re=Qr(Re,!0);let me=!1,Ue=y6(a),he,Et,lt=!1,Le=null,Tt=[0,0],qt=-1,tt=[];const It=new Set,xn=new Set;let Ht=!1;const sn=new Set;let gn=0,cr=0,Qn=!1,gr=[],Tn,Fr,Bt=e.aspectRatio||rb,Mn,vt,Wt,tn,Nn,it,Ct,Mt,En,Cn=v6(K),Zn,or,en,Rn=!1,et=!0,vr=!1,ii;Fe=ga(Fe)?[...Fe]:[Fe],Ve=ga(Ve)?[...Ve]:[Ve],Ce=ga(Ce)?[...Ce]:[Ce],Fe=Fe.map(h=>Qr(h,!0)),Ve=Ve.map(h=>Qr(h,!0)),Ce=Ce.map(h=>Qr(h,!0)),Ut=!Array.isArray(Ut)&&Number.isNaN(+Ut)?Fe[0][3]:Ut,Ut=pa(Ut,ma,{minLength:1})?[...Ut]:[Ut],Ot=pa(Ot,ma,{minLength:1})?[...Ot]:[Ot];let Ko=ym/Ot[0];at==="inherit"?at=[...Fe]:(at=ga(at)?[...at]:[at],at=at.map(h=>Qr(h,!0))),qe==="inherit"?qe=[...Ve]:(qe=ga(qe)?[...qe]:[qe],qe=qe.map(h=>Qr(h,!0))),ee==="inherit"?ee=[...Ce]:(ee=ga(ee)?[...ee]:[ee],ee=ee.map(h=>Qr(h,!0))),ce==="inherit"?ce=[...Ut]:ce=pa(ce,ma,{minLength:1})?[...ce]:[ce],st==="inherit"?st=[...Ot]:st=pa(st,ma,{minLength:1})?[...st]:[st],u=Pi(u,dc),ln=Pi(ln,Sm,{allowDensity:!0}),dt=Pi(dt,xm),ue=Pi(ue,Em,{allowSegment:!0}),xe=Pi(xe,wm,{allowSegment:!0}),At=Pi(At,_m,{allowSegment:!0});let Dr,Tr,$r,an,Ln=0,yr=0,jr,wo,oi,Rr,Lr,So,q,Ie=!1,yt=null,dn,In,ai=Ee,li,Dn=0,si,Qo=0,du=!1,Xr=!1,to=!1,no=Ss,Eo=Ss,ar,bi=!1,fr=e.xScale||null,Hn=e.yScale||null,Zo=0,Vl=0,Ul=0,Hl=0;fr&&(Zo=fr.domain()[0],Vl=fr.domain()[1]-fr.domain()[0],fr.range([0,Zt])),Hn&&(Ul=Hn.domain()[0],Hl=Hn.domain()[1]-Hn.domain()[0],Hn.range([yn,0]));const Sf=h=>-1+h/Zt*2,qr=h=>1+h/yn*-2,Br=()=>[Sf(i[0]),qr(i[1])],ui=(h,$)=>{const H=[h,$,1,1],fe=Gg(n,Vr(n,Mn,Vr(n,he.view,Wt)));return k0(H,H,fe),H.slice(0,2)},Ef=(h=0)=>{const $=Ja(),fe=(or[1]-en[1])/s.height;return(En*$+h)*fe},hu=()=>Ht?Tn.points.filter((h,$)=>sn.has($)):Tn.points,Wl=(h,$,H,fe)=>{const ke=Tn.range(h,$,H,fe);return Ht?ke.filter(Ye=>sn.has(Ye)):ke},pu=()=>{const[h,$]=Br(),[H,fe]=ui(h,$),ke=Ef(4),Ye=Wl(H-ke,fe-ke,H+ke,fe+ke);let rt=ke,Nt=-1;return Ye.forEach(un=>{const[rn,Wn]=Tn.points[un],pn=Cm(rn,Wn,H,fe);pn<rt&&(rt=pn,Nt=un)}),Nt},h1=(h,$)=>{gr=h,Et.setPoints($),t.publish("lassoExtend",{coordinates:h})},p1=h=>{const $=Hb(h);if(!Wb($))return[];const H=Wl(...$),fe=[];return H.forEach(ke=>{Zb(h,Tn.points[ke])&&fe.push(ke)}),fe},Jo=()=>{gr=[],Et&&Et.clear()},Xa=h=>h&&h.length>4,Co=(h,$)=>{if(it||!Rt||!Xa(Tn.points[h[0]]))return;const H=$===0,fe=$===1?rt=>xn.add(rt):Is,ke=Object.keys(h.reduce((rt,Nt)=>{const un=Tn.points[Nt],Wn=Array.isArray(un[4])?un[4][0]:un[4];return rt[Wn]=!0,rt},{})),Ye=tn.getData().opacities;ke.filter(rt=>!xn.has(+rt)).forEach(rt=>{const Nt=Nn[rt][0],un=Nn[rt][2],rn=Nn[rt][3],Wn=Nt*4+rn*2,pn=Wn+un*2+4;Ye.__original__===void 0&&(Ye.__original__=Ye.slice());for(let on=Wn;on<pn;on++)Ye[on]=H?Ye.__original__[on]:Qe;fe(rt)}),tn.getBuffer().opacities.subdata(Ye,0)},Xl=h=>[h%Ln/Ln+yr,Math.floor(h/Ln)/Ln+yr],m1=h=>Ht&&!sn.has(h),ql=({preventEvent:h=!1}={})=>{S===Ug&&Jo(),tt.length&&(h||t.publish("deselect"),xn.clear(),Co(tt,0),tt=[],It.clear(),et=!0)},ea=(h,{merge:$=!1,preventEvent:H=!1}={})=>{const fe=Array.isArray(h)?h:[h],ke=[...tt];if($){if(tt=NC(tt,fe),ke.length===tt.length){et=!0;return}}else{if(tt&&tt.length&&Co(tt,0),ke.length>0&&fe.length===0){ql({preventEvent:H});return}tt=fe}if(kC(ke,tt)){et=!0;return}const Ye=[];It.clear(),xn.clear();for(let rt=tt.length-1;rt>=0;rt--){const Nt=tt[rt];if(Nt<0||Nt>=gn||m1(Nt)){tt.splice(rt,1);continue}It.add(Nt),Ye.push.apply(Ye,Xl(Nt))}wo({usage:"dynamic",type:"float",data:Ye}),Co(tt,1),H||t.publish("select",{points:tt}),et=!0},qa=(h,{showReticleOnce:$=!1,preventEvent:H=!1}={})=>{let fe=!1;if(h>=0&&h<gn){fe=!0;const ke=ar,Ye=h!==ar;+ke>=0&&Ye&&!It.has(ke)&&Co([ke],0),ar=h,oi.subdata(Xl(h)),It.has(h)||Co([h],2),Ye&&!H&&t.publish("pointover",ar)}else fe=+ar>=0,fe&&(It.has(ar)||Co([ar],0),H||t.publish("pointout",ar)),ar=void 0;fe&&(et=!0,vr=$)},mu=h=>{const $=s.getBoundingClientRect();return i[0]=h.clientX-$.left,i[1]=h.clientY-$.top,[...i]},Jn=bx(s,{onStart:()=>{he.config({isFixed:!0}),lt=!0,Qn=!0,Jo(),qt>=0&&(clearTimeout(qt),qt=-1),t.publish("lassoStart")},onDraw:h1,onEnd:(h,$,{merge:H=!1}={})=>{he.config({isFixed:!1}),gr=[...h];const fe=p1($);ea(fe,{merge:H}),t.publish("lassoEnd",{coordinates:gr}),S===w2&&Jo()},enableInitiator:v,initiatorParentElement:_,pointNorm:([h,$])=>ui(Sf(h),qr($))}),Yl=()=>$e===vx,Ya=(h,$)=>{switch(Cn[$]){case E2:return h.altKey;case C2:return h.metaKey;case xx:return h.ctrlKey;case _x:return h.metaKey;case b2:return h.shiftKey;default:return!1}},Cf=h=>document.elementsFromPoint(h.clientX,h.clientY).some($=>$===s),gu=h=>{!Xr||h.buttons!==1||(lt=!0,Le=performance.now(),Tt=mu(h),Qn=Yl()||Ya(h,S2),!Qn&&x&&(Jn.showLongPressIndicator(h.clientX,h.clientY,{time:O,extraTime:I,delay:U}),qt=setTimeout(()=>{qt=-1,Qn=!0},O)))},vu=h=>{Xr&&(lt=!1,qt>=0&&(clearTimeout(qt),qt=-1),Qn&&(h.preventDefault(),Qn=!1,Jn.end({merge:Ya(h,vh)})),x&&Jn.hideLongPressIndicator({time:te}))},Kl=h=>{if(!Xr)return;h.preventDefault();const $=mu(h);if(Cm(...$,...Tt)>=y)return;const H=performance.now()-Le;if(!v||H<Gb){const fe=pu();fe>=0?(tt.length&&S===Ug&&Jo(),ea([fe],{merge:Ya(h,vh)})):Zn||(Zn=setTimeout(()=>{Zn=null,Jn.showInitiator(h)},zb))}},Ql=h=>{Jn.hideInitiator(),Zn&&(clearTimeout(Zn),Zn=null),f&&(h.preventDefault(),ql())},$i=h=>{if(to||(bi=Cf(h),to=!0),!Xr||!bi&&!lt)return;const $=mu(h),fe=Cm(...$,...Tt)>=y;bi&&!Qn&&qa(pu()),Qn?(h.preventDefault(),Jn.extend(h,!0)):lt&&x&&fe&&Jn.hideLongPressIndicator({time:te}),qt>=0&&fe&&(clearTimeout(qt),qt=-1),lt&&(et=!0)},Ka=()=>{ar=void 0,bi=!1,to=!1,Xr&&(+ar>=0&&!It.has(ar)&&Co([ar],0),vu(),et=!0)},Zl=()=>{const h=Math.max(Ot.length,Ut.length);Qo=Math.max(2,Math.ceil(Math.sqrt(h)));const $=new Float32Array(Qo**2*4);for(let H=0;H<h;H++){$[H*4]=Ot[H]||0,$[H*4+1]=Math.min(1,Ut[H]||0);const fe=Number((Ve[H]||Ve[0])[3]);$[H*4+2]=Math.min(1,Number.isNaN(fe)?1:fe);const ke=Number((Ce[H]||Ce[0])[3]);$[H*4+3]=Math.min(1,Number.isNaN(ke)?1:ke)}return o.regl.texture({data:$,shape:[Qo,Qo,4],type:"float"})},yu=(h=Fe,$=Ve,H=Ce)=>{const fe=h.length,ke=$.length,Ye=H.length,rt=[];if(fe===ke&&ke===Ye)for(let Nt=0;Nt<fe;Nt++)rt.push(h[Nt],$[Nt],H[Nt],a);else for(let Nt=0;Nt<fe;Nt++){const un=[h[Nt][0],h[Nt][1],h[Nt][2],1],rn=u===dc?$[0]:un,Wn=u===dc?H[0]:un;rt.push(h[Nt],rn,Wn,a)}return rt},xu=()=>{const h=yu(),$=h.length;Dn=Math.max(2,Math.ceil(Math.sqrt($)));const H=new Float32Array(Dn**2*4);return h.forEach((fe,ke)=>{H[ke*4]=fe[0],H[ke*4+1]=fe[1],H[ke*4+2]=fe[2],H[ke*4+3]=fe[3]}),o.regl.texture({data:H,shape:[Dn,Dn,4],type:"float"})},g1=(h,$)=>{vt[0]=h/Fr,vt[5]=$},_u=()=>{Fr=Zt/yn,Mn=O0([],[1/Fr,1,1]),vt=O0([],[1/Fr,1,1]),Wt=O0([],[Bt,1,1])},v1=h=>{+h<=0||(Bt=h)},wu=(h,$)=>H=>{if(!H||!H.length)return;const ke=[...h()];let Ye=ga(H)?H:[H];Ye=Ye.map(rt=>Qr(rt,!0)),li&&li.destroy();try{$(Ye),li=xu()}catch{console.error("Invalid colors. Switching back to default colors."),$(ke),li=xu()}},y1=wu(()=>Fe,h=>{Fe=h}),x1=wu(()=>Ve,h=>{Ve=h}),ro=wu(()=>Ce,h=>{Ce=h}),_1=()=>{const h=ui(-1,-1),$=ui(1,1),H=(h[0]+1)/2,fe=($[0]+1)/2,ke=(h[1]+1)/2,Ye=($[1]+1)/2,rt=[Zo+H*Vl,Zo+fe*Vl],Nt=[Ul+ke*Hl,Ul+Ye*Hl];return[rt,Nt]},bo=()=>{if(!fr&&!Hn)return;const[h,$]=_1();fr&&fr.domain(h),Hn&&Hn.domain($)},Ao=h=>{yn=Math.max(1,h),s.height=Math.floor(yn*window.devicePixelRatio),Hn&&(Hn.range([yn,0]),bo())},w1=h=>{if(h===po){ut=h,s.style.height="100%",window.requestAnimationFrame(()=>{s&&Ao(s.getBoundingClientRect().height)});return}!+h||+h<=0||(ut=+h,Ao(ut),s.style.height=`${ut}px`)},io=()=>{En=Vt,Vt===po&&(En=Array.isArray(Ot)?MC(Ot):Ot)},bf=h=>{pa(h,ma,{minLength:1})&&(Ot=[...h]),u0(+h)&&(Ot=[+h]),Ko=ym/Ot[0],si=Zl(),io()},na=h=>{!+h||+h<0||(Gt=+h)},Af=h=>{!+h||+h<0||(vn=+h)},ji=h=>{Zt=Math.max(1,h),s.width=Math.floor(Zt*window.devicePixelRatio),fr&&(fr.range([0,Zt]),bo())},Su=h=>{if(h===po){Jt=h,s.style.width="100%",window.requestAnimationFrame(()=>{s&&ji(s.getBoundingClientRect().width)});return}!+h||+h<=0||(Jt=+h,ji(Jt),s.style.width=`${Zt}px`)},S1=h=>{pa(h,ma,{minLength:1})&&(Ut=[...h]),u0(+h)&&(Ut=[+h]),si=Zl()},Eu=h=>{switch(h){case"valueZ":return no;case"valueW":return Eo;default:return null}},Cu=(h,$)=>{switch(h){case fo:return H=>Math.round(H*($.length-1));case Ss:default:return Is}},Tf=h=>{u=Pi(h,dc)},E1=h=>{ln=Pi(h,Sm,{allowDensity:!0})},C1=h=>{dt=Pi(h,xm)},Rf=h=>{ue=Pi(h,Em,{allowSegment:!0})},wn=h=>{xe=Pi(h,wm,{allowSegment:!0})},Lf=h=>{At=Pi(h,_m,{allowSegment:!0})},b1=()=>[s.width,s.height],Ai=()=>l,bu=()=>li,Jl=()=>Dn,To=()=>.5/Dn,Au=()=>window.devicePixelRatio,es=()=>jr,Ro=()=>wo,ts=()=>si,Pf=()=>Qo,Tu=()=>.5/Qo,Ru=()=>0,A1=()=>$r||Dr,T1=()=>Ln,R1=()=>.5/Ln,Of=()=>vt,ns=()=>he.view,Qa=()=>Wt,Za=()=>Vr(r,vt,Vr(r,he.view,Wt)),Ja=()=>he.scaling[0]>1?Math.asinh(c0(1,he.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:c0(Ko,he.scaling[0])*window.devicePixelRatio,ra=()=>Ht?sn.size:gn,Lo=()=>tt.length,Lu=()=>Lo()>0?kt:1,Pu=()=>Lo()>0?jt:1,Ou=()=>+(u==="valueZ"),kf=()=>+(u==="valueW"),Mf=()=>+(ln==="valueZ"),Nf=()=>+(ln==="valueW"),If=()=>+(ln==="density"),Ff=()=>+(dt==="valueZ"),Df=()=>+(dt==="valueW"),$f=()=>u==="valueZ"?no===fo?Fe.length-1:1:Eo===fo?Fe.length-1:1,jf=()=>ln==="valueZ"?no===fo?Ut.length-1:1:Eo===fo?Ut.length-1:1,ia=()=>dt==="valueZ"?no===fo?Ot.length-1:1:Eo===fo?Ot.length-1:1,ku=h=>{if(ln!=="density")return 1;const $=Ja(),H=Ot[0]*$,fe=2/(2/he.view[0])*(2/(2/he.view[5])),ke=h.viewportHeight,Ye=h.viewportWidth;let rt=ft*Ye*ke/(cr*H*H)*g6(1,fe);rt*=Kn?1:1/(.25*Math.PI);const Nt=c0(ym,H)+.5;return rt*=(H/Nt)**2,g6(1,c0(0,rt))},Mu=o.regl({framebuffer:()=>an,vert:zA,frag:BA,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>Tr,endStateTex:()=>Dr,t:(h,$)=>$.t},count:3}),ci=(h,$,H,fe=jC,ke=Lu,Ye=Pu)=>o.regl({frag:Kn?$A:DA,vert:jA(fe),blend:{enable:!Kn,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:H,size:2}},uniforms:{resolution:b1,modelViewProjection:Za,devicePixelRatio:Au,pointScale:Ja,encodingTex:ts,encodingTexRes:Pf,encodingTexEps:Tu,pointOpacityMax:ke,pointOpacityScale:Ye,pointSizeExtra:h,globalState:fe,colorTex:bu,colorTexRes:Jl,colorTexEps:To,stateTex:A1,stateTexRes:T1,stateTexEps:R1,isColoredByZ:Ou,isColoredByW:kf,isOpacityByZ:Mf,isOpacityByW:Nf,isOpacityByDensity:If,isSizedByZ:Ff,isSizedByW:Df,colorMultiplicator:$f,opacityMultiplicator:jf,opacityDensity:ku,sizeMultiplicator:ia,numColorStates:zC},count:$,primitive:"points"}),L1=ci(Ru,ra,es),P1=ci(Ru,()=>1,()=>oi,BC,()=>1,()=>1),O1=ci(()=>(Gt+vn*2)*window.devicePixelRatio,Lo,Ro,vm,()=>1,()=>1),Nu=ci(()=>(Gt+vn)*window.devicePixelRatio,Lo,Ro,u6,()=>1,()=>1),k1=ci(()=>Gt*window.devicePixelRatio,Lo,Ro,vm,()=>1,()=>1),M1=()=>{O1(),Nu(),k1()},N1=o.regl({frag:IA,vert:FA,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:Za,texture:Ai},count:6}),Iu=o.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>gr},uniforms:{modelViewProjection:Za,color:()=>c},elements:()=>Array.from({length:gr.length-2},(h,$)=>[0,$+1,$+2])}),I1=()=>{if(!(ar>=0))return;const[h,$]=Tn.points[ar].slice(0,2),H=[h,$,0,1];Vr(n,vt,Vr(n,he.view,Wt)),k0(H,H,n),Ct.setPoints([-1,H[1],1,H[1]]),Mt.setPoints([H[0],1,H[0],-1]),Ct.draw(),Mt.draw(),ci(()=>(Gt+vn*2)*window.devicePixelRatio,()=>1,oi,vm)(),ci(()=>(Gt+vn)*window.devicePixelRatio,()=>1,oi,u6)()},rs=h=>{const $=new Float32Array(h*2);let H=0;for(let fe=0;fe<h;++fe){const ke=Xl(fe);$[H]=ke[0],$[H+1]=ke[1],H+=2}return $},Fu=(h,$={})=>{const H=h.length;Ln=Math.max(2,Math.ceil(Math.sqrt(H))),yr=.5/Ln;const fe=new Float32Array(Ln**2*4);let ke=!0,Ye=!0,rt=0,Nt=0,un=0;for(let rn=0;rn<H;++rn)rt=rn*4,fe[rt]=h[rn][0],fe[rt+1]=h[rn][1],Nt=h[rn][2]||0,un=h[rn][3]||0,fe[rt+2]=Nt,fe[rt+3]=un,ke&&(ke=Number.isInteger(Nt)),Ye&&(Ye=Number.isInteger(un));return $.z&&d6.includes($.z)?no=$.z:no=ke?Ss:fo,$.w&&d6.includes($.w)?Eo=$.w:Eo=Ye?Ss:fo,o.regl.texture({data:fe,shape:[Ln,Ln,4],type:"float"})},Bf=(h,$={})=>{if(!Dr)return!1;if(Ie){const H=Tr;Tr=$r,H.destroy()}else Tr=Dr;return $r=Fu(h,$),an=o.regl.framebuffer({color:$r,depth:!1,stencil:!1}),Dr=void 0,!0},Du=()=>!!(Tr&&$r),F1=()=>{Tr&&(Tr.destroy(),Tr=void 0),$r&&($r.destroy(),$r=void 0)},el=(h,$={})=>{Xr=!1,gn=h.length,cr=gn,Dr&&Dr.destroy(),Dr=Fu(h,$),jr({usage:"static",type:"float",data:rs(gn)}),Tn=new yC(h,H=>H[0],H=>H[1],16),Xr=!0},zf=(h,$)=>{Rr=he.target,Lr=h,So=he.distance[0],q=$},D1=()=>Rr!==void 0&&Lr!==void 0&&So!==void 0&&q!==void 0,$1=()=>{Rr=void 0,Lr=void 0,So=void 0,q=void 0},j1=h=>{const $=ue==="inherit"?u:ue;if($==="segment"){const H=at.length-1;return H<1?[]:h.reduce((fe,ke,Ye)=>{let rt=0;const Nt=[];for(let rn=2;rn<ke.length;rn+=2){const Wn=Math.sqrt((ke[rn-2]-ke[rn])**2+(ke[rn-1]-ke[rn+1])**2);Nt.push(Wn),rt+=Wn}fe[Ye]=[0];let un=0;for(let rn=0;rn<ke.length/2-1;rn++)un+=Nt[rn],fe[Ye].push(Math.floor(un/rt*H)*4);return fe},[])}if($){const H=Om($),fe=Cu(Eu($),ue==="inherit"?Fe:at);return Nn.reduce((ke,[Ye,rt])=>(ke[Ye]=fe(rt[H])*4,ke),[])}return Array(Nn.length).fill(0)},B1=()=>{const h=xe==="inherit"?ln:xe;if(h==="segment"){const $=ce.length-1;return $<1?[]:Nn.reduce((H,[fe,ke,Ye])=>(H[fe]=l6(Ye,rt=>ce[Math.floor(rt/(Ye-1)*$)]),H),[])}if(h){const $=Om(h),H=xe==="inherit"?Ut:ce,fe=Cu(Eu(h),H);return Nn.reduce((ke,[Ye,rt])=>(ke[Ye]=H[fe(rt[$])],ke),[])}},z1=()=>{const h=At==="inherit"?dt:At;if(h==="segment"){const $=st.length-1;return $<1?[]:Nn.reduce((H,[fe,ke,Ye])=>(H[fe]=l6(Ye,rt=>st[Math.floor(rt/(Ye-1)*$)]),H),[])}if(h){const $=Om(h),H=At==="inherit"?Ot:st,fe=Cu(Eu(h),H);return Nn.reduce((ke,[Ye,rt])=>(ke[Ye]=H[fe(rt[$])],ke),[])}},G1=h=>{Nn=[];let $=0;Object.keys(h).forEach((H,fe)=>{Nn[H]=[fe,h[H].reference,h[H].length/2,$],$+=h[H].length/2})},oa=h=>new Promise($=>{tn.setPoints([]),!h||!h.length?$():(it=!0,VA(h,{maxIntPointsPerSegment:$t,tolerance:ct}).then(H=>{G1(H);const fe=Object.values(H);tn.setPoints(fe.length===1?fe[0]:fe,{colorIndices:j1(fe),opacities:B1(),widths:z1()}),it=!1,$()}))}),tl=({preventEvent:h=!1}={})=>(Ht=!1,sn.clear(),jr.subdata(rs(gn)),new Promise($=>{const H=()=>{t.subscribe("draw",()=>{h||t.publish("unfilter"),$()},1),et=!0};Rt||Xa(Tn.points[0])?oa(hu()).then(()=>{h||t.publish("pointConnectionsDraw"),H()}):H()})),Gf=(h,{preventEvent:$=!1}={})=>{const H=Array.isArray(h)?h:[h];Ht=!0,sn.clear();const fe=[],ke=[];for(let Ye=H.length-1;Ye>=0;Ye--){const rt=H[Ye];if(rt<0||rt>=gn){H.splice(Ye,1);continue}sn.add(rt),fe.push.apply(fe,Xl(rt)),It.has(rt)&&ke.push(rt)}return jr.subdata(fe),ea(ke,{preventEvent:$}),sn.has(ar)||qa(-1,{preventEvent:$}),new Promise(Ye=>{const rt=()=>{t.subscribe("draw",()=>{$||t.publish("filter",{points:H}),Ye()},1),et=!0};Rt||Xa(Tn.points[0])?oa(hu()).then(()=>{$||t.publish("pointConnectionsDraw"),ea(ke,{preventEvent:$}),rt()}):rt()})},nl=()=>Wl(en[0],en[1],or[0],or[1]),aa=mx(()=>{cr=nl().length},E),Vf=h=>{const[$,H]=Rr,[fe,ke]=Lr,Ye=1-h,rt=$*Ye+fe*h,Nt=H*Ye+ke*h,un=So*Ye+q*h;he.lookAt([rt,Nt],un)},Uf=()=>Du(),Hf=()=>D1(),Wf=(h,$)=>{yt||(yt=performance.now());const H=performance.now()-yt,fe=nA($(H/h),0,1);return Uf()&&Mu({t:fe}),Hf()&&Vf(fe),H<h},Xf=()=>{Ie=!1,yt=null,dn=void 0,In=void 0,Ee=ai,F1(),$1(),t.publish("transitionEnd")},is=({duration:h=500,easing:$=f6})=>{Ie&&t.publish("transitionEnd"),Ie=!0,yt=null,dn=h,In=Hg($)?HC[$]||f6:$,ai=Ee,Ee=!1,t.publish("transitionStart")},V1=h=>new Promise(($,H)=>{if(!h||Array.isArray(h))$(h);else{const fe=Array.isArray(h.x)||ArrayBuffer.isView(h.x)?h.x.length:0,ke=(Array.isArray(h.x)||ArrayBuffer.isView(h.x))&&(pn=>h.x[pn]),Ye=(Array.isArray(h.y)||ArrayBuffer.isView(h.y))&&(pn=>h.y[pn]),rt=(Array.isArray(h.line)||ArrayBuffer.isView(h.line))&&(pn=>h.line[pn]),Nt=(Array.isArray(h.lineOrder)||ArrayBuffer.isView(h.lineOrder))&&(pn=>h.lineOrder[pn]),un=Object.keys(h),rn=(()=>{const pn=un.find(on=>wx.has(on));return pn&&(Array.isArray(h[pn])||ArrayBuffer.isView(h[pn]))&&(on=>h[pn][on])})(),Wn=(()=>{const pn=un.find(on=>Sx.has(on));return pn&&(Array.isArray(h[pn])||ArrayBuffer.isView(h[pn]))&&(on=>h[pn][on])})();ke&&Ye&&rn&&Wn&&rt&&Nt?$(h.x.map((pn,on)=>[pn,Ye(on),rn(on),Wn(on),rt(on),Nt(on)])):ke&&Ye&&rn&&Wn&&rt?$(Array.from({length:fe},(pn,on)=>[ke(on),Ye(on),rn(on),Wn(on),rt(on)])):ke&&Ye&&rn&&Wn?$(Array.from({length:fe},(pn,on)=>[ke(on),Ye(on),rn(on),Wn(on)])):ke&&Ye&&rn?$(Array.from({length:fe},(pn,on)=>[ke(on),Ye(on),rn(on)])):ke&&Ye?$(Array.from({length:fe},(pn,on)=>[ke(on),Ye(on)])):H(new Error("You need to specify at least x and y"))}}),la=(h,$={})=>me?Promise.reject(new Error("The instance was already destroyed")):V1(h).then(H=>new Promise(fe=>{if(me){fe();return}let ke=!1;(!$.preventFilterReset||(H==null?void 0:H.length)!==gn)&&(Ht=!1,sn.clear());const Ye=H&&Xa(H[0])&&(Rt||$.showPointConnectionsOnce),{zDataType:rt,wDataType:Nt}=$;H&&($.transition&&(H.length===gn?ke=Bf(H,{z:rt,w:Nt}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),el(H,{z:rt,w:Nt}),$.hover!==void 0&&qa($.hover,{preventEvent:!0}),$.select!==void 0&&ea($.select,{preventEvent:!0}),$.filter!==void 0&&Gf($.filter,{preventEvent:!0}),Ye&&oa(H).then(()=>{t.publish("pointConnectionsDraw"),et=!0,vr=$.showReticleOnce})),$.transition&&ke?(Ye?Promise.all([new Promise(un=>{t.subscribe("transitionEnd",()=>{et=!0,vr=$.showReticleOnce,un()},1)}),new Promise(un=>{t.subscribe("pointConnectionsDraw",un,1)})]).then(fe):t.subscribe("transitionEnd",()=>{et=!0,vr=$.showReticleOnce,fe()},1),is({duration:$.transitionDuration,easing:$.transitionEasing})):(Ye?Promise.all([new Promise(un=>{t.subscribe("draw",un,1)}),new Promise(un=>{t.subscribe("pointConnectionsDraw",un,1)})]).then(fe):t.subscribe("draw",fe,1),et=!0,vr=$.showReticleOnce)})),er=h=>(...$)=>{const H=h(...$);return et=!0,H},qf=h=>{let $=1/0,H=-1/0,fe=1/0,ke=-1/0;for(let Ye=0;Ye<h.length;Ye++){const[rt,Nt]=Tn.points[h[Ye]];$=Math.min($,rt),H=Math.max(H,rt),fe=Math.min(fe,Nt),ke=Math.max(ke,Nt)}return{x:$,y:fe,width:H-$,height:ke-fe}},$u=(h,$={})=>new Promise(H=>{const fe=[h.x+h.width/2,h.y+h.height/2],ke=2*Math.atan(1),Ye=h.height*Fr>h.width?h.height/2/Math.tan(ke/2):h.width/2/Math.tan(ke*Fr/2);$.transition?(he.config({isFixed:!0}),zf(fe,Ye),t.subscribe("transitionEnd",()=>{H(),he.config({isFixed:!1})},1),is({duration:$.transitionDuration,easing:$.transitionEasing})):(he.lookAt(fe,Ye),t.subscribe("draw",H,1),et=!0)}),Po=(h,$={})=>{if(!Xr)return Promise.reject(new Error(h6));const H=qf(h),fe=H.x+H.width/2,ke=H.y+H.height/2,Ye=Ef(),rt=1+($.padding||0),Nt=Math.max(H.width,Ye)*rt,un=Math.max(H.height,Ye)*rt,rn=fe-Nt/2,Wn=ke-un/2;return $u({x:rn,y:Wn,width:Nt,height:un},$)},ju=(h,$,H={})=>new Promise(fe=>{H.transition?(he.config({isFixed:!0}),zf(h,$),t.subscribe("transitionEnd",()=>{fe(),he.config({isFixed:!1})},1),is({duration:H.transitionDuration,easing:H.transitionEasing})):(he.lookAt(h,$),t.subscribe("draw",fe,1),et=!0)}),Yf=(h={})=>ju([0,0],1,h),U1=h=>{if(!Xr)throw new Error(h6);const $=Tn.points[h];if(!$)return;const H=[$[0],$[1],0,1];Vr(n,Mn,Vr(n,he.view,Wt)),k0(H,H,n);const fe=Zt*(H[0]+1)/2,ke=yn*(.5-H[1]/2);return[fe,ke]},Bu=()=>{tn.setStyle({color:yu(at,qe,ee),opacity:ce===null?null:ce[0],width:st[0]})},Kf=()=>{const h=Math.round(Ue)>.5?0:255;Jn.initiator.style.border=`1px dashed rgba(${h}, ${h}, ${h}, 0.33)`,Jn.initiator.style.background=`rgba(${h}, ${h}, ${h}, 0.1)`},Qf=()=>{const h=Math.round(Ue)>.5?0:255;Jn.longPressIndicator.style.color=`rgb(${h}, ${h}, ${h})`,Jn.longPressIndicator.dataset.color=`rgb(${h}, ${h}, ${h})`;const $=c.map(H=>Math.round(H*255));Jn.longPressIndicator.dataset.activeColor=`rgb(${$[0]}, ${$[1]}, ${$[2]})`},zu=h=>{h&&(a=Qr(h,!0),Ue=y6(a),Kf(),Qf())},Zf=h=>{h?Hg(h)?m6(o.regl,h).then($=>{l=$,et=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${h}`),l=null}):h._reglType==="texture2d"?l=h:l=null:l=null},H1=h=>{h>0&&he.lookAt(he.target,h,he.rotation)},Jf=h=>{h!==null&&he.lookAt(he.target,he.distance[0],h)},ed=h=>{h&&he.lookAt(h,he.distance[0],he.rotation)},td=h=>{h&&he.setView(h)},os=h=>{if(!h)return;c=Qr(h,!0),Et.setStyle({color:c});const $=c.map(H=>Math.round(H*255));Jn.longPressIndicator.dataset.activeColor=`rgb(${$[0]}, ${$[1]}, ${$[2]})`},W1=h=>{Number.isNaN(+h)||+h<1||(p=+h,Et.setStyle({width:p}))},oo=h=>{+h&&(g=+h,Jn.set({minDelay:g}))},as=h=>{+h&&(y=+h,Jn.set({minDist:y}))},nd=h=>{S=p6(WC,S)(h)},rd=h=>{v=!!h,Jn.set({enableInitiator:v})},id=h=>{_=h,Jn.set({startInitiatorParentElement:_})},od=h=>{x=!!h},ad=h=>{O=Number(h)},ld=h=>{I=Number(h)},sd=h=>{U=Number(h)},ud=h=>{te=Number(h)},cd=h=>{K=Object.entries(h).reduce(($,[H,fe])=>(tb.includes(H)&&eb.includes(fe)&&($[H]=fe),$),{}),Cn=v6(K),Cn[gh]?he.config({isRotate:!0,mouseDownMoveModKey:Cn[gh]}):he.config({isRotate:!1})},di=h=>{$e=p6(VC,_2)(h),he.config({defaultMouseDownMoveAction:$e===yx?"rotate":"pan"})},fd=h=>{h!==null&&(Ee=h)},X1=h=>{h&&(Re=Qr(h,!0),Ct.setStyle({color:Re}),Mt.setStyle({color:Re}))},Bi=h=>{h&&(fr=h,Zo=h.domain()[0],Vl=h?h.domain()[1]-h.domain()[0]:0,fr.range([0,Zt]),bo())},Gu=h=>{h&&(Hn=h,Ul=Hn.domain()[0],Hl=Hn?Hn.domain()[1]-Hn.domain()[0]:0,Hn.range([yn,0]),bo())},Oo=h=>{f=!!h},ls=h=>{d=!!h},dd=h=>{Rt=!!h,Rt?Xa(Tn.points[0])&&oa(hu()).then(()=>{t.publish("pointConnectionsDraw"),et=!0}):oa()},ss=(h,$)=>H=>{if(H==="inherit")h([...$()]);else{const fe=ga(H)?H:[H];h(fe.map(ke=>Qr(ke,!0)))}Bu()},hd=ss(h=>{at=h},()=>Fe),pd=ss(h=>{qe=h},()=>Ve),md=ss(h=>{ee=h},()=>Ce),q1=h=>{pa(h,ma,{minLength:1})&&(ce=[...h]),u0(+h)&&(ce=[+h]),at=at.map($=>($[3]=Number.isNaN(+ce[0])?$[3]:+ce[0],$)),Bu()},Y1=h=>{!Number.isNaN(+h)&&+h&&(Qe=+h)},K1=h=>{pa(h,ma,{minLength:1})&&(st=[...h]),u0(+h)&&(st=[+h]),Bu()},Q1=h=>{!Number.isNaN(+h)&&+h&&(wt=Math.max(0,h))},Z1=h=>{$t=Math.max(0,h)},J1=h=>{ct=Math.max(0,h)},ep=h=>{Vt=h,io()},gd=h=>{ft=+h},vd=h=>{kt=+h},tp=h=>{jt=+h},np=h=>{o.gamma=h},Vu=h=>{if(Pm({property:!0}),h==="aspectRatio")return Bt;if(h==="background"||h==="backgroundColor")return a;if(h==="backgroundImage")return l;if(h==="camera")return he;if(h==="cameraTarget")return he.target;if(h==="cameraDistance")return he.distance[0];if(h==="cameraRotation")return he.rotation;if(h==="cameraView")return he.view;if(h==="canvas")return s;if(h==="colorBy")return u;if(h==="sizeBy")return dt;if(h==="deselectOnDblClick")return f;if(h==="deselectOnEscape")return d;if(h==="height")return ut;if(h==="lassoColor")return c;if(h==="lassoLineWidth")return p;if(h==="lassoMinDelay")return g;if(h==="lassoMinDist")return y;if(h==="lassoClearEvent")return S;if(h==="lassoInitiator")return v;if(h==="lassoInitiatorElement")return Jn.initiator;if(h==="lassoInitiatorParentElement")return _;if(h==="keyMap")return{...K};if(h==="mouseMode")return $e;if(h==="opacity")return Ut.length===1?Ut[0]:Ut;if(h==="opacityBy")return ln;if(h==="opacityByDensityFill")return ft;if(h==="opacityByDensityDebounceTime")return E;if(h==="opacityInactiveMax")return kt;if(h==="opacityInactiveScale")return jt;if(h==="points")return Tn.points;if(h==="hoveredPoint")return ar;if(h==="selectedPoints")return[...tt];if(h==="filteredPoints")return Ht?Array.from(sn):Array.from({length:Tn.points.length},($,H)=>H);if(h==="pointsInView")return nl();if(h==="pointColor")return Fe.length===1?Fe[0]:Fe;if(h==="pointColorActive")return Ve.length===1?Ve[0]:Ve;if(h==="pointColorHover")return Ce.length===1?Ce[0]:Ce;if(h==="pointOutlineWidth")return vn;if(h==="pointSize")return Ot.length===1?Ot[0]:Ot;if(h==="pointSizeSelected")return Gt;if(h==="pointSizeMouseDetection")return Vt;if(h==="showPointConnections")return Rt;if(h==="pointConnectionColor")return at.length===1?at[0]:at;if(h==="pointConnectionColorActive")return qe.length===1?qe[0]:qe;if(h==="pointConnectionColorHover")return ee.length===1?ee[0]:ee;if(h==="pointConnectionColorBy")return ue;if(h==="pointConnectionOpacity")return ce.length===1?ce[0]:ce;if(h==="pointConnectionOpacityBy")return xe;if(h==="pointConnectionOpacityActive")return Qe;if(h==="pointConnectionSize")return st.length===1?st[0]:st;if(h==="pointConnectionSizeActive")return wt;if(h==="pointConnectionSizeBy")return At;if(h==="pointConnectionMaxIntPointsPerSegment")return $t;if(h==="pointConnectionTolerance")return ct;if(h==="reticleColor")return Re;if(h==="regl")return o.regl;if(h==="showReticle")return Ee;if(h==="version")return UA;if(h==="width")return Jt;if(h==="xScale")return fr;if(h==="yScale")return Hn;if(h==="performanceMode")return Kn;if(h==="gamma")return o.gamma;if(h==="renderer")return o;if(h==="isDestroyed")return me;if(h==="isPointsDrawn")return Xr;if(h==="isPointsFiltered")return Ht;if(h==="zDataType")return no;if(h==="wDataType")return Eo},rl=(h={})=>(Pm(h),(h.backgroundColor!==void 0||h.background!==void 0)&&zu(h.backgroundColor||h.background),h.backgroundImage!==void 0&&Zf(h.backgroundImage),h.cameraTarget!==void 0&&ed(h.cameraTarget),h.cameraDistance!==void 0&&H1(h.cameraDistance),h.cameraRotation!==void 0&&Jf(h.cameraRotation),h.cameraView!==void 0&&td(h.cameraView),h.colorBy!==void 0&&Tf(h.colorBy),h.pointColor!==void 0&&y1(h.pointColor),h.pointColorActive!==void 0&&x1(h.pointColorActive),h.pointColorHover!==void 0&&ro(h.pointColorHover),h.pointSize!==void 0&&bf(h.pointSize),h.pointSizeSelected!==void 0&&na(h.pointSizeSelected),h.pointSizeMouseDetection!==void 0&&ep(h.pointSizeMouseDetection),h.sizeBy!==void 0&&C1(h.sizeBy),h.opacity!==void 0&&S1(h.opacity),h.showPointConnections!==void 0&&dd(h.showPointConnections),h.pointConnectionColor!==void 0&&hd(h.pointConnectionColor),h.pointConnectionColorActive!==void 0&&pd(h.pointConnectionColorActive),h.pointConnectionColorHover!==void 0&&md(h.pointConnectionColorHover),h.pointConnectionColorBy!==void 0&&Rf(h.pointConnectionColorBy),h.pointConnectionOpacityBy!==void 0&&wn(h.pointConnectionOpacityBy),h.pointConnectionOpacity!==void 0&&q1(h.pointConnectionOpacity),h.pointConnectionOpacityActive!==void 0&&Y1(h.pointConnectionOpacityActive),h.pointConnectionSize!==void 0&&K1(h.pointConnectionSize),h.pointConnectionSizeActive!==void 0&&Q1(h.pointConnectionSizeActive),h.pointConnectionSizeBy!==void 0&&Lf(h.pointConnectionSizeBy),h.pointConnectionMaxIntPointsPerSegment!==void 0&&Z1(h.pointConnectionMaxIntPointsPerSegment),h.pointConnectionTolerance!==void 0&&J1(h.pointConnectionTolerance),h.opacityBy!==void 0&&E1(h.opacityBy),h.lassoColor!==void 0&&os(h.lassoColor),h.lassoLineWidth!==void 0&&W1(h.lassoLineWidth),h.lassoMinDelay!==void 0&&oo(h.lassoMinDelay),h.lassoMinDist!==void 0&&as(h.lassoMinDist),h.lassoClearEvent!==void 0&&nd(h.lassoClearEvent),h.lassoInitiator!==void 0&&rd(h.lassoInitiator),h.lassoInitiatorParentElement!==void 0&&id(h.lassoInitiatorParentElement),h.lassoOnLongPress!==void 0&&od(h.lassoOnLongPress),h.lassoLongPressTime!==void 0&&ad(h.lassoLongPressTime),h.lassoLongPressAfterEffectTime!==void 0&&ld(h.lassoLongPressAfterEffectTime),h.lassoLongPressEffectDelay!==void 0&&sd(h.lassoLongPressEffectDelay),h.lassoLongPressRevertEffectTime!==void 0&&ud(h.lassoLongPressRevertEffectTime),h.keyMap!==void 0&&cd(h.keyMap),h.mouseMode!==void 0&&di(h.mouseMode),h.showReticle!==void 0&&fd(h.showReticle),h.reticleColor!==void 0&&X1(h.reticleColor),h.pointOutlineWidth!==void 0&&Af(h.pointOutlineWidth),h.height!==void 0&&w1(h.height),h.width!==void 0&&Su(h.width),h.aspectRatio!==void 0&&v1(h.aspectRatio),h.xScale!==void 0&&Bi(h.xScale),h.yScale!==void 0&&Gu(h.yScale),h.deselectOnDblClick!==void 0&&Oo(h.deselectOnDblClick),h.deselectOnEscape!==void 0&&ls(h.deselectOnEscape),h.opacityByDensityFill!==void 0&&gd(h.opacityByDensityFill),h.opacityInactiveMax!==void 0&&vd(h.opacityInactiveMax),h.opacityInactiveScale!==void 0&&tp(h.opacityInactiveScale),h.gamma!==void 0&&np(h.gamma),new Promise($=>{window.requestAnimationFrame(()=>{s&&(_u(),he.refresh(),o.refresh(),et=!0,$())})})),rp=(h,{preventEvent:$=!1}={})=>{td(h),et=!0,Rn=$},yd=()=>{he||(he=hC(s,{isPanInverted:[!1,!0]})),e.cameraView?he.setView(n6(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?he.lookAt([...e.cameraTarget||Ab],e.cameraDistance||Tb,e.cameraRotation||Rb):he.setView(n6(Lb)),or=ui(1,1),en=ui(-1,-1)},ip=({preventEvent:h=!1}={})=>{yd(),bo(),!h&&t.publish("view",{view:he.view,camera:he,xScale:fr,yScale:Hn})},xd=({key:h})=>{switch(h){case"Escape":d&&ql();break}},_d=()=>{bi=!0,to=!0},Uu=()=>{qa(),bi=!1,to=!0,et=!0},wd=()=>{et=!0},op=()=>{el([]),tn.clear()},il=()=>{he.refresh();const h=Jt===po,$=ut===po;if(h||$){const{width:H,height:fe}=s.getBoundingClientRect();h&&ji(H),$&&Ao(fe),_u(),et=!0}},ap=()=>s.getContext("2d").getImageData(0,0,s.width,s.height),lp=()=>{_u(),yd(),bo(),Et=s0(o.regl,{color:c,width:p,is2d:!0}),tn=s0(o.regl,{color:at,colorHover:ee,colorActive:qe,opacity:ce===null?null:ce[0],width:st[0],widthActive:wt,is2d:!0}),Ct=s0(o.regl,{color:Re,width:1,is2d:!0}),Mt=s0(o.regl,{color:Re,width:1,is2d:!0}),io(),s.addEventListener("wheel",wd),jr=o.regl.buffer(),wo=o.regl.buffer(),oi=o.regl.buffer({usage:"dynamic",type:"float",length:GC*2}),li=xu(),si=Zl();const h=rl({backgroundImage:l,width:Jt,height:ut,keyMap:K});Kf(),Qf(),window.addEventListener("keyup",xd,!1),window.addEventListener("blur",Ka,!1),window.addEventListener("mouseup",vu,!1),window.addEventListener("mousemove",$i,!1),s.addEventListener("mousedown",gu,!1),s.addEventListener("mouseenter",_d,!1),s.addEventListener("mouseleave",Uu,!1),s.addEventListener("click",Kl,!1),s.addEventListener("dblclick",Ql,!1),"ResizeObserver"in window?(ii=new ResizeObserver(il),ii.observe(s)):(window.addEventListener("resize",il),window.addEventListener("orientationchange",il)),h.then(()=>{t.publish("init")})},sa=o.onFrame(()=>{du=he.tick(),!(!Xr||!(et||Ie))&&(Ie&&!Wf(dn,In)&&Xf(),du&&(or=ui(1,1),en=ui(-1,-1),ln==="density"&&aa()),o.render(()=>{const h=s.width/o.canvas.width,$=s.height/o.canvas.height;g1(h,$),l&&l._reglType&&N1(),gr.length>2&&Iu(),Ie||tn.draw({projection:Of(),model:Qa(),view:ns()}),L1(),!lt&&(Ee||vr)&&I1(),ar>=0&&P1(),tt.length&&M1(),Et.draw({projection:Of(),model:Qa(),view:ns()})},s),du&&(bo(),Rn?Rn=!1:t.publish("view",{view:he.view,camera:he,xScale:fr,yScale:Hn})),et=!1,vr=!1,t.publish("draw"))}),sp=()=>{et=!0},up=()=>{Xr=!1,me=!0,sa(),window.removeEventListener("keyup",xd,!1),window.removeEventListener("blur",Ka,!1),window.removeEventListener("mouseup",vu,!1),window.removeEventListener("mousemove",$i,!1),s.removeEventListener("mousedown",gu,!1),s.removeEventListener("mouseenter",_d,!1),s.removeEventListener("mouseleave",Uu,!1),s.removeEventListener("click",Kl,!1),s.removeEventListener("dblclick",Ql,!1),s.removeEventListener("wheel",wd,!1),ii?ii.disconnect():(window.removeEventListener("resize",il),window.removeEventListener("orientationchange",il)),s=void 0,he.dispose(),he=void 0,Et.destroy(),Jn.destroy(),tn.destroy(),Ct.destroy(),Mt.destroy(),e.renderer||o.destroy(),t.publish("destroy"),t.clear()};return lp(),{get isSupported(){return o.isSupported},clear:er(op),createTextureFromUrl:(h,$=A2)=>m6(o.regl,h,$),deselect:ql,destroy:up,draw:la,filter:Gf,get:Vu,getScreenPosition:U1,hover:qa,redraw:sp,refresh:o.refresh,reset:er(ip),select:ea,set:rl,export:ap,subscribe:t.subscribe,unfilter:tl,unsubscribe:t.unsubscribe,view:rp,zoomToLocation:ju,zoomToArea:$u,zoomToPoints:Po,zoomToOrigin:Yf}};function M0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WA(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ax(e){let t,n,r;e.length!==2?(t=M0,n=(l,s)=>M0(e(l),s),r=(l,s)=>e(l)-s):(t=e===M0||e===WA?e:XA,n=e,r=e);function i(l,s,u=0,f=l.length){if(u<f){if(t(s,s)!==0)return f;do{const d=u+f>>>1;n(l[d],s)<0?u=d+1:f=d}while(u<f)}return u}function o(l,s,u=0,f=l.length){if(u<f){if(t(s,s)!==0)return f;do{const d=u+f>>>1;n(l[d],s)<=0?u=d+1:f=d}while(u<f)}return u}function a(l,s,u=0,f=l.length){const d=i(l,s,u,f-1);return d>u&&r(l[d-1],s)>-r(l[d],s)?d-1:d}return{left:i,center:a,right:o}}function XA(){return 0}function qA(e){return e===null?NaN:+e}const YA=Ax(M0),KA=YA.right;Ax(qA).center;const QA=KA;function Tx(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class ZA extends Map{constructor(t,n=tT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_6(this,t))}has(t){return super.has(_6(this,t))}set(t,n){return super.set(JA(this,t),n)}delete(t){return super.delete(eT(this,t))}}function _6({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function JA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function eT({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function tT(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nT(e){return e}function rT(e,...t){return iT(e,Array.from,nT,t)}function iT(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const l=new ZA,s=r[a++];let u=-1;for(const f of o){const d=s(f,++u,o),c=l.get(d);c?c.push(f):l.set(d,[f])}for(const[f,d]of l)l.set(f,i(d,a));return t(l)}(e,0)}const oT=Math.sqrt(50),aT=Math.sqrt(10),lT=Math.sqrt(2);function xh(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=oT?10:o>=aT?5:o>=lT?2:1;let l,s,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(e*u),s=Math.round(t*u),l/u<e&&++l,s/u>t&&--s,u=-u):(u=Math.pow(10,i)*a,l=Math.round(e/u),s=Math.round(t/u),l*u<e&&++l,s*u>t&&--s),s<l&&.5<=n&&n<2?xh(e,t,n*2):[l,s,u]}function Wg(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?xh(t,e,n):xh(e,t,n);if(!(o>=i))return[];const l=o-i+1,s=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)s[u]=(o-u)/-a;else for(let u=0;u<l;++u)s[u]=(o-u)*a;else if(a<0)for(let u=0;u<l;++u)s[u]=(i+u)/-a;else for(let u=0;u<l;++u)s[u]=(i+u)*a;return s}function Xg(e,t,n){return t=+t,e=+e,n=+n,xh(e,t,n)[2]}function sT(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Xg(t,e,n):Xg(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function uT(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function T2(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function cT(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function Zh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function R2(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fu(){}var Nl=.7,tu=1/Nl,Vs="\\s*([+-]?\\d+)\\s*",Zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fT=/^#([0-9a-f]{3,8})$/,dT=new RegExp(`^rgb\\(${Vs},${Vs},${Vs}\\)$`),hT=new RegExp(`^rgb\\(${yo},${yo},${yo}\\)$`),pT=new RegExp(`^rgba\\(${Vs},${Vs},${Vs},${Zc}\\)$`),mT=new RegExp(`^rgba\\(${yo},${yo},${yo},${Zc}\\)$`),gT=new RegExp(`^hsl\\(${Zc},${yo},${yo}\\)$`),vT=new RegExp(`^hsla\\(${Zc},${yo},${yo},${Zc}\\)$`),w6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zh(fu,Il,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:S6,formatHex:S6,formatHex8:yT,formatHsl:xT,formatRgb:E6,toString:E6});function S6(){return this.rgb().formatHex()}function yT(){return this.rgb().formatHex8()}function xT(){return Lx(this).formatHsl()}function E6(){return this.rgb().formatRgb()}function Il(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fT.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?C6(t):n===3?new Nr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?f0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?f0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dT.exec(e))?new Nr(t[1],t[2],t[3],1):(t=hT.exec(e))?new Nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pT.exec(e))?f0(t[1],t[2],t[3],t[4]):(t=mT.exec(e))?f0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gT.exec(e))?T6(t[1],t[2]/100,t[3]/100,1):(t=vT.exec(e))?T6(t[1],t[2]/100,t[3]/100,t[4]):w6.hasOwnProperty(e)?C6(w6[e]):e==="transparent"?new Nr(NaN,NaN,NaN,0):null}function C6(e){return new Nr(e>>16&255,e>>8&255,e&255,1)}function f0(e,t,n,r){return r<=0&&(e=t=n=NaN),new Nr(e,t,n,r)}function Rx(e){return e instanceof fu||(e=Il(e)),e?(e=e.rgb(),new Nr(e.r,e.g,e.b,e.opacity)):new Nr}function Jc(e,t,n,r){return arguments.length===1?Rx(e):new Nr(e,t,n,r??1)}function Nr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Zh(Nr,Jc,R2(fu,{brighter(e){return e=e==null?tu:Math.pow(tu,e),new Nr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new Nr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Nr(bl(this.r),bl(this.g),bl(this.b),_h(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b6,formatHex:b6,formatHex8:_T,formatRgb:A6,toString:A6}));function b6(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}`}function _T(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}${Sl((isNaN(this.opacity)?1:this.opacity)*255)}`}function A6(){const e=_h(this.opacity);return`${e===1?"rgb(":"rgba("}${bl(this.r)}, ${bl(this.g)}, ${bl(this.b)}${e===1?")":`, ${e})`}`}function _h(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sl(e){return e=bl(e),(e<16?"0":"")+e.toString(16)}function T6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qi(e,t,n,r)}function Lx(e){if(e instanceof qi)return new qi(e.h,e.s,e.l,e.opacity);if(e instanceof fu||(e=Il(e)),!e)return new qi;if(e instanceof qi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(t===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-t)/l+2:a=(t-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new qi(a,l,s,e.opacity)}function wT(e,t,n,r){return arguments.length===1?Lx(e):new qi(e,t,n,r??1)}function qi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zh(qi,wT,R2(fu,{brighter(e){return e=e==null?tu:Math.pow(tu,e),new qi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new qi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Nr(km(e>=240?e-240:e+120,i,r),km(e,i,r),km(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qi(R6(this.h),d0(this.s),d0(this.l),_h(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_h(this.opacity);return`${e===1?"hsl(":"hsla("}${R6(this.h)}, ${d0(this.s)*100}%, ${d0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function R6(e){return e=(e||0)%360,e<0?e+360:e}function d0(e){return Math.max(0,Math.min(1,e||0))}function km(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ST=Math.PI/180,ET=180/Math.PI;var Px=-.14861,L2=1.78277,P2=-.29227,Jh=-.90649,ef=1.97294,L6=ef*Jh,P6=ef*L2,O6=L2*P2-Jh*Px;function CT(e){if(e instanceof Al)return new Al(e.h,e.s,e.l,e.opacity);e instanceof Nr||(e=Rx(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(O6*r+L6*t-P6*n)/(O6+L6-P6),o=r-i,a=(ef*(n-i)-P2*o)/Jh,l=Math.sqrt(a*a+o*o)/(ef*i*(1-i)),s=l?Math.atan2(a,o)*ET-120:NaN;return new Al(s<0?s+360:s,l,i,e.opacity)}function ja(e,t,n,r){return arguments.length===1?CT(e):new Al(e,t,n,r??1)}function Al(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zh(Al,ja,R2(fu,{brighter(e){return e=e==null?tu:Math.pow(tu,e),new Al(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new Al(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*ST,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Nr(255*(t+n*(Px*r+L2*i)),255*(t+n*(P2*r+Jh*i)),255*(t+n*(ef*r)),this.opacity)}}));const e1=e=>()=>e;function Ox(e,t){return function(n){return e+n*t}}function bT(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function AT(e,t){var n=t-e;return n?Ox(e,n>180||n<-180?n-360*Math.round(n/360):n):e1(isNaN(e)?t:e)}function TT(e){return(e=+e)==1?Us:function(t,n){return n-t?bT(t,n,e):e1(isNaN(t)?n:t)}}function Us(e,t){var n=t-e;return n?Ox(e,n):e1(isNaN(e)?t:e)}const wh=function e(t){var n=TT(t);function r(i,o){var a=n((i=Jc(i)).r,(o=Jc(o)).r),l=n(i.g,o.g),s=n(i.b,o.b),u=Us(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function RT(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function LT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PT(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=t1(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(l){for(a=0;a<r;++a)o[a]=i[a](l);return o}}function OT(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function kT(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=t1(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var qg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mm=new RegExp(qg.source,"g");function MT(e){return function(){return e}}function NT(e){return function(t){return e(t)+""}}function kx(e,t){var n=qg.lastIndex=Mm.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(e=e+"",t=t+"";(r=qg.exec(e))&&(i=Mm.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:Xi(r,i)})),n=Mm.lastIndex;return n<t.length&&(o=t.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?NT(s[0].x):MT(t):(t=s.length,function(u){for(var f=0,d;f<t;++f)l[(d=s[f]).i]=d.x(u);return l.join("")})}function t1(e,t){var n=typeof t,r;return t==null||n==="boolean"?e1(t):(n==="number"?Xi:n==="string"?(r=Il(t))?(t=r,wh):kx:t instanceof Il?wh:t instanceof Date?OT:LT(t)?RT:Array.isArray(t)?PT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?kT:Xi)(e,t)}function Mx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var k6=180/Math.PI,Yg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nx(e,t,n,r,i,o){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*k6,skewX:Math.atan(s)*k6,scaleX:a,scaleY:l}}var h0;function IT(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yg:Nx(t.a,t.b,t.c,t.d,t.e,t.f)}function FT(e){return e==null||(h0||(h0=document.createElementNS("http://www.w3.org/2000/svg","g")),h0.setAttribute("transform",e),!(e=h0.transform.baseVal.consolidate()))?Yg:(e=e.matrix,Nx(e.a,e.b,e.c,e.d,e.e,e.f))}function Ix(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,c,p,g){if(u!==d||f!==c){var y=p.push("translate(",null,t,null,n);g.push({i:y-4,x:Xi(u,d)},{i:y-2,x:Xi(f,c)})}else(d||c)&&p.push("translate("+d+t+c+n)}function a(u,f,d,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Xi(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function l(u,f,d,c){u!==f?c.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Xi(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function s(u,f,d,c,p,g){if(u!==d||f!==c){var y=p.push(i(p)+"scale(",null,",",null,")");g.push({i:y-4,x:Xi(u,d)},{i:y-2,x:Xi(f,c)})}else(d!==1||c!==1)&&p.push(i(p)+"scale("+d+","+c+")")}return function(u,f){var d=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,c),a(u.rotate,f.rotate,d,c),l(u.skewX,f.skewX,d,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,c),u=f=null,function(p){for(var g=-1,y=c.length,S;++g<y;)d[(S=c[g]).i]=S.x(p);return d.join("")}}}var DT=Ix(IT,"px, ","px)","deg)"),$T=Ix(FT,", ",")",")");function Fx(e){return function t(n){n=+n;function r(i,o){var a=e((i=ja(i)).h,(o=ja(o)).h),l=Us(i.s,o.s),s=Us(i.l,o.l),u=Us(i.opacity,o.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=s(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}Fx(AT);var Dx=Fx(Us);function jT(e){return function(){return e}}function BT(e){return+e}var M6=[0,1];function Aa(e){return e}function Kg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jT(isNaN(t)?NaN:.5)}function zT(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function GT(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Kg(i,r),o=n(a,o)):(r=Kg(r,i),o=n(o,a)),function(l){return o(r(l))}}function VT(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Kg(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(l){var s=QA(e,l,1,r)-1;return o[s](i[s](l))}}function O2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function k2(){var e=M6,t=M6,n=t1,r,i,o,a=Aa,l,s,u;function f(){var c=Math.min(e.length,t.length);return a!==Aa&&(a=zT(e[0],e[c-1])),l=c>2?VT:GT,s=u=null,d}function d(c){return c==null||isNaN(c=+c)?o:(s||(s=l(e.map(r),t,n)))(r(a(c)))}return d.invert=function(c){return a(i((u||(u=l(t,e.map(r),Xi)))(c)))},d.domain=function(c){return arguments.length?(e=Array.from(c,BT),f()):e.slice()},d.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},d.rangeRound=function(c){return t=Array.from(c),n=Mx,f()},d.clamp=function(c){return arguments.length?(a=c?!0:Aa,f()):a!==Aa},d.interpolate=function(c){return arguments.length?(n=c,f()):n},d.unknown=function(c){return arguments.length?(o=c,d):o},function(c,p){return r=c,i=p,f()}}function UT(){return k2()(Aa,Aa)}function HT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Sh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function nu(e){return e=Sh(Math.abs(e)),e?e[1]:NaN}function WT(e,t){return function(n,r){for(var i=n.length,o=[],a=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),o.push(n.substring(i-=l,i+l)),!((s+=l+1)>r));)l=e[a=(a+1)%e.length];return o.reverse().join(t)}}function XT(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var qT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tf(e){if(!(t=qT.exec(e)))throw new Error("invalid format: "+e);var t;return new M2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tf.prototype=M2.prototype;function M2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}M2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YT(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $x;function KT(e,t){var n=Sh(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-($x=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Sh(e,Math.max(0,t+o-1))[0]}function N6(e,t){var n=Sh(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const I6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:HT,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>N6(e*100,t),r:N6,s:KT,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function F6(e){return e}var D6=Array.prototype.map,$6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function QT(e){var t=e.grouping===void 0||e.thousands===void 0?F6:WT(D6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?F6:XT(D6.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(d){d=tf(d);var c=d.fill,p=d.align,g=d.sign,y=d.symbol,S=d.zero,v=d.width,_=d.comma,x=d.precision,O=d.trim,I=d.type;I==="n"?(_=!0,I="g"):I6[I]||(x===void 0&&(x=12),O=!0,I="g"),(S||c==="0"&&p==="=")&&(S=!0,c="0",p="=");var U=y==="$"?n:y==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",te=y==="$"?r:/[%p]/.test(I)?a:"",K=I6[I],$e=/[defgprs%]/.test(I);x=x===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function Ee(Re){var Fe=U,Ve=te,Ce,Rt,at;if(I==="c")Ve=K(Re)+Ve,Re="";else{Re=+Re;var qe=Re<0||1/Re<0;if(Re=isNaN(Re)?s:K(Math.abs(Re),x),O&&(Re=YT(Re)),qe&&+Re==0&&g!=="+"&&(qe=!1),Fe=(qe?g==="("?g:l:g==="-"||g==="("?"":g)+Fe,Ve=(I==="s"?$6[8+$x/3]:"")+Ve+(qe&&g==="("?")":""),$e){for(Ce=-1,Rt=Re.length;++Ce<Rt;)if(at=Re.charCodeAt(Ce),48>at||at>57){Ve=(at===46?i+Re.slice(Ce+1):Re.slice(Ce))+Ve,Re=Re.slice(0,Ce);break}}}_&&!S&&(Re=t(Re,1/0));var ee=Fe.length+Re.length+Ve.length,ue=ee<v?new Array(v-ee+1).join(c):"";switch(_&&S&&(Re=t(ue+Re,ue.length?v-Ve.length:1/0),ue=""),p){case"<":Re=Fe+Re+Ve+ue;break;case"=":Re=Fe+ue+Re+Ve;break;case"^":Re=ue.slice(0,ee=ue.length>>1)+Fe+Re+Ve+ue.slice(ee);break;default:Re=ue+Fe+Re+Ve;break}return o(Re)}return Ee.toString=function(){return d+""},Ee}function f(d,c){var p=u((d=tf(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(nu(c)/3)))*3,y=Math.pow(10,-g),S=$6[8+g/3];return function(v){return p(y*v)+S}}return{format:u,formatPrefix:f}}var p0,N2,jx;ZT({thousands:",",grouping:[3],currency:["$",""]});function ZT(e){return p0=QT(e),N2=p0.format,jx=p0.formatPrefix,p0}function JT(e){return Math.max(0,-nu(Math.abs(e)))}function eR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nu(t)/3)))*3-nu(Math.abs(e)))}function tR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nu(t)-nu(e))+1}function nR(e,t,n,r){var i=sT(e,t,n),o;switch(r=tf(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=eR(i,a))&&(r.precision=o),jx(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=tR(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=JT(i))&&(r.precision=o-(r.type==="%")*2);break}}return N2(r)}function I2(e){var t=e.domain;return e.ticks=function(n){var r=t();return Wg(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return nR(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],l=r[o],s,u,f=10;for(l<a&&(u=a,a=l,l=u,u=i,i=o,o=u);f-- >0;){if(u=Xg(a,l,n),u===s)return r[i]=a,r[o]=l,t(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function nf(){var e=UT();return e.copy=function(){return O2(e,nf())},T2.apply(e,arguments),I2(e)}function rR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function j6(e){return Math.log(e)}function B6(e){return Math.exp(e)}function iR(e){return-Math.log(-e)}function oR(e){return-Math.exp(-e)}function aR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function lR(e){return e===10?aR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z6(e){return(t,n)=>-e(-t,n)}function uR(e){const t=e(j6,B6),n=t.domain;let r=10,i,o;function a(){return i=sR(r),o=lR(r),n()[0]<0?(i=z6(i),o=z6(o),e(iR,oR)):e(j6,B6),t}return t.base=function(l){return arguments.length?(r=+l,a()):r},t.domain=function(l){return arguments.length?(n(l),a()):n()},t.ticks=l=>{const s=n();let u=s[0],f=s[s.length-1];const d=f<u;d&&([u,f]=[f,u]);let c=i(u),p=i(f),g,y;const S=l==null?10:+l;let v=[];if(!(r%1)&&p-c<S){if(c=Math.floor(c),p=Math.ceil(p),u>0){for(;c<=p;++c)for(g=1;g<r;++g)if(y=c<0?g/o(-c):g*o(c),!(y<u)){if(y>f)break;v.push(y)}}else for(;c<=p;++c)for(g=r-1;g>=1;--g)if(y=c>0?g/o(-c):g*o(c),!(y<u)){if(y>f)break;v.push(y)}v.length*2<S&&(v=Wg(u,f,S))}else v=Wg(c,p,Math.min(p-c,S)).map(o);return d?v.reverse():v},t.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=tf(s)).precision==null&&(s.trim=!0),s=N2(s)),l===1/0)return s;const u=Math.max(1,r*l/t.ticks().length);return f=>{let d=f/o(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=u?s(f):""}},t.nice=()=>n(rR(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),t}function F2(){const e=uR(k2()).domain([1,10]);return e.copy=()=>O2(e,F2()).base(e.base()),T2.apply(e,arguments),e}function G6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function V6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cR(e){var t=1,n=e(G6(t),V6(t));return n.constant=function(r){return arguments.length?e(G6(t=+r),V6(t)):t},I2(n)}function Bx(){var e=cR(k2());return e.copy=function(){return O2(e,Bx()).constant(e.constant())},T2.apply(e,arguments)}function fR(){var e=0,t=1,n,r,i,o,a=Aa,l=!1,s;function u(d){return d==null||isNaN(d=+d)?s:a(i===0?.5:(d=(o(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(a=d,u):a};function f(d){return function(c){var p,g;return arguments.length?([p,g]=c,a=d(p,g),u):[a(0),a(1)]}}return u.range=f(t1),u.rangeRound=f(Mx),u.unknown=function(d){return arguments.length?(s=d,u):s},function(d){return o=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function dR(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Qg(){var e=I2(fR()(Aa));return e.copy=function(){return dR(e,Qg())},cT.apply(e,arguments)}function n1(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}Dx(ja(-100,.75,.35),ja(80,1.5,.8));var hR=Dx(ja(260,.75,.35),ja(80,1.5,.8));ja();function r1(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}r1(n1("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var pR=r1(n1("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));r1(n1("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));r1(n1("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const mR="_scatter_rif9d_2",gR={scatter:mR};D2.propTypes={points:Ge.array.isRequired,colors:Ge.array,width:Ge.number.isRequired,height:Ge.number.isRequired,pointScale:Ge.number,colorScaleType:Ge.oneOf(["categorical","continuous"]),colorInterpolator:Ge.func,opacityBy:Ge.string,duration:Ge.number,onScatter:Ge.func,onView:Ge.func,onSelect:Ge.func,onHover:Ge.func};const vR=e=>F2().domain([100,1e6]).range([6,1]).clamp(!0)(e),yR=e=>F2().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function D2({points:e,width:t,height:n,duration:r=0,pointScale:i=1,colorScaleType:o=null,colorInterpolator:a=hR,opacityBy:l,onScatter:s,onView:u,onSelect:f,onHover:d}){const c=T.useRef(),p=T.useRef([-1,1]),g=T.useRef([-1,1]),y=T.useRef(null);T.useEffect(()=>{const v=nf().domain([-1,1]),_=nf().domain([-1,1]),x={canvas:c.current,width:t,height:n,pointColorHover:[.1,.1,.1,.5],xScale:v,yScale:_},O=HA(x);return y.current=O,O.zoomToArea({x:p.current[0],y:g.current[0],width:p.current[1]-p.current[0],height:g.current[1]-g.current[0]}),u&&u(v,_),O.subscribe("view",({camera:I,view:U,xScale:te,yScale:K})=>{p.current=te.domain(),g.current=K.domain(),u&&u(p.current,g.current)}),O.subscribe("select",({points:I})=>{f&&f(I)}),O.subscribe("deselect",()=>{f&&f([])}),O.subscribe("pointOver",I=>{d&&d(I)}),O.subscribe("pointOut",()=>{d&&d(null)}),s&&s(O),()=>{y.current=null,O.destroy()}},[t,n,s,u,f,d]);const S=T.useRef();return T.useEffect(()=>{const v=y.current,_=S.current;if(v&&e&&e.length){const x=vR(e.length)*i,O=yR(e.length);let I=[250/255,128/255,114/255,1];if(o==="categorical"){const U=rT(e.map(K=>K[2]),K=>K).map(K=>K[0]).sort((K,$e)=>K-$e),te=Qg(a).domain(Tx(U).reverse());I=U.map(K=>Jc(te(K)).hex())}else if(o==="continuous"){let U=uT(0,100);const te=Qg(a).domain([0,100]);I=U.map(K=>Jc(te(K)).hex())}o&&v.set({colorBy:"valueA"}),l?v.set({opacityBy:l,sizeBy:l,opacity:[.1,.2,.3,.4,.5,1],pointSize:[2,4,5,6,x]}):v.set({opacity:O,pointSize:x}),_&&_.length===e.length?v.draw(e,{transition:!0,transitionDuration:r}).then(()=>{v.set({pointColor:I}),v.draw(e,{transition:!1})}):(v.set({pointColor:I}),v.draw(e,{transition:!1})),S.current=e}},[e,t,n,o,a,r,i]),b.jsx("canvas",{className:gR.scatter,ref:c})}const Hs=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:o,yDomain:a,width:l,height:s})=>{const u=T.useRef();return T.useEffect(()=>{if(o&&a){const f=nf().domain(o).range([0,l]),d=nf().domain(a).range([s,0]),c=S=>S/(.1+o[1]-o[0]),g=u.current.getContext("2d");g.clearRect(0,0,l,s),g.fillStyle=t,g.strokeStyle=n,g.font=`${c(r)}px monospace`,g.globalAlpha=.75;let y=c(r);if(!e.length)return;e.map(S=>{S&&(t&&g.fillRect(f(S[0])-y/2,d(S[1])-y/2,y,y),n&&g.strokeRect(f(S[0])-y/2,d(S[1])-y/2,y,y),i&&g.fillText(i,f(S[0])-y/3.2,d(S[1])+y/3.2))})}},[e,t,n,r,o,a,l,s]),b.jsx("canvas",{className:"annotation-plot",ref:u,width:l,height:s})};function xs(e){return function(){return e}}const Zg=Math.PI,Jg=2*Zg,yl=1e-6,xR=Jg-yl;function zx(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _R(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zx;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let wR=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zx:_R(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,s=r-t,u=i-n,f=a-t,d=l-n,c=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(c>yl)if(!(Math.abs(d*s-u*f)>yl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,g=i-l,y=s*s+u*u,S=p*p+g*g,v=Math.sqrt(y),_=Math.sqrt(c),x=o*Math.tan((Zg-Math.acos((y+c-S)/(2*v*_)))/2),O=x/_,I=x/v;Math.abs(O-1)>yl&&this._append`L${t+O*f},${n+O*d}`,this._append`A${o},${o},0,0,${+(d*p>f*g)},${this._x1=t+I*s},${this._y1=n+I*u}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),s=r*Math.sin(i),u=t+l,f=n+s,d=1^a,c=a?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yl||Math.abs(this._y1-f)>yl)&&this._append`L${u},${f}`,r&&(c<0&&(c=c%Jg+Jg),c>xR?this._append`A${r},${r},0,1,${d},${t-l},${n-s}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:c>yl&&this._append`A${r},${r},0,${+(c>=Zg)},${d},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function SR(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wR(t)}function ER(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gx(e){this._context=e}Gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function CR(e){return new Gx(e)}function bR(e){return e[0]}function AR(e){return e[1]}function U6(e,t){var n=xs(!0),r=null,i=CR,o=null,a=SR(l);e=typeof e=="function"?e:e===void 0?bR:xs(e),t=typeof t=="function"?t:t===void 0?AR:xs(t);function l(s){var u,f=(s=ER(s)).length,d,c=!1,p;for(r==null&&(o=i(p=a())),u=0;u<=f;++u)!(u<f&&n(d=s[u],u,s))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+e(d,u,s),+t(d,u,s));if(p)return o=null,p+""||null}return l.x=function(s){return arguments.length?(e=typeof s=="function"?s:xs(+s),l):e},l.y=function(s){return arguments.length?(t=typeof s=="function"?s:xs(+s),l):t},l.defined=function(s){return arguments.length?(n=typeof s=="function"?s:xs(!!s),l):n},l.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),l):i},l.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),l):r},l}function H6(){}function Vx(e){this._context=e}Vx.prototype={areaStart:H6,areaEnd:H6,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function W6(e){return new Vx(e)}var ev="http://www.w3.org/1999/xhtml";const X6={svg:"http://www.w3.org/2000/svg",xhtml:ev,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function i1(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),X6.hasOwnProperty(t)?{space:X6[t],local:e}:e}function TR(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ev&&t.documentElement.namespaceURI===ev?t.createElement(e):t.createElementNS(n,e)}}function RR(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ux(e){var t=i1(e);return(t.local?RR:TR)(t)}function LR(){}function $2(e){return e==null?LR:function(){return this.querySelector(e)}}function PR(e){typeof e!="function"&&(e=$2(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=new Array(a),s,u,f=0;f<a;++f)(s=o[f])&&(u=e.call(s,s.__data__,f,o))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new Si(r,this._parents)}function OR(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kR(){return[]}function Hx(e){return e==null?kR:function(){return this.querySelectorAll(e)}}function MR(e){return function(){return OR(e.apply(this,arguments))}}function NR(e){typeof e=="function"?e=MR(e):e=Hx(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(e.call(s,s.__data__,u,a)),i.push(s));return new Si(r,i)}function Wx(e){return function(){return this.matches(e)}}function Xx(e){return function(t){return t.matches(e)}}var IR=Array.prototype.find;function FR(e){return function(){return IR.call(this.children,e)}}function DR(){return this.firstElementChild}function $R(e){return this.select(e==null?DR:FR(typeof e=="function"?e:Xx(e)))}var jR=Array.prototype.filter;function BR(){return Array.from(this.children)}function zR(e){return function(){return jR.call(this.children,e)}}function GR(e){return this.selectAll(e==null?BR:zR(typeof e=="function"?e:Xx(e)))}function VR(e){typeof e!="function"&&(e=Wx(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new Si(r,this._parents)}function qx(e){return new Array(e.length)}function UR(){return new Si(this._enter||this._groups.map(qx),this._parents)}function Eh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Eh.prototype={constructor:Eh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function HR(e){return function(){return e}}function WR(e,t,n,r,i,o){for(var a=0,l,s=t.length,u=o.length;a<u;++a)(l=t[a])?(l.__data__=o[a],r[a]=l):n[a]=new Eh(e,o[a]);for(;a<s;++a)(l=t[a])&&(i[a]=l)}function XR(e,t,n,r,i,o,a){var l,s,u=new Map,f=t.length,d=o.length,c=new Array(f),p;for(l=0;l<f;++l)(s=t[l])&&(c[l]=p=a.call(s,s.__data__,l,t)+"",u.has(p)?i[l]=s:u.set(p,s));for(l=0;l<d;++l)p=a.call(e,o[l],l,o)+"",(s=u.get(p))?(r[l]=s,s.__data__=o[l],u.delete(p)):n[l]=new Eh(e,o[l]);for(l=0;l<f;++l)(s=t[l])&&u.get(c[l])===s&&(i[l]=s)}function qR(e){return e.__data__}function YR(e,t){if(!arguments.length)return Array.from(this,qR);var n=t?XR:WR,r=this._parents,i=this._groups;typeof e!="function"&&(e=HR(e));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var f=r[u],d=i[u],c=d.length,p=KR(e.call(f,f&&f.__data__,u,r)),g=p.length,y=l[u]=new Array(g),S=a[u]=new Array(g),v=s[u]=new Array(c);n(f,d,y,S,v,p,t);for(var _=0,x=0,O,I;_<g;++_)if(O=y[_]){for(_>=x&&(x=_+1);!(I=S[x])&&++x<g;);O._next=I||null}}return a=new Si(a,r),a._enter=l,a._exit=s,a}function KR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QR(){return new Si(this._exit||this._groups.map(qx),this._parents)}function ZR(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function JR(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),l=new Array(i),s=0;s<a;++s)for(var u=n[s],f=r[s],d=u.length,c=l[s]=new Array(d),p,g=0;g<d;++g)(p=u[g]||f[g])&&(c[g]=p);for(;s<i;++s)l[s]=n[s];return new Si(l,this._parents)}function eL(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function tL(e){e||(e=nL);function t(d,c){return d&&c?e(d.__data__,c.__data__):!d-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,f=0;f<l;++f)(u=a[f])&&(s[f]=u);s.sort(t)}return new Si(i,this._parents).order()}function nL(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rL(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function iL(){return Array.from(this)}function oL(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function aL(){let e=0;for(const t of this)++e;return e}function lL(){return!this.node()}function sL(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&e.call(l,l.__data__,o,i);return this}function uL(e){return function(){this.removeAttribute(e)}}function cL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fL(e,t){return function(){this.setAttribute(e,t)}}function dL(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hL(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pL(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function mL(e,t){var n=i1(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?cL:uL:typeof t=="function"?n.local?pL:hL:n.local?dL:fL)(n,t))}function Yx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gL(e){return function(){this.style.removeProperty(e)}}function vL(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yL(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xL(e,t,n){return arguments.length>1?this.each((t==null?gL:typeof t=="function"?yL:vL)(e,t,n??"")):ru(this.node(),e)}function ru(e,t){return e.style.getPropertyValue(t)||Yx(e).getComputedStyle(e,null).getPropertyValue(t)}function _L(e){return function(){delete this[e]}}function wL(e,t){return function(){this[e]=t}}function SL(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function EL(e,t){return arguments.length>1?this.each((t==null?_L:typeof t=="function"?SL:wL)(e,t)):this.node()[e]}function Kx(e){return e.trim().split(/^|\s+/)}function j2(e){return e.classList||new Qx(e)}function Qx(e){this._node=e,this._names=Kx(e.getAttribute("class")||"")}Qx.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Zx(e,t){for(var n=j2(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Jx(e,t){for(var n=j2(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function CL(e){return function(){Zx(this,e)}}function bL(e){return function(){Jx(this,e)}}function AL(e,t){return function(){(t.apply(this,arguments)?Zx:Jx)(this,e)}}function TL(e,t){var n=Kx(e+"");if(arguments.length<2){for(var r=j2(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?AL:t?CL:bL)(n,t))}function RL(){this.textContent=""}function LL(e){return function(){this.textContent=e}}function PL(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function OL(e){return arguments.length?this.each(e==null?RL:(typeof e=="function"?PL:LL)(e)):this.node().textContent}function kL(){this.innerHTML=""}function ML(e){return function(){this.innerHTML=e}}function NL(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function IL(e){return arguments.length?this.each(e==null?kL:(typeof e=="function"?NL:ML)(e)):this.node().innerHTML}function FL(){this.nextSibling&&this.parentNode.appendChild(this)}function DL(){return this.each(FL)}function $L(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jL(){return this.each($L)}function BL(e){var t=typeof e=="function"?e:Ux(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zL(){return null}function GL(e,t){var n=typeof e=="function"?e:Ux(e),r=t==null?zL:typeof t=="function"?t:$2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function VL(){var e=this.parentNode;e&&e.removeChild(this)}function UL(){return this.each(VL)}function HL(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function WL(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XL(e){return this.select(e?WL:HL)}function qL(e){return arguments.length?this.property("__data__",e):this.node().__data__}function YL(e){return function(t){e.call(this,t,this.__data__)}}function KL(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function QL(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function ZL(e,t,n){return function(){var r=this.__on,i,o=YL(t);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function JL(e,t,n){var r=KL(e+""),i,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=t?ZL:QL,i=0;i<o;++i)this.each(l(r[i],t,n));return this}function e9(e,t,n){var r=Yx(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function eP(e,t){return function(){return e9(this,e,t)}}function tP(e,t){return function(){return e9(this,e,t.apply(this,arguments))}}function nP(e,t){return this.each((typeof t=="function"?tP:eP)(e,t))}function*rP(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var t9=[null];function Si(e,t){this._groups=e,this._parents=t}function vf(){return new Si([[document.documentElement]],t9)}function iP(){return this}Si.prototype=vf.prototype={constructor:Si,select:PR,selectAll:NR,selectChild:$R,selectChildren:GR,filter:VR,data:YR,enter:UR,exit:QR,join:ZR,merge:JR,selection:iP,order:eL,sort:tL,call:rL,nodes:iL,node:oL,size:aL,empty:lL,each:sL,attr:mL,style:xL,property:EL,classed:TL,text:OL,html:IL,raise:DL,lower:jL,append:BL,insert:GL,remove:UL,clone:XL,datum:qL,on:JL,dispatch:nP,[Symbol.iterator]:rP};function q6(e){return typeof e=="string"?new Si([[document.querySelector(e)]],[document.documentElement]):new Si([[e]],t9)}var oP={value:()=>{}};function n9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new N0(n)}function N0(e){this._=e}function aP(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}N0.prototype=n9.prototype={constructor:N0,on:function(e,t){var n=this._,r=aP(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=lP(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=Y6(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Y6(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new N0(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function lP(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Y6(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=oP,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var iu=0,xc=0,pc=0,r9=1e3,Ch,_c,bh=0,Fl=0,o1=0,rf=typeof performance=="object"&&performance.now?performance:Date,i9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function B2(){return Fl||(i9(sP),Fl=rf.now()+o1)}function sP(){Fl=0}function Ah(){this._call=this._time=this._next=null}Ah.prototype=o9.prototype={constructor:Ah,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?B2():+n)+(t==null?0:+t),!this._next&&_c!==this&&(_c?_c._next=this:Ch=this,_c=this),this._call=e,this._time=n,tv()},stop:function(){this._call&&(this._call=null,this._time=1/0,tv())}};function o9(e,t,n){var r=new Ah;return r.restart(e,t,n),r}function uP(){B2(),++iu;for(var e=Ch,t;e;)(t=Fl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--iu}function K6(){Fl=(bh=rf.now())+o1,iu=xc=0;try{uP()}finally{iu=0,fP(),Fl=0}}function cP(){var e=rf.now(),t=e-bh;t>r9&&(o1-=t,bh=e)}function fP(){for(var e,t=Ch,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ch=n);_c=e,tv(r)}function tv(e){if(!iu){xc&&(xc=clearTimeout(xc));var t=e-Fl;t>24?(e<1/0&&(xc=setTimeout(K6,e-rf.now()-o1)),pc&&(pc=clearInterval(pc))):(pc||(bh=rf.now(),pc=setInterval(cP,r9)),iu=1,i9(K6))}}function Q6(e,t,n){var r=new Ah;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var dP=n9("start","end","cancel","interrupt"),hP=[],a9=0,Z6=1,nv=2,I0=3,J6=4,rv=5,F0=6;function a1(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;pP(e,n,{name:t,index:r,group:i,on:dP,tween:hP,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:a9})}function z2(e,t){var n=eo(e,t);if(n.state>a9)throw new Error("too late; already scheduled");return n}function _o(e,t){var n=eo(e,t);if(n.state>I0)throw new Error("too late; already running");return n}function eo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pP(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=o9(o,0,n.time);function o(u){n.state=Z6,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,d,c,p;if(n.state!==Z6)return s();for(f in r)if(p=r[f],p.name===n.name){if(p.state===I0)return Q6(a);p.state===J6?(p.state=F0,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=F0,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(Q6(function(){n.state===I0&&(n.state=J6,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=nv,n.on.call("start",e,e.__data__,n.index,n.group),n.state===nv){for(n.state=I0,i=new Array(c=n.tween.length),f=0,d=-1;f<c;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=rv,1),d=-1,c=i.length;++d<c;)i[d].call(e,f);n.state===rv&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=F0,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function mP(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>nv&&r.state<rv,r.state=F0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function gP(e){return this.each(function(){mP(this,e)})}function vP(e,t){var n,r;return function(){var i=_o(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function yP(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=_o(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function xP(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=eo(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?vP:yP)(n,e,t))}function G2(e,t,n){var r=e._id;return e.each(function(){var i=_o(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return eo(i,r).value[t]}}function l9(e,t){var n;return(typeof t=="number"?Xi:t instanceof Il?wh:(n=Il(t))?(t=n,wh):kx)(e,t)}function _P(e){return function(){this.removeAttribute(e)}}function wP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function SP(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function EP(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function CP(e,t,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l)))}}function bP(e,t,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l)))}}function AP(e,t){var n=i1(e),r=n==="transform"?$T:l9;return this.attrTween(e,typeof t=="function"?(n.local?bP:CP)(n,r,G2(this,"attr."+e,t)):t==null?(n.local?wP:_P)(n):(n.local?EP:SP)(n,r,t))}function TP(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function RP(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function LP(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&RP(e,o)),n}return i._value=t,i}function PP(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&TP(e,o)),n}return i._value=t,i}function OP(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=i1(e);return this.tween(n,(r.local?LP:PP)(r,t))}function kP(e,t){return function(){z2(this,e).delay=+t.apply(this,arguments)}}function MP(e,t){return t=+t,function(){z2(this,e).delay=t}}function NP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kP:MP)(t,e)):eo(this.node(),t).delay}function IP(e,t){return function(){_o(this,e).duration=+t.apply(this,arguments)}}function FP(e,t){return t=+t,function(){_o(this,e).duration=t}}function DP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?IP:FP)(t,e)):eo(this.node(),t).duration}function $P(e,t){if(typeof t!="function")throw new Error;return function(){_o(this,e).ease=t}}function jP(e){var t=this._id;return arguments.length?this.each($P(t,e)):eo(this.node(),t).ease}function BP(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_o(this,e).ease=n}}function zP(e){if(typeof e!="function")throw new Error;return this.each(BP(this._id,e))}function GP(e){typeof e!="function"&&(e=Wx(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new Wo(r,this._parents,this._name,this._id)}function VP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=t[l],u=n[l],f=s.length,d=a[l]=new Array(f),c,p=0;p<f;++p)(c=s[p]||u[p])&&(d[p]=c);for(;l<r;++l)a[l]=t[l];return new Wo(a,this._parents,this._name,this._id)}function UP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function HP(e,t,n){var r,i,o=UP(t)?z2:_o;return function(){var a=o(this,e),l=a.on;l!==r&&(i=(r=l).copy()).on(t,n),a.on=i}}function WP(e,t){var n=this._id;return arguments.length<2?eo(this.node(),n).on.on(e):this.each(HP(n,e,t))}function XP(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qP(){return this.on("end.remove",XP(this._id))}function YP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$2(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),f,d,c=0;c<s;++c)(f=l[c])&&(d=e.call(f,f.__data__,c,l))&&("__data__"in f&&(d.__data__=f.__data__),u[c]=d,a1(u[c],t,n,c,u,eo(f,n)));return new Wo(o,this._parents,t,n)}function KP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hx(e));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,f,d=0;d<u;++d)if(f=s[d]){for(var c=e.call(f,f.__data__,d,s),p,g=eo(f,n),y=0,S=c.length;y<S;++y)(p=c[y])&&a1(p,t,n,y,c,g);o.push(c),a.push(f)}return new Wo(o,a,t,n)}var QP=vf.prototype.constructor;function ZP(){return new QP(this._groups,this._parents)}function JP(e,t){var n,r,i;return function(){var o=ru(this,e),a=(this.style.removeProperty(e),ru(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function s9(e){return function(){this.style.removeProperty(e)}}function eO(e,t,n){var r,i=n+"",o;return function(){var a=ru(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function tO(e,t,n){var r,i,o;return function(){var a=ru(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),ru(this,e))),a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function nO(e,t){var n,r,i,o="style."+t,a="end."+o,l;return function(){var s=_o(this,e),u=s.on,f=s.value[o]==null?l||(l=s9(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),s.on=r}}function rO(e,t,n){var r=(e+="")=="transform"?DT:l9;return t==null?this.styleTween(e,JP(e,r)).on("end.style."+e,s9(e)):typeof t=="function"?this.styleTween(e,tO(e,r,G2(this,"style."+e,t))).each(nO(this._id,e)):this.styleTween(e,eO(e,r,t),n).on("end.style."+e,null)}function iO(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function oO(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&iO(e,a,n)),r}return o._value=t,o}function aO(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,oO(e,t,n??""))}function lO(e){return function(){this.textContent=e}}function sO(e){return function(){var t=e(this);this.textContent=t??""}}function uO(e){return this.tween("text",typeof e=="function"?sO(G2(this,"text",e)):lO(e==null?"":e+""))}function cO(e){return function(t){this.textContent=e.call(this,t)}}function fO(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&cO(i)),t}return r._value=e,r}function dO(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,fO(e))}function hO(){for(var e=this._name,t=this._id,n=u9(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var f=eo(s,t);a1(s,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Wo(r,this._parents,e,n)}function pO(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=_o(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),i===0&&o()})}var mO=0;function Wo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function u9(){return++mO}var No=vf.prototype;Wo.prototype={constructor:Wo,select:YP,selectAll:KP,selectChild:No.selectChild,selectChildren:No.selectChildren,filter:GP,merge:VP,selection:ZP,transition:hO,call:No.call,nodes:No.nodes,node:No.node,size:No.size,empty:No.empty,each:No.each,on:WP,attr:AP,attrTween:OP,style:rO,styleTween:aO,text:uO,textTween:dO,remove:qP,tween:xP,delay:NP,duration:DP,ease:jP,easeVarying:zP,end:pO,[Symbol.iterator]:No[Symbol.iterator]};function c9(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function gO(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function e4(e){return 1-gO(e)}var vO={time:null,delay:0,duration:250,ease:c9};function yO(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function xO(e){var t,n;e instanceof Wo?(t=e._id,e=e._name):(t=u9(),(n=vO).time=B2(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&a1(s,e,t,u,a,n||yO(s,t));return new Wo(r,this._parents,e,t)}vf.prototype.interrupt=gP;vf.prototype.transition=xO;function _O(e){for(var t=-1,n=e.length,r,i=e[n-1],o=0;++t<n;)r=i,i=e[t],o+=r[1]*i[0]-r[0]*i[1];return o/2}function wO(e){for(var t=-1,n=e.length,r=e[n-1],i,o,a=r[0],l=r[1],s=0;++t<n;)i=a,o=l,r=e[t],a=r[0],l=r[1],i-=a,o-=l,s+=Math.sqrt(i*i+o*o);return s}var D0={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},SO=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function EO(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&SO.indexOf(e)>=0}function CO(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function bO(e){return(e|32)===97}function _s(e){return e>=48&&e<=57}function AO(e){return e>=48&&e<=57||e===43||e===45||e===46}function TO(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function $0(e){for(;e.index<e.max&&EO(e.path.charCodeAt(e.index));)e.index++}function RO(e){var t=e.path.charCodeAt(e.index);if(t===48){e.param=0,e.index++;return}if(t===49){e.param=1,e.index++;return}e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")"}function LO(e){var t=e.index,n=t,r=e.max,i=!1,o=!1,a=!1,l=!1,s;if(n>=r){e.err="SvgPath: missed param (at pos "+n+")";return}if(s=e.path.charCodeAt(n),(s===43||s===45)&&(n++,s=n<r?e.path.charCodeAt(n):0),!_s(s)&&s!==46){e.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")";return}if(s!==46){if(i=s===48,n++,s=n<r?e.path.charCodeAt(n):0,i&&n<r&&s&&_s(s)){e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+t+")";return}for(;n<r&&_s(e.path.charCodeAt(n));)n++,o=!0;s=n<r?e.path.charCodeAt(n):0}if(s===46){for(l=!0,n++;_s(e.path.charCodeAt(n));)n++,a=!0;s=n<r?e.path.charCodeAt(n):0}if(s===101||s===69){if(l&&!o&&!a){e.err="SvgPath: invalid float exponent (at pos "+n+")";return}if(n++,s=n<r?e.path.charCodeAt(n):0,(s===43||s===45)&&n++,n<r&&_s(e.path.charCodeAt(n)))for(;n<r&&_s(e.path.charCodeAt(n));)n++;else{e.err="SvgPath: invalid float exponent (at pos "+n+")";return}}e.index=n,e.param=parseFloat(e.path.slice(t,n))+0}function Nm(e){var t,n;t=e.path[e.segmentStart],n=t.toLowerCase();var r=e.data;if(n==="m"&&r.length>2&&(e.result.push([t,r[0],r[1]]),r=r.slice(2),n="l",t=t==="m"?"l":"L"),n==="r")e.result.push([t].concat(r));else for(;r.length>=D0[n]&&(e.result.push([t].concat(r.splice(0,D0[n]))),!!D0[n]););}function PO(e){var t=e.max,n,r,i,o,a;if(e.segmentStart=e.index,n=e.path.charCodeAt(e.index),r=bO(n),!CO(n)){e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")";return}if(o=D0[e.path[e.index].toLowerCase()],e.index++,$0(e),e.data=[],!o){Nm(e);return}for(i=!1;;){for(a=o;a>0;a--){if(r&&(a===3||a===4)?RO(e):LO(e),e.err.length){Nm(e);return}e.data.push(e.param),$0(e),i=!1,e.index<t&&e.path.charCodeAt(e.index)===44&&(e.index++,$0(e),i=!0)}if(!i&&(e.index>=e.max||!AO(e.path.charCodeAt(e.index))))break}Nm(e)}var OO=function(t){var n=new TO(t),r=n.max;for($0(n);n.index<r&&!n.err.length;)PO(n);return n.result.length&&("mM".indexOf(n.result[0][0])<0?(n.err="SvgPath: string should start with `M` or `m`",n.result=[]):n.result[0][0]="M"),{err:n.err,segments:n.result}};function kO(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function Ji(){if(!(this instanceof Ji))return new Ji;this.queue=[],this.cache=null}Ji.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)};Ji.prototype.translate=function(e,t){return(e!==0||t!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,t])),this};Ji.prototype.scale=function(e,t){return(e!==1||t!==1)&&(this.cache=null,this.queue.push([e,0,0,t,0,0])),this};Ji.prototype.rotate=function(e,t,n){var r,i,o;return e!==0&&(this.translate(t,n),r=e*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-t,-n)),this};Ji.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this};Ji.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this};Ji.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=kO(this.cache,this.queue[e]);return this.cache};Ji.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[e*r[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]};var f9=Ji,MO=f9,NO={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},IO=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,FO=/[\s,]+/,DO=function(t){var n=new MO,r,i;return t.split(IO).forEach(function(o){if(o.length){if(typeof NO[o]<"u"){r=o;return}switch(i=o.split(FO).map(function(a){return+a||0}),r){case"matrix":i.length===6&&n.matrix(i);return;case"scale":i.length===1?n.scale(i[0],i[0]):i.length===2&&n.scale(i[0],i[1]);return;case"rotate":i.length===1?n.rotate(i[0],0,0):i.length===3&&n.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?n.translate(i[0],0):i.length===2&&n.translate(i[0],i[1]);return;case"skewX":i.length===1&&n.skewX(i[0]);return;case"skewY":i.length===1&&n.skewY(i[0]);return}}}),n},Oc=Math.PI*2;function t4(e,t,n,r){var i=e*r-t*n<0?-1:1,o=e*n+t*r;return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}function $O(e,t,n,r,i,o,a,l,s,u){var f=u*(e-n)/2+s*(t-r)/2,d=-s*(e-n)/2+u*(t-r)/2,c=a*a,p=l*l,g=f*f,y=d*d,S=c*p-c*y-p*g;S<0&&(S=0),S/=c*y+p*g,S=Math.sqrt(S)*(i===o?-1:1);var v=S*a/l*d,_=S*-l/a*f,x=u*v-s*_+(e+n)/2,O=s*v+u*_+(t+r)/2,I=(f-v)/a,U=(d-_)/l,te=(-f-v)/a,K=(-d-_)/l,$e=t4(1,0,I,U),Ee=t4(I,U,te,K);return o===0&&Ee>0&&(Ee-=Oc),o===1&&Ee<0&&(Ee+=Oc),[x,O,$e,Ee]}function jO(e,t){var n=1.3333333333333333*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}var BO=function(t,n,r,i,o,a,l,s,u){var f=Math.sin(u*Oc/360),d=Math.cos(u*Oc/360),c=d*(t-r)/2+f*(n-i)/2,p=-f*(t-r)/2+d*(n-i)/2;if(c===0&&p===0)return[];if(l===0||s===0)return[];l=Math.abs(l),s=Math.abs(s);var g=c*c/(l*l)+p*p/(s*s);g>1&&(l*=Math.sqrt(g),s*=Math.sqrt(g));var y=$O(t,n,r,i,o,a,l,s,f,d),S=[],v=y[2],_=y[3],x=Math.max(Math.ceil(Math.abs(_)/(Oc/4)),1);_/=x;for(var O=0;O<x;O++)S.push(jO(v,_)),v+=_;return S.map(function(I){for(var U=0;U<I.length;U+=2){var te=I[U+0],K=I[U+1];te*=l,K*=s;var $e=d*te-f*K,Ee=f*te+d*K;I[U+0]=$e+y[0],I[U+1]=Ee+y[1]}return I})},kc=1e-10,n4=Math.PI/180;function of(e,t,n){if(!(this instanceof of))return new of(e,t,n);this.rx=e,this.ry=t,this.ax=n}of.prototype.transform=function(e){var t=Math.cos(this.ax*n4),n=Math.sin(this.ax*n4),r=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],i=r[0]*r[0]+r[2]*r[2],o=r[1]*r[1]+r[3]*r[3],a=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),l=(i+o)/2;if(a<kc*l)return this.rx=this.ry=Math.sqrt(l),this.ax=0,this;var s=r[0]*r[1]+r[2]*r[3];a=Math.sqrt(a);var u=l+a/2,f=l-a/2;return this.ax=Math.abs(s)<kc&&Math.abs(u-o)<kc?90:Math.atan(Math.abs(s)>Math.abs(u-o)?(u-i)/s:s/(u-o))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(u)),this};of.prototype.isDegenerate=function(){return this.rx<kc*this.ry||this.ry<kc*this.rx};var zO=of,GO=OO,VO=DO,Wa=f9,UO=BO,HO=zO;function Gn(e){if(!(this instanceof Gn))return new Gn(e);var t=GO(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}Gn.from=function(e){if(typeof e=="string")return new Gn(e);if(e instanceof Gn){var t=new Gn("");return t.err=e.err,t.segments=e.segments.map(function(n){return n.slice()}),t.__stack=e.__stack.map(function(n){return Wa().matrix(n.toArray())}),t}throw new Error("SvgPath.from: invalid param type "+e)};Gn.prototype.__matrix=function(e){var t=this,n;e.queue.length&&this.iterate(function(r,i,o,a){var l,s,u,f;switch(r[0]){case"v":l=e.calc(0,r[1],!0),s=l[0]===0?["v",l[1]]:["l",l[0],l[1]];break;case"V":l=e.calc(o,r[1],!1),s=l[0]===e.calc(o,a,!1)[0]?["V",l[1]]:["L",l[0],l[1]];break;case"h":l=e.calc(r[1],0,!0),s=l[1]===0?["h",l[0]]:["l",l[0],l[1]];break;case"H":l=e.calc(r[1],a,!1),s=l[1]===e.calc(o,a,!1)[1]?["H",l[0]]:["L",l[0],l[1]];break;case"a":case"A":var d=e.toArray(),c=HO(r[1],r[2],r[3]).transform(d);if(d[0]*d[3]-d[1]*d[2]<0&&(r[5]=r[5]?"0":"1"),l=e.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===o&&r[7]===a||r[0]==="a"&&r[6]===0&&r[7]===0){s=[r[0]==="a"?"l":"L",l[0],l[1]];break}c.isDegenerate()?s=[r[0]==="a"?"l":"L",l[0],l[1]]:s=[r[0],c.rx,c.ry,c.ax,r[4],r[5],l[0],l[1]];break;case"m":f=i>0,l=e.calc(r[1],r[2],f),s=["m",l[0],l[1]];break;default:for(u=r[0],s=[u],f=u.toLowerCase()===u,n=1;n<r.length;n+=2)l=e.calc(r[n],r[n+1],f),s.push(l[0],l[1])}t.segments[i]=s},!0)};Gn.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(e=Wa(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}};Gn.prototype.toString=function(){var e="",t="",n=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var o=this.segments[r],a=o[0];a!==t||a==="m"||a==="M"?(a==="m"&&t==="z"&&(e+=" "),e+=a,n=!1):n=!0;for(var l=1;l<o.length;l++){var s=o[l];l===1?n&&s>=0&&(e+=" "):s>=0&&(e+=" "),e+=s}t=a}return e};Gn.prototype.translate=function(e,t){return this.__stack.push(Wa().translate(e,t||0)),this};Gn.prototype.scale=function(e,t){return this.__stack.push(Wa().scale(e,!t&&t!==0?e:t)),this};Gn.prototype.rotate=function(e,t,n){return this.__stack.push(Wa().rotate(e,t||0,n||0)),this};Gn.prototype.skewX=function(e){return this.__stack.push(Wa().skewX(e)),this};Gn.prototype.skewY=function(e){return this.__stack.push(Wa().skewY(e)),this};Gn.prototype.matrix=function(e){return this.__stack.push(Wa().matrix(e)),this};Gn.prototype.transform=function(e){return e.trim()?(this.__stack.push(VO(e)),this):this};Gn.prototype.round=function(e){var t=0,n=0,r=0,i=0,o;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(a){var l=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":l&&(a[1]+=r),r=a[1]-a[1].toFixed(e),a[1]=+a[1].toFixed(e);return;case"V":case"v":l&&(a[1]+=i),i=a[1]-a[1].toFixed(e),a[1]=+a[1].toFixed(e);return;case"Z":case"z":r=t,i=n;return;case"M":case"m":l&&(a[1]+=r,a[2]+=i),r=a[1]-a[1].toFixed(e),i=a[2]-a[2].toFixed(e),t=r,n=i,a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e);return;case"A":case"a":l&&(a[6]+=r,a[7]+=i),r=a[6]-a[6].toFixed(e),i=a[7]-a[7].toFixed(e),a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e),a[3]=+a[3].toFixed(e+2),a[6]=+a[6].toFixed(e),a[7]=+a[7].toFixed(e);return;default:o=a.length,l&&(a[o-2]+=r,a[o-1]+=i),r=a[o-2]-a[o-2].toFixed(e),i=a[o-1]-a[o-1].toFixed(e),a.forEach(function(s,u){u&&(a[u]=+a[u].toFixed(e))});return}}),this};Gn.prototype.iterate=function(e,t){var n=this.segments,r={},i=!1,o=0,a=0,l=0,s=0,u,f,d;if(t||this.__evaluateStack(),n.forEach(function(c,p){var g=e(c,p,o,a);Array.isArray(g)&&(r[p]=g,i=!0);var y=c[0]===c[0].toLowerCase();switch(c[0]){case"m":case"M":o=c[1]+(y?o:0),a=c[2]+(y?a:0),l=o,s=a;return;case"h":case"H":o=c[1]+(y?o:0);return;case"v":case"V":a=c[1]+(y?a:0);return;case"z":case"Z":o=l,a=s;return;default:o=c[c.length-2]+(y?o:0),a=c[c.length-1]+(y?a:0)}}),!i)return this;for(d=[],u=0;u<n.length;u++)if(typeof r[u]<"u")for(f=0;f<r[u].length;f++)d.push(r[u][f]);else d.push(n[u]);return this.segments=d,this};Gn.prototype.abs=function(){return this.iterate(function(e,t,n,r){var i=e[0],o=i.toUpperCase(),a;if(i!==o)switch(e[0]=o,i){case"v":e[1]+=r;return;case"a":e[6]+=n,e[7]+=r;return;default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}},!0),this};Gn.prototype.rel=function(){return this.iterate(function(e,t,n,r){var i=e[0],o=i.toLowerCase(),a;if(i!==o&&!(t===0&&i==="M"))switch(e[0]=o,i){case"V":e[1]-=r;return;case"A":e[6]-=n,e[7]-=r;return;default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}},!0),this};Gn.prototype.unarc=function(){return this.iterate(function(e,t,n,r){var i,o,a,l=[],s=e[0];return s!=="A"&&s!=="a"?null:(s==="a"?(o=n+e[6],a=r+e[7]):(o=e[6],a=e[7]),i=UO(n,r,o,a,e[4],e[5],e[1],e[2],e[3]),i.length===0?[[e[0]==="a"?"l":"L",e[6],e[7]]]:(i.forEach(function(u){l.push(["C",u[2],u[3],u[4],u[5],u[6],u[7]])}),l))}),this};Gn.prototype.unshort=function(){var e=this.segments,t,n,r,i,o;return this.iterate(function(a,l,s,u){var f=a[0],d=f.toUpperCase(),c;l&&(d==="T"?(c=f==="t",r=e[l-1],r[0]==="Q"?(t=r[1]-s,n=r[2]-u):r[0]==="q"?(t=r[1]-r[3],n=r[2]-r[4]):(t=0,n=0),i=-t,o=-n,c||(i+=s,o+=u),e[l]=[c?"q":"Q",i,o,a[1],a[2]]):d==="S"&&(c=f==="s",r=e[l-1],r[0]==="C"?(t=r[3]-s,n=r[4]-u):r[0]==="c"?(t=r[3]-r[5],n=r[4]-r[6]):(t=0,n=0),i=-t,o=-n,c||(i+=s,o+=u),e[l]=[c?"c":"C",i,o,a[1],a[2],a[3],a[4]]))}),this};var WO=Gn,XO=WO;const qO=cf(XO);var Im={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},YO=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function KO(e){var t=[];return e.replace(YO,function(n,r,i){var o=r.toLowerCase();for(i=ZO(i),o==="m"&&i.length>2&&(t.push([r].concat(i.splice(0,2))),o="l",r=r==="m"?"l":"L");i.length>=0;){if(i.length===Im[o])return i.unshift(r),t.push(i);if(i.length<Im[o])throw new Error("malformed path data");t.push([r].concat(i.splice(0,Im[o])))}}),t}var QO=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function ZO(e){var t=e.match(QO);return t?t.map(Number):[]}function Vi(e,t,n,r,i,o,a,l){return new iv(e,t,n,r,i,o,a,l)}function iv(e,t,n,r,i,o,a,l){this.a={x:e,y:t},this.b={x:n,y:r},this.c={x:i,y:o},this.d={x:a,y:l},a!=null&&l!==null&&l!==void 0?(this.getArcLength=sk,this.getPoint=tk,this.getDerivative=ek):(this.getArcLength=nk,this.getPoint=d9,this.getDerivative=JO),this.init()}iv.prototype={constructor:iv,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(e){var t=Fm(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t)},getTangentAtLength:function(e){var t=Fm(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y),i;return r>0?i={x:n.x/r,y:n.y/r}:i={x:0,y:0},i},getPropertiesAtLength:function(e){var t=Fm(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y),i;r>0?i={x:n.x/r,y:n.y/r}:i={x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t);return{x:o.x,y:o.y,tangentX:i.x,tangentY:i.y}}};function JO(e,t,n){return{x:(1-n)*2*(e[1]-e[0])+n*2*(e[2]-e[1]),y:(1-n)*2*(t[1]-t[0])+n*2*(t[2]-t[1])}}function ek(e,t,n){var r=d9([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],n);return r}function Fm(e,t,n,r,i){for(var o=1,a=e/t,l=(e-n(r,i,a))/t;o>.001;){var s=n(r,i,a+l),u=n(r,i,a-l),f=Math.abs(e-s)/t,d=Math.abs(e-u)/t;f<o?(o=f,a+=l):d<o?(o=d,a-=l):l/=2}return a}function d9(e,t,n){var r=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],i=(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2];return{x:r,y:i}}function tk(e,t,n){var r=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],i=(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3];return{x:r,y:i}}function nk(e,t,n){n===void 0&&(n=1);var r=e[0]-2*e[1]+e[2],i=t[0]-2*t[1]+t[2],o=2*e[1]-2*e[0],a=2*t[1]-2*t[0],l=4*(r*r+i*i),s=4*(r*o+i*a),u=o*o+a*a;if(l===0)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));var f=s/(2*l),d=u/l,c=n+f,p=d-f*f;return Math.sqrt(l)/2*(c*Math.sqrt(c*c+p)-f*Math.sqrt(f*f+p)+p*Math.log(Math.abs((c+Math.sqrt(c*c+p))/(f+Math.sqrt(f*f+p)))))}var rk=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],ik=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],ok=[[1],[1,1],[1,2,1],[1,3,3,1]];function ak(e,t){return ok[e][t]}function ov(e,t,n){var r=n.length-1,i,o,a;if(r===0)return 0;if(e===0){for(o=0,a=0;a<=r;a++)o+=ak(r,a)*Math.pow(1-t,r-a)*Math.pow(t,a)*n[a];return o}else{for(i=new Array(r),a=0;a<r;a++)i[a]=r*(n[a+1]-n[a]);return ov(e-1,t,i)}}function lk(e,t,n){var r=ov(1,n,e),i=ov(1,n,t),o=r*r+i*i;return Math.sqrt(o)}function sk(e,t,n){var r,i,o,a;n===void 0&&(n=1);var l=20;for(r=n/2,i=0,o=0;o<l;o++)a=r*rk[l][o]+r,i+=ik[l][o]*lk(e,t,a);return r*i}var Mc=Math.PI*2;function r4(e,t,n,r){var i=e*r-t*n<0?-1:1,o=e*n+t*r;return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}function uk(e,t,n,r,i,o,a,l,s,u){var f=u*(e-n)/2+s*(t-r)/2,d=-s*(e-n)/2+u*(t-r)/2,c=a*a,p=l*l,g=f*f,y=d*d,S=c*p-c*y-p*g;S<0&&(S=0),S/=c*y+p*g,S=Math.sqrt(S)*(i===o?-1:1);var v=S*a/l*d,_=S*-l/a*f,x=u*v-s*_+(e+n)/2,O=s*v+u*_+(t+r)/2,I=(f-v)/a,U=(d-_)/l,te=(-f-v)/a,K=(-d-_)/l,$e=r4(1,0,I,U),Ee=r4(I,U,te,K);return o===0&&Ee>0&&(Ee-=Mc),o===1&&Ee<0&&(Ee+=Mc),[x,O,$e,Ee]}function ck(e,t){var n=1.3333333333333333*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}function fk(e,t,n,r,i,o,a,l,s){var u=Math.sin(i*Mc/360),f=Math.cos(i*Mc/360),d=f*(e-l)/2+u*(t-s)/2,c=-u*(e-l)/2+f*(t-s)/2;if(d===0&&c===0)return[];if(n===0||r===0)return[];n=Math.abs(n),r=Math.abs(r);var p=d*d/(n*n)+c*c/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var g=uk(e,t,l,s,o,a,n,r,u,f),y=[],S=g[2],v=g[3],_=Math.max(Math.ceil(Math.abs(v)/(Mc/4)),1);v/=_;for(var x=0;x<_;x++)y.push(ck(S,v)),S+=v;return y.map(function(O){for(var I=0;I<O.length;I+=2){var U=O[I+0],te=O[I+1];U*=n,te*=r;var K=f*U-u*te,$e=u*U+f*te;O[I+0]=K+g[0],O[I+1]=$e+g[1]}return O})}function i4(e,t,n,r,i,o,a,l,s){return new av(e,t,n,r,i,o,a,l,s)}function av(e,t,n,r,i,o,a,l,s){var u=0,f=[],d=[],c=fk(e,t,n,r,i,o,a,l,s);c.forEach(function(p){var g=new Vi(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7]),y=g.getTotalLength();u+=y,f.push(y),d.push(g)}),this.length=u,this.partialLengths=f,this.curves=d}av.prototype={constructor:av,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(e){e<0?e=0:e>this.length&&(e=this.length);for(var t=this.partialLengths.length-1;this.partialLengths[t]>=e&&this.partialLengths[t]>0;)t--;t<this.partialLengths.length-1&&t++;for(var n=0,r=0;r<t;r++)n+=this.partialLengths[r];return this.curves[t].getPointAtLength(e-n)},getTangentAtLength:function(e){e<0?e=0:e>this.length&&(e=this.length);for(var t=this.partialLengths.length-1;this.partialLengths[t]>=e&&this.partialLengths[t]>0;)t--;t<this.partialLengths.length-1&&t++;for(var n=0,r=0;r<t;r++)n+=this.partialLengths[r];return this.curves[t].getTangentAtLength(e-n)},getPropertiesAtLength:function(e){var t=this.getTangentAtLength(e),n=this.getPointAtLength(e);return{x:n.x,y:n.y,tangentX:t.x,tangentY:t.y}}};function Gi(e,t,n,r){return new yf(e,t,n,r)}function yf(e,t,n,r){this.x0=e,this.x1=t,this.y0=n,this.y1=r}yf.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))};yf.prototype.getPointAtLength=function(e){var t=e/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*t,r=(this.y1-this.y0)*t;return{x:this.x0+n,y:this.y0+r}};yf.prototype.getTangentAtLength=function(){var e=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/e,y:(this.y1-this.y0)/e}};yf.prototype.getPropertiesAtLength=function(e){var t=this.getPointAtLength(e),n=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:n.x,tangentY:n.y}};function dk(e){var t=0,n=[],r=[];function i(a){if(!a)return null;for(var l=KO(a),s=[0,0],u=[0,0],f,d,c=0;c<l.length;c++)l[c][0]==="M"?(s=[l[c][1],l[c][2]],d=[s[0],s[1]],r.push(null)):l[c][0]==="m"?(s=[l[c][1]+s[0],l[c][2]+s[1]],d=[s[0],s[1]],r.push(null)):l[c][0]==="L"?(t=t+Math.sqrt(Math.pow(s[0]-l[c][1],2)+Math.pow(s[1]-l[c][2],2)),r.push(new Gi(s[0],l[c][1],s[1],l[c][2])),s=[l[c][1],l[c][2]]):l[c][0]==="l"?(t=t+Math.sqrt(Math.pow(l[c][1],2)+Math.pow(l[c][2],2)),r.push(new Gi(s[0],l[c][1]+s[0],s[1],l[c][2]+s[1])),s=[l[c][1]+s[0],l[c][2]+s[1]]):l[c][0]==="H"?(t=t+Math.abs(s[0]-l[c][1]),r.push(new Gi(s[0],l[c][1],s[1],s[1])),s[0]=l[c][1]):l[c][0]==="h"?(t=t+Math.abs(l[c][1]),r.push(new Gi(s[0],s[0]+l[c][1],s[1],s[1])),s[0]=l[c][1]+s[0]):l[c][0]==="V"?(t=t+Math.abs(s[1]-l[c][1]),r.push(new Gi(s[0],s[0],s[1],l[c][1])),s[1]=l[c][1]):l[c][0]==="v"?(t=t+Math.abs(l[c][1]),r.push(new Gi(s[0],s[0],s[1],s[1]+l[c][1])),s[1]=l[c][1]+s[1]):l[c][0]==="z"||l[c][0]==="Z"?(t=t+Math.sqrt(Math.pow(d[0]-s[0],2)+Math.pow(d[1]-s[1],2)),r.push(new Gi(s[0],d[0],s[1],d[1])),s=[d[0],d[1]]):l[c][0]==="C"?(f=new Vi(s[0],s[1],l[c][1],l[c][2],l[c][3],l[c][4],l[c][5],l[c][6]),t=t+f.getTotalLength(),s=[l[c][5],l[c][6]],r.push(f)):l[c][0]==="c"?(f=new Vi(s[0],s[1],s[0]+l[c][1],s[1]+l[c][2],s[0]+l[c][3],s[1]+l[c][4],s[0]+l[c][5],s[1]+l[c][6]),t=t+f.getTotalLength(),s=[l[c][5]+s[0],l[c][6]+s[1]],r.push(f)):l[c][0]==="S"?(c>0&&["C","c","S","s"].indexOf(l[c-1][0])>-1?f=new Vi(s[0],s[1],2*s[0]-l[c-1][l[c-1].length-4],2*s[1]-l[c-1][l[c-1].length-3],l[c][1],l[c][2],l[c][3],l[c][4]):f=new Vi(s[0],s[1],s[0],s[1],l[c][1],l[c][2],l[c][3],l[c][4]),t=t+f.getTotalLength(),s=[l[c][3],l[c][4]],r.push(f)):l[c][0]==="s"?(c>0&&["C","c","S","s"].indexOf(l[c-1][0])>-1?f=new Vi(s[0],s[1],s[0]+f.d.x-f.c.x,s[1]+f.d.y-f.c.y,s[0]+l[c][1],s[1]+l[c][2],s[0]+l[c][3],s[1]+l[c][4]):f=new Vi(s[0],s[1],s[0],s[1],s[0]+l[c][1],s[1]+l[c][2],s[0]+l[c][3],s[1]+l[c][4]),t=t+f.getTotalLength(),s=[l[c][3]+s[0],l[c][4]+s[1]],r.push(f)):l[c][0]==="Q"?(s[0]!=l[c][1]&&s[1]!=l[c][2]?f=new Vi(s[0],s[1],l[c][1],l[c][2],l[c][3],l[c][4]):f=new Gi(l[c][1],l[c][3],l[c][2],l[c][4]),t=t+f.getTotalLength(),r.push(f),s=[l[c][3],l[c][4]],u=[l[c][1],l[c][2]]):l[c][0]==="q"?(l[c][1]==0&&l[c][2]==0?f=new Gi(s[0]+l[c][1],s[0]+l[c][3],s[1]+l[c][2],s[1]+l[c][4]):f=new Vi(s[0],s[1],s[0]+l[c][1],s[1]+l[c][2],s[0]+l[c][3],s[1]+l[c][4]),t=t+f.getTotalLength(),u=[s[0]+l[c][1],s[1]+l[c][2]],s=[l[c][3]+s[0],l[c][4]+s[1]],r.push(f)):l[c][0]==="T"?(c>0&&["Q","q","T","t"].indexOf(l[c-1][0])>-1?f=new Vi(s[0],s[1],2*s[0]-u[0],2*s[1]-u[1],l[c][1],l[c][2]):f=new Gi(s[0],l[c][1],s[1],l[c][2]),r.push(f),t=t+f.getTotalLength(),u=[2*s[0]-u[0],2*s[1]-u[1]],s=[l[c][1],l[c][2]]):l[c][0]==="t"?(c>0&&["Q","q","T","t"].indexOf(l[c-1][0])>-1?f=new Vi(s[0],s[1],2*s[0]-u[0],2*s[1]-u[1],s[0]+l[c][1],s[1]+l[c][2]):f=new Gi(s[0],s[0]+l[c][1],s[1],s[1]+l[c][2]),t=t+f.getTotalLength(),u=[2*s[0]-u[0],2*s[1]-u[1]],s=[l[c][1]+s[0],l[c][2]+s[0]],r.push(f)):l[c][0]==="A"?(f=new i4(s[0],s[1],l[c][1],l[c][2],l[c][3],l[c][4],l[c][5],l[c][6],l[c][7]),t=t+f.getTotalLength(),s=[l[c][6],l[c][7]],r.push(f)):l[c][0]==="a"&&(f=new i4(s[0],s[1],l[c][1],l[c][2],l[c][3],l[c][4],l[c][5],s[0]+l[c][6],s[1]+l[c][7]),t=t+f.getTotalLength(),s=[s[0]+l[c][6],s[1]+l[c][7]],r.push(f)),n.push(t);return i}i.getTotalLength=function(){return t},i.getPointAtLength=function(a){var l=o(a);return r[l.i].getPointAtLength(l.fraction)},i.getTangentAtLength=function(a){var l=o(a);return r[l.i].getTangentAtLength(l.fraction)},i.getPropertiesAtLength=function(a){var l=o(a);return r[l.i].getPropertiesAtLength(l.fraction)};var o=function(a){a<0?a=0:a>t&&(a=t);for(var l=n.length-1;n[l]>=a&&n[l]>0;)l--;return l++,{fraction:a-n[l-1],i:l}};return i(e)}function l1(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function h9(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function hk(e,t){return l1(e,t)<1e-9}function pk(e,t,n){let r=e.map((i,o)=>mk(i,t[o]));return function(i){let o=r.map(a=>a(i));return n?yk(o):o}}function mk(e,t){return function(n){return e.map((r,i)=>r+n*(t[i]-r))}}function Th(e){return typeof e=="number"&&isFinite(e)}const lv=`All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).
Example valid ways of supplying a shape would be:
[[0, 0], [10, 0], [10, 10]]
"M0,0 L10,0 L10,10Z"
`;function gk(e){return new qO(e).abs()}function vk(e){return e.toString().split("M").map((t,n)=>(t=t.trim(),n&&t?"M"+t:t)).filter(t=>t)}function yk(e){return"M"+e.join("L")+"Z"}function xk(e,t){let n=gk(e);return _k(n)||wk(n,t)}function _k(e){let t=e.segments||[],n=[];if(!t.length||t[0][0]!=="M")return!1;for(let r=0;r<t.length;r++){let[i,o,a]=t[r];if(i==="M"&&r||i==="Z")break;if(i==="M"||i==="L")n.push([o,a]);else if(i==="H")n.push([o,n[n.length-1][1]]);else if(i==="V")n.push([n[n.length-1][0],o]);else return!1}return n.length?{ring:n}:!1}function wk(e,t){let n=vk(e)[0],r=[],i,o,a=3;if(!n)throw new TypeError(lv);o=Sk(n),i=o.getTotalLength(),t&&Th(t)&&t>0&&(a=Math.max(a,Math.ceil(i/t)));for(let l=0;l<a;l++){let s=o.getPointAtLength(i*l/a);r.push([s.x,s.y])}return{ring:r,skipBisect:!0}}function Sk(e){if(typeof window<"u"&&window&&window.document)try{let t=window.document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttributeNS(null,"d",e),t}catch{}return dk(e)}function o4(e,t){const n=e.length+t,r=wO(e)/t;let i=0,o=0,a=r/2;for(;e.length<n;){let l=e[i],s=e[(i+1)%e.length],u=l1(l,s);if(a<=o+u){e.splice(i+1,0,u?h9(l,s,(a-o)/u):l.slice(0)),a+=r;continue}o+=u,i++}}function Ek(e,t=1/0){for(let n=0;n<e.length;n++){let r=e[n],i=n===e.length-1?e[0]:e[n+1];for(;l1(r,i)>t;)i=h9(r,i,.5),e.splice(n+1,0,i)}}function a4(e,t){let n,r,i;if(typeof e=="string"){let o=xk(e,t);e=o.ring,i=o.skipBisect}else if(!Array.isArray(e))throw new TypeError(lv);if(n=e.slice(0),!Ck(n))throw new TypeError(lv);return n.length>1&&hk(n[0],n[n.length-1])&&n.pop(),r=_O(n),r>0&&n.reverse(),!i&&t&&Th(t)&&t>0&&Ek(n,t),n}function Ck(e){return e.every(function(t){return Array.isArray(t)&&t.length>=2&&Th(t[0])&&Th(t[1])})}function bk(e,t){let n=e.length,r=1/0,i,o,a;for(let l=0;l<n;l++)o=0,t.forEach(function(s,u){let f=l1(e[(l+u)%n],s);o+=f*f}),o<r&&(r=o,i=l);i&&(a=e.splice(0,i),e.splice(e.length,0,...a))}function Ak(e,t,{maxSegmentLength:n=10,string:r=!0}={}){let i=a4(e,n),o=a4(t,n),a=Tk(i,o,r);return!r||typeof e!="string"&&typeof t!="string"?a:l=>l<1e-4&&typeof e=="string"?e:1-l<1e-4&&typeof t=="string"?t:a(l)}function Tk(e,t,n){let r;return r=e.length-t.length,o4(e,r<0?r*-1:0),o4(t,r>0?r:0),bk(e,t),pk(e,t,n)}var p9={exports:{}};p9.exports=s1;p9.exports.default=s1;function s1(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,o=m9(e,0,i,n,!0),a=[];if(!o||o.next===o.prev)return a;var l,s,u,f,d,c,p;if(r&&(o=kk(e,t,o,n)),e.length>80*n){l=u=e[0],s=f=e[1];for(var g=n;g<i;g+=n)d=e[g],c=e[g+1],d<l&&(l=d),c<s&&(s=c),d>u&&(u=d),c>f&&(f=c);p=Math.max(u-l,f-s),p=p!==0?32767/p:0}return af(o,a,n,l,s,p,0),a}function m9(e,t,n,r,i){var o,a;if(i===cv(e,t,n,r)>0)for(o=t;o<n;o+=r)a=l4(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=l4(o,e[o],e[o+1],a);return a&&u1(a,a.next)&&(sf(a),a=a.next),a}function Dl(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&(u1(n,n.next)||zn(n.prev,n,n.next)===0)){if(sf(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function af(e,t,n,r,i,o,a){if(e){!a&&o&&Dk(e,r,i,o);for(var l=e,s,u;e.prev!==e.next;){if(s=e.prev,u=e.next,o?Lk(e,r,i,o):Rk(e)){t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),sf(e),e=u.next,l=u.next;continue}if(e=u,e===l){a?a===1?(e=Pk(Dl(e),t,n),af(e,t,n,r,i,o,2)):a===2&&Ok(e,t,n,r,i,o):af(Dl(e),t,n,r,i,o,1);break}}}}function Rk(e){var t=e.prev,n=e,r=e.next;if(zn(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,l=t.y,s=n.y,u=r.y,f=i<o?i<a?i:a:o<a?o:a,d=l<s?l<u?l:u:s<u?s:u,c=i>o?i>a?i:a:o>a?o:a,p=l>s?l>u?l:u:s>u?s:u,g=r.next;g!==t;){if(g.x>=f&&g.x<=c&&g.y>=d&&g.y<=p&&Fs(i,l,o,s,a,u,g.x,g.y)&&zn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Lk(e,t,n,r){var i=e.prev,o=e,a=e.next;if(zn(i,o,a)>=0)return!1;for(var l=i.x,s=o.x,u=a.x,f=i.y,d=o.y,c=a.y,p=l<s?l<u?l:u:s<u?s:u,g=f<d?f<c?f:c:d<c?d:c,y=l>s?l>u?l:u:s>u?s:u,S=f>d?f>c?f:c:d>c?d:c,v=sv(p,g,t,n,r),_=sv(y,S,t,n,r),x=e.prevZ,O=e.nextZ;x&&x.z>=v&&O&&O.z<=_;){if(x.x>=p&&x.x<=y&&x.y>=g&&x.y<=S&&x!==i&&x!==a&&Fs(l,f,s,d,u,c,x.x,x.y)&&zn(x.prev,x,x.next)>=0||(x=x.prevZ,O.x>=p&&O.x<=y&&O.y>=g&&O.y<=S&&O!==i&&O!==a&&Fs(l,f,s,d,u,c,O.x,O.y)&&zn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=y&&x.y>=g&&x.y<=S&&x!==i&&x!==a&&Fs(l,f,s,d,u,c,x.x,x.y)&&zn(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;O&&O.z<=_;){if(O.x>=p&&O.x<=y&&O.y>=g&&O.y<=S&&O!==i&&O!==a&&Fs(l,f,s,d,u,c,O.x,O.y)&&zn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function Pk(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!u1(i,o)&&g9(i,r,r.next,o)&&lf(i,o)&&lf(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),sf(r),sf(r.next),r=e=o),r=r.next}while(r!==e);return Dl(r)}function Ok(e,t,n,r,i,o){var a=e;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&Bk(a,l)){var s=v9(a,l);a=Dl(a,a.next),s=Dl(s,s.next),af(a,t,n,r,i,o,0),af(s,t,n,r,i,o,0);return}l=l.next}a=a.next}while(a!==e)}function kk(e,t,n,r){var i=[],o,a,l,s,u;for(o=0,a=t.length;o<a;o++)l=t[o]*r,s=o<a-1?t[o+1]*r:e.length,u=m9(e,l,s,r,!1),u===u.next&&(u.steiner=!0),i.push(jk(u));for(i.sort(Mk),o=0;o<i.length;o++)n=Nk(i[o],n);return n}function Mk(e,t){return e.x-t.x}function Nk(e,t){var n=Ik(e,t);if(!n)return t;var r=v9(n,e);return Dl(r,r.next),Dl(n,n.next)}function Ik(e,t){var n=t,r=e.x,i=e.y,o=-1/0,a;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var l=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=r&&l>o&&(o=l,a=n.x<n.next.x?n:n.next,l===r))return a}n=n.next}while(n!==t);if(!a)return null;var s=a,u=a.x,f=a.y,d=1/0,c;n=a;do r>=n.x&&n.x>=u&&r!==n.x&&Fs(i<f?r:o,i,u,f,i<f?o:r,i,n.x,n.y)&&(c=Math.abs(i-n.y)/(r-n.x),lf(n,e)&&(c<d||c===d&&(n.x>a.x||n.x===a.x&&Fk(a,n)))&&(a=n,d=c)),n=n.next;while(n!==s);return a}function Fk(e,t){return zn(e.prev,e,t.prev)<0&&zn(t.next,e,e.next)<0}function Dk(e,t,n,r){var i=e;do i.z===0&&(i.z=sv(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,$k(i)}function $k(e){var t,n,r,i,o,a,l,s,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,l=0,t=0;t<u&&(l++,r=r.nextZ,!!r);t++);for(s=u;l>0||s>0&&r;)l!==0&&(s===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,l--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return e}function sv(e,t,n,r,i){return e=(e-n)*i|0,t=(t-r)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function jk(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function Fs(e,t,n,r,i,o,a,l){return(i-a)*(t-l)>=(e-a)*(o-l)&&(e-a)*(r-l)>=(n-a)*(t-l)&&(n-a)*(o-l)>=(i-a)*(r-l)}function Bk(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!zk(e,t)&&(lf(e,t)&&lf(t,e)&&Gk(e,t)&&(zn(e.prev,e,t.prev)||zn(e,t.prev,t))||u1(e,t)&&zn(e.prev,e,e.next)>0&&zn(t.prev,t,t.next)>0)}function zn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function u1(e,t){return e.x===t.x&&e.y===t.y}function g9(e,t,n,r){var i=g0(zn(e,t,n)),o=g0(zn(e,t,r)),a=g0(zn(n,r,e)),l=g0(zn(n,r,t));return!!(i!==o&&a!==l||i===0&&m0(e,n,t)||o===0&&m0(e,r,t)||a===0&&m0(n,e,r)||l===0&&m0(n,t,r))}function m0(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function g0(e){return e>0?1:e<0?-1:0}function zk(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&g9(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function lf(e,t){return zn(e.prev,e,e.next)<0?zn(e,t,e.next)>=0&&zn(e,e.prev,t)>=0:zn(e,t,e.prev)<0||zn(e,e.next,t)<0}function Gk(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function v9(e,t){var n=new uv(e.i,e.x,e.y),r=new uv(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function l4(e,t,n,r){var i=new uv(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uv(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}s1.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(cv(e,0,o,n));if(i)for(var l=0,s=t.length;l<s;l++){var u=t[l]*n,f=l<s-1?t[l+1]*n:e.length;a-=Math.abs(cv(e,u,f,n))}var d=0;for(l=0;l<r.length;l+=3){var c=r[l]*n,p=r[l+1]*n,g=r[l+2]*n;d+=Math.abs((e[c]-e[g])*(e[p+1]-e[c+1])-(e[c]-e[p])*(e[g+1]-e[c+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function cv(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}s1.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n};function y9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Vk(e){return e.length===1&&(e=Uk(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Uk(e){return function(t,n){return y9(e(t),n)}}Vk(y9);const Dm=({hulls:e,fill:t,stroke:n,delay:r=0,duration:i=2e3,strokeWidth:o,symbol:a,xDomain:l,yDomain:s,width:u,height:f})=>{const d=T.useRef();T.useRef();const c=T.useRef();return T.useRef(),T.useEffect(()=>{if(!l||!s||!e.length||!(!c.current||JSON.stringify(e[0])!==JSON.stringify(c.current[0])))return;const g=q6(d.current),y=u/(l[1]-l[0]),S=f/(s[1]-s[0]),v=u/2-y*(l[1]+l[0])/2,_=f/2+S*(s[1]+s[0])/2,x=o/Math.sqrt(y*S)/2,O=g.select("g.hull-container");O.attr("transform",`translate(${v}, ${_}) scale(${y}, ${S})`);const I=U6().x(te=>te==null?void 0:te[0]).y(te=>-(te==null?void 0:te[1])).curve(W6);let U=O.selectAll("path.hull").data(e);U.exit().transition().duration(i).delay(r).ease(e4).style("opacity",0).remove(),U.enter().append("path").classed("hull",!0).attr("d",I).style("fill",t).style("stroke",n).style("stroke-width",x).style("opacity",0).transition().delay(r+100).duration(i-100).ease(e4).style("opacity",.75),U.transition().duration(i).delay(r).ease(c9).style("opacity",.75).attrTween("d",function(te,K){const $e=c.current?c.current[K]:null;if(!$e)return()=>I(te);const Ee=Ak(I($e),I(te));return function(Re){return Ee(Re)}}),setTimeout(()=>{c.current=e},i)},[e]),T.useEffect(()=>{if(!l||!s||!e.length)return;const p=q6(d.current),g=u/(l[1]-l[0]),y=f/(s[1]-s[0]),S=u/2-g*(l[1]+l[0])/2,v=f/2+y*(s[1]+s[0])/2,_=o/Math.sqrt(g*y),x=p.select("g.hull-container");x.attr("transform",`translate(${S}, ${v}) scale(${g}, ${y})`);const O=U6().x(U=>U==null?void 0:U[0]).y(U=>-(U==null?void 0:U[1])).curve(W6);let I=x.selectAll("path.hull").data(e);I.enter().append("path").classed("hull",!0).attr("d",O).style("fill",t).style("stroke",n).attr("stroke-width",_).style("opacity",.75),I.exit().remove(),I.attr("d",O)},[t,n,o,l,s,u,f]),b.jsx("svg",{ref:d,className:"hull-plot",width:u,height:f,children:b.jsx("g",{className:"hull-container"})})},$m="https://api.latentscope.com/api";function Hk({dataset:e,indices:t,onSuccess:n}){const[r,i]=T.useState({});T.useEffect(()=>{fetch(`${$m}/tags?dataset=${e==null?void 0:e.id}`).then(d=>d.json()).then(d=>i(d))},[e]);const[o,a]=T.useState([]);T.useEffect(()=>{console.log("TAGSET",r,e);const d=[];for(const c in r)d.push(c);a(d)},[e,r]);const[l,s]=T.useState(""),u=T.useCallback(()=>{console.log("add",l,t),fetch(`${$m}/tags/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e.id,indices:t,tag:l})}).then(d=>d.json()).then(d=>n(d)).catch(d=>console.error("error",d))},[e,l,t]),f=T.useCallback(()=>{console.log("remove",l,t),fetch(`${$m}/tags/remove`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e.id,indices:t,tag:l})}).then(d=>d.json()).then(d=>n(d)).catch(d=>console.error("error",d))},[e,l,t]);return b.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"6px"},children:[b.jsx("div",{className:"tags",style:{display:"flex",flexDirection:"row",gap:"6px"},children:o.map(d=>b.jsx("div",{className:"tag",style:{cursor:"pointer",padding:"2px 6px",border:d==l?"2px solid black":"1px solid gray"},onClick:()=>d==l?s(""):s(d),children:d},d))}),l&&b.jsxs("div",{className:"action",children:[b.jsx("button",{onClick:u,children:"Add"}),b.jsx("button",{onClick:f,children:"Remove"})]})]})}const Wk="https://api.latentscope.com/api";function Xk({dataset:e,scope:t,indices:n,onSuccess:r}){var i;return b.jsx("div",{className:"bulk-clustering",children:b.jsxs("select",{onChange:o=>{console.log("updating to cluster",o.target.value),fetch(`${Wk}/bulk/change-cluster`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_id:e.id,scope_id:t.id,row_ids:n,new_cluster:o.target.value})}).then(a=>a.json()).then(a=>{r()})},value:-1,children:[b.jsx("option",{value:"-1",children:"Select a cluster"}),(i=t==null?void 0:t.cluster_labels_lookup)==null?void 0:i.map((o,a)=>b.jsxs("option",{value:o.cluster,children:[o.cluster,": ",o.label]},a))]})})}const qk="https://api.latentscope.com/api";function Yk({dataset:e,scope:t,indices:n,onSuccess:r}){return b.jsx("div",{children:b.jsxs("button",{onClick:()=>{fetch(`${qk}/bulk/delete-rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset_id:e.id,scope_id:t.id,row_ids:n})}).then(i=>i.json()).then(i=>{r()})},children:["Delete ",n.length," rows"]})})}const mi="https://api.latentscope.com/api",Kk=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),s4=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function jm(e,t,n){return e?e.map(r=>r.hull.map(i=>t[n[i]])):[]}function Qk(){var So;const[e,t]=T.useState(null),{dataset:n,scope:r}=d2(),i=Kh(),o=T.useRef(null),a=T.useRef(null),[l,s]=u();function u(){const[q,Ie]=T.useState([500,500]);return T.useEffect(()=>{function yt(){if(!o.current)return;const{height:dn,width:In}=o.current.getBoundingClientRect();let ai=In>500?500:In-50;Ie([ai,ai])}return window.addEventListener("resize",yt),yt(),setTimeout(yt,100),()=>window.removeEventListener("resize",yt)},[]),q}const[f,d]=T.useState(250);T.useEffect(()=>{const q=new ResizeObserver(yt=>{for(let dn of yt){const{height:In}=dn.contentRect;d(In)}});let Ie=a.current;return Ie?q.observe(Ie):setTimeout(()=>{Ie=a.current,q.observe(Ie)},100),()=>{Ie&&q.unobserve(Ie)}},[]),T.useEffect(()=>{fetch(`${mi}/datasets/${n}/meta`).then(q=>q.json()).then(q=>{console.log("dataset",q),t(q)})},[n,t]);const[c,p]=T.useState([]);T.useEffect(()=>{fetch(`${mi}/datasets/${n}/scopes`).then(q=>q.json()).then(q=>{p(q)})},[n,p]);const[g,y]=T.useState(200),[S,v]=T.useState(null),_=T.useCallback(()=>{fetch(`${mi}/datasets/${n}/scopes/${r}`).then(q=>q.json()).then(q=>{console.log("scope",q),v(q)})},[n,r,v]);T.useEffect(()=>{_()},[n,r,_]);const[x,O]=T.useState(null),[I,U]=T.useState({}),[te,K]=T.useState([]),[$e,Ee]=T.useState([]),[Re,Fe]=T.useState(x==null?void 0:x.id),[Ve,Ce]=T.useState([]);T.useEffect(()=>{fetch(`${mi}/datasets/${n}/embeddings`).then(q=>q.json()).then(q=>{Ce(q)})},[n,Ce]);const[Rt,at]=T.useState([]),[qe,ee]=T.useState([]),[ue,ce]=T.useState([]),[xe,Qe]=T.useState([]),[st,wt]=T.useState({}),[At,$t]=T.useState({}),ct=T.useCallback(()=>{fetch(`${mi}/datasets/${n}/scopes/${S.id}/parquet`).then(q=>q.json()).then(q=>{at(q);let Ie={},yt={};q.forEach((Dn,si)=>{yt[Dn.ls_index]=si,Ie[si]=Dn.ls_index}),wt(Ie),$t(yt);const dn=q.map(Dn=>[Dn.x,Dn.y]);ee(dn);const In=q.map((Dn,si)=>[Dn.x,Dn.y,Dn.cluster]);ce(In),Qe([]);const ai=S.cluster_labels_lookup||[];Ee(ai),K(q.map(Dn=>Dn.cluster));let li={};q.forEach(Dn=>{var si;li[Dn.ls_index]=(si=S.cluster_labels_lookup)==null?void 0:si[Dn.cluster]}),U(li),setTimeout(()=>{ai&&Qe(jm(ai,dn,yt))},100)}).catch(q=>console.error("Fetching data failed",q))},[n,S,Qe,U,Ee,K,ee]);T.useEffect(()=>{S&&(O(Ve.find(q=>q.id==S.embedding_id)),ct())},[ct,S,Ve,Ee,O,Fe]),T.useEffect(()=>{if(x&&x.model_id)Fe(x.id);else if(Ve.length){const q=Ve.find(Ie=>!!Ie.model_id);q&&Fe(q.id)}},[x,Ve,Fe]),T.useEffect(()=>{},[Re]);const Ot=q=>{console.log("selected",q),Fe(q)},Gt=T.useCallback((q,Ie,yt=[])=>{fetch(`${mi}/indexed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:n,indices:q})}).then(dn=>dn.json()).then(dn=>{if(!e)return;let In=dn.map((ai,li)=>({index:q[li],...ai}));Ie(In)})},[e,n]),[Vt,vn]=T.useState({}),[Ut,ln]=T.useState([-1,1]),[ft,kt]=T.useState([-1,1]),jt=T.useCallback((q,Ie)=>{ln(q),kt(Ie)},[ln,kt]),[dt,ut]=T.useState([]),Jt=T.useCallback(q=>{let Ie=q.map(yt=>st[yt]);ut(Ie)},[ut,st]),[Zt,yn]=T.useState(null),[Kn,E]=T.useState(null);T.useEffect(()=>{Zt!=null?Gt([st[Zt]],q=>{E(q[0])}):E(null)},[Zt,E,Gt,st]);const[me,Ue]=T.useState(null);T.useEffect(()=>{Ue(Zt?I[st[Zt]]:null)},[Zt,I,st,Ue]);const[he,Et]=T.useState([]);T.useEffect(()=>{Zt!=null?Et([qe[Zt]]):Et([])},[Zt,qe]);const[lt,Le]=T.useState({}),Tt=T.useCallback(()=>{fetch(`${mi}/tags?dataset=${n}`).then(q=>q.json()).then(q=>Le(q))},[n,Le]);T.useEffect(()=>{Tt()},[Tt]);const qt=T.useMemo(()=>{const q=[];for(const Ie in lt)q.push(Ie);return q},[lt]),[tt,It]=T.useState(qt[0]),[xn,Ht]=T.useState([]);T.useEffect(()=>{if(lt[tt]){const q=lt[tt].map(Ie=>qe[Ie]);Ht(q)}else Ht([]),Vt&&Vt.config},[lt,tt,qe,Vt,Ht]);const[sn,gn]=T.useState([]),[cr,Qn]=T.useState([]),gr=T.useCallback(q=>{fetch(`${mi}/search/nn?dataset=${n}&query=${q}&embedding_id=${Re}`).then(Ie=>Ie.json()).then(Ie=>{let yt=Ie.indices.filter(dn=>At[dn]>=0);gn(yt)})},[Re,n,Vt,Qn,gn]),[Tn,Fr]=T.useState([]);T.useEffect(()=>{const q=sn.map(Ie=>qe[Ie]);Fr(q)},[sn,qe]);const[Bt,Mn]=T.useState(null),[vt,Wt]=T.useState([]);T.useEffect(()=>{if(Bt){const q=ue.filter(Ie=>Ie[2]==Bt.cluster);Wt(q)}else Wt([]),Vt&&Vt.config},[Bt,qe,Vt,Wt]);const[tn,Nn]=T.useState((Bt==null?void 0:Bt.label)||""),[it,Ct]=T.useState("");T.useEffect(()=>{Ct("")},[Bt]);const Mt=T.useCallback(q=>{console.log("new cluster",q),fetch(`${mi}/datasets/${n}/scopes/${S.id}/new-cluster?label=${q}`).then(Ie=>Ie.json()).then(Ie=>{console.log("what happened?",Ie),_()})},[n,S,_]);T.useEffect(()=>{Nn((Bt==null?void 0:Bt.label)||"")},[Bt]);const En=T.useCallback(q=>{Vt==null||Vt.zoomToPoints([q],{transition:!0,padding:.9,transitionDuration:1500})},[Vt]),Cn=T.useCallback(q=>{yn(q)},[yn]),Zn=T.useCallback((q,Ie)=>{console.log("update label",q,Ie),fetch(`${mi}/bulk/change-cluster-name?dataset_id=${n}&scope_id=${S.id}&cluster=${q}&new_label=${Ie}`).then(yt=>yt.json()).then(yt=>{console.log("got new labels",yt),_()})},[n,S]),or=T.useCallback(()=>{Mn(null)},[]),[en,Rn]=T.useState([]),[et,vr]=T.useState({}),ii=T.useMemo(()=>e!=null&&e.column_metadata?Object.keys(e.column_metadata).map(q=>({column:q,categories:e.column_metadata[q].categories,counts:e.column_metadata[q].counts})).filter(q=>q.counts):[],[e]),[Ko,Dr]=T.useState([]);T.useEffect(()=>{const q=en.map(Ie=>qe[At[Ie]]);Dr(q)},[en,qe,At]);const Tr=T.useCallback(q=>{let Ie=[];Object.keys(q).forEach(yt=>{let dn=q[yt];dn&&Ie.push({column:yt,type:"eq",value:dn})}),console.log("query",Ie),fetch(`${mi}/column-filter`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:n,filters:Ie})}).then(yt=>yt.json()).then(yt=>{let dn=yt.indices.filter(In=>At[In]>=0);Rn(dn)})},[n,At,Rn]);T.useEffect(()=>{let q=Object.values(et).filter(Ie=>!!Ie).length;console.log("active filters",q,et),q>0&&Tr(et)},[et,Tr]);const $r=T.useCallback(()=>{ut([]),gn([]),It(null),Rn([])},[ut,gn,It,Rn]),an=T.useCallback(q=>q.filter(Ie=>At[Ie]>=0),[At]);function Ln(...q){return q=q.filter(Ie=>Ie.length>0),q.length===0?[]:q.length==1?q[0]:q.reduce((Ie,yt)=>{const dn=new Set(yt);return Ie.filter(In=>dn.has(In))})}const[yr,jr]=T.useState([]);T.useEffect(()=>{const q=Rt.filter(dn=>dn.cluster==(Bt==null?void 0:Bt.cluster)).map(dn=>dn.ls_index),Ie=an(lt[tt]||[]);let yt=Ln(dt||[],sn||[],q||[],Ie||[],en||[]);yt.length==0&&dt.length>0&&(yt=dt),jr(yt)},[Rt,dt,sn,Bt,lt,tt,At,en]);const[wo,oi]=T.useState([]);T.useEffect(()=>{const q=yr.map(Ie=>qe[At[Ie]]);oi(q)},[yr,qe,At]);const[Rr,Lr]=T.useState(null);return e?b.jsxs("div",{ref:o,className:"container",children:[b.jsxs("div",{className:"left-column",children:[b.jsxs("div",{className:"summary",children:[b.jsxs("div",{className:"scope-card",children:[s4()?b.jsx("i",{children:"Use a desktop browser for full interactivity!"}):null,b.jsxs("div",{className:"heading",children:[b.jsx("select",{className:"scope-selector",onChange:q=>{or(),y(2e3),i(`/datasets/${e==null?void 0:e.id}/explore/${q.target.value}`)},value:S==null?void 0:S.id,children:c.map((q,Ie)=>b.jsxs("option",{value:q.id,children:[q.label," (",q.id,")"]},Ie))}),null,null]}),(S==null?void 0:S.ls_version)&&b.jsxs("span",{children:[b.jsx("span",{children:S==null?void 0:S.description}),b.jsx("br",{}),b.jsx("span",{children:x==null?void 0:x.model_id}),b.jsxs("span",{children:[$e==null?void 0:$e.length," clusters"]})]}),!(S!=null&&S.ls_version)&&b.jsxs("div",{className:"scope-version-warning",children:[b.jsx("span",{className:"warning-header",children:"Outdated Scope!"}),b.jsxs("span",{children:[' please "Overwrite" the scope in the last step on the ',b.jsx(eu,{to:`/datasets/${e==null?void 0:e.id}/setup/${S==null?void 0:S.id}`,children:"Configure Page"})," to update."]})]})]}),b.jsx("div",{className:"dataset-card",children:b.jsxs("span",{children:[b.jsx("b",{children:n}),"  ",S==null?void 0:S.rows,"/",e==null?void 0:e.length," rows"]})})]}),b.jsxs("div",{className:"umap-container",children:[b.jsx("div",{className:"scatters",style:{width:l,height:s},children:qe.length?b.jsxs(b.Fragment,{children:[!Kk()&&S?b.jsx(D2,{points:ue,duration:2e3,width:l,height:s,colorScaleType:"categorical",onScatter:vn,onView:jt,onSelect:Jt,onHover:Cn}):b.jsx(Hs,{points:qe,fill:"gray",size:"8",xDomain:Ut,yDomain:ft,width:l,height:s}),me&&me.hull&&!S.ignore_hulls&&S.cluster_labels_lookup?b.jsx(Dm,{hulls:jm([me],qe,At),fill:"lightgray",duration:0,xDomain:Ut,yDomain:ft,width:l,height:s}):null,Bt&&Bt.hull&&!S.ignore_hulls&&S.cluster_labels_lookup?b.jsx(Dm,{hulls:jm([Bt],qe,At),fill:"darkgray",strokeWidth:2,duration:0,xDomain:Ut,yDomain:ft,width:l,height:s}):null,xe.length&&!S.ignore_hulls?b.jsx(Dm,{hulls:xe,stroke:"black",fill:"none",delay:g,duration:200,strokeWidth:1,xDomain:Ut,yDomain:ft,width:l,height:s}):null,b.jsx(Hs,{points:wo,stroke:"black",fill:"steelblue",size:"8",xDomain:Ut,yDomain:ft,width:l,height:s}),b.jsx(Hs,{points:he,stroke:"black",fill:"orange",size:"16",xDomain:Ut,yDomain:ft,width:l,height:s})]}):null}),s4()?null:b.jsxs("div",{className:"hovered-point",children:[me?b.jsxs("span",{children:[b.jsxs("span",{className:"key",children:["Cluster ",me.cluster,":"]}),b.jsx("span",{className:"value",children:me.label})]}):null,Kn&&Object.keys(Kn).map((q,Ie)=>{let yt=Kn[q];typeof yt=="object"&&!Array.isArray(yt)&&(yt=JSON.stringify(yt));let dn=e.column_metadata&&e.column_metadata[q],In;return dn&&dn.image?In=b.jsx("span",{className:"value",children:b.jsx("img",{src:yt,alt:q,height:64})},Ie):dn&&dn.url?In=b.jsx("span",{className:"value",children:b.jsx("a",{href:yt,children:"url"})},Ie):dn&&dn.type=="array"?In=b.jsxs("span",{className:"value",children:["[",yt.length,"]"]},Ie):In=b.jsx("span",{className:"value",children:yt},Ie),b.jsxs("span",{children:[b.jsxs("span",{className:"key",children:[q,":"]}),In]},q)})]})]})]}),b.jsxs("div",{className:"data",children:[b.jsxs("div",{className:"filters-container",ref:a,children:[b.jsxs("div",{className:`filter-row search-box ${sn.length?"active":""}`,children:[b.jsx("div",{className:"filter-cell left",children:b.jsxs("form",{onSubmit:q=>{q.preventDefault(),gr(q.target.elements.searchBox.value)},children:[b.jsx("input",{type:"text",id:"searchBox",placeholder:"Nearest Neighbor Search..."}),b.jsx("button",{type:"submit",children:"🔍"})]})}),b.jsx("div",{className:"filter-cell middle",children:b.jsxs("span",{children:[sn.length?b.jsxs("span",{children:[sn.length," rows"]}):null,sn.length>0?b.jsx("button",{className:"deselect",onClick:()=>{gn([]),document.getElementById("searchBox").value=""},children:"X"}):null]})}),b.jsxs("div",{className:"filter-cell right",children:[b.jsx("label",{htmlFor:"embeddingModel"}),b.jsx("select",{id:"embeddingModel",onChange:q=>Ot(q.target.value),value:Re,children:Ve.filter(q=>q.model_id).map((q,Ie)=>b.jsxs("option",{value:q.id,children:[q.id," - ",q.model_id," - ",q.dimensions]},Ie))})]})]}),b.jsxs("div",{className:`clusters-select filter-row  ${vt.length?"active":""}`,children:[b.jsx("div",{className:"filter-cell left",children:b.jsxs("select",{onChange:q=>{if(q.target.value==-1){Mn(null);return}const Ie=$e.find(yt=>yt.cluster===+q.target.value);Ie&&Mn(Ie)},value:(Bt==null?void 0:Bt.cluster)>=0?Bt.cluster:-1,children:[b.jsx("option",{value:"-1",children:"Filter by cluster"}),$e==null?void 0:$e.map((q,Ie)=>b.jsxs("option",{value:q.cluster,children:[q.cluster,": ",q.label]},Ie))]})}),b.jsx("div",{className:"filter-cell middle",children:vt.length?b.jsxs("span",{children:[" ",vt.length," rows",b.jsx("button",{className:"deselect",onClick:()=>{Mn(null)},children:"X"})]}):null}),b.jsx("div",{className:"filter-cell right",children:Bt?b.jsxs("form",{onSubmit:q=>{q.preventDefault(),Zn(Bt.cluster,tn)},children:[b.jsx("input",{className:"update-cluster-label",type:"text",id:"update-label",value:tn,onChange:q=>Nn(q.target.value)}),b.jsx("button",{type:"submit",children:"✍️"})]}):b.jsxs("form",{onSubmit:q=>{q.preventDefault();const yt=new FormData(q.target).get("new-label");console.log("new label",yt),Mt(yt)},children:[b.jsx("input",{type:"text",id:"new-label",name:"new-label",className:"new-cluster-label",value:it,onChange:q=>Ct(q.target.value),placeholder:"New Cluster"}),b.jsx("button",{type:"submit",children:"➕️ Cluster"})]})})]}),b.jsxs("div",{className:`filter-row tags-box ${(So=an(lt[tt]||[]))!=null&&So.length?"active":""}`,children:[b.jsx("div",{className:"filter-cell left tags-select",children:qt.map((q,Ie)=>b.jsxs("button",{className:`tag-button ${tt===q?"selected":""}`,onClick:()=>It(tt===q?null:q),children:[q," (",an(lt[q]||[]).length,")"]},Ie))}),b.jsx("div",{className:"filter-cell middle",children:tt&&an(lt[tt]||[]).length?b.jsxs("span",{children:[an(lt[tt]||[]).length," rows",b.jsx("button",{className:"deselect",onClick:()=>{It(null)},children:"X"})]}):null}),b.jsx("div",{className:"filter-cell right new-tag",children:tt?b.jsx("form",{onSubmit:q=>{q.preventDefault(),fetch(`${mi}/tags/delete?dataset=${n}&tag=${tt}`).then(Ie=>Ie.json()).then(Ie=>{console.log("deleted tag",Ie),It(null),Tt()})},children:b.jsxs("button",{type:"submit",children:["➖ ",tt]})}):b.jsxs("form",{onSubmit:q=>{q.preventDefault();const Ie=q.target.elements.newTag.value;fetch(`${mi}/tags/new?dataset=${n}&tag=${Ie}`).then(yt=>yt.json()).then(yt=>{console.log("new tag",yt),q.target.elements.newTag.value="",Tt()})},children:[b.jsx("input",{type:"text",id:"newTag",placeholder:"New Tag"}),b.jsx("button",{type:"submit",children:"➕ Tag"})]})})]}),ii!=null&&ii.length?b.jsxs("div",{className:`filter-row column-filter ${en!=null&&en.length?"active":""}`,children:[b.jsx("div",{className:"filter-cell left",children:ii.map(q=>b.jsxs("span",{children:[q.column,":",b.jsxs("select",{onChange:Ie=>{let yt={...et};yt[q.column]=Ie.target.value,vr(yt)},value:et[q.column]||"",children:[b.jsx("option",{value:"",children:"Select a value"}),q.categories.map(Ie=>b.jsxs("option",{value:Ie,children:[Ie," (",q.counts[Ie],")"]},Ie))]})]},q.column))}),b.jsxs("div",{className:"filter-cell middle",children:[en!=null&&en.length?b.jsxs("span",{children:[en==null?void 0:en.length," rows"]}):null,en!=null&&en.length?b.jsx("button",{className:"deselect",onClick:()=>{vr({}),Rn([])},children:"X"}):null]}),b.jsx("div",{className:"filter-cell right"})]}):null,b.jsxs("div",{className:`filter-row ${dt!=null&&dt.length?"active":""}`,children:[b.jsx("div",{className:"filter-cell left",children:"Shift+Drag on the map to filter by points."}),b.jsxs("div",{className:"filter-cell middle",children:[(dt==null?void 0:dt.length)>0?b.jsxs("span",{children:[dt==null?void 0:dt.length," rows"]}):null,(dt==null?void 0:dt.length)>0?b.jsx("button",{className:"deselect",onClick:()=>{ut([]),Vt==null||Vt.select([])},children:"X"}):null]}),b.jsx("div",{className:"filter-cell right"})]}),b.jsxs("div",{className:"filter-row",children:[b.jsx("div",{className:"filter-cell left",children:yr.length>0?"Intersection of filtered rows:":"No rows filtered"}),b.jsx("div",{className:"filter-cell middle intersected-count",children:b.jsxs("span",{children:[yr.length," rows"]})}),b.jsxs("div",{className:"filter-cell right bulk-actions",children:[b.jsxs("div",{className:"bulk-actions-buttons",children:["Bulk Actions:",b.jsx("button",{className:`bulk ${Rr=="tag"?"active":""}`,onClick:()=>Rr=="tag"?Lr(null):Lr("tag"),children:"🏷️"}),b.jsx("button",{className:`bulk ${Rr=="cluster"?"active":""}`,onClick:()=>Rr=="cluster"?Lr(null):Lr("cluster"),children:"️📍"}),b.jsx("button",{className:`bulk ${Rr=="delete"?"active":""}`,onClick:()=>Rr=="delete"?Lr(null):Lr("delete"),children:"🗑️"})]}),b.jsxs("div",{className:"bulk-actions-action",children:[Rr=="tag"?b.jsx(Hk,{dataset:e,indices:yr,onSuccess:()=>{Lr(null),Tt()}}):null,Rr=="cluster"?b.jsx(Xk,{dataset:e,scope:S,indices:yr,onSuccess:()=>{Lr(null),_(),ct()}}):null,Rr=="delete"?b.jsx(Yk,{dataset:e,scope:S,indices:yr,onSuccess:()=>{Lr(null),$r(),_(),ct()}}):null]})]})]})]}),b.jsx(lx,{dataset:e,scope:S,indices:yr,clusterMap:I,clusterLabels:$e,tagset:lt,onTagset:Tt,onScope:()=>{_(),ct()},onHover:q=>Cn(At[q]),onClick:En,height:`calc(100% - ${f+62}px)`})]})]}):b.jsx("div",{children:"Loading..."})}const u4="https://api.latentscope.com/api";x9.propTypes={data:Ge.array.isRequired,tagset:Ge.object,dataset:Ge.object,maxRows:Ge.number,onTagset:Ge.func,onHover:Ge.func,onClick:Ge.func};function x9({data:e,tagset:t,dataset:n,maxRows:r,onTagset:i,onHover:o,onClick:a}){if(!e.length)return b.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let s;function u(d,c){console.log("tag",d),console.log("index",c),console.log("tagset",t),console.log("tagset[tag]",t[d]),t[d].includes(c)?(console.log("removing"),fetch(`${u4}/tags/remove?dataset=${n==null?void 0:n.id}&tag=${d}&index=${c}`).then(p=>p.json()).then(p=>{console.log("removed",p),i(p)})):(console.log("adding"),fetch(`${u4}/tags/add?dataset=${n==null?void 0:n.id}&tag=${d}&index=${c}`).then(p=>p.json()).then(p=>{console.log("added",p),i(p)}))}t&&(s=Object.keys(t));const f=r?e.slice(0,r):e;return b.jsxs(b.Fragment,{children:[b.jsxs("table",{className:"datatable",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[l.map((d,c)=>b.jsx("th",{children:d},c)),s?b.jsx("th",{children:"tags"}):null]})}),b.jsx("tbody",{children:f.map((d,c)=>b.jsxs("tr",{onMouseEnter:()=>o&&o(d.index),onMouseLeave:()=>o&&o(),onClick:()=>a&&a(d.index),children:[l.map((p,g)=>{let y=d[p];typeof y=="object"&&!Array.isArray(y)&&(y=JSON.stringify(y));let S=(n==null?void 0:n.column_metadata)&&(n==null?void 0:n.column_metadata[p]);return S&&S.image?b.jsx("td",{children:b.jsx("img",{src:y,alt:p,height:64})},g):S&&S.url?b.jsx("td",{children:b.jsx("a",{href:y,children:"url"})},g):S&&S.type=="array"?b.jsxs("td",{children:["[",y.length,"]"]},g):b.jsx("td",{children:y},g)}),s?b.jsx("td",{children:s.map((p,g)=>b.jsx("button",{onClick:y=>{u(p,d.index),y.preventDefault(),y.stopPropagation()},className:t[p].includes(d.index)?"tag-active":"tag-inactive",children:p},g))}):null]},c))})]}),r&&e.length>r?b.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const Zk="https://api.latentscope.com/api";fv.propTypes={dataset:Ge.object.isRequired,indices:Ge.array.isRequired,distances:Ge.array,clusterIndices:Ge.array,clusterLabels:Ge.array,maxRows:Ge.number,tagset:Ge.object,onHover:Ge.func,onClick:Ge.func,onTagset:Ge.func};function fv({dataset:e,indices:t,distances:n=[],clusterIndices:r=[],clusterLabels:i=[],maxRows:o,tagset:a,onHover:l,onClick:s,onTagset:u}){const[f,d]=T.useState([]),c=T.useCallback(p=>{e&&fetch(`${Zk}/indexed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e.id,indices:p})}).then(g=>g.json()).then(g=>{let y=g.map((S,v)=>{let _=p[v],x={index:_,...S};return n&&n.length&&(x.distance=n[v]),r&&r.length&&i&&i.length&&(x.cluster=i[r[_].cluster].label),x});d(y)})},[e,n,r,i]);return T.useEffect(()=>{t&&t.length&&c(t)},[t]),b.jsx("div",{children:b.jsx(x9,{data:f,tagset:a,dataset:e,maxRows:o,onTagset:u,onHover:l,onClick:s})})}const Jk="_container_j6tyv_1",eM="_data_j6tyv_12",tM="_scatters_j6tyv_25",nM="_scatter_j6tyv_25",rM="_controls_j6tyv_36",iM="_summary_j6tyv_42",oM="_heading_j6tyv_52",aM="_key_j6tyv_104",lM="_value_j6tyv_108",sM="_deselect_j6tyv_248",uM="_cluster_j6tyv_280",hr={container:Jk,data:eM,"umap-container":"_umap-container_j6tyv_19",scatters:tM,scatter:nM,"tab-tables":"_tab-tables_j6tyv_29",controls:rM,summary:iM,heading:oM,"scope-card":"_scope-card_j6tyv_71","scope-selector":"_scope-selector_j6tyv_76","umap-selectors":"_umap-selectors_j6tyv_80","hovered-point":"_hovered-point_j6tyv_98",key:aM,value:lM,"tab-header":"_tab-header_j6tyv_125","tab-active":"_tab-active_j6tyv_154","tab-content":"_tab-content_j6tyv_175","tags-box":"_tags-box_j6tyv_214","new-tag":"_new-tag_j6tyv_222","search-box":"_search-box_j6tyv_238","tab-neighbors":"_tab-neighbors_j6tyv_248",deselect:sM,"slide-bar":"_slide-bar_j6tyv_261",cluster:uM};console.log("styles",hr);const va="https://api.latentscope.com/api",cM=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),fM=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function dM(){const[e,t]=T.useState(null),{dataset:n}=d2();Kh();const r=T.useRef(null),[i,o]=a();function a(){const[me,Ue]=T.useState([500,500]);return T.useEffect(()=>{function he(){if(!r.current)return;const{height:Et,width:lt}=r.current.getBoundingClientRect();Ue([lt-15,Et-25])}return window.addEventListener("resize",he),he(),setTimeout(he,200),()=>window.removeEventListener("resize",he)},[]),me}const l=[{id:0,name:"Selected"},{id:1,name:"Search"}],[s,u]=T.useState(0);T.useEffect(()=>{fetch(`${va}/datasets/${n}/meta`).then(me=>me.json()).then(me=>{console.log("dataset",me),t(me)})},[n,t]);const[f,d]=T.useState([]),[c,p]=T.useState([]);T.useEffect(()=>{Promise.all([fetch(`${va}/datasets/${n}/embeddings`).then(me=>me.json()),fetch(`${va}/datasets/${n}/umaps`).then(me=>me.json())]).then(([me,Ue])=>{console.log("embeddings",me),console.log("umaps",Ue),d(me),Ue.sort((he,Et)=>Et.align_id<he.align_id?-1:Et.align_id>he.align_id?1:he.id<Et.id?-1:he.id>Et.id?1:0),p(Ue)})},[n,d,p]);const[g,y]=T.useState("left"),[S,v]=T.useState(null),[_,x]=T.useState(null);T.useEffect(()=>{c&&(v(c[0]),x(c[1]))},[c]);const[O,I]=T.useState(null),[U,te]=T.useState([]),[K,$e]=T.useState([]),Ee=T.useRef([]),Re=T.useRef([]);T.useEffect(()=>{if(c&&S&&_&&g){const me=g==="left"?S:_;Promise.all([fetch(`${va}/datasets/${n}/umaps/${me.id}`).then(Ue=>Ue.json()),fetch(`${va}/datasets/${n}/umaps/${me.id}/points`).then(Ue=>Ue.json())]).then(([Ue,he])=>{I(Ue);const Et=he.map(Le=>[Le.x,Le.y]);te(Et),Re.current=Et;const lt=he.map((Le,Tt)=>{let qt=Ee.current[Tt];return[Le.x,Le.y,qt?qt[2]:0]});$e(lt),Ee.current=lt}).catch(Ue=>console.error("Fetching data failed",Ue))}},[n,g,S,_,c,I,te,$e]);let Fe=T.useRef(!1),Ve=T.useRef("");const[Ce,Rt]=T.useState(!1);T.useEffect(()=>{let me=(S==null?void 0:S.id)+(_==null?void 0:_.id)+Fe.current;S&&_&&U.length&&Ve.current!==me&&(Rt(!0),fetch(`${va}/search/compare?dataset=${n}&umap_left=${S.id}&umap_right=${_.id}&k=10`).then(Ue=>Ue.json()).then(Ue=>{const he=Bx(Tx(Ue),[0,1]),Et=Re.current.map((lt,Le)=>[lt[0],lt[1],he(Ue[Le])]);$e(Et),Ee.current=Et,Rt(!1),Fe.current=!0,Ve.current=(S==null?void 0:S.id)+(_==null?void 0:_.id)+Fe.current}))},[n,S,_,U]);const[at,qe]=T.useState(null);T.useEffect(()=>{f&&qe(f[0])},[f,qe]);const ee=T.useCallback(me=>{console.log("selected",me),qe(f.find(Ue=>Ue.id==me))},[f]);T.useCallback((me,Ue,he=[])=>{fetch(`${va}/indexed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:n,indices:me})}).then(Et=>Et.json()).then(Et=>{if(!e)return;let lt=Et.map((Le,Tt)=>({index:me[Tt],...Le}));Ue(lt)})},[e,n]);const[ue,ce]=T.useState({}),[xe,Qe]=T.useState([-1,1]),[st,wt]=T.useState([-1,1]),At=T.useCallback((me,Ue)=>{Qe(me),wt(Ue)},[Qe,wt]),[$t,ct]=T.useState([]),Ot=T.useCallback(me=>{console.log("handle selected",me),ct(me),u(0)},[ct,u]),[Gt,Vt]=T.useState(null);T.useState(null);const[vn,Ut]=T.useState([]);T.useEffect(()=>{Gt!=null?Ut([U[Gt]]):Ut([])},[Gt,U]);const[ln,ft]=T.useState([]),[kt,jt]=T.useState([]),dt=T.useCallback(me=>{fetch(`${va}/search/nn?dataset=${n}&query=${me}&embedding_id=${at.id}&dimensions=${at.dimensions}`).then(Ue=>Ue.json()).then(Ue=>{jt(Ue.distances),ft(Ue.indices),ue==null||ue.zoomToPoints(Ue.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[at,n,ue,jt,ft]),[ut,Jt]=T.useState([]);T.useEffect(()=>{const me=ln.map(Ue=>U[Ue]);Jt(me)},[ln,U]);const Zt=T.useCallback(me=>{ue==null||ue.zoomToPoints([me],{transition:!0,padding:.9,transitionDuration:1500})},[ue]),yn=T.useCallback(me=>{Vt(me)},[Vt]),Kn=T.useCallback(me=>{v(c.find(Ue=>Ue.id==me.target.value)),y("left")},[c,v,y]),E=T.useCallback(me=>{x(c.find(Ue=>Ue.id==me.target.value)),y("right")},[c,x,y]);return e?b.jsxs("div",{className:hr.container,children:[b.jsx("div",{className:hr.controls,children:b.jsxs("div",{className:hr.summary,children:[b.jsxs("div",{className:hr["scope-card"],children:[fM()?b.jsx("i",{children:"Use a desktop browser for full interactivity!"}):null,b.jsxs("div",{className:hr.heading,children:[b.jsx("b",{children:n}),b.jsxs("span",{children:[e==null?void 0:e.length," rows"]}),null]})]}),b.jsxs("div",{className:hr["umap-selectors"],children:[b.jsx("select",{name:"left",value:S==null?void 0:S.id,onChange:Kn,children:c.map((me,Ue)=>{let he=f.find(Et=>me.embedding_id==Et.id);return b.jsxs("option",{value:me.id,children:[me.embedding_id," - ",me.id," - ",he==null?void 0:he.model_id," [",he==null?void 0:he.dimensions,"] ",me.align_id]},Ue)})}),b.jsxs("div",{children:[b.jsxs("label",{children:["👈",b.jsx("input",{type:"radio",value:"left",name:"direction",checked:g==="left",onChange:()=>y("left")})]}),b.jsxs("label",{children:[b.jsx("input",{type:"radio",value:"right",name:"direction",checked:g==="right",onChange:()=>y("right")})," 👉"]})]}),b.jsx("select",{name:"right",onChange:E,value:_==null?void 0:_.id,children:c.map((me,Ue)=>{let he=f.find(Et=>me.embedding_id==Et.id);return b.jsxs("option",{value:me.id,children:[me.embedding_id," - ",me.id," - ",he==null?void 0:he.model_id," [",he==null?void 0:he.dimensions,"] ",me.align_id]},Ue)})})]})]})}),b.jsx("div",{ref:r,className:hr["umap-container"],children:b.jsx("div",{className:hr.scatters,style:{width:i,height:o},children:U.length?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:hr.scatter,children:cM()?b.jsx(Hs,{points:U,fill:"gray",size:"8",xDomain:xe,yDomain:st,width:i,height:o}):b.jsx(D2,{points:K,duration:2e3,pointScale:1.5,width:i,height:o,colorScaleType:"continuous",colorInterpolator:pR,opacityBy:"valueA",onScatter:ce,onView:At,onSelect:Ot,onHover:yn})}),b.jsx(Hs,{points:ut,stroke:"black",fill:"steelblue",size:"8",xDomain:xe,yDomain:st,width:i,height:o}),b.jsx(Hs,{points:vn,stroke:"black",fill:"orange",size:"16",xDomain:xe,yDomain:st,width:i,height:o})]}):null})}),b.jsxs("div",{className:hr.data,children:[b.jsx("div",{className:hr["tab-header"],children:l.map(me=>b.jsx("button",{onClick:()=>u(me.id),className:me.id===s?hr["tab-active"]:hr["tab-inactive"],children:me.name},me.id))}),s===0?b.jsxs("div",{className:hr["tab-content"],children:[b.jsxs("span",{children:["Selected: ",$t==null?void 0:$t.length,($t==null?void 0:$t.length)>0?b.jsx("button",{className:hr.deselect,onClick:()=>{ct([]),ue==null||ue.select([]),ue==null||ue.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),($t==null?void 0:$t.length)>0?b.jsx(fv,{indices:$t,dataset:e,maxRows:150,onHover:yn,onClick:Zt}):null]}):null,s===1?b.jsxs("div",{className:hr["tab-content"],children:[b.jsx("div",{className:hr["search-box"],children:b.jsxs("form",{onSubmit:me=>{me.preventDefault(),dt(me.target.elements.searchBox.value),u(1)},children:[b.jsx("input",{type:"text",id:"searchBox"}),b.jsx("button",{type:"submit",children:"Similarity Search"}),b.jsx("br",{}),b.jsx("label",{htmlFor:"embeddingModel"}),b.jsx("select",{id:"embeddingModel",onChange:me=>ee(me.target.value),defaultValue:at==null?void 0:at.id,children:f.map((me,Ue)=>b.jsxs("option",{value:me.id,children:[me.id," - ",me.model_id," - ",me.dimensions]},Ue))})]})}),b.jsxs("span",{children:[ln.length?b.jsxs("span",{children:["Nearest Neighbors: ",ln.length," (capped at 150) "]}):null,ln.length>0?b.jsx("button",{className:hr.deselect,onClick:()=>{ft([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),ln.length>0?b.jsx(fv,{indices:ln,distances:kt,dataset:e,onHover:yn,onClick:Zt}):null]}):null]})]}):b.jsx("div",{children:"Loading..."})}const ou=Math.min,Tl=Math.max,Rh=Math.round,v0=Math.floor,Ba=e=>({x:e,y:e}),hM={left:"right",right:"left",bottom:"top",top:"bottom"},pM={start:"end",end:"start"};function dv(e,t,n){return Tl(e,ou(t,n))}function xf(e,t){return typeof e=="function"?e(t):e}function $l(e){return e.split("-")[0]}function _f(e){return e.split("-")[1]}function _9(e){return e==="x"?"y":"x"}function V2(e){return e==="y"?"height":"width"}function c1(e){return["top","bottom"].includes($l(e))?"y":"x"}function U2(e){return _9(c1(e))}function mM(e,t,n){n===void 0&&(n=!1);const r=_f(e),i=U2(e),o=V2(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Lh(a)),[a,Lh(a)]}function gM(e){const t=Lh(e);return[hv(e),t,hv(t)]}function hv(e){return e.replace(/start|end/g,t=>pM[t])}function vM(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:a;default:return[]}}function yM(e,t,n,r){const i=_f(e);let o=vM($l(e),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(hv)))),o}function Lh(e){return e.replace(/left|right|bottom|top/g,t=>hM[t])}function xM(e){return{top:0,right:0,bottom:0,left:0,...e}}function w9(e){return typeof e!="number"?xM(e):{top:e,right:e,bottom:e,left:e}}function Ph(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function c4(e,t,n){let{reference:r,floating:i}=e;const o=c1(t),a=U2(t),l=V2(a),s=$l(t),u=o==="y",f=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,c=r[l]/2-i[l]/2;let p;switch(s){case"top":p={x:f,y:r.y-i.height};break;case"bottom":p={x:f,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(_f(t)){case"start":p[a]-=c*(n&&u?-1:1);break;case"end":p[a]+=c*(n&&u?-1:1);break}return p}const _M=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),s=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:d}=c4(u,r,s),c=r,p={},g=0;for(let y=0;y<l.length;y++){const{name:S,fn:v}=l[y],{x:_,y:x,data:O,reset:I}=await v({x:f,y:d,initialPlacement:r,placement:c,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});f=_??f,d=x??d,p={...p,[S]:{...p[S],...O}},I&&g<=50&&(g++,typeof I=="object"&&(I.placement&&(c=I.placement),I.rects&&(u=I.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):I.rects),{x:f,y:d}=c4(u,c,s)),y=-1)}return{x:f,y:d,placement:c,strategy:i,middlewareData:p}};async function S9(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:a,elements:l,strategy:s}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:c=!1,padding:p=0}=xf(t,e),g=w9(p),S=l[c?d==="floating"?"reference":"floating":d],v=Ph(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(S)))==null||n?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:s})),_=d==="floating"?{...a.floating,x:r,y:i}:a.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),O=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},I=Ph(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:x,strategy:s}):_);return{top:(v.top-I.top+g.top)/O.y,bottom:(I.bottom-v.bottom+g.bottom)/O.y,left:(v.left-I.left+g.left)/O.x,right:(I.right-v.right+g.right)/O.x}}const wM=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:l,middlewareData:s}=t,{element:u,padding:f=0}=xf(e,t)||{};if(u==null)return{};const d=w9(f),c={x:n,y:r},p=U2(i),g=V2(p),y=await a.getDimensions(u),S=p==="y",v=S?"top":"left",_=S?"bottom":"right",x=S?"clientHeight":"clientWidth",O=o.reference[g]+o.reference[p]-c[p]-o.floating[g],I=c[p]-o.reference[p],U=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let te=U?U[x]:0;(!te||!await(a.isElement==null?void 0:a.isElement(U)))&&(te=l.floating[x]||o.floating[g]);const K=O/2-I/2,$e=te/2-y[g]/2-1,Ee=ou(d[v],$e),Re=ou(d[_],$e),Fe=Ee,Ve=te-y[g]-Re,Ce=te/2-y[g]/2+K,Rt=dv(Fe,Ce,Ve),at=!s.arrow&&_f(i)!=null&&Ce!==Rt&&o.reference[g]/2-(Ce<Fe?Ee:Re)-y[g]/2<0,qe=at?Ce<Fe?Ce-Fe:Ce-Ve:0;return{[p]:c[p]+qe,data:{[p]:Rt,centerOffset:Ce-Rt-qe,...at&&{alignmentOffset:qe}},reset:at}}}),SM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:l,platform:s,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:c,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...S}=xf(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=$l(i),_=$l(l)===l,x=await(s.isRTL==null?void 0:s.isRTL(u.floating)),O=c||(_||!y?[Lh(l)]:gM(l));!c&&g!=="none"&&O.push(...yM(l,y,g,x));const I=[l,...O],U=await S9(t,S),te=[];let K=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&te.push(U[v]),d){const Fe=mM(i,a,x);te.push(U[Fe[0]],U[Fe[1]])}if(K=[...K,{placement:i,overflows:te}],!te.every(Fe=>Fe<=0)){var $e,Ee;const Fe=((($e=o.flip)==null?void 0:$e.index)||0)+1,Ve=I[Fe];if(Ve)return{data:{index:Fe,overflows:K},reset:{placement:Ve}};let Ce=(Ee=K.filter(Rt=>Rt.overflows[0]<=0).sort((Rt,at)=>Rt.overflows[1]-at.overflows[1])[0])==null?void 0:Ee.placement;if(!Ce)switch(p){case"bestFit":{var Re;const Rt=(Re=K.map(at=>[at.placement,at.overflows.filter(qe=>qe>0).reduce((qe,ee)=>qe+ee,0)]).sort((at,qe)=>at[1]-qe[1])[0])==null?void 0:Re[0];Rt&&(Ce=Rt);break}case"initialPlacement":Ce=l;break}if(i!==Ce)return{reset:{placement:Ce}}}return{}}}};async function EM(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=$l(n),l=_f(n),s=c1(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&s?-1:1,d=xf(t,e);let{mainAxis:c,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),s?{x:p*f,y:c*u}:{x:c*u,y:p*f}}const CM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:l}=t,s=await EM(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+s.x,y:o+s.y,data:{...s,placement:a}}}}},bM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:S=>{let{x:v,y:_}=S;return{x:v,y:_}}},...s}=xf(e,t),u={x:n,y:r},f=await S9(t,s),d=c1($l(i)),c=_9(d);let p=u[c],g=u[d];if(o){const S=c==="y"?"top":"left",v=c==="y"?"bottom":"right",_=p+f[S],x=p-f[v];p=dv(_,p,x)}if(a){const S=d==="y"?"top":"left",v=d==="y"?"bottom":"right",_=g+f[S],x=g-f[v];g=dv(_,g,x)}const y=l.fn({...t,[c]:p,[d]:g});return{...y,data:{x:y.x-n,y:y.y-r}}}}};function za(e){return E9(e)?(e.nodeName||"").toLowerCase():"#document"}function xi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Yo(e){var t;return(t=(E9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function E9(e){return e instanceof Node||e instanceof xi(e).Node}function Xo(e){return e instanceof Element||e instanceof xi(e).Element}function xo(e){return e instanceof HTMLElement||e instanceof xi(e).HTMLElement}function f4(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof xi(e).ShadowRoot}function wf(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Di(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function AM(e){return["table","td","th"].includes(za(e))}function H2(e){const t=W2(),n=Di(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function TM(e){let t=au(e);for(;xo(t)&&!f1(t);){if(H2(t))return t;t=au(t)}return null}function W2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function f1(e){return["html","body","#document"].includes(za(e))}function Di(e){return xi(e).getComputedStyle(e)}function d1(e){return Xo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function au(e){if(za(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f4(e)&&e.host||Yo(e);return f4(t)?t.host:t}function C9(e){const t=au(e);return f1(t)?e.ownerDocument?e.ownerDocument.body:e.body:xo(t)&&wf(t)?t:C9(t)}function uf(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=C9(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=xi(i);return o?t.concat(a,a.visualViewport||[],wf(i)?i:[],a.frameElement&&n?uf(a.frameElement):[]):t.concat(i,uf(i,[],n))}function b9(e){const t=Di(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=xo(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,l=Rh(n)!==o||Rh(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function X2(e){return Xo(e)?e:e.contextElement}function Ws(e){const t=X2(e);if(!xo(t))return Ba(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=b9(t);let a=(o?Rh(n.width):n.width)/r,l=(o?Rh(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const RM=Ba(0);function A9(e){const t=xi(e);return!W2()||!t.visualViewport?RM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function LM(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==xi(e)?!1:t}function jl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=X2(e);let a=Ba(1);t&&(r?Xo(r)&&(a=Ws(r)):a=Ws(e));const l=LM(o,n,r)?A9(o):Ba(0);let s=(i.left+l.x)/a.x,u=(i.top+l.y)/a.y,f=i.width/a.x,d=i.height/a.y;if(o){const c=xi(o),p=r&&Xo(r)?xi(r):r;let g=c,y=g.frameElement;for(;y&&r&&p!==g;){const S=Ws(y),v=y.getBoundingClientRect(),_=Di(y),x=v.left+(y.clientLeft+parseFloat(_.paddingLeft))*S.x,O=v.top+(y.clientTop+parseFloat(_.paddingTop))*S.y;s*=S.x,u*=S.y,f*=S.x,d*=S.y,s+=x,u+=O,g=xi(y),y=g.frameElement}}return Ph({width:f,height:d,x:s,y:u})}const PM=[":popover-open",":modal"];function T9(e){return PM.some(t=>{try{return e.matches(t)}catch{return!1}})}function OM(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",a=Yo(r),l=t?T9(t.floating):!1;if(r===a||l&&o)return n;let s={scrollLeft:0,scrollTop:0},u=Ba(1);const f=Ba(0),d=xo(r);if((d||!d&&!o)&&((za(r)!=="body"||wf(a))&&(s=d1(r)),xo(r))){const c=jl(r);u=Ws(r),f.x=c.x+r.clientLeft,f.y=c.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-s.scrollLeft*u.x+f.x,y:n.y*u.y-s.scrollTop*u.y+f.y}}function kM(e){return Array.from(e.getClientRects())}function R9(e){return jl(Yo(e)).left+d1(e).scrollLeft}function MM(e){const t=Yo(e),n=d1(e),r=e.ownerDocument.body,i=Tl(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Tl(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+R9(e);const l=-n.scrollTop;return Di(r).direction==="rtl"&&(a+=Tl(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:l}}function NM(e,t){const n=xi(e),r=Yo(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,s=0;if(i){o=i.width,a=i.height;const u=W2();(!u||u&&t==="fixed")&&(l=i.offsetLeft,s=i.offsetTop)}return{width:o,height:a,x:l,y:s}}function IM(e,t){const n=jl(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=xo(e)?Ws(e):Ba(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,s=i*o.x,u=r*o.y;return{width:a,height:l,x:s,y:u}}function d4(e,t,n){let r;if(t==="viewport")r=NM(e,n);else if(t==="document")r=MM(Yo(e));else if(Xo(t))r=IM(t,n);else{const i=A9(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Ph(r)}function L9(e,t){const n=au(e);return n===t||!Xo(n)||f1(n)?!1:Di(n).position==="fixed"||L9(n,t)}function FM(e,t){const n=t.get(e);if(n)return n;let r=uf(e,[],!1).filter(l=>Xo(l)&&za(l)!=="body"),i=null;const o=Di(e).position==="fixed";let a=o?au(e):e;for(;Xo(a)&&!f1(a);){const l=Di(a),s=H2(a);!s&&l.position==="fixed"&&(i=null),(o?!s&&!i:!s&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||wf(a)&&!s&&L9(e,a))?r=r.filter(f=>f!==a):i=l,a=au(a)}return t.set(e,r),r}function DM(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?FM(t,this._c):[].concat(n),r],l=a[0],s=a.reduce((u,f)=>{const d=d4(t,f,i);return u.top=Tl(d.top,u.top),u.right=ou(d.right,u.right),u.bottom=ou(d.bottom,u.bottom),u.left=Tl(d.left,u.left),u},d4(t,l,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function $M(e){const{width:t,height:n}=b9(e);return{width:t,height:n}}function jM(e,t,n){const r=xo(t),i=Yo(t),o=n==="fixed",a=jl(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const s=Ba(0);if(r||!r&&!o)if((za(t)!=="body"||wf(i))&&(l=d1(t)),r){const d=jl(t,!0,o,t);s.x=d.x+t.clientLeft,s.y=d.y+t.clientTop}else i&&(s.x=R9(i));const u=a.left+l.scrollLeft-s.x,f=a.top+l.scrollTop-s.y;return{x:u,y:f,width:a.width,height:a.height}}function h4(e,t){return!xo(e)||Di(e).position==="fixed"?null:t?t(e):e.offsetParent}function P9(e,t){const n=xi(e);if(!xo(e)||T9(e))return n;let r=h4(e,t);for(;r&&AM(r)&&Di(r).position==="static";)r=h4(r,t);return r&&(za(r)==="html"||za(r)==="body"&&Di(r).position==="static"&&!H2(r))?n:r||TM(e)||n}const BM=async function(e){const t=this.getOffsetParent||P9,n=this.getDimensions;return{reference:jM(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function zM(e){return Di(e).direction==="rtl"}const GM={convertOffsetParentRelativeRectToViewportRelativeRect:OM,getDocumentElement:Yo,getClippingRect:DM,getOffsetParent:P9,getElementRects:BM,getClientRects:kM,getDimensions:$M,getScale:Ws,isElement:Xo,isRTL:zM};function VM(e,t){let n=null,r;const i=Yo(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,s){l===void 0&&(l=!1),s===void 0&&(s=1),o();const{left:u,top:f,width:d,height:c}=e.getBoundingClientRect();if(l||t(),!d||!c)return;const p=v0(f),g=v0(i.clientWidth-(u+d)),y=v0(i.clientHeight-(f+c)),S=v0(u),_={rootMargin:-p+"px "+-g+"px "+-y+"px "+-S+"px",threshold:Tl(0,ou(1,s))||1};let x=!0;function O(I){const U=I[0].intersectionRatio;if(U!==s){if(!x)return a();U?a(!1,U):r=setTimeout(()=>{a(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(O,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,_)}n.observe(e)}return a(!0),o}function UM(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:s=!1}=r,u=X2(e),f=i||o?[...u?uf(u):[],...uf(t)]:[];f.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const d=u&&l?VM(u,n):null;let c=-1,p=null;a&&(p=new ResizeObserver(v=>{let[_]=v;_&&_.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(t)})),n()}),u&&!s&&p.observe(u),p.observe(t));let g,y=s?jl(e):null;s&&S();function S(){const v=jl(e);y&&(v.x!==y.x||v.y!==y.y||v.width!==y.width||v.height!==y.height)&&n(),y=v,g=requestAnimationFrame(S)}return n(),()=>{var v;f.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,s&&cancelAnimationFrame(g)}}const HM=bM,WM=SM,XM=wM,p4=(e,t,n)=>{const r=new Map,i={platform:GM,...n},o={...i.platform,_c:r};return _M(e,t,{...i,platform:o})};var O9={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(o=i(o,r(l)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var l in o)t.call(o,l)&&o[l]&&(a=i(a,l));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(O9);var qM=O9.exports;const pv=cf(qM);var m4={};const YM="react-tooltip-core-styles",KM="react-tooltip-base-styles",g4={core:!1,base:!1};function v4({css:e,id:t=KM,type:n="base",ref:r}){var i,o;if(!e||typeof document>"u"||g4[n]||n==="core"&&typeof process<"u"&&(!((i=process==null?void 0:m4)===null||i===void 0)&&i.REACT_TOOLTIP_DISABLE_CORE_STYLES)||n!=="base"&&typeof process<"u"&&(!((o=process==null?void 0:m4)===null||o===void 0)&&o.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;n==="core"&&(t=YM),r||(r={});const{insertAt:a}=r;if(document.getElementById(t))return void console.warn(`[react-tooltip] Element with id '${t}' already exists. Call \`removeStyle()\` first`);const l=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.id=t,s.type="text/css",a==="top"&&l.firstChild?l.insertBefore(s,l.firstChild):l.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e)),g4[n]=!0}const y4=async({elementReference:e=null,tooltipReference:t=null,tooltipArrowReference:n=null,place:r="top",offset:i=10,strategy:o="absolute",middlewares:a=[CM(Number(i)),WM({fallbackAxisSideDirection:"start"}),HM({padding:5})],border:l})=>{if(!e)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};if(t===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:r};const s=a;return n?(s.push(XM({element:n,padding:5})),p4(e,t,{placement:r,strategy:o,middleware:s}).then(({x:u,y:f,placement:d,middlewareData:c})=>{var p,g;const y={left:`${u}px`,top:`${f}px`,border:l},{x:S,y:v}=(p=c.arrow)!==null&&p!==void 0?p:{x:0,y:0},_=(g={top:"bottom",right:"left",bottom:"top",left:"right"}[d.split("-")[0]])!==null&&g!==void 0?g:"bottom",x=l&&{borderBottom:l,borderRight:l};let O=0;if(l){const I=`${l}`.match(/(\d+)px/);O=I!=null&&I[1]?Number(I[1]):1}return{tooltipStyles:y,tooltipArrowStyles:{left:S!=null?`${S}px`:"",top:v!=null?`${v}px`:"",right:"",bottom:"",...x,[_]:`-${4+O}px`},place:d}})):p4(e,t,{placement:"bottom",strategy:o,middleware:s}).then(({x:u,y:f,placement:d})=>({tooltipStyles:{left:`${u}px`,top:`${f}px`},tooltipArrowStyles:{},place:d}))},x4=(e,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(e,t),_4=(e,t,n)=>{let r=null;const i=function(...o){const a=()=>{r=null,n||e.apply(this,o)};n&&!r&&(e.apply(this,o),r=setTimeout(a,t)),n||(r&&clearTimeout(r),r=setTimeout(a,t))};return i.cancel=()=>{r&&(clearTimeout(r),r=null)},i},w4=e=>e!==null&&!Array.isArray(e)&&typeof e=="object",mv=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((i,o)=>mv(i,t[o]));if(Array.isArray(e)!==Array.isArray(t))return!1;if(!w4(e)||!w4(t))return e===t;const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(i=>mv(e[i],t[i]))},QM=e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;const t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some(n=>{const r=t.getPropertyValue(n);return r==="auto"||r==="scroll"})},S4=e=>{if(!e)return null;let t=e.parentElement;for(;t;){if(QM(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},ZM=typeof window<"u"?T.useLayoutEffect:T.useEffect,JM="DEFAULT_TOOLTIP_ID",eN={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},tN=T.createContext({getTooltipData:()=>eN});function k9(e=JM){return T.useContext(tN).getTooltipData(e)}var ws={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},Bm={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const nN=({forwardRef:e,id:t,className:n,classNameArrow:r,variant:i="dark",anchorId:o,anchorSelect:a,place:l="top",offset:s=10,events:u=["hover"],openOnClick:f=!1,positionStrategy:d="absolute",middlewares:c,wrapper:p,delayShow:g=0,delayHide:y=0,float:S=!1,hidden:v=!1,noArrow:_=!1,clickable:x=!1,closeOnEsc:O=!1,closeOnScroll:I=!1,closeOnResize:U=!1,openEvents:te,closeEvents:K,globalCloseEvents:$e,imperativeModeOnly:Ee,style:Re,position:Fe,afterShow:Ve,afterHide:Ce,content:Rt,contentWrapperRef:at,isOpen:qe,defaultIsOpen:ee=!1,setIsOpen:ue,activeAnchor:ce,setActiveAnchor:xe,border:Qe,opacity:st,arrowColor:wt,role:At="tooltip"})=>{var $t;const ct=T.useRef(null),Ot=T.useRef(null),Gt=T.useRef(null),Vt=T.useRef(null),vn=T.useRef(null),[Ut,ln]=T.useState({tooltipStyles:{},tooltipArrowStyles:{},place:l}),[ft,kt]=T.useState(!1),[jt,dt]=T.useState(!1),[ut,Jt]=T.useState(null),Zt=T.useRef(!1),yn=T.useRef(null),{anchorRefs:Kn,setActiveAnchor:E}=k9(t),me=T.useRef(!1),[Ue,he]=T.useState([]),Et=T.useRef(!1),lt=f||u.includes("click"),Le=lt||(te==null?void 0:te.click)||(te==null?void 0:te.dblclick)||(te==null?void 0:te.mousedown),Tt=te?{...te}:{mouseenter:!0,focus:!0,click:!1,dblclick:!1,mousedown:!1};!te&&lt&&Object.assign(Tt,{mouseenter:!1,focus:!1,click:!0});const qt=K?{...K}:{mouseleave:!0,blur:!0,click:!1,dblclick:!1,mouseup:!1};!K&&lt&&Object.assign(qt,{mouseleave:!1,blur:!1});const tt=$e?{...$e}:{escape:O||!1,scroll:I||!1,resize:U||!1,clickOutsideAnchor:Le||!1};Ee&&(Object.assign(Tt,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(qt,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(tt,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),ZM(()=>(Et.current=!0,()=>{Et.current=!1}),[]);const It=it=>{Et.current&&(it&&dt(!0),setTimeout(()=>{Et.current&&(ue==null||ue(it),qe===void 0&&kt(it))},10))};T.useEffect(()=>{if(qe===void 0)return()=>null;qe&&dt(!0);const it=setTimeout(()=>{kt(qe)},10);return()=>{clearTimeout(it)}},[qe]),T.useEffect(()=>{if(ft!==Zt.current)if(vn.current&&clearTimeout(vn.current),Zt.current=ft,ft)Ve==null||Ve();else{const it=(Ct=>{const Mt=Ct.match(/^([\d.]+)(ms|s)$/);if(!Mt)return 0;const[,En,Cn]=Mt;return Number(En)*(Cn==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));vn.current=setTimeout(()=>{dt(!1),Jt(null),Ce==null||Ce()},it+25)}},[ft]);const xn=it=>{ln(Ct=>mv(Ct,it)?Ct:it)},Ht=(it=g)=>{Gt.current&&clearTimeout(Gt.current),jt?It(!0):Gt.current=setTimeout(()=>{It(!0)},it)},sn=(it=y)=>{Vt.current&&clearTimeout(Vt.current),Vt.current=setTimeout(()=>{me.current||It(!1)},it)},gn=it=>{var Ct;if(!it)return;const Mt=(Ct=it.currentTarget)!==null&&Ct!==void 0?Ct:it.target;if(!(Mt!=null&&Mt.isConnected))return xe(null),void E({current:null});g?Ht():It(!0),xe(Mt),E({current:Mt}),Vt.current&&clearTimeout(Vt.current)},cr=()=>{x?sn(y||100):y?sn():It(!1),Gt.current&&clearTimeout(Gt.current)},Qn=({x:it,y:Ct})=>{var Mt;const En={getBoundingClientRect:()=>({x:it,y:Ct,width:0,height:0,top:Ct,left:it,right:it,bottom:Ct})};y4({place:(Mt=ut==null?void 0:ut.place)!==null&&Mt!==void 0?Mt:l,offset:s,elementReference:En,tooltipReference:ct.current,tooltipArrowReference:Ot.current,strategy:d,middlewares:c,border:Qe}).then(Cn=>{xn(Cn)})},gr=it=>{if(!it)return;const Ct=it,Mt={x:Ct.clientX,y:Ct.clientY};Qn(Mt),yn.current=Mt},Tn=it=>{var Ct;if(!ft)return;const Mt=it.target;Mt.isConnected&&(!((Ct=ct.current)===null||Ct===void 0)&&Ct.contains(Mt)||[document.querySelector(`[id='${o}']`),...Ue].some(En=>En==null?void 0:En.contains(Mt))||(It(!1),Gt.current&&clearTimeout(Gt.current)))},Fr=_4(gn,50,!0),Bt=_4(cr,50,!0),Mn=it=>{Bt.cancel(),Fr(it)},vt=()=>{Fr.cancel(),Bt()},Wt=T.useCallback(()=>{var it,Ct;const Mt=(it=ut==null?void 0:ut.position)!==null&&it!==void 0?it:Fe;Mt?Qn(Mt):S?yn.current&&Qn(yn.current):ce!=null&&ce.isConnected&&y4({place:(Ct=ut==null?void 0:ut.place)!==null&&Ct!==void 0?Ct:l,offset:s,elementReference:ce,tooltipReference:ct.current,tooltipArrowReference:Ot.current,strategy:d,middlewares:c,border:Qe}).then(En=>{Et.current&&xn(En)})},[ft,ce,Rt,Re,l,ut==null?void 0:ut.place,s,d,Fe,ut==null?void 0:ut.position,S]);T.useEffect(()=>{var it,Ct;const Mt=new Set(Kn);Ue.forEach(an=>{Mt.add({current:an})});const En=document.querySelector(`[id='${o}']`);En&&Mt.add({current:En});const Cn=()=>{It(!1)},Zn=S4(ce),or=S4(ct.current);tt.scroll&&(window.addEventListener("scroll",Cn),Zn==null||Zn.addEventListener("scroll",Cn),or==null||or.addEventListener("scroll",Cn));let en=null;tt.resize?window.addEventListener("resize",Cn):ce&&ct.current&&(en=UM(ce,ct.current,Wt,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const Rn=an=>{an.key==="Escape"&&It(!1)};tt.escape&&window.addEventListener("keydown",Rn),tt.clickOutsideAnchor&&window.addEventListener("click",Tn);const et=[],vr=an=>{ft&&(an==null?void 0:an.target)===ce||gn(an)},ii=an=>{ft&&(an==null?void 0:an.target)===ce&&cr()},Ko=["mouseenter","mouseleave","focus","blur"],Dr=["click","dblclick","mousedown","mouseup"];Object.entries(Tt).forEach(([an,Ln])=>{Ln&&(Ko.includes(an)?et.push({event:an,listener:Mn}):Dr.includes(an)&&et.push({event:an,listener:vr}))}),Object.entries(qt).forEach(([an,Ln])=>{Ln&&(Ko.includes(an)?et.push({event:an,listener:vt}):Dr.includes(an)&&et.push({event:an,listener:ii}))}),S&&et.push({event:"pointermove",listener:gr});const Tr=()=>{me.current=!0},$r=()=>{me.current=!1,cr()};return x&&!Le&&((it=ct.current)===null||it===void 0||it.addEventListener("mouseenter",Tr),(Ct=ct.current)===null||Ct===void 0||Ct.addEventListener("mouseleave",$r)),et.forEach(({event:an,listener:Ln})=>{Mt.forEach(yr=>{var jr;(jr=yr.current)===null||jr===void 0||jr.addEventListener(an,Ln)})}),()=>{var an,Ln;tt.scroll&&(window.removeEventListener("scroll",Cn),Zn==null||Zn.removeEventListener("scroll",Cn),or==null||or.removeEventListener("scroll",Cn)),tt.resize?window.removeEventListener("resize",Cn):en==null||en(),tt.clickOutsideAnchor&&window.removeEventListener("click",Tn),tt.escape&&window.removeEventListener("keydown",Rn),x&&!Le&&((an=ct.current)===null||an===void 0||an.removeEventListener("mouseenter",Tr),(Ln=ct.current)===null||Ln===void 0||Ln.removeEventListener("mouseleave",$r)),et.forEach(({event:yr,listener:jr})=>{Mt.forEach(wo=>{var oi;(oi=wo.current)===null||oi===void 0||oi.removeEventListener(yr,jr)})})}},[ce,Wt,jt,Kn,Ue,te,K,$e,lt,g,y]),T.useEffect(()=>{var it,Ct;let Mt=(Ct=(it=ut==null?void 0:ut.anchorSelect)!==null&&it!==void 0?it:a)!==null&&Ct!==void 0?Ct:"";!Mt&&t&&(Mt=`[data-tooltip-id='${t}']`);const En=new MutationObserver(Cn=>{const Zn=[],or=[];Cn.forEach(en=>{if(en.type==="attributes"&&en.attributeName==="data-tooltip-id"&&(en.target.getAttribute("data-tooltip-id")===t?Zn.push(en.target):en.oldValue===t&&or.push(en.target)),en.type==="childList"){if(ce){const Rn=[...en.removedNodes].filter(et=>et.nodeType===1);if(Mt)try{or.push(...Rn.filter(et=>et.matches(Mt))),or.push(...Rn.flatMap(et=>[...et.querySelectorAll(Mt)]))}catch{}Rn.some(et=>{var vr;return!!(!((vr=et==null?void 0:et.contains)===null||vr===void 0)&&vr.call(et,ce))&&(dt(!1),It(!1),xe(null),Gt.current&&clearTimeout(Gt.current),Vt.current&&clearTimeout(Vt.current),!0)})}if(Mt)try{const Rn=[...en.addedNodes].filter(et=>et.nodeType===1);Zn.push(...Rn.filter(et=>et.matches(Mt))),Zn.push(...Rn.flatMap(et=>[...et.querySelectorAll(Mt)]))}catch{}}}),(Zn.length||or.length)&&he(en=>[...en.filter(Rn=>!or.includes(Rn)),...Zn])});return En.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{En.disconnect()}},[t,a,ut==null?void 0:ut.anchorSelect,ce]),T.useEffect(()=>{Wt()},[Wt]),T.useEffect(()=>{if(!(at!=null&&at.current))return()=>null;const it=new ResizeObserver(()=>{setTimeout(()=>Wt())});return it.observe(at.current),()=>{it.disconnect()}},[Rt,at==null?void 0:at.current]),T.useEffect(()=>{var it;const Ct=document.querySelector(`[id='${o}']`),Mt=[...Ue,Ct];ce&&Mt.includes(ce)||xe((it=Ue[0])!==null&&it!==void 0?it:Ct)},[o,Ue,ce]),T.useEffect(()=>(ee&&It(!0),()=>{Gt.current&&clearTimeout(Gt.current),Vt.current&&clearTimeout(Vt.current)}),[]),T.useEffect(()=>{var it;let Ct=(it=ut==null?void 0:ut.anchorSelect)!==null&&it!==void 0?it:a;if(!Ct&&t&&(Ct=`[data-tooltip-id='${t}']`),Ct)try{const Mt=Array.from(document.querySelectorAll(Ct));he(Mt)}catch{he([])}},[t,a,ut==null?void 0:ut.anchorSelect]),T.useEffect(()=>{Gt.current&&(clearTimeout(Gt.current),Ht(g))},[g]);const tn=($t=ut==null?void 0:ut.content)!==null&&$t!==void 0?$t:Rt,Nn=ft&&Object.keys(Ut.tooltipStyles).length>0;return T.useImperativeHandle(e,()=>({open:it=>{if(it!=null&&it.anchorSelect)try{document.querySelector(it.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${it.anchorSelect}" is not a valid CSS selector`)}Jt(it??null),it!=null&&it.delay?Ht(it.delay):It(!0)},close:it=>{it!=null&&it.delay?sn(it.delay):It(!1)},activeAnchor:ce,place:Ut.place,isOpen:!!(jt&&!v&&tn&&Nn)})),jt&&!v&&tn?$o.createElement(p,{id:t,role:At,className:pv("react-tooltip",ws.tooltip,Bm.tooltip,Bm[i],n,`react-tooltip__place-${Ut.place}`,ws[Nn?"show":"closing"],Nn?"react-tooltip__show":"react-tooltip__closing",d==="fixed"&&ws.fixed,x&&ws.clickable),onTransitionEnd:it=>{vn.current&&clearTimeout(vn.current),ft||it.propertyName!=="opacity"||(dt(!1),Jt(null),Ce==null||Ce())},style:{...Re,...Ut.tooltipStyles,opacity:st!==void 0&&Nn?st:void 0},ref:ct},tn,$o.createElement(p,{className:pv("react-tooltip-arrow",ws.arrow,Bm.arrow,r,_&&ws.noArrow),style:{...Ut.tooltipArrowStyles,background:wt?`linear-gradient(to right bottom, transparent 50%, ${wt} 50%)`:void 0},ref:Ot})):null},rN=({content:e})=>$o.createElement("span",{dangerouslySetInnerHTML:{__html:e}});$o.forwardRef(({id:e,anchorId:t,anchorSelect:n,content:r,html:i,render:o,className:a,classNameArrow:l,variant:s="dark",place:u="top",offset:f=10,wrapper:d="div",children:c=null,events:p=["hover"],openOnClick:g=!1,positionStrategy:y="absolute",middlewares:S,delayShow:v=0,delayHide:_=0,float:x=!1,hidden:O=!1,noArrow:I=!1,clickable:U=!1,closeOnEsc:te=!1,closeOnScroll:K=!1,closeOnResize:$e=!1,openEvents:Ee,closeEvents:Re,globalCloseEvents:Fe,imperativeModeOnly:Ve=!1,style:Ce,position:Rt,isOpen:at,defaultIsOpen:qe=!1,disableStyleInjection:ee=!1,border:ue,opacity:ce,arrowColor:xe,setIsOpen:Qe,afterShow:st,afterHide:wt,role:At="tooltip"},$t)=>{const[ct,Ot]=T.useState(r),[Gt,Vt]=T.useState(i),[vn,Ut]=T.useState(u),[ln,ft]=T.useState(s),[kt,jt]=T.useState(f),[dt,ut]=T.useState(v),[Jt,Zt]=T.useState(_),[yn,Kn]=T.useState(x),[E,me]=T.useState(O),[Ue,he]=T.useState(d),[Et,lt]=T.useState(p),[Le,Tt]=T.useState(y),[qt,tt]=T.useState(null),[It,xn]=T.useState(null),Ht=T.useRef(ee),{anchorRefs:sn,activeAnchor:gn}=k9(e),cr=Bt=>Bt==null?void 0:Bt.getAttributeNames().reduce((Mn,vt)=>{var Wt;return vt.startsWith("data-tooltip-")&&(Mn[vt.replace(/^data-tooltip-/,"")]=(Wt=Bt==null?void 0:Bt.getAttribute(vt))!==null&&Wt!==void 0?Wt:null),Mn},{}),Qn=Bt=>{const Mn={place:vt=>{var Wt;Ut((Wt=vt)!==null&&Wt!==void 0?Wt:u)},content:vt=>{Ot(vt??r)},html:vt=>{Vt(vt??i)},variant:vt=>{var Wt;ft((Wt=vt)!==null&&Wt!==void 0?Wt:s)},offset:vt=>{jt(vt===null?f:Number(vt))},wrapper:vt=>{var Wt;he((Wt=vt)!==null&&Wt!==void 0?Wt:d)},events:vt=>{const Wt=vt==null?void 0:vt.split(" ");lt(Wt??p)},"position-strategy":vt=>{var Wt;Tt((Wt=vt)!==null&&Wt!==void 0?Wt:y)},"delay-show":vt=>{ut(vt===null?v:Number(vt))},"delay-hide":vt=>{Zt(vt===null?_:Number(vt))},float:vt=>{Kn(vt===null?x:vt==="true")},hidden:vt=>{me(vt===null?O:vt==="true")},"class-name":vt=>{tt(vt)}};Object.values(Mn).forEach(vt=>vt(null)),Object.entries(Bt).forEach(([vt,Wt])=>{var tn;(tn=Mn[vt])===null||tn===void 0||tn.call(Mn,Wt)})};T.useEffect(()=>{Ot(r)},[r]),T.useEffect(()=>{Vt(i)},[i]),T.useEffect(()=>{Ut(u)},[u]),T.useEffect(()=>{ft(s)},[s]),T.useEffect(()=>{jt(f)},[f]),T.useEffect(()=>{ut(v)},[v]),T.useEffect(()=>{Zt(_)},[_]),T.useEffect(()=>{Kn(x)},[x]),T.useEffect(()=>{me(O)},[O]),T.useEffect(()=>{Tt(y)},[y]),T.useEffect(()=>{Ht.current!==ee&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[ee]),T.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:ee==="core",disableBase:ee}}))},[]),T.useEffect(()=>{var Bt;const Mn=new Set(sn);let vt=n;if(!vt&&e&&(vt=`[data-tooltip-id='${e}']`),vt)try{document.querySelectorAll(vt).forEach(Ct=>{Mn.add({current:Ct})})}catch{console.warn(`[react-tooltip] "${vt}" is not a valid CSS selector`)}const Wt=document.querySelector(`[id='${t}']`);if(Wt&&Mn.add({current:Wt}),!Mn.size)return()=>null;const tn=(Bt=It??Wt)!==null&&Bt!==void 0?Bt:gn.current,Nn=new MutationObserver(Ct=>{Ct.forEach(Mt=>{var En;if(!tn||Mt.type!=="attributes"||!(!((En=Mt.attributeName)===null||En===void 0)&&En.startsWith("data-tooltip-")))return;const Cn=cr(tn);Qn(Cn)})}),it={attributes:!0,childList:!1,subtree:!1};if(tn){const Ct=cr(tn);Qn(Ct),Nn.observe(tn,it)}return()=>{Nn.disconnect()}},[sn,gn,It,t,n]),T.useEffect(()=>{Ce!=null&&Ce.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),ue&&!x4("border",`${ue}`)&&console.warn(`[react-tooltip] "${ue}" is not a valid \`border\`.`),Ce!=null&&Ce.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),ce&&!x4("opacity",`${ce}`)&&console.warn(`[react-tooltip] "${ce}" is not a valid \`opacity\`.`)},[]);let gr=c;const Tn=T.useRef(null);if(o){const Bt=o({content:(It==null?void 0:It.getAttribute("data-tooltip-content"))||ct||null,activeAnchor:It});gr=Bt?$o.createElement("div",{ref:Tn,className:"react-tooltip-content-wrapper"},Bt):null}else ct&&(gr=ct);Gt&&(gr=$o.createElement(rN,{content:Gt}));const Fr={forwardRef:$t,id:e,anchorId:t,anchorSelect:n,className:pv(a,qt),classNameArrow:l,content:gr,contentWrapperRef:Tn,place:vn,variant:ln,offset:kt,wrapper:Ue,events:Et,openOnClick:g,positionStrategy:Le,middlewares:S,delayShow:dt,delayHide:Jt,float:yn,hidden:E,noArrow:I,clickable:U,closeOnEsc:te,closeOnScroll:K,closeOnResize:$e,openEvents:Ee,closeEvents:Re,globalCloseEvents:Fe,imperativeModeOnly:Ve,style:Ce,position:Rt,isOpen:at,defaultIsOpen:qe,border:ue,opacity:ce,arrowColor:xe,setIsOpen:Qe,afterShow:st,afterHide:wt,activeAnchor:It,setActiveAnchor:Bt=>xn(Bt),role:At};return $o.createElement(nN,{...Fr})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",e=>{e.detail.disableCore||v4({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),e.detail.disableBase||v4({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});Ge.shape({id:Ge.string.isRequired,potential_embeddings:Ge.array}).isRequired,Ge.string.isRequired,Ge.object,Ge.array,Ge.array,Ge.func.isRequired,Ge.func.isRequired,Ge.func.isRequired,Ge.func.isRequired;Ge.shape({id:Ge.string.isRequired}).isRequired,Ge.object,Ge.object,Ge.array.isRequired,Ge.array.isRequired,Ge.func.isRequired,Ge.func.isRequired;Ge.shape({id:Ge.string.isRequired}).isRequired,Ge.object,Ge.object,Ge.array,Ge.func.isRequired,Ge.func.isRequired;Ge.shape({id:Ge.string.isRequired}).isRequired,Ge.object,Ge.object,Ge.string,Ge.func.isRequired,Ge.func,Ge.func,Ge.func,Ge.func;Ge.shape({id:Ge.string.isRequired}).isRequired,Ge.object,Ge.object,Ge.object,Ge.object,Ge.string,Ge.func.isRequired,Ge.func.isRequired;const iN="_page_1chtn_1",oN="_header_1chtn_4",aN="_description_1chtn_44",lN="_path_1chtn_48",sN="_size_1chtn_53",pl={page:iN,header:oN,"scope-files":"_scope-files_1chtn_18","dataset-files":"_dataset-files_1chtn_24",description:aN,path:lN,size:sN},y0="https://api.latentscope.com/api";function uN(e){const t=["B","KB","MB","GB"];let n=0;for(;e>1024;)e=e/1024,n++;return`${e.toFixed(0)}${t[n]}`}function E4(){const[e,t]=T.useState(null),{dataset:n,scope:r}=d2();T.useEffect(()=>{fetch(`${y0}/datasets/${n}/meta`).then(u=>u.json()).then(t).catch(console.error)},[n,t]);const[i,o]=T.useState(null);T.useEffect(()=>{fetch(`${y0}/datasets/${n}/scopes/${r}`).then(u=>u.json()).then(u=>{console.log("scope",u),o(u)}).catch(console.error)},[n,r,o]);const[a,l]=T.useState([]);T.useEffect(()=>{fetch(`${y0}/datasets/${n}/export/list`).then(u=>u.json()).then(u=>{console.log("export list",u),l(u)}).catch(console.error)},[n]);const s=T.useCallback((u,f)=>b.jsxs("li",{children:[b.jsx("a",{href:`${y0}/files/${n}/${u[2]}`,children:u[0]}),b.jsx("span",{className:pl.size,children:uN(u[4])}),b.jsx("span",{className:pl.path,children:u[3]})]},f),[n]);return b.jsxs("div",{className:pl.page,children:[b.jsxs("div",{className:pl.header,children:[b.jsxs("h2",{children:["Export Data for ",e==null?void 0:e.id," ",r]}),b.jsxs(eu,{to:`/datasets/${n}/setup/${r}`,children:["Setup ",e==null?void 0:e.id," ",r]}),r?b.jsxs(eu,{to:`/datasets/${n}/explore/${r}`,children:["Explore ",e==null?void 0:e.id," ",r]}):null]}),b.jsxs("div",{className:pl["scope-files"],children:[b.jsxs("h3",{children:["Scope ",r]}),b.jsx("p",{className:pl.description,children:"These files combine the data from each step into a single parquet (x,y from UMAP, cluster and label from clustering and labeling) and the metadata into a single JSON."}),b.jsx("ul",{children:a.filter(u=>u[0].indexOf(r)==0&&u[0].indexOf("transactions")<0).map(s)})]}),b.jsxs("div",{className:pl["dataset-files"],children:[b.jsx("h3",{children:"Dataset"}),b.jsx("ul",{children:a.filter(u=>u[1]==".").map(s)}),b.jsx("h3",{children:"Embeddings"}),b.jsx("ul",{children:a.filter(u=>u[1]=="embeddings").map(s)}),b.jsx("h3",{children:"Umaps"}),b.jsx("ul",{children:a.filter(u=>u[1]=="umaps").map(s)}),b.jsx("h3",{children:"Clusters"}),b.jsx("ul",{children:a.filter(u=>u[1]=="clusters").map(s)}),b.jsx("h3",{children:"Scopes"}),b.jsx("ul",{children:a.filter(u=>u[1]=="scopes").map(s)}),b.jsx("h3",{children:"tags"}),b.jsx("ul",{children:a.filter(u=>u[1]=="tags").map(s)})]})]})}const cN=()=>b.jsx("nav",{children:b.jsxs("ul",{children:[b.jsx("li",{children:b.jsx(eu,{to:"/",children:"Latent Scope"})}),b.jsx("li",{className:"settings",children:b.jsx(eu,{to:"/settings",children:"⚙ settings"})})]})});var fN={VITE_API_URL:"https://api.latentscope.com/api",BASE_URL:"/latent-scope/",MODE:"read_only",DEV:!1,PROD:!0,SSR:!1};const M9=fN;console.log("ENV",M9);function dN(){return b.jsxs(IS,{basename:M9.BASE_NAME,children:[b.jsx(cN,{}),b.jsx("div",{className:"page",children:b.jsxs(LS,{children:[b.jsx(vl,{path:"/",element:b.jsx(US,{})}),b.jsx(vl,{path:"/settings",element:b.jsx(qS,{})}),b.jsx(vl,{path:"/datasets/:dataset/explore/:scope",element:b.jsx(Qk,{})}),b.jsx(vl,{path:"/datasets/:dataset/compare/",element:b.jsx(dM,{})}),b.jsx(vl,{path:"/datasets/:dataset/export",element:b.jsx(E4,{})}),b.jsx(vl,{path:"/datasets/:dataset/export/:scope",element:b.jsx(E4,{})}),null,null,null,null]})})]})}zm.createRoot(document.getElementById("root")).render(b.jsx($o.StrictMode,{children:b.jsx(dN,{})}));
