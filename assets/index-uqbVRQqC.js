function OS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $1={exports:{}},Jd={},G1={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),NS=Symbol.for("react.portal"),kS=Symbol.for("react.fragment"),IS=Symbol.for("react.strict_mode"),DS=Symbol.for("react.profiler"),MS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),BS=Symbol.for("react.suspense"),$S=Symbol.for("react.memo"),GS=Symbol.for("react.lazy"),jg=Symbol.iterator;function zS(e){return e===null||typeof e!="object"?null:(e=jg&&e[jg]||e["@@iterator"],typeof e=="function"?e:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,V1={};function es(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}es.prototype.isReactComponent={};es.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};es.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function H1(){}H1.prototype=es.prototype;function $0(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}var G0=$0.prototype=new H1;G0.constructor=$0;U1(G0,es.prototype);G0.isPureReactComponent=!0;var Bg=Array.isArray,W1=Object.prototype.hasOwnProperty,z0={current:null},X1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)W1.call(t,r)&&!X1.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ku,type:e,key:a,ref:o,props:i,_owner:z0.current}}function US(e,t){return{$$typeof:Ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function U0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ku}function VS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $g=/\/+/g;function Bh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?VS(""+e.key):t.toString(36)}function Jf(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ku:case NS:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Bh(o,0):r,Bg(i)?(n="",e!=null&&(n=e.replace($g,"$&/")+"/"),Jf(i,t,n,"",function(f){return f})):i!=null&&(U0(i)&&(i=US(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($g,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Bg(e))for(var l=0;l<e.length;l++){a=e[l];var u=r+Bh(a,l);o+=Jf(a,t,n,u,i)}else if(u=zS(e),typeof u=="function")for(e=u.call(e),l=0;!(a=e.next()).done;)a=a.value,u=r+Bh(a,l++),o+=Jf(a,t,n,u,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tf(e,t,n){if(e==null)return e;var r=[],i=0;return Jf(e,r,"","",function(a){return t.call(n,a,i++)}),r}function HS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lr={current:null},ed={transition:null},WS={ReactCurrentDispatcher:lr,ReactCurrentBatchConfig:ed,ReactCurrentOwner:z0};Gt.Children={map:Tf,forEach:function(e,t,n){Tf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tf(e,function(){t++}),t},toArray:function(e){return Tf(e,function(t){return t})||[]},only:function(e){if(!U0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=es;Gt.Fragment=kS;Gt.Profiler=DS;Gt.PureComponent=$0;Gt.StrictMode=IS;Gt.Suspense=BS;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=U1({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=z0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)W1.call(t,u)&&!X1.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Ku,type:e.type,key:i,ref:a,props:r,_owner:o}};Gt.createContext=function(e){return e={$$typeof:FS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MS,_context:e},e.Consumer=e};Gt.createElement=Y1;Gt.createFactory=function(e){var t=Y1.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:jS,render:e}};Gt.isValidElement=U0;Gt.lazy=function(e){return{$$typeof:GS,_payload:{_status:-1,_result:e},_init:HS}};Gt.memo=function(e,t){return{$$typeof:$S,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=ed.transition;ed.transition={};try{e()}finally{ed.transition=t}};Gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Gt.useCallback=function(e,t){return lr.current.useCallback(e,t)};Gt.useContext=function(e){return lr.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return lr.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return lr.current.useEffect(e,t)};Gt.useId=function(){return lr.current.useId()};Gt.useImperativeHandle=function(e,t,n){return lr.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return lr.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return lr.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return lr.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return lr.current.useReducer(e,t,n)};Gt.useRef=function(e){return lr.current.useRef(e)};Gt.useState=function(e){return lr.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return lr.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return lr.current.useTransition()};Gt.version="18.2.0";G1.exports=Gt;var j=G1.exports;const Q1=B0(j),XS=OS({__proto__:null,default:Q1},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=j,QS=Symbol.for("react.element"),KS=Symbol.for("react.fragment"),qS=Object.prototype.hasOwnProperty,ZS=YS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JS={key:!0,ref:!0,__self:!0,__source:!0};function K1(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)qS.call(t,r)&&!JS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:QS,type:e,key:a,ref:o,props:i,_owner:ZS.current}}Jd.Fragment=KS;Jd.jsx=K1;Jd.jsxs=K1;$1.exports=Jd;var O=$1.exports,Ip={},q1={exports:{}},Ir={},Z1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,We){var Le=pe.length;pe.push(We);e:for(;0<Le;){var Ee=Le-1>>>1,$e=pe[Ee];if(0<i($e,We))pe[Ee]=We,pe[Le]=$e,Le=Ee;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var We=pe[0],Le=pe.pop();if(Le!==We){pe[0]=Le;e:for(var Ee=0,$e=pe.length,lt=$e>>>1;Ee<lt;){var Et=2*(Ee+1)-1,Wt=pe[Et],Yt=Et+1,Qt=pe[Yt];if(0>i(Wt,Le))Yt<$e&&0>i(Qt,Wt)?(pe[Ee]=Qt,pe[Yt]=Le,Ee=Yt):(pe[Ee]=Wt,pe[Et]=Le,Ee=Et);else if(Yt<$e&&0>i(Qt,Le))pe[Ee]=Qt,pe[Yt]=Le,Ee=Yt;else break e}}return We}function i(pe,We){var Le=pe.sortIndex-We.sortIndex;return Le!==0?Le:pe.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,d=3,w=!1,x=!1,L=!1,I=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(pe){for(var We=n(f);We!==null;){if(We.callback===null)r(f);else if(We.startTime<=pe)r(f),We.sortIndex=We.expirationTime,t(u,We);else break;We=n(f)}}function H(pe){if(L=!1,C(pe),!x)if(n(u)!==null)x=!0,mt(q);else{var We=n(f);We!==null&&ht(H,We.startTime-pe)}}function q(pe,We){x=!1,L&&(L=!1,v(ue),ue=-1),w=!0;var Le=d;try{for(C(We),h=n(u);h!==null&&(!(h.expirationTime>We)||pe&&!Se());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,d=h.priorityLevel;var $e=Ee(h.expirationTime<=We);We=e.unstable_now(),typeof $e=="function"?h.callback=$e:h===n(u)&&r(u),C(We)}else r(u);h=n(u)}if(h!==null)var lt=!0;else{var Et=n(f);Et!==null&&ht(H,Et.startTime-We),lt=!1}return lt}finally{h=null,d=Le,w=!1}}var ae=!1,we=null,ue=-1,at=5,Ve=-1;function Se(){return!(e.unstable_now()-Ve<at)}function Ke(){if(we!==null){var pe=e.unstable_now();Ve=pe;var We=!0;try{We=we(!0,pe)}finally{We?Ye():(ae=!1,we=null)}}else ae=!1}var Ye;if(typeof b=="function")Ye=function(){b(Ke)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Pt=ze.port2;ze.port1.onmessage=Ke,Ye=function(){Pt.postMessage(null)}}else Ye=function(){I(Ke,0)};function mt(pe){we=pe,ae||(ae=!0,Ye())}function ht(pe,We){ue=I(function(){pe(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,mt(q))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(pe){switch(d){case 1:case 2:case 3:var We=3;break;default:We=d}var Le=d;d=We;try{return pe()}finally{d=Le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,We){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Le=d;d=pe;try{return We()}finally{d=Le}},e.unstable_scheduleCallback=function(pe,We,Le){var Ee=e.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ee+Le:Ee):Le=Ee,pe){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Le+$e,pe={id:p++,callback:We,priorityLevel:pe,startTime:Le,expirationTime:$e,sortIndex:-1},Le>Ee?(pe.sortIndex=Le,t(f,pe),n(u)===null&&pe===n(f)&&(L?(v(ue),ue=-1):L=!0,ht(H,Le-Ee))):(pe.sortIndex=$e,t(u,pe),x||w||(x=!0,mt(q))),pe},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(pe){var We=d;return function(){var Le=d;d=We;try{return pe.apply(this,arguments)}finally{d=Le}}}})(J1);Z1.exports=J1;var ew=Z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=j,kr=ew;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tx=new Set,Au={};function Fo(e,t){Hl(e,t),Hl(e+"Capture",t)}function Hl(e,t){for(Au[e]=t,e=0;e<t.length;e++)tx.add(t[e])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dp=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},zg={};function nw(e){return Dp.call(zg,e)?!0:Dp.call(Gg,e)?!1:tw.test(e)?zg[e]=!0:(Gg[e]=!0,!1)}function rw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iw(e,t,n,r){if(t===null||typeof t>"u"||rw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sr(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var V0=/[\-:]([a-z])/g;function H0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(V0,H0);Kn[t]=new sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(V0,H0);Kn[t]=new sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(V0,H0);Kn[t]=new sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new sr(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function W0(e,t,n,r){var i=Kn.hasOwnProperty(t)?Kn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iw(t,n,i,r)&&(n=null),r||i===null?nw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ji=ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bf=Symbol.for("react.element"),Tl=Symbol.for("react.portal"),bl=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),Y0=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),Q0=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),ix=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var yn=Object.assign,$h;function du(e){if($h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$h=t&&t[1]||""}return`
`+$h+e}var Gh=!1;function zh(e,t){if(!e||Gh)return"";Gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Gh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?du(e):""}function aw(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=zh(e.type,!1),e;case 11:return e=zh(e.type.render,!1),e;case 1:return e=zh(e.type,!0),e;default:return""}}function Bp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bl:return"Fragment";case Tl:return"Portal";case Mp:return"Profiler";case X0:return"StrictMode";case Fp:return"Suspense";case jp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rx:return(e.displayName||"Context")+".Consumer";case nx:return(e._context.displayName||"Context")+".Provider";case Y0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q0:return t=e.displayName||null,t!==null?t:Bp(e.type)||"Memo";case ba:t=e._payload,e=e._init;try{return Bp(e(t))}catch{}}return null}function ow(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bp(t);case 8:return t===X0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ga(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ax(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lw(e){var t=ax(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Af(e){e._valueTracker||(e._valueTracker=lw(e))}function ox(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ax(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $p(e,t){var n=t.checked;return yn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ga(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lx(e,t){t=t.checked,t!=null&&W0(e,"checked",t,!1)}function Gp(e,t){lx(e,t);var n=Ga(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zp(e,t.type,n):t.hasOwnProperty("defaultValue")&&zp(e,t.type,Ga(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zp(e,t,n){(t!=="number"||hd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mu=Array.isArray;function jl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ga(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Up(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return yn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ne(92));if(mu(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ga(n)}}function sx(e,t){var n=Ga(t.value),r=Ga(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ux(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cf,cx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cf=Cf||document.createElement("div"),Cf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sw=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(e){sw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gu[t]=gu[e]})});function fx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gu.hasOwnProperty(e)&&gu[e]?(""+t).trim():t+"px"}function dx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var uw=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hp(e,t){if(t){if(uw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function Wp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function K0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yp=null,Bl=null,$l=null;function Yg(e){if(e=Ju(e)){if(typeof Yp!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=im(t),Yp(e.stateNode,e.type,t))}}function mx(e){Bl?$l?$l.push(e):$l=[e]:Bl=e}function hx(){if(Bl){var e=Bl,t=$l;if($l=Bl=null,Yg(e),t)for(e=0;e<t.length;e++)Yg(t[e])}}function px(e,t){return e(t)}function vx(){}var Uh=!1;function gx(e,t,n){if(Uh)return e(t,n);Uh=!0;try{return px(e,t,n)}finally{Uh=!1,(Bl!==null||$l!==null)&&(vx(),hx())}}function Lu(e,t){var n=e.stateNode;if(n===null)return null;var r=im(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ne(231,t,typeof n));return n}var Qp=!1;if(Qi)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Qp=!1}function cw(e,t,n,r,i,a,o,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var yu=!1,pd=null,vd=!1,Kp=null,fw={onError:function(e){yu=!0,pd=e}};function dw(e,t,n,r,i,a,o,l,u){yu=!1,pd=null,cw.apply(fw,arguments)}function mw(e,t,n,r,i,a,o,l,u){if(dw.apply(this,arguments),yu){if(yu){var f=pd;yu=!1,pd=null}else throw Error(Ne(198));vd||(vd=!0,Kp=f)}}function jo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qg(e){if(jo(e)!==e)throw Error(Ne(188))}function hw(e){var t=e.alternate;if(!t){if(t=jo(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Qg(i),e;if(a===r)return Qg(i),t;a=a.sibling}throw Error(Ne(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(Ne(189))}}if(n.alternate!==r)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?e:t}function xx(e){return e=hw(e),e!==null?Ex(e):null}function Ex(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ex(e);if(t!==null)return t;e=e.sibling}return null}var _x=kr.unstable_scheduleCallback,Kg=kr.unstable_cancelCallback,pw=kr.unstable_shouldYield,vw=kr.unstable_requestPaint,Pn=kr.unstable_now,gw=kr.unstable_getCurrentPriorityLevel,q0=kr.unstable_ImmediatePriority,Sx=kr.unstable_UserBlockingPriority,gd=kr.unstable_NormalPriority,yw=kr.unstable_LowPriority,wx=kr.unstable_IdlePriority,em=null,Ci=null;function xw(e){if(Ci&&typeof Ci.onCommitFiberRoot=="function")try{Ci.onCommitFiberRoot(em,e,void 0,(e.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:Sw,Ew=Math.log,_w=Math.LN2;function Sw(e){return e>>>=0,e===0?32:31-(Ew(e)/_w|0)|0}var Lf=64,Rf=4194304;function hu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=hu(l):(a&=o,a!==0&&(r=hu(a)))}else o=n&~i,o!==0?r=hu(o):a!==0&&(r=hu(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-oi(t),i=1<<n,r|=e[n],t&=~i;return r}function ww(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-oi(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=ww(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}function qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tx(){var e=Lf;return Lf<<=1,!(Lf&4194240)&&(Lf=64),e}function Vh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-oi(t),e[t]=n}function bw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-oi(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Z0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-oi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qt=0;function bx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ax,J0,Cx,Lx,Rx,Zp=!1,Of=[],Na=null,ka=null,Ia=null,Ru=new Map,Ou=new Map,Ca=[],Aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(e,t){switch(e){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Ru.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(t.pointerId)}}function tu(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ju(t),t!==null&&J0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Cw(e,t,n,r,i){switch(t){case"focusin":return Na=tu(Na,e,t,n,r,i),!0;case"dragenter":return ka=tu(ka,e,t,n,r,i),!0;case"mouseover":return Ia=tu(Ia,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ru.set(a,tu(Ru.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ou.set(a,tu(Ou.get(a)||null,e,t,n,r,i)),!0}return!1}function Ox(e){var t=wo(e.target);if(t!==null){var n=jo(t);if(n!==null){if(t=n.tag,t===13){if(t=yx(n),t!==null){e.blockedOn=t,Rx(e.priority,function(){Cx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function td(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xp=r,n.target.dispatchEvent(r),Xp=null}else return t=Ju(n),t!==null&&J0(t),e.blockedOn=n,!1;t.shift()}return!0}function Zg(e,t,n){td(e)&&n.delete(t)}function Lw(){Zp=!1,Na!==null&&td(Na)&&(Na=null),ka!==null&&td(ka)&&(ka=null),Ia!==null&&td(Ia)&&(Ia=null),Ru.forEach(Zg),Ou.forEach(Zg)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Zp||(Zp=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,Lw)))}function Pu(e){function t(i){return nu(i,e)}if(0<Of.length){nu(Of[0],e);for(var n=1;n<Of.length;n++){var r=Of[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Na!==null&&nu(Na,e),ka!==null&&nu(ka,e),Ia!==null&&nu(Ia,e),Ru.forEach(t),Ou.forEach(t),n=0;n<Ca.length;n++)r=Ca[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ca.length&&(n=Ca[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&Ca.shift()}var Gl=Ji.ReactCurrentBatchConfig,xd=!0;function Rw(e,t,n,r){var i=qt,a=Gl.transition;Gl.transition=null;try{qt=1,ev(e,t,n,r)}finally{qt=i,Gl.transition=a}}function Ow(e,t,n,r){var i=qt,a=Gl.transition;Gl.transition=null;try{qt=4,ev(e,t,n,r)}finally{qt=i,Gl.transition=a}}function ev(e,t,n,r){if(xd){var i=Jp(e,t,n,r);if(i===null)ep(e,t,r,Ed,n),qg(e,r);else if(Cw(i,e,t,n,r))r.stopPropagation();else if(qg(e,r),t&4&&-1<Aw.indexOf(e)){for(;i!==null;){var a=Ju(i);if(a!==null&&Ax(a),a=Jp(e,t,n,r),a===null&&ep(e,t,r,Ed,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else ep(e,t,r,null,n)}}var Ed=null;function Jp(e,t,n,r){if(Ed=null,e=K0(r),e=wo(e),e!==null)if(t=jo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ed=e,null}function Px(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gw()){case q0:return 1;case Sx:return 4;case gd:case yw:return 16;case wx:return 536870912;default:return 16}default:return 16}}var Ra=null,tv=null,nd=null;function Nx(){if(nd)return nd;var e,t=tv,n=t.length,r,i="value"in Ra?Ra.value:Ra.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return nd=i.slice(e,1<r?1-r:void 0)}function rd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pf(){return!0}function Jg(){return!1}function Dr(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Pf:Jg,this.isPropagationStopped=Jg,this}return yn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pf)},persist:function(){},isPersistent:Pf}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nv=Dr(ts),Zu=yn({},ts,{view:0,detail:0}),Pw=Dr(Zu),Hh,Wh,ru,tm=yn({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ru&&(ru&&e.type==="mousemove"?(Hh=e.screenX-ru.screenX,Wh=e.screenY-ru.screenY):Wh=Hh=0,ru=e),Hh)},movementY:function(e){return"movementY"in e?e.movementY:Wh}}),ey=Dr(tm),Nw=yn({},tm,{dataTransfer:0}),kw=Dr(Nw),Iw=yn({},Zu,{relatedTarget:0}),Xh=Dr(Iw),Dw=yn({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Mw=Dr(Dw),Fw=yn({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jw=Dr(Fw),Bw=yn({},ts,{data:0}),ty=Dr(Bw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zw[e])?!!t[e]:!1}function rv(){return Uw}var Vw=yn({},Zu,{key:function(e){if(e.key){var t=$w[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(e){return e.type==="keypress"?rd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hw=Dr(Vw),Ww=yn({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ny=Dr(Ww),Xw=yn({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),Yw=Dr(Xw),Qw=yn({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kw=Dr(Qw),qw=yn({},tm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zw=Dr(qw),Jw=[9,13,27,32],iv=Qi&&"CompositionEvent"in window,xu=null;Qi&&"documentMode"in document&&(xu=document.documentMode);var eT=Qi&&"TextEvent"in window&&!xu,kx=Qi&&(!iv||xu&&8<xu&&11>=xu),ry=" ",iy=!1;function Ix(e,t){switch(e){case"keyup":return Jw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Al=!1;function tT(e,t){switch(e){case"compositionend":return Dx(t);case"keypress":return t.which!==32?null:(iy=!0,ry);case"textInput":return e=t.data,e===ry&&iy?null:e;default:return null}}function nT(e,t){if(Al)return e==="compositionend"||!iv&&Ix(e,t)?(e=Nx(),nd=tv=Ra=null,Al=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kx&&t.locale!=="ko"?null:t.data;default:return null}}var rT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rT[e.type]:t==="textarea"}function Mx(e,t,n,r){mx(r),t=_d(t,"onChange"),0<t.length&&(n=new nv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eu=null,Nu=null;function iT(e){Xx(e,0)}function nm(e){var t=Rl(e);if(ox(t))return e}function aT(e,t){if(e==="change")return t}var Fx=!1;if(Qi){var Yh;if(Qi){var Qh="oninput"in document;if(!Qh){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Qh=typeof oy.oninput=="function"}Yh=Qh}else Yh=!1;Fx=Yh&&(!document.documentMode||9<document.documentMode)}function ly(){Eu&&(Eu.detachEvent("onpropertychange",jx),Nu=Eu=null)}function jx(e){if(e.propertyName==="value"&&nm(Nu)){var t=[];Mx(t,Nu,e,K0(e)),gx(iT,t)}}function oT(e,t,n){e==="focusin"?(ly(),Eu=t,Nu=n,Eu.attachEvent("onpropertychange",jx)):e==="focusout"&&ly()}function lT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nm(Nu)}function sT(e,t){if(e==="click")return nm(t)}function uT(e,t){if(e==="input"||e==="change")return nm(t)}function cT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var si=typeof Object.is=="function"?Object.is:cT;function ku(e,t){if(si(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dp.call(t,i)||!si(e[i],t[i]))return!1}return!0}function sy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uy(e,t){var n=sy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sy(n)}}function Bx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $x(){for(var e=window,t=hd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hd(e.document)}return t}function av(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fT(e){var t=$x(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bx(n.ownerDocument.documentElement,n)){if(r!==null&&av(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=uy(n,a);var o=uy(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dT=Qi&&"documentMode"in document&&11>=document.documentMode,Cl=null,e0=null,_u=null,t0=!1;function cy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;t0||Cl==null||Cl!==hd(r)||(r=Cl,"selectionStart"in r&&av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&ku(_u,r)||(_u=r,r=_d(e0,"onSelect"),0<r.length&&(t=new nv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cl)))}function Nf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ll={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},Kh={},Gx={};Qi&&(Gx=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function rm(e){if(Kh[e])return Kh[e];if(!Ll[e])return e;var t=Ll[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gx)return Kh[e]=t[n];return e}var zx=rm("animationend"),Ux=rm("animationiteration"),Vx=rm("animationstart"),Hx=rm("transitionend"),Wx=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){Wx.set(e,t),Fo(t,[e])}for(var qh=0;qh<fy.length;qh++){var Zh=fy[qh],mT=Zh.toLowerCase(),hT=Zh[0].toUpperCase()+Zh.slice(1);Ua(mT,"on"+hT)}Ua(zx,"onAnimationEnd");Ua(Ux,"onAnimationIteration");Ua(Vx,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(Hx,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function dy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mw(r,t,void 0,e),e.currentTarget=null}function Xx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;dy(i,l,f),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,f=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;dy(i,l,f),a=u}}}if(vd)throw e=Kp,vd=!1,Kp=null,e}function sn(e,t){var n=t[o0];n===void 0&&(n=t[o0]=new Set);var r=e+"__bubble";n.has(r)||(Yx(t,e,2,!1),n.add(r))}function Jh(e,t,n){var r=0;t&&(r|=4),Yx(n,e,r,t)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[kf]){e[kf]=!0,tx.forEach(function(n){n!=="selectionchange"&&(pT.has(n)||Jh(n,!1,e),Jh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kf]||(t[kf]=!0,Jh("selectionchange",!1,t))}}function Yx(e,t,n,r){switch(Px(t)){case 1:var i=Rw;break;case 4:i=Ow;break;default:i=ev}n=i.bind(null,t,n,e),i=void 0,!Qp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ep(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wo(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}gx(function(){var f=a,p=K0(n),h=[];e:{var d=Wx.get(e);if(d!==void 0){var w=nv,x=e;switch(e){case"keypress":if(rd(n)===0)break e;case"keydown":case"keyup":w=Hw;break;case"focusin":x="focus",w=Xh;break;case"focusout":x="blur",w=Xh;break;case"beforeblur":case"afterblur":w=Xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Yw;break;case zx:case Ux:case Vx:w=Mw;break;case Hx:w=Kw;break;case"scroll":w=Pw;break;case"wheel":w=Zw;break;case"copy":case"cut":case"paste":w=jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ny}var L=(t&4)!==0,I=!L&&e==="scroll",v=L?d!==null?d+"Capture":null:d;L=[];for(var b=f,C;b!==null;){C=b;var H=C.stateNode;if(C.tag===5&&H!==null&&(C=H,v!==null&&(H=Lu(b,v),H!=null&&L.push(Du(b,H,C)))),I)break;b=b.return}0<L.length&&(d=new w(d,x,null,n,p),h.push({event:d,listeners:L}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&n!==Xp&&(x=n.relatedTarget||n.fromElement)&&(wo(x)||x[Ki]))break e;if((w||d)&&(d=p.window===p?p:(d=p.ownerDocument)?d.defaultView||d.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=f,x=x?wo(x):null,x!==null&&(I=jo(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=f),w!==x)){if(L=ey,H="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(L=ny,H="onPointerLeave",v="onPointerEnter",b="pointer"),I=w==null?d:Rl(w),C=x==null?d:Rl(x),d=new L(H,b+"leave",w,n,p),d.target=I,d.relatedTarget=C,H=null,wo(p)===f&&(L=new L(v,b+"enter",x,n,p),L.target=C,L.relatedTarget=I,H=L),I=H,w&&x)t:{for(L=w,v=x,b=0,C=L;C;C=_l(C))b++;for(C=0,H=v;H;H=_l(H))C++;for(;0<b-C;)L=_l(L),b--;for(;0<C-b;)v=_l(v),C--;for(;b--;){if(L===v||v!==null&&L===v.alternate)break t;L=_l(L),v=_l(v)}L=null}else L=null;w!==null&&my(h,d,w,L,!1),x!==null&&I!==null&&my(h,I,x,L,!0)}}e:{if(d=f?Rl(f):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var q=aT;else if(ay(d))if(Fx)q=uT;else{q=lT;var ae=oT}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(q=sT);if(q&&(q=q(e,f))){Mx(h,q,n,p);break e}ae&&ae(e,d,f),e==="focusout"&&(ae=d._wrapperState)&&ae.controlled&&d.type==="number"&&zp(d,"number",d.value)}switch(ae=f?Rl(f):window,e){case"focusin":(ay(ae)||ae.contentEditable==="true")&&(Cl=ae,e0=f,_u=null);break;case"focusout":_u=e0=Cl=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,cy(h,n,p);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":cy(h,n,p)}var we;if(iv)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Al?Ix(e,n)&&(ue="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ue="onCompositionStart");ue&&(kx&&n.locale!=="ko"&&(Al||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Al&&(we=Nx()):(Ra=p,tv="value"in Ra?Ra.value:Ra.textContent,Al=!0)),ae=_d(f,ue),0<ae.length&&(ue=new ty(ue,e,null,n,p),h.push({event:ue,listeners:ae}),we?ue.data=we:(we=Dx(n),we!==null&&(ue.data=we)))),(we=eT?tT(e,n):nT(e,n))&&(f=_d(f,"onBeforeInput"),0<f.length&&(p=new ty("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:f}),p.data=we))}Xx(h,t)})}function Du(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _d(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Lu(e,n),a!=null&&r.unshift(Du(e,a,i)),a=Lu(e,t),a!=null&&r.push(Du(e,a,i))),e=e.return}return r}function _l(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function my(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Lu(n,a),u!=null&&o.unshift(Du(n,u,l))):i||(u=Lu(n,a),u!=null&&o.push(Du(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var vT=/\r\n?/g,gT=/\u0000|\uFFFD/g;function hy(e){return(typeof e=="string"?e:""+e).replace(vT,`
`).replace(gT,"")}function If(e,t,n){if(t=hy(t),hy(e)!==t&&n)throw Error(Ne(425))}function Sd(){}var n0=null,r0=null;function i0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,yT=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(e){return py.resolve(null).then(e).catch(ET)}:a0;function ET(e){setTimeout(function(){throw e})}function tp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Pu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(t)}function Da(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),Ai="__reactFiber$"+ns,Mu="__reactProps$"+ns,Ki="__reactContainer$"+ns,o0="__reactEvents$"+ns,_T="__reactListeners$"+ns,ST="__reactHandles$"+ns;function wo(e){var t=e[Ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ki]||n[Ai]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vy(e);e!==null;){if(n=e[Ai])return n;e=vy(e)}return t}e=n,n=e.parentNode}return null}function Ju(e){return e=e[Ai]||e[Ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function im(e){return e[Mu]||null}var l0=[],Ol=-1;function Va(e){return{current:e}}function un(e){0>Ol||(e.current=l0[Ol],l0[Ol]=null,Ol--)}function an(e,t){Ol++,l0[Ol]=e.current,e.current=t}var za={},er=Va(za),xr=Va(!1),Po=za;function Wl(e,t){var n=e.type.contextTypes;if(!n)return za;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Er(e){return e=e.childContextTypes,e!=null}function wd(){un(xr),un(er)}function gy(e,t,n){if(er.current!==za)throw Error(Ne(168));an(er,t),an(xr,n)}function Qx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ne(108,ow(e)||"Unknown",i));return yn({},n,r)}function Td(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||za,Po=er.current,an(er,e),an(xr,xr.current),!0}function yy(e,t,n){var r=e.stateNode;if(!r)throw Error(Ne(169));n?(e=Qx(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,un(xr),un(er),an(er,e)):un(xr),an(xr,n)}var Hi=null,am=!1,np=!1;function Kx(e){Hi===null?Hi=[e]:Hi.push(e)}function wT(e){am=!0,Kx(e)}function Ha(){if(!np&&Hi!==null){np=!0;var e=0,t=qt;try{var n=Hi;for(qt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Hi=null,am=!1}catch(i){throw Hi!==null&&(Hi=Hi.slice(e+1)),_x(q0,Ha),i}finally{qt=t,np=!1}}return null}var Pl=[],Nl=0,bd=null,Ad=0,zr=[],Ur=0,No=null,Wi=1,Xi="";function _o(e,t){Pl[Nl++]=Ad,Pl[Nl++]=bd,bd=e,Ad=t}function qx(e,t,n){zr[Ur++]=Wi,zr[Ur++]=Xi,zr[Ur++]=No,No=e;var r=Wi;e=Xi;var i=32-oi(r)-1;r&=~(1<<i),n+=1;var a=32-oi(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wi=1<<32-oi(t)+i|n<<i|r,Xi=a+e}else Wi=1<<a|n<<i|r,Xi=e}function ov(e){e.return!==null&&(_o(e,1),qx(e,1,0))}function lv(e){for(;e===bd;)bd=Pl[--Nl],Pl[Nl]=null,Ad=Pl[--Nl],Pl[Nl]=null;for(;e===No;)No=zr[--Ur],zr[Ur]=null,Xi=zr[--Ur],zr[Ur]=null,Wi=zr[--Ur],zr[Ur]=null}var Nr=null,Pr=null,cn=!1,ii=null;function Zx(e,t){var n=Vr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nr=e,Pr=Da(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nr=e,Pr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=No!==null?{id:Wi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nr=e,Pr=null,!0):!1;default:return!1}}function s0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u0(e){if(cn){var t=Pr;if(t){var n=t;if(!xy(e,t)){if(s0(e))throw Error(Ne(418));t=Da(n.nextSibling);var r=Nr;t&&xy(e,t)?Zx(r,n):(e.flags=e.flags&-4097|2,cn=!1,Nr=e)}}else{if(s0(e))throw Error(Ne(418));e.flags=e.flags&-4097|2,cn=!1,Nr=e}}}function Ey(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nr=e}function Df(e){if(e!==Nr)return!1;if(!cn)return Ey(e),cn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!i0(e.type,e.memoizedProps)),t&&(t=Pr)){if(s0(e))throw Jx(),Error(Ne(418));for(;t;)Zx(e,t),t=Da(t.nextSibling)}if(Ey(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pr=Da(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pr=null}}else Pr=Nr?Da(e.stateNode.nextSibling):null;return!0}function Jx(){for(var e=Pr;e;)e=Da(e.nextSibling)}function Xl(){Pr=Nr=null,cn=!1}function sv(e){ii===null?ii=[e]:ii.push(e)}var TT=Ji.ReactCurrentBatchConfig;function ni(e,t){if(e&&e.defaultProps){t=yn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Cd=Va(null),Ld=null,kl=null,uv=null;function cv(){uv=kl=Ld=null}function fv(e){var t=Cd.current;un(Cd),e._currentValue=t}function c0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zl(e,t){Ld=e,uv=kl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function Wr(e){var t=e._currentValue;if(uv!==e)if(e={context:e,memoizedValue:t,next:null},kl===null){if(Ld===null)throw Error(Ne(308));kl=e,Ld.dependencies={lanes:0,firstContext:e}}else kl=kl.next=e;return t}var To=null;function dv(e){To===null?To=[e]:To.push(e)}function eE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,dv(t)):(n.next=i.next,i.next=n),t.interleaved=n,qi(e,r)}function qi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Aa=!1;function mv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qi(e,n)}return i=r.interleaved,i===null?(t.next=t,dv(r)):(t.next=i.next,i.next=t),r.interleaved=t,qi(e,n)}function id(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Z0(e,n)}}function _y(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rd(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,o===null?a=f:o.next=f,o=u;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=u))}if(a!==null){var h=i.baseState;o=0,p=f=u=null,l=a;do{var d=l.lane,w=l.eventTime;if((r&d)===d){p!==null&&(p=p.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,L=l;switch(d=t,w=n,L.tag){case 1:if(x=L.payload,typeof x=="function"){h=x.call(w,h,d);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=L.payload,d=typeof x=="function"?x.call(w,h,d):x,d==null)break e;h=yn({},h,d);break e;case 2:Aa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else w={eventTime:w,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=w,u=h):p=p.next=w,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(p===null&&(u=h),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Io|=o,e.lanes=o,e.memoizedState=h}}function Sy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ne(191,i));i.call(r)}}}var nE=new ex.Component().refs;function f0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var om={isMounted:function(e){return(e=e._reactInternals)?jo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=or(),i=ja(e),a=Yi(r,i);a.payload=t,n!=null&&(a.callback=n),t=Ma(e,a,i),t!==null&&(li(t,e,i,r),id(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=or(),i=ja(e),a=Yi(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ma(e,a,i),t!==null&&(li(t,e,i,r),id(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=or(),r=ja(e),i=Yi(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ma(e,i,r),t!==null&&(li(t,e,r,n),id(t,e,r))}};function wy(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!ku(n,r)||!ku(i,a):!0}function rE(e,t,n){var r=!1,i=za,a=t.contextType;return typeof a=="object"&&a!==null?a=Wr(a):(i=Er(t)?Po:er.current,r=t.contextTypes,a=(r=r!=null)?Wl(e,i):za),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=om,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ty(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&om.enqueueReplaceState(t,t.state,null)}function d0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=nE,mv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Wr(a):(a=Er(t)?Po:er.current,i.context=Wl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(f0(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&om.enqueueReplaceState(i,i.state,null),Rd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var r=n.stateNode}if(!r)throw Error(Ne(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;l===nE&&(l=i.refs={}),o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,e))}return e}function Mf(e,t){throw e=Object.prototype.toString.call(t),Error(Ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function by(e){var t=e._init;return t(e._payload)}function iE(e){function t(v,b){if(e){var C=v.deletions;C===null?(v.deletions=[b],v.flags|=16):C.push(b)}}function n(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Ba(v,b),v.index=0,v.sibling=null,v}function a(v,b,C){return v.index=C,e?(C=v.alternate,C!==null?(C=C.index,C<b?(v.flags|=2,b):C):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,C,H){return b===null||b.tag!==6?(b=up(C,v.mode,H),b.return=v,b):(b=i(b,C),b.return=v,b)}function u(v,b,C,H){var q=C.type;return q===bl?p(v,b,C.props.children,H,C.key):b!==null&&(b.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===ba&&by(q)===b.type)?(H=i(b,C.props),H.ref=iu(v,b,C),H.return=v,H):(H=cd(C.type,C.key,C.props,null,v.mode,H),H.ref=iu(v,b,C),H.return=v,H)}function f(v,b,C,H){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=cp(C,v.mode,H),b.return=v,b):(b=i(b,C.children||[]),b.return=v,b)}function p(v,b,C,H,q){return b===null||b.tag!==7?(b=Ro(C,v.mode,H,q),b.return=v,b):(b=i(b,C),b.return=v,b)}function h(v,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=up(""+b,v.mode,C),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bf:return C=cd(b.type,b.key,b.props,null,v.mode,C),C.ref=iu(v,null,b),C.return=v,C;case Tl:return b=cp(b,v.mode,C),b.return=v,b;case ba:var H=b._init;return h(v,H(b._payload),C)}if(mu(b)||Js(b))return b=Ro(b,v.mode,C,null),b.return=v,b;Mf(v,b)}return null}function d(v,b,C,H){var q=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:l(v,b,""+C,H);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bf:return C.key===q?u(v,b,C,H):null;case Tl:return C.key===q?f(v,b,C,H):null;case ba:return q=C._init,d(v,b,q(C._payload),H)}if(mu(C)||Js(C))return q!==null?null:p(v,b,C,H,null);Mf(v,C)}return null}function w(v,b,C,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return v=v.get(C)||null,l(b,v,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case bf:return v=v.get(H.key===null?C:H.key)||null,u(b,v,H,q);case Tl:return v=v.get(H.key===null?C:H.key)||null,f(b,v,H,q);case ba:var ae=H._init;return w(v,b,C,ae(H._payload),q)}if(mu(H)||Js(H))return v=v.get(C)||null,p(b,v,H,q,null);Mf(b,H)}return null}function x(v,b,C,H){for(var q=null,ae=null,we=b,ue=b=0,at=null;we!==null&&ue<C.length;ue++){we.index>ue?(at=we,we=null):at=we.sibling;var Ve=d(v,we,C[ue],H);if(Ve===null){we===null&&(we=at);break}e&&we&&Ve.alternate===null&&t(v,we),b=a(Ve,b,ue),ae===null?q=Ve:ae.sibling=Ve,ae=Ve,we=at}if(ue===C.length)return n(v,we),cn&&_o(v,ue),q;if(we===null){for(;ue<C.length;ue++)we=h(v,C[ue],H),we!==null&&(b=a(we,b,ue),ae===null?q=we:ae.sibling=we,ae=we);return cn&&_o(v,ue),q}for(we=r(v,we);ue<C.length;ue++)at=w(we,v,ue,C[ue],H),at!==null&&(e&&at.alternate!==null&&we.delete(at.key===null?ue:at.key),b=a(at,b,ue),ae===null?q=at:ae.sibling=at,ae=at);return e&&we.forEach(function(Se){return t(v,Se)}),cn&&_o(v,ue),q}function L(v,b,C,H){var q=Js(C);if(typeof q!="function")throw Error(Ne(150));if(C=q.call(C),C==null)throw Error(Ne(151));for(var ae=q=null,we=b,ue=b=0,at=null,Ve=C.next();we!==null&&!Ve.done;ue++,Ve=C.next()){we.index>ue?(at=we,we=null):at=we.sibling;var Se=d(v,we,Ve.value,H);if(Se===null){we===null&&(we=at);break}e&&we&&Se.alternate===null&&t(v,we),b=a(Se,b,ue),ae===null?q=Se:ae.sibling=Se,ae=Se,we=at}if(Ve.done)return n(v,we),cn&&_o(v,ue),q;if(we===null){for(;!Ve.done;ue++,Ve=C.next())Ve=h(v,Ve.value,H),Ve!==null&&(b=a(Ve,b,ue),ae===null?q=Ve:ae.sibling=Ve,ae=Ve);return cn&&_o(v,ue),q}for(we=r(v,we);!Ve.done;ue++,Ve=C.next())Ve=w(we,v,ue,Ve.value,H),Ve!==null&&(e&&Ve.alternate!==null&&we.delete(Ve.key===null?ue:Ve.key),b=a(Ve,b,ue),ae===null?q=Ve:ae.sibling=Ve,ae=Ve);return e&&we.forEach(function(Ke){return t(v,Ke)}),cn&&_o(v,ue),q}function I(v,b,C,H){if(typeof C=="object"&&C!==null&&C.type===bl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case bf:e:{for(var q=C.key,ae=b;ae!==null;){if(ae.key===q){if(q=C.type,q===bl){if(ae.tag===7){n(v,ae.sibling),b=i(ae,C.props.children),b.return=v,v=b;break e}}else if(ae.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===ba&&by(q)===ae.type){n(v,ae.sibling),b=i(ae,C.props),b.ref=iu(v,ae,C),b.return=v,v=b;break e}n(v,ae);break}else t(v,ae);ae=ae.sibling}C.type===bl?(b=Ro(C.props.children,v.mode,H,C.key),b.return=v,v=b):(H=cd(C.type,C.key,C.props,null,v.mode,H),H.ref=iu(v,b,C),H.return=v,v=H)}return o(v);case Tl:e:{for(ae=C.key;b!==null;){if(b.key===ae)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){n(v,b.sibling),b=i(b,C.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else t(v,b);b=b.sibling}b=cp(C,v.mode,H),b.return=v,v=b}return o(v);case ba:return ae=C._init,I(v,b,ae(C._payload),H)}if(mu(C))return x(v,b,C,H);if(Js(C))return L(v,b,C,H);Mf(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,C),b.return=v,v=b):(n(v,b),b=up(C,v.mode,H),b.return=v,v=b),o(v)):n(v,b)}return I}var Yl=iE(!0),aE=iE(!1),ec={},Li=Va(ec),Fu=Va(ec),ju=Va(ec);function bo(e){if(e===ec)throw Error(Ne(174));return e}function hv(e,t){switch(an(ju,t),an(Fu,e),an(Li,ec),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vp(t,e)}un(Li),an(Li,t)}function Ql(){un(Li),un(Fu),un(ju)}function oE(e){bo(ju.current);var t=bo(Li.current),n=Vp(t,e.type);t!==n&&(an(Fu,e),an(Li,n))}function pv(e){Fu.current===e&&(un(Li),un(Fu))}var vn=Va(0);function Od(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rp=[];function vv(){for(var e=0;e<rp.length;e++)rp[e]._workInProgressVersionPrimary=null;rp.length=0}var ad=Ji.ReactCurrentDispatcher,ip=Ji.ReactCurrentBatchConfig,ko=0,gn=null,jn=null,Vn=null,Pd=!1,Su=!1,Bu=0,bT=0;function qn(){throw Error(Ne(321))}function gv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function yv(e,t,n,r,i,a){if(ko=a,gn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ad.current=e===null||e.memoizedState===null?RT:OT,e=n(r,i),Su){a=0;do{if(Su=!1,Bu=0,25<=a)throw Error(Ne(301));a+=1,Vn=jn=null,t.updateQueue=null,ad.current=PT,e=n(r,i)}while(Su)}if(ad.current=Nd,t=jn!==null&&jn.next!==null,ko=0,Vn=jn=gn=null,Pd=!1,t)throw Error(Ne(300));return e}function xv(){var e=Bu!==0;return Bu=0,e}function Ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?gn.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function Xr(){if(jn===null){var e=gn.alternate;e=e!==null?e.memoizedState:null}else e=jn.next;var t=Vn===null?gn.memoizedState:Vn.next;if(t!==null)Vn=t,jn=e;else{if(e===null)throw Error(Ne(310));jn=e,e={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Vn===null?gn.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function $u(e,t){return typeof t=="function"?t(e):t}function ap(e){var t=Xr(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var r=jn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,u=null,f=a;do{var p=f.lane;if((ko&p)===p)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,gn.lanes|=p,Io|=p}f=f.next}while(f!==null&&f!==a);u===null?o=r:u.next=l,si(r,t.memoizedState)||(gr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,gn.lanes|=a,Io|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function op(e){var t=Xr(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);si(a,t.memoizedState)||(gr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function lE(){}function sE(e,t){var n=gn,r=Xr(),i=t(),a=!si(r.memoizedState,i);if(a&&(r.memoizedState=i,gr=!0),r=r.queue,Ev(fE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,Gu(9,cE.bind(null,n,r,i,t),void 0,null),Hn===null)throw Error(Ne(349));ko&30||uE(n,t,i)}return i}function uE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cE(e,t,n,r){t.value=n,t.getSnapshot=r,dE(t)&&mE(e)}function fE(e,t,n){return n(function(){dE(t)&&mE(e)})}function dE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch{return!0}}function mE(e){var t=qi(e,1);t!==null&&li(t,e,1,-1)}function Ay(e){var t=Ti();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:e},t.queue=e,e=e.dispatch=LT.bind(null,gn,e),[t.memoizedState,e]}function Gu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hE(){return Xr().memoizedState}function od(e,t,n,r){var i=Ti();gn.flags|=e,i.memoizedState=Gu(1|t,n,void 0,r===void 0?null:r)}function lm(e,t,n,r){var i=Xr();r=r===void 0?null:r;var a=void 0;if(jn!==null){var o=jn.memoizedState;if(a=o.destroy,r!==null&&gv(r,o.deps)){i.memoizedState=Gu(t,n,a,r);return}}gn.flags|=e,i.memoizedState=Gu(1|t,n,a,r)}function Cy(e,t){return od(8390656,8,e,t)}function Ev(e,t){return lm(2048,8,e,t)}function pE(e,t){return lm(4,2,e,t)}function vE(e,t){return lm(4,4,e,t)}function gE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yE(e,t,n){return n=n!=null?n.concat([e]):null,lm(4,4,gE.bind(null,t,e),n)}function _v(){}function xE(e,t){var n=Xr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function EE(e,t){var n=Xr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _E(e,t,n){return ko&21?(si(n,t)||(n=Tx(),gn.lanes|=n,Io|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=n)}function AT(e,t){var n=qt;qt=n!==0&&4>n?n:4,e(!0);var r=ip.transition;ip.transition={};try{e(!1),t()}finally{qt=n,ip.transition=r}}function SE(){return Xr().memoizedState}function CT(e,t,n){var r=ja(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wE(e))TE(t,n);else if(n=eE(e,t,n,r),n!==null){var i=or();li(n,e,r,i),bE(n,t,r)}}function LT(e,t,n){var r=ja(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wE(e))TE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,si(l,o)){var u=t.interleaved;u===null?(i.next=i,dv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=eE(e,t,i,r),n!==null&&(i=or(),li(n,e,r,i),bE(n,t,r))}}function wE(e){var t=e.alternate;return e===gn||t!==null&&t===gn}function TE(e,t){Su=Pd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Z0(e,n)}}var Nd={readContext:Wr,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},RT={readContext:Wr,useCallback:function(e,t){return Ti().memoizedState=[e,t===void 0?null:t],e},useContext:Wr,useEffect:Cy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,od(4194308,4,gE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return od(4194308,4,e,t)},useInsertionEffect:function(e,t){return od(4,2,e,t)},useMemo:function(e,t){var n=Ti();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ti();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=CT.bind(null,gn,e),[r.memoizedState,e]},useRef:function(e){var t=Ti();return e={current:e},t.memoizedState=e},useState:Ay,useDebugValue:_v,useDeferredValue:function(e){return Ti().memoizedState=e},useTransition:function(){var e=Ay(!1),t=e[0];return e=AT.bind(null,e[1]),Ti().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gn,i=Ti();if(cn){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=t(),Hn===null)throw Error(Ne(349));ko&30||uE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Cy(fE.bind(null,r,a,e),[e]),r.flags|=2048,Gu(9,cE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ti(),t=Hn.identifierPrefix;if(cn){var n=Xi,r=Wi;n=(r&~(1<<32-oi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OT={readContext:Wr,useCallback:xE,useContext:Wr,useEffect:Ev,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:ap,useRef:hE,useState:function(){return ap($u)},useDebugValue:_v,useDeferredValue:function(e){var t=Xr();return _E(t,jn.memoizedState,e)},useTransition:function(){var e=ap($u)[0],t=Xr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1},PT={readContext:Wr,useCallback:xE,useContext:Wr,useEffect:Ev,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:op,useRef:hE,useState:function(){return op($u)},useDebugValue:_v,useDeferredValue:function(e){var t=Xr();return jn===null?t.memoizedState=e:_E(t,jn.memoizedState,e)},useTransition:function(){var e=op($u)[0],t=Xr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1};function Kl(e,t){try{var n="",r=t;do n+=aw(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function lp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var NT=typeof WeakMap=="function"?WeakMap:Map;function AE(e,t,n){n=Yi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Id||(Id=!0,w0=r),m0(e,t)},n}function CE(e,t,n){n=Yi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){m0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){m0(e,t),typeof r!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ly(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new NT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=WT.bind(null,e,t,n),t.then(e,e))}function Ry(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yi(-1,1),t.tag=2,Ma(n,t,1))),n.lanes|=1),e)}var kT=Ji.ReactCurrentOwner,gr=!1;function ir(e,t,n,r){t.child=e===null?aE(t,null,n,r):Yl(t,e.child,n,r)}function Py(e,t,n,r,i){n=n.render;var a=t.ref;return zl(t,i),r=yv(e,t,n,r,a,i),n=xv(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zi(e,t,i)):(cn&&n&&ov(t),t.flags|=1,ir(e,t,r,i),t.child)}function Ny(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Rv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,LE(e,t,a,r,i)):(e=cd(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(o,r)&&e.ref===t.ref)return Zi(e,t,i)}return t.flags|=1,e=Ba(a,r),e.ref=t.ref,e.return=t,t.child=e}function LE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(ku(a,r)&&e.ref===t.ref)if(gr=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,Zi(e,t,i)}return h0(e,t,n,r,i)}function RE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Dl,Or),Or|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(Dl,Or),Or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,an(Dl,Or),Or|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,an(Dl,Or),Or|=r;return ir(e,t,i,n),t.child}function OE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function h0(e,t,n,r,i){var a=Er(n)?Po:er.current;return a=Wl(t,a),zl(t,i),n=yv(e,t,n,r,a,i),r=xv(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zi(e,t,i)):(cn&&r&&ov(t),t.flags|=1,ir(e,t,n,i),t.child)}function ky(e,t,n,r,i){if(Er(n)){var a=!0;Td(t)}else a=!1;if(zl(t,i),t.stateNode===null)ld(e,t),rE(t,n,r),d0(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Wr(f):(f=Er(n)?Po:er.current,f=Wl(t,f));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==f)&&Ty(t,o,r,f),Aa=!1;var d=t.memoizedState;o.state=d,Rd(t,r,o,i),u=t.memoizedState,l!==r||d!==u||xr.current||Aa?(typeof p=="function"&&(f0(t,n,p,r),u=t.memoizedState),(l=Aa||wy(t,n,l,r,d,u,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,tE(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:ni(t.type,l),o.props=f,h=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wr(u):(u=Er(n)?Po:er.current,u=Wl(t,u));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==u)&&Ty(t,o,r,u),Aa=!1,d=t.memoizedState,o.state=d,Rd(t,r,o,i);var x=t.memoizedState;l!==h||d!==x||xr.current||Aa?(typeof w=="function"&&(f0(t,n,w,r),x=t.memoizedState),(f=Aa||wy(t,n,f,r,d,x,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=u,r=f):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return p0(e,t,n,r,a,i)}function p0(e,t,n,r,i,a){OE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&yy(t,n,!1),Zi(e,t,a);r=t.stateNode,kT.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Yl(t,e.child,null,a),t.child=Yl(t,null,l,a)):ir(e,t,l,a),t.memoizedState=r.state,i&&yy(t,n,!0),t.child}function PE(e){var t=e.stateNode;t.pendingContext?gy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gy(e,t.context,!1),hv(e,t.containerInfo)}function Iy(e,t,n,r,i){return Xl(),sv(i),t.flags|=256,ir(e,t,n,r),t.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function g0(e){return{baseLanes:e,cachePool:null,transitions:null}}function NE(e,t,n){var r=t.pendingProps,i=vn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),an(vn,i&1),e===null)return u0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=cm(o,r,0,null),e=Ro(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=g0(n),t.memoizedState=v0,e):Sv(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return IT(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ba(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Ba(l,a):(a=Ro(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?g0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=v0,r}return a=e.child,e=a.sibling,r=Ba(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Sv(e,t){return t=cm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ff(e,t,n,r){return r!==null&&sv(r),Yl(t,e.child,null,n),e=Sv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IT(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=lp(Error(Ne(422))),Ff(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=cm({mode:"visible",children:r.children},i,0,null),a=Ro(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Yl(t,e.child,null,o),t.child.memoizedState=g0(o),t.memoizedState=v0,a);if(!(t.mode&1))return Ff(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Ne(419)),r=lp(a,r,void 0),Ff(e,t,o,r)}if(l=(o&e.childLanes)!==0,gr||l){if(r=Hn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,qi(e,i),li(r,e,i,-1))}return Lv(),r=lp(Error(Ne(421))),Ff(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=XT.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Pr=Da(i.nextSibling),Nr=t,cn=!0,ii=null,e!==null&&(zr[Ur++]=Wi,zr[Ur++]=Xi,zr[Ur++]=No,Wi=e.id,Xi=e.overflow,No=t),t=Sv(t,r.children),t.flags|=4096,t)}function Dy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),c0(e.return,t,n)}function sp(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function kE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ir(e,t,r.children,n),r=vn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dy(e,n,t);else if(e.tag===19)Dy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(an(vn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Od(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),sp(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Od(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}sp(t,!0,n,null,a);break;case"together":sp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ld(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Io|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,n=Ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function DT(e,t,n){switch(t.tag){case 3:PE(t),Xl();break;case 5:oE(t);break;case 1:Er(t.type)&&Td(t);break;case 4:hv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;an(Cd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(an(vn,vn.current&1),t.flags|=128,null):n&t.child.childLanes?NE(e,t,n):(an(vn,vn.current&1),e=Zi(e,t,n),e!==null?e.sibling:null);an(vn,vn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(vn,vn.current),r)break;return null;case 22:case 23:return t.lanes=0,RE(e,t,n)}return Zi(e,t,n)}var IE,y0,DE,ME;IE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y0=function(){};DE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,bo(Li.current);var a=null;switch(n){case"input":i=$p(e,i),r=$p(e,r),a=[];break;case"select":i=yn({},i,{value:void 0}),r=yn({},r,{value:void 0}),a=[];break;case"textarea":i=Up(e,i),r=Up(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sd)}Hp(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Au.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Au.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&sn("scroll",e),a||l===u||(a=[])):(a=a||[]).push(f,u))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};ME=function(e,t,n,r){n!==r&&(t.flags|=4)};function au(e,t){if(!cn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function MT(e,t,n){var r=t.pendingProps;switch(lv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(t),null;case 1:return Er(t.type)&&wd(),Zn(t),null;case 3:return r=t.stateNode,Ql(),un(xr),un(er),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Df(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ii!==null&&(A0(ii),ii=null))),y0(e,t),Zn(t),null;case 5:pv(t);var i=bo(ju.current);if(n=t.type,e!==null&&t.stateNode!=null)DE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ne(166));return Zn(t),null}if(e=bo(Li.current),Df(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ai]=t,r[Mu]=a,e=(t.mode&1)!==0,n){case"dialog":sn("cancel",r),sn("close",r);break;case"iframe":case"object":case"embed":sn("load",r);break;case"video":case"audio":for(i=0;i<pu.length;i++)sn(pu[i],r);break;case"source":sn("error",r);break;case"img":case"image":case"link":sn("error",r),sn("load",r);break;case"details":sn("toggle",r);break;case"input":Vg(r,a),sn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},sn("invalid",r);break;case"textarea":Wg(r,a),sn("invalid",r)}Hp(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&If(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&If(r.textContent,l,e),i=["children",""+l]):Au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&sn("scroll",r)}switch(n){case"input":Af(r),Hg(r,a,!0);break;case"textarea":Af(r),Xg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Sd)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ux(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ai]=t,e[Mu]=r,IE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Wp(n,r),n){case"dialog":sn("cancel",e),sn("close",e),i=r;break;case"iframe":case"object":case"embed":sn("load",e),i=r;break;case"video":case"audio":for(i=0;i<pu.length;i++)sn(pu[i],e);i=r;break;case"source":sn("error",e),i=r;break;case"img":case"image":case"link":sn("error",e),sn("load",e),i=r;break;case"details":sn("toggle",e),i=r;break;case"input":Vg(e,r),i=$p(e,r),sn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=yn({},r,{value:void 0}),sn("invalid",e);break;case"textarea":Wg(e,r),i=Up(e,r),sn("invalid",e);break;default:i=r}Hp(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?dx(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cx(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Cu(e,u):typeof u=="number"&&Cu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Au.hasOwnProperty(a)?u!=null&&a==="onScroll"&&sn("scroll",e):u!=null&&W0(e,a,u,o))}switch(n){case"input":Af(e),Hg(e,r,!1);break;case"textarea":Af(e),Xg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ga(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?jl(e,!!r.multiple,a,!1):r.defaultValue!=null&&jl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zn(t),null;case 6:if(e&&t.stateNode!=null)ME(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ne(166));if(n=bo(ju.current),bo(Li.current),Df(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ai]=t,(a=r.nodeValue!==n)&&(e=Nr,e!==null))switch(e.tag){case 3:If(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&If(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ai]=t,t.stateNode=r}return Zn(t),null;case 13:if(un(vn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cn&&Pr!==null&&t.mode&1&&!(t.flags&128))Jx(),Xl(),t.flags|=98560,a=!1;else if(a=Df(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Ne(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ne(317));a[Ai]=t}else Xl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zn(t),a=!1}else ii!==null&&(A0(ii),ii=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vn.current&1?Bn===0&&(Bn=3):Lv())),t.updateQueue!==null&&(t.flags|=4),Zn(t),null);case 4:return Ql(),y0(e,t),e===null&&Iu(t.stateNode.containerInfo),Zn(t),null;case 10:return fv(t.type._context),Zn(t),null;case 17:return Er(t.type)&&wd(),Zn(t),null;case 19:if(un(vn),a=t.memoizedState,a===null)return Zn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)au(a,!1);else{if(Bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Od(e),o!==null){for(t.flags|=128,au(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(vn,vn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Pn()>ql&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304)}else{if(!r)if(e=Od(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),au(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!cn)return Zn(t),null}else 2*Pn()-a.renderingStartTime>ql&&n!==1073741824&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Pn(),t.sibling=null,n=vn.current,an(vn,r?n&1|2:n&1),t):(Zn(t),null);case 22:case 23:return Cv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Or&1073741824&&(Zn(t),t.subtreeFlags&6&&(t.flags|=8192)):Zn(t),null;case 24:return null;case 25:return null}throw Error(Ne(156,t.tag))}function FT(e,t){switch(lv(t),t.tag){case 1:return Er(t.type)&&wd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ql(),un(xr),un(er),vv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pv(t),null;case 13:if(un(vn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ne(340));Xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return un(vn),null;case 4:return Ql(),null;case 10:return fv(t.type._context),null;case 22:case 23:return Cv(),null;case 24:return null;default:return null}}var jf=!1,Jn=!1,jT=typeof WeakSet=="function"?WeakSet:Set,et=null;function Il(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tn(e,t,r)}else n.current=null}function x0(e,t,n){try{n()}catch(r){Tn(e,t,r)}}var My=!1;function BT(e,t){if(n0=xd,e=$x(),av(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,f=0,p=0,h=e,d=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)d=h,h=w;for(;;){if(h===e)break t;if(d===n&&++f===i&&(l=o),d===a&&++p===r&&(u=o),(w=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(r0={focusedElem:e,selectionRange:n},xd=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){t=et;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var L=x.memoizedProps,I=x.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?L:ni(t.type,L),I);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(H){Tn(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}return x=My,My=!1,x}function wu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&x0(t,n,a)}i=i.next}while(i!==r)}}function sm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function E0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FE(e){var t=e.alternate;t!==null&&(e.alternate=null,FE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ai],delete t[Mu],delete t[o0],delete t[_T],delete t[ST])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jE(e){return e.tag===5||e.tag===3||e.tag===4}function Fy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sd));else if(r!==4&&(e=e.child,e!==null))for(_0(e,t,n),e=e.sibling;e!==null;)_0(e,t,n),e=e.sibling}function S0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(S0(e,t,n),e=e.sibling;e!==null;)S0(e,t,n),e=e.sibling}var Yn=null,ri=!1;function _a(e,t,n){for(n=n.child;n!==null;)BE(e,t,n),n=n.sibling}function BE(e,t,n){if(Ci&&typeof Ci.onCommitFiberUnmount=="function")try{Ci.onCommitFiberUnmount(em,n)}catch{}switch(n.tag){case 5:Jn||Il(n,t);case 6:var r=Yn,i=ri;Yn=null,_a(e,t,n),Yn=r,ri=i,Yn!==null&&(ri?(e=Yn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(ri?(e=Yn,n=n.stateNode,e.nodeType===8?tp(e.parentNode,n):e.nodeType===1&&tp(e,n),Pu(e)):tp(Yn,n.stateNode));break;case 4:r=Yn,i=ri,Yn=n.stateNode.containerInfo,ri=!0,_a(e,t,n),Yn=r,ri=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&x0(n,t,o),i=i.next}while(i!==r)}_a(e,t,n);break;case 1:if(!Jn&&(Il(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Tn(n,t,l)}_a(e,t,n);break;case 21:_a(e,t,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,_a(e,t,n),Jn=r):_a(e,t,n);break;default:_a(e,t,n)}}function jy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jT),t.forEach(function(r){var i=YT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ti(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Yn=l.stateNode,ri=!1;break e;case 3:Yn=l.stateNode.containerInfo,ri=!0;break e;case 4:Yn=l.stateNode.containerInfo,ri=!0;break e}l=l.return}if(Yn===null)throw Error(Ne(160));BE(a,o,i),Yn=null,ri=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Tn(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$E(t,e),t=t.sibling}function $E(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ti(t,e),Si(e),r&4){try{wu(3,e,e.return),sm(3,e)}catch(L){Tn(e,e.return,L)}try{wu(5,e,e.return)}catch(L){Tn(e,e.return,L)}}break;case 1:ti(t,e),Si(e),r&512&&n!==null&&Il(n,n.return);break;case 5:if(ti(t,e),Si(e),r&512&&n!==null&&Il(n,n.return),e.flags&32){var i=e.stateNode;try{Cu(i,"")}catch(L){Tn(e,e.return,L)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lx(i,a),Wp(l,o);var f=Wp(l,a);for(o=0;o<u.length;o+=2){var p=u[o],h=u[o+1];p==="style"?dx(i,h):p==="dangerouslySetInnerHTML"?cx(i,h):p==="children"?Cu(i,h):W0(i,p,h,f)}switch(l){case"input":Gp(i,a);break;case"textarea":sx(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?jl(i,!!a.multiple,w,!1):d!==!!a.multiple&&(a.defaultValue!=null?jl(i,!!a.multiple,a.defaultValue,!0):jl(i,!!a.multiple,a.multiple?[]:"",!1))}i[Mu]=a}catch(L){Tn(e,e.return,L)}}break;case 6:if(ti(t,e),Si(e),r&4){if(e.stateNode===null)throw Error(Ne(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(L){Tn(e,e.return,L)}}break;case 3:if(ti(t,e),Si(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(t.containerInfo)}catch(L){Tn(e,e.return,L)}break;case 4:ti(t,e),Si(e);break;case 13:ti(t,e),Si(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(bv=Pn())),r&4&&jy(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Jn=(f=Jn)||p,ti(t,e),Jn=f):ti(t,e),Si(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(et=e,p=e.child;p!==null;){for(h=et=p;et!==null;){switch(d=et,w=d.child,d.tag){case 0:case 11:case 14:case 15:wu(4,d,d.return);break;case 1:Il(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(L){Tn(r,n,L)}}break;case 5:Il(d,d.return);break;case 22:if(d.memoizedState!==null){$y(h);continue}}w!==null?(w.return=d,et=w):$y(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fx("display",o))}catch(L){Tn(e,e.return,L)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(L){Tn(e,e.return,L)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ti(t,e),Si(e),r&4&&jy(e);break;case 21:break;default:ti(t,e),Si(e)}}function Si(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jE(n)){var r=n;break e}n=n.return}throw Error(Ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cu(i,""),r.flags&=-33);var a=Fy(e);S0(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fy(e);_0(e,l,o);break;default:throw Error(Ne(161))}}catch(u){Tn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $T(e,t,n){et=e,GE(e)}function GE(e,t,n){for(var r=(e.mode&1)!==0;et!==null;){var i=et,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jf;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Jn;l=jf;var f=Jn;if(jf=o,(Jn=u)&&!f)for(et=i;et!==null;)o=et,u=o.child,o.tag===22&&o.memoizedState!==null?Gy(i):u!==null?(u.return=o,et=u):Gy(i);for(;a!==null;)et=a,GE(a),a=a.sibling;et=i,jf=l,Jn=f}By(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,et=a):By(e)}}function By(e){for(;et!==null;){var t=et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jn||sm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ni(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Sy(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sy(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Pu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}Jn||t.flags&512&&E0(t)}catch(d){Tn(t,t.return,d)}}if(t===e){et=null;break}if(n=t.sibling,n!==null){n.return=t.return,et=n;break}et=t.return}}function $y(e){for(;et!==null;){var t=et;if(t===e){et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,et=n;break}et=t.return}}function Gy(e){for(;et!==null;){var t=et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sm(4,t)}catch(u){Tn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Tn(t,i,u)}}var a=t.return;try{E0(t)}catch(u){Tn(t,a,u)}break;case 5:var o=t.return;try{E0(t)}catch(u){Tn(t,o,u)}}}catch(u){Tn(t,t.return,u)}if(t===e){et=null;break}var l=t.sibling;if(l!==null){l.return=t.return,et=l;break}et=t.return}}var GT=Math.ceil,kd=Ji.ReactCurrentDispatcher,wv=Ji.ReactCurrentOwner,Hr=Ji.ReactCurrentBatchConfig,Ht=0,Hn=null,In=null,Qn=0,Or=0,Dl=Va(0),Bn=0,zu=null,Io=0,um=0,Tv=0,Tu=null,vr=null,bv=0,ql=1/0,Vi=null,Id=!1,w0=null,Fa=null,Bf=!1,Oa=null,Dd=0,bu=0,T0=null,sd=-1,ud=0;function or(){return Ht&6?Pn():sd!==-1?sd:sd=Pn()}function ja(e){return e.mode&1?Ht&2&&Qn!==0?Qn&-Qn:TT.transition!==null?(ud===0&&(ud=Tx()),ud):(e=qt,e!==0||(e=window.event,e=e===void 0?16:Px(e.type)),e):1}function li(e,t,n,r){if(50<bu)throw bu=0,T0=null,Error(Ne(185));qu(e,n,r),(!(Ht&2)||e!==Hn)&&(e===Hn&&(!(Ht&2)&&(um|=n),Bn===4&&La(e,Qn)),_r(e,r),n===1&&Ht===0&&!(t.mode&1)&&(ql=Pn()+500,am&&Ha()))}function _r(e,t){var n=e.callbackNode;Tw(e,t);var r=yd(e,e===Hn?Qn:0);if(r===0)n!==null&&Kg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kg(n),t===1)e.tag===0?wT(zy.bind(null,e)):Kx(zy.bind(null,e)),xT(function(){!(Ht&6)&&Ha()}),n=null;else{switch(bx(r)){case 1:n=q0;break;case 4:n=Sx;break;case 16:n=gd;break;case 536870912:n=wx;break;default:n=gd}n=QE(n,zE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zE(e,t){if(sd=-1,ud=0,Ht&6)throw Error(Ne(327));var n=e.callbackNode;if(Ul()&&e.callbackNode!==n)return null;var r=yd(e,e===Hn?Qn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Md(e,r);else{t=r;var i=Ht;Ht|=2;var a=VE();(Hn!==e||Qn!==t)&&(Vi=null,ql=Pn()+500,Lo(e,t));do try{VT();break}catch(l){UE(e,l)}while(!0);cv(),kd.current=a,Ht=i,In!==null?t=0:(Hn=null,Qn=0,t=Bn)}if(t!==0){if(t===2&&(i=qp(e),i!==0&&(r=i,t=b0(e,i))),t===1)throw n=zu,Lo(e,0),La(e,r),_r(e,Pn()),n;if(t===6)La(e,r);else{if(i=e.current.alternate,!(r&30)&&!zT(i)&&(t=Md(e,r),t===2&&(a=qp(e),a!==0&&(r=a,t=b0(e,a))),t===1))throw n=zu,Lo(e,0),La(e,r),_r(e,Pn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ne(345));case 2:So(e,vr,Vi);break;case 3:if(La(e,r),(r&130023424)===r&&(t=bv+500-Pn(),10<t)){if(yd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){or(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=a0(So.bind(null,e,vr,Vi),t);break}So(e,vr,Vi);break;case 4:if(La(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-oi(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=Pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GT(r/1960))-r,10<r){e.timeoutHandle=a0(So.bind(null,e,vr,Vi),r);break}So(e,vr,Vi);break;case 5:So(e,vr,Vi);break;default:throw Error(Ne(329))}}}return _r(e,Pn()),e.callbackNode===n?zE.bind(null,e):null}function b0(e,t){var n=Tu;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),e=Md(e,t),e!==2&&(t=vr,vr=n,t!==null&&A0(t)),e}function A0(e){vr===null?vr=e:vr.push.apply(vr,e)}function zT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!si(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~Tv,t&=~um,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-oi(t),r=1<<n;e[n]=-1,t&=~r}}function zy(e){if(Ht&6)throw Error(Ne(327));Ul();var t=yd(e,0);if(!(t&1))return _r(e,Pn()),null;var n=Md(e,t);if(e.tag!==0&&n===2){var r=qp(e);r!==0&&(t=r,n=b0(e,r))}if(n===1)throw n=zu,Lo(e,0),La(e,t),_r(e,Pn()),n;if(n===6)throw Error(Ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,So(e,vr,Vi),_r(e,Pn()),null}function Av(e,t){var n=Ht;Ht|=1;try{return e(t)}finally{Ht=n,Ht===0&&(ql=Pn()+500,am&&Ha())}}function Do(e){Oa!==null&&Oa.tag===0&&!(Ht&6)&&Ul();var t=Ht;Ht|=1;var n=Hr.transition,r=qt;try{if(Hr.transition=null,qt=1,e)return e()}finally{qt=r,Hr.transition=n,Ht=t,!(Ht&6)&&Ha()}}function Cv(){Or=Dl.current,un(Dl)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yT(n)),In!==null)for(n=In.return;n!==null;){var r=n;switch(lv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wd();break;case 3:Ql(),un(xr),un(er),vv();break;case 5:pv(r);break;case 4:Ql();break;case 13:un(vn);break;case 19:un(vn);break;case 10:fv(r.type._context);break;case 22:case 23:Cv()}n=n.return}if(Hn=e,In=e=Ba(e.current,null),Qn=Or=t,Bn=0,zu=null,Tv=um=Io=0,vr=Tu=null,To!==null){for(t=0;t<To.length;t++)if(n=To[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}To=null}return e}function UE(e,t){do{var n=In;try{if(cv(),ad.current=Nd,Pd){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pd=!1}if(ko=0,Vn=jn=gn=null,Su=!1,Bu=0,wv.current=null,n===null||n.return===null){Bn=1,zu=t,In=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Qn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,p=l,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var d=p.alternate;d?(p.updateQueue=d.updateQueue,p.memoizedState=d.memoizedState,p.lanes=d.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=Ry(o);if(w!==null){w.flags&=-257,Oy(w,o,l,a,t),w.mode&1&&Ly(a,f,t),t=w,u=f;var x=t.updateQueue;if(x===null){var L=new Set;L.add(u),t.updateQueue=L}else x.add(u);break e}else{if(!(t&1)){Ly(a,f,t),Lv();break e}u=Error(Ne(426))}}else if(cn&&l.mode&1){var I=Ry(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Oy(I,o,l,a,t),sv(Kl(u,l));break e}}a=u=Kl(u,l),Bn!==4&&(Bn=2),Tu===null?Tu=[a]:Tu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=AE(a,u,t);_y(a,v);break e;case 1:l=u;var b=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fa===null||!Fa.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var H=CE(a,l,t);_y(a,H);break e}}a=a.return}while(a!==null)}WE(n)}catch(q){t=q,In===n&&n!==null&&(In=n=n.return);continue}break}while(!0)}function VE(){var e=kd.current;return kd.current=Nd,e===null?Nd:e}function Lv(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Hn===null||!(Io&268435455)&&!(um&268435455)||La(Hn,Qn)}function Md(e,t){var n=Ht;Ht|=2;var r=VE();(Hn!==e||Qn!==t)&&(Vi=null,Lo(e,t));do try{UT();break}catch(i){UE(e,i)}while(!0);if(cv(),Ht=n,kd.current=r,In!==null)throw Error(Ne(261));return Hn=null,Qn=0,Bn}function UT(){for(;In!==null;)HE(In)}function VT(){for(;In!==null&&!pw();)HE(In)}function HE(e){var t=YE(e.alternate,e,Or);e.memoizedProps=e.pendingProps,t===null?WE(e):In=t,wv.current=null}function WE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FT(n,t),n!==null){n.flags&=32767,In=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bn=6,In=null;return}}else if(n=MT(n,t,Or),n!==null){In=n;return}if(t=t.sibling,t!==null){In=t;return}In=t=e}while(t!==null);Bn===0&&(Bn=5)}function So(e,t,n){var r=qt,i=Hr.transition;try{Hr.transition=null,qt=1,HT(e,t,n,r)}finally{Hr.transition=i,qt=r}return null}function HT(e,t,n,r){do Ul();while(Oa!==null);if(Ht&6)throw Error(Ne(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ne(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(bw(e,a),e===Hn&&(In=Hn=null,Qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bf||(Bf=!0,QE(gd,function(){return Ul(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Hr.transition,Hr.transition=null;var o=qt;qt=1;var l=Ht;Ht|=4,wv.current=null,BT(e,n),$E(n,e),fT(r0),xd=!!n0,r0=n0=null,e.current=n,$T(n),vw(),Ht=l,qt=o,Hr.transition=a}else e.current=n;if(Bf&&(Bf=!1,Oa=e,Dd=i),a=e.pendingLanes,a===0&&(Fa=null),xw(n.stateNode),_r(e,Pn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Id)throw Id=!1,e=w0,w0=null,e;return Dd&1&&e.tag!==0&&Ul(),a=e.pendingLanes,a&1?e===T0?bu++:(bu=0,T0=e):bu=0,Ha(),null}function Ul(){if(Oa!==null){var e=bx(Dd),t=Hr.transition,n=qt;try{if(Hr.transition=null,qt=16>e?16:e,Oa===null)var r=!1;else{if(e=Oa,Oa=null,Dd=0,Ht&6)throw Error(Ne(331));var i=Ht;for(Ht|=4,et=e.current;et!==null;){var a=et,o=a.child;if(et.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(et=f;et!==null;){var p=et;switch(p.tag){case 0:case 11:case 15:wu(8,p,a)}var h=p.child;if(h!==null)h.return=p,et=h;else for(;et!==null;){p=et;var d=p.sibling,w=p.return;if(FE(p),p===f){et=null;break}if(d!==null){d.return=w,et=d;break}et=w}}}var x=a.alternate;if(x!==null){var L=x.child;if(L!==null){x.child=null;do{var I=L.sibling;L.sibling=null,L=I}while(L!==null)}}et=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,et=o;else e:for(;et!==null;){if(a=et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wu(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,et=v;break e}et=a.return}}var b=e.current;for(et=b;et!==null;){o=et;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,et=C;else e:for(o=b;et!==null;){if(l=et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sm(9,l)}}catch(q){Tn(l,l.return,q)}if(l===o){et=null;break e}var H=l.sibling;if(H!==null){H.return=l.return,et=H;break e}et=l.return}}if(Ht=i,Ha(),Ci&&typeof Ci.onPostCommitFiberRoot=="function")try{Ci.onPostCommitFiberRoot(em,e)}catch{}r=!0}return r}finally{qt=n,Hr.transition=t}}return!1}function Uy(e,t,n){t=Kl(n,t),t=AE(e,t,1),e=Ma(e,t,1),t=or(),e!==null&&(qu(e,1,t),_r(e,t))}function Tn(e,t,n){if(e.tag===3)Uy(e,e,n);else for(;t!==null;){if(t.tag===3){Uy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fa===null||!Fa.has(r))){e=Kl(n,e),e=CE(t,e,1),t=Ma(t,e,1),e=or(),t!==null&&(qu(t,1,e),_r(t,e));break}}t=t.return}}function WT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=or(),e.pingedLanes|=e.suspendedLanes&n,Hn===e&&(Qn&n)===n&&(Bn===4||Bn===3&&(Qn&130023424)===Qn&&500>Pn()-bv?Lo(e,0):Tv|=n),_r(e,t)}function XE(e,t){t===0&&(e.mode&1?(t=Rf,Rf<<=1,!(Rf&130023424)&&(Rf=4194304)):t=1);var n=or();e=qi(e,t),e!==null&&(qu(e,t,n),_r(e,n))}function XT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XE(e,n)}function YT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(t),XE(e,n)}var YE;YE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xr.current)gr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gr=!1,DT(e,t,n);gr=!!(e.flags&131072)}else gr=!1,cn&&t.flags&1048576&&qx(t,Ad,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ld(e,t),e=t.pendingProps;var i=Wl(t,er.current);zl(t,n),i=yv(null,t,r,e,i,n);var a=xv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Er(r)?(a=!0,Td(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mv(t),i.updater=om,t.stateNode=i,i._reactInternals=t,d0(t,r,e,n),t=p0(null,t,r,!0,a,n)):(t.tag=0,cn&&a&&ov(t),ir(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ld(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=KT(r),e=ni(r,e),i){case 0:t=h0(null,t,r,e,n);break e;case 1:t=ky(null,t,r,e,n);break e;case 11:t=Py(null,t,r,e,n);break e;case 14:t=Ny(null,t,r,ni(r.type,e),n);break e}throw Error(Ne(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ni(r,i),h0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ni(r,i),ky(e,t,r,i,n);case 3:e:{if(PE(t),e===null)throw Error(Ne(387));r=t.pendingProps,a=t.memoizedState,i=a.element,tE(e,t),Rd(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Kl(Error(Ne(423)),t),t=Iy(e,t,r,n,i);break e}else if(r!==i){i=Kl(Error(Ne(424)),t),t=Iy(e,t,r,n,i);break e}else for(Pr=Da(t.stateNode.containerInfo.firstChild),Nr=t,cn=!0,ii=null,n=aE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xl(),r===i){t=Zi(e,t,n);break e}ir(e,t,r,n)}t=t.child}return t;case 5:return oE(t),e===null&&u0(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,i0(r,i)?o=null:a!==null&&i0(r,a)&&(t.flags|=32),OE(e,t),ir(e,t,o,n),t.child;case 6:return e===null&&u0(t),null;case 13:return NE(e,t,n);case 4:return hv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yl(t,null,r,n):ir(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ni(r,i),Py(e,t,r,i,n);case 7:return ir(e,t,t.pendingProps,n),t.child;case 8:return ir(e,t,t.pendingProps.children,n),t.child;case 12:return ir(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,an(Cd,r._currentValue),r._currentValue=o,a!==null)if(si(a.value,o)){if(a.children===i.children&&!xr.current){t=Zi(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Yi(-1,n&-n),u.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?u.next=u:(u.next=p.next,p.next=u),f.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),c0(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ne(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),c0(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ir(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,zl(t,n),i=Wr(i),r=r(i),t.flags|=1,ir(e,t,r,n),t.child;case 14:return r=t.type,i=ni(r,t.pendingProps),i=ni(r.type,i),Ny(e,t,r,i,n);case 15:return LE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ni(r,i),ld(e,t),t.tag=1,Er(r)?(e=!0,Td(t)):e=!1,zl(t,n),rE(t,r,i),d0(t,r,i,n),p0(null,t,r,!0,e,n);case 19:return kE(e,t,n);case 22:return RE(e,t,n)}throw Error(Ne(156,t.tag))};function QE(e,t){return _x(e,t)}function QT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,t,n,r){return new QT(e,t,n,r)}function Rv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KT(e){if(typeof e=="function")return Rv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Y0)return 11;if(e===Q0)return 14}return 2}function Ba(e,t){var n=e.alternate;return n===null?(n=Vr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cd(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")Rv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case bl:return Ro(n.children,i,a,t);case X0:o=8,i|=8;break;case Mp:return e=Vr(12,n,t,i|2),e.elementType=Mp,e.lanes=a,e;case Fp:return e=Vr(13,n,t,i),e.elementType=Fp,e.lanes=a,e;case jp:return e=Vr(19,n,t,i),e.elementType=jp,e.lanes=a,e;case ix:return cm(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nx:o=10;break e;case rx:o=9;break e;case Y0:o=11;break e;case Q0:o=14;break e;case ba:o=16,r=null;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=Vr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ro(e,t,n,r){return e=Vr(7,e,r,t),e.lanes=n,e}function cm(e,t,n,r){return e=Vr(22,e,r,t),e.elementType=ix,e.lanes=n,e.stateNode={isHidden:!1},e}function up(e,t,n){return e=Vr(6,e,null,t),e.lanes=n,e}function cp(e,t,n){return t=Vr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ov(e,t,n,r,i,a,o,l,u){return e=new qT(e,t,n,l,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Vr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(a),e}function ZT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function KE(e){if(!e)return za;e=e._reactInternals;e:{if(jo(e)!==e||e.tag!==1)throw Error(Ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ne(171))}if(e.tag===1){var n=e.type;if(Er(n))return Qx(e,n,t)}return t}function qE(e,t,n,r,i,a,o,l,u){return e=Ov(n,r,!0,e,i,a,o,l,u),e.context=KE(null),n=e.current,r=or(),i=ja(n),a=Yi(r,i),a.callback=t??null,Ma(n,a,i),e.current.lanes=i,qu(e,i,r),_r(e,r),e}function fm(e,t,n,r){var i=t.current,a=or(),o=ja(i);return n=KE(n),t.context===null?t.context=n:t.pendingContext=n,t=Yi(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ma(i,t,o),e!==null&&(li(e,i,o,a),id(e,i,o)),o}function Fd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pv(e,t){Vy(e,t),(e=e.alternate)&&Vy(e,t)}function JT(){return null}var ZE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nv(e){this._internalRoot=e}dm.prototype.render=Nv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ne(409));fm(e,t,null,null)};dm.prototype.unmount=Nv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Do(function(){fm(null,e,null,null)}),t[Ki]=null}};function dm(e){this._internalRoot=e}dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ca.length&&t!==0&&t<Ca[n].priority;n++);Ca.splice(n,0,e),n===0&&Ox(e)}};function kv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hy(){}function eb(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=Fd(o);a.call(f)}}var o=qE(t,r,e,0,null,!1,!1,"",Hy);return e._reactRootContainer=o,e[Ki]=o.current,Iu(e.nodeType===8?e.parentNode:e),Do(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Fd(u);l.call(f)}}var u=Ov(e,0,!1,null,null,!1,!1,"",Hy);return e._reactRootContainer=u,e[Ki]=u.current,Iu(e.nodeType===8?e.parentNode:e),Do(function(){fm(t,u,n,r)}),u}function hm(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Fd(o);l.call(u)}}fm(t,o,e,i)}else o=eb(n,t,e,i,r);return Fd(o)}Ax=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hu(t.pendingLanes);n!==0&&(Z0(t,n|1),_r(t,Pn()),!(Ht&6)&&(ql=Pn()+500,Ha()))}break;case 13:Do(function(){var r=qi(e,1);if(r!==null){var i=or();li(r,e,1,i)}}),Pv(e,1)}};J0=function(e){if(e.tag===13){var t=qi(e,134217728);if(t!==null){var n=or();li(t,e,134217728,n)}Pv(e,134217728)}};Cx=function(e){if(e.tag===13){var t=ja(e),n=qi(e,t);if(n!==null){var r=or();li(n,e,t,r)}Pv(e,t)}};Lx=function(){return qt};Rx=function(e,t){var n=qt;try{return qt=e,t()}finally{qt=n}};Yp=function(e,t,n){switch(t){case"input":if(Gp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=im(r);if(!i)throw Error(Ne(90));ox(r),Gp(r,i)}}}break;case"textarea":sx(e,n);break;case"select":t=n.value,t!=null&&jl(e,!!n.multiple,t,!1)}};px=Av;vx=Do;var tb={usingClientEntryPoint:!1,Events:[Ju,Rl,im,mx,hx,Av]},ou={findFiberByHostInstance:wo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nb={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xx(e),e===null?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{em=$f.inject(nb),Ci=$f}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tb;Ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(t))throw Error(Ne(200));return ZT(e,t,null,n)};Ir.createRoot=function(e,t){if(!kv(e))throw Error(Ne(299));var n=!1,r="",i=ZE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ov(e,1,!1,null,null,n,!1,r,i),e[Ki]=t.current,Iu(e.nodeType===8?e.parentNode:e),new Nv(t)};Ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):(e=Object.keys(e).join(","),Error(Ne(268,e)));return e=xx(t),e=e===null?null:e.stateNode,e};Ir.flushSync=function(e){return Do(e)};Ir.hydrate=function(e,t,n){if(!mm(t))throw Error(Ne(200));return hm(null,e,t,!0,n)};Ir.hydrateRoot=function(e,t,n){if(!kv(e))throw Error(Ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=qE(t,null,e,1,n??null,i,!1,a,o),e[Ki]=t.current,Iu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new dm(t)};Ir.render=function(e,t,n){if(!mm(t))throw Error(Ne(200));return hm(null,e,t,!1,n)};Ir.unmountComponentAtNode=function(e){if(!mm(e))throw Error(Ne(40));return e._reactRootContainer?(Do(function(){hm(null,null,e,!1,function(){e._reactRootContainer=null,e[Ki]=null})}),!0):!1};Ir.unstable_batchedUpdates=Av;Ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!mm(n))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return hm(e,t,n,!1,r)};Ir.version="18.2.0-next-9e3b772b8-20220608";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(e){console.error(e)}}JE(),q1.exports=Ir;var rb=q1.exports,Wy=rb;Ip.createRoot=Wy.createRoot,Ip.hydrateRoot=Wy.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}var Pa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pa||(Pa={}));const Xy="popstate";function ib(e){e===void 0&&(e={});function t(i,a){let{pathname:o="/",search:l="",hash:u=""}=Bo(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),C0("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,f=u.indexOf("#");l=f===-1?u:u.slice(0,f)}return l+"#"+(typeof a=="string"?a:jd(a))}function r(i,a){pm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return ob(t,n,r,e)}function Dn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ab(){return Math.random().toString(36).substr(2,8)}function Yy(e,t){return{usr:e.state,key:e.key,idx:t}}function C0(e,t,n,r){return n===void 0&&(n=null),Uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bo(t):t,{state:n,key:t&&t.key||r||ab()})}function jd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Bo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ob(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Pa.Pop,u=null,f=p();f==null&&(f=0,o.replaceState(Uu({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function h(){l=Pa.Pop;let I=p(),v=I==null?null:I-f;f=I,u&&u({action:l,location:L.location,delta:v})}function d(I,v){l=Pa.Push;let b=C0(L.location,I,v);n&&n(b,I),f=p()+1;let C=Yy(b,f),H=L.createHref(b);try{o.pushState(C,"",H)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(H)}a&&u&&u({action:l,location:L.location,delta:1})}function w(I,v){l=Pa.Replace;let b=C0(L.location,I,v);n&&n(b,I),f=p();let C=Yy(b,f),H=L.createHref(b);o.replaceState(C,"",H),a&&u&&u({action:l,location:L.location,delta:0})}function x(I){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof I=="string"?I:jd(I);return Dn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let L={get action(){return l},get location(){return e(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Xy,h),u=I,()=>{i.removeEventListener(Xy,h),u=null}},createHref(I){return t(i,I)},createURL:x,encodeLocation(I){let v=x(I);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:w,go(I){return o.go(I)}};return L}var Qy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qy||(Qy={}));function lb(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Bo(t):t,i=Iv(r.pathname||"/",n);if(i==null)return null;let a=e_(e);sb(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=gb(a[l],Eb(i));return o}function e_(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Dn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=$a([r,u.relativePath]),p=n.concat(u);a.children&&a.children.length>0&&(Dn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),e_(a.children,t,p,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:pb(f,a.index),routesMeta:p})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of t_(a.path))i(a,o,u)}),t}function t_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=t_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function sb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vb(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ub=/^:\w+$/,cb=3,fb=2,db=1,mb=10,hb=-2,Ky=e=>e==="*";function pb(e,t){let n=e.split("/"),r=n.length;return n.some(Ky)&&(r+=hb),t&&(r+=fb),n.filter(i=>!Ky(i)).reduce((i,a)=>i+(ub.test(a)?cb:a===""?db:mb),r)}function vb(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function gb(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=yb({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f);if(!p)return null;Object.assign(r,p.params);let h=l.route;a.push({params:r,pathname:$a([i,p.pathname]),pathnameBase:Tb($a([i,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(i=$a([i,p.pathnameBase]))}return a}function yb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xb(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,h)=>{let{paramName:d,isOptional:w}=p;if(d==="*"){let L=l[h]||"";o=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const x=l[h];return w&&!x?f[d]=void 0:f[d]=_b(x||"",d),f},{}),pathname:a,pathnameBase:o,pattern:e}}function xb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),pm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Eb(e){try{return decodeURI(e)}catch(t){return pm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _b(e,t){try{return decodeURIComponent(e)}catch(n){return pm(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Iv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Sb(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Bo(e):e;return{pathname:n?n.startsWith("/")?n:wb(n,t):t,search:bb(r),hash:Ab(i)}}function wb(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function n_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function r_(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Bo(e):(i=Uu({},e),Dn(!i.pathname||!i.pathname.includes("?"),fp("?","pathname","search",i)),Dn(!i.pathname||!i.pathname.includes("#"),fp("#","pathname","hash",i)),Dn(!i.search||!i.search.includes("#"),fp("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else if(r){let h=t[t.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h.pop();i.pathname=d.join("/")}l="/"+h.join("/")}else{let h=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}l=h>=0?t[h]:"/"}let u=Sb(i,l),f=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||p)&&(u.pathname+="/"),u}const $a=e=>e.join("/").replace(/\/\/+/g,"/"),Tb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ab=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Cb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const i_=["post","put","patch","delete"];new Set(i_);const Lb=["get",...i_];new Set(Lb);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(this,arguments)}const Dv=j.createContext(null),Rb=j.createContext(null),rs=j.createContext(null),vm=j.createContext(null),Wa=j.createContext({outlet:null,matches:[],isDataRoute:!1}),a_=j.createContext(null);function Ob(e,t){let{relative:n}=t===void 0?{}:t;tc()||Dn(!1);let{basename:r,navigator:i}=j.useContext(rs),{hash:a,pathname:o,search:l}=s_(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:$a([r,o])),i.createHref({pathname:u,search:l,hash:a})}function tc(){return j.useContext(vm)!=null}function gm(){return tc()||Dn(!1),j.useContext(vm).location}function o_(e){j.useContext(rs).static||j.useLayoutEffect(e)}function ym(){let{isDataRoute:e}=j.useContext(Wa);return e?Ub():Pb()}function Pb(){tc()||Dn(!1);let e=j.useContext(Dv),{basename:t,navigator:n}=j.useContext(rs),{matches:r}=j.useContext(Wa),{pathname:i}=gm(),a=JSON.stringify(n_(r).map(u=>u.pathnameBase)),o=j.useRef(!1);return o_(()=>{o.current=!0}),j.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=r_(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:$a([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,a,i,e])}function l_(){let{matches:e}=j.useContext(Wa),t=e[e.length-1];return t?t.params:{}}function s_(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=j.useContext(Wa),{pathname:i}=gm(),a=JSON.stringify(n_(r).map(o=>o.pathnameBase));return j.useMemo(()=>r_(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function Nb(e,t){return kb(e,t)}function kb(e,t,n){tc()||Dn(!1);let{navigator:r}=j.useContext(rs),{matches:i}=j.useContext(Wa),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=gm(),f;if(t){var p;let L=typeof t=="string"?Bo(t):t;l==="/"||(p=L.pathname)!=null&&p.startsWith(l)||Dn(!1),f=L}else f=u;let h=f.pathname||"/",d=l==="/"?h:h.slice(l.length)||"/",w=lb(e,{pathname:d}),x=jb(w&&w.map(L=>Object.assign({},L,{params:Object.assign({},o,L.params),pathname:$a([l,r.encodeLocation?r.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?l:$a([l,r.encodeLocation?r.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),i,n);return t&&x?j.createElement(vm.Provider,{value:{location:Bd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Pa.Pop}},x):x}function Ib(){let e=zb(),t=Cb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,a)}const Db=j.createElement(Ib,null);class Mb extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?j.createElement(Wa.Provider,{value:this.props.routeContext},j.createElement(a_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fb(e){let{routeContext:t,match:n,children:r}=e,i=j.useContext(Dv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Wa.Provider,{value:t},r)}function jb(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id]));l>=0||Dn(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,u,f)=>{let p=u.route.id?o==null?void 0:o[u.route.id]:null,h=null;n&&(h=u.route.errorElement||Db);let d=t.concat(a.slice(0,f+1)),w=()=>{let x;return p?x=h:u.route.Component?x=j.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,j.createElement(Fb,{match:u,routeContext:{outlet:l,matches:d,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?j.createElement(Mb,{location:n.location,revalidation:n.revalidation,component:h,error:p,children:w(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):w()},null)}var u_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(u_||{}),$d=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($d||{});function Bb(e){let t=j.useContext(Dv);return t||Dn(!1),t}function $b(e){let t=j.useContext(Rb);return t||Dn(!1),t}function Gb(e){let t=j.useContext(Wa);return t||Dn(!1),t}function c_(e){let t=Gb(),n=t.matches[t.matches.length-1];return n.route.id||Dn(!1),n.route.id}function zb(){var e;let t=j.useContext(a_),n=$b($d.UseRouteError),r=c_($d.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function Ub(){let{router:e}=Bb(u_.UseNavigateStable),t=c_($d.UseNavigateStable),n=j.useRef(!1);return o_(()=>{n.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Bd({fromRouteId:t},a)))},[e,t])}function vu(e){Dn(!1)}function Vb(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Pa.Pop,navigator:a,static:o=!1}=e;tc()&&Dn(!1);let l=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof r=="string"&&(r=Bo(r));let{pathname:f="/",search:p="",hash:h="",state:d=null,key:w="default"}=r,x=j.useMemo(()=>{let L=Iv(f,l);return L==null?null:{location:{pathname:L,search:p,hash:h,state:d,key:w},navigationType:i}},[l,f,p,h,d,w,i]);return x==null?null:j.createElement(rs.Provider,{value:u},j.createElement(vm.Provider,{children:n,value:x}))}function Hb(e){let{children:t,location:n}=e;return Nb(L0(t),n)}new Promise(()=>{});function L0(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let a=[...t,i];if(r.type===j.Fragment){n.push.apply(n,L0(r.props.children,a));return}r.type!==vu&&Dn(!1),!r.props.index||!r.props.children||Dn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=L0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R0.apply(this,arguments)}function Wb(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Xb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yb(e,t){return e.button===0&&(!t||t==="_self")&&!Xb(e)}const Qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Kb="startTransition",qy=XS[Kb];function qb(e){let{basename:t,children:n,future:r,window:i}=e,a=j.useRef();a.current==null&&(a.current=ib({window:i,v5Compat:!0}));let o=a.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},p=j.useCallback(h=>{f&&qy?qy(()=>u(h)):u(h)},[u,f]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.createElement(Vb,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o})}const Zb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vu=j.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:f,preventScrollReset:p,unstable_viewTransition:h}=t,d=Wb(t,Qb),{basename:w}=j.useContext(rs),x,L=!1;if(typeof f=="string"&&Jb.test(f)&&(x=f,Zb))try{let C=new URL(window.location.href),H=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Iv(H.pathname,w);H.origin===C.origin&&q!=null?f=q+H.search+H.hash:L=!0}catch{}let I=Ob(f,{relative:i}),v=eA(f,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,unstable_viewTransition:h});function b(C){r&&r(C),C.defaultPrevented||v(C)}return j.createElement("a",R0({},d,{href:x||I,onClick:L||a?r:b,ref:n,target:u}))});var Zy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var Jy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Jy||(Jy={}));function eA(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,u=ym(),f=gm(),p=s_(e,{relative:o});return j.useCallback(h=>{if(Yb(h,n)){h.preventDefault();let d=r!==void 0?r:jd(f)===jd(p);u(e,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[f,u,p,r,i,n,e,a,o,l])}const tA="https://api.latentscope.com/api";function f_(e,t,n){let r=null;return console.log("start polling",n),r=setInterval(()=>{fetch(`${tA}/jobs/job?dataset=${e.id}&job_id=${n}`).then(i=>{if(!i.ok)throw clearInterval(r),t(null),new Error(`HTTP error! status: ${i.status}`);return i.json()}).then(i=>{console.log("polling job status",i),t(i),(i.status==="completed"||i.status==="error")&&(clearInterval(r),setTimeout(()=>{t(null),t(i)},200))}).catch(i=>{console.error("Error polling job status",i),clearInterval(r),t(null)})},200),console.log("returning jobPolling cleanup"),()=>{console.log("inside cleanup",r),r&&clearInterval(r)}}function Zl(e,t,n){return{startJob:j.useCallback(i=>{fetch(`${n}?dataset=${e.id}&${new URLSearchParams(i)}`).then(a=>a.json()).then(a=>{const o=a.job_id;f_(e,t,o)})},[e,t,n])}}var d_={exports:{}},nA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rA=nA,iA=rA;function m_(){}function h_(){}h_.resetWarningCache=m_;var aA=function(){function e(r,i,a,o,l,u){if(u!==iA){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:h_,resetWarningCache:m_};return n.PropTypes=n,n};d_.exports=aA();var oA=d_.exports;const qe=B0(oA);is.propTypes={job:qe.object,onlyLast:qe.bool,clearJob:qe.func.isRequired};function is({job:e,onlyLast:t,clearJob:n}){const r=j.useRef(null);return j.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),O.jsx(O.Fragment,{children:e?O.jsxs("div",{className:"job-progress",children:["Running ",O.jsx("b",{children:e.job_name}),O.jsx("br",{}),O.jsx("code",{children:e.command}),O.jsx("pre",{ref:r,children:t?e.progress[e.progress.length-1]:e.progress.join(`
`)}),e.status=="completed"?O.jsx("button",{onClick:n,children:"👍"}):null,e.status=="error"?O.jsx("button",{onClick:n,children:"🤬"}):null]}):O.jsx(O.Fragment,{})})}const Gf="https://api.latentscope.com/api";function lA(){const[e,t]=j.useState([]);j.useEffect(()=>{fetch(`${Gf}/datasets`).then(d=>d.json()).then(d=>t(d))},[]);const[n,r]=j.useState({});j.useEffect(()=>{e.forEach(d=>{fetch(`${Gf}/datasets/${d.id}/scopes`).then(w=>w.json()).then(w=>r(x=>{const L={...x};return L[d.id]=w,L}))})},[e]),j.useEffect(()=>{console.log("scopes",n)},[n]);const[i,a]=j.useState(null),o=d=>{d.preventDefault();const w=d.target[1].value,L=d.target[0].files[0],I=new FormData;I.append("dataset",w),I.append("file",L),fetch(`${Gf}/jobs/ingest`,{method:"POST",body:I}).then(v=>v.json()).then(v=>{console.log("Job ID:",v.job_id),f_({id:w},a,v.job_id)}).catch(v=>{console.error("Error:",v)})},l=d=>{d.preventDefault()};function u(d){let w=d.substring(0,d.lastIndexOf("."));return w=w.replace(/\s/g,"-"),w}const f=d=>{d.preventDefault(),document.getElementById("upload-button").files=d.dataTransfer.files;const w=d.dataTransfer.files[0].name,x=u(w);document.getElementById("dataset-name").value=x},p=d=>{const w=d.target.files[0].name,x=u(w);document.getElementById("dataset-name").value=x},h=ym();return j.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){h(`/datasets/${i.dataset}/setup`)},1e3)},[i,h]),O.jsxs("div",{className:"home",children:[O.jsxs("div",{className:"new-dataset",children:[O.jsx("h3",{children:"Create new dataset"}),O.jsxs("form",{onSubmit:o,onDragOver:l,onDrop:f,children:[O.jsx("label",{htmlFor:"upload-button",children:O.jsx("span",{children:"Import a CSV to create a new dataset"})}),O.jsx("input",{hidden:!0,id:"upload-button",type:"file",onChange:p}),O.jsx("input",{id:"dataset-name",type:"text",placeholder:"Dataset name"}),O.jsx("button",{type:"submit",children:"Submit"})]}),O.jsx(is,{job:i,clearJob:()=>a(null)})]}),O.jsx("h3",{children:"Datasets"}),O.jsx("ul",{children:e.map(d=>{var w;return O.jsxs("li",{children:[O.jsxs(Vu,{to:`/datasets/${d.name}/setup`,children:["Setup ",d.name]}),O.jsx("div",{className:"scope-links",children:n[d.id]&&n[d.id].map&&((w=n[d.id])==null?void 0:w.map((x,L)=>O.jsxs("div",{className:"scope-link",children:[O.jsxs(Vu,{to:`/datasets/${d.name}/explore/${x.name}`,children:["Explore ",x.name," - ",x.label,O.jsx("br",{}),O.jsx("img",{width:"120px",src:`${Gf}/files/${d.id}/clusters/${x.cluster}.png`})]}),O.jsx("br",{})]},L)))})]},d.id)})})]})}const e1="https://api.latentscope.com/api";Ao.propTypes={data:qe.array.isRequired,tagset:qe.object,datasetId:qe.string,maxRows:qe.number,onTagset:qe.func,onHover:qe.func,onClick:qe.func};function Ao({data:e,tagset:t,datasetId:n,maxRows:r,onTagset:i,onHover:a,onClick:o}){if(!e.length)return O.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let u;function f(h,d){console.log("tag",h),console.log("index",d),console.log("tagset",t),console.log("tagset[tag]",t[h]),t[h].includes(d)?(console.log("removing"),fetch(`${e1}/tags/remove?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("removed",w),i(w)})):(console.log("adding"),fetch(`${e1}/tags/add?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("added",w),i(w)}))}t&&(u=Object.keys(t));const p=r?e.slice(0,r):e;return O.jsxs(O.Fragment,{children:[O.jsxs("table",{className:"datatable",children:[O.jsx("thead",{children:O.jsxs("tr",{children:[l.map((h,d)=>O.jsx("th",{children:h},d)),u?O.jsx("th",{children:"tags"}):null]})}),O.jsx("tbody",{children:p.map((h,d)=>O.jsxs("tr",{onMouseEnter:()=>a&&a(h.index),onMouseLeave:()=>a&&a(),onClick:()=>o&&o(h.index),children:[l.map((w,x)=>O.jsx("td",{children:h[w]},x)),u?O.jsx("td",{children:u.map((w,x)=>O.jsx("button",{onClick:L=>{f(w,h.index),L.preventDefault(),L.stopPropagation()},className:t[w].includes(h.index)?"tag-active":"tag-inactive",children:w},x))}):null]},d))})]}),r&&e.length>r?O.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const p_=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),Mv=(e,t)=>t?e.toLowerCase():e,v_=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const a=Mv(n,t);return e[a]||(e[a]=[],e.__times__[a]=[]),e[a].push(r),e.__times__[a].push(+i||1/0),{event:a,handler:r}},Fv=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=Mv(n,t);if(!e[i])return;const a=e[i].indexOf(r);a===-1||a>=e[i].length||(e[i].splice(a,1),e.__times__[i].splice(a,1))},t1=(e,t)=>()=>{e.forEach(n=>n(t))},g_=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=Fv(e);return(a,o,l={})=>{const u=Mv(a,n);if(!e[u])return;const f=[...e[u]];if(f.forEach((p,h)=>{--e.__times__[u][h]<1&&i(u,p)}),r||l.async?setTimeout(t1(f,o),0):t1(f,o)(),t&&!l.isNoGlobalBroadcast)try{p_.postMessage({event:u,news:o})}catch(p){if(p instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw p}}},sA=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},y_=()=>({__times__:{}}),uA=({async:e=!1,caseInsensitive:t=!1,stack:n=y_()}={})=>(n.__times__||(n.__times__={}),{publish:g_(n,{async:e,caseInsensitive:t}),subscribe:v_(n,{caseInsensitive:t}),unsubscribe:Fv(n,{caseInsensitive:t}),clear:sA(n),stack:n}),zf=y_(),cA={publish:g_(zf,{isGlobal:!0}),subscribe:v_(zf),unsubscribe:Fv(zf),stack:zf};p_.onmessage=({data:{event:e,news:t}})=>cA.publish(e,t,{isNoGlobalBroadcast:!0});var x_={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(PS,function(){var n=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray},r=function(c,g){for(var R=Object.keys(g),X=0;X<R.length;++X)c[R[X]]=g[R[X]];return c},i=`
`;function a(c){return typeof atob<"u"?atob(c):"base64:"+c}function o(c){var g=new Error("(regl) "+c);throw console.error(g),g}function l(c,g){c||o(g)}function u(c){return c?": "+c:""}function f(c,g,R){c in g||o("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(g).join())}function p(c,g){n(c)||o("invalid parameter type"+u(g)+". must be a typed array")}function h(c,g){switch(g){case"number":return typeof c=="number";case"object":return typeof c=="object";case"string":return typeof c=="string";case"boolean":return typeof c=="boolean";case"function":return typeof c=="function";case"undefined":return typeof c>"u";case"symbol":return typeof c=="symbol"}}function d(c,g,R){h(c,g)||o("invalid parameter type"+u(R)+". expected "+g+", got "+typeof c)}function w(c,g){c>=0&&(c|0)===c||o("invalid parameter type, ("+c+")"+u(g)+". must be a nonnegative integer")}function x(c,g,R){g.indexOf(c)<0&&o("invalid value"+u(R)+". must be one of: "+g)}var L=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function I(c){Object.keys(c).forEach(function(g){L.indexOf(g)<0&&o('invalid regl constructor argument "'+g+'". must be one of '+L)})}function v(c,g){for(c=c+"";c.length<g;)c=" "+c;return c}function b(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(c,g){this.number=c,this.line=g,this.errors=[]}function H(c,g,R){this.file=c,this.line=g,this.message=R}function q(){var c=new Error,g=(c.stack||c).toString(),R=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(g);if(R)return R[1];var X=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(g);return X?X[1]:"unknown"}function ae(){var c=new Error,g=(c.stack||c).toString(),R=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(g);if(R)return R[1];var X=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(g);return X?X[1]:"unknown"}function we(c,g){var R=c.split(`
`),X=1,te=0,W={unknown:new b,0:new b};W.unknown.name=W[0].name=g||q(),W.unknown.lines.push(new C(0,""));for(var K=0;K<R.length;++K){var fe=R[K],ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fe);if(ce)switch(ce[1]){case"line":var ge=/(\d+)(\s+\d+)?/.exec(ce[2]);ge&&(X=ge[1]|0,ge[2]&&(te=ge[2]|0,te in W||(W[te]=new b)));break;case"define":var xe=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ce[2]);xe&&(W[te].name=xe[1]?a(xe[2]):xe[2]);break}W[te].lines.push(new C(X++,fe))}return Object.keys(W).forEach(function(ye){var Te=W[ye];Te.lines.forEach(function(de){Te.index[de.number]=de})}),W}function ue(c){var g=[];return c.split(`
`).forEach(function(R){if(!(R.length<5)){var X=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(R);X?g.push(new H(X[1]|0,X[2]|0,X[3].trim())):R.length>0&&g.push(new H("unknown",0,R))}}),g}function at(c,g){g.forEach(function(R){var X=c[R.file];if(X){var te=X.index[R.line];if(te){te.errors.push(R),X.hasErrors=!0;return}}c.unknown.hasErrors=!0,c.unknown.lines[0].errors.push(R)})}function Ve(c,g,R,X,te){if(!c.getShaderParameter(g,c.COMPILE_STATUS)){var W=c.getShaderInfoLog(g),K=X===c.FRAGMENT_SHADER?"fragment":"vertex";ht(R,"string",K+" shader source must be a string",te);var fe=we(R,te),ce=ue(W);at(fe,ce),Object.keys(fe).forEach(function(ge){var xe=fe[ge];if(!xe.hasErrors)return;var ye=[""],Te=[""];function de(ve,B){ye.push(ve),Te.push(B||"")}de("file number "+ge+": "+xe.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),xe.lines.forEach(function(ve){if(ve.errors.length>0){de(v(ve.number,4)+"|  ","background-color:yellow; font-weight:bold"),de(ve.line+i,"color:red; background-color:yellow; font-weight:bold");var B=0;ve.errors.forEach(function(Q){var he=Q.message,Fe=/^\s*'(.*)'\s*:\s*(.*)$/.exec(he);if(Fe){var se=Fe[1];switch(he=Fe[2],se){case"assign":se="=";break}B=Math.max(ve.line.indexOf(se,B),0)}else B=0;de(v("| ",6)),de(v("^^^",B+3)+i,"font-weight:bold"),de(v("| ",6)),de(he+i,"font-weight:bold")}),de(v("| ",6)+i)}else de(v(ve.number,4)+"|  "),de(ve.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Te[0]=ye.join("%c"),console.log.apply(console,Te)):console.log(ye.join(""))}),l.raise("Error compiling "+K+" shader, "+fe[0].name)}}function Se(c,g,R,X,te){if(!c.getProgramParameter(g,c.LINK_STATUS)){var W=c.getProgramInfoLog(g),K=we(R,te),fe=we(X,te),ce='Error linking program with vertex shader, "'+fe[0].name+'", and fragment shader "'+K[0].name+'"';typeof document<"u"?console.log("%c"+ce+i+"%c"+W,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ce+i+W),l.raise(ce)}}function Ke(c){c._commandRef=q()}function Ye(c,g,R,X){Ke(c);function te(ce){return ce?X.id(ce):0}c._fragId=te(c.static.frag),c._vertId=te(c.static.vert);function W(ce,ge){Object.keys(ge).forEach(function(xe){ce[X.id(xe)]=!0})}var K=c._uniformSet={};W(K,g.static),W(K,g.dynamic);var fe=c._attributeSet={};W(fe,R.static),W(fe,R.dynamic),c._hasCount="count"in c.static||"count"in c.dynamic||"elements"in c.static||"elements"in c.dynamic}function ze(c,g){var R=ae();o(c+" in command "+(g||q())+(R==="unknown"?"":" called from "+R))}function Pt(c,g,R){c||ze(g,R||q())}function mt(c,g,R,X){c in g||ze("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(g).join(),X||q())}function ht(c,g,R,X){h(c,g)||ze("invalid parameter type"+u(R)+". expected "+g+", got "+typeof c,X||q())}function pe(c){c()}function We(c,g,R){c.texture?x(c.texture._texture.internalformat,g,"unsupported texture format for attachment"):x(c.renderbuffer._renderbuffer.format,R,"unsupported renderbuffer format for attachment")}var Le=33071,Ee=9728,$e=9984,lt=9985,Et=9986,Wt=9987,Yt=5120,Qt=5121,It=5122,pt=5123,Wn=5124,fn=5125,Xt=5126,en=32819,_t=32820,wt=33635,Nt=34042,Ct=36193,Lt={};Lt[Yt]=Lt[Qt]=1,Lt[It]=Lt[pt]=Lt[Ct]=Lt[wt]=Lt[en]=Lt[_t]=2,Lt[Wn]=Lt[fn]=Lt[Xt]=Lt[Nt]=4;function Ut(c,g){return c===_t||c===en||c===wt?2:c===Nt?4:Lt[c]*g}function dn(c){return!(c&c-1)&&!!c}function on(c,g,R){var X,te=g.width,W=g.height,K=g.channels;l(te>0&&te<=R.maxTextureSize&&W>0&&W<=R.maxTextureSize,"invalid texture shape"),(c.wrapS!==Le||c.wrapT!==Le)&&l(dn(te)&&dn(W),"incompatible wrap mode for texture, both width and height must be power of 2"),g.mipmask===1?te!==1&&W!==1&&l(c.minFilter!==$e&&c.minFilter!==Et&&c.minFilter!==lt&&c.minFilter!==Wt,"min filter requires mipmap"):(l(dn(te)&&dn(W),"texture must be a square power of 2 to support mipmapping"),l(g.mipmask===(te<<1)-1,"missing or incomplete mipmap data")),g.type===Xt&&(R.extensions.indexOf("oes_texture_float_linear")<0&&l(c.minFilter===Ee&&c.magFilter===Ee,"filter not supported, must enable oes_texture_float_linear"),l(!c.genMipmaps,"mipmap generation not supported with float textures"));var fe=g.images;for(X=0;X<16;++X)if(fe[X]){var ce=te>>X,ge=W>>X;l(g.mipmask&1<<X,"missing mipmap data");var xe=fe[X];if(l(xe.width===ce&&xe.height===ge,"invalid shape for mip images"),l(xe.format===g.format&&xe.internalformat===g.internalformat&&xe.type===g.type,"incompatible type for mip image"),!xe.compressed)if(xe.data){var ye=Math.ceil(Ut(xe.type,K)*ce/xe.unpackAlignment)*xe.unpackAlignment;l(xe.data.byteLength===ye*ge,"invalid data for image, buffer size is inconsistent with image format")}else xe.element||xe.copy}else c.genMipmaps||l((g.mipmask&1<<X)===0,"extra mipmap data");g.compressed&&l(!c.genMipmaps,"mipmap generation for compressed images not supported")}function Yr(c,g,R,X){var te=c.width,W=c.height,K=c.channels;l(te>0&&te<=X.maxTextureSize&&W>0&&W<=X.maxTextureSize,"invalid texture shape"),l(te===W,"cube map must be square"),l(g.wrapS===Le&&g.wrapT===Le,"wrap mode not supported by cube map");for(var fe=0;fe<R.length;++fe){var ce=R[fe];l(ce.width===te&&ce.height===W,"inconsistent cube map face shape"),g.genMipmaps&&(l(!ce.compressed,"can not generate mipmap for compressed textures"),l(ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ge=ce.images,xe=0;xe<16;++xe){var ye=ge[xe];if(ye){var Te=te>>xe,de=W>>xe;l(ce.mipmask&1<<xe,"missing mipmap data"),l(ye.width===Te&&ye.height===de,"invalid shape for mip images"),l(ye.format===c.format&&ye.internalformat===c.internalformat&&ye.type===c.type,"incompatible type for mip image"),ye.compressed||(ye.data?l(ye.data.byteLength===Te*de*Math.max(Ut(ye.type,K),ye.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ye.element||ye.copy)}}}}var y=r(l,{optional:pe,raise:o,commandRaise:ze,command:Pt,parameter:f,commandParameter:mt,constructor:I,type:d,commandType:ht,isTypedArray:p,nni:w,oneOf:x,shaderError:Ve,linkError:Se,callSite:ae,saveCommandRef:Ke,saveDrawInfo:Ye,framebufferFormat:We,guessCommand:q,texture2D:on,textureCube:Yr}),Tt=0,Ft=0,Ie=5,Kt=6;function gt(c,g){this.id=Tt++,this.type=c,this.data=g}function De(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(c){if(c.length===0)return[];var g=c.charAt(0),R=c.charAt(c.length-1);if(c.length>1&&g===R&&(g==='"'||g==="'"))return['"'+De(c.substr(1,c.length-2))+'"'];var X=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c);if(X)return ut(c.substr(0,X.index)).concat(ut(X[1])).concat(ut(c.substr(X.index+X[0].length)));var te=c.split(".");if(te.length===1)return['"'+De(c)+'"'];for(var W=[],K=0;K<te.length;++K)W=W.concat(ut(te[K]));return W}function jt(c){return"["+ut(c).join("][")+"]"}function st(c,g){return new gt(c,jt(g+""))}function tn(c){return typeof c=="function"&&!c._reglType||c instanceof gt}function nn(c,g){if(typeof c=="function")return new gt(Ft,c);if(typeof c=="number"||typeof c=="boolean")return new gt(Ie,c);if(Array.isArray(c))return new gt(Kt,c.map(function(R,X){return nn(R,g+"["+X+"]")}));if(c instanceof gt)return c;y(!1,"invalid option type in uniform "+g)}var Ot={DynamicVariable:gt,define:st,isDynamic:tn,unbox:nn,accessor:jt},xn={next:typeof requestAnimationFrame=="function"?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:typeof cancelAnimationFrame=="function"?function(c){return cancelAnimationFrame(c)}:clearTimeout},mn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Sr(){var c={"":0},g=[""];return{id:function(R){var X=c[R];return X||(X=c[R]=g.length,g.push(R),X)},str:function(R){return g[R]}}}function tr(c,g,R){var X=document.createElement("canvas");r(X.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),c.appendChild(X),c===document.body&&(X.style.position="absolute",r(c.style,{margin:0,padding:0}));function te(){var fe=window.innerWidth,ce=window.innerHeight;if(c!==document.body){var ge=X.getBoundingClientRect();fe=ge.right-ge.left,ce=ge.bottom-ge.top}X.width=R*fe,X.height=R*ce}var W;c!==document.body&&typeof ResizeObserver=="function"?(W=new ResizeObserver(function(){setTimeout(te)}),W.observe(c)):window.addEventListener("resize",te,!1);function K(){W?W.disconnect():window.removeEventListener("resize",te),c.removeChild(X)}return te(),{canvas:X,onDestroy:K}}function Qr(c,g){function R(X){try{return c.getContext(X,g)}catch{return null}}return R("webgl")||R("experimental-webgl")||R("webgl-experimental")}function bn(c){return typeof c.nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"}function ui(c){return typeof c.drawArrays=="function"||typeof c.drawElements=="function"}function ea(c){return typeof c=="string"?c.split():(y(Array.isArray(c),"invalid extension array"),c)}function Kr(c){return typeof c=="string"?(y(typeof document<"u","not supported outside of DOM"),document.querySelector(c)):c}function ur(c){var g=c||{},R,X,te,W,K={},fe=[],ce=[],ge=typeof window>"u"?1:window.devicePixelRatio,xe=!1,ye=function(ve){ve&&y.raise(ve)},Te=function(){};if(typeof g=="string"?(y(typeof document<"u","selector queries only supported in DOM enviroments"),R=document.querySelector(g),y(R,"invalid query string for element")):typeof g=="object"?bn(g)?R=g:ui(g)?(W=g,te=W.canvas):(y.constructor(g),"gl"in g?W=g.gl:"canvas"in g?te=Kr(g.canvas):"container"in g&&(X=Kr(g.container)),"attributes"in g&&(K=g.attributes,y.type(K,"object","invalid context attributes")),"extensions"in g&&(fe=ea(g.extensions)),"optionalExtensions"in g&&(ce=ea(g.optionalExtensions)),"onDone"in g&&(y.type(g.onDone,"function","invalid or missing onDone callback"),ye=g.onDone),"profile"in g&&(xe=!!g.profile),"pixelRatio"in g&&(ge=+g.pixelRatio,y(ge>0,"invalid pixel ratio"))):y.raise("invalid arguments to regl"),R&&(R.nodeName.toLowerCase()==="canvas"?te=R:X=R),!W){if(!te){y(typeof document<"u","must manually specify webgl context outside of DOM environments");var de=tr(X||document.body,ye,ge);if(!de)return null;te=de.canvas,Te=de.onDestroy}K.premultipliedAlpha===void 0&&(K.premultipliedAlpha=!0),W=Qr(te,K)}return W?{gl:W,canvas:te,container:X,extensions:fe,optionalExtensions:ce,pixelRatio:ge,profile:xe,onDone:ye,onDestroy:Te}:(Te(),ye("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function qr(c,g){var R={};function X(K){y.type(K,"string","extension name must be string");var fe=K.toLowerCase(),ce;try{ce=R[fe]=c.getExtension(fe)}catch{}return!!ce}for(var te=0;te<g.extensions.length;++te){var W=g.extensions[te];if(!X(W))return g.onDestroy(),g.onDone('"'+W+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return g.optionalExtensions.forEach(X),{extensions:R,restore:function(){Object.keys(R).forEach(function(K){if(R[K]&&!X(K))throw new Error("(regl): error restoring extension "+K)})}}}function ne(c,g){for(var R=Array(c),X=0;X<c;++X)R[X]=g(X);return R}var yt=5120,$n=5121,Xn=5122,cr=5123,Oi=5124,ci=5125,ta=5126;function Xa(c){for(var g=16;g<=1<<28;g*=16)if(c<=g)return g;return 0}function na(c){var g,R;return g=(c>65535)<<4,c>>>=g,R=(c>255)<<3,c>>>=R,g|=R,R=(c>15)<<2,c>>>=R,g|=R,R=(c>3)<<1,c>>>=R,g|=R,g|c>>1}function $o(){var c=ne(8,function(){return[]});function g(W){var K=Xa(W),fe=c[na(K)>>2];return fe.length>0?fe.pop():new ArrayBuffer(K)}function R(W){c[na(W.byteLength)>>2].push(W)}function X(W,K){var fe=null;switch(W){case yt:fe=new Int8Array(g(K),0,K);break;case $n:fe=new Uint8Array(g(K),0,K);break;case Xn:fe=new Int16Array(g(2*K),0,K);break;case cr:fe=new Uint16Array(g(2*K),0,K);break;case Oi:fe=new Int32Array(g(4*K),0,K);break;case ci:fe=new Uint32Array(g(4*K),0,K);break;case ta:fe=new Float32Array(g(4*K),0,K);break;default:return null}return fe.length!==K?fe.subarray(0,K):fe}function te(W){R(W.buffer)}return{alloc:g,free:R,allocType:X,freeType:te}}var xt=$o();xt.zero=$o();var Pi=3408,Go=3410,rc=3411,fi=3412,di=3413,mi=3414,ic=3415,wr=33901,as=33902,Ya=3379,os=3386,Qa=34921,zo=36347,Uo=36348,Vo=35661,Ho=35660,Ni=34930,Ka=36349,ls=34076,ss=34024,ac=7936,ra=7937,ia=7938,Wo=35724,aa=34047,us=36063,fr=34852,hi=3553,pi=34067,ki=34069,Nn=33984,Mr=6408,Mn=5126,En=5121,oa=36160,Xo=36053,Yo=36064,Qo=16384,oc=function(c,g){var R=1;g.ext_texture_filter_anisotropic&&(R=c.getParameter(aa));var X=1,te=1;g.webgl_draw_buffers&&(X=c.getParameter(fr),te=c.getParameter(us));var W=!!g.oes_texture_float;if(W){var K=c.createTexture();c.bindTexture(hi,K),c.texImage2D(hi,0,Mr,1,1,0,Mr,Mn,null);var fe=c.createFramebuffer();if(c.bindFramebuffer(oa,fe),c.framebufferTexture2D(oa,Yo,hi,K,0),c.bindTexture(hi,null),c.checkFramebufferStatus(oa)!==Xo)W=!1;else{c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(Qo);var ce=xt.allocType(Mn,4);c.readPixels(0,0,1,1,Mr,Mn,ce),c.getError()?W=!1:(c.deleteFramebuffer(fe),c.deleteTexture(K),W=ce[0]===1),xt.freeType(ce)}}var ge=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),xe=!0;if(!ge){var ye=c.createTexture(),Te=xt.allocType(En,36);c.activeTexture(Nn),c.bindTexture(pi,ye),c.texImage2D(ki,0,Mr,3,3,0,Mr,En,Te),xt.freeType(Te),c.bindTexture(pi,null),c.deleteTexture(ye),xe=!c.getError()}return{colorBits:[c.getParameter(Go),c.getParameter(rc),c.getParameter(fi),c.getParameter(di)],depthBits:c.getParameter(mi),stencilBits:c.getParameter(ic),subpixelBits:c.getParameter(Pi),extensions:Object.keys(g).filter(function(de){return!!g[de]}),maxAnisotropic:R,maxDrawbuffers:X,maxColorAttachments:te,pointSizeDims:c.getParameter(wr),lineWidthDims:c.getParameter(as),maxViewportDims:c.getParameter(os),maxCombinedTextureUnits:c.getParameter(Vo),maxCubeMapSize:c.getParameter(ls),maxRenderbufferSize:c.getParameter(ss),maxTextureUnits:c.getParameter(Ni),maxTextureSize:c.getParameter(Ya),maxAttributes:c.getParameter(Qa),maxVertexUniforms:c.getParameter(zo),maxVertexTextureUnits:c.getParameter(Ho),maxVaryingVectors:c.getParameter(Uo),maxFragmentUniforms:c.getParameter(Ka),glsl:c.getParameter(Wo),renderer:c.getParameter(ra),vendor:c.getParameter(ac),version:c.getParameter(ia),readFloat:W,npotTextureCube:xe}};function dr(c){return!!c&&typeof c=="object"&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&typeof c.offset=="number"&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||n(c.data))}var nr=function(c){return Object.keys(c).map(function(g){return c[g]})},Tr={shape:Em,flatten:xm};function lc(c,g,R){for(var X=0;X<g;++X)R[X]=c[X]}function cs(c,g,R,X){for(var te=0,W=0;W<g;++W)for(var K=c[W],fe=0;fe<R;++fe)X[te++]=K[fe]}function Ko(c,g,R,X,te,W){for(var K=W,fe=0;fe<g;++fe)for(var ce=c[fe],ge=0;ge<R;++ge)for(var xe=ce[ge],ye=0;ye<X;++ye)te[K++]=xe[ye]}function fs(c,g,R,X,te){for(var W=1,K=R+1;K<g.length;++K)W*=g[K];var fe=g[R];if(g.length-R===4){var ce=g[R+1],ge=g[R+2],xe=g[R+3];for(K=0;K<fe;++K)Ko(c[K],ce,ge,xe,X,te),te+=W}else for(K=0;K<fe;++K)fs(c[K],g,R+1,X,te),te+=W}function xm(c,g,R,X){var te=1;if(g.length)for(var W=0;W<g.length;++W)te*=g[W];else te=0;var K=X||xt.allocType(R,te);switch(g.length){case 0:break;case 1:lc(c,g[0],K);break;case 2:cs(c,g[0],g[1],K);break;case 3:Ko(c,g[0],g[1],g[2],K,0);break;default:fs(c,g,0,K,0)}return K}function Em(c){for(var g=[],R=c;R.length;R=R[0])g.push(R.length);return g}var la={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},qa=5120,Ii=5122,qo=5124,_m=5121,Zo=5123,sa=5125,Za=5126,ds=5126,ua={int8:qa,int16:Ii,int32:qo,uint8:_m,uint16:Zo,uint32:sa,float:Za,float32:ds},Jv=35048,An=35040,Jo={dynamic:Jv,stream:An,static:35044},Ja=Tr.flatten,sc=Tr.shape,ms=35044,hs=35040,el=5121,tl=5126,Zr=[];Zr[5120]=1,Zr[5122]=2,Zr[5124]=4,Zr[5121]=1,Zr[5123]=2,Zr[5125]=4,Zr[5126]=4;function eo(c){return la[Object.prototype.toString.call(c)]|0}function nl(c,g){for(var R=0;R<g.length;++R)c[R]=g[R]}function ps(c,g,R,X,te,W,K){for(var fe=0,ce=0;ce<R;++ce)for(var ge=0;ge<X;++ge)c[fe++]=g[te*ce+W*ge+K]}function vs(c,g,R,X){var te=0,W={};function K(B){this.id=te++,this.buffer=c.createBuffer(),this.type=B,this.usage=ms,this.byteLength=0,this.dimension=1,this.dtype=el,this.persistentData=null,R.profile&&(this.stats={size:0})}K.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)},K.prototype.destroy=function(){Te(this)};var fe=[];function ce(B,Q){var he=fe.pop();return he||(he=new K(B)),he.bind(),ye(he,Q,hs,0,1,!1),he}function ge(B){fe.push(B)}function xe(B,Q,he){B.byteLength=Q.byteLength,c.bufferData(B.type,Q,he)}function ye(B,Q,he,Fe,se,ke){var Oe;if(B.usage=he,Array.isArray(Q)){if(B.dtype=Fe||tl,Q.length>0){var Je;if(Array.isArray(Q[0])){Oe=sc(Q);for(var re=1,ee=1;ee<Oe.length;++ee)re*=Oe[ee];B.dimension=re,Je=Ja(Q,Oe,B.dtype),xe(B,Je,he),ke?B.persistentData=Je:xt.freeType(Je)}else if(typeof Q[0]=="number"){B.dimension=se;var Ue=xt.allocType(B.dtype,Q.length);nl(Ue,Q),xe(B,Ue,he),ke?B.persistentData=Ue:xt.freeType(Ue)}else n(Q[0])?(B.dimension=Q[0].length,B.dtype=Fe||eo(Q[0])||tl,Je=Ja(Q,[Q.length,Q[0].length],B.dtype),xe(B,Je,he),ke?B.persistentData=Je:xt.freeType(Je)):y.raise("invalid buffer data")}}else if(n(Q))B.dtype=Fe||eo(Q),B.dimension=se,xe(B,Q,he),ke&&(B.persistentData=new Uint8Array(new Uint8Array(Q.buffer)));else if(dr(Q)){Oe=Q.shape;var Ae=Q.stride,me=Q.offset,Ce=0,Re=0,ct=0,ot=0;Oe.length===1?(Ce=Oe[0],Re=1,ct=Ae[0],ot=0):Oe.length===2?(Ce=Oe[0],Re=Oe[1],ct=Ae[0],ot=Ae[1]):y.raise("invalid shape"),B.dtype=Fe||eo(Q.data)||tl,B.dimension=Re;var Pe=xt.allocType(B.dtype,Ce*Re);ps(Pe,Q.data,Ce,Re,ct,ot,me),xe(B,Pe,he),ke?B.persistentData=Pe:xt.freeType(Pe)}else Q instanceof ArrayBuffer?(B.dtype=el,B.dimension=se,xe(B,Q,he),ke&&(B.persistentData=new Uint8Array(new Uint8Array(Q)))):y.raise("invalid buffer data")}function Te(B){g.bufferCount--,X(B);var Q=B.buffer;y(Q,"buffer must not be deleted already"),c.deleteBuffer(Q),B.buffer=null,delete W[B.id]}function de(B,Q,he,Fe){g.bufferCount++;var se=new K(Q);W[se.id]=se;function ke(re){var ee=ms,Ue=null,Ae=0,me=0,Ce=1;return Array.isArray(re)||n(re)||dr(re)||re instanceof ArrayBuffer?Ue=re:typeof re=="number"?Ae=re|0:re&&(y.type(re,"object","buffer arguments must be an object, a number or an array"),"data"in re&&(y(Ue===null||Array.isArray(Ue)||n(Ue)||dr(Ue),"invalid data for buffer"),Ue=re.data),"usage"in re&&(y.parameter(re.usage,Jo,"invalid buffer usage"),ee=Jo[re.usage]),"type"in re&&(y.parameter(re.type,ua,"invalid buffer type"),me=ua[re.type]),"dimension"in re&&(y.type(re.dimension,"number","invalid dimension"),Ce=re.dimension|0),"length"in re&&(y.nni(Ae,"buffer length must be a nonnegative integer"),Ae=re.length|0)),se.bind(),Ue?ye(se,Ue,ee,me,Ce,Fe):(Ae&&c.bufferData(se.type,Ae,ee),se.dtype=me||el,se.usage=ee,se.dimension=Ce,se.byteLength=Ae),R.profile&&(se.stats.size=se.byteLength*Zr[se.dtype]),ke}function Oe(re,ee){y(ee+re.byteLength<=se.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+re.byteLength+" starting from offset "+ee+" to a buffer of size "+se.byteLength),c.bufferSubData(se.type,ee,re)}function Je(re,ee){var Ue=(ee||0)|0,Ae;if(se.bind(),n(re)||re instanceof ArrayBuffer)Oe(re,Ue);else if(Array.isArray(re)){if(re.length>0)if(typeof re[0]=="number"){var me=xt.allocType(se.dtype,re.length);nl(me,re),Oe(me,Ue),xt.freeType(me)}else if(Array.isArray(re[0])||n(re[0])){Ae=sc(re);var Ce=Ja(re,Ae,se.dtype);Oe(Ce,Ue),xt.freeType(Ce)}else y.raise("invalid buffer data")}else if(dr(re)){Ae=re.shape;var Re=re.stride,ct=0,ot=0,Pe=0,Me=0;Ae.length===1?(ct=Ae[0],ot=1,Pe=Re[0],Me=0):Ae.length===2?(ct=Ae[0],ot=Ae[1],Pe=Re[0],Me=Re[1]):y.raise("invalid shape");var nt=Array.isArray(re.data)?se.dtype:eo(re.data),ft=xt.allocType(nt,ct*ot);ps(ft,re.data,ct,ot,Pe,Me,re.offset),Oe(ft,Ue),xt.freeType(ft)}else y.raise("invalid data for buffer subdata");return ke}return he||ke(B),ke._reglType="buffer",ke._buffer=se,ke.subdata=Je,R.profile&&(ke.stats=se.stats),ke.destroy=function(){Te(se)},ke}function ve(){nr(W).forEach(function(B){B.buffer=c.createBuffer(),c.bindBuffer(B.type,B.buffer),c.bufferData(B.type,B.persistentData||B.byteLength,B.usage)})}return R.profile&&(g.getTotalBufferSize=function(){var B=0;return Object.keys(W).forEach(function(Q){B+=W[Q].stats.size}),B}),{create:de,createStream:ce,destroyStream:ge,clear:function(){nr(W).forEach(Te),fe.forEach(Te)},getBuffer:function(B){return B&&B._buffer instanceof K?B._buffer:null},restore:ve,_initBuffer:ye}}var Sm=0,gs=0,wm=1,ys=1,Tm=4,bm=4,vi={points:Sm,point:gs,lines:wm,line:ys,triangles:Tm,triangle:bm,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Am=0,Di=1,Mi=4,Cm=5120,gi=5121,uc=5122,ca=5123,cc=5124,Jr=5125,xs=34963,Lm=35040,Es=35044;function _s(c,g,R,X){var te={},W=0,K={uint8:gi,uint16:ca};g.oes_element_index_uint&&(K.uint32=Jr);function fe(ve){this.id=W++,te[this.id]=this,this.buffer=ve,this.primType=Mi,this.vertCount=0,this.type=0}fe.prototype.bind=function(){this.buffer.bind()};var ce=[];function ge(ve){var B=ce.pop();return B||(B=new fe(R.create(null,xs,!0,!1)._buffer)),ye(B,ve,Lm,-1,-1,0,0),B}function xe(ve){ce.push(ve)}function ye(ve,B,Q,he,Fe,se,ke){ve.buffer.bind();var Oe;if(B){var Je=ke;!ke&&(!n(B)||dr(B)&&!n(B.data))&&(Je=g.oes_element_index_uint?Jr:ca),R._initBuffer(ve.buffer,B,Q,Je,3)}else c.bufferData(xs,se,Q),ve.buffer.dtype=Oe||gi,ve.buffer.usage=Q,ve.buffer.dimension=3,ve.buffer.byteLength=se;if(Oe=ke,!ke){switch(ve.buffer.dtype){case gi:case Cm:Oe=gi;break;case ca:case uc:Oe=ca;break;case Jr:case cc:Oe=Jr;break;default:y.raise("unsupported type for element array")}ve.buffer.dtype=Oe}ve.type=Oe,y(Oe!==Jr||!!g.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var re=Fe;re<0&&(re=ve.buffer.byteLength,Oe===ca?re>>=1:Oe===Jr&&(re>>=2)),ve.vertCount=re;var ee=he;if(he<0){ee=Mi;var Ue=ve.buffer.dimension;Ue===1&&(ee=Am),Ue===2&&(ee=Di),Ue===3&&(ee=Mi)}ve.primType=ee}function Te(ve){X.elementsCount--,y(ve.buffer!==null,"must not double destroy elements"),delete te[ve.id],ve.buffer.destroy(),ve.buffer=null}function de(ve,B){var Q=R.create(null,xs,!0),he=new fe(Q._buffer);X.elementsCount++;function Fe(se){if(!se)Q(),he.primType=Mi,he.vertCount=0,he.type=gi;else if(typeof se=="number")Q(se),he.primType=Mi,he.vertCount=se|0,he.type=gi;else{var ke=null,Oe=Es,Je=-1,re=-1,ee=0,Ue=0;Array.isArray(se)||n(se)||dr(se)?ke=se:(y.type(se,"object","invalid arguments for elements"),"data"in se&&(ke=se.data,y(Array.isArray(ke)||n(ke)||dr(ke),"invalid data for element buffer")),"usage"in se&&(y.parameter(se.usage,Jo,"invalid element buffer usage"),Oe=Jo[se.usage]),"primitive"in se&&(y.parameter(se.primitive,vi,"invalid element buffer primitive"),Je=vi[se.primitive]),"count"in se&&(y(typeof se.count=="number"&&se.count>=0,"invalid vertex count for elements"),re=se.count|0),"type"in se&&(y.parameter(se.type,K,"invalid buffer type"),Ue=K[se.type]),"length"in se?ee=se.length|0:(ee=re,Ue===ca||Ue===uc?ee*=2:(Ue===Jr||Ue===cc)&&(ee*=4))),ye(he,ke,Oe,Je,re,ee,Ue)}return Fe}return Fe(ve),Fe._reglType="elements",Fe._elements=he,Fe.subdata=function(se,ke){return Q.subdata(se,ke),Fe},Fe.destroy=function(){Te(he)},Fe}return{create:de,createStream:ge,destroyStream:xe,getElements:function(ve){return typeof ve=="function"&&ve._elements instanceof fe?ve._elements:null},clear:function(){nr(te).forEach(Te)}}}var fc=new Float32Array(1),Rm=new Uint32Array(fc.buffer),Om=5123;function dc(c){for(var g=xt.allocType(Om,c.length),R=0;R<c.length;++R)if(isNaN(c[R]))g[R]=65535;else if(c[R]===1/0)g[R]=31744;else if(c[R]===-1/0)g[R]=64512;else{fc[0]=c[R];var X=Rm[0],te=X>>>31<<15,W=(X<<1>>>24)-127,K=X>>13&1023;if(W<-24)g[R]=te;else if(W<-14){var fe=-14-W;g[R]=te+(K+1024>>fe)}else W>15?g[R]=te+31744:g[R]=te+(W+15<<10)+K}return g}function Zt(c){return Array.isArray(c)||n(c)}var mc=function(c){return!(c&c-1)&&!!c},Pm=34467,Fr=3553,Ss=34067,rl=34069,Fi=6408,ws=6406,il=6407,ji=6409,al=6410,hc=32854,Ts=32855,bs=36194,Nm=32819,km=32820,Im=33635,pc=34042,ol=6402,to=34041,no=35904,ro=35906,fa=36193,Bi=33776,As=33777,Cs=33778,Ls=33779,vc=35986,gc=35987,yc=34798,xc=35840,Ec=35841,_c=35842,Sc=35843,wc=36196,da=5121,Rs=5123,Os=5125,br=5126,Dm=10242,Mm=10243,Fm=10497,Ps=33071,jm=33648,Bm=10240,$m=10241,Ns=9728,Gm=9729,ll=9984,ks=9985,Tc=9986,Is=9987,zm=33170,io=4352,bc=4353,Um=4354,Vm=34046,Hm=3317,Wm=37440,Xm=37441,Ym=37443,ma=37444,ao=33984,Ac=[ll,Tc,ks,Is],oo=[0,ji,al,il,Fi],Ar={};Ar[ji]=Ar[ws]=Ar[ol]=1,Ar[to]=Ar[al]=2,Ar[il]=Ar[no]=3,Ar[Fi]=Ar[ro]=4;function ha(c){return"[object "+c+"]"}var Cc=ha("HTMLCanvasElement"),Lc=ha("OffscreenCanvas"),Rc=ha("CanvasRenderingContext2D"),Oc=ha("ImageBitmap"),Pc=ha("HTMLImageElement"),sl=ha("HTMLVideoElement"),Qm=Object.keys(la).concat([Cc,Lc,Rc,Oc,Pc,sl]),pa=[];pa[da]=1,pa[br]=4,pa[fa]=2,pa[Rs]=2,pa[Os]=4;var Cn=[];Cn[hc]=2,Cn[Ts]=2,Cn[bs]=2,Cn[to]=4,Cn[Bi]=.5,Cn[As]=.5,Cn[Cs]=1,Cn[Ls]=1,Cn[vc]=.5,Cn[gc]=1,Cn[yc]=1,Cn[xc]=.5,Cn[Ec]=.25,Cn[_c]=.5,Cn[Sc]=.25,Cn[wc]=.5;function Nc(c){return Array.isArray(c)&&(c.length===0||typeof c[0]=="number")}function Ds(c){if(!Array.isArray(c))return!1;var g=c.length;return!(g===0||!Zt(c[0]))}function $i(c){return Object.prototype.toString.call(c)}function Ms(c){return $i(c)===Cc}function kc(c){return $i(c)===Lc}function Km(c){return $i(c)===Rc}function Fs(c){return $i(c)===Oc}function Ic(c){return $i(c)===Pc}function Dc(c){return $i(c)===sl}function js(c){if(!c)return!1;var g=$i(c);return Qm.indexOf(g)>=0?!0:Nc(c)||Ds(c)||dr(c)}function Mc(c){return la[Object.prototype.toString.call(c)]|0}function qm(c,g){var R=g.length;switch(c.type){case da:case Rs:case Os:case br:var X=xt.allocType(c.type,R);X.set(g),c.data=X;break;case fa:c.data=dc(g);break;default:y.raise("unsupported texture type, must specify a typed array")}}function Fc(c,g){return xt.allocType(c.type===fa?br:c.type,g)}function jc(c,g){c.type===fa?(c.data=dc(g),xt.freeType(g)):c.data=g}function Bc(c,g,R,X,te,W){for(var K=c.width,fe=c.height,ce=c.channels,ge=K*fe*ce,xe=Fc(c,ge),ye=0,Te=0;Te<fe;++Te)for(var de=0;de<K;++de)for(var ve=0;ve<ce;++ve)xe[ye++]=g[R*de+X*Te+te*ve+W];jc(c,xe)}function ul(c,g,R,X,te,W){var K;if(typeof Cn[c]<"u"?K=Cn[c]:K=Ar[c]*pa[g],W&&(K*=6),te){for(var fe=0,ce=R;ce>=1;)fe+=K*ce*ce,ce/=2;return fe}else return K*R*X}function Zm(c,g,R,X,te,W,K){var fe={"don't care":io,"dont care":io,nice:Um,fast:bc},ce={repeat:Fm,clamp:Ps,mirror:jm},ge={nearest:Ns,linear:Gm},xe=r({mipmap:Is,"nearest mipmap nearest":ll,"linear mipmap nearest":ks,"nearest mipmap linear":Tc,"linear mipmap linear":Is},ge),ye={none:0,browser:ma},Te={uint8:da,rgba4:Nm,rgb565:Im,"rgb5 a1":km},de={alpha:ws,luminance:ji,"luminance alpha":al,rgb:il,rgba:Fi,rgba4:hc,"rgb5 a1":Ts,rgb565:bs},ve={};g.ext_srgb&&(de.srgb=no,de.srgba=ro),g.oes_texture_float&&(Te.float32=Te.float=br),g.oes_texture_half_float&&(Te.float16=Te["half float"]=fa),g.webgl_depth_texture&&(r(de,{depth:ol,"depth stencil":to}),r(Te,{uint16:Rs,uint32:Os,"depth stencil":pc})),g.webgl_compressed_texture_s3tc&&r(ve,{"rgb s3tc dxt1":Bi,"rgba s3tc dxt1":As,"rgba s3tc dxt3":Cs,"rgba s3tc dxt5":Ls}),g.webgl_compressed_texture_atc&&r(ve,{"rgb atc":vc,"rgba atc explicit alpha":gc,"rgba atc interpolated alpha":yc}),g.webgl_compressed_texture_pvrtc&&r(ve,{"rgb pvrtc 4bppv1":xc,"rgb pvrtc 2bppv1":Ec,"rgba pvrtc 4bppv1":_c,"rgba pvrtc 2bppv1":Sc}),g.webgl_compressed_texture_etc1&&(ve["rgb etc1"]=wc);var B=Array.prototype.slice.call(c.getParameter(Pm));Object.keys(ve).forEach(function(T){var Y=ve[T];B.indexOf(Y)>=0&&(de[T]=Y)});var Q=Object.keys(de);R.textureFormats=Q;var he=[];Object.keys(de).forEach(function(T){var Y=de[T];he[Y]=T});var Fe=[];Object.keys(Te).forEach(function(T){var Y=Te[T];Fe[Y]=T});var se=[];Object.keys(ge).forEach(function(T){var Y=ge[T];se[Y]=T});var ke=[];Object.keys(xe).forEach(function(T){var Y=xe[T];ke[Y]=T});var Oe=[];Object.keys(ce).forEach(function(T){var Y=ce[T];Oe[Y]=T});var Je=Q.reduce(function(T,Y){var V=de[Y];return V===ji||V===ws||V===ji||V===al||V===ol||V===to||g.ext_srgb&&(V===no||V===ro)?T[V]=V:V===Ts||Y.indexOf("rgba")>=0?T[V]=Fi:T[V]=il,T},{});function re(){this.internalformat=Fi,this.format=Fi,this.type=da,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ma,this.width=0,this.height=0,this.channels=0}function ee(T,Y){T.internalformat=Y.internalformat,T.format=Y.format,T.type=Y.type,T.compressed=Y.compressed,T.premultiplyAlpha=Y.premultiplyAlpha,T.flipY=Y.flipY,T.unpackAlignment=Y.unpackAlignment,T.colorSpace=Y.colorSpace,T.width=Y.width,T.height=Y.height,T.channels=Y.channels}function Ue(T,Y){if(!(typeof Y!="object"||!Y)){if("premultiplyAlpha"in Y&&(y.type(Y.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),T.premultiplyAlpha=Y.premultiplyAlpha),"flipY"in Y&&(y.type(Y.flipY,"boolean","invalid texture flip"),T.flipY=Y.flipY),"alignment"in Y&&(y.oneOf(Y.alignment,[1,2,4,8],"invalid texture unpack alignment"),T.unpackAlignment=Y.alignment),"colorSpace"in Y&&(y.parameter(Y.colorSpace,ye,"invalid colorSpace"),T.colorSpace=ye[Y.colorSpace]),"type"in Y){var V=Y.type;y(g.oes_texture_float||!(V==="float"||V==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),y(g.oes_texture_half_float||!(V==="half float"||V==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),y(g.webgl_depth_texture||!(V==="uint16"||V==="uint32"||V==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(V,Te,"invalid texture type"),T.type=Te[V]}var Ge=T.width,St=T.height,E=T.channels,m=!1;"shape"in Y?(y(Array.isArray(Y.shape)&&Y.shape.length>=2,"shape must be an array"),Ge=Y.shape[0],St=Y.shape[1],Y.shape.length===3&&(E=Y.shape[2],y(E>0&&E<=4,"invalid number of channels"),m=!0),y(Ge>=0&&Ge<=R.maxTextureSize,"invalid width"),y(St>=0&&St<=R.maxTextureSize,"invalid height")):("radius"in Y&&(Ge=St=Y.radius,y(Ge>=0&&Ge<=R.maxTextureSize,"invalid radius")),"width"in Y&&(Ge=Y.width,y(Ge>=0&&Ge<=R.maxTextureSize,"invalid width")),"height"in Y&&(St=Y.height,y(St>=0&&St<=R.maxTextureSize,"invalid height")),"channels"in Y&&(E=Y.channels,y(E>0&&E<=4,"invalid number of channels"),m=!0)),T.width=Ge|0,T.height=St|0,T.channels=E|0;var P=!1;if("format"in Y){var F=Y.format;y(g.webgl_depth_texture||!(F==="depth"||F==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(F,de,"invalid texture format");var $=T.internalformat=de[F];T.format=Je[$],F in Te&&("type"in Y||(T.type=Te[F])),F in ve&&(T.compressed=!0),P=!0}!m&&P?T.channels=Ar[T.format]:m&&!P?T.channels!==oo[T.format]&&(T.format=T.internalformat=oo[T.channels]):P&&m&&y(T.channels===Ar[T.format],"number of channels inconsistent with specified format")}}function Ae(T){c.pixelStorei(Wm,T.flipY),c.pixelStorei(Xm,T.premultiplyAlpha),c.pixelStorei(Ym,T.colorSpace),c.pixelStorei(Hm,T.unpackAlignment)}function me(){re.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ce(T,Y){var V=null;if(js(Y)?V=Y:Y&&(y.type(Y,"object","invalid pixel data type"),Ue(T,Y),"x"in Y&&(T.xOffset=Y.x|0),"y"in Y&&(T.yOffset=Y.y|0),js(Y.data)&&(V=Y.data)),y(!T.compressed||V instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Y.copy){y(!V,"can not specify copy and data field for the same texture");var Ge=te.viewportWidth,St=te.viewportHeight;T.width=T.width||Ge-T.xOffset,T.height=T.height||St-T.yOffset,T.needsCopy=!0,y(T.xOffset>=0&&T.xOffset<Ge&&T.yOffset>=0&&T.yOffset<St&&T.width>0&&T.width<=Ge&&T.height>0&&T.height<=St,"copy texture read out of bounds")}else if(!V)T.width=T.width||1,T.height=T.height||1,T.channels=T.channels||4;else if(n(V))T.channels=T.channels||4,T.data=V,!("type"in Y)&&T.type===da&&(T.type=Mc(V));else if(Nc(V))T.channels=T.channels||4,qm(T,V),T.alignment=1,T.needsFree=!0;else if(dr(V)){var E=V.data;!Array.isArray(E)&&T.type===da&&(T.type=Mc(E));var m=V.shape,P=V.stride,F,$,k,N,M,_;m.length===3?(k=m[2],_=P[2]):(y(m.length===2,"invalid ndarray pixel data, must be 2 or 3D"),k=1,_=1),F=m[0],$=m[1],N=P[0],M=P[1],T.alignment=1,T.width=F,T.height=$,T.channels=k,T.format=T.internalformat=oo[k],T.needsFree=!0,Bc(T,E,N,M,_,V.offset)}else if(Ms(V)||kc(V)||Km(V))Ms(V)||kc(V)?T.element=V:T.element=V.canvas,T.width=T.element.width,T.height=T.element.height,T.channels=4;else if(Fs(V))T.element=V,T.width=V.width,T.height=V.height,T.channels=4;else if(Ic(V))T.element=V,T.width=V.naturalWidth,T.height=V.naturalHeight,T.channels=4;else if(Dc(V))T.element=V,T.width=V.videoWidth,T.height=V.videoHeight,T.channels=4;else if(Ds(V)){var A=T.width||V[0].length,S=T.height||V.length,U=T.channels;Zt(V[0][0])?U=U||V[0][0].length:U=U||1;for(var G=Tr.shape(V),J=1,ie=0;ie<G.length;++ie)J*=G[ie];var _e=Fc(T,J);Tr.flatten(V,G,"",_e),jc(T,_e),T.alignment=1,T.width=A,T.height=S,T.channels=U,T.format=T.internalformat=oo[U],T.needsFree=!0}T.type===br?y(R.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):T.type===fa&&y(R.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Re(T,Y,V){var Ge=T.element,St=T.data,E=T.internalformat,m=T.format,P=T.type,F=T.width,$=T.height;Ae(T),Ge?c.texImage2D(Y,V,m,m,P,Ge):T.compressed?c.compressedTexImage2D(Y,V,E,F,$,0,St):T.needsCopy?(X(),c.copyTexImage2D(Y,V,m,T.xOffset,T.yOffset,F,$,0)):c.texImage2D(Y,V,m,F,$,0,m,P,St||null)}function ct(T,Y,V,Ge,St){var E=T.element,m=T.data,P=T.internalformat,F=T.format,$=T.type,k=T.width,N=T.height;Ae(T),E?c.texSubImage2D(Y,St,V,Ge,F,$,E):T.compressed?c.compressedTexSubImage2D(Y,St,V,Ge,P,k,N,m):T.needsCopy?(X(),c.copyTexSubImage2D(Y,St,V,Ge,T.xOffset,T.yOffset,k,N)):c.texSubImage2D(Y,St,V,Ge,k,N,F,$,m)}var ot=[];function Pe(){return ot.pop()||new me}function Me(T){T.needsFree&&xt.freeType(T.data),me.call(T),ot.push(T)}function nt(){re.call(this),this.genMipmaps=!1,this.mipmapHint=io,this.mipmask=0,this.images=Array(16)}function ft(T,Y,V){var Ge=T.images[0]=Pe();T.mipmask=1,Ge.width=T.width=Y,Ge.height=T.height=V,Ge.channels=T.channels=4}function bt(T,Y){var V=null;if(js(Y))V=T.images[0]=Pe(),ee(V,T),Ce(V,Y),T.mipmask=1;else if(Ue(T,Y),Array.isArray(Y.mipmap))for(var Ge=Y.mipmap,St=0;St<Ge.length;++St)V=T.images[St]=Pe(),ee(V,T),V.width>>=St,V.height>>=St,Ce(V,Ge[St]),T.mipmask|=1<<St;else V=T.images[0]=Pe(),ee(V,T),Ce(V,Y),T.mipmask=1;ee(T,T.images[0]),T.compressed&&(T.internalformat===Bi||T.internalformat===As||T.internalformat===Cs||T.internalformat===Ls)&&y(T.width%4===0&&T.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function rn(T,Y){for(var V=T.images,Ge=0;Ge<V.length;++Ge){if(!V[Ge])return;Re(V[Ge],Y,Ge)}}var ln=[];function Rt(){var T=ln.pop()||new nt;re.call(T),T.mipmask=0;for(var Y=0;Y<16;++Y)T.images[Y]=null;return T}function Ln(T){for(var Y=T.images,V=0;V<Y.length;++V)Y[V]&&Me(Y[V]),Y[V]=null;ln.push(T)}function Jt(){this.minFilter=Ns,this.magFilter=Ns,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=io}function wn(T,Y){if("min"in Y){var V=Y.min;y.parameter(V,xe),T.minFilter=xe[V],Ac.indexOf(T.minFilter)>=0&&!("faces"in Y)&&(T.genMipmaps=!0)}if("mag"in Y){var Ge=Y.mag;y.parameter(Ge,ge),T.magFilter=ge[Ge]}var St=T.wrapS,E=T.wrapT;if("wrap"in Y){var m=Y.wrap;typeof m=="string"?(y.parameter(m,ce),St=E=ce[m]):Array.isArray(m)&&(y.parameter(m[0],ce),y.parameter(m[1],ce),St=ce[m[0]],E=ce[m[1]])}else{if("wrapS"in Y){var P=Y.wrapS;y.parameter(P,ce),St=ce[P]}if("wrapT"in Y){var F=Y.wrapT;y.parameter(F,ce),E=ce[F]}}if(T.wrapS=St,T.wrapT=E,"anisotropic"in Y){var $=Y.anisotropic;y(typeof $=="number"&&$>=1&&$<=R.maxAnisotropic,"aniso samples must be between 1 and "),T.anisotropic=Y.anisotropic}if("mipmap"in Y){var k=!1;switch(typeof Y.mipmap){case"string":y.parameter(Y.mipmap,fe,"invalid mipmap hint"),T.mipmapHint=fe[Y.mipmap],T.genMipmaps=!0,k=!0;break;case"boolean":k=T.genMipmaps=Y.mipmap;break;case"object":y(Array.isArray(Y.mipmap),"invalid mipmap type"),T.genMipmaps=!1,k=!0;break;default:y.raise("invalid mipmap type")}k&&!("min"in Y)&&(T.minFilter=ll)}}function Rn(T,Y){c.texParameteri(Y,$m,T.minFilter),c.texParameteri(Y,Bm,T.magFilter),c.texParameteri(Y,Dm,T.wrapS),c.texParameteri(Y,Mm,T.wrapT),g.ext_texture_filter_anisotropic&&c.texParameteri(Y,Vm,T.anisotropic),T.genMipmaps&&(c.hint(zm,T.mipmapHint),c.generateMipmap(Y))}var On=0,Fn={},Gn=R.maxTextureUnits,hn=Array(Gn).map(function(){return null});function vt(T){re.call(this),this.mipmask=0,this.internalformat=Fi,this.id=On++,this.refCount=1,this.target=T,this.texture=c.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Jt,K.profile&&(this.stats={size:0})}function zn(T){c.activeTexture(ao),c.bindTexture(T.target,T.texture)}function $t(){var T=hn[0];T?c.bindTexture(T.target,T.texture):c.bindTexture(Fr,null)}function tt(T){var Y=T.texture;y(Y,"must not double destroy texture");var V=T.unit,Ge=T.target;V>=0&&(c.activeTexture(ao+V),c.bindTexture(Ge,null),hn[V]=null),c.deleteTexture(Y),T.texture=null,T.params=null,T.pixels=null,T.refCount=0,delete Fn[T.id],W.textureCount--}r(vt.prototype,{bind:function(){var T=this;T.bindCount+=1;var Y=T.unit;if(Y<0){for(var V=0;V<Gn;++V){var Ge=hn[V];if(Ge){if(Ge.bindCount>0)continue;Ge.unit=-1}hn[V]=T,Y=V;break}Y>=Gn&&y.raise("insufficient number of texture units"),K.profile&&W.maxTextureUnits<Y+1&&(W.maxTextureUnits=Y+1),T.unit=Y,c.activeTexture(ao+Y),c.bindTexture(T.target,T.texture)}return Y},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tt(this)}});function At(T,Y){var V=new vt(Fr);Fn[V.id]=V,W.textureCount++;function Ge(m,P){var F=V.texInfo;Jt.call(F);var $=Rt();return typeof m=="number"?typeof P=="number"?ft($,m|0,P|0):ft($,m|0,m|0):m?(y.type(m,"object","invalid arguments to regl.texture"),wn(F,m),bt($,m)):ft($,1,1),F.genMipmaps&&($.mipmask=($.width<<1)-1),V.mipmask=$.mipmask,ee(V,$),y.texture2D(F,$,R),V.internalformat=$.internalformat,Ge.width=$.width,Ge.height=$.height,zn(V),rn($,Fr),Rn(F,Fr),$t(),Ln($),K.profile&&(V.stats.size=ul(V.internalformat,V.type,$.width,$.height,F.genMipmaps,!1)),Ge.format=he[V.internalformat],Ge.type=Fe[V.type],Ge.mag=se[F.magFilter],Ge.min=ke[F.minFilter],Ge.wrapS=Oe[F.wrapS],Ge.wrapT=Oe[F.wrapT],Ge}function St(m,P,F,$){y(!!m,"must specify image data");var k=P|0,N=F|0,M=$|0,_=Pe();return ee(_,V),_.width=0,_.height=0,Ce(_,m),_.width=_.width||(V.width>>M)-k,_.height=_.height||(V.height>>M)-N,y(V.type===_.type&&V.format===_.format&&V.internalformat===_.internalformat,"incompatible format for texture.subimage"),y(k>=0&&N>=0&&k+_.width<=V.width&&N+_.height<=V.height,"texture.subimage write out of bounds"),y(V.mipmask&1<<M,"missing mipmap data"),y(_.data||_.element||_.needsCopy,"missing image data"),zn(V),ct(_,Fr,k,N,M),$t(),Me(_),Ge}function E(m,P){var F=m|0,$=P|0||F;if(F===V.width&&$===V.height)return Ge;Ge.width=V.width=F,Ge.height=V.height=$,zn(V);for(var k=0;V.mipmask>>k;++k){var N=F>>k,M=$>>k;if(!N||!M)break;c.texImage2D(Fr,k,V.format,N,M,0,V.format,V.type,null)}return $t(),K.profile&&(V.stats.size=ul(V.internalformat,V.type,F,$,!1,!1)),Ge}return Ge(T,Y),Ge.subimage=St,Ge.resize=E,Ge._reglType="texture2d",Ge._texture=V,K.profile&&(Ge.stats=V.stats),Ge.destroy=function(){V.decRef()},Ge}function kt(T,Y,V,Ge,St,E){var m=new vt(Ss);Fn[m.id]=m,W.cubeCount++;var P=new Array(6);function F(N,M,_,A,S,U){var G,J=m.texInfo;for(Jt.call(J),G=0;G<6;++G)P[G]=Rt();if(typeof N=="number"||!N){var ie=N|0||1;for(G=0;G<6;++G)ft(P[G],ie,ie)}else if(typeof N=="object")if(M)bt(P[0],N),bt(P[1],M),bt(P[2],_),bt(P[3],A),bt(P[4],S),bt(P[5],U);else if(wn(J,N),Ue(m,N),"faces"in N){var _e=N.faces;for(y(Array.isArray(_e)&&_e.length===6,"cube faces must be a length 6 array"),G=0;G<6;++G)y(typeof _e[G]=="object"&&!!_e[G],"invalid input for cube map face"),ee(P[G],m),bt(P[G],_e[G])}else for(G=0;G<6;++G)bt(P[G],N);else y.raise("invalid arguments to cube map");for(ee(m,P[0]),y.optional(function(){R.npotTextureCube||y(mc(m.width)&&mc(m.height),"your browser does not support non power or two texture dimensions")}),J.genMipmaps?m.mipmask=(P[0].width<<1)-1:m.mipmask=P[0].mipmask,y.textureCube(m,J,P,R),m.internalformat=P[0].internalformat,F.width=P[0].width,F.height=P[0].height,zn(m),G=0;G<6;++G)rn(P[G],rl+G);for(Rn(J,Ss),$t(),K.profile&&(m.stats.size=ul(m.internalformat,m.type,F.width,F.height,J.genMipmaps,!0)),F.format=he[m.internalformat],F.type=Fe[m.type],F.mag=se[J.magFilter],F.min=ke[J.minFilter],F.wrapS=Oe[J.wrapS],F.wrapT=Oe[J.wrapT],G=0;G<6;++G)Ln(P[G]);return F}function $(N,M,_,A,S){y(!!M,"must specify image data"),y(typeof N=="number"&&N===(N|0)&&N>=0&&N<6,"invalid face");var U=_|0,G=A|0,J=S|0,ie=Pe();return ee(ie,m),ie.width=0,ie.height=0,Ce(ie,M),ie.width=ie.width||(m.width>>J)-U,ie.height=ie.height||(m.height>>J)-G,y(m.type===ie.type&&m.format===ie.format&&m.internalformat===ie.internalformat,"incompatible format for texture.subimage"),y(U>=0&&G>=0&&U+ie.width<=m.width&&G+ie.height<=m.height,"texture.subimage write out of bounds"),y(m.mipmask&1<<J,"missing mipmap data"),y(ie.data||ie.element||ie.needsCopy,"missing image data"),zn(m),ct(ie,rl+N,U,G,J),$t(),Me(ie),F}function k(N){var M=N|0;if(M!==m.width){F.width=m.width=M,F.height=m.height=M,zn(m);for(var _=0;_<6;++_)for(var A=0;m.mipmask>>A;++A)c.texImage2D(rl+_,A,m.format,M>>A,M>>A,0,m.format,m.type,null);return $t(),K.profile&&(m.stats.size=ul(m.internalformat,m.type,F.width,F.height,!1,!0)),F}}return F(T,Y,V,Ge,St,E),F.subimage=$,F.resize=k,F._reglType="textureCube",F._texture=m,K.profile&&(F.stats=m.stats),F.destroy=function(){m.decRef()},F}function pn(){for(var T=0;T<Gn;++T)c.activeTexture(ao+T),c.bindTexture(Fr,null),hn[T]=null;nr(Fn).forEach(tt),W.cubeCount=0,W.textureCount=0}K.profile&&(W.getTotalTextureSize=function(){var T=0;return Object.keys(Fn).forEach(function(Y){T+=Fn[Y].stats.size}),T});function Ei(){for(var T=0;T<Gn;++T){var Y=hn[T];Y&&(Y.bindCount=0,Y.unit=-1,hn[T]=null)}nr(Fn).forEach(function(V){V.texture=c.createTexture(),c.bindTexture(V.target,V.texture);for(var Ge=0;Ge<32;++Ge)if(V.mipmask&1<<Ge)if(V.target===Fr)c.texImage2D(Fr,Ge,V.internalformat,V.width>>Ge,V.height>>Ge,0,V.internalformat,V.type,null);else for(var St=0;St<6;++St)c.texImage2D(rl+St,Ge,V.internalformat,V.width>>Ge,V.height>>Ge,0,V.internalformat,V.type,null);Rn(V.texInfo,V.target)})}function po(){for(var T=0;T<Gn;++T){var Y=hn[T];Y&&(Y.bindCount=0,Y.unit=-1,hn[T]=null),c.activeTexture(ao+T),c.bindTexture(Fr,null),c.bindTexture(Ss,null)}}return{create2D:At,createCube:kt,clear:pn,getTexture:function(T){return null},restore:Ei,refresh:po}}var yi=36161,cl=32854,$c=32855,Gc=36194,zc=33189,Uc=36168,Vc=34041,Hc=35907,Wc=34836,Xc=34842,Yc=34843,Cr=[];Cr[cl]=2,Cr[$c]=2,Cr[Gc]=2,Cr[zc]=2,Cr[Uc]=1,Cr[Vc]=4,Cr[Hc]=4,Cr[Wc]=16,Cr[Xc]=8,Cr[Yc]=6;function Qc(c,g,R){return Cr[c]*g*R}var Jm=function(c,g,R,X,te){var W={rgba4:cl,rgb565:Gc,"rgb5 a1":$c,depth:zc,stencil:Uc,"depth stencil":Vc};g.ext_srgb&&(W.srgba=Hc),g.ext_color_buffer_half_float&&(W.rgba16f=Xc,W.rgb16f=Yc),g.webgl_color_buffer_float&&(W.rgba32f=Wc);var K=[];Object.keys(W).forEach(function(de){var ve=W[de];K[ve]=de});var fe=0,ce={};function ge(de){this.id=fe++,this.refCount=1,this.renderbuffer=de,this.format=cl,this.width=0,this.height=0,te.profile&&(this.stats={size:0})}ge.prototype.decRef=function(){--this.refCount<=0&&xe(this)};function xe(de){var ve=de.renderbuffer;y(ve,"must not double destroy renderbuffer"),c.bindRenderbuffer(yi,null),c.deleteRenderbuffer(ve),de.renderbuffer=null,de.refCount=0,delete ce[de.id],X.renderbufferCount--}function ye(de,ve){var B=new ge(c.createRenderbuffer());ce[B.id]=B,X.renderbufferCount++;function Q(Fe,se){var ke=0,Oe=0,Je=cl;if(typeof Fe=="object"&&Fe){var re=Fe;if("shape"in re){var ee=re.shape;y(Array.isArray(ee)&&ee.length>=2,"invalid renderbuffer shape"),ke=ee[0]|0,Oe=ee[1]|0}else"radius"in re&&(ke=Oe=re.radius|0),"width"in re&&(ke=re.width|0),"height"in re&&(Oe=re.height|0);"format"in re&&(y.parameter(re.format,W,"invalid renderbuffer format"),Je=W[re.format])}else typeof Fe=="number"?(ke=Fe|0,typeof se=="number"?Oe=se|0:Oe=ke):Fe?y.raise("invalid arguments to renderbuffer constructor"):ke=Oe=1;if(y(ke>0&&Oe>0&&ke<=R.maxRenderbufferSize&&Oe<=R.maxRenderbufferSize,"invalid renderbuffer size"),!(ke===B.width&&Oe===B.height&&Je===B.format))return Q.width=B.width=ke,Q.height=B.height=Oe,B.format=Je,c.bindRenderbuffer(yi,B.renderbuffer),c.renderbufferStorage(yi,Je,ke,Oe),y(c.getError()===0,"invalid render buffer format"),te.profile&&(B.stats.size=Qc(B.format,B.width,B.height)),Q.format=K[B.format],Q}function he(Fe,se){var ke=Fe|0,Oe=se|0||ke;return ke===B.width&&Oe===B.height||(y(ke>0&&Oe>0&&ke<=R.maxRenderbufferSize&&Oe<=R.maxRenderbufferSize,"invalid renderbuffer size"),Q.width=B.width=ke,Q.height=B.height=Oe,c.bindRenderbuffer(yi,B.renderbuffer),c.renderbufferStorage(yi,B.format,ke,Oe),y(c.getError()===0,"invalid render buffer format"),te.profile&&(B.stats.size=Qc(B.format,B.width,B.height))),Q}return Q(de,ve),Q.resize=he,Q._reglType="renderbuffer",Q._renderbuffer=B,te.profile&&(Q.stats=B.stats),Q.destroy=function(){B.decRef()},Q}te.profile&&(X.getTotalRenderbufferSize=function(){var de=0;return Object.keys(ce).forEach(function(ve){de+=ce[ve].stats.size}),de});function Te(){nr(ce).forEach(function(de){de.renderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(yi,de.renderbuffer),c.renderbufferStorage(yi,de.format,de.width,de.height)}),c.bindRenderbuffer(yi,null)}return{create:ye,clear:function(){nr(ce).forEach(xe)},restore:Te}},ei=36160,Bs=36161,Gi=3553,fl=34069,Kc=36064,dl=36096,qc=36128,Zc=33306,Jc=36053,eh=36054,th=36055,nh=36057,rh=36061,ih=36193,ah=5121,oh=5126,ef=6407,tf=6408,lh=6402,sh=[ef,tf],$s=[];$s[tf]=4,$s[ef]=3;var lo=[];lo[ah]=1,lo[oh]=4,lo[ih]=2;var uh=32854,nf=32855,ch=36194,rf=33189,af=36168,Gs=34041,of=35907,fh=34836,so=34842,dh=34843,mh=[uh,nf,ch,of,so,dh,fh],va={};va[Jc]="complete",va[eh]="incomplete attachment",va[nh]="incomplete dimensions",va[th]="incomplete, missing attachment",va[rh]="unsupported";function hh(c,g,R,X,te,W){var K={cur:null,next:null,dirty:!1,setFBO:null},fe=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];g.ext_srgb&&ce.push("srgba"),g.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),g.webgl_color_buffer_float&&ce.push("rgba32f");var ge=["uint8"];g.oes_texture_half_float&&ge.push("half float","float16"),g.oes_texture_float&&ge.push("float","float32");function xe(me,Ce,Re){this.target=me,this.texture=Ce,this.renderbuffer=Re;var ct=0,ot=0;Ce?(ct=Ce.width,ot=Ce.height):Re&&(ct=Re.width,ot=Re.height),this.width=ct,this.height=ot}function ye(me){me&&(me.texture&&me.texture._texture.decRef(),me.renderbuffer&&me.renderbuffer._renderbuffer.decRef())}function Te(me,Ce,Re){if(me)if(me.texture){var ct=me.texture._texture,ot=Math.max(1,ct.width),Pe=Math.max(1,ct.height);y(ot===Ce&&Pe===Re,"inconsistent width/height for supplied texture"),ct.refCount+=1}else{var Me=me.renderbuffer._renderbuffer;y(Me.width===Ce&&Me.height===Re,"inconsistent width/height for renderbuffer"),Me.refCount+=1}}function de(me,Ce){Ce&&(Ce.texture?c.framebufferTexture2D(ei,me,Ce.target,Ce.texture._texture.texture,0):c.framebufferRenderbuffer(ei,me,Bs,Ce.renderbuffer._renderbuffer.renderbuffer))}function ve(me){var Ce=Gi,Re=null,ct=null,ot=me;typeof me=="object"&&(ot=me.data,"target"in me&&(Ce=me.target|0)),y.type(ot,"function","invalid attachment data");var Pe=ot._reglType;return Pe==="texture2d"?(Re=ot,y(Ce===Gi)):Pe==="textureCube"?(Re=ot,y(Ce>=fl&&Ce<fl+6,"invalid cube map target")):Pe==="renderbuffer"?(ct=ot,Ce=Bs):y.raise("invalid regl object for attachment"),new xe(Ce,Re,ct)}function B(me,Ce,Re,ct,ot){if(Re){var Pe=X.create2D({width:me,height:Ce,format:ct,type:ot});return Pe._texture.refCount=0,new xe(Gi,Pe,null)}else{var Me=te.create({width:me,height:Ce,format:ct});return Me._renderbuffer.refCount=0,new xe(Bs,null,Me)}}function Q(me){return me&&(me.texture||me.renderbuffer)}function he(me,Ce,Re){me&&(me.texture?me.texture.resize(Ce,Re):me.renderbuffer&&me.renderbuffer.resize(Ce,Re),me.width=Ce,me.height=Re)}var Fe=0,se={};function ke(){this.id=Fe++,se[this.id]=this,this.framebuffer=c.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Oe(me){me.colorAttachments.forEach(ye),ye(me.depthAttachment),ye(me.stencilAttachment),ye(me.depthStencilAttachment)}function Je(me){var Ce=me.framebuffer;y(Ce,"must not double destroy framebuffer"),c.deleteFramebuffer(Ce),me.framebuffer=null,W.framebufferCount--,delete se[me.id]}function re(me){var Ce;c.bindFramebuffer(ei,me.framebuffer);var Re=me.colorAttachments;for(Ce=0;Ce<Re.length;++Ce)de(Kc+Ce,Re[Ce]);for(Ce=Re.length;Ce<R.maxColorAttachments;++Ce)c.framebufferTexture2D(ei,Kc+Ce,Gi,null,0);c.framebufferTexture2D(ei,Zc,Gi,null,0),c.framebufferTexture2D(ei,dl,Gi,null,0),c.framebufferTexture2D(ei,qc,Gi,null,0),de(dl,me.depthAttachment),de(qc,me.stencilAttachment),de(Zc,me.depthStencilAttachment);var ct=c.checkFramebufferStatus(ei);!c.isContextLost()&&ct!==Jc&&y.raise("framebuffer configuration not supported, status = "+va[ct]),c.bindFramebuffer(ei,K.next?K.next.framebuffer:null),K.cur=K.next,c.getError()}function ee(me,Ce){var Re=new ke;W.framebufferCount++;function ct(Pe,Me){var nt;y(K.next!==Re,"can not update framebuffer which is currently in use");var ft=0,bt=0,rn=!0,ln=!0,Rt=null,Ln=!0,Jt="rgba",wn="uint8",Rn=1,On=null,Fn=null,Gn=null,hn=!1;if(typeof Pe=="number")ft=Pe|0,bt=Me|0||ft;else if(!Pe)ft=bt=1;else{y.type(Pe,"object","invalid arguments for framebuffer");var vt=Pe;if("shape"in vt){var zn=vt.shape;y(Array.isArray(zn)&&zn.length>=2,"invalid shape for framebuffer"),ft=zn[0],bt=zn[1]}else"radius"in vt&&(ft=bt=vt.radius),"width"in vt&&(ft=vt.width),"height"in vt&&(bt=vt.height);("color"in vt||"colors"in vt)&&(Rt=vt.color||vt.colors,Array.isArray(Rt)&&y(Rt.length===1||g.webgl_draw_buffers,"multiple render targets not supported")),Rt||("colorCount"in vt&&(Rn=vt.colorCount|0,y(Rn>0,"invalid color buffer count")),"colorTexture"in vt&&(Ln=!!vt.colorTexture,Jt="rgba4"),"colorType"in vt&&(wn=vt.colorType,Ln?(y(g.oes_texture_float||!(wn==="float"||wn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),y(g.oes_texture_half_float||!(wn==="half float"||wn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):wn==="half float"||wn==="float16"?(y(g.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Jt="rgba16f"):(wn==="float"||wn==="float32")&&(y(g.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Jt="rgba32f"),y.oneOf(wn,ge,"invalid color type")),"colorFormat"in vt&&(Jt=vt.colorFormat,fe.indexOf(Jt)>=0?Ln=!0:ce.indexOf(Jt)>=0?Ln=!1:y.optional(function(){Ln?y.oneOf(vt.colorFormat,fe,"invalid color format for texture"):y.oneOf(vt.colorFormat,ce,"invalid color format for renderbuffer")}))),("depthTexture"in vt||"depthStencilTexture"in vt)&&(hn=!!(vt.depthTexture||vt.depthStencilTexture),y(!hn||g.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in vt&&(typeof vt.depth=="boolean"?rn=vt.depth:(On=vt.depth,ln=!1)),"stencil"in vt&&(typeof vt.stencil=="boolean"?ln=vt.stencil:(Fn=vt.stencil,rn=!1)),"depthStencil"in vt&&(typeof vt.depthStencil=="boolean"?rn=ln=vt.depthStencil:(Gn=vt.depthStencil,rn=!1,ln=!1))}var $t=null,tt=null,At=null,kt=null;if(Array.isArray(Rt))$t=Rt.map(ve);else if(Rt)$t=[ve(Rt)];else for($t=new Array(Rn),nt=0;nt<Rn;++nt)$t[nt]=B(ft,bt,Ln,Jt,wn);y(g.webgl_draw_buffers||$t.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),y($t.length<=R.maxColorAttachments,"too many color attachments, not supported"),ft=ft||$t[0].width,bt=bt||$t[0].height,On?tt=ve(On):rn&&!ln&&(tt=B(ft,bt,hn,"depth","uint32")),Fn?At=ve(Fn):ln&&!rn&&(At=B(ft,bt,!1,"stencil","uint8")),Gn?kt=ve(Gn):!On&&!Fn&&ln&&rn&&(kt=B(ft,bt,hn,"depth stencil","depth stencil")),y(!!On+!!Fn+!!Gn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var pn=null;for(nt=0;nt<$t.length;++nt)if(Te($t[nt],ft,bt),y(!$t[nt]||$t[nt].texture&&sh.indexOf($t[nt].texture._texture.format)>=0||$t[nt].renderbuffer&&mh.indexOf($t[nt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+nt+" is invalid"),$t[nt]&&$t[nt].texture){var Ei=$s[$t[nt].texture._texture.format]*lo[$t[nt].texture._texture.type];pn===null?pn=Ei:y(pn===Ei,"all color attachments much have the same number of bits per pixel.")}return Te(tt,ft,bt),y(!tt||tt.texture&&tt.texture._texture.format===lh||tt.renderbuffer&&tt.renderbuffer._renderbuffer.format===rf,"invalid depth attachment for framebuffer object"),Te(At,ft,bt),y(!At||At.renderbuffer&&At.renderbuffer._renderbuffer.format===af,"invalid stencil attachment for framebuffer object"),Te(kt,ft,bt),y(!kt||kt.texture&&kt.texture._texture.format===Gs||kt.renderbuffer&&kt.renderbuffer._renderbuffer.format===Gs,"invalid depth-stencil attachment for framebuffer object"),Oe(Re),Re.width=ft,Re.height=bt,Re.colorAttachments=$t,Re.depthAttachment=tt,Re.stencilAttachment=At,Re.depthStencilAttachment=kt,ct.color=$t.map(Q),ct.depth=Q(tt),ct.stencil=Q(At),ct.depthStencil=Q(kt),ct.width=Re.width,ct.height=Re.height,re(Re),ct}function ot(Pe,Me){y(K.next!==Re,"can not resize a framebuffer which is currently in use");var nt=Math.max(Pe|0,1),ft=Math.max(Me|0||nt,1);if(nt===Re.width&&ft===Re.height)return ct;for(var bt=Re.colorAttachments,rn=0;rn<bt.length;++rn)he(bt[rn],nt,ft);return he(Re.depthAttachment,nt,ft),he(Re.stencilAttachment,nt,ft),he(Re.depthStencilAttachment,nt,ft),Re.width=ct.width=nt,Re.height=ct.height=ft,re(Re),ct}return ct(me,Ce),r(ct,{resize:ot,_reglType:"framebuffer",_framebuffer:Re,destroy:function(){Je(Re),Oe(Re)},use:function(Pe){K.setFBO({framebuffer:ct},Pe)}})}function Ue(me){var Ce=Array(6);function Re(ot){var Pe;y(Ce.indexOf(K.next)<0,"can not update framebuffer which is currently in use");var Me={color:null},nt=0,ft=null,bt="rgba",rn="uint8",ln=1;if(typeof ot=="number")nt=ot|0;else if(!ot)nt=1;else{y.type(ot,"object","invalid arguments for framebuffer");var Rt=ot;if("shape"in Rt){var Ln=Rt.shape;y(Array.isArray(Ln)&&Ln.length>=2,"invalid shape for framebuffer"),y(Ln[0]===Ln[1],"cube framebuffer must be square"),nt=Ln[0]}else"radius"in Rt&&(nt=Rt.radius|0),"width"in Rt?(nt=Rt.width|0,"height"in Rt&&y(Rt.height===nt,"must be square")):"height"in Rt&&(nt=Rt.height|0);("color"in Rt||"colors"in Rt)&&(ft=Rt.color||Rt.colors,Array.isArray(ft)&&y(ft.length===1||g.webgl_draw_buffers,"multiple render targets not supported")),ft||("colorCount"in Rt&&(ln=Rt.colorCount|0,y(ln>0,"invalid color buffer count")),"colorType"in Rt&&(y.oneOf(Rt.colorType,ge,"invalid color type"),rn=Rt.colorType),"colorFormat"in Rt&&(bt=Rt.colorFormat,y.oneOf(Rt.colorFormat,fe,"invalid color format for texture"))),"depth"in Rt&&(Me.depth=Rt.depth),"stencil"in Rt&&(Me.stencil=Rt.stencil),"depthStencil"in Rt&&(Me.depthStencil=Rt.depthStencil)}var Jt;if(ft)if(Array.isArray(ft))for(Jt=[],Pe=0;Pe<ft.length;++Pe)Jt[Pe]=ft[Pe];else Jt=[ft];else{Jt=Array(ln);var wn={radius:nt,format:bt,type:rn};for(Pe=0;Pe<ln;++Pe)Jt[Pe]=X.createCube(wn)}for(Me.color=Array(Jt.length),Pe=0;Pe<Jt.length;++Pe){var Rn=Jt[Pe];y(typeof Rn=="function"&&Rn._reglType==="textureCube","invalid cube map"),nt=nt||Rn.width,y(Rn.width===nt&&Rn.height===nt,"invalid cube map shape"),Me.color[Pe]={target:fl,data:Jt[Pe]}}for(Pe=0;Pe<6;++Pe){for(var On=0;On<Jt.length;++On)Me.color[On].target=fl+Pe;Pe>0&&(Me.depth=Ce[0].depth,Me.stencil=Ce[0].stencil,Me.depthStencil=Ce[0].depthStencil),Ce[Pe]?Ce[Pe](Me):Ce[Pe]=ee(Me)}return r(Re,{width:nt,height:nt,color:Jt})}function ct(ot){var Pe,Me=ot|0;if(y(Me>0&&Me<=R.maxCubeMapSize,"invalid radius for cube fbo"),Me===Re.width)return Re;var nt=Re.color;for(Pe=0;Pe<nt.length;++Pe)nt[Pe].resize(Me);for(Pe=0;Pe<6;++Pe)Ce[Pe].resize(Me);return Re.width=Re.height=Me,Re}return Re(me),r(Re,{faces:Ce,resize:ct,_reglType:"framebufferCube",destroy:function(){Ce.forEach(function(ot){ot.destroy()})}})}function Ae(){K.cur=null,K.next=null,K.dirty=!0,nr(se).forEach(function(me){me.framebuffer=c.createFramebuffer(),re(me)})}return r(K,{getFramebuffer:function(me){if(typeof me=="function"&&me._reglType==="framebuffer"){var Ce=me._framebuffer;if(Ce instanceof ke)return Ce}return null},create:ee,createCube:Ue,clear:function(){nr(se).forEach(Je)},restore:Ae})}var ph=5126,s=34962,D=34963,z=["attributes","elements","offset","count","primitive","instances"];function oe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ph,this.offset=0,this.stride=0,this.divisor=0}function be(c,g,R,X,te,W,K){for(var fe=R.maxAttributes,ce=new Array(fe),ge=0;ge<fe;++ge)ce[ge]=new oe;var xe=0,ye={},Te={Record:oe,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:ve()?Oe:function(){},createVAO:Je,getVAO:Q,destroyBuffer:de,setVAO:ve()?he:Fe,clear:ve()?se:function(){}};function de(re){for(var ee=0;ee<ce.length;++ee){var Ue=ce[ee];Ue.buffer===re&&(c.disableVertexAttribArray(ee),Ue.buffer=null)}}function ve(){return g.oes_vertex_array_object}function B(){return g.angle_instanced_arrays}function Q(re){return typeof re=="function"&&re._vao?re._vao:null}function he(re){if(re!==Te.currentVAO){var ee=ve();re?ee.bindVertexArrayOES(re.vao):ee.bindVertexArrayOES(null),Te.currentVAO=re}}function Fe(re){if(re!==Te.currentVAO){if(re)re.bindAttrs();else{for(var ee=B(),Ue=0;Ue<ce.length;++Ue){var Ae=ce[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),Ae.buffer.bind(),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offfset),ee&&Ae.divisor&&ee.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}K.elements?c.bindBuffer(D,K.elements.buffer.buffer):c.bindBuffer(D,null)}Te.currentVAO=re}}function se(){nr(ye).forEach(function(re){re.destroy()})}function ke(){this.id=++xe,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var re=ve();re?this.vao=re.createVertexArrayOES():this.vao=null,ye[this.id]=this,this.buffers=[]}ke.prototype.bindAttrs=function(){for(var re=B(),ee=this.attributes,Ue=0;Ue<ee.length;++Ue){var Ae=ee[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),c.bindBuffer(s,Ae.buffer.buffer),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offset),re&&Ae.divisor&&re.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}for(var me=ee.length;me<fe;++me)c.disableVertexAttribArray(me);var Ce=W.getElements(this.elements);Ce?c.bindBuffer(D,Ce.buffer.buffer):c.bindBuffer(D,null)},ke.prototype.refresh=function(){var re=ve();re&&(re.bindVertexArrayOES(this.vao),this.bindAttrs(),Te.currentVAO=null,re.bindVertexArrayOES(null))},ke.prototype.destroy=function(){if(this.vao){var re=ve();this===Te.currentVAO&&(Te.currentVAO=null,re.bindVertexArrayOES(null)),re.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ye[this.id]&&(delete ye[this.id],X.vaoCount-=1)};function Oe(){var re=ve();re&&nr(ye).forEach(function(ee){ee.refresh()})}function Je(re){var ee=new ke;X.vaoCount+=1;function Ue(Ae){var me;if(Array.isArray(Ae))me=Ae,ee.elements&&ee.ownsElements&&ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1,ee.offset=0,ee.count=0,ee.instances=-1,ee.primitive=4;else{if(y(typeof Ae=="object","invalid arguments for create vao"),y("attributes"in Ae,"must specify attributes for vao"),Ae.elements){var Ce=Ae.elements;ee.ownsElements?typeof Ce=="function"&&Ce._reglType==="elements"?(ee.elements.destroy(),ee.ownsElements=!1):(ee.elements(Ce),ee.ownsElements=!1):W.getElements(Ae.elements)?(ee.elements=Ae.elements,ee.ownsElements=!1):(ee.elements=W.create(Ae.elements),ee.ownsElements=!0)}else ee.elements=null,ee.ownsElements=!1;me=Ae.attributes,ee.offset=0,ee.count=-1,ee.instances=-1,ee.primitive=4,ee.elements&&(ee.count=ee.elements._elements.vertCount,ee.primitive=ee.elements._elements.primType),"offset"in Ae&&(ee.offset=Ae.offset|0),"count"in Ae&&(ee.count=Ae.count|0),"instances"in Ae&&(ee.instances=Ae.instances|0),"primitive"in Ae&&(y(Ae.primitive in vi,"bad primitive type: "+Ae.primitive),ee.primitive=vi[Ae.primitive]),y.optional(()=>{for(var rn=Object.keys(Ae),ln=0;ln<rn.length;++ln)y(z.indexOf(rn[ln])>=0,'invalid option for vao: "'+rn[ln]+'" valid options are '+z)}),y(Array.isArray(me),"attributes must be an array")}y(me.length<fe,"too many attributes"),y(me.length>0,"must specify at least one attribute");var Re={},ct=ee.attributes;ct.length=me.length;for(var ot=0;ot<me.length;++ot){var Pe=me[ot],Me=ct[ot]=new oe,nt=Pe.data||Pe;if(Array.isArray(nt)||n(nt)||dr(nt)){var ft;ee.buffers[ot]&&(ft=ee.buffers[ot],n(nt)&&ft._buffer.byteLength>=nt.byteLength?ft.subdata(nt):(ft.destroy(),ee.buffers[ot]=null)),ee.buffers[ot]||(ft=ee.buffers[ot]=te.create(Pe,s,!1,!0)),Me.buffer=te.getBuffer(ft),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1,Re[ot]=1}else te.getBuffer(Pe)?(Me.buffer=te.getBuffer(Pe),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1):te.getBuffer(Pe.buffer)?(Me.buffer=te.getBuffer(Pe.buffer),Me.size=(+Pe.size||Me.buffer.dimension)|0,Me.normalized=!!Pe.normalized||!1,"type"in Pe?(y.parameter(Pe.type,ua,"invalid buffer type"),Me.type=ua[Pe.type]):Me.type=Me.buffer.dtype,Me.offset=(Pe.offset||0)|0,Me.stride=(Pe.stride||0)|0,Me.divisor=(Pe.divisor||0)|0,Me.state=1,y(Me.size>=1&&Me.size<=4,"size must be between 1 and 4"),y(Me.offset>=0,"invalid offset"),y(Me.stride>=0&&Me.stride<=255,"stride must be between 0 and 255"),y(Me.divisor>=0,"divisor must be positive"),y(!Me.divisor||!!g.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Pe?(y(ot>0,"first attribute must not be a constant"),Me.x=+Pe.x||0,Me.y=+Pe.y||0,Me.z=+Pe.z||0,Me.w=+Pe.w||0,Me.state=2):y(!1,"invalid attribute spec for location "+ot)}for(var bt=0;bt<ee.buffers.length;++bt)!Re[bt]&&ee.buffers[bt]&&(ee.buffers[bt].destroy(),ee.buffers[bt]=null);return ee.refresh(),Ue}return Ue.destroy=function(){for(var Ae=0;Ae<ee.buffers.length;++Ae)ee.buffers[Ae]&&ee.buffers[Ae].destroy();ee.buffers.length=0,ee.ownsElements&&(ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1),ee.destroy()},Ue._vao=ee,Ue._reglType="vao",Ue(re)}return Te}var je=35632,Xe=35633,dt=35718,Bt=35721;function Dt(c,g,R,X){var te={},W={};function K(B,Q,he,Fe){this.name=B,this.id=Q,this.location=he,this.info=Fe}function fe(B,Q){for(var he=0;he<B.length;++he)if(B[he].id===Q.id){B[he].location=Q.location;return}B.push(Q)}function ce(B,Q,he){var Fe=B===je?te:W,se=Fe[Q];if(!se){var ke=g.str(Q);se=c.createShader(B),c.shaderSource(se,ke),c.compileShader(se),y.shaderError(c,se,ke,B,he),Fe[Q]=se}return se}var ge={},xe=[],ye=0;function Te(B,Q){this.id=ye++,this.fragId=B,this.vertId=Q,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,X.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function de(B,Q,he){var Fe,se,ke=ce(je,B.fragId),Oe=ce(Xe,B.vertId),Je=B.program=c.createProgram();if(c.attachShader(Je,ke),c.attachShader(Je,Oe),he)for(Fe=0;Fe<he.length;++Fe){var re=he[Fe];c.bindAttribLocation(Je,re[0],re[1])}c.linkProgram(Je),y.linkError(c,Je,g.str(B.fragId),g.str(B.vertId),Q);var ee=c.getProgramParameter(Je,dt);X.profile&&(B.stats.uniformsCount=ee);var Ue=B.uniforms;for(Fe=0;Fe<ee;++Fe)if(se=c.getActiveUniform(Je,Fe),se){if(se.size>1)for(var Ae=0;Ae<se.size;++Ae){var me=se.name.replace("[0]","["+Ae+"]");fe(Ue,new K(me,g.id(me),c.getUniformLocation(Je,me),se))}var Ce=se.name;se.size>1&&(Ce=Ce.replace("[0]","")),fe(Ue,new K(Ce,g.id(Ce),c.getUniformLocation(Je,Ce),se))}var Re=c.getProgramParameter(Je,Bt);X.profile&&(B.stats.attributesCount=Re);var ct=B.attributes;for(Fe=0;Fe<Re;++Fe)se=c.getActiveAttrib(Je,Fe),se&&fe(ct,new K(se.name,g.id(se.name),c.getAttribLocation(Je,se.name),se))}X.profile&&(R.getMaxUniformsCount=function(){var B=0;return xe.forEach(function(Q){Q.stats.uniformsCount>B&&(B=Q.stats.uniformsCount)}),B},R.getMaxAttributesCount=function(){var B=0;return xe.forEach(function(Q){Q.stats.attributesCount>B&&(B=Q.stats.attributesCount)}),B});function ve(){te={},W={};for(var B=0;B<xe.length;++B)de(xe[B],null,xe[B].attributes.map(function(Q){return[Q.location,Q.name]}))}return{clear:function(){var B=c.deleteShader.bind(c);nr(te).forEach(B),te={},nr(W).forEach(B),W={},xe.forEach(function(Q){c.deleteProgram(Q.program)}),xe.length=0,ge={},R.shaderCount=0},program:function(B,Q,he,Fe){y.command(B>=0,"missing vertex shader",he),y.command(Q>=0,"missing fragment shader",he);var se=ge[Q];se||(se=ge[Q]={});var ke=se[B];if(ke&&(ke.refCount++,!Fe))return ke;var Oe=new Te(Q,B);return R.shaderCount++,de(Oe,he,Fe),ke||(se[B]=Oe),xe.push(Oe),r(Oe,{destroy:function(){if(Oe.refCount--,Oe.refCount<=0){c.deleteProgram(Oe.program);var Je=xe.indexOf(Oe);xe.splice(Je,1),R.shaderCount--}se[Oe.vertId].refCount<=0&&(c.deleteShader(W[Oe.vertId]),delete W[Oe.vertId],delete ge[Oe.fragId][Oe.vertId]),Object.keys(ge[Oe.fragId]).length||(c.deleteShader(te[Oe.fragId]),delete te[Oe.fragId],delete ge[Oe.fragId])}})},restore:ve,shader:ce,frag:-1,vert:-1}}var _n=6408,Vt=5121,Mt=3333,lf=5126;function K_(c,g,R,X,te,W,K){function fe(xe){var ye;g.next===null?(y(te.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ye=Vt):(y(g.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ye=g.next.colorAttachments[0].texture._texture.type,y.optional(function(){W.oes_texture_float?(y(ye===Vt||ye===lf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ye===lf&&y(K.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):y(ye===Vt,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Te=0,de=0,ve=X.framebufferWidth,B=X.framebufferHeight,Q=null;n(xe)?Q=xe:xe&&(y.type(xe,"object","invalid arguments to regl.read()"),Te=xe.x|0,de=xe.y|0,y(Te>=0&&Te<X.framebufferWidth,"invalid x offset for regl.read"),y(de>=0&&de<X.framebufferHeight,"invalid y offset for regl.read"),ve=(xe.width||X.framebufferWidth-Te)|0,B=(xe.height||X.framebufferHeight-de)|0,Q=xe.data||null),Q&&(ye===Vt?y(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ye===lf&&y(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),y(ve>0&&ve+Te<=X.framebufferWidth,"invalid width for read pixels"),y(B>0&&B+de<=X.framebufferHeight,"invalid height for read pixels"),R();var he=ve*B*4;return Q||(ye===Vt?Q=new Uint8Array(he):ye===lf&&(Q=Q||new Float32Array(he))),y.isTypedArray(Q,"data buffer for regl.read() must be a typedarray"),y(Q.byteLength>=he,"data buffer for regl.read() too small"),c.pixelStorei(Mt,4),c.readPixels(Te,de,ve,B,_n,ye,Q),Q}function ce(xe){var ye;return g.setFBO({framebuffer:xe.framebuffer},function(){ye=fe(xe)}),ye}function ge(xe){return!xe||!("framebuffer"in xe)?fe(xe):ce(xe)}return ge}function ml(c){return Array.prototype.slice.call(c)}function hl(c){return ml(c).join("")}function q_(){var c=0,g=[],R=[];function X(ye){for(var Te=0;Te<R.length;++Te)if(R[Te]===ye)return g[Te];var de="g"+c++;return g.push(de),R.push(ye),de}function te(){var ye=[];function Te(){ye.push.apply(ye,ml(arguments))}var de=[];function ve(){var B="v"+c++;return de.push(B),arguments.length>0&&(ye.push(B,"="),ye.push.apply(ye,ml(arguments)),ye.push(";")),B}return r(Te,{def:ve,toString:function(){return hl([de.length>0?"var "+de.join(",")+";":"",hl(ye)])}})}function W(){var ye=te(),Te=te(),de=ye.toString,ve=Te.toString;function B(Q,he){Te(Q,he,"=",ye.def(Q,he),";")}return r(function(){ye.apply(ye,ml(arguments))},{def:ye.def,entry:ye,exit:Te,save:B,set:function(Q,he,Fe){B(Q,he),ye(Q,he,"=",Fe,";")},toString:function(){return de()+ve()}})}function K(){var ye=hl(arguments),Te=W(),de=W(),ve=Te.toString,B=de.toString;return r(Te,{then:function(){return Te.apply(Te,ml(arguments)),this},else:function(){return de.apply(de,ml(arguments)),this},toString:function(){var Q=B();return Q&&(Q="else{"+Q+"}"),hl(["if(",ye,"){",ve(),"}",Q])}})}var fe=te(),ce={};function ge(ye,Te){var de=[];function ve(){var se="a"+de.length;return de.push(se),se}Te=Te||0;for(var B=0;B<Te;++B)ve();var Q=W(),he=Q.toString,Fe=ce[ye]=r(Q,{arg:ve,toString:function(){return hl(["function(",de.join(),"){",he(),"}"])}});return Fe}function xe(){var ye=['"use strict";',fe,"return {"];Object.keys(ce).forEach(function(ve){ye.push('"',ve,'":',ce[ve].toString(),",")}),ye.push("}");var Te=hl(ye).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),de=Function.apply(null,g.concat(Te));return de.apply(null,R)}return{global:fe,link:X,block:te,proc:ge,scope:W,cond:K,compile:xe}}var pl="xyzw".split(""),eg=5121,vl=1,vh=2,gh=0,yh=1,xh=2,Eh=3,sf=4,tg=5,ng=6,rg="dither",ig="blend.enable",ag="blend.color",_h="blend.equation",Sh="blend.func",og="depth.enable",lg="depth.func",sg="depth.range",ug="depth.mask",wh="colorMask",cg="cull.enable",fg="cull.face",Th="frontFace",bh="lineWidth",dg="polygonOffset.enable",Ah="polygonOffset.offset",mg="sample.alpha",hg="sample.enable",Ch="sample.coverage",pg="stencil.enable",vg="stencil.mask",Lh="stencil.func",Rh="stencil.opFront",zs="stencil.opBack",gg="scissor.enable",uf="scissor.box",zi="viewport",Us="profile",uo="framebuffer",Vs="vert",Hs="frag",co="elements",fo="primitive",mo="count",cf="offset",ff="instances",Ws="vao",Oh="Width",Ph="Height",gl=uo+Oh,yl=uo+Ph,Z_=zi+Oh,J_=zi+Ph,yg="drawingBuffer",xg=yg+Oh,Eg=yg+Ph,eS=[Sh,_h,Lh,Rh,zs,Ch,zi,uf,Ah],xl=34962,Nh=34963,tS=35632,nS=35633,_g=3553,rS=34067,iS=2884,aS=3042,oS=3024,lS=2960,sS=2929,uS=3089,cS=32823,fS=32926,dS=32928,kh=5126,df=35664,mf=35665,hf=35666,Ih=5124,pf=35667,vf=35668,gf=35669,Dh=35670,yf=35671,xf=35672,Ef=35673,Xs=35674,Ys=35675,Qs=35676,Ks=35678,qs=35680,Mh=4,Zs=1028,ho=1029,Sg=2304,Fh=2305,mS=32775,hS=32776,pS=519,ga=7680,wg=0,Tg=1,bg=32774,vS=513,Ag=36160,gS=36064,xi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Cg=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],El={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ya={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Lg={frag:tS,vert:nS},jh={cw:Sg,ccw:Fh};function _f(c){return Array.isArray(c)||n(c)||dr(c)}function Rg(c){return c.sort(function(g,R){return g===zi?-1:R===zi?1:g<R?-1:1})}function kn(c,g,R,X){this.thisDep=c,this.contextDep=g,this.propDep=R,this.append=X}function xa(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function Sn(c){return new kn(!1,!1,!1,c)}function mr(c,g){var R=c.type;if(R===gh){var X=c.data.length;return new kn(!0,X>=1,X>=2,g)}else if(R===sf){var te=c.data;return new kn(te.thisDep,te.contextDep,te.propDep,g)}else{if(R===tg)return new kn(!1,!1,!1,g);if(R===ng){for(var W=!1,K=!1,fe=!1,ce=0;ce<c.data.length;++ce){var ge=c.data[ce];if(ge.type===yh)fe=!0;else if(ge.type===xh)K=!0;else if(ge.type===Eh)W=!0;else if(ge.type===gh){W=!0;var xe=ge.data;xe>=1&&(K=!0),xe>=2&&(fe=!0)}else ge.type===sf&&(W=W||ge.data.thisDep,K=K||ge.data.contextDep,fe=fe||ge.data.propDep)}return new kn(W,K,fe,g)}else return new kn(R===Eh,R===xh,R===yh,g)}}var Og=new kn(!1,!1,!1,function(){});function yS(c,g,R,X,te,W,K,fe,ce,ge,xe,ye,Te,de,ve){var B=ge.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};R.ext_blend_minmax&&(Q.min=mS,Q.max=hS);var he=R.angle_instanced_arrays,Fe=R.webgl_draw_buffers,se=R.oes_vertex_array_object,ke={dirty:!0,profile:ve.profile},Oe={},Je=[],re={},ee={};function Ue(E){return E.replace(".","_")}function Ae(E,m,P){var F=Ue(E);Je.push(E),Oe[F]=ke[F]=!!P,re[F]=m}function me(E,m,P){var F=Ue(E);Je.push(E),Array.isArray(P)?(ke[F]=P.slice(),Oe[F]=P.slice()):ke[F]=Oe[F]=P,ee[F]=m}Ae(rg,oS),Ae(ig,aS),me(ag,"blendColor",[0,0,0,0]),me(_h,"blendEquationSeparate",[bg,bg]),me(Sh,"blendFuncSeparate",[Tg,wg,Tg,wg]),Ae(og,sS,!0),me(lg,"depthFunc",vS),me(sg,"depthRange",[0,1]),me(ug,"depthMask",!0),me(wh,wh,[!0,!0,!0,!0]),Ae(cg,iS),me(fg,"cullFace",ho),me(Th,Th,Fh),me(bh,bh,1),Ae(dg,cS),me(Ah,"polygonOffset",[0,0]),Ae(mg,fS),Ae(hg,dS),me(Ch,"sampleCoverage",[1,!1]),Ae(pg,lS),me(vg,"stencilMask",-1),me(Lh,"stencilFunc",[pS,0,-1]),me(Rh,"stencilOpSeparate",[Zs,ga,ga,ga]),me(zs,"stencilOpSeparate",[ho,ga,ga,ga]),Ae(gg,uS),me(uf,"scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]),me(zi,zi,[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ce={gl:c,context:Te,strings:g,next:Oe,current:ke,draw:ye,elements:W,buffer:te,shader:xe,attributes:ge.state,vao:ge,uniforms:ce,framebuffer:fe,extensions:R,timer:de,isBufferArgs:_f},Re={primTypes:vi,compareFuncs:El,blendFuncs:xi,blendEquations:Q,stencilOps:ya,glTypes:ua,orientationType:jh};y.optional(function(){Ce.isArrayLike=Zt}),Fe&&(Re.backBuffer=[ho],Re.drawBuffer=ne(X.maxDrawbuffers,function(E){return E===0?[0]:ne(E,function(m){return gS+m})}));var ct=0;function ot(){var E=q_(),m=E.link,P=E.global;E.id=ct++,E.batchId="0";var F=m(Ce),$=E.shared={props:"a0"};Object.keys(Ce).forEach(function(A){$[A]=P.def(F,".",A)}),y.optional(function(){E.CHECK=m(y),E.commandStr=y.guessCommand(),E.command=m(E.commandStr),E.assert=function(A,S,U){A("if(!(",S,"))",this.CHECK,".commandRaise(",m(U),",",this.command,");")},Re.invalidBlendCombinations=Cg});var k=E.next={},N=E.current={};Object.keys(ee).forEach(function(A){Array.isArray(ke[A])&&(k[A]=P.def($.next,".",A),N[A]=P.def($.current,".",A))});var M=E.constants={};Object.keys(Re).forEach(function(A){M[A]=P.def(JSON.stringify(Re[A]))}),E.invoke=function(A,S){switch(S.type){case gh:var U=["this",$.context,$.props,E.batchId];return A.def(m(S.data),".call(",U.slice(0,Math.max(S.data.length+1,4)),")");case yh:return A.def($.props,S.data);case xh:return A.def($.context,S.data);case Eh:return A.def("this",S.data);case sf:return S.data.append(E,A),S.data.ref;case tg:return S.data.toString();case ng:return S.data.map(function(G){return E.invoke(A,G)})}},E.attribCache={};var _={};return E.scopeAttrib=function(A){var S=g.id(A);if(S in _)return _[S];var U=ge.scope[S];U||(U=ge.scope[S]=new B);var G=_[S]=m(U);return G},E}function Pe(E){var m=E.static,P=E.dynamic,F;if(Us in m){var $=!!m[Us];F=Sn(function(N,M){return $}),F.enable=$}else if(Us in P){var k=P[Us];F=mr(k,function(N,M){return N.invoke(M,k)})}return F}function Me(E,m){var P=E.static,F=E.dynamic;if(uo in P){var $=P[uo];return $?($=fe.getFramebuffer($),y.command($,"invalid framebuffer object"),Sn(function(N,M){var _=N.link($),A=N.shared;M.set(A.framebuffer,".next",_);var S=A.context;return M.set(S,"."+gl,_+".width"),M.set(S,"."+yl,_+".height"),_})):Sn(function(N,M){var _=N.shared;M.set(_.framebuffer,".next","null");var A=_.context;return M.set(A,"."+gl,A+"."+xg),M.set(A,"."+yl,A+"."+Eg),"null"})}else if(uo in F){var k=F[uo];return mr(k,function(N,M){var _=N.invoke(M,k),A=N.shared,S=A.framebuffer,U=M.def(S,".getFramebuffer(",_,")");y.optional(function(){N.assert(M,"!"+_+"||"+U,"invalid framebuffer object")}),M.set(S,".next",U);var G=A.context;return M.set(G,"."+gl,U+"?"+U+".width:"+G+"."+xg),M.set(G,"."+yl,U+"?"+U+".height:"+G+"."+Eg),U})}else return null}function nt(E,m,P){var F=E.static,$=E.dynamic;function k(_){if(_ in F){var A=F[_];y.commandType(A,"object","invalid "+_,P.commandStr);var S=!0,U=A.x|0,G=A.y|0,J,ie;return"width"in A?(J=A.width|0,y.command(J>=0,"invalid "+_,P.commandStr)):S=!1,"height"in A?(ie=A.height|0,y.command(ie>=0,"invalid "+_,P.commandStr)):S=!1,new kn(!S&&m&&m.thisDep,!S&&m&&m.contextDep,!S&&m&&m.propDep,function(Ze,Be){var le=Ze.shared.context,Z=J;"width"in A||(Z=Be.def(le,".",gl,"-",U));var Qe=ie;return"height"in A||(Qe=Be.def(le,".",yl,"-",G)),[U,G,Z,Qe]})}else if(_ in $){var _e=$[_],it=mr(_e,function(Ze,Be){var le=Ze.invoke(Be,_e);y.optional(function(){Ze.assert(Be,le+"&&typeof "+le+'==="object"',"invalid "+_)});var Z=Ze.shared.context,Qe=Be.def(le,".x|0"),He=Be.def(le,".y|0"),rt=Be.def('"width" in ',le,"?",le,".width|0:","(",Z,".",gl,"-",Qe,")"),zt=Be.def('"height" in ',le,"?",le,".height|0:","(",Z,".",yl,"-",He,")");return y.optional(function(){Ze.assert(Be,rt+">=0&&"+zt+">=0","invalid "+_)}),[Qe,He,rt,zt]});return m&&(it.thisDep=it.thisDep||m.thisDep,it.contextDep=it.contextDep||m.contextDep,it.propDep=it.propDep||m.propDep),it}else return m?new kn(m.thisDep,m.contextDep,m.propDep,function(Ze,Be){var le=Ze.shared.context;return[0,0,Be.def(le,".",gl),Be.def(le,".",yl)]}):null}var N=k(zi);if(N){var M=N;N=new kn(N.thisDep,N.contextDep,N.propDep,function(_,A){var S=M.append(_,A),U=_.shared.context;return A.set(U,"."+Z_,S[2]),A.set(U,"."+J_,S[3]),S})}return{viewport:N,scissor_box:k(uf)}}function ft(E,m){var P=E.static,F=typeof P[Hs]=="string"&&typeof P[Vs]=="string";if(F){if(Object.keys(m.dynamic).length>0)return null;var $=m.static,k=Object.keys($);if(k.length>0&&typeof $[k[0]]=="number"){for(var N=[],M=0;M<k.length;++M)y(typeof $[k[M]]=="number","must specify all vertex attribute locations when using vaos"),N.push([$[k[M]]|0,k[M]]);return N}}return null}function bt(E,m,P){var F=E.static,$=E.dynamic;function k(S){if(S in F){var U=g.id(F[S]);y.optional(function(){xe.shader(Lg[S],U,y.guessCommand())});var G=Sn(function(){return U});return G.id=U,G}else if(S in $){var J=$[S];return mr(J,function(ie,_e){var it=ie.invoke(_e,J),Ze=_e.def(ie.shared.strings,".id(",it,")");return y.optional(function(){_e(ie.shared.shader,".shader(",Lg[S],",",Ze,",",ie.command,");")}),Ze})}return null}var N=k(Hs),M=k(Vs),_=null,A;return xa(N)&&xa(M)?(_=xe.program(M.id,N.id,null,P),A=Sn(function(S,U){return S.link(_)})):A=new kn(N&&N.thisDep||M&&M.thisDep,N&&N.contextDep||M&&M.contextDep,N&&N.propDep||M&&M.propDep,function(S,U){var G=S.shared.shader,J;N?J=N.append(S,U):J=U.def(G,".",Hs);var ie;M?ie=M.append(S,U):ie=U.def(G,".",Vs);var _e=G+".program("+ie+","+J;return y.optional(function(){_e+=","+S.command}),U.def(_e+")")}),{frag:N,vert:M,progVar:A,program:_}}function rn(E,m){var P=E.static,F=E.dynamic,$={},k=!1;function N(){if(Ws in P){var Be=P[Ws];return Be!==null&&ge.getVAO(Be)===null&&(Be=ge.createVAO(Be)),k=!0,$.vao=Be,Sn(function(Z){var Qe=ge.getVAO(Be);return Qe?Z.link(Qe):"null"})}else if(Ws in F){k=!0;var le=F[Ws];return mr(le,function(Z,Qe){var He=Z.invoke(Qe,le);return Qe.def(Z.shared.vao+".getVAO("+He+")")})}return null}var M=N(),_=!1;function A(){if(co in P){var Be=P[co];if($.elements=Be,_f(Be)){var le=$.elements=W.create(Be,!0);Be=W.getElements(le),_=!0}else Be&&(Be=W.getElements(Be),_=!0,y.command(Be,"invalid elements",m.commandStr));var Z=Sn(function(He,rt){if(Be){var zt=He.link(Be);return He.ELEMENTS=zt,zt}return He.ELEMENTS=null,null});return Z.value=Be,Z}else if(co in F){_=!0;var Qe=F[co];return mr(Qe,function(He,rt){var zt=He.shared,Un=zt.isBufferArgs,vo=zt.elements,Ui=He.invoke(rt,Qe),_i=rt.def("null"),Ea=rt.def(Un,"(",Ui,")"),go=He.cond(Ea).then(_i,"=",vo,".createStream(",Ui,");").else(_i,"=",vo,".getElements(",Ui,");");return y.optional(function(){He.assert(go.else,"!"+Ui+"||"+_i,"invalid elements")}),rt.entry(go),rt.exit(He.cond(Ea).then(vo,".destroyStream(",_i,");")),He.ELEMENTS=_i,_i})}else if(k)return new kn(M.thisDep,M.contextDep,M.propDep,function(He,rt){return rt.def(He.shared.vao+".currentVAO?"+He.shared.elements+".getElements("+He.shared.vao+".currentVAO.elements):null")});return null}var S=A();function U(){if(fo in P){var Be=P[fo];return $.primitive=Be,y.commandParameter(Be,vi,"invalid primitve",m.commandStr),Sn(function(Z,Qe){return vi[Be]})}else if(fo in F){var le=F[fo];return mr(le,function(Z,Qe){var He=Z.constants.primTypes,rt=Z.invoke(Qe,le);return y.optional(function(){Z.assert(Qe,rt+" in "+He,"invalid primitive, must be one of "+Object.keys(vi))}),Qe.def(He,"[",rt,"]")})}else{if(_)return xa(S)?S.value?Sn(function(Z,Qe){return Qe.def(Z.ELEMENTS,".primType")}):Sn(function(){return Mh}):new kn(S.thisDep,S.contextDep,S.propDep,function(Z,Qe){var He=Z.ELEMENTS;return Qe.def(He,"?",He,".primType:",Mh)});if(k)return new kn(M.thisDep,M.contextDep,M.propDep,function(Z,Qe){return Qe.def(Z.shared.vao+".currentVAO?"+Z.shared.vao+".currentVAO.primitive:"+Mh)})}return null}function G(Be,le){if(Be in P){var Z=P[Be]|0;return le?$.offset=Z:$.instances=Z,y.command(!le||Z>=0,"invalid "+Be,m.commandStr),Sn(function(He,rt){return le&&(He.OFFSET=Z),Z})}else if(Be in F){var Qe=F[Be];return mr(Qe,function(He,rt){var zt=He.invoke(rt,Qe);return le&&(He.OFFSET=zt,y.optional(function(){He.assert(rt,zt+">=0","invalid "+Be)})),zt})}else if(le){if(_)return Sn(function(He,rt){return He.OFFSET=0,0});if(k)return new kn(M.thisDep,M.contextDep,M.propDep,function(He,rt){return rt.def(He.shared.vao+".currentVAO?"+He.shared.vao+".currentVAO.offset:0")})}else if(k)return new kn(M.thisDep,M.contextDep,M.propDep,function(He,rt){return rt.def(He.shared.vao+".currentVAO?"+He.shared.vao+".currentVAO.instances:-1")});return null}var J=G(cf,!0);function ie(){if(mo in P){var Be=P[mo]|0;return $.count=Be,y.command(typeof Be=="number"&&Be>=0,"invalid vertex count",m.commandStr),Sn(function(){return Be})}else if(mo in F){var le=F[mo];return mr(le,function(rt,zt){var Un=rt.invoke(zt,le);return y.optional(function(){rt.assert(zt,"typeof "+Un+'==="number"&&'+Un+">=0&&"+Un+"===("+Un+"|0)","invalid vertex count")}),Un})}else if(_)if(xa(S)){if(S)return J?new kn(J.thisDep,J.contextDep,J.propDep,function(rt,zt){var Un=zt.def(rt.ELEMENTS,".vertCount-",rt.OFFSET);return y.optional(function(){rt.assert(zt,Un+">=0","invalid vertex offset/element buffer too small")}),Un}):Sn(function(rt,zt){return zt.def(rt.ELEMENTS,".vertCount")});var Z=Sn(function(){return-1});return y.optional(function(){Z.MISSING=!0}),Z}else{var Qe=new kn(S.thisDep||J.thisDep,S.contextDep||J.contextDep,S.propDep||J.propDep,function(rt,zt){var Un=rt.ELEMENTS;return rt.OFFSET?zt.def(Un,"?",Un,".vertCount-",rt.OFFSET,":-1"):zt.def(Un,"?",Un,".vertCount:-1")});return y.optional(function(){Qe.DYNAMIC=!0}),Qe}else if(k){var He=new kn(M.thisDep,M.contextDep,M.propDep,function(rt,zt){return zt.def(rt.shared.vao,".currentVAO?",rt.shared.vao,".currentVAO.count:-1")});return He}return null}var _e=U(),it=ie(),Ze=G(ff,!1);return{elements:S,primitive:_e,count:it,instances:Ze,offset:J,vao:M,vaoActive:k,elementsActive:_,static:$}}function ln(E,m){var P=E.static,F=E.dynamic,$={};return Je.forEach(function(k){var N=Ue(k);function M(_,A){if(k in P){var S=_(P[k]);$[N]=Sn(function(){return S})}else if(k in F){var U=F[k];$[N]=mr(U,function(G,J){return A(G,J,G.invoke(J,U))})}}switch(k){case cg:case ig:case rg:case pg:case og:case gg:case dg:case mg:case hg:case ug:return M(function(_){return y.commandType(_,"boolean",k,m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="boolean"',"invalid flag "+k,_.commandStr)}),S});case lg:return M(function(_){return y.commandParameter(_,El,"invalid "+k,m.commandStr),El[_]},function(_,A,S){var U=_.constants.compareFuncs;return y.optional(function(){_.assert(A,S+" in "+U,"invalid "+k+", must be one of "+Object.keys(El))}),A.def(U,"[",S,"]")});case sg:return M(function(_){return y.command(Zt(_)&&_.length===2&&typeof _[0]=="number"&&typeof _[1]=="number"&&_[0]<=_[1],"depth range is 2d array",m.commandStr),_},function(_,A,S){y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===2&&typeof "+S+'[0]==="number"&&typeof '+S+'[1]==="number"&&'+S+"[0]<="+S+"[1]","depth range must be a 2d array")});var U=A.def("+",S,"[0]"),G=A.def("+",S,"[1]");return[U,G]});case Sh:return M(function(_){y.commandType(_,"object","blend.func",m.commandStr);var A="srcRGB"in _?_.srcRGB:_.src,S="srcAlpha"in _?_.srcAlpha:_.src,U="dstRGB"in _?_.dstRGB:_.dst,G="dstAlpha"in _?_.dstAlpha:_.dst;return y.commandParameter(A,xi,N+".srcRGB",m.commandStr),y.commandParameter(S,xi,N+".srcAlpha",m.commandStr),y.commandParameter(U,xi,N+".dstRGB",m.commandStr),y.commandParameter(G,xi,N+".dstAlpha",m.commandStr),y.command(Cg.indexOf(A+", "+U)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+A+", "+U+")",m.commandStr),[xi[A],xi[U],xi[S],xi[G]]},function(_,A,S){var U=_.constants.blendFuncs;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid blend func, must be an object")});function G(le,Z){var Qe=A.def('"',le,Z,'" in ',S,"?",S,".",le,Z,":",S,".",le);return y.optional(function(){_.assert(A,Qe+" in "+U,"invalid "+k+"."+le+Z+", must be one of "+Object.keys(xi))}),Qe}var J=G("src","RGB"),ie=G("dst","RGB");y.optional(function(){var le=_.constants.invalidBlendCombinations;_.assert(A,le+".indexOf("+J+'+", "+'+ie+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var _e=A.def(U,"[",J,"]"),it=A.def(U,"[",G("src","Alpha"),"]"),Ze=A.def(U,"[",ie,"]"),Be=A.def(U,"[",G("dst","Alpha"),"]");return[_e,Ze,it,Be]});case _h:return M(function(_){if(typeof _=="string")return y.commandParameter(_,Q,"invalid "+k,m.commandStr),[Q[_],Q[_]];if(typeof _=="object")return y.commandParameter(_.rgb,Q,k+".rgb",m.commandStr),y.commandParameter(_.alpha,Q,k+".alpha",m.commandStr),[Q[_.rgb],Q[_.alpha]];y.commandRaise("invalid blend.equation",m.commandStr)},function(_,A,S){var U=_.constants.blendEquations,G=A.def(),J=A.def(),ie=_.cond("typeof ",S,'==="string"');return y.optional(function(){function _e(it,Ze,Be){_.assert(it,Be+" in "+U,"invalid "+Ze+", must be one of "+Object.keys(Q))}_e(ie.then,k,S),_.assert(ie.else,S+"&&typeof "+S+'==="object"',"invalid "+k),_e(ie.else,k+".rgb",S+".rgb"),_e(ie.else,k+".alpha",S+".alpha")}),ie.then(G,"=",J,"=",U,"[",S,"];"),ie.else(G,"=",U,"[",S,".rgb];",J,"=",U,"[",S,".alpha];"),A(ie),[G,J]});case ag:return M(function(_){return y.command(Zt(_)&&_.length===4,"blend.color must be a 4d array",m.commandStr),ne(4,function(A){return+_[A]})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","blend.color must be a 4d array")}),ne(4,function(U){return A.def("+",S,"[",U,"]")})});case vg:return M(function(_){return y.commandType(_,"number",N,m.commandStr),_|0},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"',"invalid stencil.mask")}),A.def(S,"|0")});case Lh:return M(function(_){y.commandType(_,"object",N,m.commandStr);var A=_.cmp||"keep",S=_.ref||0,U="mask"in _?_.mask:-1;return y.commandParameter(A,El,k+".cmp",m.commandStr),y.commandType(S,"number",k+".ref",m.commandStr),y.commandType(U,"number",k+".mask",m.commandStr),[El[A],S,U]},function(_,A,S){var U=_.constants.compareFuncs;y.optional(function(){function _e(){_.assert(A,Array.prototype.join.call(arguments,""),"invalid stencil.func")}_e(S+"&&typeof ",S,'==="object"'),_e('!("cmp" in ',S,")||(",S,".cmp in ",U,")")});var G=A.def('"cmp" in ',S,"?",U,"[",S,".cmp]",":",ga),J=A.def(S,".ref|0"),ie=A.def('"mask" in ',S,"?",S,".mask|0:-1");return[G,J,ie]});case Rh:case zs:return M(function(_){y.commandType(_,"object",N,m.commandStr);var A=_.fail||"keep",S=_.zfail||"keep",U=_.zpass||"keep";return y.commandParameter(A,ya,k+".fail",m.commandStr),y.commandParameter(S,ya,k+".zfail",m.commandStr),y.commandParameter(U,ya,k+".zpass",m.commandStr),[k===zs?ho:Zs,ya[A],ya[S],ya[U]]},function(_,A,S){var U=_.constants.stencilOps;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+k)});function G(J){return y.optional(function(){_.assert(A,'!("'+J+'" in '+S+")||("+S+"."+J+" in "+U+")","invalid "+k+"."+J+", must be one of "+Object.keys(ya))}),A.def('"',J,'" in ',S,"?",U,"[",S,".",J,"]:",ga)}return[k===zs?ho:Zs,G("fail"),G("zfail"),G("zpass")]});case Ah:return M(function(_){y.commandType(_,"object",N,m.commandStr);var A=_.factor|0,S=_.units|0;return y.commandType(A,"number",N+".factor",m.commandStr),y.commandType(S,"number",N+".units",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+k)});var U=A.def(S,".factor|0"),G=A.def(S,".units|0");return[U,G]});case fg:return M(function(_){var A=0;return _==="front"?A=Zs:_==="back"&&(A=ho),y.command(!!A,N,m.commandStr),A},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="front"||'+S+'==="back"',"invalid cull.face")}),A.def(S,'==="front"?',Zs,":",ho)});case bh:return M(function(_){return y.command(typeof _=="number"&&_>=X.lineWidthDims[0]&&_<=X.lineWidthDims[1],"invalid line width, must be a positive number between "+X.lineWidthDims[0]+" and "+X.lineWidthDims[1],m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"&&'+S+">="+X.lineWidthDims[0]+"&&"+S+"<="+X.lineWidthDims[1],"invalid line width")}),S});case Th:return M(function(_){return y.commandParameter(_,jh,N,m.commandStr),jh[_]},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="cw"||'+S+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),A.def(S+'==="cw"?'+Sg+":"+Fh)});case wh:return M(function(_){return y.command(Zt(_)&&_.length===4,"color.mask must be length 4 array",m.commandStr),_.map(function(A){return!!A})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","invalid color.mask")}),ne(4,function(U){return"!!"+S+"["+U+"]"})});case Ch:return M(function(_){y.command(typeof _=="object"&&_,N,m.commandStr);var A="value"in _?_.value:1,S=!!_.invert;return y.command(typeof A=="number"&&A>=0&&A<=1,"sample.coverage.value must be a number between 0 and 1",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid sample.coverage")});var U=A.def('"value" in ',S,"?+",S,".value:1"),G=A.def("!!",S,".invert");return[U,G]})}}),$}function Rt(E,m){var P=E.static,F=E.dynamic,$={};return Object.keys(P).forEach(function(k){var N=P[k],M;if(typeof N=="number"||typeof N=="boolean")M=Sn(function(){return N});else if(typeof N=="function"){var _=N._reglType;_==="texture2d"||_==="textureCube"?M=Sn(function(A){return A.link(N)}):_==="framebuffer"||_==="framebufferCube"?(y.command(N.color.length>0,'missing color attachment for framebuffer sent to uniform "'+k+'"',m.commandStr),M=Sn(function(A){return A.link(N.color[0])})):y.commandRaise('invalid data for uniform "'+k+'"',m.commandStr)}else Zt(N)?M=Sn(function(A){var S=A.global.def("[",ne(N.length,function(U){return y.command(typeof N[U]=="number"||typeof N[U]=="boolean","invalid uniform "+k,A.commandStr),N[U]}),"]");return S}):y.commandRaise('invalid or missing data for uniform "'+k+'"',m.commandStr);M.value=N,$[k]=M}),Object.keys(F).forEach(function(k){var N=F[k];$[k]=mr(N,function(M,_){return M.invoke(_,N)})}),$}function Ln(E,m){var P=E.static,F=E.dynamic,$={};return Object.keys(P).forEach(function(k){var N=P[k],M=g.id(k),_=new B;if(_f(N))_.state=vl,_.buffer=te.getBuffer(te.create(N,xl,!1,!0)),_.type=0;else{var A=te.getBuffer(N);if(A)_.state=vl,_.buffer=A,_.type=0;else if(y.command(typeof N=="object"&&N,"invalid data for attribute "+k,m.commandStr),"constant"in N){var S=N.constant;_.buffer="null",_.state=vh,typeof S=="number"?_.x=S:(y.command(Zt(S)&&S.length>0&&S.length<=4,"invalid constant for attribute "+k,m.commandStr),pl.forEach(function(Ze,Be){Be<S.length&&(_[Ze]=S[Be])}))}else{_f(N.buffer)?A=te.getBuffer(te.create(N.buffer,xl,!1,!0)):A=te.getBuffer(N.buffer),y.command(!!A,'missing buffer for attribute "'+k+'"',m.commandStr);var U=N.offset|0;y.command(U>=0,'invalid offset for attribute "'+k+'"',m.commandStr);var G=N.stride|0;y.command(G>=0&&G<256,'invalid stride for attribute "'+k+'", must be integer betweeen [0, 255]',m.commandStr);var J=N.size|0;y.command(!("size"in N)||J>0&&J<=4,'invalid size for attribute "'+k+'", must be 1,2,3,4',m.commandStr);var ie=!!N.normalized,_e=0;"type"in N&&(y.commandParameter(N.type,ua,"invalid type for attribute "+k,m.commandStr),_e=ua[N.type]);var it=N.divisor|0;y.optional(function(){"divisor"in N&&(y.command(it===0||he,'cannot specify divisor for attribute "'+k+'", instancing not supported',m.commandStr),y.command(it>=0,'invalid divisor for attribute "'+k+'"',m.commandStr));var Ze=m.commandStr,Be=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(N).forEach(function(le){y.command(Be.indexOf(le)>=0,'unknown parameter "'+le+'" for attribute pointer "'+k+'" (valid parameters are '+Be+")",Ze)})}),_.buffer=A,_.state=vl,_.size=J,_.normalized=ie,_.type=_e||A.dtype,_.offset=U,_.stride=G,_.divisor=it}}$[k]=Sn(function(Ze,Be){var le=Ze.attribCache;if(M in le)return le[M];var Z={isStream:!1};return Object.keys(_).forEach(function(Qe){Z[Qe]=_[Qe]}),_.buffer&&(Z.buffer=Ze.link(_.buffer),Z.type=Z.type||Z.buffer+".dtype"),le[M]=Z,Z})}),Object.keys(F).forEach(function(k){var N=F[k];function M(_,A){var S=_.invoke(A,N),U=_.shared,G=_.constants,J=U.isBufferArgs,ie=U.buffer;y.optional(function(){_.assert(A,S+"&&(typeof "+S+'==="object"||typeof '+S+'==="function")&&('+J+"("+S+")||"+ie+".getBuffer("+S+")||"+ie+".getBuffer("+S+".buffer)||"+J+"("+S+'.buffer)||("constant" in '+S+"&&(typeof "+S+'.constant==="number"||'+U.isArrayLike+"("+S+".constant))))",'invalid dynamic attribute "'+k+'"')});var _e={isStream:A.def(!1)},it=new B;it.state=vl,Object.keys(it).forEach(function(Z){_e[Z]=A.def(""+it[Z])});var Ze=_e.buffer,Be=_e.type;A("if(",J,"(",S,")){",_e.isStream,"=true;",Ze,"=",ie,".createStream(",xl,",",S,");",Be,"=",Ze,".dtype;","}else{",Ze,"=",ie,".getBuffer(",S,");","if(",Ze,"){",Be,"=",Ze,".dtype;",'}else if("constant" in ',S,"){",_e.state,"=",vh,";","if(typeof "+S+'.constant === "number"){',_e[pl[0]],"=",S,".constant;",pl.slice(1).map(function(Z){return _e[Z]}).join("="),"=0;","}else{",pl.map(function(Z,Qe){return _e[Z]+"="+S+".constant.length>"+Qe+"?"+S+".constant["+Qe+"]:0;"}).join(""),"}}else{","if(",J,"(",S,".buffer)){",Ze,"=",ie,".createStream(",xl,",",S,".buffer);","}else{",Ze,"=",ie,".getBuffer(",S,".buffer);","}",Be,'="type" in ',S,"?",G.glTypes,"[",S,".type]:",Ze,".dtype;",_e.normalized,"=!!",S,".normalized;");function le(Z){A(_e[Z],"=",S,".",Z,"|0;")}return le("size"),le("offset"),le("stride"),le("divisor"),A("}}"),A.exit("if(",_e.isStream,"){",ie,".destroyStream(",Ze,");","}"),_e}$[k]=mr(N,M)}),$}function Jt(E){var m=E.static,P=E.dynamic,F={};return Object.keys(m).forEach(function($){var k=m[$];F[$]=Sn(function(N,M){return typeof k=="number"||typeof k=="boolean"?""+k:N.link(k)})}),Object.keys(P).forEach(function($){var k=P[$];F[$]=mr(k,function(N,M){return N.invoke(M,k)})}),F}function wn(E,m,P,F,$){var k=E.static,N=E.dynamic;y.optional(function(){var le=[uo,Vs,Hs,co,fo,cf,mo,ff,Us,Ws].concat(Je);function Z(Qe){Object.keys(Qe).forEach(function(He){y.command(le.indexOf(He)>=0,'unknown parameter "'+He+'"',$.commandStr)})}Z(k),Z(N)});var M=ft(E,m),_=Me(E),A=nt(E,_,$),S=rn(E,$),U=ln(E,$),G=bt(E,$,M);function J(le){var Z=A[le];Z&&(U[le]=Z)}J(zi),J(Ue(uf));var ie=Object.keys(U).length>0,_e={framebuffer:_,draw:S,shader:G,state:U,dirty:ie,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(_e.profile=Pe(E),_e.uniforms=Rt(P,$),_e.drawVAO=_e.scopeVAO=S.vao,!_e.drawVAO&&G.program&&!M&&R.angle_instanced_arrays&&S.static.elements){var it=!0,Ze=G.program.attributes.map(function(le){var Z=m.static[le];return it=it&&!!Z,Z});if(it&&Ze.length>0){var Be=ge.getVAO(ge.createVAO({attributes:Ze,elements:S.static.elements}));_e.drawVAO=new kn(null,null,null,function(le,Z){return le.link(Be)}),_e.useVAO=!0}}return M?_e.useVAO=!0:_e.attributes=Ln(m,$),_e.context=Jt(F),_e}function Rn(E,m,P){var F=E.shared,$=F.context,k=E.scope();Object.keys(P).forEach(function(N){m.save($,"."+N);var M=P[N],_=M.append(E,m);Array.isArray(_)?k($,".",N,"=[",_.join(),"];"):k($,".",N,"=",_,";")}),m(k)}function On(E,m,P,F){var $=E.shared,k=$.gl,N=$.framebuffer,M;Fe&&(M=m.def($.extensions,".webgl_draw_buffers"));var _=E.constants,A=_.drawBuffer,S=_.backBuffer,U;P?U=P.append(E,m):U=m.def(N,".next"),F||m("if(",U,"!==",N,".cur){"),m("if(",U,"){",k,".bindFramebuffer(",Ag,",",U,".framebuffer);"),Fe&&m(M,".drawBuffersWEBGL(",A,"[",U,".colorAttachments.length]);"),m("}else{",k,".bindFramebuffer(",Ag,",null);"),Fe&&m(M,".drawBuffersWEBGL(",S,");"),m("}",N,".cur=",U,";"),F||m("}")}function Fn(E,m,P){var F=E.shared,$=F.gl,k=E.current,N=E.next,M=F.current,_=F.next,A=E.cond(M,".dirty");Je.forEach(function(S){var U=Ue(S);if(!(U in P.state)){var G,J;if(U in N){G=N[U],J=k[U];var ie=ne(ke[U].length,function(it){return A.def(G,"[",it,"]")});A(E.cond(ie.map(function(it,Ze){return it+"!=="+J+"["+Ze+"]"}).join("||")).then($,".",ee[U],"(",ie,");",ie.map(function(it,Ze){return J+"["+Ze+"]="+it}).join(";"),";"))}else{G=A.def(_,".",U);var _e=E.cond(G,"!==",M,".",U);A(_e),U in re?_e(E.cond(G).then($,".enable(",re[U],");").else($,".disable(",re[U],");"),M,".",U,"=",G,";"):_e($,".",ee[U],"(",G,");",M,".",U,"=",G,";")}}}),Object.keys(P.state).length===0&&A(M,".dirty=false;"),m(A)}function Gn(E,m,P,F){var $=E.shared,k=E.current,N=$.current,M=$.gl;Rg(Object.keys(P)).forEach(function(_){var A=P[_];if(!(F&&!F(A))){var S=A.append(E,m);if(re[_]){var U=re[_];xa(A)?S?m(M,".enable(",U,");"):m(M,".disable(",U,");"):m(E.cond(S).then(M,".enable(",U,");").else(M,".disable(",U,");")),m(N,".",_,"=",S,";")}else if(Zt(S)){var G=k[_];m(M,".",ee[_],"(",S,");",S.map(function(J,ie){return G+"["+ie+"]="+J}).join(";"),";")}else m(M,".",ee[_],"(",S,");",N,".",_,"=",S,";")}})}function hn(E,m){he&&(E.instancing=m.def(E.shared.extensions,".angle_instanced_arrays"))}function vt(E,m,P,F,$){var k=E.shared,N=E.stats,M=k.current,_=k.timer,A=P.profile;function S(){return typeof performance>"u"?"Date.now()":"performance.now()"}var U,G;function J(le){U=m.def(),le(U,"=",S(),";"),typeof $=="string"?le(N,".count+=",$,";"):le(N,".count++;"),de&&(F?(G=m.def(),le(G,"=",_,".getNumPendingQueries();")):le(_,".beginQuery(",N,");"))}function ie(le){le(N,".cpuTime+=",S(),"-",U,";"),de&&(F?le(_,".pushScopeStats(",G,",",_,".getNumPendingQueries(),",N,");"):le(_,".endQuery();"))}function _e(le){var Z=m.def(M,".profile");m(M,".profile=",le,";"),m.exit(M,".profile=",Z,";")}var it;if(A){if(xa(A)){A.enable?(J(m),ie(m.exit),_e("true")):_e("false");return}it=A.append(E,m),_e(it)}else it=m.def(M,".profile");var Ze=E.block();J(Ze),m("if(",it,"){",Ze,"}");var Be=E.block();ie(Be),m.exit("if(",it,"){",Be,"}")}function zn(E,m,P,F,$){var k=E.shared;function N(_){switch(_){case df:case pf:case yf:return 2;case mf:case vf:case xf:return 3;case hf:case gf:case Ef:return 4;default:return 1}}function M(_,A,S){var U=k.gl,G=m.def(_,".location"),J=m.def(k.attributes,"[",G,"]"),ie=S.state,_e=S.buffer,it=[S.x,S.y,S.z,S.w],Ze=["buffer","normalized","offset","stride"];function Be(){m("if(!",J,".buffer){",U,".enableVertexAttribArray(",G,");}");var Z=S.type,Qe;if(S.size?Qe=m.def(S.size,"||",A):Qe=A,m("if(",J,".type!==",Z,"||",J,".size!==",Qe,"||",Ze.map(function(rt){return J+"."+rt+"!=="+S[rt]}).join("||"),"){",U,".bindBuffer(",xl,",",_e,".buffer);",U,".vertexAttribPointer(",[G,Qe,Z,S.normalized,S.stride,S.offset],");",J,".type=",Z,";",J,".size=",Qe,";",Ze.map(function(rt){return J+"."+rt+"="+S[rt]+";"}).join(""),"}"),he){var He=S.divisor;m("if(",J,".divisor!==",He,"){",E.instancing,".vertexAttribDivisorANGLE(",[G,He],");",J,".divisor=",He,";}")}}function le(){m("if(",J,".buffer){",U,".disableVertexAttribArray(",G,");",J,".buffer=null;","}if(",pl.map(function(Z,Qe){return J+"."+Z+"!=="+it[Qe]}).join("||"),"){",U,".vertexAttrib4f(",G,",",it,");",pl.map(function(Z,Qe){return J+"."+Z+"="+it[Qe]+";"}).join(""),"}")}ie===vl?Be():ie===vh?le():(m("if(",ie,"===",vl,"){"),Be(),m("}else{"),le(),m("}"))}F.forEach(function(_){var A=_.name,S=P.attributes[A],U;if(S){if(!$(S))return;U=S.append(E,m)}else{if(!$(Og))return;var G=E.scopeAttrib(A);y.optional(function(){E.assert(m,G+".state","missing attribute "+A)}),U={},Object.keys(new B).forEach(function(J){U[J]=m.def(G,".",J)})}M(E.link(_),N(_.info.type),U)})}function $t(E,m,P,F,$,k){for(var N=E.shared,M=N.gl,_={},A,S=0;S<F.length;++S){var U=F[S],G=U.name,J=U.info.type,ie=U.info.size,_e=P.uniforms[G];if(ie>1){if(!_e)continue;var it=G.replace("[0]","");if(_[it])continue;_[it]=1}var Ze=E.link(U),Be=Ze+".location",le;if(_e){if(!$(_e))continue;if(xa(_e)){var Z=_e.value;if(y.command(Z!==null&&typeof Z<"u",'missing uniform "'+G+'"',E.commandStr),J===Ks||J===qs){y.command(typeof Z=="function"&&(J===Ks&&(Z._reglType==="texture2d"||Z._reglType==="framebuffer")||J===qs&&(Z._reglType==="textureCube"||Z._reglType==="framebufferCube")),"invalid texture for uniform "+G,E.commandStr);var Qe=E.link(Z._texture||Z.color[0]._texture);m(M,".uniform1i(",Be,",",Qe+".bind());"),m.exit(Qe,".unbind();")}else if(J===Xs||J===Ys||J===Qs){y.optional(function(){y.command(Zt(Z),"invalid matrix for uniform "+G,E.commandStr),y.command(J===Xs&&Z.length===4||J===Ys&&Z.length===9||J===Qs&&Z.length===16,"invalid length for matrix uniform "+G,E.commandStr)});var He=E.global.def("new Float32Array(["+Array.prototype.slice.call(Z)+"])"),rt=2;J===Ys?rt=3:J===Qs&&(rt=4),m(M,".uniformMatrix",rt,"fv(",Be,",false,",He,");")}else{switch(J){case kh:ie===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===ie,"uniform "+G,E.commandStr),A="1f";break;case df:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=ie*2,"uniform "+G,E.commandStr),A="2f";break;case mf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=ie*3,"uniform "+G,E.commandStr),A="3f";break;case hf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=ie*4,"uniform "+G,E.commandStr),A="4f";break;case Dh:ie===1?y.commandType(Z,"boolean","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===ie,"uniform "+G,E.commandStr),A="1i";break;case Ih:ie===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===ie,"uniform "+G,E.commandStr),A="1i";break;case yf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=ie*2,"uniform "+G,E.commandStr),A="2i";break;case pf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=ie*2,"uniform "+G,E.commandStr),A="2i";break;case xf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=ie*3,"uniform "+G,E.commandStr),A="3i";break;case vf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=ie*3,"uniform "+G,E.commandStr),A="3i";break;case Ef:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=ie*4,"uniform "+G,E.commandStr),A="4i";break;case gf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=ie*4,"uniform "+G,E.commandStr),A="4i";break}ie>1?(A+="v",Z=E.global.def("["+Array.prototype.slice.call(Z)+"]")):Z=Zt(Z)?Array.prototype.slice.call(Z):Z,m(M,".uniform",A,"(",Be,",",Z,");")}continue}else le=_e.append(E,m)}else{if(!$(Og))continue;le=m.def(N.uniforms,"[",g.id(G),"]")}J===Ks?(y(!Array.isArray(le),"must specify a scalar prop for textures"),m("if(",le,"&&",le,'._reglType==="framebuffer"){',le,"=",le,".color[0];","}")):J===qs&&(y(!Array.isArray(le),"must specify a scalar prop for cube maps"),m("if(",le,"&&",le,'._reglType==="framebufferCube"){',le,"=",le,".color[0];","}")),y.optional(function(){function Lr(hr,Sf){E.assert(m,hr,'bad data or missing for uniform "'+G+'".  '+Sf)}function yo(hr,Sf){Sf===1&&y(!Array.isArray(le),"must not specify an array type for uniform"),Lr("Array.isArray("+le+") && typeof "+le+'[0]===" '+hr+'" || typeof '+le+'==="'+hr+'"',"invalid type, expected "+hr)}function jr(hr,Sf,wf){Array.isArray(le)?y(le.length&&le.length%hr===0&&le.length<=hr*wf,"must have length of "+(wf===1?"":"n * ")+hr):Lr(N.isArrayLike+"("+le+")&&"+le+".length && "+le+".length % "+hr+" === 0 && "+le+".length<="+hr*wf,"invalid vector, should have length of "+(wf===1?"":"n * ")+hr,E.commandStr)}function Fg(hr){y(!Array.isArray(le),"must not specify a value type"),Lr("typeof "+le+'==="function"&&'+le+'._reglType==="texture'+(hr===_g?"2d":"Cube")+'"',"invalid texture type",E.commandStr)}switch(J){case Ih:yo("number",ie);break;case pf:jr(2,"number",ie);break;case vf:jr(3,"number",ie);break;case gf:jr(4,"number",ie);break;case kh:yo("number",ie);break;case df:jr(2,"number",ie);break;case mf:jr(3,"number",ie);break;case hf:jr(4,"number",ie);break;case Dh:yo("boolean",ie);break;case yf:jr(2,"boolean",ie);break;case xf:jr(3,"boolean",ie);break;case Ef:jr(4,"boolean",ie);break;case Xs:jr(4,"number",ie);break;case Ys:jr(9,"number",ie);break;case Qs:jr(16,"number",ie);break;case Ks:Fg(_g);break;case qs:Fg(rS);break}});var zt=1;switch(J){case Ks:case qs:var Un=m.def(le,"._texture");m(M,".uniform1i(",Be,",",Un,".bind());"),m.exit(Un,".unbind();");continue;case Ih:case Dh:A="1i";break;case pf:case yf:A="2i",zt=2;break;case vf:case xf:A="3i",zt=3;break;case gf:case Ef:A="4i",zt=4;break;case kh:A="1f";break;case df:A="2f",zt=2;break;case mf:A="3f",zt=3;break;case hf:A="4f",zt=4;break;case Xs:A="Matrix2fv";break;case Ys:A="Matrix3fv";break;case Qs:A="Matrix4fv";break}if(A.indexOf("Matrix")===-1&&ie>1&&(A+="v",zt=1),A.charAt(0)==="M"){m(M,".uniform",A,"(",Be,",");var vo=Math.pow(J-Xs+2,2),Ui=E.global.def("new Float32Array(",vo,")");Array.isArray(le)?m("false,(",ne(vo,function(Lr){return Ui+"["+Lr+"]="+le[Lr]}),",",Ui,")"):m("false,(Array.isArray(",le,")||",le," instanceof Float32Array)?",le,":(",ne(vo,function(Lr){return Ui+"["+Lr+"]="+le+"["+Lr+"]"}),",",Ui,")"),m(");")}else if(zt>1){for(var _i=[],Ea=[],go=0;go<zt;++go)Array.isArray(le)?Ea.push(le[go]):Ea.push(m.def(le+"["+go+"]")),k&&_i.push(m.def());k&&m("if(!",E.batchId,"||",_i.map(function(Lr,yo){return Lr+"!=="+Ea[yo]}).join("||"),"){",_i.map(function(Lr,yo){return Lr+"="+Ea[yo]+";"}).join("")),m(M,".uniform",A,"(",Be,",",Ea.join(","),");"),k&&m("}")}else{if(y(!Array.isArray(le),"uniform value must not be an array"),k){var Mg=m.def();m("if(!",E.batchId,"||",Mg,"!==",le,"){",Mg,"=",le,";")}m(M,".uniform",A,"(",Be,",",le,");"),k&&m("}")}}}function tt(E,m,P,F){var $=E.shared,k=$.gl,N=$.draw,M=F.draw;function _(){var Qe=M.elements,He,rt=m;return Qe?((Qe.contextDep&&F.contextDynamic||Qe.propDep)&&(rt=P),He=Qe.append(E,rt),M.elementsActive&&rt("if("+He+")"+k+".bindBuffer("+Nh+","+He+".buffer.buffer);")):(He=rt.def(),rt(He,"=",N,".",co,";","if(",He,"){",k,".bindBuffer(",Nh,",",He,".buffer.buffer);}","else if(",$.vao,".currentVAO){",He,"=",E.shared.elements+".getElements("+$.vao,".currentVAO.elements);",se?"":"if("+He+")"+k+".bindBuffer("+Nh+","+He+".buffer.buffer);","}")),He}function A(){var Qe=M.count,He,rt=m;return Qe?((Qe.contextDep&&F.contextDynamic||Qe.propDep)&&(rt=P),He=Qe.append(E,rt),y.optional(function(){Qe.MISSING&&E.assert(m,"false","missing vertex count"),Qe.DYNAMIC&&E.assert(rt,He+">=0","missing vertex count")})):(He=rt.def(N,".",mo),y.optional(function(){E.assert(rt,He+">=0","missing vertex count")})),He}var S=_();function U(Qe){var He=M[Qe];return He?He.contextDep&&F.contextDynamic||He.propDep?He.append(E,P):He.append(E,m):m.def(N,".",Qe)}var G=U(fo),J=U(cf),ie=A();if(typeof ie=="number"){if(ie===0)return}else P("if(",ie,"){"),P.exit("}");var _e,it;he&&(_e=U(ff),it=E.instancing);var Ze=S+".type",Be=M.elements&&xa(M.elements)&&!M.vaoActive;function le(){function Qe(){P(it,".drawElementsInstancedANGLE(",[G,ie,Ze,J+"<<(("+Ze+"-"+eg+")>>1)",_e],");")}function He(){P(it,".drawArraysInstancedANGLE(",[G,J,ie,_e],");")}S&&S!=="null"?Be?Qe():(P("if(",S,"){"),Qe(),P("}else{"),He(),P("}")):He()}function Z(){function Qe(){P(k+".drawElements("+[G,ie,Ze,J+"<<(("+Ze+"-"+eg+")>>1)"]+");")}function He(){P(k+".drawArrays("+[G,J,ie]+");")}S&&S!=="null"?Be?Qe():(P("if(",S,"){"),Qe(),P("}else{"),He(),P("}")):He()}he&&(typeof _e!="number"||_e>=0)?typeof _e=="string"?(P("if(",_e,">0){"),le(),P("}else if(",_e,"<0){"),Z(),P("}")):le():Z()}function At(E,m,P,F,$){var k=ot(),N=k.proc("body",$);return y.optional(function(){k.commandStr=m.commandStr,k.command=k.link(m.commandStr)}),he&&(k.instancing=N.def(k.shared.extensions,".angle_instanced_arrays")),E(k,N,P,F),k.compile().body}function kt(E,m,P,F){hn(E,m),P.useVAO?P.drawVAO?m(E.shared.vao,".setVAO(",P.drawVAO.append(E,m),");"):m(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(m(E.shared.vao,".setVAO(null);"),zn(E,m,P,F.attributes,function(){return!0})),$t(E,m,P,F.uniforms,function(){return!0},!1),tt(E,m,m,P)}function pn(E,m){var P=E.proc("draw",1);hn(E,P),Rn(E,P,m.context),On(E,P,m.framebuffer),Fn(E,P,m),Gn(E,P,m.state),vt(E,P,m,!1,!0);var F=m.shader.progVar.append(E,P);if(P(E.shared.gl,".useProgram(",F,".program);"),m.shader.program)kt(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var $=E.global.def("{}"),k=P.def(F,".id"),N=P.def($,"[",k,"]");P(E.cond(N).then(N,".call(this,a0);").else(N,"=",$,"[",k,"]=",E.link(function(M){return At(kt,E,m,M,1)}),"(",F,");",N,".call(this,a0);"))}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Ei(E,m,P,F){E.batchId="a1",hn(E,m);function $(){return!0}zn(E,m,P,F.attributes,$),$t(E,m,P,F.uniforms,$,!1),tt(E,m,m,P)}function po(E,m,P,F){hn(E,m);var $=P.contextDep,k=m.def(),N="a0",M="a1",_=m.def();E.shared.props=_,E.batchId=k;var A=E.scope(),S=E.scope();m(A.entry,"for(",k,"=0;",k,"<",M,";++",k,"){",_,"=",N,"[",k,"];",S,"}",A.exit);function U(Ze){return Ze.contextDep&&$||Ze.propDep}function G(Ze){return!U(Ze)}if(P.needsContext&&Rn(E,S,P.context),P.needsFramebuffer&&On(E,S,P.framebuffer),Gn(E,S,P.state,U),P.profile&&U(P.profile)&&vt(E,S,P,!1,!0),F)P.useVAO?P.drawVAO?U(P.drawVAO)?S(E.shared.vao,".setVAO(",P.drawVAO.append(E,S),");"):A(E.shared.vao,".setVAO(",P.drawVAO.append(E,A),");"):A(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(A(E.shared.vao,".setVAO(null);"),zn(E,A,P,F.attributes,G),zn(E,S,P,F.attributes,U)),$t(E,A,P,F.uniforms,G,!1),$t(E,S,P,F.uniforms,U,!0),tt(E,A,S,P);else{var J=E.global.def("{}"),ie=P.shader.progVar.append(E,S),_e=S.def(ie,".id"),it=S.def(J,"[",_e,"]");S(E.shared.gl,".useProgram(",ie,".program);","if(!",it,"){",it,"=",J,"[",_e,"]=",E.link(function(Ze){return At(Ei,E,P,Ze,2)}),"(",ie,");}",it,".call(this,a0[",k,"],",k,");")}}function T(E,m){var P=E.proc("batch",2);E.batchId="0",hn(E,P);var F=!1,$=!0;Object.keys(m.context).forEach(function(J){F=F||m.context[J].propDep}),F||(Rn(E,P,m.context),$=!1);var k=m.framebuffer,N=!1;k?(k.propDep?F=N=!0:k.contextDep&&F&&(N=!0),N||On(E,P,k)):On(E,P,null),m.state.viewport&&m.state.viewport.propDep&&(F=!0);function M(J){return J.contextDep&&F||J.propDep}Fn(E,P,m),Gn(E,P,m.state,function(J){return!M(J)}),(!m.profile||!M(m.profile))&&vt(E,P,m,!1,"a1"),m.contextDep=F,m.needsContext=$,m.needsFramebuffer=N;var _=m.shader.progVar;if(_.contextDep&&F||_.propDep)po(E,P,m,null);else{var A=_.append(E,P);if(P(E.shared.gl,".useProgram(",A,".program);"),m.shader.program)po(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var S=E.global.def("{}"),U=P.def(A,".id"),G=P.def(S,"[",U,"]");P(E.cond(G).then(G,".call(this,a0,a1);").else(G,"=",S,"[",U,"]=",E.link(function(J){return At(po,E,m,J,2)}),"(",A,");",G,".call(this,a0,a1);"))}}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Y(E,m){var P=E.proc("scope",3);E.batchId="a2";var F=E.shared,$=F.current;Rn(E,P,m.context),m.framebuffer&&m.framebuffer.append(E,P),Rg(Object.keys(m.state)).forEach(function(N){var M=m.state[N],_=M.append(E,P);Zt(_)?_.forEach(function(A,S){P.set(E.next[N],"["+S+"]",A)}):P.set(F.next,"."+N,_)}),vt(E,P,m,!0,!0),[co,cf,mo,ff,fo].forEach(function(N){var M=m.draw[N];M&&P.set(F.draw,"."+N,""+M.append(E,P))}),Object.keys(m.uniforms).forEach(function(N){var M=m.uniforms[N].append(E,P);Array.isArray(M)&&(M="["+M.join()+"]"),P.set(F.uniforms,"["+g.id(N)+"]",M)}),Object.keys(m.attributes).forEach(function(N){var M=m.attributes[N].append(E,P),_=E.scopeAttrib(N);Object.keys(new B).forEach(function(A){P.set(_,"."+A,M[A])})}),m.scopeVAO&&P.set(F.vao,".targetVAO",m.scopeVAO.append(E,P));function k(N){var M=m.shader[N];M&&P.set(F.shader,"."+N,M.append(E,P))}k(Vs),k(Hs),Object.keys(m.state).length>0&&(P($,".dirty=true;"),P.exit($,".dirty=true;")),P("a1(",E.shared.context,",a0,",E.batchId,");")}function V(E){if(!(typeof E!="object"||Zt(E))){for(var m=Object.keys(E),P=0;P<m.length;++P)if(Ot.isDynamic(E[m[P]]))return!0;return!1}}function Ge(E,m,P){var F=m.static[P];if(!F||!V(F))return;var $=E.global,k=Object.keys(F),N=!1,M=!1,_=!1,A=E.global.def("{}");k.forEach(function(U){var G=F[U];if(Ot.isDynamic(G)){typeof G=="function"&&(G=F[U]=Ot.unbox(G));var J=mr(G,null);N=N||J.thisDep,_=_||J.propDep,M=M||J.contextDep}else{switch($(A,".",U,"="),typeof G){case"number":$(G);break;case"string":$('"',G,'"');break;case"object":Array.isArray(G)&&$("[",G.join(),"]");break;default:$(E.link(G));break}$(";")}});function S(U,G){k.forEach(function(J){var ie=F[J];if(Ot.isDynamic(ie)){var _e=U.invoke(G,ie);G(A,".",J,"=",_e,";")}})}m.dynamic[P]=new Ot.DynamicVariable(sf,{thisDep:N,contextDep:M,propDep:_,ref:A,append:S}),delete m.static[P]}function St(E,m,P,F,$){var k=ot();k.stats=k.link($),Object.keys(m.static).forEach(function(M){Ge(k,m,M)}),eS.forEach(function(M){Ge(k,E,M)});var N=wn(E,m,P,F,k);return pn(k,N),Y(k,N),T(k,N),r(k.compile(),{destroy:function(){N.shader.program.destroy()}})}return{next:Oe,current:ke,procs:function(){var E=ot(),m=E.proc("poll"),P=E.proc("refresh"),F=E.block();m(F),P(F);var $=E.shared,k=$.gl,N=$.next,M=$.current;F(M,".dirty=false;"),On(E,m),On(E,P,null,!0);var _;he&&(_=E.link(he)),R.oes_vertex_array_object&&P(E.link(R.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var A=0;A<X.maxAttributes;++A){var S=P.def($.attributes,"[",A,"]"),U=E.cond(S,".buffer");U.then(k,".enableVertexAttribArray(",A,");",k,".bindBuffer(",xl,",",S,".buffer.buffer);",k,".vertexAttribPointer(",A,",",S,".size,",S,".type,",S,".normalized,",S,".stride,",S,".offset);").else(k,".disableVertexAttribArray(",A,");",k,".vertexAttrib4f(",A,",",S,".x,",S,".y,",S,".z,",S,".w);",S,".buffer=null;"),P(U),he&&P(_,".vertexAttribDivisorANGLE(",A,",",S,".divisor);")}return P(E.shared.vao,".currentVAO=null;",E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"),Object.keys(re).forEach(function(G){var J=re[G],ie=F.def(N,".",G),_e=E.block();_e("if(",ie,"){",k,".enable(",J,")}else{",k,".disable(",J,")}",M,".",G,"=",ie,";"),P(_e),m("if(",ie,"!==",M,".",G,"){",_e,"}")}),Object.keys(ee).forEach(function(G){var J=ee[G],ie=ke[G],_e,it,Ze=E.block();if(Ze(k,".",J,"("),Zt(ie)){var Be=ie.length;_e=E.global.def(N,".",G),it=E.global.def(M,".",G),Ze(ne(Be,function(le){return _e+"["+le+"]"}),");",ne(Be,function(le){return it+"["+le+"]="+_e+"["+le+"];"}).join("")),m("if(",ne(Be,function(le){return _e+"["+le+"]!=="+it+"["+le+"]"}).join("||"),"){",Ze,"}")}else _e=F.def(N,".",G),it=F.def(M,".",G),Ze(_e,");",M,".",G,"=",_e,";"),m("if(",_e,"!==",it,"){",Ze,"}");P(Ze)}),E.compile()}(),compile:St}}function xS(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ES=34918,_S=34919,Pg=35007,SS=function(c,g){if(!g.ext_disjoint_timer_query)return null;var R=[];function X(){return R.pop()||g.ext_disjoint_timer_query.createQueryEXT()}function te(he){R.push(he)}var W=[];function K(he){var Fe=X();g.ext_disjoint_timer_query.beginQueryEXT(Pg,Fe),W.push(Fe),de(W.length-1,W.length,he)}function fe(){g.ext_disjoint_timer_query.endQueryEXT(Pg)}function ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ge=[];function xe(){return ge.pop()||new ce}function ye(he){ge.push(he)}var Te=[];function de(he,Fe,se){var ke=xe();ke.startQueryIndex=he,ke.endQueryIndex=Fe,ke.sum=0,ke.stats=se,Te.push(ke)}var ve=[],B=[];function Q(){var he,Fe,se=W.length;if(se!==0){B.length=Math.max(B.length,se+1),ve.length=Math.max(ve.length,se+1),ve[0]=0,B[0]=0;var ke=0;for(he=0,Fe=0;Fe<W.length;++Fe){var Oe=W[Fe];g.ext_disjoint_timer_query.getQueryObjectEXT(Oe,_S)?(ke+=g.ext_disjoint_timer_query.getQueryObjectEXT(Oe,ES),te(Oe)):W[he++]=Oe,ve[Fe+1]=ke,B[Fe+1]=he}for(W.length=he,he=0,Fe=0;Fe<Te.length;++Fe){var Je=Te[Fe],re=Je.startQueryIndex,ee=Je.endQueryIndex;Je.sum+=ve[ee]-ve[re];var Ue=B[re],Ae=B[ee];Ae===Ue?(Je.stats.gpuTime+=Je.sum/1e6,ye(Je)):(Je.startQueryIndex=Ue,Je.endQueryIndex=Ae,Te[he++]=Je)}Te.length=he}}return{beginQuery:K,endQuery:fe,pushScopeStats:de,update:Q,getNumPendingQueries:function(){return W.length},clear:function(){R.push.apply(R,W);for(var he=0;he<R.length;he++)g.ext_disjoint_timer_query.deleteQueryEXT(R[he]);W.length=0,R.length=0},restore:function(){W.length=0,R.length=0}}},wS=16384,TS=256,bS=1024,AS=34962,Ng="webglcontextlost",kg="webglcontextrestored",Ig=1,CS=2,LS=3;function Dg(c,g){for(var R=0;R<c.length;++R)if(c[R]===g)return R;return-1}function RS(c){var g=ur(c);if(!g)return null;var R=g.gl,X=R.getContextAttributes(),te=R.isContextLost(),W=qr(R,g);if(!W)return null;var K=Sr(),fe=xS(),ce=W.extensions,ge=SS(R,ce),xe=mn(),ye=R.drawingBufferWidth,Te=R.drawingBufferHeight,de={tick:0,time:0,viewportWidth:ye,viewportHeight:Te,framebufferWidth:ye,framebufferHeight:Te,drawingBufferWidth:ye,drawingBufferHeight:Te,pixelRatio:g.pixelRatio},ve={},B={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q=oc(R,ce),he=vs(R,fe,g,ke),Fe=_s(R,ce,he,fe),se=be(R,ce,Q,fe,he,Fe,B);function ke(tt){return se.destroyBuffer(tt)}var Oe=Dt(R,K,fe,g),Je=Zm(R,ce,Q,function(){Ue.procs.poll()},de,fe,g),re=Jm(R,ce,Q,fe,g),ee=hh(R,ce,Q,Je,re,fe),Ue=yS(R,K,ce,Q,he,Fe,Je,ee,ve,se,Oe,B,de,ge,g),Ae=K_(R,ee,Ue.procs.poll,de,X,ce,Q),me=Ue.next,Ce=R.canvas,Re=[],ct=[],ot=[],Pe=[g.onDestroy],Me=null;function nt(){if(Re.length===0){ge&&ge.update(),Me=null;return}Me=xn.next(nt),Gn();for(var tt=Re.length-1;tt>=0;--tt){var At=Re[tt];At&&At(de,null,0)}R.flush(),ge&&ge.update()}function ft(){!Me&&Re.length>0&&(Me=xn.next(nt))}function bt(){Me&&(xn.cancel(nt),Me=null)}function rn(tt){tt.preventDefault(),te=!0,bt(),ct.forEach(function(At){At()})}function ln(tt){R.getError(),te=!1,W.restore(),Oe.restore(),he.restore(),Je.restore(),re.restore(),ee.restore(),se.restore(),ge&&ge.restore(),Ue.procs.refresh(),ft(),ot.forEach(function(At){At()})}Ce&&(Ce.addEventListener(Ng,rn,!1),Ce.addEventListener(kg,ln,!1));function Rt(){Re.length=0,bt(),Ce&&(Ce.removeEventListener(Ng,rn),Ce.removeEventListener(kg,ln)),Oe.clear(),ee.clear(),re.clear(),se.clear(),Je.clear(),Fe.clear(),he.clear(),ge&&ge.clear(),Pe.forEach(function(tt){tt()})}function Ln(tt){y(!!tt,"invalid args to regl({...})"),y.type(tt,"object","invalid args to regl({...})");function At($){var k=r({},$);delete k.uniforms,delete k.attributes,delete k.context,delete k.vao,"stencil"in k&&k.stencil.op&&(k.stencil.opBack=k.stencil.opFront=k.stencil.op,delete k.stencil.op);function N(M){if(M in k){var _=k[M];delete k[M],Object.keys(_).forEach(function(A){k[M+"."+A]=_[A]})}}return N("blend"),N("depth"),N("cull"),N("stencil"),N("polygonOffset"),N("scissor"),N("sample"),"vao"in $&&(k.vao=$.vao),k}function kt($,k){var N={},M={};return Object.keys($).forEach(function(_){var A=$[_];if(Ot.isDynamic(A)){M[_]=Ot.unbox(A,_);return}else if(k&&Array.isArray(A)){for(var S=0;S<A.length;++S)if(Ot.isDynamic(A[S])){M[_]=Ot.unbox(A,_);return}}N[_]=A}),{dynamic:M,static:N}}var pn=kt(tt.context||{},!0),Ei=kt(tt.uniforms||{},!0),po=kt(tt.attributes||{},!1),T=kt(At(tt),!1),Y={gpuTime:0,cpuTime:0,count:0},V=Ue.compile(T,po,Ei,pn,Y),Ge=V.draw,St=V.batch,E=V.scope,m=[];function P($){for(;m.length<$;)m.push(null);return m}function F($,k){var N;if(te&&y.raise("context lost"),typeof $=="function")return E.call(this,null,$,0);if(typeof k=="function")if(typeof $=="number")for(N=0;N<$;++N)E.call(this,null,k,N);else if(Array.isArray($))for(N=0;N<$.length;++N)E.call(this,$[N],k,N);else return E.call(this,$,k,0);else if(typeof $=="number"){if($>0)return St.call(this,P($|0),$|0)}else if(Array.isArray($)){if($.length)return St.call(this,$,$.length)}else return Ge.call(this,$)}return r(F,{stats:Y,destroy:function(){V.destroy()}})}var Jt=ee.setFBO=Ln({framebuffer:Ot.define.call(null,Ig,"framebuffer")});function wn(tt,At){var kt=0;Ue.procs.poll();var pn=At.color;pn&&(R.clearColor(+pn[0]||0,+pn[1]||0,+pn[2]||0,+pn[3]||0),kt|=wS),"depth"in At&&(R.clearDepth(+At.depth),kt|=TS),"stencil"in At&&(R.clearStencil(At.stencil|0),kt|=bS),y(!!kt,"called regl.clear with no buffer specified"),R.clear(kt)}function Rn(tt){if(y(typeof tt=="object"&&tt,"regl.clear() takes an object as input"),"framebuffer"in tt)if(tt.framebuffer&&tt.framebuffer_reglType==="framebufferCube")for(var At=0;At<6;++At)Jt(r({framebuffer:tt.framebuffer.faces[At]},tt),wn);else Jt(tt,wn);else wn(null,tt)}function On(tt){y.type(tt,"function","regl.frame() callback must be a function"),Re.push(tt);function At(){var kt=Dg(Re,tt);y(kt>=0,"cannot cancel a frame twice");function pn(){var Ei=Dg(Re,pn);Re[Ei]=Re[Re.length-1],Re.length-=1,Re.length<=0&&bt()}Re[kt]=pn}return ft(),{cancel:At}}function Fn(){var tt=me.viewport,At=me.scissor_box;tt[0]=tt[1]=At[0]=At[1]=0,de.viewportWidth=de.framebufferWidth=de.drawingBufferWidth=tt[2]=At[2]=R.drawingBufferWidth,de.viewportHeight=de.framebufferHeight=de.drawingBufferHeight=tt[3]=At[3]=R.drawingBufferHeight}function Gn(){de.tick+=1,de.time=vt(),Fn(),Ue.procs.poll()}function hn(){Je.refresh(),Fn(),Ue.procs.refresh(),ge&&ge.update()}function vt(){return(mn()-xe)/1e3}hn();function zn(tt,At){y.type(At,"function","listener callback must be a function");var kt;switch(tt){case"frame":return On(At);case"lost":kt=ct;break;case"restore":kt=ot;break;case"destroy":kt=Pe;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}return kt.push(At),{cancel:function(){for(var pn=0;pn<kt.length;++pn)if(kt[pn]===At){kt[pn]=kt[kt.length-1],kt.pop();return}}}}var $t=r(Ln,{clear:Rn,prop:Ot.define.bind(null,Ig),context:Ot.define.bind(null,CS),this:Ot.define.bind(null,LS),draw:Ln({}),buffer:function(tt){return he.create(tt,AS,!1,!1)},elements:function(tt){return Fe.create(tt,!1)},texture:Je.create2D,cube:Je.createCube,renderbuffer:re.create,framebuffer:ee.create,framebufferCube:ee.createCube,vao:se.createVAO,attributes:X,frame:On,on:zn,limits:Q,hasExtension:function(tt){return Q.extensions.indexOf(tt.toLowerCase())>=0},read:Ae,destroy:Rt,_gl:R,_refresh:hn,poll:function(){Gn(),ge&&ge.update()},now:vt,stats:fe});return g.onDone(null,$t),$t}return RS})})(x_);var fA=x_.exports;const dA=B0(fA);var mA=1e-6,Mo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function dp(){var e=new Mo(16);return Mo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function n1(e){var t=new Mo(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function O0(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=t[7],p=t[8],h=t[9],d=t[10],w=t[11],x=t[12],L=t[13],I=t[14],v=t[15],b=n*l-r*o,C=n*u-i*o,H=n*f-a*o,q=r*u-i*l,ae=r*f-a*l,we=i*f-a*u,ue=p*L-h*x,at=p*I-d*x,Ve=p*v-w*x,Se=h*I-d*L,Ke=h*v-w*L,Ye=d*v-w*I,ze=b*Ye-C*Ke+H*Se+q*Ve-ae*at+we*ue;return ze?(ze=1/ze,e[0]=(l*Ye-u*Ke+f*Se)*ze,e[1]=(i*Ke-r*Ye-a*Se)*ze,e[2]=(L*we-I*ae+v*q)*ze,e[3]=(d*ae-h*we-w*q)*ze,e[4]=(u*Ve-o*Ye-f*at)*ze,e[5]=(n*Ye-i*Ve+a*at)*ze,e[6]=(I*H-x*we-v*C)*ze,e[7]=(p*we-d*H+w*C)*ze,e[8]=(o*Ke-l*Ve+f*ue)*ze,e[9]=(r*Ve-n*Ke-a*ue)*ze,e[10]=(x*ae-L*H+v*b)*ze,e[11]=(h*H-p*ae-w*b)*ze,e[12]=(l*at-o*Se-u*ue)*ze,e[13]=(n*Se-r*at+i*ue)*ze,e[14]=(L*C-x*q-I*b)*ze,e[15]=(p*q-h*C+d*b)*ze,e):null}function ar(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],p=t[7],h=t[8],d=t[9],w=t[10],x=t[11],L=t[12],I=t[13],v=t[14],b=t[15],C=n[0],H=n[1],q=n[2],ae=n[3];return e[0]=C*r+H*l+q*h+ae*L,e[1]=C*i+H*u+q*d+ae*I,e[2]=C*a+H*f+q*w+ae*v,e[3]=C*o+H*p+q*x+ae*b,C=n[4],H=n[5],q=n[6],ae=n[7],e[4]=C*r+H*l+q*h+ae*L,e[5]=C*i+H*u+q*d+ae*I,e[6]=C*a+H*f+q*w+ae*v,e[7]=C*o+H*p+q*x+ae*b,C=n[8],H=n[9],q=n[10],ae=n[11],e[8]=C*r+H*l+q*h+ae*L,e[9]=C*i+H*u+q*d+ae*I,e[10]=C*a+H*f+q*w+ae*v,e[11]=C*o+H*p+q*x+ae*b,C=n[12],H=n[13],q=n[14],ae=n[15],e[12]=C*r+H*l+q*h+ae*L,e[13]=C*i+H*u+q*d+ae*I,e[14]=C*a+H*f+q*w+ae*v,e[15]=C*o+H*p+q*x+ae*b,e}function r1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fd(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hA(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,u,f;return o<mA?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=r*r*f+u,e[1]=i*r*f+a*l,e[2]=a*r*f-i*l,e[3]=0,e[4]=r*i*f-a*l,e[5]=i*i*f+u,e[6]=a*i*f+r*l,e[7]=0,e[8]=r*a*f+i*l,e[9]=i*a*f-r*l,e[10]=a*a*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function pA(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function vA(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],l=t[6],u=t[8],f=t[9],p=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,l),e[2]=Math.hypot(u,f,p),e}function gA(){var e=new Mo(4);return Mo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function dd(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}(function(){var e=gA();return function(t,n,r,i,a,o){var l,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function yA(){var e=new Mo(2);return Mo!=Float32Array&&(e[0]=0,e[1]=0),e}function xA(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),l=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=yA();return function(t,n,r,i,a,o){var l,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}})();const EA=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],a=[[-1/0,1/0],[-1/0,1/0]])=>{const o=new Float32Array(16),l=new Float32Array(16),u=new Float32Array(16);let f=dp(),p=[...r.slice(0,2),0,1];const h=Array.isArray(i[0])?[...i[0]]:[...i],d=Array.isArray(i[0])?[...i[1]]:[...i],w=Array.isArray(a[0])?[...a[0]]:[...a],x=Array.isArray(a[0])?[...a[1]]:[...a],L=()=>vA(o,f).slice(0,2),I=()=>{const Ee=L();return Math.min(Ee[0],Ee[1])},v=()=>{const Ee=L();return Math.max(Ee[0],Ee[1])},b=()=>Math.acos(f[0]/v()),C=()=>[[...h],[...d]],H=()=>[[...w],[...x]],q=()=>{const Ee=L();return[1/Ee[0],1/Ee[1]]},ae=()=>1/I(),we=()=>1/v(),ue=()=>pA(o,f).slice(0,2),at=()=>dd(o,p,O0(u,f)).slice(0,2),Ve=()=>f,Se=()=>p.slice(0,2),Ke=([Ee=0,$e=0]=[],lt=1,Et=0)=>{f=dp(),Ye([-Ee,-$e]),Pt(Et),ze(1/lt)},Ye=([Ee=0,$e=0]=[])=>{o[0]=Ee,o[1]=$e,o[2]=0;const lt=r1(l,o);ar(f,lt,f)},ze=(Ee,$e)=>{const lt=Array.isArray(Ee);let Et=lt?Ee[0]:Ee,Wt=lt?Ee[1]:Ee;if(Et<=0||Wt<=0||Et===1&&Wt===1)return;const Yt=L(),Qt=Yt[0]*Et,It=Yt[1]*Wt;if(Et=Math.max(h[0],Math.min(Qt,h[1]))/Yt[0],Wt=Math.max(d[0],Math.min(It,d[1]))/Yt[1],Et===1&&Wt===1)return;o[0]=Et,o[1]=Wt,o[2]=1;const pt=fd(l,o),Wn=$e?[...$e,0]:p,fn=r1(o,Wn);ar(f,fn,ar(f,pt,ar(f,O0(u,fn),f)))},Pt=Ee=>{const $e=dp();hA($e,Ee,[0,0,1]),ar(f,$e,f)},mt=Ee=>{const $e=Array.isArray(Ee[0]);h[0]=$e?Ee[0][0]:Ee[0],h[1]=$e?Ee[0][1]:Ee[1],d[0]=$e?Ee[1][0]:Ee[0],d[1]=$e?Ee[1][1]:Ee[1]},ht=Ee=>{const $e=Array.isArray(Ee[0]);w[0]=$e?Ee[0][0]:Ee[0],w[1]=$e?Ee[0][1]:Ee[1],x[0]=$e?Ee[1][0]:Ee[0],x[1]=$e?Ee[1][1]:Ee[1]},pe=Ee=>{!Ee||Ee.length<16||(f=Ee)},We=Ee=>{p=[...Ee.slice(0,2),0,1]},Le=()=>{Ke(e,t,n)};return Ke(e,t,n),{get translation(){return ue()},get target(){return at()},get scaling(){return L()},get minScaling(){return I()},get maxScaling(){return v()},get scaleBounds(){return C()},get translationBounds(){return H()},get distance(){return q()},get minDistance(){return ae()},get maxDistance(){return we()},get rotation(){return b()},get view(){return Ve()},get viewCenter(){return Se()},lookAt:Ke,translate:Ye,pan:Ye,rotate:Pt,scale:ze,zoom:ze,reset:Le,set:(...Ee)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),pe(...Ee)),setScaleBounds:mt,setTranslationBounds:ht,setView:pe,setViewCenter:We}},_A=["pan","rotate"],i1={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},SA=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:a=!1,isPan:o=!0,isPanInverted:l=[!1,!0],panSpeed:u=1,isRotate:f=!0,rotateSpeed:p=1,defaultMouseDownMoveAction:h="pan",mouseDownMoveModKey:d="alt",isZoom:w=!0,zoomSpeed:x=1,viewCenter:L,scaleBounds:I,translationBounds:v,onKeyDown:b=()=>{},onKeyUp:C=()=>{},onMouseDown:H=()=>{},onMouseUp:q=()=>{},onMouseMove:ae=()=>{},onWheel:we=()=>{}}={})=>{let ue=EA(n,t,r,L,I,v),at=0,Ve=0,Se=0,Ke=0,Ye=0,ze=0,Pt=!1,mt=0,ht=1,pe=1,We=1,Le=!1,Ee=!1,$e=!1,lt=h==="pan",Et=o,Wt=o,Yt=l,Qt=l,It=w,pt=w;const Wn=()=>{Et=Array.isArray(o)?!!o[0]:o,Wt=Array.isArray(o)?!!o[1]:o,Yt=Array.isArray(l)?!!l[0]:l,Qt=Array.isArray(l)?!!l[1]:l,It=Array.isArray(w)?!!w[0]:w,pt=Array.isArray(w)?!!w[1]:w};Wn();const fn=i?De=>De/ht*2*We:De=>De,Xt=i?De=>De/pe*2:De=>-De,en=i?De=>(-1+De/ht*2)*We:De=>De,_t=i?De=>1-De/pe*2:De=>De,wt=()=>{if(a){const st=Ee;return Ee=!1,st}Le=!1;const De=at,ut=Ve;if((Et||Wt)&&Pt&&(lt&&!$e||!lt&&$e)){const st=Yt?Ye-De:De-Ye,tn=Et?fn(u*st):0,nn=Qt?ze-ut:ut-ze,Ot=Wt?Xt(u*nn):0;(tn!==0||Ot!==0)&&(ue.pan([tn,Ot]),Le=!0)}if((It||pt)&&mt){const st=x*Math.exp(mt/pe),tn=en(Se),nn=_t(Ke);ue.scale([It?1/st:1,pt?1/st:1],[tn,nn]),Le=!0}if(f&&Pt&&(lt&&$e||!lt&&!$e)&&Math.abs(Ye-De)+Math.abs(ze-ut)>0){const st=ht/2,tn=pe/2,nn=Ye-st,Ot=tn-ze,xn=De-st,mn=tn-ut,Sr=xA([nn,Ot],[xn,mn]),tr=nn*mn-xn*Ot;ue.rotate(p*Sr*Math.sign(tr)),Le=!0}mt=0,Ye=De,ze=ut;const jt=Le||Ee;return Ee=!1,jt},Nt=({defaultMouseDownMoveAction:De=null,isFixed:ut=null,isPan:jt=null,isPanInverted:st=null,isRotate:tn=null,isZoom:nn=null,panSpeed:Ot=null,rotateSpeed:xn=null,zoomSpeed:mn=null,mouseDownMoveModKey:Sr=null}={})=>{h=De!==null&&_A.includes(De)?De:h,lt=h==="pan",a=ut!==null?ut:a,o=jt!==null?jt:o,l=st!==null?st:l,f=tn!==null?tn:f,w=nn!==null?nn:w,u=+Ot>0?Ot:u,p=+xn>0?xn:p,x=+mn>0?mn:x,Wn(),d=Sr!==null&&Object.keys(i1).includes(Sr)?Sr:d},Ct=()=>{const De=e.getBoundingClientRect();ht=De.width,pe=De.height,We=ht/pe},Lt=De=>{$e=!1,C(De)},Ut=De=>{$e=De[i1[d]],b(De)},dn=De=>{Pt=!1,q(De)},on=De=>{Pt=De.buttons===1,H(De)},y=document.createEvent("MouseEvent").offsetX!==void 0?De=>{Se=De.offsetX,Ke=De.offsetY}:De=>{const ut=e.getBoundingClientRect();Se=De.clientX-ut.left,Ke=De.clientY-ut.top},Tt=De=>{at=De.clientX,Ve=De.clientY},Ft=De=>{Tt(De),ae(De)},Ie=De=>{if(It||pt){De.preventDefault(),Tt(De),y(De);const ut=De.deltaMode===1?12:1;mt+=ut*(De.deltaY||De.deltaX||0)}we(De)},Kt=()=>{ue=void 0,window.removeEventListener("keydown",Ut),window.removeEventListener("keyup",Lt),e.removeEventListener("mousedown",on),window.removeEventListener("mouseup",dn),window.removeEventListener("mousemove",Ft),e.removeEventListener("wheel",Ie)};window.addEventListener("keydown",Ut,{passive:!0}),window.addEventListener("keyup",Lt,{passive:!0}),e.addEventListener("mousedown",on,{passive:!0}),window.addEventListener("mouseup",dn,{passive:!0}),window.addEventListener("mousemove",Ft,{passive:!0}),e.addEventListener("wheel",Ie,{passive:!1}),ue.config=Nt,ue.dispose=Kt,ue.refresh=Ct,ue.tick=wt;const gt=De=>function(){De.apply(null,arguments),Ee=!0};return ue.lookAt=gt(ue.lookAt),ue.translate=gt(ue.translate),ue.pan=gt(ue.pan),ue.rotate=gt(ue.rotate),ue.scale=gt(ue.scale),ue.zoom=gt(ue.zoom),ue.reset=gt(ue.reset),ue.set=gt(ue.set),ue.setScaleBounds=gt(ue.setScaleBounds),ue.setTranslationBounds=gt(ue.setTranslationBounds),ue.setView=gt(ue.setView),ue.setViewCenter=gt(ue.setViewCenter),Ct(),ue};function P0(e,t,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;E_(e,t,o,r,i,a%2),P0(e,t,n,r,o-1,a+1),P0(e,t,n,o+1,i,a+1)}function E_(e,t,n,r,i,a){for(;i>r;){if(i-r>600){const f=i-r+1,p=n-r+1,h=Math.log(f),d=.5*Math.exp(2*h/3),w=.5*Math.sqrt(h*d*(f-d)/f)*(p-f/2<0?-1:1),x=Math.max(r,Math.floor(n-p*d/f+w)),L=Math.min(i,Math.floor(n+(f-p)*d/f+w));E_(e,t,n,x,L,a)}const o=t[2*n+a];let l=r,u=i;for(lu(e,t,r,n),t[2*i+a]>o&&lu(e,t,r,i);l<u;){for(lu(e,t,l,u),l++,u--;t[2*l+a]<o;)l++;for(;t[2*u+a]>o;)u--}t[2*r+a]===o?lu(e,t,r,u):(u++,lu(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function lu(e,t,n,r){mp(e,n,r),mp(t,2*n,2*r),mp(t,2*n+1,2*r+1)}function mp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wA(e,t,n,r,i,a,o){const l=[0,e.length-1,0],u=[];let f,p;for(;l.length;){const h=l.pop(),d=l.pop(),w=l.pop();if(d-w<=o){for(let I=w;I<=d;I++)f=t[2*I],p=t[2*I+1],f>=n&&f<=i&&p>=r&&p<=a&&u.push(e[I]);continue}const x=Math.floor((w+d)/2);f=t[2*x],p=t[2*x+1],f>=n&&f<=i&&p>=r&&p<=a&&u.push(e[x]);const L=(h+1)%2;(h===0?n<=f:r<=p)&&(l.push(w),l.push(x-1),l.push(L)),(h===0?i>=f:a>=p)&&(l.push(x+1),l.push(d),l.push(L))}return u}function TA(e,t,n,r,i,a){const o=[0,e.length-1,0],l=[],u=i*i;for(;o.length;){const f=o.pop(),p=o.pop(),h=o.pop();if(p-h<=a){for(let I=h;I<=p;I++)a1(t[2*I],t[2*I+1],n,r)<=u&&l.push(e[I]);continue}const d=Math.floor((h+p)/2),w=t[2*d],x=t[2*d+1];a1(w,x,n,r)<=u&&l.push(e[d]);const L=(f+1)%2;(f===0?n-i<=w:r-i<=x)&&(o.push(h),o.push(d-1),o.push(L)),(f===0?n+i>=w:r+i>=x)&&(o.push(d+1),o.push(p),o.push(L))}return l}function a1(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}const bA=e=>e[0],AA=e=>e[1];class CA{constructor(t,n=bA,r=AA,i=64,a=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new o(t.length),u=this.coords=new a(t.length*2);for(let f=0;f<t.length;f++)l[f]=f,u[2*f]=n(t[f]),u[2*f+1]=r(t[f]);P0(l,u,i,0,l.length-1,0)}range(t,n,r,i){return wA(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return TA(this.ids,this.coords,t,n,r,this.nodeSize)}}const LA=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var RA=LA;const OA=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var PA=OA;const{push:o1,splice:NA}=Array.prototype,hp=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),rr=Float32Array.BYTES_PER_ELEMENT,kA=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const a=n+i*2,o=a+1,l=a+2,u=a+3;t.push(a,o,l,l,o,u)}n+=(r+2)*2}),t},Rr={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let a=0,o=e.length/t;a<o;a++){const l=a*t;for(let u=0;u<t;u++){const f=e[l+u];i[u]=f,i[u+t]=f*n}o1.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,a=e.length/n;i<a;i++){const o=t+i*n;e[o]=r(e[o],o,i)}return e},copyElement(e,t,n,r){const i=new Array(r),a=t*r;for(let o=0;o<r;o++)i[o]=e[a+o];return NA.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],a=new Array(n).fill(r);for(let o=0,l=e.length/t;o<l;o++){const u=o*t;for(let f=0;f<t;f++)a[f]=e[u+f];o1.apply(i,a)}return i}},IA=(e,{projection:t=hp,model:n=hp,view:r=hp,points:i=[],colorIndices:a=[],color:o=[.8,.5,0,1],opacity:l=null,opacities:u=[],width:f=1,widths:p=[],miter:h=1,is2d:d=!1,zPos2d:w=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const x=new Float32Array(16);let L,I,v,b,C,H,q,ae,we,ue,at,Ve,Se,Ke,Ye,ze,Pt,mt,ht=d?2:3;const pe=()=>+(u.length===I||l!==null),We=()=>{ue=e.buffer(),at=e.buffer(),Ve=e.buffer(),Ye=e.buffer(),ze={prevPosition:{buffer:()=>ue,offset:0,stride:rr*3},currPosition:{buffer:()=>ue,offset:rr*3*2,stride:rr*3},nextPosition:{buffer:()=>ue,offset:rr*3*4,stride:rr*3},opacity:{buffer:()=>at,offset:rr*2,stride:rr},offsetScale:{buffer:()=>Ve,offset:rr*2,stride:rr},colorIndex:{buffer:()=>Ye,offset:rr*2,stride:rr}},Pt=e.elements(),mt=e({attributes:ze,depth:{enable:!d},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(_t,wt)=>{const Nt=_t.projection||wt.projection,Ct=_t.model||wt.model,Lt=_t.view||wt.view;return ar(x,Nt,ar(x,Lt,Ct))},aspectRatio:({viewportWidth:_t,viewportHeight:wt})=>_t/wt,colorTex:()=>Se,colorTexRes:()=>Ke,colorTexEps:()=>.5/Ke,pixelRatio:({pixelRatio:_t})=>_t,width:({pixelRatio:_t,viewportHeight:wt})=>f/wt*_t,useOpacity:pe,useColorOpacity:()=>+!pe(),miter:h},elements:()=>Pt,vert:PA,frag:RA})},Le=()=>{L===1&&i.length%ht>0&&console.warn(`The length of points (${I}) does not match the dimensions (${ht}). Incomplete points are ignored.`),b=i.flat().slice(0,I*ht),d&&(b=Rr.increaseStride(b,2,3,w)),a.length!==I&&(a=new Array(I).fill(0)),p.length!==I&&(p=new Array(I).fill(1));let _t=a.slice(),wt=u.length===I?u.slice():new Array(I).fill(+l),Nt=p.slice(),Ct=0;v.forEach(Lt=>{const Ut=Ct+Lt-1;Rr.copyElement(b,Ut,Ut,3),Rr.copyElement(b,Ct,Ct,3),Rr.copyElement(_t,Ut,Ut,1),Rr.copyElement(_t,Ct,Ct,1),Rr.copyElement(wt,Ut,Ut,1),Rr.copyElement(wt,Ct,Ct,1),Rr.copyElement(Nt,Ut,Ut,1),Rr.copyElement(Nt,Ct,Ct,1),Ct+=Lt+2}),C=new Float32Array(Rr.duplicate(b,3)),H=Rr.duplicate(_t),q=Rr.duplicate(wt),ae=Rr.duplicate(Nt,1,-1),we=kA(v),ue({usage:"dynamic",type:"float",length:C.length*rr,data:C}),at({usage:"dynamic",type:"float",length:q.length*rr,data:q}),Ve({usage:"dynamic",type:"float",length:ae.length*rr,data:ae}),Ye({usage:"dynamic",type:"float",length:H.length*rr,data:H}),Pt({primitive:"triangles",usage:"dynamic",type:we.length>2**16?"uint32":"uint16",data:we})},Ee=()=>{$e(),We()},$e=()=>{i=null,b=null,C=null,ae=null,we=null,ue.destroy(),Ve.destroy(),Pt.destroy()},lt=({projection:_t,model:wt,view:Nt}={})=>{_t&&(t=_t),wt&&(n=wt),Nt&&(r=Nt),i&&i.length>1&&mt({projection:t,model:n,view:r})},Et=(_t,wt)=>{const Nt=wt.flat(2);return Nt.length===I?Nt:Nt.length===L?v.map((Ct,Lt)=>Array(Ct).fill(Nt[Lt])).flat():_t},Wt=()=>i,Yt=(_t=[],{colorIndices:wt=a,opacities:Nt=u,widths:Ct=p,is2d:Lt=d}={})=>{i=_t,d=Lt,ht=d?2:3,L=Array.isArray(i[0])?i.length:1,v=L>1?i.map(Ut=>Math.floor(Ut.length/ht)):[Math.floor(i.length/ht)],I=v.reduce((Ut,dn)=>Ut+dn,0),a=Et(a,wt),u=Et(u,Nt),p=Et(p,Ct),i&&I>1?Le():Ee()},Qt=(_t,wt=-1)=>Array.isArray(_t)?_t.length&&!Array.isArray(_t[0])?wt+1:Qt(_t[0],++wt):wt,It=()=>{const _t=Qt(o)===0?[o]:o;Ke=Math.max(2,Math.ceil(Math.sqrt(_t.length)));const wt=new Uint8Array(Ke**2*4);_t.forEach((Nt,Ct)=>{wt[Ct*4]=Math.min(255,Math.max(0,Math.round(Nt[0]*255))),wt[Ct*4+1]=Math.min(255,Math.max(0,Math.round(Nt[1]*255))),wt[Ct*4+2]=Math.min(255,Math.max(0,Math.round(Nt[2]*255))),wt[Ct*4+3]=Number.isNaN(+Nt[3])?255:Math.min(255,Math.max(0,Math.round(Nt[3]*255)))}),Se=e.texture({data:wt,shape:[Ke,Ke,4]})},pt=(_t,wt=l)=>{o=_t,l=wt,Se&&Se.destroy(),It()},Wn=()=>({color:o,miter:h,width:f}),fn=({color:_t,opacity:wt,miter:Nt,width:Ct}={})=>{_t&&pt(_t,wt),Nt&&(h=Nt),+Ct>0&&(f=Ct)},Xt=()=>({points:ue,widths:Ve,opacities:at,colorIndices:Ye}),en=()=>({points:C,widths:ae,opacities:q,colorIndices:H});return We(),It(),i&&i.length>1&&Yt(i),{clear:Ee,destroy:$e,draw:lt,getPoints:Wt,setPoints:Yt,getData:en,getBuffer:Xt,getStyle:Wn,setStyle:fn}};var Uf=IA;const DA=e=>e*e*e,__=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,MA=e=>--e*e*e+1,FA=e=>e,jA=e=>e*e,BA=e=>e<.5?2*e*e:-1+(4-2*e)*e,$A=e=>e*(2-e),Ml=e=>e,GA=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},zA=e=>e.reduce((t,n)=>n>t?n:t,-1/0),l1=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},UA=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,a)=>(i&&r.push(a),r),[])},jv=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,a)=>(i[a]=Object.getOwnPropertyDescriptor(n,a),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const a=Object.getOwnPropertyDescriptor(n,i);a.enumerable&&(r[i]=a)}),Object.defineProperties(e,r)}),e),VA=(...e)=>t=>e.reduce((n,r)=>r(n),t),HA=e=>t=>jv({__proto__:{constructor:e}},t),s1=(e,t)=>n=>jv(n,{get[e](){return t}}),WA=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),XA=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),Sl=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),S_=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const a=(...u)=>{const f=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(f,n)};let o=!1;const l=(...u)=>{o?(i++,a(...u)):(e(...u),a(...u),o=!0,i=0,setTimeout(()=>{o=!1},t))};return l.reset=()=>{o=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...u)=>e(...u),l},bi="auto",YA=0,pp=1,QA=2,u1=3,KA=4,qA=Float32Array.BYTES_PER_ELEMENT,w_=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],c1={color:[0,0,0,0],depth:1},Bv="panZoom",T_="lasso",b_="rotate",ZA=[Bv,T_,b_],JA=Bv,eC={cubicIn:DA,cubicInOut:__,cubicOut:MA,linear:FA,quadIn:jA,quadInOut:BA,quadOut:$A},f1=__,wi="continuous",wl="categorical",d1=[wi,wl],N0="deselect",$v="lassoEnd",tC=[N0,$v],nC=[0,.666666667,1,1],rC=2,iC=!1,aC=10,oC=3,lC=$v,sC=!1,Gd=750,zd=500,Ud=100,Vd=250,Gv="lasso",Hd="rotate",Wd="merge",uC=[Gv,Hd,Wd],zv="alt",Uv="cmd",A_="ctrl",C_="meta",Vv="shift",cC=[zv,Uv,A_,C_,Vv],fC={[zv]:Hd,[Vv]:Gv,[Uv]:Wd},dC=1,mC=bi,hC=bi,pC=1,vp=1,vC=6,gC=2,yC=2,gp=null,xC=2,EC=2,yp=null,_C=null,xp=null,SC=.66,wC=1,Ep=null,TC=.15,bC=25,AC=1,CC=1,su=null,LC=[.66,.66,.66,wC],RC=[0,.55,1,1],OC=[1,1,1,1],PC=[0,0,0,1],_p=null,NC=[.66,.66,.66,.2],kC=[0,.55,1,1],IC=[1,1,1,1],DC=[0,0],MC=1,FC=0,jC=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),BC="IMAGE_LOAD_ERROR",$C=null,GC=!1,zC=[1,1,1,.5],UC=!0,VC=!0,HC=!1,WC=100,XC=1/500,YC="auto",QC=!1,KC=200,qC=500,L_=new Set(["z","valueZ","valueA","value1","category"]),R_=new Set(["w","valueW","valueB","value2","value"]),Hv=15e3,m1="Points have not been drawn",ZC=(e,t)=>e?w_.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,JC=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return w_.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),dA({gl:t,extensions:n})},Sp=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),e2=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let a=0;a<e.length;a+=2)t=e[a]<t?e[a]:t,n=e[a]>n?e[a]:n,r=e[a+1]<r?e[a+1]:r,i=e[a+1]>i?e[a+1]:i;return[t,r,n,i]},t2=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,n2=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,a)=>`#${r}${r}${i}${i}${a}${a}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),Sa=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),wa=e=>!Number.isNaN(+e)&&+e>=0,Vf=e=>!Number.isNaN(+e)&&+e>0,h1=(e,t)=>n=>e.indexOf(n)>=0?n:t,r2=(e,t=!1,n=Hv)=>new Promise((r,i)=>{const a=new Image;t&&(a.crossOrigin="anonymous"),a.src=e,a.onload=()=>{r(a)};const o=()=>{i(new Error(BC))};a.onerror=o,setTimeout(o,n)}),p1=(e,t,n=Hv)=>new Promise((r,i)=>{r2(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(a=>{r(e.texture(a))}).catch(a=>{i(a)})}),i2=(e,t=!1)=>[...n2(e,t),255**!t],a2=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),o2=e=>e>=0&&e<=1,Xd=e=>Array.isArray(e)&&e.every(o2),l2=(e,[t,n]=[])=>{let r,i,a,o,l=!1;for(let u=0,f=e.length-2;u<e.length;u+=2)r=e[u],i=e[u+1],a=e[f],o=e[f+1],i>n!=o>n&&t<(a-r)*(n-i)/(o-i)+r&&(l=!l),f=u;return l},k0=e=>typeof e=="string"||e instanceof String,s2=e=>Number.isInteger(e)&&e>=0&&e<=255,O_=e=>Array.isArray(e)&&e.every(s2),u2=e=>e.length===3&&(Xd(e)||O_(e)),c2=e=>e.length===4&&(Xd(e)||O_(e)),Ta=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||k0(e[0])),Hf=(e,t)=>e>t?e:t,v1=(e,t)=>e<t?e:t,pr=(e,t)=>{if(c2(e)){const n=Xd(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(u2(e)){const n=255**!t,r=Xd(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return a2(e)?i2(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},g1=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),y1=e=>.21*e[0]+.72*e[1]+.07*e[2],f2=(e,t,n)=>Math.min(n,Math.max(t,e)),d2=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=pC}=e;t||(t=JC(n));const i=ZC(t),a=[n.width,n.height],o=t.framebuffer({width:a[0],height:a[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>o,srcRes:()=>a,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),u=I=>{const v=I.getContext("2d");v.clearRect(0,0,I.width,I.height),v.drawImage(n,(n.width-I.width)/2,(n.height-I.height)/2,I.width,I.height,0,0,I.width,I.height)},f=(I,v)=>{t.clear(c1),o.use(()=>{t.clear(c1),I()}),l(),u(v)},p=()=>{t.poll()},h=new Set,d=I=>(h.add(I),()=>{h.delete(I)}),w=t.frame(()=>{const I=h.values();let v=I.next();for(;!v.done;)v.value(),v=I.next()}),x=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,a[0]=n.width,a[1]=n.height,o.resize(...a)};return e.canvas||(window.addEventListener("resize",x),window.addEventListener("orientationchange",x),x()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(I){r=+I},get isSupported(){return i},render:f,onFrame:d,refresh:p,destroy:()=>{w.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}}},m2=!0,wp=8,x1=2,h2=2500,p2=250,v2=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const a=document.createElement("div");return a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.width="1.25rem",a.style.height="1.25rem",a.style.borderRadius="1.25rem",a.style.background="currentcolor",a.style.transform="scale(0)",a.style.opacity=0,e.appendChild(a),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:a}},g2=(e,t,n)=>(1-e)*t+n,y2=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,x2=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,E2=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,_2=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,S2=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,w2=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,T2=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,b2=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,A2=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,C2=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,L2=({time:e=Gd,extraTime:t=zd,delay:n=Ud,currentColor:r,targetColor:i,effectOpacity:a,effectScale:o,circleLeftRotation:l,circleRightRotation:u,circleClipPath:f,circleOpacity:p})=>{const h=l/360,d=g2(h,e,t),w=Math.round((1-h)*e/d*100),x=Math.round(w/2),L=w+(100-w)/4;return{rules:{main:w2(w,r,i),effect:T2(w,L,a,o),circleRight:C2(x,u),circleLeft:A2(w,l),circle:b2(x,f,p)},names:{main:y2(d,n),effect:x2(d,n),circleLeft:E2(d,n),circleRight:_2(d,n),circle:S2(d,n)}}},R2=e=>`${e}ms linear mainOut 0s 1 normal forwards`,O2=e=>`${e}ms linear effectOut 0s 1 normal forwards`,P2=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,N2=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,k2=e=>`${e}ms linear circleOut 0s 1 normal forwards`,I2=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,D2=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,M2=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,F2=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,j2=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,B2=({time:e=Vd,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:a,circleRightRotation:o,circleClipPath:l,circleOpacity:u})=>{const f=a/360,p=f*e,h=Math.min(100,f*100),d=h>50?Math.round((1-50/h)*100):0;return{rules:{main:I2(t,n),effect:D2(r,i),circleRight:M2(d,o),circleLeft:F2(a),circle:j2(d,l,u)},names:{main:R2(p),effect:O2(p),circleRight:P2(p),circleLeft:N2(p),circle:k2(p)}}},uu=(e,t=null)=>e===null?t:e;let Tp;const P_=()=>{if(!Tp){const e=document.createElement("style");document.head.appendChild(e),Tp=e.sheet}return Tp},Br=e=>{const t=P_(),n=t.rules.length;return t.insertRule(e,n),n},$r=e=>{P_().deleteRule(e)},$2=`${h2}ms ease scaleInFadeOut 0s 1 normal backwards`,G2=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let bp=null;const z2=`${p2}ms ease fadeScaleOut 0s 1 normal backwards`,U2=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let Ap=null;const N_=(e,{onDraw:t=Ml,onStart:n=Ml,onEnd:r=Ml,enableInitiator:i=m2,initiatorParentElement:a=document.body,longPressIndicatorParentElement:o=document.body,minDelay:l=wp,minDist:u=x1,pointNorm:f=Ml}={})=>{let p=i,h=a,d=o,w=t,x=n,L=r,I=f;const v=document.createElement("div"),b=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);v.id=`lasso-initiator-${b}`,v.style.position="fixed",v.style.display="flex",v.style.justifyContent="center",v.style.alignItems="center",v.style.zIndex=99,v.style.width="4rem",v.style.height="4rem",v.style.borderRadius="4rem",v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:C,longPressCircle:H,longPressCircleLeft:q,longPressCircleRight:ae,longPressEffect:we}=v2();let ue=!1,at=!1,Ve=[],Se=[],Ke,Ye=!1,ze=null,Pt=null,mt=null,ht=null,pe=null,We=null,Le=null,Ee=null,$e=null,lt=null;const Et=()=>{ue=!1},Wt=Tt=>{const{left:Ft,top:Ie}=e.getBoundingClientRect();return[Tt.clientX-Ft,Tt.clientY-Ie]};window.addEventListener("mouseup",Et);const Yt=()=>{v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},Qt=(Tt,Ft)=>{const Ie=getComputedStyle(Tt),Kt=+Ie.opacity,gt=Ie.transform.match(/([0-9.-]+)+/g),De=+gt[0],ut=+gt[1],jt=Math.sqrt(De*De+ut*ut);let st=Math.atan2(ut,De)*(180/Math.PI);return st=Ft&&st<=0?360+st:st,{opacity:Kt,scale:jt,rotate:st}},It=Tt=>{if(!p||ue)return;const Ft=Tt.clientX,Ie=Tt.clientY;v.style.top=`${Ie}px`,v.style.left=`${Ft}px`;const Kt=Qt(v),gt=Kt.opacity,De=Kt.scale,ut=Kt.rotate;v.style.opacity=gt,v.style.transform=`translate(-50%,-50%) scale(${De}) rotate(${ut}deg)`,v.style.animation="none",Sl().then(()=>{bp!==null&&$r(bp),bp=Br(G2(gt,De,ut)),v.style.animation=$2,Sl().then(()=>{Yt()})})},pt=()=>{const{opacity:Tt,scale:Ft,rotate:Ie}=Qt(v);v.style.opacity=Tt,v.style.transform=`translate(-50%,-50%) scale(${Ft}) rotate(${Ie}deg)`,v.style.animation="none",Sl(2).then(()=>{Ap!==null&&$r(Ap),Ap=Br(U2(Tt,Ft,Ie)),v.style.animation=z2,Sl().then(()=>{Yt()})})},Wn=(Tt,Ft,{time:Ie=Gd,extraTime:Kt=zd,delay:gt=Ud}={time:Gd,extraTime:zd,delay:Ud})=>{Ye=!0;const De=getComputedStyle(C);C.style.color=De.color,C.style.top=`${Ft}px`,C.style.left=`${Tt}px`,C.style.animation="none";const ut=getComputedStyle(H);H.style.clipPath=ut.clipPath,H.style.opacity=ut.opacity,H.style.animation="none";const jt=Qt(we);we.style.opacity=jt.opacity,we.style.transform=`scale(${jt.scale})`,we.style.animation="none";const st=Qt(q);q.style.transform=`rotate(${st.rotate}deg)`,q.style.animation="none";const tn=Qt(ae);ae.style.transform=`rotate(${tn.rotate}deg)`,ae.style.animation="none",Sl().then(()=>{if(!Ye)return;pe!==null&&$r(pe),ht!==null&&$r(ht),mt!==null&&$r(mt),Pt!==null&&$r(Pt),ze!==null&&$r(ze);const{rules:nn,names:Ot}=L2({time:Ie,extraTime:Kt,delay:gt,currentColor:De.color||"currentcolor",targetColor:C.dataset.activeColor,effectOpacity:jt.opacity||0,effectScale:jt.scale||0,circleLeftRotation:st.rotate||0,circleRightRotation:tn.rotate||0,circleClipPath:ut.clipPath||"inset(0 0 0 50%)",circleOpacity:ut.opacity||0});ze=Br(nn.main),Pt=Br(nn.effect),mt=Br(nn.circleLeft),ht=Br(nn.circleRight),pe=Br(nn.circle),C.style.animation=Ot.main,we.style.animation=Ot.effect,q.style.animation=Ot.circleLeft,ae.style.animation=Ot.circleRight,H.style.animation=Ot.circle})},fn=({time:Tt=Vd}={time:Vd})=>{if(!Ye)return;Ye=!1;const Ft=getComputedStyle(C);C.style.color=Ft.color,C.style.animation="none";const Ie=getComputedStyle(H);H.style.clipPath=Ie.clipPath,H.style.opacity=Ie.opacity,H.style.animation="none";const Kt=Qt(we);we.style.opacity=Kt.opacity,we.style.transform=`scale(${Kt.scale})`,we.style.animation="none";const gt=Ie.clipPath.slice(-2,-1)==="x",De=Qt(q,gt);q.style.transform=`rotate(${De.rotate}deg)`,q.style.animation="none";const ut=Qt(ae);ae.style.transform=`rotate(${ut.rotate}deg)`,ae.style.animation="none",Sl().then(()=>{lt!==null&&$r(lt),$e!==null&&$r($e),Ee!==null&&$r(Ee),Le!==null&&$r(Le),We!==null&&$r(We);const{rules:jt,names:st}=B2({time:Tt,currentColor:Ft.color||"currentcolor",targetColor:C.dataset.color,effectOpacity:Kt.opacity||0,effectScale:Kt.scale||0,circleLeftRotation:De.rotate||0,circleRightRotation:ut.rotate||0,circleClipPath:Ie.clipPath||"inset(0px)",circleOpacity:Ie.opacity||1});We=Br(jt.main),Le=Br(jt.effect),Ee=Br(jt.circleLeft),$e=Br(jt.circleRight),lt=Br(jt.circle),C.style.animation=st.main,we.style.animation=st.effect,q.style.animation=st.circleLeft,ae.style.animation=st.circleRight,H.style.animation=st.circle})},Xt=()=>{w(Ve,Se)},en=Tt=>{if(Ke){if(WA(Tt[0],Tt[1],Ke[0],Ke[1])>x1){Ke=Tt;const Ie=I(Tt);Ve.push(Ie),Se.push(Ie[0],Ie[1]),Ve.length>1&&Xt()}}else{at||(at=!0,x()),Ke=Tt;const Ft=I(Tt);Ve=[Ft],Se=[Ft[0],Ft[1]]}},_t=S_(en,wp,wp),wt=(Tt,Ft)=>{const Ie=Wt(Tt);return Ft?_t(Ie):en(Ie)},Nt=()=>{Ve=[],Se=[],Ke=void 0,Xt()},Ct=Tt=>{It(Tt)},Lt=()=>{ue=!0,at=!0,Nt(),x()},Ut=()=>{pt()},dn=({merge:Tt=!1}={})=>{at=!1;const Ft=[...Ve],Ie=[...Se];return _t.cancel(),Nt(),Ft.length&&L(Ft,Ie,{merge:Tt}),Ft},on=({onDraw:Tt=null,onStart:Ft=null,onEnd:Ie=null,enableInitiator:Kt=null,initiatorParentElement:gt=null,longPressIndicatorParentElement:De=null,minDelay:ut=null,minDist:jt=null,pointNorm:st=null}={})=>{w=uu(Tt,w),x=uu(Ft,x),L=uu(Ie,L),p=uu(Kt,p),I=uu(st,I),gt!==null&&gt!==h&&(h.removeChild(v),gt.appendChild(v),h=gt),De!==null&&De!==d&&(d.removeChild(C),De.appendChild(C),d=De),p?(v.addEventListener("click",Ct),v.addEventListener("mousedown",Lt),v.addEventListener("mouseleave",Ut)):(v.removeEventListener("mousedown",Lt),v.removeEventListener("mouseleave",Ut))},Yr=()=>{h.removeChild(v),d.removeChild(C),window.removeEventListener("mouseup",Et),v.removeEventListener("click",Ct),v.removeEventListener("mousedown",Lt),v.removeEventListener("mouseleave",Ut)},y=()=>Tt=>jv(Tt,{clear:Nt,destroy:Yr,end:dn,extend:wt,set:on,showInitiator:It,hideInitiator:pt,showLongPressIndicator:Wn,hideLongPressIndicator:fn});return h.appendChild(v),d.appendChild(C),on({onDraw:w,onStart:x,onEnd:L,enableInitiator:p,initiatorParentElement:h}),VA(s1("initiator",v),s1("longPressIndicator",C),y(),HA(N_))({})},V2=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,H2=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,W2=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,X2=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,Y2=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,Q2=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,K2=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,q2=function(){const t=(f,p,h,d,w)=>{const x=(d-p)*.5,L=(w-h)*.5;return(2*h-2*d+x+L)*f*f*f+(-3*h+3*d-2*x-L)*f*f+x*f+h},n=(f,p,h)=>{const d=h*f,w=Math.floor(d),x=d-w,L=p[Math.max(0,w-1)],I=p[w],v=p[Math.min(h,w+1)],b=p[Math.min(h,w+2)];return[t(x,L[0],I[0],v[0],b[0]),t(x,L[1],I[1],v[1],b[1])]},r=(f,p,h,d)=>(f-h)**2+(p-d)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(f,p,h)=>{let d=p[0],w=p[1],x=h[0]-d,L=h[1]-w;if(x!==0||L!==0){const I=((f[0]-d)*x+(f[1]-w)*L)/(x*x+L*L);I>1?(d=h[0],w=h[1]):I>0&&(d+=x*I,w+=L*I)}return x=f[0]-d,L=f[1]-w,x*x+L*L};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const a=(f,p,h,d,w)=>{let x=d,L;for(let I=p+1;I<h;I++){const v=i(f[I],f[p],f[h]);v>x&&(L=I,x=v)}x>d&&(L-p>1&&a(f,p,L,d,w),w.push(f[L]),h-L>1&&a(f,L,h,d,w))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const o=(f,p)=>{const h=f.length-1,d=[f[0]];return a(f,0,h,p,d),d.push(f[h]),d},l=(f,{maxIntPointsPerSegment:p=100,tolerance:h=.002}={})=>{const d=f.length,w=d-1,x=w*p+1,L=h**2;let I=[],v;for(let b=0;b<d-1;b++){let C=[f[b].slice(0,2)];v=f[b];for(let H=1;H<p;H++){const q=(b*p+H)/x,ae=n(q,f,w);r(v[0],v[1],ae[0],ae[1])>L&&(C.push(ae),v=ae)}C.push(f[b+1]),C=o(C,L),I=I.concat(C.slice(0,C.length-1))}return I.push(f[f.length-1].slice(0,2)),I.flat()},u=f=>{const p={},h=!Number.isNaN(+f[0][5]);return f.forEach(d=>{const w=d[4];p[w]||(p[w]=[]),h?p[w][d[5]]=d:p[w].push(d)}),Object.entries(p).forEach(d=>{p[d[0]]=d[1].filter(w=>w),p[d[0]].reference=d[1][0]}),p};self.onmessage=function(p){(p.data.points?+p.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),p.data.points;const d=u(p.data.points);self.postMessage({points:Object.entries(d).reduce((w,x)=>(w[x[0]]=l(x[1],p.data.options),w[x[0]].reference=x[1].reference,w),{})})}},Z2=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=XA(q2);i.onmessage=a=>{a.data.error?r(a.data.error):n(a.data.points),i.terminate()},i.postMessage({points:e,options:t})});var J2="1.8.5";const Cp={showRecticle:"showReticle",recticleColor:"reticleColor"},Lp=e=>{Object.keys(e).filter(t=>Cp[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${Cp[t]}" instead.`),e[Cp[t]]=e[t],delete e[t]})},Gr=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>L_.has(e)?"valueZ":R_.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Rp=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},eL=(e={})=>{const t=uA({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];Lp(e);let{renderer:a,backgroundColor:o=PC,backgroundImage:l=$C,canvas:u=document.createElement("canvas"),colorBy:f=su,deselectOnDblClick:p=UC,deselectOnEscape:h=VC,lassoColor:d=nC,lassoLineWidth:w=rC,lassoMinDelay:x=aC,lassoMinDist:L=oC,lassoClearEvent:I=lC,lassoInitiator:v=iC,lassoInitiatorParentElement:b=document.body,lassoOnLongPress:C=sC,lassoLongPressTime:H=Gd,lassoLongPressAfterEffectTime:q=zd,lassoLongPressEffectDelay:ae=Ud,lassoLongPressRevertEffectTime:we=Vd,keyMap:ue=fC,mouseMode:at=JA,showReticle:Ve=GC,reticleColor:Se=zC,pointColor:Ke=LC,pointColorActive:Ye=RC,pointColorHover:ze=OC,showPointConnections:Pt=HC,pointConnectionColor:mt=NC,pointConnectionColorActive:ht=kC,pointConnectionColorHover:pe=IC,pointConnectionColorBy:We=_p,pointConnectionOpacity:Le=_C,pointConnectionOpacityBy:Ee=xp,pointConnectionOpacityActive:$e=SC,pointConnectionSize:lt=xC,pointConnectionSizeActive:Et=EC,pointConnectionSizeBy:Wt=yp,pointConnectionMaxIntPointsPerSegment:Yt=WC,pointConnectionTolerance:Qt=XC,pointSize:It=vC,pointSizeSelected:pt=gC,pointSizeMouseDetection:Wn=YC,pointOutlineWidth:fn=yC,opacity:Xt=bi,opacityBy:en=Ep,opacityByDensityFill:_t=TC,opacityInactiveMax:wt=AC,opacityInactiveScale:Nt=CC,sizeBy:Ct=gp,height:Lt=hC,width:Ut=mC}=e,dn=Ut===bi?1:Ut,on=Lt===bi?1:Lt;const{performanceMode:Yr=QC,opacityByDensityDebounceTime:y=bC}=e;a||(a=d2({regl:e.regl,gamma:e.gamma})),o=pr(o,!0),d=pr(d,!0),Se=pr(Se,!0);let Tt=!1,Ft=y1(o),Ie,Kt,gt=!1,De=null,ut=[0,0],jt=-1,st=[];const tn=new Set,nn=new Set;let Ot=!1;const xn=new Set;let mn=0,Sr=0,tr=!1,Qr=[],bn,ui,ea=e.aspectRatio||dC,Kr,ur,qr,ne,yt,$n,Xn,cr,Oi,ci=g1(ue),ta,Xa,na,$o=!1,xt=!0,Pi=!1,Go;Ke=Ta(Ke)?[...Ke]:[Ke],Ye=Ta(Ye)?[...Ye]:[Ye],ze=Ta(ze)?[...ze]:[ze],Ke=Ke.map(s=>pr(s,!0)),Ye=Ye.map(s=>pr(s,!0)),ze=ze.map(s=>pr(s,!0)),Xt=!Array.isArray(Xt)&&Number.isNaN(+Xt)?Ke[0][3]:Xt,Xt=Sa(Xt,wa,{minLength:1})?[...Xt]:[Xt],It=Sa(It,wa,{minLength:1})?[...It]:[It];let rc=vp/It[0];mt==="inherit"?mt=[...Ke]:(mt=Ta(mt)?[...mt]:[mt],mt=mt.map(s=>pr(s,!0))),ht==="inherit"?ht=[...Ye]:(ht=Ta(ht)?[...ht]:[ht],ht=ht.map(s=>pr(s,!0))),pe==="inherit"?pe=[...ze]:(pe=Ta(pe)?[...pe]:[pe],pe=pe.map(s=>pr(s,!0))),Le==="inherit"?Le=[...Xt]:Le=Sa(Le,wa,{minLength:1})?[...Le]:[Le],lt==="inherit"?lt=[...It]:lt=Sa(lt,wa,{minLength:1})?[...lt]:[lt],f=Gr(f,su),en=Gr(en,Ep,{allowDensity:!0}),Ct=Gr(Ct,gp),We=Gr(We,_p,{allowSegment:!0}),Ee=Gr(Ee,xp,{allowSegment:!0}),Wt=Gr(Wt,yp,{allowSegment:!0});let fi,di,mi,ic,wr=0,as=0,Ya,os,Qa,zo,Uo,Vo,Ho,Ni=!1,Ka=null,ls,ss,ac=Ve,ra,ia=0,Wo,aa=0,us=!1,fr=!1,hi=!1,pi=wl,ki=wl,Nn,Mr=!1,Mn=e.xScale||null,En=e.yScale||null,oa=0,Xo=0,Yo=0,Qo=0;Mn&&(oa=Mn.domain()[0],Xo=Mn.domain()[1]-Mn.domain()[0],Mn.range([0,dn])),En&&(Yo=En.domain()[0],Qo=En.domain()[1]-En.domain()[0],En.range([on,0]));const oc=s=>-1+s/dn*2,dr=s=>1+s/on*-2,nr=()=>[oc(i[0]),dr(i[1])],Tr=(s,D)=>{const z=[s,D,1,1],oe=O0(n,ar(n,Kr,ar(n,Ie.view,qr)));return dd(z,z,oe),z.slice(0,2)},lc=(s=0)=>{const D=ro(),oe=(Xa[1]-na[1])/u.height;return(Oi*D+s)*oe},cs=()=>Ot?bn.points.filter((s,D)=>xn.has(D)):bn.points,Ko=(s,D,z,oe)=>{const be=bn.range(s,D,z,oe);return Ot?be.filter(je=>xn.has(je)):be},fs=()=>{const[s,D]=nr(),[z,oe]=Tr(s,D),be=lc(4),je=Ko(z-be,oe-be,z+be,oe+be);let Xe=be,dt=-1;return je.forEach(Bt=>{const[Dt,_n]=bn.points[Bt],Vt=Sp(Dt,_n,z,oe);Vt<Xe&&(Xe=Vt,dt=Bt)}),dt},xm=(s,D)=>{Qr=s,Kt.setPoints(D),t.publish("lassoExtend",{coordinates:s})},Em=s=>{const D=e2(s);if(!t2(D))return[];const z=Ko(...D),oe=[];return z.forEach(be=>{l2(s,bn.points[be])&&oe.push(be)}),oe},la=()=>{Qr=[],Kt&&Kt.clear()},qa=s=>s&&s.length>4,Ii=(s,D)=>{if($n||!Pt||!qa(bn.points[s[0]]))return;const z=D===0,oe=D===1?Xe=>nn.add(Xe):Ml,be=Object.keys(s.reduce((Xe,dt)=>{const Bt=bn.points[dt],_n=Array.isArray(Bt[4])?Bt[4][0]:Bt[4];return Xe[_n]=!0,Xe},{})),je=ne.getData().opacities;be.filter(Xe=>!nn.has(+Xe)).forEach(Xe=>{const dt=yt[Xe][0],Bt=yt[Xe][2],Dt=yt[Xe][3],_n=dt*4+Dt*2,Vt=_n+Bt*2+4;je.__original__===void 0&&(je.__original__=je.slice());for(let Mt=_n;Mt<Vt;Mt++)je[Mt]=z?je.__original__[Mt]:$e;oe(Xe)}),ne.getBuffer().opacities.subdata(je,0)},qo=s=>[s%wr/wr+as,Math.floor(s/wr)/wr+as],_m=s=>Ot&&!xn.has(s),Zo=({preventEvent:s=!1}={})=>{I===N0&&la(),st.length&&(s||t.publish("deselect"),nn.clear(),Ii(st,0),st=[],tn.clear(),xt=!0)},sa=(s,{merge:D=!1,preventEvent:z=!1}={})=>{const oe=Array.isArray(s)?s:[s],be=[...st];if(D){if(st=UA(st,oe),be.length===st.length){xt=!0;return}}else{if(st&&st.length&&Ii(st,0),be.length>0&&oe.length===0){Zo({preventEvent:z});return}st=oe}if(GA(be,st)){xt=!0;return}const je=[];tn.clear(),nn.clear();for(let Xe=st.length-1;Xe>=0;Xe--){const dt=st[Xe];if(dt<0||dt>=mn||_m(dt)){st.splice(Xe,1);continue}tn.add(dt),je.push.apply(je,qo(dt))}os({usage:"dynamic",type:"float",data:je}),Ii(st,1),z||t.publish("select",{points:st}),xt=!0},Za=(s,{showReticleOnce:D=!1,preventEvent:z=!1}={})=>{let oe=!1;if(s>=0&&s<mn){oe=!0;const be=Nn,je=s!==Nn;+be>=0&&je&&!tn.has(be)&&Ii([be],0),Nn=s,Qa.subdata(qo(s)),tn.has(s)||Ii([s],2),je&&!z&&t.publish("pointover",Nn)}else oe=+Nn>=0,oe&&(tn.has(Nn)||Ii([Nn],0),z||t.publish("pointout",Nn)),Nn=void 0;oe&&(xt=!0,Pi=D)},ds=s=>{const D=u.getBoundingClientRect();return i[0]=s.clientX-D.left,i[1]=s.clientY-D.top,[...i]},An=N_(u,{onStart:()=>{Ie.config({isFixed:!0}),gt=!0,tr=!0,la(),jt>=0&&(clearTimeout(jt),jt=-1),t.publish("lassoStart")},onDraw:xm,onEnd:(s,D,{merge:z=!1}={})=>{Ie.config({isFixed:!1}),Qr=[...s];const oe=Em(D);sa(oe,{merge:z}),t.publish("lassoEnd",{coordinates:Qr}),I===$v&&la()},enableInitiator:v,initiatorParentElement:b,pointNorm:([s,D])=>Tr(oc(s),dr(D))}),Jo=()=>at===T_,Ja=(s,D)=>{switch(ci[D]){case zv:return s.altKey;case Uv:return s.metaKey;case A_:return s.ctrlKey;case C_:return s.metaKey;case Vv:return s.shiftKey;default:return!1}},sc=s=>document.elementsFromPoint(s.clientX,s.clientY).some(D=>D===u),ms=s=>{!fr||s.buttons!==1||(gt=!0,De=performance.now(),ut=ds(s),tr=Jo()||Ja(s,Gv),!tr&&C&&(An.showLongPressIndicator(s.clientX,s.clientY,{time:H,extraTime:q,delay:ae}),jt=setTimeout(()=>{jt=-1,tr=!0},H)))},hs=s=>{fr&&(gt=!1,jt>=0&&(clearTimeout(jt),jt=-1),tr&&(s.preventDefault(),tr=!1,An.end({merge:Ja(s,Wd)})),C&&An.hideLongPressIndicator({time:we}))},el=s=>{if(!fr)return;s.preventDefault();const D=ds(s);if(Sp(...D,...ut)>=L)return;const z=performance.now()-De;if(!v||z<qC){const oe=fs();oe>=0?(st.length&&I===N0&&la(),sa([oe],{merge:Ja(s,Wd)})):ta||(ta=setTimeout(()=>{ta=null,An.showInitiator(s)},KC))}},tl=s=>{An.hideInitiator(),ta&&(clearTimeout(ta),ta=null),p&&(s.preventDefault(),Zo())},Zr=s=>{if(hi||(Mr=sc(s),hi=!0),!fr||!Mr&&!gt)return;const D=ds(s),oe=Sp(...D,...ut)>=L;Mr&&!tr&&Za(fs()),tr?(s.preventDefault(),An.extend(s,!0)):gt&&C&&oe&&An.hideLongPressIndicator({time:we}),jt>=0&&oe&&(clearTimeout(jt),jt=-1),gt&&(xt=!0)},eo=()=>{Nn=void 0,Mr=!1,hi=!1,fr&&(+Nn>=0&&!tn.has(Nn)&&Ii([Nn],0),hs(),xt=!0)},nl=()=>{const s=Math.max(It.length,Xt.length);aa=Math.max(2,Math.ceil(Math.sqrt(s)));const D=new Float32Array(aa**2*4);for(let z=0;z<s;z++){D[z*4]=It[z]||0,D[z*4+1]=Math.min(1,Xt[z]||0);const oe=Number((Ye[z]||Ye[0])[3]);D[z*4+2]=Math.min(1,Number.isNaN(oe)?1:oe);const be=Number((ze[z]||ze[0])[3]);D[z*4+3]=Math.min(1,Number.isNaN(be)?1:be)}return a.regl.texture({data:D,shape:[aa,aa,4],type:"float"})},ps=(s=Ke,D=Ye,z=ze)=>{const oe=s.length,be=D.length,je=z.length,Xe=[];if(oe===be&&be===je)for(let dt=0;dt<oe;dt++)Xe.push(s[dt],D[dt],z[dt],o);else for(let dt=0;dt<oe;dt++){const Bt=[s[dt][0],s[dt][1],s[dt][2],1],Dt=f===su?D[0]:Bt,_n=f===su?z[0]:Bt;Xe.push(s[dt],Dt,_n,o)}return Xe},vs=()=>{const s=ps(),D=s.length;ia=Math.max(2,Math.ceil(Math.sqrt(D)));const z=new Float32Array(ia**2*4);return s.forEach((oe,be)=>{z[be*4]=oe[0],z[be*4+1]=oe[1],z[be*4+2]=oe[2],z[be*4+3]=oe[3]}),a.regl.texture({data:z,shape:[ia,ia,4],type:"float"})},Sm=(s,D)=>{ur[0]=s/ui,ur[5]=D},gs=()=>{ui=dn/on,Kr=fd([],[1/ui,1,1]),ur=fd([],[1/ui,1,1]),qr=fd([],[ea,1,1])},wm=s=>{+s<=0||(ea=s)},ys=(s,D)=>z=>{if(!z||!z.length)return;const be=[...s()];let je=Ta(z)?z:[z];je=je.map(Xe=>pr(Xe,!0)),ra&&ra.destroy();try{D(je),ra=vs()}catch{console.error("Invalid colors. Switching back to default colors."),D(be),ra=vs()}},Tm=ys(()=>Ke,s=>{Ke=s}),bm=ys(()=>Ye,s=>{Ye=s}),vi=ys(()=>ze,s=>{ze=s}),Am=()=>{const s=Tr(-1,-1),D=Tr(1,1),z=(s[0]+1)/2,oe=(D[0]+1)/2,be=(s[1]+1)/2,je=(D[1]+1)/2,Xe=[oa+z*Xo,oa+oe*Xo],dt=[Yo+be*Qo,Yo+je*Qo];return[Xe,dt]},Di=()=>{if(!Mn&&!En)return;const[s,D]=Am();Mn&&Mn.domain(s),En&&En.domain(D)},Mi=s=>{on=Math.max(1,s),u.height=Math.floor(on*window.devicePixelRatio),En&&(En.range([on,0]),Di())},Cm=s=>{if(s===bi){Lt=s,u.style.height="100%",window.requestAnimationFrame(()=>{u&&Mi(u.getBoundingClientRect().height)});return}!+s||+s<=0||(Lt=+s,Mi(Lt),u.style.height=`${Lt}px`)},gi=()=>{Oi=Wn,Wn===bi&&(Oi=Array.isArray(It)?zA(It):It)},uc=s=>{Sa(s,wa,{minLength:1})&&(It=[...s]),Vf(+s)&&(It=[+s]),rc=vp/It[0],Wo=nl(),gi()},ca=s=>{!+s||+s<0||(pt=+s)},cc=s=>{!+s||+s<0||(fn=+s)},Jr=s=>{dn=Math.max(1,s),u.width=Math.floor(dn*window.devicePixelRatio),Mn&&(Mn.range([0,dn]),Di())},xs=s=>{if(s===bi){Ut=s,u.style.width="100%",window.requestAnimationFrame(()=>{u&&Jr(u.getBoundingClientRect().width)});return}!+s||+s<=0||(Ut=+s,Jr(Ut),u.style.width=`${dn}px`)},Lm=s=>{Sa(s,wa,{minLength:1})&&(Xt=[...s]),Vf(+s)&&(Xt=[+s]),Wo=nl()},Es=s=>{switch(s){case"valueZ":return pi;case"valueW":return ki;default:return null}},_s=(s,D)=>{switch(s){case wi:return z=>Math.round(z*(D.length-1));case wl:default:return Ml}},fc=s=>{f=Gr(s,su)},Rm=s=>{en=Gr(s,Ep,{allowDensity:!0})},Om=s=>{Ct=Gr(s,gp)},dc=s=>{We=Gr(s,_p,{allowSegment:!0})},Zt=s=>{Ee=Gr(s,xp,{allowSegment:!0})},mc=s=>{Wt=Gr(s,yp,{allowSegment:!0})},Pm=()=>[u.width,u.height],Fr=()=>l,Ss=()=>ra,rl=()=>ia,Fi=()=>.5/ia,ws=()=>window.devicePixelRatio,il=()=>Ya,ji=()=>os,al=()=>Wo,hc=()=>aa,Ts=()=>.5/aa,bs=()=>0,Nm=()=>mi||fi,km=()=>wr,Im=()=>.5/wr,pc=()=>ur,ol=()=>Ie.view,to=()=>qr,no=()=>ar(r,ur,ar(r,Ie.view,qr)),ro=()=>Ie.scaling[0]>1?Math.asinh(Hf(1,Ie.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:Hf(rc,Ie.scaling[0])*window.devicePixelRatio,fa=()=>Ot?xn.size:mn,Bi=()=>st.length,As=()=>Bi()>0?wt:1,Cs=()=>Bi()>0?Nt:1,Ls=()=>+(f==="valueZ"),vc=()=>+(f==="valueW"),gc=()=>+(en==="valueZ"),yc=()=>+(en==="valueW"),xc=()=>+(en==="density"),Ec=()=>+(Ct==="valueZ"),_c=()=>+(Ct==="valueW"),Sc=()=>f==="valueZ"?pi===wi?Ke.length-1:1:ki===wi?Ke.length-1:1,wc=()=>en==="valueZ"?pi===wi?Xt.length-1:1:ki===wi?Xt.length-1:1,da=()=>Ct==="valueZ"?pi===wi?It.length-1:1:ki===wi?It.length-1:1,Rs=s=>{if(en!=="density")return 1;const D=ro(),z=It[0]*D,oe=2/(2/Ie.view[0])*(2/(2/Ie.view[5])),be=s.viewportHeight,je=s.viewportWidth;let Xe=_t*je*be/(Sr*z*z)*v1(1,oe);Xe*=Yr?1:1/(.25*Math.PI);const dt=Hf(vp,z)+.5;return Xe*=(z/dt)**2,v1(1,Hf(0,Xe))},Os=a.regl({framebuffer:()=>ic,vert:K2,frag:Q2,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>di,endStateTex:()=>fi,t:(s,D)=>D.t},count:3}),br=(s,D,z,oe=YA,be=As,je=Cs)=>a.regl({frag:Yr?X2:W2,vert:Y2(oe),blend:{enable:!Yr,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:z,size:2}},uniforms:{resolution:Pm,modelViewProjection:no,devicePixelRatio:ws,pointScale:ro,encodingTex:al,encodingTexRes:hc,encodingTexEps:Ts,pointOpacityMax:be,pointOpacityScale:je,pointSizeExtra:s,globalState:oe,colorTex:Ss,colorTexRes:rl,colorTexEps:Fi,stateTex:Nm,stateTexRes:km,stateTexEps:Im,isColoredByZ:Ls,isColoredByW:vc,isOpacityByZ:gc,isOpacityByW:yc,isOpacityByDensity:xc,isSizedByZ:Ec,isSizedByW:_c,colorMultiplicator:Sc,opacityMultiplicator:wc,opacityDensity:Rs,sizeMultiplicator:da,numColorStates:KA},count:D,primitive:"points"}),Dm=br(bs,fa,il),Mm=br(bs,()=>1,()=>Qa,QA,()=>1,()=>1),Fm=br(()=>(pt+fn*2)*window.devicePixelRatio,Bi,ji,pp,()=>1,()=>1),Ps=br(()=>(pt+fn)*window.devicePixelRatio,Bi,ji,u1,()=>1,()=>1),jm=br(()=>pt*window.devicePixelRatio,Bi,ji,pp,()=>1,()=>1),Bm=()=>{Fm(),Ps(),jm()},$m=a.regl({frag:V2,vert:H2,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:no,texture:Fr},count:6}),Ns=a.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>Qr},uniforms:{modelViewProjection:no,color:()=>d},elements:()=>Array.from({length:Qr.length-2},(s,D)=>[0,D+1,D+2])}),Gm=()=>{if(!(Nn>=0))return;const[s,D]=bn.points[Nn].slice(0,2),z=[s,D,0,1];ar(n,ur,ar(n,Ie.view,qr)),dd(z,z,n),Xn.setPoints([-1,z[1],1,z[1]]),cr.setPoints([z[0],1,z[0],-1]),Xn.draw(),cr.draw(),br(()=>(pt+fn*2)*window.devicePixelRatio,()=>1,Qa,pp)(),br(()=>(pt+fn)*window.devicePixelRatio,()=>1,Qa,u1)()},ll=s=>{const D=new Float32Array(s*2);let z=0;for(let oe=0;oe<s;++oe){const be=qo(oe);D[z]=be[0],D[z+1]=be[1],z+=2}return D},ks=(s,D={})=>{const z=s.length;wr=Math.max(2,Math.ceil(Math.sqrt(z))),as=.5/wr;const oe=new Float32Array(wr**2*4);let be=!0,je=!0,Xe=0,dt=0,Bt=0;for(let Dt=0;Dt<z;++Dt)Xe=Dt*4,oe[Xe]=s[Dt][0],oe[Xe+1]=s[Dt][1],dt=s[Dt][2]||0,Bt=s[Dt][3]||0,oe[Xe+2]=dt,oe[Xe+3]=Bt,be&&(be=Number.isInteger(dt)),je&&(je=Number.isInteger(Bt));return D.z&&d1.includes(D.z)?pi=D.z:pi=be?wl:wi,D.w&&d1.includes(D.w)?ki=D.w:ki=je?wl:wi,a.regl.texture({data:oe,shape:[wr,wr,4],type:"float"})},Tc=(s,D={})=>{if(!fi)return!1;if(Ni){const z=di;di=mi,z.destroy()}else di=fi;return mi=ks(s,D),ic=a.regl.framebuffer({color:mi,depth:!1,stencil:!1}),fi=void 0,!0},Is=()=>!!(di&&mi),zm=()=>{di&&(di.destroy(),di=void 0),mi&&(mi.destroy(),mi=void 0)},io=(s,D={})=>{fr=!1,mn=s.length,Sr=mn,fi&&fi.destroy(),fi=ks(s,D),Ya({usage:"static",type:"float",data:ll(mn)}),bn=new CA(s,z=>z[0],z=>z[1],16),fr=!0},bc=(s,D)=>{zo=Ie.target,Uo=s,Vo=Ie.distance[0],Ho=D},Um=()=>zo!==void 0&&Uo!==void 0&&Vo!==void 0&&Ho!==void 0,Vm=()=>{zo=void 0,Uo=void 0,Vo=void 0,Ho=void 0},Hm=s=>{const D=We==="inherit"?f:We;if(D==="segment"){const z=mt.length-1;return z<1?[]:s.reduce((oe,be,je)=>{let Xe=0;const dt=[];for(let Dt=2;Dt<be.length;Dt+=2){const _n=Math.sqrt((be[Dt-2]-be[Dt])**2+(be[Dt-1]-be[Dt+1])**2);dt.push(_n),Xe+=_n}oe[je]=[0];let Bt=0;for(let Dt=0;Dt<be.length/2-1;Dt++)Bt+=dt[Dt],oe[je].push(Math.floor(Bt/Xe*z)*4);return oe},[])}if(D){const z=Rp(D),oe=_s(Es(D),We==="inherit"?Ke:mt);return yt.reduce((be,[je,Xe])=>(be[je]=oe(Xe[z])*4,be),[])}return Array(yt.length).fill(0)},Wm=()=>{const s=Ee==="inherit"?en:Ee;if(s==="segment"){const D=Le.length-1;return D<1?[]:yt.reduce((z,[oe,be,je])=>(z[oe]=l1(je,Xe=>Le[Math.floor(Xe/(je-1)*D)]),z),[])}if(s){const D=Rp(s),z=Ee==="inherit"?Xt:Le,oe=_s(Es(s),z);return yt.reduce((be,[je,Xe])=>(be[je]=z[oe(Xe[D])],be),[])}},Xm=()=>{const s=Wt==="inherit"?Ct:Wt;if(s==="segment"){const D=lt.length-1;return D<1?[]:yt.reduce((z,[oe,be,je])=>(z[oe]=l1(je,Xe=>lt[Math.floor(Xe/(je-1)*D)]),z),[])}if(s){const D=Rp(s),z=Wt==="inherit"?It:lt,oe=_s(Es(s),z);return yt.reduce((be,[je,Xe])=>(be[je]=z[oe(Xe[D])],be),[])}},Ym=s=>{yt=[];let D=0;Object.keys(s).forEach((z,oe)=>{yt[z]=[oe,s[z].reference,s[z].length/2,D],D+=s[z].length/2})},ma=s=>new Promise(D=>{ne.setPoints([]),!s||!s.length?D():($n=!0,Z2(s,{maxIntPointsPerSegment:Yt,tolerance:Qt}).then(z=>{Ym(z);const oe=Object.values(z);ne.setPoints(oe.length===1?oe[0]:oe,{colorIndices:Hm(oe),opacities:Wm(),widths:Xm()}),$n=!1,D()}))}),ao=({preventEvent:s=!1}={})=>(Ot=!1,xn.clear(),Ya.subdata(ll(mn)),new Promise(D=>{const z=()=>{t.subscribe("draw",()=>{s||t.publish("unfilter"),D()},1),xt=!0};Pt||qa(bn.points[0])?ma(cs()).then(()=>{s||t.publish("pointConnectionsDraw"),z()}):z()})),Ac=(s,{preventEvent:D=!1}={})=>{const z=Array.isArray(s)?s:[s];Ot=!0,xn.clear();const oe=[],be=[];for(let je=z.length-1;je>=0;je--){const Xe=z[je];if(Xe<0||Xe>=mn){z.splice(je,1);continue}xn.add(Xe),oe.push.apply(oe,qo(Xe)),tn.has(Xe)&&be.push(Xe)}return Ya.subdata(oe),sa(be,{preventEvent:D}),xn.has(Nn)||Za(-1,{preventEvent:D}),new Promise(je=>{const Xe=()=>{t.subscribe("draw",()=>{D||t.publish("filter",{points:z}),je()},1),xt=!0};Pt||qa(bn.points[0])?ma(cs()).then(()=>{D||t.publish("pointConnectionsDraw"),sa(be,{preventEvent:D}),Xe()}):Xe()})},oo=()=>Ko(na[0],na[1],Xa[0],Xa[1]),ha=S_(()=>{Sr=oo().length},y),Cc=s=>{const[D,z]=zo,[oe,be]=Uo,je=1-s,Xe=D*je+oe*s,dt=z*je+be*s,Bt=Vo*je+Ho*s;Ie.lookAt([Xe,dt],Bt)},Lc=()=>Is(),Rc=()=>Um(),Oc=(s,D)=>{Ka||(Ka=performance.now());const z=performance.now()-Ka,oe=f2(D(z/s),0,1);return Lc()&&Os({t:oe}),Rc()&&Cc(oe),z<s},Pc=()=>{Ni=!1,Ka=null,ls=void 0,ss=void 0,Ve=ac,zm(),Vm(),t.publish("transitionEnd")},sl=({duration:s=500,easing:D=f1})=>{Ni&&t.publish("transitionEnd"),Ni=!0,Ka=null,ls=s,ss=k0(D)?eC[D]||f1:D,ac=Ve,Ve=!1,t.publish("transitionStart")},Qm=s=>new Promise((D,z)=>{if(!s||Array.isArray(s))D(s);else{const oe=Array.isArray(s.x)||ArrayBuffer.isView(s.x)?s.x.length:0,be=(Array.isArray(s.x)||ArrayBuffer.isView(s.x))&&(Vt=>s.x[Vt]),je=(Array.isArray(s.y)||ArrayBuffer.isView(s.y))&&(Vt=>s.y[Vt]),Xe=(Array.isArray(s.line)||ArrayBuffer.isView(s.line))&&(Vt=>s.line[Vt]),dt=(Array.isArray(s.lineOrder)||ArrayBuffer.isView(s.lineOrder))&&(Vt=>s.lineOrder[Vt]),Bt=Object.keys(s),Dt=(()=>{const Vt=Bt.find(Mt=>L_.has(Mt));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Mt=>s[Vt][Mt])})(),_n=(()=>{const Vt=Bt.find(Mt=>R_.has(Mt));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Mt=>s[Vt][Mt])})();be&&je&&Dt&&_n&&Xe&&dt?D(s.x.map((Vt,Mt)=>[Vt,je(Mt),Dt(Mt),_n(Mt),Xe(Mt),dt(Mt)])):be&&je&&Dt&&_n&&Xe?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt),_n(Mt),Xe(Mt)])):be&&je&&Dt&&_n?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt),_n(Mt)])):be&&je&&Dt?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt)])):be&&je?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt)])):z(new Error("You need to specify at least x and y"))}}),pa=(s,D={})=>Tt?Promise.reject(new Error("The instance was already destroyed")):Qm(s).then(z=>new Promise(oe=>{if(Tt){oe();return}let be=!1;(!D.preventFilterReset||(z==null?void 0:z.length)!==mn)&&(Ot=!1,xn.clear());const je=z&&qa(z[0])&&(Pt||D.showPointConnectionsOnce),{zDataType:Xe,wDataType:dt}=D;z&&(D.transition&&(z.length===mn?be=Tc(z,{z:Xe,w:dt}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),io(z,{z:Xe,w:dt}),D.hover!==void 0&&Za(D.hover,{preventEvent:!0}),D.select!==void 0&&sa(D.select,{preventEvent:!0}),D.filter!==void 0&&Ac(D.filter,{preventEvent:!0}),je&&ma(z).then(()=>{t.publish("pointConnectionsDraw"),xt=!0,Pi=D.showReticleOnce})),D.transition&&be?(je?Promise.all([new Promise(Bt=>{t.subscribe("transitionEnd",()=>{xt=!0,Pi=D.showReticleOnce,Bt()},1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(oe):t.subscribe("transitionEnd",()=>{xt=!0,Pi=D.showReticleOnce,oe()},1),sl({duration:D.transitionDuration,easing:D.transitionEasing})):(je?Promise.all([new Promise(Bt=>{t.subscribe("draw",Bt,1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(oe):t.subscribe("draw",oe,1),xt=!0,Pi=D.showReticleOnce)})),Cn=s=>(...D)=>{const z=s(...D);return xt=!0,z},Nc=s=>{let D=1/0,z=-1/0,oe=1/0,be=-1/0;for(let je=0;je<s.length;je++){const[Xe,dt]=bn.points[s[je]];D=Math.min(D,Xe),z=Math.max(z,Xe),oe=Math.min(oe,dt),be=Math.max(be,dt)}return{x:D,y:oe,width:z-D,height:be-oe}},Ds=(s,D={})=>new Promise(z=>{const oe=[s.x+s.width/2,s.y+s.height/2],be=2*Math.atan(1),je=s.height*ui>s.width?s.height/2/Math.tan(be/2):s.width/2/Math.tan(be*ui/2);D.transition?(Ie.config({isFixed:!0}),bc(oe,je),t.subscribe("transitionEnd",()=>{z(),Ie.config({isFixed:!1})},1),sl({duration:D.transitionDuration,easing:D.transitionEasing})):(Ie.lookAt(oe,je),t.subscribe("draw",z,1),xt=!0)}),$i=(s,D={})=>{if(!fr)return Promise.reject(new Error(m1));const z=Nc(s),oe=z.x+z.width/2,be=z.y+z.height/2,je=lc(),Xe=1+(D.padding||0),dt=Math.max(z.width,je)*Xe,Bt=Math.max(z.height,je)*Xe,Dt=oe-dt/2,_n=be-Bt/2;return Ds({x:Dt,y:_n,width:dt,height:Bt},D)},Ms=(s,D,z={})=>new Promise(oe=>{z.transition?(Ie.config({isFixed:!0}),bc(s,D),t.subscribe("transitionEnd",()=>{oe(),Ie.config({isFixed:!1})},1),sl({duration:z.transitionDuration,easing:z.transitionEasing})):(Ie.lookAt(s,D),t.subscribe("draw",oe,1),xt=!0)}),kc=(s={})=>Ms([0,0],1,s),Km=s=>{if(!fr)throw new Error(m1);const D=bn.points[s];if(!D)return;const z=[D[0],D[1],0,1];ar(n,Kr,ar(n,Ie.view,qr)),dd(z,z,n);const oe=dn*(z[0]+1)/2,be=on*(.5-z[1]/2);return[oe,be]},Fs=()=>{ne.setStyle({color:ps(mt,ht,pe),opacity:Le===null?null:Le[0],width:lt[0]})},Ic=()=>{const s=Math.round(Ft)>.5?0:255;An.initiator.style.border=`1px dashed rgba(${s}, ${s}, ${s}, 0.33)`,An.initiator.style.background=`rgba(${s}, ${s}, ${s}, 0.1)`},Dc=()=>{const s=Math.round(Ft)>.5?0:255;An.longPressIndicator.style.color=`rgb(${s}, ${s}, ${s})`,An.longPressIndicator.dataset.color=`rgb(${s}, ${s}, ${s})`;const D=d.map(z=>Math.round(z*255));An.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},js=s=>{s&&(o=pr(s,!0),Ft=y1(o),Ic(),Dc())},Mc=s=>{s?k0(s)?p1(a.regl,s).then(D=>{l=D,xt=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${s}`),l=null}):s._reglType==="texture2d"?l=s:l=null:l=null},qm=s=>{s>0&&Ie.lookAt(Ie.target,s,Ie.rotation)},Fc=s=>{s!==null&&Ie.lookAt(Ie.target,Ie.distance[0],s)},jc=s=>{s&&Ie.lookAt(s,Ie.distance[0],Ie.rotation)},Bc=s=>{s&&Ie.setView(s)},ul=s=>{if(!s)return;d=pr(s,!0),Kt.setStyle({color:d});const D=d.map(z=>Math.round(z*255));An.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},Zm=s=>{Number.isNaN(+s)||+s<1||(w=+s,Kt.setStyle({width:w}))},yi=s=>{+s&&(x=+s,An.set({minDelay:x}))},cl=s=>{+s&&(L=+s,An.set({minDist:L}))},$c=s=>{I=h1(tC,I)(s)},Gc=s=>{v=!!s,An.set({enableInitiator:v})},zc=s=>{b=s,An.set({startInitiatorParentElement:b})},Uc=s=>{C=!!s},Vc=s=>{H=Number(s)},Hc=s=>{q=Number(s)},Wc=s=>{ae=Number(s)},Xc=s=>{we=Number(s)},Yc=s=>{ue=Object.entries(s).reduce((D,[z,oe])=>(cC.includes(z)&&uC.includes(oe)&&(D[z]=oe),D),{}),ci=g1(ue),ci[Hd]?Ie.config({isRotate:!0,mouseDownMoveModKey:ci[Hd]}):Ie.config({isRotate:!1})},Cr=s=>{at=h1(ZA,Bv)(s),Ie.config({defaultMouseDownMoveAction:at===b_?"rotate":"pan"})},Qc=s=>{s!==null&&(Ve=s)},Jm=s=>{s&&(Se=pr(s,!0),Xn.setStyle({color:Se}),cr.setStyle({color:Se}))},ei=s=>{s&&(Mn=s,oa=s.domain()[0],Xo=s?s.domain()[1]-s.domain()[0]:0,Mn.range([0,dn]),Di())},Bs=s=>{s&&(En=s,Yo=En.domain()[0],Qo=En?En.domain()[1]-En.domain()[0]:0,En.range([on,0]),Di())},Gi=s=>{p=!!s},fl=s=>{h=!!s},Kc=s=>{Pt=!!s,Pt?qa(bn.points[0])&&ma(cs()).then(()=>{t.publish("pointConnectionsDraw"),xt=!0}):ma()},dl=(s,D)=>z=>{if(z==="inherit")s([...D()]);else{const oe=Ta(z)?z:[z];s(oe.map(be=>pr(be,!0)))}Fs()},qc=dl(s=>{mt=s},()=>Ke),Zc=dl(s=>{ht=s},()=>Ye),Jc=dl(s=>{pe=s},()=>ze),eh=s=>{Sa(s,wa,{minLength:1})&&(Le=[...s]),Vf(+s)&&(Le=[+s]),mt=mt.map(D=>(D[3]=Number.isNaN(+Le[0])?D[3]:+Le[0],D)),Fs()},th=s=>{!Number.isNaN(+s)&&+s&&($e=+s)},nh=s=>{Sa(s,wa,{minLength:1})&&(lt=[...s]),Vf(+s)&&(lt=[+s]),Fs()},rh=s=>{!Number.isNaN(+s)&&+s&&(Et=Math.max(0,s))},ih=s=>{Yt=Math.max(0,s)},ah=s=>{Qt=Math.max(0,s)},oh=s=>{Wn=s,gi()},ef=s=>{_t=+s},tf=s=>{wt=+s},lh=s=>{Nt=+s},sh=s=>{a.gamma=s},$s=s=>{if(Lp({property:!0}),s==="aspectRatio")return ea;if(s==="background"||s==="backgroundColor")return o;if(s==="backgroundImage")return l;if(s==="camera")return Ie;if(s==="cameraTarget")return Ie.target;if(s==="cameraDistance")return Ie.distance[0];if(s==="cameraRotation")return Ie.rotation;if(s==="cameraView")return Ie.view;if(s==="canvas")return u;if(s==="colorBy")return f;if(s==="sizeBy")return Ct;if(s==="deselectOnDblClick")return p;if(s==="deselectOnEscape")return h;if(s==="height")return Lt;if(s==="lassoColor")return d;if(s==="lassoLineWidth")return w;if(s==="lassoMinDelay")return x;if(s==="lassoMinDist")return L;if(s==="lassoClearEvent")return I;if(s==="lassoInitiator")return v;if(s==="lassoInitiatorElement")return An.initiator;if(s==="lassoInitiatorParentElement")return b;if(s==="keyMap")return{...ue};if(s==="mouseMode")return at;if(s==="opacity")return Xt.length===1?Xt[0]:Xt;if(s==="opacityBy")return en;if(s==="opacityByDensityFill")return _t;if(s==="opacityByDensityDebounceTime")return y;if(s==="opacityInactiveMax")return wt;if(s==="opacityInactiveScale")return Nt;if(s==="points")return bn.points;if(s==="hoveredPoint")return Nn;if(s==="selectedPoints")return[...st];if(s==="filteredPoints")return Ot?Array.from(xn):Array.from({length:bn.points.length},(D,z)=>z);if(s==="pointsInView")return oo();if(s==="pointColor")return Ke.length===1?Ke[0]:Ke;if(s==="pointColorActive")return Ye.length===1?Ye[0]:Ye;if(s==="pointColorHover")return ze.length===1?ze[0]:ze;if(s==="pointOutlineWidth")return fn;if(s==="pointSize")return It.length===1?It[0]:It;if(s==="pointSizeSelected")return pt;if(s==="pointSizeMouseDetection")return Wn;if(s==="showPointConnections")return Pt;if(s==="pointConnectionColor")return mt.length===1?mt[0]:mt;if(s==="pointConnectionColorActive")return ht.length===1?ht[0]:ht;if(s==="pointConnectionColorHover")return pe.length===1?pe[0]:pe;if(s==="pointConnectionColorBy")return We;if(s==="pointConnectionOpacity")return Le.length===1?Le[0]:Le;if(s==="pointConnectionOpacityBy")return Ee;if(s==="pointConnectionOpacityActive")return $e;if(s==="pointConnectionSize")return lt.length===1?lt[0]:lt;if(s==="pointConnectionSizeActive")return Et;if(s==="pointConnectionSizeBy")return Wt;if(s==="pointConnectionMaxIntPointsPerSegment")return Yt;if(s==="pointConnectionTolerance")return Qt;if(s==="reticleColor")return Se;if(s==="regl")return a.regl;if(s==="showReticle")return Ve;if(s==="version")return J2;if(s==="width")return Ut;if(s==="xScale")return Mn;if(s==="yScale")return En;if(s==="performanceMode")return Yr;if(s==="gamma")return a.gamma;if(s==="renderer")return a;if(s==="isDestroyed")return Tt;if(s==="isPointsDrawn")return fr;if(s==="isPointsFiltered")return Ot;if(s==="zDataType")return pi;if(s==="wDataType")return ki},lo=(s={})=>(Lp(s),(s.backgroundColor!==void 0||s.background!==void 0)&&js(s.backgroundColor||s.background),s.backgroundImage!==void 0&&Mc(s.backgroundImage),s.cameraTarget!==void 0&&jc(s.cameraTarget),s.cameraDistance!==void 0&&qm(s.cameraDistance),s.cameraRotation!==void 0&&Fc(s.cameraRotation),s.cameraView!==void 0&&Bc(s.cameraView),s.colorBy!==void 0&&fc(s.colorBy),s.pointColor!==void 0&&Tm(s.pointColor),s.pointColorActive!==void 0&&bm(s.pointColorActive),s.pointColorHover!==void 0&&vi(s.pointColorHover),s.pointSize!==void 0&&uc(s.pointSize),s.pointSizeSelected!==void 0&&ca(s.pointSizeSelected),s.pointSizeMouseDetection!==void 0&&oh(s.pointSizeMouseDetection),s.sizeBy!==void 0&&Om(s.sizeBy),s.opacity!==void 0&&Lm(s.opacity),s.showPointConnections!==void 0&&Kc(s.showPointConnections),s.pointConnectionColor!==void 0&&qc(s.pointConnectionColor),s.pointConnectionColorActive!==void 0&&Zc(s.pointConnectionColorActive),s.pointConnectionColorHover!==void 0&&Jc(s.pointConnectionColorHover),s.pointConnectionColorBy!==void 0&&dc(s.pointConnectionColorBy),s.pointConnectionOpacityBy!==void 0&&Zt(s.pointConnectionOpacityBy),s.pointConnectionOpacity!==void 0&&eh(s.pointConnectionOpacity),s.pointConnectionOpacityActive!==void 0&&th(s.pointConnectionOpacityActive),s.pointConnectionSize!==void 0&&nh(s.pointConnectionSize),s.pointConnectionSizeActive!==void 0&&rh(s.pointConnectionSizeActive),s.pointConnectionSizeBy!==void 0&&mc(s.pointConnectionSizeBy),s.pointConnectionMaxIntPointsPerSegment!==void 0&&ih(s.pointConnectionMaxIntPointsPerSegment),s.pointConnectionTolerance!==void 0&&ah(s.pointConnectionTolerance),s.opacityBy!==void 0&&Rm(s.opacityBy),s.lassoColor!==void 0&&ul(s.lassoColor),s.lassoLineWidth!==void 0&&Zm(s.lassoLineWidth),s.lassoMinDelay!==void 0&&yi(s.lassoMinDelay),s.lassoMinDist!==void 0&&cl(s.lassoMinDist),s.lassoClearEvent!==void 0&&$c(s.lassoClearEvent),s.lassoInitiator!==void 0&&Gc(s.lassoInitiator),s.lassoInitiatorParentElement!==void 0&&zc(s.lassoInitiatorParentElement),s.lassoOnLongPress!==void 0&&Uc(s.lassoOnLongPress),s.lassoLongPressTime!==void 0&&Vc(s.lassoLongPressTime),s.lassoLongPressAfterEffectTime!==void 0&&Hc(s.lassoLongPressAfterEffectTime),s.lassoLongPressEffectDelay!==void 0&&Wc(s.lassoLongPressEffectDelay),s.lassoLongPressRevertEffectTime!==void 0&&Xc(s.lassoLongPressRevertEffectTime),s.keyMap!==void 0&&Yc(s.keyMap),s.mouseMode!==void 0&&Cr(s.mouseMode),s.showReticle!==void 0&&Qc(s.showReticle),s.reticleColor!==void 0&&Jm(s.reticleColor),s.pointOutlineWidth!==void 0&&cc(s.pointOutlineWidth),s.height!==void 0&&Cm(s.height),s.width!==void 0&&xs(s.width),s.aspectRatio!==void 0&&wm(s.aspectRatio),s.xScale!==void 0&&ei(s.xScale),s.yScale!==void 0&&Bs(s.yScale),s.deselectOnDblClick!==void 0&&Gi(s.deselectOnDblClick),s.deselectOnEscape!==void 0&&fl(s.deselectOnEscape),s.opacityByDensityFill!==void 0&&ef(s.opacityByDensityFill),s.opacityInactiveMax!==void 0&&tf(s.opacityInactiveMax),s.opacityInactiveScale!==void 0&&lh(s.opacityInactiveScale),s.gamma!==void 0&&sh(s.gamma),new Promise(D=>{window.requestAnimationFrame(()=>{u&&(gs(),Ie.refresh(),a.refresh(),xt=!0,D())})})),uh=(s,{preventEvent:D=!1}={})=>{Bc(s),xt=!0,$o=D},nf=()=>{Ie||(Ie=SA(u,{isPanInverted:[!1,!0]})),e.cameraView?Ie.setView(n1(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?Ie.lookAt([...e.cameraTarget||DC],e.cameraDistance||MC,e.cameraRotation||FC):Ie.setView(n1(jC)),Xa=Tr(1,1),na=Tr(-1,-1)},ch=({preventEvent:s=!1}={})=>{nf(),Di(),!s&&t.publish("view",{view:Ie.view,camera:Ie,xScale:Mn,yScale:En})},rf=({key:s})=>{switch(s){case"Escape":h&&Zo();break}},af=()=>{Mr=!0,hi=!0},Gs=()=>{Za(),Mr=!1,hi=!0,xt=!0},of=()=>{xt=!0},fh=()=>{io([]),ne.clear()},so=()=>{Ie.refresh();const s=Ut===bi,D=Lt===bi;if(s||D){const{width:z,height:oe}=u.getBoundingClientRect();s&&Jr(z),D&&Mi(oe),gs(),xt=!0}},dh=()=>u.getContext("2d").getImageData(0,0,u.width,u.height),mh=()=>{gs(),nf(),Di(),Kt=Uf(a.regl,{color:d,width:w,is2d:!0}),ne=Uf(a.regl,{color:mt,colorHover:pe,colorActive:ht,opacity:Le===null?null:Le[0],width:lt[0],widthActive:Et,is2d:!0}),Xn=Uf(a.regl,{color:Se,width:1,is2d:!0}),cr=Uf(a.regl,{color:Se,width:1,is2d:!0}),gi(),u.addEventListener("wheel",of),Ya=a.regl.buffer(),os=a.regl.buffer(),Qa=a.regl.buffer({usage:"dynamic",type:"float",length:qA*2}),ra=vs(),Wo=nl();const s=lo({backgroundImage:l,width:Ut,height:Lt,keyMap:ue});Ic(),Dc(),window.addEventListener("keyup",rf,!1),window.addEventListener("blur",eo,!1),window.addEventListener("mouseup",hs,!1),window.addEventListener("mousemove",Zr,!1),u.addEventListener("mousedown",ms,!1),u.addEventListener("mouseenter",af,!1),u.addEventListener("mouseleave",Gs,!1),u.addEventListener("click",el,!1),u.addEventListener("dblclick",tl,!1),"ResizeObserver"in window?(Go=new ResizeObserver(so),Go.observe(u)):(window.addEventListener("resize",so),window.addEventListener("orientationchange",so)),s.then(()=>{t.publish("init")})},va=a.onFrame(()=>{us=Ie.tick(),!(!fr||!(xt||Ni))&&(Ni&&!Oc(ls,ss)&&Pc(),us&&(Xa=Tr(1,1),na=Tr(-1,-1),en==="density"&&ha()),a.render(()=>{const s=u.width/a.canvas.width,D=u.height/a.canvas.height;Sm(s,D),l&&l._reglType&&$m(),Qr.length>2&&Ns(),Ni||ne.draw({projection:pc(),model:to(),view:ol()}),Dm(),!gt&&(Ve||Pi)&&Gm(),Nn>=0&&Mm(),st.length&&Bm(),Kt.draw({projection:pc(),model:to(),view:ol()})},u),us&&(Di(),$o?$o=!1:t.publish("view",{view:Ie.view,camera:Ie,xScale:Mn,yScale:En})),xt=!1,Pi=!1,t.publish("draw"))}),hh=()=>{xt=!0},ph=()=>{fr=!1,Tt=!0,va(),window.removeEventListener("keyup",rf,!1),window.removeEventListener("blur",eo,!1),window.removeEventListener("mouseup",hs,!1),window.removeEventListener("mousemove",Zr,!1),u.removeEventListener("mousedown",ms,!1),u.removeEventListener("mouseenter",af,!1),u.removeEventListener("mouseleave",Gs,!1),u.removeEventListener("click",el,!1),u.removeEventListener("dblclick",tl,!1),u.removeEventListener("wheel",of,!1),Go?Go.disconnect():(window.removeEventListener("resize",so),window.removeEventListener("orientationchange",so)),u=void 0,Ie.dispose(),Ie=void 0,Kt.destroy(),An.destroy(),ne.destroy(),Xn.destroy(),cr.destroy(),e.renderer||a.destroy(),t.publish("destroy"),t.clear()};return mh(),{get isSupported(){return a.isSupported},clear:Cn(fh),createTextureFromUrl:(s,D=Hv)=>p1(a.regl,s,D),deselect:Zo,destroy:ph,draw:pa,filter:Ac,get:$s,getScreenPosition:Km,hover:Za,redraw:hh,refresh:a.refresh,reset:Cn(ch),select:sa,set:lo,export:dh,subscribe:t.subscribe,unfilter:ao,unsubscribe:t.unsubscribe,view:uh,zoomToLocation:Ms,zoomToArea:Ds,zoomToPoints:$i,zoomToOrigin:kc}};function md(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function k_(e){let t,n,r;e.length!==2?(t=md,n=(l,u)=>md(e(l),u),r=(l,u)=>e(l)-u):(t=e===md||e===tL?e:nL,n=e,r=e);function i(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const h=f+p>>>1;n(l[h],u)<0?f=h+1:p=h}while(f<p)}return f}function a(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const h=f+p>>>1;n(l[h],u)<=0?f=h+1:p=h}while(f<p)}return f}function o(l,u,f=0,p=l.length){const h=i(l,u,f,p-1);return h>f&&r(l[h-1],u)>-r(l[h],u)?h-1:h}return{left:i,center:o,right:a}}function nL(){return 0}function rL(e){return e===null?NaN:+e}const iL=k_(md),aL=iL.right;k_(rL).center;const oL=aL,lL=Math.sqrt(50),sL=Math.sqrt(10),uL=Math.sqrt(2);function Yd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=lL?10:a>=sL?5:a>=uL?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?Yd(e,t,n*2):[l,u,f]}function I0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Yd(t,e,n):Yd(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let f=0;f<l;++f)u[f]=(a-f)/-o;else for(let f=0;f<l;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(i+f)/-o;else for(let f=0;f<l;++f)u[f]=(i+f)*o;return u}function D0(e,t,n){return t=+t,e=+e,n=+n,Yd(e,t,n)[2]}function cL(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?D0(t,e,n):D0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function D_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nc(){}var Hu=.7,Qd=1/Hu,Vl="\\s*([+-]?\\d+)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fL=/^#([0-9a-f]{3,8})$/,dL=new RegExp(`^rgb\\(${Vl},${Vl},${Vl}\\)$`),mL=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),hL=new RegExp(`^rgba\\(${Vl},${Vl},${Vl},${Wu}\\)$`),pL=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${Wu}\\)$`),vL=new RegExp(`^hsl\\(${Wu},${Ri},${Ri}\\)$`),gL=new RegExp(`^hsla\\(${Wu},${Ri},${Ri},${Wu}\\)$`),E1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wv(nc,Xu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_1,formatHex:_1,formatHex8:yL,formatHsl:xL,formatRgb:S1,toString:S1});function _1(){return this.rgb().formatHex()}function yL(){return this.rgb().formatHex8()}function xL(){return M_(this).formatHsl()}function S1(){return this.rgb().formatRgb()}function Xu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?w1(t):n===3?new yr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dL.exec(e))?new yr(t[1],t[2],t[3],1):(t=mL.exec(e))?new yr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hL.exec(e))?Wf(t[1],t[2],t[3],t[4]):(t=pL.exec(e))?Wf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vL.exec(e))?A1(t[1],t[2]/100,t[3]/100,1):(t=gL.exec(e))?A1(t[1],t[2]/100,t[3]/100,t[4]):E1.hasOwnProperty(e)?w1(E1[e]):e==="transparent"?new yr(NaN,NaN,NaN,0):null}function w1(e){return new yr(e>>16&255,e>>8&255,e&255,1)}function Wf(e,t,n,r){return r<=0&&(e=t=n=NaN),new yr(e,t,n,r)}function EL(e){return e instanceof nc||(e=Xu(e)),e?(e=e.rgb(),new yr(e.r,e.g,e.b,e.opacity)):new yr}function M0(e,t,n,r){return arguments.length===1?EL(e):new yr(e,t,n,r??1)}function yr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wv(yr,M0,D_(nc,{brighter(e){return e=e==null?Qd:Math.pow(Qd,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yr(Oo(this.r),Oo(this.g),Oo(this.b),Kd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T1,formatHex:T1,formatHex8:_L,formatRgb:b1,toString:b1}));function T1(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function _L(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function b1(){const e=Kd(this.opacity);return`${e===1?"rgb(":"rgba("}${Oo(this.r)}, ${Oo(this.g)}, ${Oo(this.b)}${e===1?")":`, ${e})`}`}function Kd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Oo(e),(e<16?"0":"")+e.toString(16)}function A1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ai(e,t,n,r)}function M_(e){if(e instanceof ai)return new ai(e.h,e.s,e.l,e.opacity);if(e instanceof nc||(e=Xu(e)),!e)return new ai;if(e instanceof ai)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new ai(o,l,u,e.opacity)}function SL(e,t,n,r){return arguments.length===1?M_(e):new ai(e,t,n,r??1)}function ai(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wv(ai,SL,D_(nc,{brighter(e){return e=e==null?Qd:Math.pow(Qd,e),new ai(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new ai(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yr(Op(e>=240?e-240:e+120,i,r),Op(e,i,r),Op(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ai(C1(this.h),Xf(this.s),Xf(this.l),Kd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kd(this.opacity);return`${e===1?"hsl(":"hsla("}${C1(this.h)}, ${Xf(this.s)*100}%, ${Xf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function C1(e){return e=(e||0)%360,e<0?e+360:e}function Xf(e){return Math.max(0,Math.min(1,e||0))}function Op(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xv=e=>()=>e;function wL(e,t){return function(n){return e+n*t}}function TL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bL(e){return(e=+e)==1?F_:function(t,n){return n-t?TL(t,n,e):Xv(isNaN(t)?n:t)}}function F_(e,t){var n=t-e;return n?wL(e,n):Xv(isNaN(e)?t:e)}const L1=function e(t){var n=bL(t);function r(i,a){var o=n((i=M0(i)).r,(a=M0(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),f=F_(i.opacity,a.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=e,r}(1);function AL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function CL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function LL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Yv(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function RL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function qd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function OL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Yv(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var F0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pp=new RegExp(F0.source,"g");function PL(e){return function(){return e}}function NL(e){return function(t){return e(t)+""}}function kL(e,t){var n=F0.lastIndex=Pp.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=F0.exec(e))&&(i=Pp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:qd(r,i)})),n=Pp.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?NL(u[0].x):PL(t):(t=u.length,function(f){for(var p=0,h;p<t;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}function Yv(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xv(t):(n==="number"?qd:n==="string"?(r=Xu(t))?(t=r,L1):kL:t instanceof Xu?L1:t instanceof Date?RL:CL(t)?AL:Array.isArray(t)?LL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OL:qd)(e,t)}function IL(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function DL(e){return function(){return e}}function ML(e){return+e}var R1=[0,1];function Fl(e){return e}function j0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:DL(isNaN(t)?NaN:.5)}function FL(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function jL(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=j0(i,r),a=n(o,a)):(r=j0(r,i),a=n(a,o)),function(l){return a(r(l))}}function BL(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=j0(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=oL(e,l,1,r)-1;return a[u](i[u](l))}}function j_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B_(){var e=R1,t=R1,n=Yv,r,i,a,o=Fl,l,u,f;function p(){var d=Math.min(e.length,t.length);return o!==Fl&&(o=FL(e[0],e[d-1])),l=d>2?BL:jL,u=f=null,h}function h(d){return d==null||isNaN(d=+d)?a:(u||(u=l(e.map(r),t,n)))(r(o(d)))}return h.invert=function(d){return o(i((f||(f=l(t,e.map(r),qd)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,ML),p()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),p()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=IL,p()},h.clamp=function(d){return arguments.length?(o=d?!0:Fl,p()):o!==Fl},h.interpolate=function(d){return arguments.length?(n=d,p()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,w){return r=d,i=w,p()}}function $L(){return B_()(Fl,Fl)}function GL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Jl(e){return e=Zd(Math.abs(e)),e?e[1]:NaN}function zL(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function UL(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var VL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yu(e){if(!(t=VL.exec(e)))throw new Error("invalid format: "+e);var t;return new Qv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Yu.prototype=Qv.prototype;function Qv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HL(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $_;function WL(e,t){var n=Zd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-($_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zd(e,Math.max(0,t+a-1))[0]}function O1(e,t){var n=Zd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const P1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:GL,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>O1(e*100,t),r:O1,s:WL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function N1(e){return e}var k1=Array.prototype.map,I1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function XL(e){var t=e.grouping===void 0||e.thousands===void 0?N1:zL(k1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?N1:UL(k1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Yu(h);var d=h.fill,w=h.align,x=h.sign,L=h.symbol,I=h.zero,v=h.width,b=h.comma,C=h.precision,H=h.trim,q=h.type;q==="n"?(b=!0,q="g"):P1[q]||(C===void 0&&(C=12),H=!0,q="g"),(I||d==="0"&&w==="=")&&(I=!0,d="0",w="=");var ae=L==="$"?n:L==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",we=L==="$"?r:/[%p]/.test(q)?o:"",ue=P1[q],at=/[defgprs%]/.test(q);C=C===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function Ve(Se){var Ke=ae,Ye=we,ze,Pt,mt;if(q==="c")Ye=ue(Se)+Ye,Se="";else{Se=+Se;var ht=Se<0||1/Se<0;if(Se=isNaN(Se)?u:ue(Math.abs(Se),C),H&&(Se=HL(Se)),ht&&+Se==0&&x!=="+"&&(ht=!1),Ke=(ht?x==="("?x:l:x==="-"||x==="("?"":x)+Ke,Ye=(q==="s"?I1[8+$_/3]:"")+Ye+(ht&&x==="("?")":""),at){for(ze=-1,Pt=Se.length;++ze<Pt;)if(mt=Se.charCodeAt(ze),48>mt||mt>57){Ye=(mt===46?i+Se.slice(ze+1):Se.slice(ze))+Ye,Se=Se.slice(0,ze);break}}}b&&!I&&(Se=t(Se,1/0));var pe=Ke.length+Se.length+Ye.length,We=pe<v?new Array(v-pe+1).join(d):"";switch(b&&I&&(Se=t(We+Se,We.length?v-Ye.length:1/0),We=""),w){case"<":Se=Ke+Se+Ye+We;break;case"=":Se=Ke+We+Se+Ye;break;case"^":Se=We.slice(0,pe=We.length>>1)+Ke+Se+Ye+We.slice(pe);break;default:Se=We+Ke+Se+Ye;break}return a(Se)}return Ve.toString=function(){return h+""},Ve}function p(h,d){var w=f((h=Yu(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Jl(d)/3)))*3,L=Math.pow(10,-x),I=I1[8+x/3];return function(v){return w(L*v)+I}}return{format:f,formatPrefix:p}}var Yf,Kv,G_;YL({thousands:",",grouping:[3],currency:["$",""]});function YL(e){return Yf=XL(e),Kv=Yf.format,G_=Yf.formatPrefix,Yf}function QL(e){return Math.max(0,-Jl(Math.abs(e)))}function KL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jl(t)/3)))*3-Jl(Math.abs(e)))}function qL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jl(t)-Jl(e))+1}function ZL(e,t,n,r){var i=cL(e,t,n),a;switch(r=Yu(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=KL(i,o))&&(r.precision=a),G_(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=qL(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=QL(i))&&(r.precision=a-(r.type==="%")*2);break}}return Kv(r)}function JL(e){var t=e.domain;return e.ticks=function(n){var r=t();return I0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ZL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,f,p=10;for(l<o&&(f=o,o=l,l=f,f=i,i=a,a=f);p-- >0;){if(f=D0(o,l,n),f===u)return r[i]=o,r[a]=l,t(r);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function Qu(){var e=$L();return e.copy=function(){return j_(e,Qu())},I_.apply(e,arguments),JL(e)}function eR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function D1(e){return Math.log(e)}function M1(e){return Math.exp(e)}function tR(e){return-Math.log(-e)}function nR(e){return-Math.exp(-e)}function rR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function iR(e){return e===10?rR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function aR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function F1(e){return(t,n)=>-e(-t,n)}function oR(e){const t=e(D1,M1),n=t.domain;let r=10,i,a;function o(){return i=aR(r),a=iR(r),n()[0]<0?(i=F1(i),a=F1(a),e(tR,nR)):e(D1,M1),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],p=u[u.length-1];const h=p<f;h&&([f,p]=[p,f]);let d=i(f),w=i(p),x,L;const I=l==null?10:+l;let v=[];if(!(r%1)&&w-d<I){if(d=Math.floor(d),w=Math.ceil(w),f>0){for(;d<=w;++d)for(x=1;x<r;++x)if(L=d<0?x/a(-d):x*a(d),!(L<f)){if(L>p)break;v.push(L)}}else for(;d<=w;++d)for(x=r-1;x>=1;--x)if(L=d>0?x/a(-d):x*a(d),!(L<f)){if(L>p)break;v.push(L)}v.length*2<I&&(v=I0(f,p,I))}else v=I0(d,w,Math.min(w-d,I)).map(a);return h?v.reverse():v},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Yu(u)).precision==null&&(u.trim=!0),u=Kv(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return p=>{let h=p/a(Math.round(i(p)));return h*r<r-.5&&(h*=r),h<=f?u(p):""}},t.nice=()=>n(eR(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function qv(){const e=oR(B_()).domain([1,10]);return e.copy=()=>j_(e,qv()).base(e.base()),I_.apply(e,arguments),e}const lR="_scatter_10z4g_2",sR={scatter:lR};Zv.propTypes={points:qe.array.isRequired,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onView:qe.func,onSelect:qe.func,onHover:qe.func};const uR=e=>qv().domain([100,1e6]).range([6,1]).clamp(!0)(e),cR=e=>qv().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function Zv({points:e,width:t,height:n,onScatter:r,onView:i,onSelect:a,onHover:o}){const l=j.useRef(),u=j.useRef([-1,1]),f=j.useRef([-1,1]),p=Qu().domain(u.current),h=Qu().domain(f.current);return j.useEffect(()=>{const d=uR(e.length),w=cR(e.length);console.log("point size",d,w);const x=eL({canvas:l.current,width:t,height:n,pointSize:d,opacity:w,pointColor:[250/255,128/255,114/255,1],pointColorHover:[.1,.1,.1,.5],xScale:p,yScale:h});return x.draw(e),i&&i(p,h),x.subscribe("view",({camera:L,view:I,xScale:v,yScale:b})=>{u.current=v.domain(),f.current=b.domain(),i&&i(u.current,f.current)}),x.subscribe("select",({points:L})=>{a&&a(L)}),x.subscribe("deselect",()=>{a&&a([])}),x.subscribe("pointOver",L=>{o&&o(L)}),x.subscribe("pointOut",()=>{o&&o(null)}),r&&r(x),()=>{x.destroy()}},[e]),O.jsx("canvas",{className:sR.scatter,ref:l})}const cu=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:a,yDomain:o,width:l,height:u})=>{const f=j.useRef();return j.useEffect(()=>{if(a&&o){const p=Qu().domain(a).range([0,l]),h=Qu().domain(o).range([u,0]),d=I=>I/(.1+a[1]-a[0]),x=f.current.getContext("2d");x.clearRect(0,0,l,u),x.fillStyle=t,x.strokeStyle=n,x.font=`${d(r)}px monospace`,x.globalAlpha=.75;let L=d(r);if(!e.length)return;e.map(I=>{t&&x.fillRect(p(I[0])-L/2,h(I[1])-L/2,L,L),n&&x.strokeRect(p(I[0])-L/2,h(I[1])-L/2,L,L),i&&x.fillText(i,p(I[0])-L/3.2,h(I[1])+L/3.2)})}},[e,t,n,r,a,o,l,u]),O.jsx("canvas",{className:"annotation-plot",ref:f,width:l,height:u})};z_.propTypes={dataset:qe.object.isRequired,slides:qe.array.isRequired,selected:qe.object,onHover:qe.func,onClick:qe.func};function z_({dataset:e,slides:t,selected:n,onHover:r,onClick:i}){return O.jsxs("div",{className:"slide-bar",children:[O.jsxs("div",{className:"slide-bar-header",children:[t.length," Slides"]}),O.jsx("div",{className:"slide-bar-body",children:t.map((a,o)=>O.jsx("div",{className:a===n?"slide-active slide-bar-item":"slide-bar-item",onMouseEnter:()=>r?r(a):null,onMouseLeave:()=>r?r(null):null,onClick:()=>i?i(a):null,children:a.label},o))})]})}const xo=500,Eo=500;function fR(){var qr;const e="https://api.latentscope.com/api",[t,n]=j.useState(null),{dataset:r,scope:i}=l_();j.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then(ne=>ne.json()).then(ne=>{n(ne)})},[r]);const[a,o]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/embeddings`).then(ne=>ne.json()).then(ne=>{o(ne)})},[r]);const[l,u]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/umaps`).then(ne=>ne.json()).then(ne=>{u(ne)})},[r]);const[f,p]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/clusters`).then(ne=>ne.json()).then(ne=>{console.log("clusters",ne),p(ne)})},[r]);const[h,d]=j.useState([]),[w,x]=j.useState(null),[L,I]=j.useState(null),[v,b]=j.useState(null),[C,H]=j.useState(L),q=ne=>{console.log("selected",ne),H(ne)};j.useEffect(()=>{fetch(`${e}/datasets/${r}/scopes`).then(ne=>ne.json()).then(ne=>{d(ne.sort((yt,$n)=>yt.name.localeCompare($n.name)))})},[r,d]),j.useEffect(()=>{if(i&&h.length){const ne=h.find(yt=>yt.name==i);if(ne){x(ne);const yt=l.find($n=>$n.name===ne.umap);I(ne.embeddings),H(ne.embeddings),b(yt)}}else x(null)},[i,h,l,f,x,b]);const[ae,we]=j.useState([]),[ue,at]=j.useState(!1);j.useEffect(()=>{v&&fetch(`${e}/datasets/${t.id}/umaps/${v.name}/points`).then(ne=>ne.json()).then(ne=>{console.log("umap points",ne),we(ne.map(yt=>[yt.x,yt.y]))})},[t,v]);const Ve=j.useCallback((ne,yt,$n=[])=>{fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ne)}`).then(Xn=>Xn.json()).then(Xn=>{if(!t)return;t.text_column;let cr=Xn.map((Oi,ci)=>({index:ne[ci],...Oi}));cr.sort((Oi,ci)=>ci.score-Oi.score),yt(cr)})},[t,r]),[Se,Ke]=j.useState({});j.useEffect(()=>{fetch(`${e}/tags?dataset=${r}`).then(ne=>ne.json()).then(ne=>Ke(ne))},[r]);const Ye=j.useMemo(()=>{const ne=[];for(const yt in Se)ne.push(yt);return ne},[Se]),[ze,Pt]=j.useState(Ye[0]),[mt,ht]=j.useState([]);j.useEffect(()=>{Se[ze]?Ve(Se[ze],ht):ht([])},[t,ze,Se]);const[pe,We]=j.useState([]);j.useEffect(()=>{if(Se[ze]){const ne=Se[ze].map(yt=>ae[yt]);We(ne)}else We([]),pt&&pt.config&&(pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500}))},[Se,ze,ae]);const[Le,Ee]=j.useState([]),[$e,lt]=j.useState([]),Et=j.useCallback(ne=>{fetch(`${e}/search/nn?dataset=${r}&query=${ne}&model=${C}`).then(yt=>yt.json()).then(yt=>{lt(yt.distances),Ee(yt.indices),console.log("SEARCH RESULTS",yt),pt==null||pt.zoomToPoints(yt.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[C]),[Wt,Yt]=j.useState([]);j.useEffect(()=>{Ve(Le,Yt,$e)},[Le,Yt,$e]);const[Qt,It]=j.useState([]);j.useEffect(()=>{const ne=Le.map(yt=>ae[yt]);It(ne)},[Le,ae]);const[pt,Wn]=j.useState({}),[fn,Xt]=j.useState([-1,1]),[en,_t]=j.useState([-1,1]),wt=j.useCallback((ne,yt)=>{Xt(ne),_t(yt)}),[Nt,Ct]=j.useState([]),[Lt,Ut]=j.useState([]);j.useEffect(()=>{Ve(Nt,Ut)},[Nt,Ut]);const dn=j.useCallback(ne=>{Ct(ne),De(0)}),[on,Yr]=j.useState(null),[y,Tt]=j.useState([]);j.useEffect(()=>{on!=null?Ve([on],Tt):Tt([])},[on,Tt]);const[Ft,Ie]=j.useState([]);j.useEffect(()=>{on!=null?Ie([ae[on]]):Ie([])},[on,ae]);const Kt=[{id:0,name:"Selected"},{id:1,name:"Search"},{id:2,name:"Slide"},{id:3,name:"Tag"}],[gt,De]=j.useState(0);j.useState([]);const[ut,jt]=j.useState(null),[st,tn]=j.useState(null),[nn,Ot]=j.useState([]),[xn,mn]=j.useState([]);j.useEffect(()=>{w?fetch(`${e}/datasets/${r}/clusters/${w.cluster}/labels`).then(ne=>ne.json()).then(ne=>{console.log("cluster labels",ne),mn(ne)}):mn([])},[w,mn,r]),j.useEffect(()=>{ut?fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ut.indices)}`).then(ne=>ne.json()).then(ne=>{const yt=t.text_column;let $n=ne.map((Xn,cr)=>({index:ut.indices[cr],text:Xn[yt],score:Xn.score,date:Xn.date}));$n.sort((Xn,cr)=>cr.score-Xn.score),Ot($n)}).catch(ne=>console.log(ne)):Ot([])},[r,ut]);const[Sr,tr]=j.useState([]);j.useEffect(()=>{if(ut){const ne=ut.indices.map(yt=>ae[yt]);tr(ne)}else tr([]),pt&&pt.config&&(pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500}))},[ut,ae]);const[Qr,bn]=j.useState([]);j.useEffect(()=>{if(st){const ne=st.indices.map(yt=>ae[yt]);bn(ne)}else bn([])},[st,ae]);const ui=j.useCallback(ne=>{jt(ne),De(2),pt==null||pt.zoomToPoints(ne.indices,{transition:!0,padding:.5,transitionDuration:1500})}),ea=j.useCallback(ne=>{tn(ne)}),Kr=j.useCallback(ne=>{pt==null||pt.zoomToPoints([ne],{transition:!0,padding:.9,transitionDuration:1500})}),ur=j.useCallback(ne=>{Yr(ne)});return t?O.jsxs("div",{className:"dataset--explore",children:[O.jsxs("div",{className:"column",children:[O.jsxs("div",{className:"first-row summary",children:[O.jsxs("h3",{children:[" ",r,"  [",w==null?void 0:w.name,"]",O.jsx(Vu,{to:`/datasets/${t==null?void 0:t.id}/setup/${w==null?void 0:w.name}`,children:"Configure"})]}),t==null?void 0:t.length," rows",O.jsx("br",{}),"Embedding model:",O.jsx("br",{})," ",L,O.jsx("br",{})]}),O.jsxs("div",{className:"second-row",children:[O.jsx("div",{className:"umap-container",children:O.jsxs("div",{className:"scatters",style:{width:xo,height:Eo},children:[O.jsx(Zv,{points:ae,loading:ue,width:xo,height:Eo,onScatter:Wn,onView:wt,onSelect:dn,onHover:ur}),O.jsx(cu,{points:Qt,fill:"black",size:"5",xDomain:fn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Sr,fill:"darkred",size:"5",xDomain:fn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Qr,fill:"red",size:"8",xDomain:fn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:pe,symbol:ze,size:"10",xDomain:fn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Ft,stroke:"black",fill:"orange",size:"6",xDomain:fn,yDomain:en,width:xo,height:Eo})]})}),O.jsx("div",{className:"hovered-point",children:y[0]&&Object.keys(y[0]).map(ne=>O.jsxs("span",{children:[O.jsxs("span",{className:"key",children:[ne,":"]}),O.jsx("span",{className:"value",children:y[0][ne]})]},ne))})]})]}),O.jsxs("div",{className:"column",children:[O.jsxs("div",{className:"first-row search-tags",children:[O.jsxs("div",{className:"tags-box",children:[O.jsxs("div",{className:"tags-select",children:["Tags: ",Ye.map(ne=>O.jsxs("button",{className:"dataset--tag-link",onClick:()=>{Pt(ne),De(3),pt==null||pt.zoomToPoints(Se[ne],{transition:!0,padding:.2,transitionDuration:1500})},children:[ne,"(",Se[ne].length,")"]},ne))]}),O.jsx("div",{className:"new-tag",children:O.jsxs("form",{onSubmit:ne=>{ne.preventDefault();const yt=ne.target.elements.newTag.value;fetch(`${e}/tags/new?dataset=${r}&tag=${yt}`).then($n=>$n.json()).then($n=>{console.log("new tag",$n),Ke($n)})},children:[O.jsx("input",{type:"text",id:"newTag"}),O.jsx("button",{type:"submit",children:"New Tag"})]})})]}),O.jsx("div",{className:"search-box",children:O.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),Et(ne.target.elements.searchBox.value),De(1)},children:[O.jsx("input",{type:"text",id:"searchBox"}),O.jsx("button",{type:"submit",children:"Similarity Search"}),O.jsx("label",{htmlFor:"embeddingModel",children:"Using:"}),O.jsx("select",{id:"embeddingModel",onChange:ne=>q(ne.target.value),value:C,children:a.map((ne,yt)=>O.jsx("option",{value:ne,children:ne},yt))})]})})]}),O.jsxs("div",{className:"second-row dataset--tabs",children:[O.jsx("div",{className:"dataset--tab-header",children:Kt.map(ne=>O.jsx("button",{onClick:()=>De(ne.id),className:ne.id===gt?"tab-active":"tab-inactive",children:ne.name},ne.id))}),O.jsxs("div",{className:"dataset--tab-content",children:[gt===0?O.jsxs("div",{className:"dataset--selected-table",children:[O.jsxs("span",{children:["Selected: ",Lt.length,Lt.length>0?O.jsx("button",{className:"deselect",onClick:()=>{Ct([]),pt==null||pt.select([]),pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Lt.length>0?O.jsx(Ao,{data:Lt,tagset:Se,datasetId:r,maxRows:150,onTagset:ne=>Ke(ne),onHover:ur,onClick:Kr}):null]}):null,gt===1?O.jsxs("div",{className:"dataset--neighbors",children:[O.jsxs("span",{children:["Nearest Neighbors: ",Le.length,Le.length>0?O.jsx("button",{className:"deselect",onClick:()=>{Ee([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),Wt.length>0?O.jsx(Ao,{data:Wt,tagset:Se,datasetId:r,onTagset:ne=>Ke(ne),onHover:ur,onClick:Kr}):null]}):null,gt===2?O.jsxs("div",{className:"dataset--slide",children:[O.jsxs("span",{children:[ut==null?void 0:ut.label," ",ut==null?void 0:ut.indices.length,ut?O.jsx("button",{className:"deselect",onClick:()=>{jt(null)},children:"X"}):null]}),nn.length?O.jsx(Ao,{data:nn,tagset:Se,datasetId:r,onTagset:ne=>Ke(ne),onHover:ur,onClick:Kr}):null]}):null,gt===3?O.jsxs("div",{className:"dataset--tag",children:[O.jsxs("span",{children:[ze," ",(qr=Se[ze])==null?void 0:qr.length,ze?O.jsx("button",{className:"deselect",onClick:()=>{Pt(null)},children:"X"}):null]}),mt.length?O.jsx(Ao,{data:mt,tagset:Se,datasetId:r,onTagset:ne=>Ke(ne),onHover:ur,onClick:Kr}):null]}):null]})]})]}),O.jsxs("div",{className:"column",children:[O.jsx("div",{className:"first-row cluster-select",children:"Cluster Select"}),O.jsx("div",{className:"second-row clusters",children:O.jsx(z_,{dataset:t,slides:xn,selected:ut,onClick:ui,onHover:ea})})]})]}):O.jsx("div",{children:"Loading..."})}const Np="https://api.latentscope.com/api";U_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,textColumn:qe.string.isRequired,embedding:qe.string,umaps:qe.array,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function U_({dataset:e,textColumn:t,embedding:n,umaps:r,clusters:i,onNew:a,onChange:o}){const[l,u]=j.useState([]),[f,p]=j.useState(null),{startJob:h}=Zl(e,p,`${Np}/jobs/embed`),[d,w]=j.useState([]);j.useEffect(()=>{fetch(`${Np}/embedding_models`).then(I=>I.json()).then(w).catch(console.error)},[]);const x=(I,v)=>{fetch(`${Np}/datasets/${I}/embeddings`).then(b=>b.json()).then(b=>{v(b)})};j.useEffect(()=>{x(e==null?void 0:e.id,I=>{u(I),a(I)})},[e,u,a]),j.useEffect(()=>{(f==null?void 0:f.status)==="completed"&&x(e.id,I=>{u(I),a(I)})},[f,e,u,a]);const L=I=>{I.preventDefault();const v=I.target,b=new FormData(v),C=d.find(q=>q.id===b.get("modelName"));let H={text_column:t,provider:C.provider,model:C.id};h(H)};return O.jsxs("div",{children:[O.jsxs("div",{children:["Embedding on column: ",O.jsx("b",{children:t})]}),O.jsxs("form",{onSubmit:L,children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"modelName",children:"Model:"}),O.jsx("select",{id:"modelName",name:"modelName",disabled:!!f,children:d.filter(I=>(l==null?void 0:l.indexOf(I.id))<0).map((I,v)=>O.jsxs("option",{value:I.id,children:[I.provider,": ",I.name]},v))})]}),O.jsx("button",{type:"submit",disabled:!!f,children:"New Embedding"})]}),O.jsx(is,{job:f,clearJob:()=>{p(null)}}),O.jsx("div",{className:"embeddings-list",children:l.map((I,v)=>O.jsxs("div",{children:[O.jsx("input",{type:"radio",id:`embedding${v}`,name:"embedding",value:I,checked:I===n,onChange:()=>o(I)}),O.jsx("label",{htmlFor:`embedding${v}`,children:O.jsxs("span",{children:[I," [",r.filter(b=>b.embeddings==I).length," umaps, ",i.filter(b=>r.filter(C=>C.embeddings==I).map(C=>C.name).indexOf(b.umap_name)>=0).length," clusters ]"]})})]},v))})]})}const j1={"umaps-list":"_umaps-list_p5rgt_1","umaps-item":"_umaps-item_p5rgt_9"},Qf="https://api.latentscope.com/api";V_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,umap:qe.object,embedding:qe.string,clusters:qe.array.isRequired,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function V_({dataset:e,umap:t,embedding:n,clusters:r,onNew:i,onChange:a}){const[o,l]=j.useState(null),{startJob:u}=Zl(e,l,`${Qf}/jobs/umap`),{startJob:f}=Zl(e,l,`${Qf}/jobs/delete/umap`),[p,h]=j.useState([]);function d(x,L){fetch(`${Qf}/datasets/${x}/umaps`).then(I=>I.json()).then(I=>{const v=I.map(b=>({...b,url:`${Qf}/files/${x}/umaps/${b.name}.png`}));L(v.reverse())})}j.useEffect(()=>{d(e.id,x=>{h(x),i(x)})},[e,i]),j.useEffect(()=>{(o==null?void 0:o.status)=="completed"&&d(e.id,x=>{h(x),i(x)})},[o,e,h,i]);const w=j.useCallback(x=>{x.preventDefault();const L=x.target,I=new FormData(L),v=I.get("neighbors"),b=I.get("min_dist");u({embeddings:n,neighbors:v,min_dist:b})},[u,n]);return O.jsxs("div",{className:"dataset--umaps-new",children:[O.jsxs("form",{onSubmit:w,children:[O.jsxs("label",{children:["Neighbors:",O.jsx("input",{type:"number",name:"neighbors",defaultValue:"25",disabled:!!o})]}),O.jsxs("label",{children:["Min Dist:",O.jsx("input",{type:"text",name:"min_dist",defaultValue:"0.1",disabled:!!o})]}),O.jsx("button",{type:"submit",disabled:!!o,children:"New UMAP"})]}),O.jsx(is,{job:o,clearJob:()=>l(null)}),O.jsx("div",{className:j1["umaps-list"],children:p.filter(x=>x.embeddings==n).map((x,L)=>O.jsxs("div",{className:j1["umaps-item"],children:[O.jsx("input",{type:"radio",id:`umap${L}`,name:"umap",value:x,checked:x.name===(t==null?void 0:t.name),onChange:()=>a(x)}),O.jsxs("label",{htmlFor:`umap${L}`,children:[x.name,O.jsx("br",{}),"Neighbors: ",x.neighbors,O.jsx("br",{}),"Min Dist: ",x.min_dist,O.jsx("br",{}),O.jsx("img",{src:x.url,alt:x.name}),O.jsx("br",{}),r.filter(I=>I.umap_name==x.name).length," clusters",O.jsx("button",{onClick:()=>f({umap_name:x.name}),disabled:o&&o.status!=="completed",children:"🗑️ umap"})]})]},L))})]})}const Kf="https://api.latentscope.com/api";H_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,umap:qe.object,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function H_({dataset:e,cluster:t,umap:n,onNew:r,onChange:i}){const[a,o]=j.useState(null),{startJob:l}=Zl(e,o,`${Kf}/jobs/cluster`),{startJob:u}=Zl(e,o,`${Kf}/jobs/delete/cluster`),[f,p]=j.useState([]);function h(w,x){fetch(`${Kf}/datasets/${w}/clusters`).then(L=>L.json()).then(L=>{const I=L.map(v=>({...v,url:`${Kf}/files/${w}/clusters/${v.cluster_name}.png`}));x(I.reverse())})}j.useEffect(()=>{h(e.id,w=>{p(w),r(w)})},[e,r]),j.useEffect(()=>{(a==null?void 0:a.status)=="completed"&&h(e.id,w=>{p(w),r(w)})},[a,e,p,r]);const d=j.useCallback(w=>{w.preventDefault();const x=w.target,L=new FormData(x),I=L.get("samples"),v=L.get("min_samples");l({umap_name:n.name,samples:I,min_samples:v})},[l,n]);return O.jsxs("div",{className:"dataset--clusters-new",children:[O.jsxs("form",{onSubmit:w=>d(w,n),children:[O.jsxs("label",{children:["Samples:",O.jsx("input",{type:"number",name:"samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("br",{}),O.jsxs("label",{children:["Min Samples:",O.jsx("input",{type:"number",name:"min_samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("button",{type:"submit",disabled:!!a||!n,children:"New Clusters"})]}),O.jsx(is,{job:a,clearJob:()=>o(null)}),O.jsx("div",{className:"dataset--setup-clusters-list",children:n&&f.filter(w=>w.umap_name==n.name).map((w,x)=>O.jsxs("div",{className:"dataset--setup-clusters-item",children:[O.jsx("input",{type:"radio",id:`cluster${x}`,name:"cluster",value:t,checked:w.cluster_name===(t==null?void 0:t.cluster_name),onChange:()=>i(w)}),O.jsxs("label",{htmlFor:`cluster${x}`,children:[w.cluster_name,O.jsx("br",{}),"Clusters: ",w.n_clusters,O.jsx("br",{}),"Noise points: ",w.n_noise,O.jsx("br",{}),"Samples: ",w.samples,O.jsx("br",{}),"Min Samples: ",w.min_samples,O.jsx("br",{}),O.jsx("img",{src:w.url,alt:w.name}),O.jsx("button",{onClick:()=>u({cluster_name:w.cluster_name}),children:"🗑️ cluster"})]})]},x))})]})}const qf="https://api.latentscope.com/api";W_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,selectedModel:qe.string,onChange:qe.func.isRequired};function W_({dataset:e,cluster:t,selectedModel:n,onChange:r}){const[i,a]=j.useState(null),{startJob:o}=Zl(e,a,`${qf}/jobs/cluster_label`),[l,u]=j.useState([]);j.useEffect(()=>{fetch(`${qf}/chat_models`).then(x=>x.json()).then(x=>{u(x)}).catch(x=>{console.log(x),u([])})},[]);const[f,p]=j.useState([]),[h,d]=j.useState([]);j.useEffect(()=>{if(e&&t){const x=n?`labels/${n}`:"labels";fetch(`${qf}/datasets/${e.id}/clusters/${t.cluster_name}/${x}`).then(L=>L.json()).then(L=>{d(L)}).catch(L=>{console.log(L),d([])})}else d([])},[n,d,e,t]),j.useEffect(()=>{console.log("cluster changed, set label models",t==null?void 0:t.cluster_name),t?fetch(`${qf}/datasets/${e.id}/clusters/${t.cluster_name}/labels_available`).then(x=>x.json()).then(x=>{console.log("cluster changed, set label models fetched",t.cluster_name,x),p(x)}).catch(x=>{console.log(x),p([])}):p([])},[e,t,i,p]);const w=j.useCallback(x=>{x.preventDefault();const L=x.target,I=new FormData(L),v=I.get("chatModel"),b=e.text_column,C=t==null?void 0:t.cluster_name,H=I.get("context");o({model:v,cluster:C,text_column:b,context:H})},[t,o]);return O.jsxs("div",{className:"dataset--setup-cluster-labels-content",children:[O.jsxs("div",{className:"dataset--slides-new",children:[O.jsxs("p",{children:["Automatically create labels for each cluster",t?` in ${t.cluster_name}`:""," using a chat model. "]}),O.jsxs("form",{onSubmit:w,children:[O.jsxs("label",{children:["Chat Models:",O.jsx("select",{id:"chatModel",name:"chatModel",disabled:!!i,children:l.filter(x=>(f==null?void 0:f.indexOf(x.id))<0).map((x,L)=>O.jsxs("option",{value:x.id,children:[x.provider," - ",x.name]},L))}),O.jsx("br",{}),O.jsx("textarea",{name:"context",disabled:!!i||!t})]}),O.jsx("button",{type:"submit",disabled:!!i||!t,children:"Auto Label"})]}),O.jsx(is,{job:i,clearJob:()=>a(null)})]}),t?O.jsxs("div",{className:"dataset--setup-cluster-labels-list",children:[O.jsxs("label",{children:["View Labels:",O.jsxs("select",{name:"model",value:n,onChange:x=>r(x.target.value),children:[O.jsx("option",{value:"",children:"Default labels"}),f.map((x,L)=>O.jsx("option",{value:x,children:x},L))]})]}),O.jsx("div",{className:"dataset--setup-labels-list",children:O.jsx(Ao,{data:h.map((x,L)=>({cluster:L,label:x.label,items:x.indices.length}))})})]}):null]})}const kp="https://api.latentscope.com/api";X_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,scope:qe.object,umap:qe.object,embedding:qe.string,cluster:qe.object,clusterLabelModel:qe.string,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function X_({dataset:e,scope:t,umap:n,embedding:r,cluster:i,clusterLabelModel:a,onNew:o,onChange:l}){const u=ym();j.useEffect(()=>{e&&fetch(`${kp}/datasets/${e.id}/scopes`).then(p=>p.json()).then(p=>{const h=p.sort((d,w)=>d.name.localeCompare(w.name));o(h)})},[e,o]);const f=j.useCallback(p=>{if(p.preventDefault(),!n||!i)return;const h=p.target,d=new FormData(h),w={embeddings:r,umap:n.name,cluster:i.cluster_name,cluster_labels:a,label:d.get("label"),description:d.get("description")},x=d.get("action");console.log("action",x),x=="save"&&(w.name=t.name),fetch(`${kp}/datasets/${e.id}/scopes/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).then(L=>L.json()).then(L=>{const I=L;fetch(`${kp}/datasets/${e.id}/scopes`).then(v=>v.json()).then(v=>{o(v),l(v.find(b=>b.name==I.name))}),u(`/datasets/${e.id}/setup/${L.name}`)}).catch(L=>{console.error("Error saving scope:",L)})},[e,i,a,n,r,u,o,l]);return O.jsxs("div",{className:"setup-scope",children:[O.jsxs("div",{className:"dataset--setup-save-box-title",children:["Embedding: ",r,O.jsx("br",{}),"Labels: ",a||"Default"]}),O.jsxs("div",{className:"dataset--setup-save-box-boxes",children:[n?O.jsxs("div",{className:"box-item",children:[n.name,O.jsx("img",{src:n.url,alt:n.name})]}):O.jsx("div",{className:"empty-box"}),i?O.jsxs("div",{className:"box-item",children:[i.cluster_name,O.jsx("img",{src:i.url,alt:i.name})]}):O.jsx("div",{className:"empty-box"})]}),O.jsx("div",{className:"dataset--setup-save-box-nav",children:O.jsxs("form",{onSubmit:f,children:[O.jsxs("label",{children:["Label:",O.jsx("input",{type:"text",name:"label",defaultValue:t?t.label:""})]}),O.jsxs("label",{children:["Description:",O.jsx("input",{type:"text",name:"description",defaultValue:t?t.description:""})]}),O.jsx("input",{type:"hidden",name:"action",value:""}),t?O.jsxs("div",{className:"previous-scope",children:[O.jsx("h4",{children:"Previous Scope Settings"}),"Embedding: ",t.embeddings,O.jsx("br",{}),"Umap: ",t.umap,O.jsx("br",{}),"Cluster: ",t.cluster,O.jsx("br",{}),"Labels: ",t.cluster_labels||"Default",O.jsx("br",{})]}):null,t?O.jsxs("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="save"},children:["Overwrite ",t.name]}):null,O.jsx("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="new"},children:"New scope"})]})})]})}const dR="_stage_lm7gt_1",mR="_content_lm7gt_13",hR="_complete_lm7gt_17",pR="_active_lm7gt_28",Zf={stage:dR,content:mR,complete:hR,active:pR};function fu({active:e,complete:t,title:n,children:r}){return O.jsxs("div",{className:`${Zf.stage} ${e?Zf.active:""} ${t?Zf.complete:""}`,children:[O.jsx("h3",{children:n}),O.jsx("div",{className:Zf.content,children:r})]})}const vR="https://api.latentscope.com/api";Y_.propTypes={dataset:qe.object.isRequired,indices:qe.array.isRequired,distances:qe.array,maxRows:qe.number,tagset:qe.object,onHover:qe.func,onClick:qe.func,onTagset:qe.func};function Y_({dataset:e,indices:t,distances:n=[],maxRows:r,tagset:i,onHover:a,onClick:o,onTagset:l}){const[u,f]=j.useState([]),p=j.useCallback(h=>{e&&fetch(`${vR}/indexed?dataset=${e.id}&indices=${JSON.stringify(h)}`).then(d=>d.json()).then(d=>{let w=d.map((x,L)=>{let I={index:h[L],...x};return n&&n.length&&(I.distance=n[L]),I});f(w)})},[e,f,n]);return j.useEffect(()=>{t&&t.length&&p(t)},[t,p]),O.jsx("div",{children:O.jsx(Ao,{data:u,tagset:i,datasetId:e==null?void 0:e.id,maxRows:r,onTagset:l,onHover:a,onClick:o})})}const gR="https://api.latentscope.com/api";Q_.propTypes={dataset:qe.object.isRequired,umap:qe.object,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onSelect:qe.func};function Q_({dataset:e,umap:t,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l}){const[u,f]=j.useState([]);return j.useEffect(()=>{t?fetch(`${gR}/datasets/${e.id}/umaps/${t.name}/points`).then(p=>p.json()).then(p=>{f(p.map(h=>[h.x,h.y]))}):f([])},[e,t]),O.jsx("div",{style:{width:`${n}px`,height:`${r}px`},children:O.jsx(Zv,{points:u,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l})})}function B1(){const e="https://api.latentscope.com/api",[t,n]=j.useState(null),{dataset:r,scope:i}=l_();ym();const a=500,o=500;j.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then($e=>$e.json()).then($e=>n($e))},[r]);const l=j.useMemo(()=>t?t.text_column||t.columns[0]:"",[t]),u=j.useCallback($e=>{const lt=$e.target.value;console.log("setting column",lt),fetch(`${e}/datasets/${r}/meta/update?key=text_column&value=${lt}`).then(Et=>Et.json()).then(Et=>{n(Et)})},[r]),[f,p]=j.useState([]),[h,d]=j.useState(f[0]);j.useEffect(()=>{f!=null&&f.length&&!h&&d(f[0])},[f,h]);const[w,x]=j.useState([]),[L,I]=j.useState(null),[v,b]=j.useState(null);j.useEffect(()=>{if(w.length){const $e=w.filter(Et=>Et.embeddings==h),lt=$e.find(Et=>Et.name==v);I(v&&lt?lt:$e[0])}},[v,w,h]);const[C,H]=j.useState([]),[q,ae]=j.useState(null),[we,ue]=j.useState(null);j.useEffect(()=>{if(C.length&&L){const $e=C.filter(Et=>Et.umap_name==L.name),lt=$e.find(Et=>Et.cluster_name==we);ae(we&&lt?lt:$e[0])}else ae(null)},[we,C,L]);const[at,Ve]=j.useState(null),[Se,Ke]=j.useState([]),[Ye,ze]=j.useState(null);j.useEffect(()=>{if(i&&(Se!=null&&Se.length)){const $e=Se.find(lt=>lt.name==i);$e&&(ze($e),d($e.embeddings),b($e.umap),ue($e.cluster),Ve($e.cluster_labels))}else ze(null)},[i,Se]);const[Pt,mt]=j.useState([]),ht=j.useCallback($e=>{mt($e)},[mt]),[pe,We]=j.useState({}),[Le,Ee]=j.useState(1);return j.useEffect(()=>{Ee(h?L?q?at?Ye?6:5:4:3:2:1),console.log("sup",Ye,at)},[h,L,q,at,Ye]),t?O.jsxs("div",{className:"dataset--setup",children:[O.jsxs("div",{className:"dataset--setup-summary",children:[O.jsxs("div",{className:"dataset--setup-info",children:[O.jsx("h3",{children:r}),O.jsxs("div",{className:"dataset--setup-info-content",children:["[ ",t.length," rows ] Columns: ",t.columns.join(", "),O.jsxs("div",{className:"dataset--details-text-column",children:["Set Text Column:",O.jsx("select",{value:l,onChange:u,children:t.columns.map(($e,lt)=>O.jsx("option",{value:$e,children:$e},lt))})]})]})]}),Ye?O.jsxs(Vu,{to:`/datasets/${t==null?void 0:t.id}/explore/${Ye==null?void 0:Ye.name}`,children:[" Explore ",Ye.label," (",Ye.name,")"]}):null]}),O.jsxs("div",{className:"dataset--setup-layout",children:[O.jsxs("div",{className:"dataset--setup-left-column",children:[O.jsx(fu,{active:Le==1,complete:Le>1,title:"1. Embeddings",children:O.jsx(U_,{dataset:t,textColumn:l,embedding:h,umaps:w,clusters:C,onNew:p,onChange:d})}),O.jsx(fu,{active:Le==2,complete:Le>2,title:"2. UMAP",children:O.jsx(V_,{dataset:t,umap:L,embedding:h,clusters:C,onNew:x,onChange:I})}),O.jsx(fu,{active:Le==3,complete:Le>3,title:"3. Clusters",children:O.jsx(H_,{dataset:t,cluster:q,umap:L,onNew:H,onChange:ae})}),O.jsx(fu,{active:Le==4,complete:Le>4,title:"4. Auto-Label Clusters",children:O.jsx(W_,{dataset:t,cluster:q,selectedModel:at,onChange:Ve})}),O.jsx(fu,{active:Le==5,complete:Le>5,title:"5. Save Scope",children:O.jsx(X_,{dataset:t,scope:Ye,embedding:h,umap:L,cluster:q,clusterLabelModel:at,onNew:Ke,onChange:ze})})]}),O.jsxs("div",{className:"dataset--setup-right-column",children:[O.jsx("div",{className:"dataset--setup-umap",children:O.jsx(Q_,{dataset:t,umap:L,width:a,height:o,onScatter:We,onSelect:ht})}),O.jsxs("div",{className:"dataset--selected",children:[O.jsxs("span",{children:["Points Selected: ",Pt.length," ",Pt.length?null:"(Hold shift and drag an area of the map to select)",Pt.length>0?O.jsx("button",{className:"deselect",onClick:()=>{mt([]),pe==null||pe.select([]),pe==null||pe.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Pt.length>0?O.jsx("div",{className:"dataset--selected-table",children:O.jsx(Y_,{dataset:t,indices:Pt,datasetId:r,maxRows:150})}):null]})]})]})]}):O.jsx("div",{children:"Loading..."})}const yR=()=>O.jsx("nav",{children:O.jsx("ul",{children:O.jsx("li",{children:O.jsx(Vu,{to:"/",children:"Latent Scope"})})})});var xR={VITE_API_URL:"https://api.latentscope.com/api",BASE_URL:"/latent-scope/",MODE:"read_only",DEV:!1,PROD:!0,SSR:!1};function ER(){const e=xR;return console.log("ENV",e),O.jsxs(qb,{basename:e.BASE_NAME,children:[O.jsx(yR,{}),O.jsx("div",{className:"page",children:O.jsxs(Hb,{children:[O.jsx(vu,{path:"/",element:O.jsx(lA,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup/:scope",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/explore/:scope",element:O.jsx(fR,{})})]})})]})}Ip.createRoot(document.getElementById("root")).render(O.jsx(Q1.StrictMode,{children:O.jsx(ER,{})}));
