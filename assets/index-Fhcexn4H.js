function RS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var OS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $1={exports:{}},Jd={},G1={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),PS=Symbol.for("react.portal"),NS=Symbol.for("react.fragment"),kS=Symbol.for("react.strict_mode"),IS=Symbol.for("react.profiler"),DS=Symbol.for("react.provider"),MS=Symbol.for("react.context"),FS=Symbol.for("react.forward_ref"),jS=Symbol.for("react.suspense"),BS=Symbol.for("react.memo"),$S=Symbol.for("react.lazy"),jg=Symbol.iterator;function GS(e){return e===null||typeof e!="object"?null:(e=jg&&e[jg]||e["@@iterator"],typeof e=="function"?e:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,V1={};function Zl(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function H1(){}H1.prototype=Zl.prototype;function $0(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}var G0=$0.prototype=new H1;G0.constructor=$0;U1(G0,Zl.prototype);G0.isPureReactComponent=!0;var Bg=Array.isArray,W1=Object.prototype.hasOwnProperty,z0={current:null},X1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)W1.call(t,r)&&!X1.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ku,type:e,key:a,ref:o,props:i,_owner:z0.current}}function zS(e,t){return{$$typeof:Ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function U0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ku}function US(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $g=/\/+/g;function Bh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?US(""+e.key):t.toString(36)}function Jf(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ku:case PS:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Bh(o,0):r,Bg(i)?(n="",e!=null&&(n=e.replace($g,"$&/")+"/"),Jf(i,t,n,"",function(f){return f})):i!=null&&(U0(i)&&(i=zS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($g,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Bg(e))for(var l=0;l<e.length;l++){a=e[l];var u=r+Bh(a,l);o+=Jf(a,t,n,u,i)}else if(u=GS(e),typeof u=="function")for(e=u.call(e),l=0;!(a=e.next()).done;)a=a.value,u=r+Bh(a,l++),o+=Jf(a,t,n,u,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tf(e,t,n){if(e==null)return e;var r=[],i=0;return Jf(e,r,"","",function(a){return t.call(n,a,i++)}),r}function VS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var or={current:null},ed={transition:null},HS={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:ed,ReactCurrentOwner:z0};Gt.Children={map:Tf,forEach:function(e,t,n){Tf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tf(e,function(){t++}),t},toArray:function(e){return Tf(e,function(t){return t})||[]},only:function(e){if(!U0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=Zl;Gt.Fragment=NS;Gt.Profiler=IS;Gt.PureComponent=$0;Gt.StrictMode=kS;Gt.Suspense=jS;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=U1({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=z0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)W1.call(t,u)&&!X1.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Ku,type:e.type,key:i,ref:a,props:r,_owner:o}};Gt.createContext=function(e){return e={$$typeof:MS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DS,_context:e},e.Consumer=e};Gt.createElement=Y1;Gt.createFactory=function(e){var t=Y1.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:FS,render:e}};Gt.isValidElement=U0;Gt.lazy=function(e){return{$$typeof:$S,_payload:{_status:-1,_result:e},_init:VS}};Gt.memo=function(e,t){return{$$typeof:BS,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=ed.transition;ed.transition={};try{e()}finally{ed.transition=t}};Gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Gt.useCallback=function(e,t){return or.current.useCallback(e,t)};Gt.useContext=function(e){return or.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return or.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return or.current.useEffect(e,t)};Gt.useId=function(){return or.current.useId()};Gt.useImperativeHandle=function(e,t,n){return or.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return or.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return or.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return or.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return or.current.useReducer(e,t,n)};Gt.useRef=function(e){return or.current.useRef(e)};Gt.useState=function(e){return or.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return or.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return or.current.useTransition()};Gt.version="18.2.0";G1.exports=Gt;var $=G1.exports;const Q1=B0($),WS=RS({__proto__:null,default:Q1},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS=$,YS=Symbol.for("react.element"),QS=Symbol.for("react.fragment"),KS=Object.prototype.hasOwnProperty,qS=XS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZS={key:!0,ref:!0,__self:!0,__source:!0};function K1(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)KS.call(t,r)&&!ZS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:YS,type:e,key:a,ref:o,props:i,_owner:qS.current}}Jd.Fragment=QS;Jd.jsx=K1;Jd.jsxs=K1;$1.exports=Jd;var O=$1.exports,Ip={},q1={exports:{}},kr={},Z1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,We){var Ne=pe.length;pe.push(We);e:for(;0<Ne;){var Se=Ne-1>>>1,Ge=pe[Se];if(0<i(Ge,We))pe[Se]=We,pe[Ne]=Ge,Ne=Se;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var We=pe[0],Ne=pe.pop();if(Ne!==We){pe[0]=Ne;e:for(var Se=0,Ge=pe.length,lt=Ge>>>1;Se<lt;){var xt=2*(Se+1)-1,st=pe[xt],Qt=xt+1,Ht=pe[Qt];if(0>i(st,Ne))Qt<Ge&&0>i(Ht,st)?(pe[Se]=Ht,pe[Qt]=Ne,Se=Qt):(pe[Se]=st,pe[xt]=Ne,Se=xt);else if(Qt<Ge&&0>i(Ht,Ne))pe[Se]=Ht,pe[Qt]=Ne,Se=Qt;else break e}}return We}function i(pe,We){var Ne=pe.sortIndex-We.sortIndex;return Ne!==0?Ne:pe.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],h=1,p=null,d=3,T=!1,x=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(pe){for(var We=n(f);We!==null;){if(We.callback===null)r(f);else if(We.startTime<=pe)r(f),We.sortIndex=We.expirationTime,t(u,We);else break;We=n(f)}}function H(pe){if(R=!1,C(pe),!x)if(n(u)!==null)x=!0,ut(q);else{var We=n(f);We!==null&&ht(H,We.startTime-pe)}}function q(pe,We){x=!1,R&&(R=!1,g(ae),ae=-1),T=!0;var Ne=d;try{for(C(We),p=n(u);p!==null&&(!(p.expirationTime>We)||pe&&!Me());){var Se=p.callback;if(typeof Se=="function"){p.callback=null,d=p.priorityLevel;var Ge=Se(p.expirationTime<=We);We=e.unstable_now(),typeof Ge=="function"?p.callback=Ge:p===n(u)&&r(u),C(We)}else r(u);p=n(u)}if(p!==null)var lt=!0;else{var xt=n(f);xt!==null&&ht(H,xt.startTime-We),lt=!1}return lt}finally{p=null,d=Ne,T=!1}}var le=!1,he=null,ae=-1,it=5,Fe=-1;function Me(){return!(e.unstable_now()-Fe<it)}function qe(){if(he!==null){var pe=e.unstable_now();Fe=pe;var We=!0;try{We=he(!0,pe)}finally{We?Xe():(le=!1,he=null)}}else le=!1}var Xe;if(typeof w=="function")Xe=function(){w(qe)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Nt=Qe.port2;Qe.port1.onmessage=qe,Xe=function(){Nt.postMessage(null)}}else Xe=function(){I(qe,0)};function ut(pe){he=pe,le||(le=!0,Xe())}function ht(pe,We){ae=I(function(){pe(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){x||T||(x=!0,ut(q))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(pe){switch(d){case 1:case 2:case 3:var We=3;break;default:We=d}var Ne=d;d=We;try{return pe()}finally{d=Ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,We){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Ne=d;d=pe;try{return We()}finally{d=Ne}},e.unstable_scheduleCallback=function(pe,We,Ne){var Se=e.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Se+Ne:Se):Ne=Se,pe){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Ne+Ge,pe={id:h++,callback:We,priorityLevel:pe,startTime:Ne,expirationTime:Ge,sortIndex:-1},Ne>Se?(pe.sortIndex=Ne,t(f,pe),n(u)===null&&pe===n(f)&&(R?(g(ae),ae=-1):R=!0,ht(H,Ne-Se))):(pe.sortIndex=Ge,t(u,pe),x||T||(x=!0,ut(q))),pe},e.unstable_shouldYield=Me,e.unstable_wrapCallback=function(pe){var We=d;return function(){var Ne=d;d=We;try{return pe.apply(this,arguments)}finally{d=Ne}}}})(J1);Z1.exports=J1;var JS=Z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=$,Nr=JS;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tx=new Set,Au={};function Io(e,t){Ul(e,t),Ul(e+"Capture",t)}function Ul(e,t){for(Au[e]=t,e=0;e<t.length;e++)tx.add(t[e])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dp=Object.prototype.hasOwnProperty,ew=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},zg={};function tw(e){return Dp.call(zg,e)?!0:Dp.call(Gg,e)?!1:ew.test(e)?zg[e]=!0:(Gg[e]=!0,!1)}function nw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rw(e,t,n,r){if(t===null||typeof t>"u"||nw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lr(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var V0=/[\-:]([a-z])/g;function H0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(V0,H0);Kn[t]=new lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(V0,H0);Kn[t]=new lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(V0,H0);Kn[t]=new lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new lr(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function W0(e,t,n,r){var i=Kn.hasOwnProperty(t)?Kn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(rw(t,n,i,r)&&(n=null),r||i===null?tw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yi=ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bf=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),wl=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),Y0=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),Q0=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),ix=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var xn=Object.assign,$h;function du(e){if($h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$h=t&&t[1]||""}return`
`+$h+e}var Gh=!1;function zh(e,t){if(!e||Gh)return"";Gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Gh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?du(e):""}function iw(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=zh(e.type,!1),e;case 11:return e=zh(e.type.render,!1),e;case 1:return e=zh(e.type,!0),e;default:return""}}function Bp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wl:return"Fragment";case Sl:return"Portal";case Mp:return"Profiler";case X0:return"StrictMode";case Fp:return"Suspense";case jp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rx:return(e.displayName||"Context")+".Consumer";case nx:return(e._context.displayName||"Context")+".Provider";case Y0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q0:return t=e.displayName||null,t!==null?t:Bp(e.type)||"Memo";case Ea:t=e._payload,e=e._init;try{return Bp(e(t))}catch{}}return null}function aw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bp(t);case 8:return t===X0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ma(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ax(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ow(e){var t=ax(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Af(e){e._valueTracker||(e._valueTracker=ow(e))}function ox(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ax(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $p(e,t){var n=t.checked;return xn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ma(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lx(e,t){t=t.checked,t!=null&&W0(e,"checked",t,!1)}function Gp(e,t){lx(e,t);var n=Ma(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zp(e,t.type,n):t.hasOwnProperty("defaultValue")&&zp(e,t.type,Ma(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zp(e,t,n){(t!=="number"||hd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mu=Array.isArray;function Ml(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ma(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Up(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return xn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(mu(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ma(n)}}function sx(e,t){var n=Ma(t.value),r=Ma(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ux(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cf,cx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cf=Cf||document.createElement("div"),Cf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lw=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(e){lw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gu[t]=gu[e]})});function fx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gu.hasOwnProperty(e)&&gu[e]?(""+t).trim():t+"px"}function dx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var sw=xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hp(e,t){if(t){if(sw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function Wp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function K0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yp=null,Fl=null,jl=null;function Yg(e){if(e=Ju(e)){if(typeof Yp!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=im(t),Yp(e.stateNode,e.type,t))}}function mx(e){Fl?jl?jl.push(e):jl=[e]:Fl=e}function hx(){if(Fl){var e=Fl,t=jl;if(jl=Fl=null,Yg(e),t)for(e=0;e<t.length;e++)Yg(t[e])}}function px(e,t){return e(t)}function vx(){}var Uh=!1;function gx(e,t,n){if(Uh)return e(t,n);Uh=!0;try{return px(e,t,n)}finally{Uh=!1,(Fl!==null||jl!==null)&&(vx(),hx())}}function Lu(e,t){var n=e.stateNode;if(n===null)return null;var r=im(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var Qp=!1;if(Vi)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Qp=!1}function uw(e,t,n,r,i,a,o,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(h){this.onError(h)}}var yu=!1,pd=null,vd=!1,Kp=null,cw={onError:function(e){yu=!0,pd=e}};function fw(e,t,n,r,i,a,o,l,u){yu=!1,pd=null,uw.apply(cw,arguments)}function dw(e,t,n,r,i,a,o,l,u){if(fw.apply(this,arguments),yu){if(yu){var f=pd;yu=!1,pd=null}else throw Error(Pe(198));vd||(vd=!0,Kp=f)}}function Do(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qg(e){if(Do(e)!==e)throw Error(Pe(188))}function mw(e){var t=e.alternate;if(!t){if(t=Do(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Qg(i),e;if(a===r)return Qg(i),t;a=a.sibling}throw Error(Pe(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(Pe(189))}}if(n.alternate!==r)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function xx(e){return e=mw(e),e!==null?Ex(e):null}function Ex(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ex(e);if(t!==null)return t;e=e.sibling}return null}var _x=Nr.unstable_scheduleCallback,Kg=Nr.unstable_cancelCallback,hw=Nr.unstable_shouldYield,pw=Nr.unstable_requestPaint,On=Nr.unstable_now,vw=Nr.unstable_getCurrentPriorityLevel,q0=Nr.unstable_ImmediatePriority,Sx=Nr.unstable_UserBlockingPriority,gd=Nr.unstable_NormalPriority,gw=Nr.unstable_LowPriority,wx=Nr.unstable_IdlePriority,em=null,wi=null;function yw(e){if(wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(em,e,void 0,(e.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:_w,xw=Math.log,Ew=Math.LN2;function _w(e){return e>>>=0,e===0?32:31-(xw(e)/Ew|0)|0}var Lf=64,Rf=4194304;function hu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=hu(l):(a&=o,a!==0&&(r=hu(a)))}else o=n&~i,o!==0?r=hu(o):a!==0&&(r=hu(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ri(t),i=1<<n,r|=e[n],t&=~i;return r}function Sw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ww(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ri(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Sw(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}function qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tx(){var e=Lf;return Lf<<=1,!(Lf&4194240)&&(Lf=64),e}function Vh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ri(t),e[t]=n}function Tw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ri(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Z0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ri(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qt=0;function bx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ax,J0,Cx,Lx,Rx,Zp=!1,Of=[],Ca=null,La=null,Ra=null,Ru=new Map,Ou=new Map,Sa=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(e,t){switch(e){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Ru.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(t.pointerId)}}function tu(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ju(t),t!==null&&J0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Aw(e,t,n,r,i){switch(t){case"focusin":return Ca=tu(Ca,e,t,n,r,i),!0;case"dragenter":return La=tu(La,e,t,n,r,i),!0;case"mouseover":return Ra=tu(Ra,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ru.set(a,tu(Ru.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ou.set(a,tu(Ou.get(a)||null,e,t,n,r,i)),!0}return!1}function Ox(e){var t=Eo(e.target);if(t!==null){var n=Do(t);if(n!==null){if(t=n.tag,t===13){if(t=yx(n),t!==null){e.blockedOn=t,Rx(e.priority,function(){Cx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function td(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xp=r,n.target.dispatchEvent(r),Xp=null}else return t=Ju(n),t!==null&&J0(t),e.blockedOn=n,!1;t.shift()}return!0}function Zg(e,t,n){td(e)&&n.delete(t)}function Cw(){Zp=!1,Ca!==null&&td(Ca)&&(Ca=null),La!==null&&td(La)&&(La=null),Ra!==null&&td(Ra)&&(Ra=null),Ru.forEach(Zg),Ou.forEach(Zg)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Zp||(Zp=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,Cw)))}function Pu(e){function t(i){return nu(i,e)}if(0<Of.length){nu(Of[0],e);for(var n=1;n<Of.length;n++){var r=Of[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ca!==null&&nu(Ca,e),La!==null&&nu(La,e),Ra!==null&&nu(Ra,e),Ru.forEach(t),Ou.forEach(t),n=0;n<Sa.length;n++)r=Sa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sa.length&&(n=Sa[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&Sa.shift()}var Bl=Yi.ReactCurrentBatchConfig,xd=!0;function Lw(e,t,n,r){var i=qt,a=Bl.transition;Bl.transition=null;try{qt=1,ev(e,t,n,r)}finally{qt=i,Bl.transition=a}}function Rw(e,t,n,r){var i=qt,a=Bl.transition;Bl.transition=null;try{qt=4,ev(e,t,n,r)}finally{qt=i,Bl.transition=a}}function ev(e,t,n,r){if(xd){var i=Jp(e,t,n,r);if(i===null)ep(e,t,r,Ed,n),qg(e,r);else if(Aw(i,e,t,n,r))r.stopPropagation();else if(qg(e,r),t&4&&-1<bw.indexOf(e)){for(;i!==null;){var a=Ju(i);if(a!==null&&Ax(a),a=Jp(e,t,n,r),a===null&&ep(e,t,r,Ed,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else ep(e,t,r,null,n)}}var Ed=null;function Jp(e,t,n,r){if(Ed=null,e=K0(r),e=Eo(e),e!==null)if(t=Do(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ed=e,null}function Px(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vw()){case q0:return 1;case Sx:return 4;case gd:case gw:return 16;case wx:return 536870912;default:return 16}default:return 16}}var Ta=null,tv=null,nd=null;function Nx(){if(nd)return nd;var e,t=tv,n=t.length,r,i="value"in Ta?Ta.value:Ta.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return nd=i.slice(e,1<r?1-r:void 0)}function rd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pf(){return!0}function Jg(){return!1}function Ir(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Pf:Jg,this.isPropagationStopped=Jg,this}return xn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pf)},persist:function(){},isPersistent:Pf}),t}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nv=Ir(Jl),Zu=xn({},Jl,{view:0,detail:0}),Ow=Ir(Zu),Hh,Wh,ru,tm=xn({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ru&&(ru&&e.type==="mousemove"?(Hh=e.screenX-ru.screenX,Wh=e.screenY-ru.screenY):Wh=Hh=0,ru=e),Hh)},movementY:function(e){return"movementY"in e?e.movementY:Wh}}),ey=Ir(tm),Pw=xn({},tm,{dataTransfer:0}),Nw=Ir(Pw),kw=xn({},Zu,{relatedTarget:0}),Xh=Ir(kw),Iw=xn({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),Dw=Ir(Iw),Mw=xn({},Jl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fw=Ir(Mw),jw=xn({},Jl,{data:0}),ty=Ir(jw),Bw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$w={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gw[e])?!!t[e]:!1}function rv(){return zw}var Uw=xn({},Zu,{key:function(e){if(e.key){var t=Bw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$w[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(e){return e.type==="keypress"?rd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vw=Ir(Uw),Hw=xn({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ny=Ir(Hw),Ww=xn({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),Xw=Ir(Ww),Yw=xn({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=Ir(Yw),Kw=xn({},tm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qw=Ir(Kw),Zw=[9,13,27,32],iv=Vi&&"CompositionEvent"in window,xu=null;Vi&&"documentMode"in document&&(xu=document.documentMode);var Jw=Vi&&"TextEvent"in window&&!xu,kx=Vi&&(!iv||xu&&8<xu&&11>=xu),ry=" ",iy=!1;function Ix(e,t){switch(e){case"keyup":return Zw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tl=!1;function eT(e,t){switch(e){case"compositionend":return Dx(t);case"keypress":return t.which!==32?null:(iy=!0,ry);case"textInput":return e=t.data,e===ry&&iy?null:e;default:return null}}function tT(e,t){if(Tl)return e==="compositionend"||!iv&&Ix(e,t)?(e=Nx(),nd=tv=Ta=null,Tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kx&&t.locale!=="ko"?null:t.data;default:return null}}var nT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nT[e.type]:t==="textarea"}function Mx(e,t,n,r){mx(r),t=_d(t,"onChange"),0<t.length&&(n=new nv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eu=null,Nu=null;function rT(e){Xx(e,0)}function nm(e){var t=Cl(e);if(ox(t))return e}function iT(e,t){if(e==="change")return t}var Fx=!1;if(Vi){var Yh;if(Vi){var Qh="oninput"in document;if(!Qh){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Qh=typeof oy.oninput=="function"}Yh=Qh}else Yh=!1;Fx=Yh&&(!document.documentMode||9<document.documentMode)}function ly(){Eu&&(Eu.detachEvent("onpropertychange",jx),Nu=Eu=null)}function jx(e){if(e.propertyName==="value"&&nm(Nu)){var t=[];Mx(t,Nu,e,K0(e)),gx(rT,t)}}function aT(e,t,n){e==="focusin"?(ly(),Eu=t,Nu=n,Eu.attachEvent("onpropertychange",jx)):e==="focusout"&&ly()}function oT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nm(Nu)}function lT(e,t){if(e==="click")return nm(t)}function sT(e,t){if(e==="input"||e==="change")return nm(t)}function uT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ai=typeof Object.is=="function"?Object.is:uT;function ku(e,t){if(ai(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dp.call(t,i)||!ai(e[i],t[i]))return!1}return!0}function sy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uy(e,t){var n=sy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sy(n)}}function Bx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $x(){for(var e=window,t=hd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hd(e.document)}return t}function av(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cT(e){var t=$x(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bx(n.ownerDocument.documentElement,n)){if(r!==null&&av(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=uy(n,a);var o=uy(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fT=Vi&&"documentMode"in document&&11>=document.documentMode,bl=null,e0=null,_u=null,t0=!1;function cy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;t0||bl==null||bl!==hd(r)||(r=bl,"selectionStart"in r&&av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&ku(_u,r)||(_u=r,r=_d(e0,"onSelect"),0<r.length&&(t=new nv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bl)))}function Nf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Al={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},Kh={},Gx={};Vi&&(Gx=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function rm(e){if(Kh[e])return Kh[e];if(!Al[e])return e;var t=Al[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gx)return Kh[e]=t[n];return e}var zx=rm("animationend"),Ux=rm("animationiteration"),Vx=rm("animationstart"),Hx=rm("transitionend"),Wx=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(e,t){Wx.set(e,t),Io(t,[e])}for(var qh=0;qh<fy.length;qh++){var Zh=fy[qh],dT=Zh.toLowerCase(),mT=Zh[0].toUpperCase()+Zh.slice(1);ja(dT,"on"+mT)}ja(zx,"onAnimationEnd");ja(Ux,"onAnimationIteration");ja(Vx,"onAnimationStart");ja("dblclick","onDoubleClick");ja("focusin","onFocus");ja("focusout","onBlur");ja(Hx,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function dy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dw(r,t,void 0,e),e.currentTarget=null}function Xx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;dy(i,l,f),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,f=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;dy(i,l,f),a=u}}}if(vd)throw e=Kp,vd=!1,Kp=null,e}function cn(e,t){var n=t[o0];n===void 0&&(n=t[o0]=new Set);var r=e+"__bubble";n.has(r)||(Yx(t,e,2,!1),n.add(r))}function Jh(e,t,n){var r=0;t&&(r|=4),Yx(n,e,r,t)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[kf]){e[kf]=!0,tx.forEach(function(n){n!=="selectionchange"&&(hT.has(n)||Jh(n,!1,e),Jh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kf]||(t[kf]=!0,Jh("selectionchange",!1,t))}}function Yx(e,t,n,r){switch(Px(t)){case 1:var i=Lw;break;case 4:i=Rw;break;default:i=ev}n=i.bind(null,t,n,e),i=void 0,!Qp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ep(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Eo(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}gx(function(){var f=a,h=K0(n),p=[];e:{var d=Wx.get(e);if(d!==void 0){var T=nv,x=e;switch(e){case"keypress":if(rd(n)===0)break e;case"keydown":case"keyup":T=Vw;break;case"focusin":x="focus",T=Xh;break;case"focusout":x="blur",T=Xh;break;case"beforeblur":case"afterblur":T=Xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Xw;break;case zx:case Ux:case Vx:T=Dw;break;case Hx:T=Qw;break;case"scroll":T=Ow;break;case"wheel":T=qw;break;case"copy":case"cut":case"paste":T=Fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=ny}var R=(t&4)!==0,I=!R&&e==="scroll",g=R?d!==null?d+"Capture":null:d;R=[];for(var w=f,C;w!==null;){C=w;var H=C.stateNode;if(C.tag===5&&H!==null&&(C=H,g!==null&&(H=Lu(w,g),H!=null&&R.push(Du(w,H,C)))),I)break;w=w.return}0<R.length&&(d=new T(d,x,null,n,h),p.push({event:d,listeners:R}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",d&&n!==Xp&&(x=n.relatedTarget||n.fromElement)&&(Eo(x)||x[Hi]))break e;if((T||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,T?(x=n.relatedTarget||n.toElement,T=f,x=x?Eo(x):null,x!==null&&(I=Do(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(T=null,x=f),T!==x)){if(R=ey,H="onMouseLeave",g="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(R=ny,H="onPointerLeave",g="onPointerEnter",w="pointer"),I=T==null?d:Cl(T),C=x==null?d:Cl(x),d=new R(H,w+"leave",T,n,h),d.target=I,d.relatedTarget=C,H=null,Eo(h)===f&&(R=new R(g,w+"enter",x,n,h),R.target=C,R.relatedTarget=I,H=R),I=H,T&&x)t:{for(R=T,g=x,w=0,C=R;C;C=xl(C))w++;for(C=0,H=g;H;H=xl(H))C++;for(;0<w-C;)R=xl(R),w--;for(;0<C-w;)g=xl(g),C--;for(;w--;){if(R===g||g!==null&&R===g.alternate)break t;R=xl(R),g=xl(g)}R=null}else R=null;T!==null&&my(p,d,T,R,!1),x!==null&&I!==null&&my(p,I,x,R,!0)}}e:{if(d=f?Cl(f):window,T=d.nodeName&&d.nodeName.toLowerCase(),T==="select"||T==="input"&&d.type==="file")var q=iT;else if(ay(d))if(Fx)q=sT;else{q=oT;var le=aT}else(T=d.nodeName)&&T.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(q=lT);if(q&&(q=q(e,f))){Mx(p,q,n,h);break e}le&&le(e,d,f),e==="focusout"&&(le=d._wrapperState)&&le.controlled&&d.type==="number"&&zp(d,"number",d.value)}switch(le=f?Cl(f):window,e){case"focusin":(ay(le)||le.contentEditable==="true")&&(bl=le,e0=f,_u=null);break;case"focusout":_u=e0=bl=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,cy(p,n,h);break;case"selectionchange":if(fT)break;case"keydown":case"keyup":cy(p,n,h)}var he;if(iv)e:{switch(e){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else Tl?Ix(e,n)&&(ae="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ae="onCompositionStart");ae&&(kx&&n.locale!=="ko"&&(Tl||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&Tl&&(he=Nx()):(Ta=h,tv="value"in Ta?Ta.value:Ta.textContent,Tl=!0)),le=_d(f,ae),0<le.length&&(ae=new ty(ae,e,null,n,h),p.push({event:ae,listeners:le}),he?ae.data=he:(he=Dx(n),he!==null&&(ae.data=he)))),(he=Jw?eT(e,n):tT(e,n))&&(f=_d(f,"onBeforeInput"),0<f.length&&(h=new ty("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=he))}Xx(p,t)})}function Du(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _d(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Lu(e,n),a!=null&&r.unshift(Du(e,a,i)),a=Lu(e,t),a!=null&&r.push(Du(e,a,i))),e=e.return}return r}function xl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function my(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Lu(n,a),u!=null&&o.unshift(Du(n,u,l))):i||(u=Lu(n,a),u!=null&&o.push(Du(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var pT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function hy(e){return(typeof e=="string"?e:""+e).replace(pT,`
`).replace(vT,"")}function If(e,t,n){if(t=hy(t),hy(e)!==t&&n)throw Error(Pe(425))}function Sd(){}var n0=null,r0=null;function i0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(e){return py.resolve(null).then(e).catch(xT)}:a0;function xT(e){setTimeout(function(){throw e})}function tp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Pu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(t)}function Oa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var es=Math.random().toString(36).slice(2),Si="__reactFiber$"+es,Mu="__reactProps$"+es,Hi="__reactContainer$"+es,o0="__reactEvents$"+es,ET="__reactListeners$"+es,_T="__reactHandles$"+es;function Eo(e){var t=e[Si];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hi]||n[Si]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vy(e);e!==null;){if(n=e[Si])return n;e=vy(e)}return t}e=n,n=e.parentNode}return null}function Ju(e){return e=e[Si]||e[Hi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function im(e){return e[Mu]||null}var l0=[],Ll=-1;function Ba(e){return{current:e}}function fn(e){0>Ll||(e.current=l0[Ll],l0[Ll]=null,Ll--)}function rn(e,t){Ll++,l0[Ll]=e.current,e.current=t}var Fa={},er=Ba(Fa),gr=Ba(!1),Lo=Fa;function Vl(e,t){var n=e.type.contextTypes;if(!n)return Fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yr(e){return e=e.childContextTypes,e!=null}function wd(){fn(gr),fn(er)}function gy(e,t,n){if(er.current!==Fa)throw Error(Pe(168));rn(er,t),rn(gr,n)}function Qx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Pe(108,aw(e)||"Unknown",i));return xn({},n,r)}function Td(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fa,Lo=er.current,rn(er,e),rn(gr,gr.current),!0}function yy(e,t,n){var r=e.stateNode;if(!r)throw Error(Pe(169));n?(e=Qx(e,t,Lo),r.__reactInternalMemoizedMergedChildContext=e,fn(gr),fn(er),rn(er,e)):fn(gr),rn(gr,n)}var $i=null,am=!1,np=!1;function Kx(e){$i===null?$i=[e]:$i.push(e)}function ST(e){am=!0,Kx(e)}function $a(){if(!np&&$i!==null){np=!0;var e=0,t=qt;try{var n=$i;for(qt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}$i=null,am=!1}catch(i){throw $i!==null&&($i=$i.slice(e+1)),_x(q0,$a),i}finally{qt=t,np=!1}}return null}var Rl=[],Ol=0,bd=null,Ad=0,Ur=[],Vr=0,Ro=null,Gi=1,zi="";function yo(e,t){Rl[Ol++]=Ad,Rl[Ol++]=bd,bd=e,Ad=t}function qx(e,t,n){Ur[Vr++]=Gi,Ur[Vr++]=zi,Ur[Vr++]=Ro,Ro=e;var r=Gi;e=zi;var i=32-ri(r)-1;r&=~(1<<i),n+=1;var a=32-ri(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gi=1<<32-ri(t)+i|n<<i|r,zi=a+e}else Gi=1<<a|n<<i|r,zi=e}function ov(e){e.return!==null&&(yo(e,1),qx(e,1,0))}function lv(e){for(;e===bd;)bd=Rl[--Ol],Rl[Ol]=null,Ad=Rl[--Ol],Rl[Ol]=null;for(;e===Ro;)Ro=Ur[--Vr],Ur[Vr]=null,zi=Ur[--Vr],Ur[Vr]=null,Gi=Ur[--Vr],Ur[Vr]=null}var Pr=null,Or=null,mn=!1,ti=null;function Zx(e,t){var n=Hr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pr=e,Or=Oa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pr=e,Or=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ro!==null?{id:Gi,overflow:zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Hr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pr=e,Or=null,!0):!1;default:return!1}}function s0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u0(e){if(mn){var t=Or;if(t){var n=t;if(!xy(e,t)){if(s0(e))throw Error(Pe(418));t=Oa(n.nextSibling);var r=Pr;t&&xy(e,t)?Zx(r,n):(e.flags=e.flags&-4097|2,mn=!1,Pr=e)}}else{if(s0(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,mn=!1,Pr=e}}}function Ey(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pr=e}function Df(e){if(e!==Pr)return!1;if(!mn)return Ey(e),mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!i0(e.type,e.memoizedProps)),t&&(t=Or)){if(s0(e))throw Jx(),Error(Pe(418));for(;t;)Zx(e,t),t=Oa(t.nextSibling)}if(Ey(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Or=Oa(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Or=null}}else Or=Pr?Oa(e.stateNode.nextSibling):null;return!0}function Jx(){for(var e=Or;e;)e=Oa(e.nextSibling)}function Hl(){Or=Pr=null,mn=!1}function sv(e){ti===null?ti=[e]:ti.push(e)}var wT=Yi.ReactCurrentBatchConfig;function Jr(e,t){if(e&&e.defaultProps){t=xn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Cd=Ba(null),Ld=null,Pl=null,uv=null;function cv(){uv=Pl=Ld=null}function fv(e){var t=Cd.current;fn(Cd),e._currentValue=t}function c0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $l(e,t){Ld=e,uv=Pl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pr=!0),e.firstContext=null)}function Xr(e){var t=e._currentValue;if(uv!==e)if(e={context:e,memoizedValue:t,next:null},Pl===null){if(Ld===null)throw Error(Pe(308));Pl=e,Ld.dependencies={lanes:0,firstContext:e}}else Pl=Pl.next=e;return t}var _o=null;function dv(e){_o===null?_o=[e]:_o.push(e)}function eE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,dv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Wi(e,r)}function Wi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _a=!1;function mv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Wt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Wi(e,n)}return i=r.interleaved,i===null?(t.next=t,dv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Wi(e,n)}function id(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Z0(e,n)}}function _y(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rd(e,t,n,r){var i=e.updateQueue;_a=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,o===null?a=f:o.next=f,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=u))}if(a!==null){var p=i.baseState;o=0,h=f=u=null,l=a;do{var d=l.lane,T=l.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,R=l;switch(d=t,T=n,R.tag){case 1:if(x=R.payload,typeof x=="function"){p=x.call(T,p,d);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=R.payload,d=typeof x=="function"?x.call(T,p,d):x,d==null)break e;p=xn({},p,d);break e;case 2:_a=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else T={eventTime:T,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=T,u=p):h=h.next=T,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Po|=o,e.lanes=o,e.memoizedState=p}}function Sy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Pe(191,i));i.call(r)}}}var nE=new ex.Component().refs;function f0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:xn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var om={isMounted:function(e){return(e=e._reactInternals)?Do(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ar(),i=ka(e),a=Ui(r,i);a.payload=t,n!=null&&(a.callback=n),t=Pa(e,a,i),t!==null&&(ii(t,e,i,r),id(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ar(),i=ka(e),a=Ui(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Pa(e,a,i),t!==null&&(ii(t,e,i,r),id(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ar(),r=ka(e),i=Ui(n,r);i.tag=2,t!=null&&(i.callback=t),t=Pa(e,i,r),t!==null&&(ii(t,e,r,n),id(t,e,r))}};function wy(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!ku(n,r)||!ku(i,a):!0}function rE(e,t,n){var r=!1,i=Fa,a=t.contextType;return typeof a=="object"&&a!==null?a=Xr(a):(i=yr(t)?Lo:er.current,r=t.contextTypes,a=(r=r!=null)?Vl(e,i):Fa),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=om,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ty(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&om.enqueueReplaceState(t,t.state,null)}function d0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=nE,mv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Xr(a):(a=yr(t)?Lo:er.current,i.context=Vl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(f0(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&om.enqueueReplaceState(i,i.state,null),Rd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var r=n.stateNode}if(!r)throw Error(Pe(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;l===nE&&(l=i.refs={}),o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function Mf(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function by(e){var t=e._init;return t(e._payload)}function iE(e){function t(g,w){if(e){var C=g.deletions;C===null?(g.deletions=[w],g.flags|=16):C.push(w)}}function n(g,w){if(!e)return null;for(;w!==null;)t(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=Ia(g,w),g.index=0,g.sibling=null,g}function a(g,w,C){return g.index=C,e?(C=g.alternate,C!==null?(C=C.index,C<w?(g.flags|=2,w):C):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,w,C,H){return w===null||w.tag!==6?(w=up(C,g.mode,H),w.return=g,w):(w=i(w,C),w.return=g,w)}function u(g,w,C,H){var q=C.type;return q===wl?h(g,w,C.props.children,H,C.key):w!==null&&(w.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ea&&by(q)===w.type)?(H=i(w,C.props),H.ref=iu(g,w,C),H.return=g,H):(H=cd(C.type,C.key,C.props,null,g.mode,H),H.ref=iu(g,w,C),H.return=g,H)}function f(g,w,C,H){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=cp(C,g.mode,H),w.return=g,w):(w=i(w,C.children||[]),w.return=g,w)}function h(g,w,C,H,q){return w===null||w.tag!==7?(w=Ao(C,g.mode,H,q),w.return=g,w):(w=i(w,C),w.return=g,w)}function p(g,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=up(""+w,g.mode,C),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bf:return C=cd(w.type,w.key,w.props,null,g.mode,C),C.ref=iu(g,null,w),C.return=g,C;case Sl:return w=cp(w,g.mode,C),w.return=g,w;case Ea:var H=w._init;return p(g,H(w._payload),C)}if(mu(w)||Js(w))return w=Ao(w,g.mode,C,null),w.return=g,w;Mf(g,w)}return null}function d(g,w,C,H){var q=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:l(g,w,""+C,H);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bf:return C.key===q?u(g,w,C,H):null;case Sl:return C.key===q?f(g,w,C,H):null;case Ea:return q=C._init,d(g,w,q(C._payload),H)}if(mu(C)||Js(C))return q!==null?null:h(g,w,C,H,null);Mf(g,C)}return null}function T(g,w,C,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return g=g.get(C)||null,l(w,g,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case bf:return g=g.get(H.key===null?C:H.key)||null,u(w,g,H,q);case Sl:return g=g.get(H.key===null?C:H.key)||null,f(w,g,H,q);case Ea:var le=H._init;return T(g,w,C,le(H._payload),q)}if(mu(H)||Js(H))return g=g.get(C)||null,h(w,g,H,q,null);Mf(w,H)}return null}function x(g,w,C,H){for(var q=null,le=null,he=w,ae=w=0,it=null;he!==null&&ae<C.length;ae++){he.index>ae?(it=he,he=null):it=he.sibling;var Fe=d(g,he,C[ae],H);if(Fe===null){he===null&&(he=it);break}e&&he&&Fe.alternate===null&&t(g,he),w=a(Fe,w,ae),le===null?q=Fe:le.sibling=Fe,le=Fe,he=it}if(ae===C.length)return n(g,he),mn&&yo(g,ae),q;if(he===null){for(;ae<C.length;ae++)he=p(g,C[ae],H),he!==null&&(w=a(he,w,ae),le===null?q=he:le.sibling=he,le=he);return mn&&yo(g,ae),q}for(he=r(g,he);ae<C.length;ae++)it=T(he,g,ae,C[ae],H),it!==null&&(e&&it.alternate!==null&&he.delete(it.key===null?ae:it.key),w=a(it,w,ae),le===null?q=it:le.sibling=it,le=it);return e&&he.forEach(function(Me){return t(g,Me)}),mn&&yo(g,ae),q}function R(g,w,C,H){var q=Js(C);if(typeof q!="function")throw Error(Pe(150));if(C=q.call(C),C==null)throw Error(Pe(151));for(var le=q=null,he=w,ae=w=0,it=null,Fe=C.next();he!==null&&!Fe.done;ae++,Fe=C.next()){he.index>ae?(it=he,he=null):it=he.sibling;var Me=d(g,he,Fe.value,H);if(Me===null){he===null&&(he=it);break}e&&he&&Me.alternate===null&&t(g,he),w=a(Me,w,ae),le===null?q=Me:le.sibling=Me,le=Me,he=it}if(Fe.done)return n(g,he),mn&&yo(g,ae),q;if(he===null){for(;!Fe.done;ae++,Fe=C.next())Fe=p(g,Fe.value,H),Fe!==null&&(w=a(Fe,w,ae),le===null?q=Fe:le.sibling=Fe,le=Fe);return mn&&yo(g,ae),q}for(he=r(g,he);!Fe.done;ae++,Fe=C.next())Fe=T(he,g,ae,Fe.value,H),Fe!==null&&(e&&Fe.alternate!==null&&he.delete(Fe.key===null?ae:Fe.key),w=a(Fe,w,ae),le===null?q=Fe:le.sibling=Fe,le=Fe);return e&&he.forEach(function(qe){return t(g,qe)}),mn&&yo(g,ae),q}function I(g,w,C,H){if(typeof C=="object"&&C!==null&&C.type===wl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case bf:e:{for(var q=C.key,le=w;le!==null;){if(le.key===q){if(q=C.type,q===wl){if(le.tag===7){n(g,le.sibling),w=i(le,C.props.children),w.return=g,g=w;break e}}else if(le.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ea&&by(q)===le.type){n(g,le.sibling),w=i(le,C.props),w.ref=iu(g,le,C),w.return=g,g=w;break e}n(g,le);break}else t(g,le);le=le.sibling}C.type===wl?(w=Ao(C.props.children,g.mode,H,C.key),w.return=g,g=w):(H=cd(C.type,C.key,C.props,null,g.mode,H),H.ref=iu(g,w,C),H.return=g,g=H)}return o(g);case Sl:e:{for(le=C.key;w!==null;){if(w.key===le)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(g,w.sibling),w=i(w,C.children||[]),w.return=g,g=w;break e}else{n(g,w);break}else t(g,w);w=w.sibling}w=cp(C,g.mode,H),w.return=g,g=w}return o(g);case Ea:return le=C._init,I(g,w,le(C._payload),H)}if(mu(C))return x(g,w,C,H);if(Js(C))return R(g,w,C,H);Mf(g,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(g,w.sibling),w=i(w,C),w.return=g,g=w):(n(g,w),w=up(C,g.mode,H),w.return=g,g=w),o(g)):n(g,w)}return I}var Wl=iE(!0),aE=iE(!1),ec={},Ti=Ba(ec),Fu=Ba(ec),ju=Ba(ec);function So(e){if(e===ec)throw Error(Pe(174));return e}function hv(e,t){switch(rn(ju,t),rn(Fu,e),rn(Ti,ec),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vp(t,e)}fn(Ti),rn(Ti,t)}function Xl(){fn(Ti),fn(Fu),fn(ju)}function oE(e){So(ju.current);var t=So(Ti.current),n=Vp(t,e.type);t!==n&&(rn(Fu,e),rn(Ti,n))}function pv(e){Fu.current===e&&(fn(Ti),fn(Fu))}var gn=Ba(0);function Od(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rp=[];function vv(){for(var e=0;e<rp.length;e++)rp[e]._workInProgressVersionPrimary=null;rp.length=0}var ad=Yi.ReactCurrentDispatcher,ip=Yi.ReactCurrentBatchConfig,Oo=0,yn=null,jn=null,Hn=null,Pd=!1,Su=!1,Bu=0,TT=0;function qn(){throw Error(Pe(321))}function gv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function yv(e,t,n,r,i,a){if(Oo=a,yn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ad.current=e===null||e.memoizedState===null?LT:RT,e=n(r,i),Su){a=0;do{if(Su=!1,Bu=0,25<=a)throw Error(Pe(301));a+=1,Hn=jn=null,t.updateQueue=null,ad.current=OT,e=n(r,i)}while(Su)}if(ad.current=Nd,t=jn!==null&&jn.next!==null,Oo=0,Hn=jn=yn=null,Pd=!1,t)throw Error(Pe(300));return e}function xv(){var e=Bu!==0;return Bu=0,e}function Ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?yn.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function Yr(){if(jn===null){var e=yn.alternate;e=e!==null?e.memoizedState:null}else e=jn.next;var t=Hn===null?yn.memoizedState:Hn.next;if(t!==null)Hn=t,jn=e;else{if(e===null)throw Error(Pe(310));jn=e,e={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Hn===null?yn.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function $u(e,t){return typeof t=="function"?t(e):t}function ap(e){var t=Yr(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=jn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,u=null,f=a;do{var h=f.lane;if((Oo&h)===h)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,yn.lanes|=h,Po|=h}f=f.next}while(f!==null&&f!==a);u===null?o=r:u.next=l,ai(r,t.memoizedState)||(pr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,yn.lanes|=a,Po|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function op(e){var t=Yr(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);ai(a,t.memoizedState)||(pr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function lE(){}function sE(e,t){var n=yn,r=Yr(),i=t(),a=!ai(r.memoizedState,i);if(a&&(r.memoizedState=i,pr=!0),r=r.queue,Ev(fE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,Gu(9,cE.bind(null,n,r,i,t),void 0,null),Wn===null)throw Error(Pe(349));Oo&30||uE(n,t,i)}return i}function uE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=yn.updateQueue,t===null?(t={lastEffect:null,stores:null},yn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cE(e,t,n,r){t.value=n,t.getSnapshot=r,dE(t)&&mE(e)}function fE(e,t,n){return n(function(){dE(t)&&mE(e)})}function dE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch{return!0}}function mE(e){var t=Wi(e,1);t!==null&&ii(t,e,1,-1)}function Ay(e){var t=Ei();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:e},t.queue=e,e=e.dispatch=CT.bind(null,yn,e),[t.memoizedState,e]}function Gu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=yn.updateQueue,t===null?(t={lastEffect:null,stores:null},yn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hE(){return Yr().memoizedState}function od(e,t,n,r){var i=Ei();yn.flags|=e,i.memoizedState=Gu(1|t,n,void 0,r===void 0?null:r)}function lm(e,t,n,r){var i=Yr();r=r===void 0?null:r;var a=void 0;if(jn!==null){var o=jn.memoizedState;if(a=o.destroy,r!==null&&gv(r,o.deps)){i.memoizedState=Gu(t,n,a,r);return}}yn.flags|=e,i.memoizedState=Gu(1|t,n,a,r)}function Cy(e,t){return od(8390656,8,e,t)}function Ev(e,t){return lm(2048,8,e,t)}function pE(e,t){return lm(4,2,e,t)}function vE(e,t){return lm(4,4,e,t)}function gE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yE(e,t,n){return n=n!=null?n.concat([e]):null,lm(4,4,gE.bind(null,t,e),n)}function _v(){}function xE(e,t){var n=Yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function EE(e,t){var n=Yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _E(e,t,n){return Oo&21?(ai(n,t)||(n=Tx(),yn.lanes|=n,Po|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pr=!0),e.memoizedState=n)}function bT(e,t){var n=qt;qt=n!==0&&4>n?n:4,e(!0);var r=ip.transition;ip.transition={};try{e(!1),t()}finally{qt=n,ip.transition=r}}function SE(){return Yr().memoizedState}function AT(e,t,n){var r=ka(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wE(e))TE(t,n);else if(n=eE(e,t,n,r),n!==null){var i=ar();ii(n,e,r,i),bE(n,t,r)}}function CT(e,t,n){var r=ka(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wE(e))TE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ai(l,o)){var u=t.interleaved;u===null?(i.next=i,dv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=eE(e,t,i,r),n!==null&&(i=ar(),ii(n,e,r,i),bE(n,t,r))}}function wE(e){var t=e.alternate;return e===yn||t!==null&&t===yn}function TE(e,t){Su=Pd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Z0(e,n)}}var Nd={readContext:Xr,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},LT={readContext:Xr,useCallback:function(e,t){return Ei().memoizedState=[e,t===void 0?null:t],e},useContext:Xr,useEffect:Cy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,od(4194308,4,gE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return od(4194308,4,e,t)},useInsertionEffect:function(e,t){return od(4,2,e,t)},useMemo:function(e,t){var n=Ei();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ei();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=AT.bind(null,yn,e),[r.memoizedState,e]},useRef:function(e){var t=Ei();return e={current:e},t.memoizedState=e},useState:Ay,useDebugValue:_v,useDeferredValue:function(e){return Ei().memoizedState=e},useTransition:function(){var e=Ay(!1),t=e[0];return e=bT.bind(null,e[1]),Ei().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=yn,i=Ei();if(mn){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),Wn===null)throw Error(Pe(349));Oo&30||uE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Cy(fE.bind(null,r,a,e),[e]),r.flags|=2048,Gu(9,cE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ei(),t=Wn.identifierPrefix;if(mn){var n=zi,r=Gi;n=(r&~(1<<32-ri(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=TT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RT={readContext:Xr,useCallback:xE,useContext:Xr,useEffect:Ev,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:ap,useRef:hE,useState:function(){return ap($u)},useDebugValue:_v,useDeferredValue:function(e){var t=Yr();return _E(t,jn.memoizedState,e)},useTransition:function(){var e=ap($u)[0],t=Yr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1},OT={readContext:Xr,useCallback:xE,useContext:Xr,useEffect:Ev,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:op,useRef:hE,useState:function(){return op($u)},useDebugValue:_v,useDeferredValue:function(e){var t=Yr();return jn===null?t.memoizedState=e:_E(t,jn.memoizedState,e)},useTransition:function(){var e=op($u)[0],t=Yr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1};function Yl(e,t){try{var n="",r=t;do n+=iw(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function lp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var PT=typeof WeakMap=="function"?WeakMap:Map;function AE(e,t,n){n=Ui(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Id||(Id=!0,w0=r),m0(e,t)},n}function CE(e,t,n){n=Ui(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){m0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){m0(e,t),typeof r!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ly(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new PT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=HT.bind(null,e,t,n),t.then(e,e))}function Ry(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ui(-1,1),t.tag=2,Pa(n,t,1))),n.lanes|=1),e)}var NT=Yi.ReactCurrentOwner,pr=!1;function rr(e,t,n,r){t.child=e===null?aE(t,null,n,r):Wl(t,e.child,n,r)}function Py(e,t,n,r,i){n=n.render;var a=t.ref;return $l(t,i),r=yv(e,t,n,r,a,i),n=xv(),e!==null&&!pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(mn&&n&&ov(t),t.flags|=1,rr(e,t,r,i),t.child)}function Ny(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Rv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,LE(e,t,a,r,i)):(e=cd(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(o,r)&&e.ref===t.ref)return Xi(e,t,i)}return t.flags|=1,e=Ia(a,r),e.ref=t.ref,e.return=t,t.child=e}function LE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(ku(a,r)&&e.ref===t.ref)if(pr=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(pr=!0);else return t.lanes=e.lanes,Xi(e,t,i)}return h0(e,t,n,r,i)}function RE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(kl,Rr),Rr|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rn(kl,Rr),Rr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,rn(kl,Rr),Rr|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,rn(kl,Rr),Rr|=r;return rr(e,t,i,n),t.child}function OE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function h0(e,t,n,r,i){var a=yr(n)?Lo:er.current;return a=Vl(t,a),$l(t,i),n=yv(e,t,n,r,a,i),r=xv(),e!==null&&!pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(mn&&r&&ov(t),t.flags|=1,rr(e,t,n,i),t.child)}function ky(e,t,n,r,i){if(yr(n)){var a=!0;Td(t)}else a=!1;if($l(t,i),t.stateNode===null)ld(e,t),rE(t,n,r),d0(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Xr(f):(f=yr(n)?Lo:er.current,f=Vl(t,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==f)&&Ty(t,o,r,f),_a=!1;var d=t.memoizedState;o.state=d,Rd(t,r,o,i),u=t.memoizedState,l!==r||d!==u||gr.current||_a?(typeof h=="function"&&(f0(t,n,h,r),u=t.memoizedState),(l=_a||wy(t,n,l,r,d,u,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,tE(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Jr(t.type,l),o.props=f,p=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xr(u):(u=yr(n)?Lo:er.current,u=Vl(t,u));var T=n.getDerivedStateFromProps;(h=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||d!==u)&&Ty(t,o,r,u),_a=!1,d=t.memoizedState,o.state=d,Rd(t,r,o,i);var x=t.memoizedState;l!==p||d!==x||gr.current||_a?(typeof T=="function"&&(f0(t,n,T,r),x=t.memoizedState),(f=_a||wy(t,n,f,r,d,x,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=u,r=f):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return p0(e,t,n,r,a,i)}function p0(e,t,n,r,i,a){OE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&yy(t,n,!1),Xi(e,t,a);r=t.stateNode,NT.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Wl(t,e.child,null,a),t.child=Wl(t,null,l,a)):rr(e,t,l,a),t.memoizedState=r.state,i&&yy(t,n,!0),t.child}function PE(e){var t=e.stateNode;t.pendingContext?gy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gy(e,t.context,!1),hv(e,t.containerInfo)}function Iy(e,t,n,r,i){return Hl(),sv(i),t.flags|=256,rr(e,t,n,r),t.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function g0(e){return{baseLanes:e,cachePool:null,transitions:null}}function NE(e,t,n){var r=t.pendingProps,i=gn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),rn(gn,i&1),e===null)return u0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=cm(o,r,0,null),e=Ao(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=g0(n),t.memoizedState=v0,e):Sv(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return kT(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ia(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Ia(l,a):(a=Ao(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?g0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=v0,r}return a=e.child,e=a.sibling,r=Ia(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Sv(e,t){return t=cm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ff(e,t,n,r){return r!==null&&sv(r),Wl(t,e.child,null,n),e=Sv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kT(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=lp(Error(Pe(422))),Ff(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=cm({mode:"visible",children:r.children},i,0,null),a=Ao(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Wl(t,e.child,null,o),t.child.memoizedState=g0(o),t.memoizedState=v0,a);if(!(t.mode&1))return Ff(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Pe(419)),r=lp(a,r,void 0),Ff(e,t,o,r)}if(l=(o&e.childLanes)!==0,pr||l){if(r=Wn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Wi(e,i),ii(r,e,i,-1))}return Lv(),r=lp(Error(Pe(421))),Ff(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=WT.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Or=Oa(i.nextSibling),Pr=t,mn=!0,ti=null,e!==null&&(Ur[Vr++]=Gi,Ur[Vr++]=zi,Ur[Vr++]=Ro,Gi=e.id,zi=e.overflow,Ro=t),t=Sv(t,r.children),t.flags|=4096,t)}function Dy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),c0(e.return,t,n)}function sp(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function kE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(rr(e,t,r.children,n),r=gn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dy(e,n,t);else if(e.tag===19)Dy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rn(gn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Od(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),sp(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Od(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}sp(t,!0,n,null,a);break;case"together":sp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ld(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Po|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=Ia(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ia(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function IT(e,t,n){switch(t.tag){case 3:PE(t),Hl();break;case 5:oE(t);break;case 1:yr(t.type)&&Td(t);break;case 4:hv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;rn(Cd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(rn(gn,gn.current&1),t.flags|=128,null):n&t.child.childLanes?NE(e,t,n):(rn(gn,gn.current&1),e=Xi(e,t,n),e!==null?e.sibling:null);rn(gn,gn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(gn,gn.current),r)break;return null;case 22:case 23:return t.lanes=0,RE(e,t,n)}return Xi(e,t,n)}var IE,y0,DE,ME;IE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y0=function(){};DE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,So(Ti.current);var a=null;switch(n){case"input":i=$p(e,i),r=$p(e,r),a=[];break;case"select":i=xn({},i,{value:void 0}),r=xn({},r,{value:void 0}),a=[];break;case"textarea":i=Up(e,i),r=Up(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sd)}Hp(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Au.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Au.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&cn("scroll",e),a||l===u||(a=[])):(a=a||[]).push(f,u))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};ME=function(e,t,n,r){n!==r&&(t.flags|=4)};function au(e,t){if(!mn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function DT(e,t,n){var r=t.pendingProps;switch(lv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(t),null;case 1:return yr(t.type)&&wd(),Zn(t),null;case 3:return r=t.stateNode,Xl(),fn(gr),fn(er),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Df(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ti!==null&&(A0(ti),ti=null))),y0(e,t),Zn(t),null;case 5:pv(t);var i=So(ju.current);if(n=t.type,e!==null&&t.stateNode!=null)DE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pe(166));return Zn(t),null}if(e=So(Ti.current),Df(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Si]=t,r[Mu]=a,e=(t.mode&1)!==0,n){case"dialog":cn("cancel",r),cn("close",r);break;case"iframe":case"object":case"embed":cn("load",r);break;case"video":case"audio":for(i=0;i<pu.length;i++)cn(pu[i],r);break;case"source":cn("error",r);break;case"img":case"image":case"link":cn("error",r),cn("load",r);break;case"details":cn("toggle",r);break;case"input":Vg(r,a),cn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},cn("invalid",r);break;case"textarea":Wg(r,a),cn("invalid",r)}Hp(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&If(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&If(r.textContent,l,e),i=["children",""+l]):Au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&cn("scroll",r)}switch(n){case"input":Af(r),Hg(r,a,!0);break;case"textarea":Af(r),Xg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Sd)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ux(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Si]=t,e[Mu]=r,IE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Wp(n,r),n){case"dialog":cn("cancel",e),cn("close",e),i=r;break;case"iframe":case"object":case"embed":cn("load",e),i=r;break;case"video":case"audio":for(i=0;i<pu.length;i++)cn(pu[i],e);i=r;break;case"source":cn("error",e),i=r;break;case"img":case"image":case"link":cn("error",e),cn("load",e),i=r;break;case"details":cn("toggle",e),i=r;break;case"input":Vg(e,r),i=$p(e,r),cn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=xn({},r,{value:void 0}),cn("invalid",e);break;case"textarea":Wg(e,r),i=Up(e,r),cn("invalid",e);break;default:i=r}Hp(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?dx(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cx(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Cu(e,u):typeof u=="number"&&Cu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Au.hasOwnProperty(a)?u!=null&&a==="onScroll"&&cn("scroll",e):u!=null&&W0(e,a,u,o))}switch(n){case"input":Af(e),Hg(e,r,!1);break;case"textarea":Af(e),Xg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ma(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Ml(e,!!r.multiple,a,!1):r.defaultValue!=null&&Ml(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zn(t),null;case 6:if(e&&t.stateNode!=null)ME(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=So(ju.current),So(Ti.current),Df(t)){if(r=t.stateNode,n=t.memoizedProps,r[Si]=t,(a=r.nodeValue!==n)&&(e=Pr,e!==null))switch(e.tag){case 3:If(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&If(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Si]=t,t.stateNode=r}return Zn(t),null;case 13:if(fn(gn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mn&&Or!==null&&t.mode&1&&!(t.flags&128))Jx(),Hl(),t.flags|=98560,a=!1;else if(a=Df(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Pe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Pe(317));a[Si]=t}else Hl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zn(t),a=!1}else ti!==null&&(A0(ti),ti=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||gn.current&1?Bn===0&&(Bn=3):Lv())),t.updateQueue!==null&&(t.flags|=4),Zn(t),null);case 4:return Xl(),y0(e,t),e===null&&Iu(t.stateNode.containerInfo),Zn(t),null;case 10:return fv(t.type._context),Zn(t),null;case 17:return yr(t.type)&&wd(),Zn(t),null;case 19:if(fn(gn),a=t.memoizedState,a===null)return Zn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)au(a,!1);else{if(Bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Od(e),o!==null){for(t.flags|=128,au(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rn(gn,gn.current&1|2),t.child}e=e.sibling}a.tail!==null&&On()>Ql&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304)}else{if(!r)if(e=Od(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),au(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!mn)return Zn(t),null}else 2*On()-a.renderingStartTime>Ql&&n!==1073741824&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=On(),t.sibling=null,n=gn.current,rn(gn,r?n&1|2:n&1),t):(Zn(t),null);case 22:case 23:return Cv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rr&1073741824&&(Zn(t),t.subtreeFlags&6&&(t.flags|=8192)):Zn(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function MT(e,t){switch(lv(t),t.tag){case 1:return yr(t.type)&&wd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xl(),fn(gr),fn(er),vv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pv(t),null;case 13:if(fn(gn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));Hl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fn(gn),null;case 4:return Xl(),null;case 10:return fv(t.type._context),null;case 22:case 23:return Cv(),null;case 24:return null;default:return null}}var jf=!1,Jn=!1,FT=typeof WeakSet=="function"?WeakSet:Set,et=null;function Nl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tn(e,t,r)}else n.current=null}function x0(e,t,n){try{n()}catch(r){Tn(e,t,r)}}var My=!1;function jT(e,t){if(n0=xd,e=$x(),av(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,f=0,h=0,p=e,d=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==a||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)d=p,p=T;for(;;){if(p===e)break t;if(d===n&&++f===i&&(l=o),d===a&&++h===r&&(u=o),(T=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(r0={focusedElem:e,selectionRange:n},xd=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){t=et;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var R=x.memoizedProps,I=x.memoizedState,g=t.stateNode,w=g.getSnapshotBeforeUpdate(t.elementType===t.type?R:Jr(t.type,R),I);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(H){Tn(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}return x=My,My=!1,x}function wu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&x0(t,n,a)}i=i.next}while(i!==r)}}function sm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function E0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FE(e){var t=e.alternate;t!==null&&(e.alternate=null,FE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Si],delete t[Mu],delete t[o0],delete t[ET],delete t[_T])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jE(e){return e.tag===5||e.tag===3||e.tag===4}function Fy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sd));else if(r!==4&&(e=e.child,e!==null))for(_0(e,t,n),e=e.sibling;e!==null;)_0(e,t,n),e=e.sibling}function S0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(S0(e,t,n),e=e.sibling;e!==null;)S0(e,t,n),e=e.sibling}var Yn=null,ei=!1;function va(e,t,n){for(n=n.child;n!==null;)BE(e,t,n),n=n.sibling}function BE(e,t,n){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(em,n)}catch{}switch(n.tag){case 5:Jn||Nl(n,t);case 6:var r=Yn,i=ei;Yn=null,va(e,t,n),Yn=r,ei=i,Yn!==null&&(ei?(e=Yn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(ei?(e=Yn,n=n.stateNode,e.nodeType===8?tp(e.parentNode,n):e.nodeType===1&&tp(e,n),Pu(e)):tp(Yn,n.stateNode));break;case 4:r=Yn,i=ei,Yn=n.stateNode.containerInfo,ei=!0,va(e,t,n),Yn=r,ei=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&x0(n,t,o),i=i.next}while(i!==r)}va(e,t,n);break;case 1:if(!Jn&&(Nl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Tn(n,t,l)}va(e,t,n);break;case 21:va(e,t,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,va(e,t,n),Jn=r):va(e,t,n);break;default:va(e,t,n)}}function jy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new FT),t.forEach(function(r){var i=XT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Yn=l.stateNode,ei=!1;break e;case 3:Yn=l.stateNode.containerInfo,ei=!0;break e;case 4:Yn=l.stateNode.containerInfo,ei=!0;break e}l=l.return}if(Yn===null)throw Error(Pe(160));BE(a,o,i),Yn=null,ei=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Tn(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$E(t,e),t=t.sibling}function $E(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zr(t,e),yi(e),r&4){try{wu(3,e,e.return),sm(3,e)}catch(R){Tn(e,e.return,R)}try{wu(5,e,e.return)}catch(R){Tn(e,e.return,R)}}break;case 1:Zr(t,e),yi(e),r&512&&n!==null&&Nl(n,n.return);break;case 5:if(Zr(t,e),yi(e),r&512&&n!==null&&Nl(n,n.return),e.flags&32){var i=e.stateNode;try{Cu(i,"")}catch(R){Tn(e,e.return,R)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lx(i,a),Wp(l,o);var f=Wp(l,a);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?dx(i,p):h==="dangerouslySetInnerHTML"?cx(i,p):h==="children"?Cu(i,p):W0(i,h,p,f)}switch(l){case"input":Gp(i,a);break;case"textarea":sx(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var T=a.value;T!=null?Ml(i,!!a.multiple,T,!1):d!==!!a.multiple&&(a.defaultValue!=null?Ml(i,!!a.multiple,a.defaultValue,!0):Ml(i,!!a.multiple,a.multiple?[]:"",!1))}i[Mu]=a}catch(R){Tn(e,e.return,R)}}break;case 6:if(Zr(t,e),yi(e),r&4){if(e.stateNode===null)throw Error(Pe(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(R){Tn(e,e.return,R)}}break;case 3:if(Zr(t,e),yi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(t.containerInfo)}catch(R){Tn(e,e.return,R)}break;case 4:Zr(t,e),yi(e);break;case 13:Zr(t,e),yi(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(bv=On())),r&4&&jy(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Jn=(f=Jn)||h,Zr(t,e),Jn=f):Zr(t,e),yi(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!h&&e.mode&1)for(et=e,h=e.child;h!==null;){for(p=et=h;et!==null;){switch(d=et,T=d.child,d.tag){case 0:case 11:case 14:case 15:wu(4,d,d.return);break;case 1:Nl(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(R){Tn(r,n,R)}}break;case 5:Nl(d,d.return);break;case 22:if(d.memoizedState!==null){$y(p);continue}}T!==null?(T.return=d,et=T):$y(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fx("display",o))}catch(R){Tn(e,e.return,R)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(R){Tn(e,e.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zr(t,e),yi(e),r&4&&jy(e);break;case 21:break;default:Zr(t,e),yi(e)}}function yi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jE(n)){var r=n;break e}n=n.return}throw Error(Pe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cu(i,""),r.flags&=-33);var a=Fy(e);S0(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fy(e);_0(e,l,o);break;default:throw Error(Pe(161))}}catch(u){Tn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BT(e,t,n){et=e,GE(e)}function GE(e,t,n){for(var r=(e.mode&1)!==0;et!==null;){var i=et,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jf;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Jn;l=jf;var f=Jn;if(jf=o,(Jn=u)&&!f)for(et=i;et!==null;)o=et,u=o.child,o.tag===22&&o.memoizedState!==null?Gy(i):u!==null?(u.return=o,et=u):Gy(i);for(;a!==null;)et=a,GE(a),a=a.sibling;et=i,jf=l,Jn=f}By(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,et=a):By(e)}}function By(e){for(;et!==null;){var t=et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jn||sm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Jr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Sy(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sy(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Pu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Jn||t.flags&512&&E0(t)}catch(d){Tn(t,t.return,d)}}if(t===e){et=null;break}if(n=t.sibling,n!==null){n.return=t.return,et=n;break}et=t.return}}function $y(e){for(;et!==null;){var t=et;if(t===e){et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,et=n;break}et=t.return}}function Gy(e){for(;et!==null;){var t=et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sm(4,t)}catch(u){Tn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Tn(t,i,u)}}var a=t.return;try{E0(t)}catch(u){Tn(t,a,u)}break;case 5:var o=t.return;try{E0(t)}catch(u){Tn(t,o,u)}}}catch(u){Tn(t,t.return,u)}if(t===e){et=null;break}var l=t.sibling;if(l!==null){l.return=t.return,et=l;break}et=t.return}}var $T=Math.ceil,kd=Yi.ReactCurrentDispatcher,wv=Yi.ReactCurrentOwner,Wr=Yi.ReactCurrentBatchConfig,Wt=0,Wn=null,kn=null,Qn=0,Rr=0,kl=Ba(0),Bn=0,zu=null,Po=0,um=0,Tv=0,Tu=null,hr=null,bv=0,Ql=1/0,Bi=null,Id=!1,w0=null,Na=null,Bf=!1,ba=null,Dd=0,bu=0,T0=null,sd=-1,ud=0;function ar(){return Wt&6?On():sd!==-1?sd:sd=On()}function ka(e){return e.mode&1?Wt&2&&Qn!==0?Qn&-Qn:wT.transition!==null?(ud===0&&(ud=Tx()),ud):(e=qt,e!==0||(e=window.event,e=e===void 0?16:Px(e.type)),e):1}function ii(e,t,n,r){if(50<bu)throw bu=0,T0=null,Error(Pe(185));qu(e,n,r),(!(Wt&2)||e!==Wn)&&(e===Wn&&(!(Wt&2)&&(um|=n),Bn===4&&wa(e,Qn)),xr(e,r),n===1&&Wt===0&&!(t.mode&1)&&(Ql=On()+500,am&&$a()))}function xr(e,t){var n=e.callbackNode;ww(e,t);var r=yd(e,e===Wn?Qn:0);if(r===0)n!==null&&Kg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kg(n),t===1)e.tag===0?ST(zy.bind(null,e)):Kx(zy.bind(null,e)),yT(function(){!(Wt&6)&&$a()}),n=null;else{switch(bx(r)){case 1:n=q0;break;case 4:n=Sx;break;case 16:n=gd;break;case 536870912:n=wx;break;default:n=gd}n=QE(n,zE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zE(e,t){if(sd=-1,ud=0,Wt&6)throw Error(Pe(327));var n=e.callbackNode;if(Gl()&&e.callbackNode!==n)return null;var r=yd(e,e===Wn?Qn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Md(e,r);else{t=r;var i=Wt;Wt|=2;var a=VE();(Wn!==e||Qn!==t)&&(Bi=null,Ql=On()+500,bo(e,t));do try{UT();break}catch(l){UE(e,l)}while(!0);cv(),kd.current=a,Wt=i,kn!==null?t=0:(Wn=null,Qn=0,t=Bn)}if(t!==0){if(t===2&&(i=qp(e),i!==0&&(r=i,t=b0(e,i))),t===1)throw n=zu,bo(e,0),wa(e,r),xr(e,On()),n;if(t===6)wa(e,r);else{if(i=e.current.alternate,!(r&30)&&!GT(i)&&(t=Md(e,r),t===2&&(a=qp(e),a!==0&&(r=a,t=b0(e,a))),t===1))throw n=zu,bo(e,0),wa(e,r),xr(e,On()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Pe(345));case 2:xo(e,hr,Bi);break;case 3:if(wa(e,r),(r&130023424)===r&&(t=bv+500-On(),10<t)){if(yd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ar(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=a0(xo.bind(null,e,hr,Bi),t);break}xo(e,hr,Bi);break;case 4:if(wa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ri(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=On()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$T(r/1960))-r,10<r){e.timeoutHandle=a0(xo.bind(null,e,hr,Bi),r);break}xo(e,hr,Bi);break;case 5:xo(e,hr,Bi);break;default:throw Error(Pe(329))}}}return xr(e,On()),e.callbackNode===n?zE.bind(null,e):null}function b0(e,t){var n=Tu;return e.current.memoizedState.isDehydrated&&(bo(e,t).flags|=256),e=Md(e,t),e!==2&&(t=hr,hr=n,t!==null&&A0(t)),e}function A0(e){hr===null?hr=e:hr.push.apply(hr,e)}function GT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ai(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wa(e,t){for(t&=~Tv,t&=~um,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ri(t),r=1<<n;e[n]=-1,t&=~r}}function zy(e){if(Wt&6)throw Error(Pe(327));Gl();var t=yd(e,0);if(!(t&1))return xr(e,On()),null;var n=Md(e,t);if(e.tag!==0&&n===2){var r=qp(e);r!==0&&(t=r,n=b0(e,r))}if(n===1)throw n=zu,bo(e,0),wa(e,t),xr(e,On()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xo(e,hr,Bi),xr(e,On()),null}function Av(e,t){var n=Wt;Wt|=1;try{return e(t)}finally{Wt=n,Wt===0&&(Ql=On()+500,am&&$a())}}function No(e){ba!==null&&ba.tag===0&&!(Wt&6)&&Gl();var t=Wt;Wt|=1;var n=Wr.transition,r=qt;try{if(Wr.transition=null,qt=1,e)return e()}finally{qt=r,Wr.transition=n,Wt=t,!(Wt&6)&&$a()}}function Cv(){Rr=kl.current,fn(kl)}function bo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gT(n)),kn!==null)for(n=kn.return;n!==null;){var r=n;switch(lv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wd();break;case 3:Xl(),fn(gr),fn(er),vv();break;case 5:pv(r);break;case 4:Xl();break;case 13:fn(gn);break;case 19:fn(gn);break;case 10:fv(r.type._context);break;case 22:case 23:Cv()}n=n.return}if(Wn=e,kn=e=Ia(e.current,null),Qn=Rr=t,Bn=0,zu=null,Tv=um=Po=0,hr=Tu=null,_o!==null){for(t=0;t<_o.length;t++)if(n=_o[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}_o=null}return e}function UE(e,t){do{var n=kn;try{if(cv(),ad.current=Nd,Pd){for(var r=yn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pd=!1}if(Oo=0,Hn=jn=yn=null,Su=!1,Bu=0,wv.current=null,n===null||n.return===null){Bn=1,zu=t,kn=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Qn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var T=Ry(o);if(T!==null){T.flags&=-257,Oy(T,o,l,a,t),T.mode&1&&Ly(a,f,t),t=T,u=f;var x=t.updateQueue;if(x===null){var R=new Set;R.add(u),t.updateQueue=R}else x.add(u);break e}else{if(!(t&1)){Ly(a,f,t),Lv();break e}u=Error(Pe(426))}}else if(mn&&l.mode&1){var I=Ry(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Oy(I,o,l,a,t),sv(Yl(u,l));break e}}a=u=Yl(u,l),Bn!==4&&(Bn=2),Tu===null?Tu=[a]:Tu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=AE(a,u,t);_y(a,g);break e;case 1:l=u;var w=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Na===null||!Na.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var H=CE(a,l,t);_y(a,H);break e}}a=a.return}while(a!==null)}WE(n)}catch(q){t=q,kn===n&&n!==null&&(kn=n=n.return);continue}break}while(!0)}function VE(){var e=kd.current;return kd.current=Nd,e===null?Nd:e}function Lv(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Wn===null||!(Po&268435455)&&!(um&268435455)||wa(Wn,Qn)}function Md(e,t){var n=Wt;Wt|=2;var r=VE();(Wn!==e||Qn!==t)&&(Bi=null,bo(e,t));do try{zT();break}catch(i){UE(e,i)}while(!0);if(cv(),Wt=n,kd.current=r,kn!==null)throw Error(Pe(261));return Wn=null,Qn=0,Bn}function zT(){for(;kn!==null;)HE(kn)}function UT(){for(;kn!==null&&!hw();)HE(kn)}function HE(e){var t=YE(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,t===null?WE(e):kn=t,wv.current=null}function WE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=MT(n,t),n!==null){n.flags&=32767,kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bn=6,kn=null;return}}else if(n=DT(n,t,Rr),n!==null){kn=n;return}if(t=t.sibling,t!==null){kn=t;return}kn=t=e}while(t!==null);Bn===0&&(Bn=5)}function xo(e,t,n){var r=qt,i=Wr.transition;try{Wr.transition=null,qt=1,VT(e,t,n,r)}finally{Wr.transition=i,qt=r}return null}function VT(e,t,n,r){do Gl();while(ba!==null);if(Wt&6)throw Error(Pe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Tw(e,a),e===Wn&&(kn=Wn=null,Qn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bf||(Bf=!0,QE(gd,function(){return Gl(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Wr.transition,Wr.transition=null;var o=qt;qt=1;var l=Wt;Wt|=4,wv.current=null,jT(e,n),$E(n,e),cT(r0),xd=!!n0,r0=n0=null,e.current=n,BT(n),pw(),Wt=l,qt=o,Wr.transition=a}else e.current=n;if(Bf&&(Bf=!1,ba=e,Dd=i),a=e.pendingLanes,a===0&&(Na=null),yw(n.stateNode),xr(e,On()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Id)throw Id=!1,e=w0,w0=null,e;return Dd&1&&e.tag!==0&&Gl(),a=e.pendingLanes,a&1?e===T0?bu++:(bu=0,T0=e):bu=0,$a(),null}function Gl(){if(ba!==null){var e=bx(Dd),t=Wr.transition,n=qt;try{if(Wr.transition=null,qt=16>e?16:e,ba===null)var r=!1;else{if(e=ba,ba=null,Dd=0,Wt&6)throw Error(Pe(331));var i=Wt;for(Wt|=4,et=e.current;et!==null;){var a=et,o=a.child;if(et.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(et=f;et!==null;){var h=et;switch(h.tag){case 0:case 11:case 15:wu(8,h,a)}var p=h.child;if(p!==null)p.return=h,et=p;else for(;et!==null;){h=et;var d=h.sibling,T=h.return;if(FE(h),h===f){et=null;break}if(d!==null){d.return=T,et=d;break}et=T}}}var x=a.alternate;if(x!==null){var R=x.child;if(R!==null){x.child=null;do{var I=R.sibling;R.sibling=null,R=I}while(R!==null)}}et=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,et=o;else e:for(;et!==null;){if(a=et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wu(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,et=g;break e}et=a.return}}var w=e.current;for(et=w;et!==null;){o=et;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,et=C;else e:for(o=w;et!==null;){if(l=et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sm(9,l)}}catch(q){Tn(l,l.return,q)}if(l===o){et=null;break e}var H=l.sibling;if(H!==null){H.return=l.return,et=H;break e}et=l.return}}if(Wt=i,$a(),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(em,e)}catch{}r=!0}return r}finally{qt=n,Wr.transition=t}}return!1}function Uy(e,t,n){t=Yl(n,t),t=AE(e,t,1),e=Pa(e,t,1),t=ar(),e!==null&&(qu(e,1,t),xr(e,t))}function Tn(e,t,n){if(e.tag===3)Uy(e,e,n);else for(;t!==null;){if(t.tag===3){Uy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Na===null||!Na.has(r))){e=Yl(n,e),e=CE(t,e,1),t=Pa(t,e,1),e=ar(),t!==null&&(qu(t,1,e),xr(t,e));break}}t=t.return}}function HT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ar(),e.pingedLanes|=e.suspendedLanes&n,Wn===e&&(Qn&n)===n&&(Bn===4||Bn===3&&(Qn&130023424)===Qn&&500>On()-bv?bo(e,0):Tv|=n),xr(e,t)}function XE(e,t){t===0&&(e.mode&1?(t=Rf,Rf<<=1,!(Rf&130023424)&&(Rf=4194304)):t=1);var n=ar();e=Wi(e,t),e!==null&&(qu(e,t,n),xr(e,n))}function WT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XE(e,n)}function XT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(t),XE(e,n)}var YE;YE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gr.current)pr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pr=!1,IT(e,t,n);pr=!!(e.flags&131072)}else pr=!1,mn&&t.flags&1048576&&qx(t,Ad,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ld(e,t),e=t.pendingProps;var i=Vl(t,er.current);$l(t,n),i=yv(null,t,r,e,i,n);var a=xv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yr(r)?(a=!0,Td(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mv(t),i.updater=om,t.stateNode=i,i._reactInternals=t,d0(t,r,e,n),t=p0(null,t,r,!0,a,n)):(t.tag=0,mn&&a&&ov(t),rr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ld(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=QT(r),e=Jr(r,e),i){case 0:t=h0(null,t,r,e,n);break e;case 1:t=ky(null,t,r,e,n);break e;case 11:t=Py(null,t,r,e,n);break e;case 14:t=Ny(null,t,r,Jr(r.type,e),n);break e}throw Error(Pe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jr(r,i),h0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jr(r,i),ky(e,t,r,i,n);case 3:e:{if(PE(t),e===null)throw Error(Pe(387));r=t.pendingProps,a=t.memoizedState,i=a.element,tE(e,t),Rd(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Yl(Error(Pe(423)),t),t=Iy(e,t,r,n,i);break e}else if(r!==i){i=Yl(Error(Pe(424)),t),t=Iy(e,t,r,n,i);break e}else for(Or=Oa(t.stateNode.containerInfo.firstChild),Pr=t,mn=!0,ti=null,n=aE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hl(),r===i){t=Xi(e,t,n);break e}rr(e,t,r,n)}t=t.child}return t;case 5:return oE(t),e===null&&u0(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,i0(r,i)?o=null:a!==null&&i0(r,a)&&(t.flags|=32),OE(e,t),rr(e,t,o,n),t.child;case 6:return e===null&&u0(t),null;case 13:return NE(e,t,n);case 4:return hv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Wl(t,null,r,n):rr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jr(r,i),Py(e,t,r,i,n);case 7:return rr(e,t,t.pendingProps,n),t.child;case 8:return rr(e,t,t.pendingProps.children,n),t.child;case 12:return rr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,rn(Cd,r._currentValue),r._currentValue=o,a!==null)if(ai(a.value,o)){if(a.children===i.children&&!gr.current){t=Xi(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Ui(-1,n&-n),u.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?u.next=u:(u.next=h.next,h.next=u),f.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),c0(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Pe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),c0(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}rr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$l(t,n),i=Xr(i),r=r(i),t.flags|=1,rr(e,t,r,n),t.child;case 14:return r=t.type,i=Jr(r,t.pendingProps),i=Jr(r.type,i),Ny(e,t,r,i,n);case 15:return LE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jr(r,i),ld(e,t),t.tag=1,yr(r)?(e=!0,Td(t)):e=!1,$l(t,n),rE(t,r,i),d0(t,r,i,n),p0(null,t,r,!0,e,n);case 19:return kE(e,t,n);case 22:return RE(e,t,n)}throw Error(Pe(156,t.tag))};function QE(e,t){return _x(e,t)}function YT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(e,t,n,r){return new YT(e,t,n,r)}function Rv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function QT(e){if(typeof e=="function")return Rv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Y0)return 11;if(e===Q0)return 14}return 2}function Ia(e,t){var n=e.alternate;return n===null?(n=Hr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cd(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")Rv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case wl:return Ao(n.children,i,a,t);case X0:o=8,i|=8;break;case Mp:return e=Hr(12,n,t,i|2),e.elementType=Mp,e.lanes=a,e;case Fp:return e=Hr(13,n,t,i),e.elementType=Fp,e.lanes=a,e;case jp:return e=Hr(19,n,t,i),e.elementType=jp,e.lanes=a,e;case ix:return cm(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nx:o=10;break e;case rx:o=9;break e;case Y0:o=11;break e;case Q0:o=14;break e;case Ea:o=16,r=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=Hr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ao(e,t,n,r){return e=Hr(7,e,r,t),e.lanes=n,e}function cm(e,t,n,r){return e=Hr(22,e,r,t),e.elementType=ix,e.lanes=n,e.stateNode={isHidden:!1},e}function up(e,t,n){return e=Hr(6,e,null,t),e.lanes=n,e}function cp(e,t,n){return t=Hr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function KT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ov(e,t,n,r,i,a,o,l,u){return e=new KT(e,t,n,l,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Hr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(a),e}function qT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function KE(e){if(!e)return Fa;e=e._reactInternals;e:{if(Do(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(yr(n))return Qx(e,n,t)}return t}function qE(e,t,n,r,i,a,o,l,u){return e=Ov(n,r,!0,e,i,a,o,l,u),e.context=KE(null),n=e.current,r=ar(),i=ka(n),a=Ui(r,i),a.callback=t??null,Pa(n,a,i),e.current.lanes=i,qu(e,i,r),xr(e,r),e}function fm(e,t,n,r){var i=t.current,a=ar(),o=ka(i);return n=KE(n),t.context===null?t.context=n:t.pendingContext=n,t=Ui(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pa(i,t,o),e!==null&&(ii(e,i,o,a),id(e,i,o)),o}function Fd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pv(e,t){Vy(e,t),(e=e.alternate)&&Vy(e,t)}function ZT(){return null}var ZE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nv(e){this._internalRoot=e}dm.prototype.render=Nv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));fm(e,t,null,null)};dm.prototype.unmount=Nv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;No(function(){fm(null,e,null,null)}),t[Hi]=null}};function dm(e){this._internalRoot=e}dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sa.length&&t!==0&&t<Sa[n].priority;n++);Sa.splice(n,0,e),n===0&&Ox(e)}};function kv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hy(){}function JT(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=Fd(o);a.call(f)}}var o=qE(t,r,e,0,null,!1,!1,"",Hy);return e._reactRootContainer=o,e[Hi]=o.current,Iu(e.nodeType===8?e.parentNode:e),No(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Fd(u);l.call(f)}}var u=Ov(e,0,!1,null,null,!1,!1,"",Hy);return e._reactRootContainer=u,e[Hi]=u.current,Iu(e.nodeType===8?e.parentNode:e),No(function(){fm(t,u,n,r)}),u}function hm(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Fd(o);l.call(u)}}fm(t,o,e,i)}else o=JT(n,t,e,i,r);return Fd(o)}Ax=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hu(t.pendingLanes);n!==0&&(Z0(t,n|1),xr(t,On()),!(Wt&6)&&(Ql=On()+500,$a()))}break;case 13:No(function(){var r=Wi(e,1);if(r!==null){var i=ar();ii(r,e,1,i)}}),Pv(e,1)}};J0=function(e){if(e.tag===13){var t=Wi(e,134217728);if(t!==null){var n=ar();ii(t,e,134217728,n)}Pv(e,134217728)}};Cx=function(e){if(e.tag===13){var t=ka(e),n=Wi(e,t);if(n!==null){var r=ar();ii(n,e,t,r)}Pv(e,t)}};Lx=function(){return qt};Rx=function(e,t){var n=qt;try{return qt=e,t()}finally{qt=n}};Yp=function(e,t,n){switch(t){case"input":if(Gp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=im(r);if(!i)throw Error(Pe(90));ox(r),Gp(r,i)}}}break;case"textarea":sx(e,n);break;case"select":t=n.value,t!=null&&Ml(e,!!n.multiple,t,!1)}};px=Av;vx=No;var eb={usingClientEntryPoint:!1,Events:[Ju,Cl,im,mx,hx,Av]},ou={findFiberByHostInstance:Eo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},tb={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xx(e),e===null?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||ZT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{em=$f.inject(tb),wi=$f}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eb;kr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(t))throw Error(Pe(200));return qT(e,t,null,n)};kr.createRoot=function(e,t){if(!kv(e))throw Error(Pe(299));var n=!1,r="",i=ZE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ov(e,1,!1,null,null,n,!1,r,i),e[Hi]=t.current,Iu(e.nodeType===8?e.parentNode:e),new Nv(t)};kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=xx(t),e=e===null?null:e.stateNode,e};kr.flushSync=function(e){return No(e)};kr.hydrate=function(e,t,n){if(!mm(t))throw Error(Pe(200));return hm(null,e,t,!0,n)};kr.hydrateRoot=function(e,t,n){if(!kv(e))throw Error(Pe(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=qE(t,null,e,1,n??null,i,!1,a,o),e[Hi]=t.current,Iu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new dm(t)};kr.render=function(e,t,n){if(!mm(t))throw Error(Pe(200));return hm(null,e,t,!1,n)};kr.unmountComponentAtNode=function(e){if(!mm(e))throw Error(Pe(40));return e._reactRootContainer?(No(function(){hm(null,null,e,!1,function(){e._reactRootContainer=null,e[Hi]=null})}),!0):!1};kr.unstable_batchedUpdates=Av;kr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!mm(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return hm(e,t,n,!1,r)};kr.version="18.2.0-next-9e3b772b8-20220608";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(e){console.error(e)}}JE(),q1.exports=kr;var nb=q1.exports,Wy=nb;Ip.createRoot=Wy.createRoot,Ip.hydrateRoot=Wy.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}var Aa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Aa||(Aa={}));const Xy="popstate";function rb(e){e===void 0&&(e={});function t(i,a){let{pathname:o="/",search:l="",hash:u=""}=Mo(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),C0("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,f=u.indexOf("#");l=f===-1?u:u.slice(0,f)}return l+"#"+(typeof a=="string"?a:jd(a))}function r(i,a){pm(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return ab(t,n,r,e)}function In(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ib(){return Math.random().toString(36).substr(2,8)}function Yy(e,t){return{usr:e.state,key:e.key,idx:t}}function C0(e,t,n,r){return n===void 0&&(n=null),Uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Mo(t):t,{state:n,key:t&&t.key||r||ib()})}function jd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Mo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ab(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Aa.Pop,u=null,f=h();f==null&&(f=0,o.replaceState(Uu({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Aa.Pop;let I=h(),g=I==null?null:I-f;f=I,u&&u({action:l,location:R.location,delta:g})}function d(I,g){l=Aa.Push;let w=C0(R.location,I,g);n&&n(w,I),f=h()+1;let C=Yy(w,f),H=R.createHref(w);try{o.pushState(C,"",H)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(H)}a&&u&&u({action:l,location:R.location,delta:1})}function T(I,g){l=Aa.Replace;let w=C0(R.location,I,g);n&&n(w,I),f=h();let C=Yy(w,f),H=R.createHref(w);o.replaceState(C,"",H),a&&u&&u({action:l,location:R.location,delta:0})}function x(I){let g=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof I=="string"?I:jd(I);return In(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let R={get action(){return l},get location(){return e(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Xy,p),u=I,()=>{i.removeEventListener(Xy,p),u=null}},createHref(I){return t(i,I)},createURL:x,encodeLocation(I){let g=x(I);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:T,go(I){return o.go(I)}};return R}var Qy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qy||(Qy={}));function ob(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Mo(t):t,i=Iv(r.pathname||"/",n);if(i==null)return null;let a=e_(e);lb(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=vb(a[l],xb(i));return o}function e_(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(In(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Da([r,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(In(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),e_(a.children,t,h,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:hb(f,a.index),routesMeta:h})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of t_(a.path))i(a,o,u)}),t}function t_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=t_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function lb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:pb(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sb=/^:\w+$/,ub=3,cb=2,fb=1,db=10,mb=-2,Ky=e=>e==="*";function hb(e,t){let n=e.split("/"),r=n.length;return n.some(Ky)&&(r+=mb),t&&(r+=cb),n.filter(i=>!Ky(i)).reduce((i,a)=>i+(sb.test(a)?ub:a===""?fb:db),r)}function pb(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function vb(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",h=gb({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f);if(!h)return null;Object.assign(r,h.params);let p=l.route;a.push({params:r,pathname:Da([i,h.pathname]),pathnameBase:wb(Da([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Da([i,h.pathnameBase]))}return a}function gb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=yb(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:d,isOptional:T}=h;if(d==="*"){let R=l[p]||"";o=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const x=l[p];return T&&!x?f[d]=void 0:f[d]=Eb(x||"",d),f},{}),pathname:a,pathnameBase:o,pattern:e}}function yb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),pm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function xb(e){try{return decodeURI(e)}catch(t){return pm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Eb(e,t){try{return decodeURIComponent(e)}catch(n){return pm(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Iv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function _b(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Mo(e):e;return{pathname:n?n.startsWith("/")?n:Sb(n,t):t,search:Tb(r),hash:bb(i)}}function Sb(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function n_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function r_(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Mo(e):(i=Uu({},e),In(!i.pathname||!i.pathname.includes("?"),fp("?","pathname","search",i)),In(!i.pathname||!i.pathname.includes("#"),fp("#","pathname","hash",i)),In(!i.search||!i.search.includes("#"),fp("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else if(r){let p=t[t.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),p.pop();i.pathname=d.join("/")}l="/"+p.join("/")}else{let p=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),p-=1;i.pathname=d.join("/")}l=p>=0?t[p]:"/"}let u=_b(i,l),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}const Da=e=>e.join("/").replace(/\/\/+/g,"/"),wb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Tb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ab(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const i_=["post","put","patch","delete"];new Set(i_);const Cb=["get",...i_];new Set(Cb);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(this,arguments)}const Dv=$.createContext(null),Lb=$.createContext(null),ts=$.createContext(null),vm=$.createContext(null),Ga=$.createContext({outlet:null,matches:[],isDataRoute:!1}),a_=$.createContext(null);function Rb(e,t){let{relative:n}=t===void 0?{}:t;tc()||In(!1);let{basename:r,navigator:i}=$.useContext(ts),{hash:a,pathname:o,search:l}=s_(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Da([r,o])),i.createHref({pathname:u,search:l,hash:a})}function tc(){return $.useContext(vm)!=null}function gm(){return tc()||In(!1),$.useContext(vm).location}function o_(e){$.useContext(ts).static||$.useLayoutEffect(e)}function ym(){let{isDataRoute:e}=$.useContext(Ga);return e?zb():Ob()}function Ob(){tc()||In(!1);let e=$.useContext(Dv),{basename:t,navigator:n}=$.useContext(ts),{matches:r}=$.useContext(Ga),{pathname:i}=gm(),a=JSON.stringify(n_(r).map(u=>u.pathnameBase)),o=$.useRef(!1);return o_(()=>{o.current=!0}),$.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=r_(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Da([t,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[t,n,a,i,e])}function l_(){let{matches:e}=$.useContext(Ga),t=e[e.length-1];return t?t.params:{}}function s_(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=$.useContext(Ga),{pathname:i}=gm(),a=JSON.stringify(n_(r).map(o=>o.pathnameBase));return $.useMemo(()=>r_(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function Pb(e,t){return Nb(e,t)}function Nb(e,t,n){tc()||In(!1);let{navigator:r}=$.useContext(ts),{matches:i}=$.useContext(Ga),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=gm(),f;if(t){var h;let R=typeof t=="string"?Mo(t):t;l==="/"||(h=R.pathname)!=null&&h.startsWith(l)||In(!1),f=R}else f=u;let p=f.pathname||"/",d=l==="/"?p:p.slice(l.length)||"/",T=ob(e,{pathname:d}),x=Fb(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},o,R.params),pathname:Da([l,r.encodeLocation?r.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:Da([l,r.encodeLocation?r.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n);return t&&x?$.createElement(vm.Provider,{value:{location:Bd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Aa.Pop}},x):x}function kb(){let e=Gb(),t=Ab(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),n?$.createElement("pre",{style:i},n):null,a)}const Ib=$.createElement(kb,null);class Db extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?$.createElement(Ga.Provider,{value:this.props.routeContext},$.createElement(a_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mb(e){let{routeContext:t,match:n,children:r}=e,i=$.useContext(Dv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Ga.Provider,{value:t},r)}function Fb(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id]));l>=0||In(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,u,f)=>{let h=u.route.id?o==null?void 0:o[u.route.id]:null,p=null;n&&(p=u.route.errorElement||Ib);let d=t.concat(a.slice(0,f+1)),T=()=>{let x;return h?x=p:u.route.Component?x=$.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,$.createElement(Mb,{match:u,routeContext:{outlet:l,matches:d,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?$.createElement(Db,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:T(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):T()},null)}var u_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(u_||{}),$d=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($d||{});function jb(e){let t=$.useContext(Dv);return t||In(!1),t}function Bb(e){let t=$.useContext(Lb);return t||In(!1),t}function $b(e){let t=$.useContext(Ga);return t||In(!1),t}function c_(e){let t=$b(),n=t.matches[t.matches.length-1];return n.route.id||In(!1),n.route.id}function Gb(){var e;let t=$.useContext(a_),n=Bb($d.UseRouteError),r=c_($d.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function zb(){let{router:e}=jb(u_.UseNavigateStable),t=c_($d.UseNavigateStable),n=$.useRef(!1);return o_(()=>{n.current=!0}),$.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Bd({fromRouteId:t},a)))},[e,t])}function vu(e){In(!1)}function Ub(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Aa.Pop,navigator:a,static:o=!1}=e;tc()&&In(!1);let l=t.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof r=="string"&&(r=Mo(r));let{pathname:f="/",search:h="",hash:p="",state:d=null,key:T="default"}=r,x=$.useMemo(()=>{let R=Iv(f,l);return R==null?null:{location:{pathname:R,search:h,hash:p,state:d,key:T},navigationType:i}},[l,f,h,p,d,T,i]);return x==null?null:$.createElement(ts.Provider,{value:u},$.createElement(vm.Provider,{children:n,value:x}))}function Vb(e){let{children:t,location:n}=e;return Pb(L0(t),n)}new Promise(()=>{});function L0(e,t){t===void 0&&(t=[]);let n=[];return $.Children.forEach(e,(r,i)=>{if(!$.isValidElement(r))return;let a=[...t,i];if(r.type===$.Fragment){n.push.apply(n,L0(r.props.children,a));return}r.type!==vu&&In(!1),!r.props.index||!r.props.children||In(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=L0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R0.apply(this,arguments)}function Hb(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Wb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Xb(e,t){return e.button===0&&(!t||t==="_self")&&!Wb(e)}const Yb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Qb="startTransition",qy=WS[Qb];function Kb(e){let{basename:t,children:n,future:r,window:i}=e,a=$.useRef();a.current==null&&(a.current=rb({window:i,v5Compat:!0}));let o=a.current,[l,u]=$.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},h=$.useCallback(p=>{f&&qy?qy(()=>u(p)):u(p)},[u,f]);return $.useLayoutEffect(()=>o.listen(h),[o,h]),$.createElement(Ub,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o})}const qb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vu=$.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:f,preventScrollReset:h,unstable_viewTransition:p}=t,d=Hb(t,Yb),{basename:T}=$.useContext(ts),x,R=!1;if(typeof f=="string"&&Zb.test(f)&&(x=f,qb))try{let C=new URL(window.location.href),H=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Iv(H.pathname,T);H.origin===C.origin&&q!=null?f=q+H.search+H.hash:R=!0}catch{}let I=Rb(f,{relative:i}),g=Jb(f,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:p});function w(C){r&&r(C),C.defaultPrevented||g(C)}return $.createElement("a",R0({},d,{href:x||I,onClick:R||a?r:w,ref:n,target:u}))});var Zy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var Jy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Jy||(Jy={}));function Jb(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,u=ym(),f=gm(),h=s_(e,{relative:o});return $.useCallback(p=>{if(Xb(p,n)){p.preventDefault();let d=r!==void 0?r:jd(f)===jd(h);u(e,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[f,u,h,r,i,n,e,a,o,l])}const eA="https://api.latentscope.com/api";function f_(e,t,n){let r=null;return console.log("start polling",n),r=setInterval(()=>{fetch(`${eA}/jobs/job?dataset=${e.id}&job_id=${n}`).then(i=>{if(!i.ok)throw clearInterval(r),t(null),new Error(`HTTP error! status: ${i.status}`);return i.json()}).then(i=>{console.log("polling job status",i),t(i),(i.status==="completed"||i.status==="error")&&(clearInterval(r),setTimeout(()=>{t(null),t(i)},200))}).catch(i=>{console.error("Error polling job status",i),clearInterval(r),t(null)})},200),console.log("returning jobPolling cleanup"),()=>{console.log("inside cleanup",r),r&&clearInterval(r)}}function Kl(e,t,n){return{startJob:$.useCallback(i=>{fetch(`${n}?dataset=${e.id}&${new URLSearchParams(i)}`).then(a=>a.json()).then(a=>{const o=a.job_id;f_(e,t,o)})},[e,t,n])}}var d_={exports:{}},tA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nA=tA,rA=nA;function m_(){}function h_(){}h_.resetWarningCache=m_;var iA=function(){function e(r,i,a,o,l,u){if(u!==rA){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:h_,resetWarningCache:m_};return n.PropTypes=n,n};d_.exports=iA();var aA=d_.exports;const Ke=B0(aA);ns.propTypes={job:Ke.object,onlyLast:Ke.bool,clearJob:Ke.func.isRequired};function ns({job:e,onlyLast:t,clearJob:n}){const r=$.useRef(null);return $.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),O.jsx(O.Fragment,{children:e?O.jsxs("div",{className:"job-progress",children:["Running ",O.jsx("b",{children:e.job_name}),O.jsx("br",{}),O.jsx("code",{children:e.command}),O.jsx("pre",{ref:r,children:t?e.progress[e.progress.length-1]:e.progress.join(`
`)}),e.status=="completed"?O.jsx("button",{onClick:n,children:"👍"}):null,e.status=="error"?O.jsx("button",{onClick:n,children:"🤬"}):null]}):O.jsx(O.Fragment,{})})}const Gf="https://api.latentscope.com/api";function oA(){const[e,t]=$.useState([]);$.useEffect(()=>{fetch(`${Gf}/datasets`).then(d=>d.json()).then(d=>t(d))},[]);const[n,r]=$.useState({});$.useEffect(()=>{e.forEach(d=>{fetch(`${Gf}/datasets/${d.id}/scopes`).then(T=>T.json()).then(T=>r(x=>{const R={...x};return R[d.id]=T,R}))})},[e]),$.useEffect(()=>{console.log("scopes",n)},[n]);const[i,a]=$.useState(null),o=d=>{d.preventDefault();const T=d.target[1].value,R=d.target[0].files[0],I=new FormData;I.append("dataset",T),I.append("file",R),fetch(`${Gf}/jobs/ingest`,{method:"POST",body:I}).then(g=>g.json()).then(g=>{console.log("Job ID:",g.job_id),f_({id:T},a,g.job_id)}).catch(g=>{console.error("Error:",g)})},l=d=>{d.preventDefault()};function u(d){let T=d.substring(0,d.lastIndexOf("."));return T=T.replace(/\s/g,"-"),T}const f=d=>{d.preventDefault(),document.getElementById("upload-button").files=d.dataTransfer.files;const T=d.dataTransfer.files[0].name,x=u(T);document.getElementById("dataset-name").value=x},h=d=>{const T=d.target.files[0].name,x=u(T);document.getElementById("dataset-name").value=x},p=ym();return $.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){p(`/datasets/${i.dataset}/setup`)},1e3)},[i,p]),O.jsxs("div",{className:"home",children:[O.jsxs("div",{className:"new-dataset",children:[O.jsx("h3",{children:"Create new dataset"}),O.jsxs("form",{onSubmit:o,onDragOver:l,onDrop:f,children:[O.jsx("label",{htmlFor:"upload-button",children:O.jsx("span",{children:"Import a CSV to create a new dataset"})}),O.jsx("input",{hidden:!0,id:"upload-button",type:"file",onChange:h}),O.jsx("input",{id:"dataset-name",type:"text",placeholder:"Dataset name"}),O.jsx("button",{type:"submit",children:"Submit"})]}),O.jsx(ns,{job:i,clearJob:()=>a(null)})]}),O.jsx("h3",{children:"Datasets"}),O.jsx("ul",{children:e.map(d=>{var T;return O.jsxs("li",{children:[O.jsxs(Vu,{to:`/datasets/${d.name}/setup`,children:["Setup ",d.name]}),O.jsx("div",{className:"scope-links",children:n[d.id]&&n[d.id].map&&((T=n[d.id])==null?void 0:T.map((x,R)=>O.jsxs("div",{className:"scope-link",children:[O.jsxs(Vu,{to:`/datasets/${d.name}/explore/${x.name}`,children:["Explore ",x.name," - ",x.label,O.jsx("br",{}),O.jsx("img",{width:"120px",src:`${Gf}/files/${d.id}/clusters/${x.cluster}.png`})]}),O.jsx("br",{})]},R)))})]},d.id)})})]})}const e1="https://api.latentscope.com/api";wo.propTypes={data:Ke.array.isRequired,tagset:Ke.object,datasetId:Ke.string,maxRows:Ke.number,onTagset:Ke.func,onHover:Ke.func,onClick:Ke.func};function wo({data:e,tagset:t,datasetId:n,maxRows:r,onTagset:i,onHover:a,onClick:o}){if(!e.length)return O.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let u;function f(p,d){console.log("tag",p),console.log("index",d),console.log("tagset",t),console.log("tagset[tag]",t[p]),t[p].includes(d)?(console.log("removing"),fetch(`${e1}/tags/remove?dataset=${n}&tag=${p}&index=${d}`).then(T=>T.json()).then(T=>{console.log("removed",T),i(T)})):(console.log("adding"),fetch(`${e1}/tags/add?dataset=${n}&tag=${p}&index=${d}`).then(T=>T.json()).then(T=>{console.log("added",T),i(T)}))}t&&(u=Object.keys(t));const h=r?e.slice(0,r):e;return O.jsxs(O.Fragment,{children:[O.jsxs("table",{className:"datatable",children:[O.jsx("thead",{children:O.jsxs("tr",{children:[l.map((p,d)=>O.jsx("th",{children:p},d)),u?O.jsx("th",{children:"tags"}):null]})}),O.jsx("tbody",{children:h.map((p,d)=>O.jsxs("tr",{onMouseEnter:()=>a&&a(p.index),onMouseLeave:()=>a&&a(),onClick:()=>o&&o(p.index),children:[l.map((T,x)=>O.jsx("td",{children:p[T]},x)),u?O.jsx("td",{children:u.map((T,x)=>O.jsx("button",{onClick:R=>{f(T,p.index),R.preventDefault(),R.stopPropagation()},className:t[T].includes(p.index)?"tag-active":"tag-inactive",children:T},x))}):null]},d))})]}),r&&e.length>r?O.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const p_=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),Mv=(e,t)=>t?e.toLowerCase():e,v_=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const a=Mv(n,t);return e[a]||(e[a]=[],e.__times__[a]=[]),e[a].push(r),e.__times__[a].push(+i||1/0),{event:a,handler:r}},Fv=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=Mv(n,t);if(!e[i])return;const a=e[i].indexOf(r);a===-1||a>=e[i].length||(e[i].splice(a,1),e.__times__[i].splice(a,1))},t1=(e,t)=>()=>{e.forEach(n=>n(t))},g_=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=Fv(e);return(a,o,l={})=>{const u=Mv(a,n);if(!e[u])return;const f=[...e[u]];if(f.forEach((h,p)=>{--e.__times__[u][p]<1&&i(u,h)}),r||l.async?setTimeout(t1(f,o),0):t1(f,o)(),t&&!l.isNoGlobalBroadcast)try{p_.postMessage({event:u,news:o})}catch(h){if(h instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw h}}},lA=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},y_=()=>({__times__:{}}),sA=({async:e=!1,caseInsensitive:t=!1,stack:n=y_()}={})=>(n.__times__||(n.__times__={}),{publish:g_(n,{async:e,caseInsensitive:t}),subscribe:v_(n,{caseInsensitive:t}),unsubscribe:Fv(n,{caseInsensitive:t}),clear:lA(n),stack:n}),zf=y_(),uA={publish:g_(zf,{isGlobal:!0}),subscribe:v_(zf),unsubscribe:Fv(zf),stack:zf};p_.onmessage=({data:{event:e,news:t}})=>uA.publish(e,t,{isNoGlobalBroadcast:!0});var x_={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(OS,function(){var n=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray},r=function(c,v){for(var L=Object.keys(v),X=0;X<L.length;++X)c[L[X]]=v[L[X]];return c},i=`
`;function a(c){return typeof atob<"u"?atob(c):"base64:"+c}function o(c){var v=new Error("(regl) "+c);throw console.error(v),v}function l(c,v){c||o(v)}function u(c){return c?": "+c:""}function f(c,v,L){c in v||o("unknown parameter ("+c+")"+u(L)+". possible values: "+Object.keys(v).join())}function h(c,v){n(c)||o("invalid parameter type"+u(v)+". must be a typed array")}function p(c,v){switch(v){case"number":return typeof c=="number";case"object":return typeof c=="object";case"string":return typeof c=="string";case"boolean":return typeof c=="boolean";case"function":return typeof c=="function";case"undefined":return typeof c>"u";case"symbol":return typeof c=="symbol"}}function d(c,v,L){p(c,v)||o("invalid parameter type"+u(L)+". expected "+v+", got "+typeof c)}function T(c,v){c>=0&&(c|0)===c||o("invalid parameter type, ("+c+")"+u(v)+". must be a nonnegative integer")}function x(c,v,L){v.indexOf(c)<0&&o("invalid value"+u(L)+". must be one of: "+v)}var R=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function I(c){Object.keys(c).forEach(function(v){R.indexOf(v)<0&&o('invalid regl constructor argument "'+v+'". must be one of '+R)})}function g(c,v){for(c=c+"";c.length<v;)c=" "+c;return c}function w(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(c,v){this.number=c,this.line=v,this.errors=[]}function H(c,v,L){this.file=c,this.line=v,this.message=L}function q(){var c=new Error,v=(c.stack||c).toString(),L=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(v);if(L)return L[1];var X=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(v);return X?X[1]:"unknown"}function le(){var c=new Error,v=(c.stack||c).toString(),L=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(v);if(L)return L[1];var X=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(v);return X?X[1]:"unknown"}function he(c,v){var L=c.split(`
`),X=1,te=0,W={unknown:new w,0:new w};W.unknown.name=W[0].name=v||q(),W.unknown.lines.push(new C(0,""));for(var K=0;K<L.length;++K){var fe=L[K],ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fe);if(ce)switch(ce[1]){case"line":var ye=/(\d+)(\s+\d+)?/.exec(ce[2]);ye&&(X=ye[1]|0,ye[2]&&(te=ye[2]|0,te in W||(W[te]=new w)));break;case"define":var Ee=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ce[2]);Ee&&(W[te].name=Ee[1]?a(Ee[2]):Ee[2]);break}W[te].lines.push(new C(X++,fe))}return Object.keys(W).forEach(function(xe){var Te=W[xe];Te.lines.forEach(function(de){Te.index[de.number]=de})}),W}function ae(c){var v=[];return c.split(`
`).forEach(function(L){if(!(L.length<5)){var X=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(L);X?v.push(new H(X[1]|0,X[2]|0,X[3].trim())):L.length>0&&v.push(new H("unknown",0,L))}}),v}function it(c,v){v.forEach(function(L){var X=c[L.file];if(X){var te=X.index[L.line];if(te){te.errors.push(L),X.hasErrors=!0;return}}c.unknown.hasErrors=!0,c.unknown.lines[0].errors.push(L)})}function Fe(c,v,L,X,te){if(!c.getShaderParameter(v,c.COMPILE_STATUS)){var W=c.getShaderInfoLog(v),K=X===c.FRAGMENT_SHADER?"fragment":"vertex";ht(L,"string",K+" shader source must be a string",te);var fe=he(L,te),ce=ae(W);it(fe,ce),Object.keys(fe).forEach(function(ye){var Ee=fe[ye];if(!Ee.hasErrors)return;var xe=[""],Te=[""];function de(ge,j){xe.push(ge),Te.push(j||"")}de("file number "+ye+": "+Ee.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ee.lines.forEach(function(ge){if(ge.errors.length>0){de(g(ge.number,4)+"|  ","background-color:yellow; font-weight:bold"),de(ge.line+i,"color:red; background-color:yellow; font-weight:bold");var j=0;ge.errors.forEach(function(Q){var ve=Q.message,De=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ve);if(De){var se=De[1];switch(ve=De[2],se){case"assign":se="=";break}j=Math.max(ge.line.indexOf(se,j),0)}else j=0;de(g("| ",6)),de(g("^^^",j+3)+i,"font-weight:bold"),de(g("| ",6)),de(ve+i,"font-weight:bold")}),de(g("| ",6)+i)}else de(g(ge.number,4)+"|  "),de(ge.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Te[0]=xe.join("%c"),console.log.apply(console,Te)):console.log(xe.join(""))}),l.raise("Error compiling "+K+" shader, "+fe[0].name)}}function Me(c,v,L,X,te){if(!c.getProgramParameter(v,c.LINK_STATUS)){var W=c.getProgramInfoLog(v),K=he(L,te),fe=he(X,te),ce='Error linking program with vertex shader, "'+fe[0].name+'", and fragment shader "'+K[0].name+'"';typeof document<"u"?console.log("%c"+ce+i+"%c"+W,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ce+i+W),l.raise(ce)}}function qe(c){c._commandRef=q()}function Xe(c,v,L,X){qe(c);function te(ce){return ce?X.id(ce):0}c._fragId=te(c.static.frag),c._vertId=te(c.static.vert);function W(ce,ye){Object.keys(ye).forEach(function(Ee){ce[X.id(Ee)]=!0})}var K=c._uniformSet={};W(K,v.static),W(K,v.dynamic);var fe=c._attributeSet={};W(fe,L.static),W(fe,L.dynamic),c._hasCount="count"in c.static||"count"in c.dynamic||"elements"in c.static||"elements"in c.dynamic}function Qe(c,v){var L=le();o(c+" in command "+(v||q())+(L==="unknown"?"":" called from "+L))}function Nt(c,v,L){c||Qe(v,L||q())}function ut(c,v,L,X){c in v||Qe("unknown parameter ("+c+")"+u(L)+". possible values: "+Object.keys(v).join(),X||q())}function ht(c,v,L,X){p(c,v)||Qe("invalid parameter type"+u(L)+". expected "+v+", got "+typeof c,X||q())}function pe(c){c()}function We(c,v,L){c.texture?x(c.texture._texture.internalformat,v,"unsupported texture format for attachment"):x(c.renderbuffer._renderbuffer.format,L,"unsupported renderbuffer format for attachment")}var Ne=33071,Se=9728,Ge=9984,lt=9985,xt=9986,st=9987,Qt=5120,Ht=5121,Dt=5122,en=5123,Xn=5124,Dn=5125,Xt=5126,dn=32819,pt=32820,St=33635,It=34042,vt=36193,Rt={};Rt[Qt]=Rt[Ht]=1,Rt[Dt]=Rt[en]=Rt[vt]=Rt[St]=Rt[dn]=Rt[pt]=2,Rt[Xn]=Rt[Dn]=Rt[Xt]=Rt[It]=4;function zt(c,v){return c===pt||c===dn||c===St?2:c===It?4:Rt[c]*v}function an(c){return!(c&c-1)&&!!c}function $n(c,v,L){var X,te=v.width,W=v.height,K=v.channels;l(te>0&&te<=L.maxTextureSize&&W>0&&W<=L.maxTextureSize,"invalid texture shape"),(c.wrapS!==Ne||c.wrapT!==Ne)&&l(an(te)&&an(W),"incompatible wrap mode for texture, both width and height must be power of 2"),v.mipmask===1?te!==1&&W!==1&&l(c.minFilter!==Ge&&c.minFilter!==xt&&c.minFilter!==lt&&c.minFilter!==st,"min filter requires mipmap"):(l(an(te)&&an(W),"texture must be a square power of 2 to support mipmapping"),l(v.mipmask===(te<<1)-1,"missing or incomplete mipmap data")),v.type===Xt&&(L.extensions.indexOf("oes_texture_float_linear")<0&&l(c.minFilter===Se&&c.magFilter===Se,"filter not supported, must enable oes_texture_float_linear"),l(!c.genMipmaps,"mipmap generation not supported with float textures"));var fe=v.images;for(X=0;X<16;++X)if(fe[X]){var ce=te>>X,ye=W>>X;l(v.mipmask&1<<X,"missing mipmap data");var Ee=fe[X];if(l(Ee.width===ce&&Ee.height===ye,"invalid shape for mip images"),l(Ee.format===v.format&&Ee.internalformat===v.internalformat&&Ee.type===v.type,"incompatible type for mip image"),!Ee.compressed)if(Ee.data){var xe=Math.ceil(zt(Ee.type,K)*ce/Ee.unpackAlignment)*Ee.unpackAlignment;l(Ee.data.byteLength===xe*ye,"invalid data for image, buffer size is inconsistent with image format")}else Ee.element||Ee.copy}else c.genMipmaps||l((v.mipmask&1<<X)===0,"extra mipmap data");v.compressed&&l(!c.genMipmaps,"mipmap generation for compressed images not supported")}function Dr(c,v,L,X){var te=c.width,W=c.height,K=c.channels;l(te>0&&te<=X.maxTextureSize&&W>0&&W<=X.maxTextureSize,"invalid texture shape"),l(te===W,"cube map must be square"),l(v.wrapS===Ne&&v.wrapT===Ne,"wrap mode not supported by cube map");for(var fe=0;fe<L.length;++fe){var ce=L[fe];l(ce.width===te&&ce.height===W,"inconsistent cube map face shape"),v.genMipmaps&&(l(!ce.compressed,"can not generate mipmap for compressed textures"),l(ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ye=ce.images,Ee=0;Ee<16;++Ee){var xe=ye[Ee];if(xe){var Te=te>>Ee,de=W>>Ee;l(ce.mipmask&1<<Ee,"missing mipmap data"),l(xe.width===Te&&xe.height===de,"invalid shape for mip images"),l(xe.format===c.format&&xe.internalformat===c.internalformat&&xe.type===c.type,"incompatible type for mip image"),xe.compressed||(xe.data?l(xe.data.byteLength===Te*de*Math.max(zt(xe.type,K),xe.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):xe.element||xe.copy)}}}}var y=r(l,{optional:pe,raise:o,commandRaise:Qe,command:Nt,parameter:f,commandParameter:ut,constructor:I,type:d,commandType:ht,isTypedArray:h,nni:T,oneOf:x,shaderError:Fe,linkError:Me,callSite:le,saveCommandRef:qe,saveDrawInfo:Xe,framebufferFormat:We,guessCommand:q,texture2D:$n,textureCube:Dr}),Et=0,Ot=0,_e=5,Yt=6;function _t(c,v){this.id=Et++,this.type=c,this.data=v}function je(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Lt(c){if(c.length===0)return[];var v=c.charAt(0),L=c.charAt(c.length-1);if(c.length>1&&v===L&&(v==='"'||v==="'"))return['"'+je(c.substr(1,c.length-2))+'"'];var X=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c);if(X)return Lt(c.substr(0,X.index)).concat(Lt(X[1])).concat(Lt(c.substr(X.index+X[0].length)));var te=c.split(".");if(te.length===1)return['"'+je(c)+'"'];for(var W=[],K=0;K<te.length;++K)W=W.concat(Lt(te[K]));return W}function jt(c){return"["+Lt(c).join("][")+"]"}function ct(c,v){return new _t(c,jt(v+""))}function tn(c){return typeof c=="function"&&!c._reglType||c instanceof _t}function on(c,v){if(typeof c=="function")return new _t(Ot,c);if(typeof c=="number"||typeof c=="boolean")return new _t(_e,c);if(Array.isArray(c))return new _t(Yt,c.map(function(L,X){return on(L,v+"["+X+"]")}));if(c instanceof _t)return c;y(!1,"invalid option type in uniform "+v)}var Pt={DynamicVariable:_t,define:ct,isDynamic:tn,unbox:on,accessor:jt},ln={next:typeof requestAnimationFrame=="function"?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:typeof cancelAnimationFrame=="function"?function(c){return cancelAnimationFrame(c)}:clearTimeout},sn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function sr(){var c={"":0},v=[""];return{id:function(L){var X=c[L];return X||(X=c[L]=v.length,v.push(L),X)},str:function(L){return v[L]}}}function ue(c,v,L){var X=document.createElement("canvas");r(X.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),c.appendChild(X),c===document.body&&(X.style.position="absolute",r(c.style,{margin:0,padding:0}));function te(){var fe=window.innerWidth,ce=window.innerHeight;if(c!==document.body){var ye=X.getBoundingClientRect();fe=ye.right-ye.left,ce=ye.bottom-ye.top}X.width=L*fe,X.height=L*ce}var W;c!==document.body&&typeof ResizeObserver=="function"?(W=new ResizeObserver(function(){setTimeout(te)}),W.observe(c)):window.addEventListener("resize",te,!1);function K(){W?W.disconnect():window.removeEventListener("resize",te),c.removeChild(X)}return te(),{canvas:X,onDestroy:K}}function At(c,v){function L(X){try{return c.getContext(X,v)}catch{return null}}return L("webgl")||L("experimental-webgl")||L("webgl-experimental")}function Kt(c){return typeof c.nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"}function Gn(c){return typeof c.drawArrays=="function"||typeof c.drawElements=="function"}function Er(c){return typeof c=="string"?c.split():(y(Array.isArray(c),"invalid extension array"),c)}function oi(c){return typeof c=="string"?(y(typeof document<"u","not supported outside of DOM"),document.querySelector(c)):c}function Mr(c){var v=c||{},L,X,te,W,K={},fe=[],ce=[],ye=typeof window>"u"?1:window.devicePixelRatio,Ee=!1,xe=function(ge){ge&&y.raise(ge)},Te=function(){};if(typeof v=="string"?(y(typeof document<"u","selector queries only supported in DOM enviroments"),L=document.querySelector(v),y(L,"invalid query string for element")):typeof v=="object"?Kt(v)?L=v:Gn(v)?(W=v,te=W.canvas):(y.constructor(v),"gl"in v?W=v.gl:"canvas"in v?te=oi(v.canvas):"container"in v&&(X=oi(v.container)),"attributes"in v&&(K=v.attributes,y.type(K,"object","invalid context attributes")),"extensions"in v&&(fe=Er(v.extensions)),"optionalExtensions"in v&&(ce=Er(v.optionalExtensions)),"onDone"in v&&(y.type(v.onDone,"function","invalid or missing onDone callback"),xe=v.onDone),"profile"in v&&(Ee=!!v.profile),"pixelRatio"in v&&(ye=+v.pixelRatio,y(ye>0,"invalid pixel ratio"))):y.raise("invalid arguments to regl"),L&&(L.nodeName.toLowerCase()==="canvas"?te=L:X=L),!W){if(!te){y(typeof document<"u","must manually specify webgl context outside of DOM environments");var de=ue(X||document.body,xe,ye);if(!de)return null;te=de.canvas,Te=de.onDestroy}K.premultipliedAlpha===void 0&&(K.premultipliedAlpha=!0),W=At(te,K)}return W?{gl:W,canvas:te,container:X,extensions:fe,optionalExtensions:ce,pixelRatio:ye,profile:Ee,onDone:xe,onDestroy:Te}:(Te(),xe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Qi(c,v){var L={};function X(K){y.type(K,"string","extension name must be string");var fe=K.toLowerCase(),ce;try{ce=L[fe]=c.getExtension(fe)}catch{}return!!ce}for(var te=0;te<v.extensions.length;++te){var W=v.extensions[te];if(!X(W))return v.onDestroy(),v.onDone('"'+W+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return v.optionalExtensions.forEach(X),{extensions:L,restore:function(){Object.keys(L).forEach(function(K){if(L[K]&&!X(K))throw new Error("(regl): error restoring extension "+K)})}}}function hn(c,v){for(var L=Array(c),X=0;X<c;++X)L[X]=v(X);return L}var _r=5120,rs=5121,za=5122,Ua=5123,is=5124,Fo=5125,Ki=5126;function Va(c){for(var v=16;v<=1<<28;v*=16)if(c<=v)return v;return 0}function qi(c){var v,L;return v=(c>65535)<<4,c>>>=v,L=(c>255)<<3,c>>>=L,v|=L,L=(c>15)<<2,c>>>=L,v|=L,L=(c>3)<<1,c>>>=L,v|=L,v|c>>1}function jo(){var c=hn(8,function(){return[]});function v(W){var K=Va(W),fe=c[qi(K)>>2];return fe.length>0?fe.pop():new ArrayBuffer(K)}function L(W){c[qi(W.byteLength)>>2].push(W)}function X(W,K){var fe=null;switch(W){case _r:fe=new Int8Array(v(K),0,K);break;case rs:fe=new Uint8Array(v(K),0,K);break;case za:fe=new Int16Array(v(2*K),0,K);break;case Ua:fe=new Uint16Array(v(2*K),0,K);break;case is:fe=new Int32Array(v(4*K),0,K);break;case Fo:fe=new Uint32Array(v(4*K),0,K);break;case Ki:fe=new Float32Array(v(4*K),0,K);break;default:return null}return fe.length!==K?fe.subarray(0,K):fe}function te(W){L(W.buffer)}return{alloc:v,free:L,allocType:X,freeType:te}}var yt=jo();yt.zero=jo();var Ai=3408,Bo=3410,rc=3411,li=3412,si=3413,ui=3414,ic=3415,Sr=33901,as=33902,Ha=3379,os=3386,Wa=34921,$o=36347,Go=36348,zo=35661,Uo=35660,Ci=34930,Xa=36349,ls=34076,ss=34024,ac=7936,Zi=7937,Ji=7938,Vo=35724,ea=34047,us=36063,ur=34852,ci=3553,fi=34067,Li=34069,Pn=33984,Fr=6408,Mn=5126,En=5121,ta=36160,Ho=36053,Wo=36064,Xo=16384,oc=function(c,v){var L=1;v.ext_texture_filter_anisotropic&&(L=c.getParameter(ea));var X=1,te=1;v.webgl_draw_buffers&&(X=c.getParameter(ur),te=c.getParameter(us));var W=!!v.oes_texture_float;if(W){var K=c.createTexture();c.bindTexture(ci,K),c.texImage2D(ci,0,Fr,1,1,0,Fr,Mn,null);var fe=c.createFramebuffer();if(c.bindFramebuffer(ta,fe),c.framebufferTexture2D(ta,Wo,ci,K,0),c.bindTexture(ci,null),c.checkFramebufferStatus(ta)!==Ho)W=!1;else{c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(Xo);var ce=yt.allocType(Mn,4);c.readPixels(0,0,1,1,Fr,Mn,ce),c.getError()?W=!1:(c.deleteFramebuffer(fe),c.deleteTexture(K),W=ce[0]===1),yt.freeType(ce)}}var ye=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ee=!0;if(!ye){var xe=c.createTexture(),Te=yt.allocType(En,36);c.activeTexture(Pn),c.bindTexture(fi,xe),c.texImage2D(Li,0,Fr,3,3,0,Fr,En,Te),yt.freeType(Te),c.bindTexture(fi,null),c.deleteTexture(xe),Ee=!c.getError()}return{colorBits:[c.getParameter(Bo),c.getParameter(rc),c.getParameter(li),c.getParameter(si)],depthBits:c.getParameter(ui),stencilBits:c.getParameter(ic),subpixelBits:c.getParameter(Ai),extensions:Object.keys(v).filter(function(de){return!!v[de]}),maxAnisotropic:L,maxDrawbuffers:X,maxColorAttachments:te,pointSizeDims:c.getParameter(Sr),lineWidthDims:c.getParameter(as),maxViewportDims:c.getParameter(os),maxCombinedTextureUnits:c.getParameter(zo),maxCubeMapSize:c.getParameter(ls),maxRenderbufferSize:c.getParameter(ss),maxTextureUnits:c.getParameter(Ci),maxTextureSize:c.getParameter(Ha),maxAttributes:c.getParameter(Wa),maxVertexUniforms:c.getParameter($o),maxVertexTextureUnits:c.getParameter(Uo),maxVaryingVectors:c.getParameter(Go),maxFragmentUniforms:c.getParameter(Xa),glsl:c.getParameter(Vo),renderer:c.getParameter(Zi),vendor:c.getParameter(ac),version:c.getParameter(Ji),readFloat:W,npotTextureCube:Ee}};function cr(c){return!!c&&typeof c=="object"&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&typeof c.offset=="number"&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||n(c.data))}var tr=function(c){return Object.keys(c).map(function(v){return c[v]})},wr={shape:Em,flatten:xm};function lc(c,v,L){for(var X=0;X<v;++X)L[X]=c[X]}function cs(c,v,L,X){for(var te=0,W=0;W<v;++W)for(var K=c[W],fe=0;fe<L;++fe)X[te++]=K[fe]}function Yo(c,v,L,X,te,W){for(var K=W,fe=0;fe<v;++fe)for(var ce=c[fe],ye=0;ye<L;++ye)for(var Ee=ce[ye],xe=0;xe<X;++xe)te[K++]=Ee[xe]}function fs(c,v,L,X,te){for(var W=1,K=L+1;K<v.length;++K)W*=v[K];var fe=v[L];if(v.length-L===4){var ce=v[L+1],ye=v[L+2],Ee=v[L+3];for(K=0;K<fe;++K)Yo(c[K],ce,ye,Ee,X,te),te+=W}else for(K=0;K<fe;++K)fs(c[K],v,L+1,X,te),te+=W}function xm(c,v,L,X){var te=1;if(v.length)for(var W=0;W<v.length;++W)te*=v[W];else te=0;var K=X||yt.allocType(L,te);switch(v.length){case 0:break;case 1:lc(c,v[0],K);break;case 2:cs(c,v[0],v[1],K);break;case 3:Yo(c,v[0],v[1],v[2],K,0);break;default:fs(c,v,0,K,0)}return K}function Em(c){for(var v=[],L=c;L.length;L=L[0])v.push(L.length);return v}var na={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ya=5120,Ri=5122,Qo=5124,_m=5121,Ko=5123,ra=5125,Qa=5126,ds=5126,ia={int8:Ya,int16:Ri,int32:Qo,uint8:_m,uint16:Ko,uint32:ra,float:Qa,float32:ds},Jv=35048,bn=35040,qo={dynamic:Jv,stream:bn,static:35044},Ka=wr.flatten,sc=wr.shape,ms=35044,hs=35040,Zo=5121,Jo=5126,Qr=[];Qr[5120]=1,Qr[5122]=2,Qr[5124]=4,Qr[5121]=1,Qr[5123]=2,Qr[5125]=4,Qr[5126]=4;function qa(c){return na[Object.prototype.toString.call(c)]|0}function el(c,v){for(var L=0;L<v.length;++L)c[L]=v[L]}function ps(c,v,L,X,te,W,K){for(var fe=0,ce=0;ce<L;++ce)for(var ye=0;ye<X;++ye)c[fe++]=v[te*ce+W*ye+K]}function vs(c,v,L,X){var te=0,W={};function K(j){this.id=te++,this.buffer=c.createBuffer(),this.type=j,this.usage=ms,this.byteLength=0,this.dimension=1,this.dtype=Zo,this.persistentData=null,L.profile&&(this.stats={size:0})}K.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)},K.prototype.destroy=function(){Te(this)};var fe=[];function ce(j,Q){var ve=fe.pop();return ve||(ve=new K(j)),ve.bind(),xe(ve,Q,hs,0,1,!1),ve}function ye(j){fe.push(j)}function Ee(j,Q,ve){j.byteLength=Q.byteLength,c.bufferData(j.type,Q,ve)}function xe(j,Q,ve,De,se,ke){var Re;if(j.usage=ve,Array.isArray(Q)){if(j.dtype=De||Jo,Q.length>0){var Je;if(Array.isArray(Q[0])){Re=sc(Q);for(var ne=1,ee=1;ee<Re.length;++ee)ne*=Re[ee];j.dimension=ne,Je=Ka(Q,Re,j.dtype),Ee(j,Je,ve),ke?j.persistentData=Je:yt.freeType(Je)}else if(typeof Q[0]=="number"){j.dimension=se;var Ue=yt.allocType(j.dtype,Q.length);el(Ue,Q),Ee(j,Ue,ve),ke?j.persistentData=Ue:yt.freeType(Ue)}else n(Q[0])?(j.dimension=Q[0].length,j.dtype=De||qa(Q[0])||Jo,Je=Ka(Q,[Q.length,Q[0].length],j.dtype),Ee(j,Je,ve),ke?j.persistentData=Je:yt.freeType(Je)):y.raise("invalid buffer data")}}else if(n(Q))j.dtype=De||qa(Q),j.dimension=se,Ee(j,Q,ve),ke&&(j.persistentData=new Uint8Array(new Uint8Array(Q.buffer)));else if(cr(Q)){Re=Q.shape;var Ae=Q.stride,me=Q.offset,Ce=0,Le=0,ft=0,ot=0;Re.length===1?(Ce=Re[0],Le=1,ft=Ae[0],ot=0):Re.length===2?(Ce=Re[0],Le=Re[1],ft=Ae[0],ot=Ae[1]):y.raise("invalid shape"),j.dtype=De||qa(Q.data)||Jo,j.dimension=Le;var Oe=yt.allocType(j.dtype,Ce*Le);ps(Oe,Q.data,Ce,Le,ft,ot,me),Ee(j,Oe,ve),ke?j.persistentData=Oe:yt.freeType(Oe)}else Q instanceof ArrayBuffer?(j.dtype=Zo,j.dimension=se,Ee(j,Q,ve),ke&&(j.persistentData=new Uint8Array(new Uint8Array(Q)))):y.raise("invalid buffer data")}function Te(j){v.bufferCount--,X(j);var Q=j.buffer;y(Q,"buffer must not be deleted already"),c.deleteBuffer(Q),j.buffer=null,delete W[j.id]}function de(j,Q,ve,De){v.bufferCount++;var se=new K(Q);W[se.id]=se;function ke(ne){var ee=ms,Ue=null,Ae=0,me=0,Ce=1;return Array.isArray(ne)||n(ne)||cr(ne)||ne instanceof ArrayBuffer?Ue=ne:typeof ne=="number"?Ae=ne|0:ne&&(y.type(ne,"object","buffer arguments must be an object, a number or an array"),"data"in ne&&(y(Ue===null||Array.isArray(Ue)||n(Ue)||cr(Ue),"invalid data for buffer"),Ue=ne.data),"usage"in ne&&(y.parameter(ne.usage,qo,"invalid buffer usage"),ee=qo[ne.usage]),"type"in ne&&(y.parameter(ne.type,ia,"invalid buffer type"),me=ia[ne.type]),"dimension"in ne&&(y.type(ne.dimension,"number","invalid dimension"),Ce=ne.dimension|0),"length"in ne&&(y.nni(Ae,"buffer length must be a nonnegative integer"),Ae=ne.length|0)),se.bind(),Ue?xe(se,Ue,ee,me,Ce,De):(Ae&&c.bufferData(se.type,Ae,ee),se.dtype=me||Zo,se.usage=ee,se.dimension=Ce,se.byteLength=Ae),L.profile&&(se.stats.size=se.byteLength*Qr[se.dtype]),ke}function Re(ne,ee){y(ee+ne.byteLength<=se.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ne.byteLength+" starting from offset "+ee+" to a buffer of size "+se.byteLength),c.bufferSubData(se.type,ee,ne)}function Je(ne,ee){var Ue=(ee||0)|0,Ae;if(se.bind(),n(ne)||ne instanceof ArrayBuffer)Re(ne,Ue);else if(Array.isArray(ne)){if(ne.length>0)if(typeof ne[0]=="number"){var me=yt.allocType(se.dtype,ne.length);el(me,ne),Re(me,Ue),yt.freeType(me)}else if(Array.isArray(ne[0])||n(ne[0])){Ae=sc(ne);var Ce=Ka(ne,Ae,se.dtype);Re(Ce,Ue),yt.freeType(Ce)}else y.raise("invalid buffer data")}else if(cr(ne)){Ae=ne.shape;var Le=ne.stride,ft=0,ot=0,Oe=0,Ie=0;Ae.length===1?(ft=Ae[0],ot=1,Oe=Le[0],Ie=0):Ae.length===2?(ft=Ae[0],ot=Ae[1],Oe=Le[0],Ie=Le[1]):y.raise("invalid shape");var nt=Array.isArray(ne.data)?se.dtype:qa(ne.data),dt=yt.allocType(nt,ft*ot);ps(dt,ne.data,ft,ot,Oe,Ie,ne.offset),Re(dt,Ue),yt.freeType(dt)}else y.raise("invalid data for buffer subdata");return ke}return ve||ke(j),ke._reglType="buffer",ke._buffer=se,ke.subdata=Je,L.profile&&(ke.stats=se.stats),ke.destroy=function(){Te(se)},ke}function ge(){tr(W).forEach(function(j){j.buffer=c.createBuffer(),c.bindBuffer(j.type,j.buffer),c.bufferData(j.type,j.persistentData||j.byteLength,j.usage)})}return L.profile&&(v.getTotalBufferSize=function(){var j=0;return Object.keys(W).forEach(function(Q){j+=W[Q].stats.size}),j}),{create:de,createStream:ce,destroyStream:ye,clear:function(){tr(W).forEach(Te),fe.forEach(Te)},getBuffer:function(j){return j&&j._buffer instanceof K?j._buffer:null},restore:ge,_initBuffer:xe}}var Sm=0,gs=0,wm=1,ys=1,Tm=4,bm=4,di={points:Sm,point:gs,lines:wm,line:ys,triangles:Tm,triangle:bm,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Am=0,Oi=1,Pi=4,Cm=5120,mi=5121,uc=5122,aa=5123,cc=5124,Kr=5125,xs=34963,Lm=35040,Es=35044;function _s(c,v,L,X){var te={},W=0,K={uint8:mi,uint16:aa};v.oes_element_index_uint&&(K.uint32=Kr);function fe(ge){this.id=W++,te[this.id]=this,this.buffer=ge,this.primType=Pi,this.vertCount=0,this.type=0}fe.prototype.bind=function(){this.buffer.bind()};var ce=[];function ye(ge){var j=ce.pop();return j||(j=new fe(L.create(null,xs,!0,!1)._buffer)),xe(j,ge,Lm,-1,-1,0,0),j}function Ee(ge){ce.push(ge)}function xe(ge,j,Q,ve,De,se,ke){ge.buffer.bind();var Re;if(j){var Je=ke;!ke&&(!n(j)||cr(j)&&!n(j.data))&&(Je=v.oes_element_index_uint?Kr:aa),L._initBuffer(ge.buffer,j,Q,Je,3)}else c.bufferData(xs,se,Q),ge.buffer.dtype=Re||mi,ge.buffer.usage=Q,ge.buffer.dimension=3,ge.buffer.byteLength=se;if(Re=ke,!ke){switch(ge.buffer.dtype){case mi:case Cm:Re=mi;break;case aa:case uc:Re=aa;break;case Kr:case cc:Re=Kr;break;default:y.raise("unsupported type for element array")}ge.buffer.dtype=Re}ge.type=Re,y(Re!==Kr||!!v.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ne=De;ne<0&&(ne=ge.buffer.byteLength,Re===aa?ne>>=1:Re===Kr&&(ne>>=2)),ge.vertCount=ne;var ee=ve;if(ve<0){ee=Pi;var Ue=ge.buffer.dimension;Ue===1&&(ee=Am),Ue===2&&(ee=Oi),Ue===3&&(ee=Pi)}ge.primType=ee}function Te(ge){X.elementsCount--,y(ge.buffer!==null,"must not double destroy elements"),delete te[ge.id],ge.buffer.destroy(),ge.buffer=null}function de(ge,j){var Q=L.create(null,xs,!0),ve=new fe(Q._buffer);X.elementsCount++;function De(se){if(!se)Q(),ve.primType=Pi,ve.vertCount=0,ve.type=mi;else if(typeof se=="number")Q(se),ve.primType=Pi,ve.vertCount=se|0,ve.type=mi;else{var ke=null,Re=Es,Je=-1,ne=-1,ee=0,Ue=0;Array.isArray(se)||n(se)||cr(se)?ke=se:(y.type(se,"object","invalid arguments for elements"),"data"in se&&(ke=se.data,y(Array.isArray(ke)||n(ke)||cr(ke),"invalid data for element buffer")),"usage"in se&&(y.parameter(se.usage,qo,"invalid element buffer usage"),Re=qo[se.usage]),"primitive"in se&&(y.parameter(se.primitive,di,"invalid element buffer primitive"),Je=di[se.primitive]),"count"in se&&(y(typeof se.count=="number"&&se.count>=0,"invalid vertex count for elements"),ne=se.count|0),"type"in se&&(y.parameter(se.type,K,"invalid buffer type"),Ue=K[se.type]),"length"in se?ee=se.length|0:(ee=ne,Ue===aa||Ue===uc?ee*=2:(Ue===Kr||Ue===cc)&&(ee*=4))),xe(ve,ke,Re,Je,ne,ee,Ue)}return De}return De(ge),De._reglType="elements",De._elements=ve,De.subdata=function(se,ke){return Q.subdata(se,ke),De},De.destroy=function(){Te(ve)},De}return{create:de,createStream:ye,destroyStream:Ee,getElements:function(ge){return typeof ge=="function"&&ge._elements instanceof fe?ge._elements:null},clear:function(){tr(te).forEach(Te)}}}var fc=new Float32Array(1),Rm=new Uint32Array(fc.buffer),Om=5123;function dc(c){for(var v=yt.allocType(Om,c.length),L=0;L<c.length;++L)if(isNaN(c[L]))v[L]=65535;else if(c[L]===1/0)v[L]=31744;else if(c[L]===-1/0)v[L]=64512;else{fc[0]=c[L];var X=Rm[0],te=X>>>31<<15,W=(X<<1>>>24)-127,K=X>>13&1023;if(W<-24)v[L]=te;else if(W<-14){var fe=-14-W;v[L]=te+(K+1024>>fe)}else W>15?v[L]=te+31744:v[L]=te+(W+15<<10)+K}return v}function Zt(c){return Array.isArray(c)||n(c)}var mc=function(c){return!(c&c-1)&&!!c},Pm=34467,jr=3553,Ss=34067,tl=34069,Ni=6408,ws=6406,nl=6407,ki=6409,rl=6410,hc=32854,Ts=32855,bs=36194,Nm=32819,km=32820,Im=33635,pc=34042,il=6402,Za=34041,Ja=35904,eo=35906,oa=36193,Ii=33776,As=33777,Cs=33778,Ls=33779,vc=35986,gc=35987,yc=34798,xc=35840,Ec=35841,_c=35842,Sc=35843,wc=36196,la=5121,Rs=5123,Os=5125,Tr=5126,Dm=10242,Mm=10243,Fm=10497,Ps=33071,jm=33648,Bm=10240,$m=10241,Ns=9728,Gm=9729,al=9984,ks=9985,Tc=9986,Is=9987,zm=33170,to=4352,bc=4353,Um=4354,Vm=34046,Hm=3317,Wm=37440,Xm=37441,Ym=37443,sa=37444,no=33984,Ac=[al,Tc,ks,Is],ro=[0,ki,rl,nl,Ni],br={};br[ki]=br[ws]=br[il]=1,br[Za]=br[rl]=2,br[nl]=br[Ja]=3,br[Ni]=br[eo]=4;function ua(c){return"[object "+c+"]"}var Cc=ua("HTMLCanvasElement"),Lc=ua("OffscreenCanvas"),Rc=ua("CanvasRenderingContext2D"),Oc=ua("ImageBitmap"),Pc=ua("HTMLImageElement"),ol=ua("HTMLVideoElement"),Qm=Object.keys(na).concat([Cc,Lc,Rc,Oc,Pc,ol]),ca=[];ca[la]=1,ca[Tr]=4,ca[oa]=2,ca[Rs]=2,ca[Os]=4;var An=[];An[hc]=2,An[Ts]=2,An[bs]=2,An[Za]=4,An[Ii]=.5,An[As]=.5,An[Cs]=1,An[Ls]=1,An[vc]=.5,An[gc]=1,An[yc]=1,An[xc]=.5,An[Ec]=.25,An[_c]=.5,An[Sc]=.25,An[wc]=.5;function Nc(c){return Array.isArray(c)&&(c.length===0||typeof c[0]=="number")}function Ds(c){if(!Array.isArray(c))return!1;var v=c.length;return!(v===0||!Zt(c[0]))}function Di(c){return Object.prototype.toString.call(c)}function Ms(c){return Di(c)===Cc}function kc(c){return Di(c)===Lc}function Km(c){return Di(c)===Rc}function Fs(c){return Di(c)===Oc}function Ic(c){return Di(c)===Pc}function Dc(c){return Di(c)===ol}function js(c){if(!c)return!1;var v=Di(c);return Qm.indexOf(v)>=0?!0:Nc(c)||Ds(c)||cr(c)}function Mc(c){return na[Object.prototype.toString.call(c)]|0}function qm(c,v){var L=v.length;switch(c.type){case la:case Rs:case Os:case Tr:var X=yt.allocType(c.type,L);X.set(v),c.data=X;break;case oa:c.data=dc(v);break;default:y.raise("unsupported texture type, must specify a typed array")}}function Fc(c,v){return yt.allocType(c.type===oa?Tr:c.type,v)}function jc(c,v){c.type===oa?(c.data=dc(v),yt.freeType(v)):c.data=v}function Bc(c,v,L,X,te,W){for(var K=c.width,fe=c.height,ce=c.channels,ye=K*fe*ce,Ee=Fc(c,ye),xe=0,Te=0;Te<fe;++Te)for(var de=0;de<K;++de)for(var ge=0;ge<ce;++ge)Ee[xe++]=v[L*de+X*Te+te*ge+W];jc(c,Ee)}function ll(c,v,L,X,te,W){var K;if(typeof An[c]<"u"?K=An[c]:K=br[c]*ca[v],W&&(K*=6),te){for(var fe=0,ce=L;ce>=1;)fe+=K*ce*ce,ce/=2;return fe}else return K*L*X}function Zm(c,v,L,X,te,W,K){var fe={"don't care":to,"dont care":to,nice:Um,fast:bc},ce={repeat:Fm,clamp:Ps,mirror:jm},ye={nearest:Ns,linear:Gm},Ee=r({mipmap:Is,"nearest mipmap nearest":al,"linear mipmap nearest":ks,"nearest mipmap linear":Tc,"linear mipmap linear":Is},ye),xe={none:0,browser:sa},Te={uint8:la,rgba4:Nm,rgb565:Im,"rgb5 a1":km},de={alpha:ws,luminance:ki,"luminance alpha":rl,rgb:nl,rgba:Ni,rgba4:hc,"rgb5 a1":Ts,rgb565:bs},ge={};v.ext_srgb&&(de.srgb=Ja,de.srgba=eo),v.oes_texture_float&&(Te.float32=Te.float=Tr),v.oes_texture_half_float&&(Te.float16=Te["half float"]=oa),v.webgl_depth_texture&&(r(de,{depth:il,"depth stencil":Za}),r(Te,{uint16:Rs,uint32:Os,"depth stencil":pc})),v.webgl_compressed_texture_s3tc&&r(ge,{"rgb s3tc dxt1":Ii,"rgba s3tc dxt1":As,"rgba s3tc dxt3":Cs,"rgba s3tc dxt5":Ls}),v.webgl_compressed_texture_atc&&r(ge,{"rgb atc":vc,"rgba atc explicit alpha":gc,"rgba atc interpolated alpha":yc}),v.webgl_compressed_texture_pvrtc&&r(ge,{"rgb pvrtc 4bppv1":xc,"rgb pvrtc 2bppv1":Ec,"rgba pvrtc 4bppv1":_c,"rgba pvrtc 2bppv1":Sc}),v.webgl_compressed_texture_etc1&&(ge["rgb etc1"]=wc);var j=Array.prototype.slice.call(c.getParameter(Pm));Object.keys(ge).forEach(function(b){var Y=ge[b];j.indexOf(Y)>=0&&(de[b]=Y)});var Q=Object.keys(de);L.textureFormats=Q;var ve=[];Object.keys(de).forEach(function(b){var Y=de[b];ve[Y]=b});var De=[];Object.keys(Te).forEach(function(b){var Y=Te[b];De[Y]=b});var se=[];Object.keys(ye).forEach(function(b){var Y=ye[b];se[Y]=b});var ke=[];Object.keys(Ee).forEach(function(b){var Y=Ee[b];ke[Y]=b});var Re=[];Object.keys(ce).forEach(function(b){var Y=ce[b];Re[Y]=b});var Je=Q.reduce(function(b,Y){var V=de[Y];return V===ki||V===ws||V===ki||V===rl||V===il||V===Za||v.ext_srgb&&(V===Ja||V===eo)?b[V]=V:V===Ts||Y.indexOf("rgba")>=0?b[V]=Ni:b[V]=nl,b},{});function ne(){this.internalformat=Ni,this.format=Ni,this.type=la,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=sa,this.width=0,this.height=0,this.channels=0}function ee(b,Y){b.internalformat=Y.internalformat,b.format=Y.format,b.type=Y.type,b.compressed=Y.compressed,b.premultiplyAlpha=Y.premultiplyAlpha,b.flipY=Y.flipY,b.unpackAlignment=Y.unpackAlignment,b.colorSpace=Y.colorSpace,b.width=Y.width,b.height=Y.height,b.channels=Y.channels}function Ue(b,Y){if(!(typeof Y!="object"||!Y)){if("premultiplyAlpha"in Y&&(y.type(Y.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=Y.premultiplyAlpha),"flipY"in Y&&(y.type(Y.flipY,"boolean","invalid texture flip"),b.flipY=Y.flipY),"alignment"in Y&&(y.oneOf(Y.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=Y.alignment),"colorSpace"in Y&&(y.parameter(Y.colorSpace,xe,"invalid colorSpace"),b.colorSpace=xe[Y.colorSpace]),"type"in Y){var V=Y.type;y(v.oes_texture_float||!(V==="float"||V==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),y(v.oes_texture_half_float||!(V==="half float"||V==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),y(v.webgl_depth_texture||!(V==="uint16"||V==="uint32"||V==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(V,Te,"invalid texture type"),b.type=Te[V]}var ze=b.width,wt=b.height,E=b.channels,m=!1;"shape"in Y?(y(Array.isArray(Y.shape)&&Y.shape.length>=2,"shape must be an array"),ze=Y.shape[0],wt=Y.shape[1],Y.shape.length===3&&(E=Y.shape[2],y(E>0&&E<=4,"invalid number of channels"),m=!0),y(ze>=0&&ze<=L.maxTextureSize,"invalid width"),y(wt>=0&&wt<=L.maxTextureSize,"invalid height")):("radius"in Y&&(ze=wt=Y.radius,y(ze>=0&&ze<=L.maxTextureSize,"invalid radius")),"width"in Y&&(ze=Y.width,y(ze>=0&&ze<=L.maxTextureSize,"invalid width")),"height"in Y&&(wt=Y.height,y(wt>=0&&wt<=L.maxTextureSize,"invalid height")),"channels"in Y&&(E=Y.channels,y(E>0&&E<=4,"invalid number of channels"),m=!0)),b.width=ze|0,b.height=wt|0,b.channels=E|0;var P=!1;if("format"in Y){var F=Y.format;y(v.webgl_depth_texture||!(F==="depth"||F==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(F,de,"invalid texture format");var B=b.internalformat=de[F];b.format=Je[B],F in Te&&("type"in Y||(b.type=Te[F])),F in ge&&(b.compressed=!0),P=!0}!m&&P?b.channels=br[b.format]:m&&!P?b.channels!==ro[b.format]&&(b.format=b.internalformat=ro[b.channels]):P&&m&&y(b.channels===br[b.format],"number of channels inconsistent with specified format")}}function Ae(b){c.pixelStorei(Wm,b.flipY),c.pixelStorei(Xm,b.premultiplyAlpha),c.pixelStorei(Ym,b.colorSpace),c.pixelStorei(Hm,b.unpackAlignment)}function me(){ne.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ce(b,Y){var V=null;if(js(Y)?V=Y:Y&&(y.type(Y,"object","invalid pixel data type"),Ue(b,Y),"x"in Y&&(b.xOffset=Y.x|0),"y"in Y&&(b.yOffset=Y.y|0),js(Y.data)&&(V=Y.data)),y(!b.compressed||V instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Y.copy){y(!V,"can not specify copy and data field for the same texture");var ze=te.viewportWidth,wt=te.viewportHeight;b.width=b.width||ze-b.xOffset,b.height=b.height||wt-b.yOffset,b.needsCopy=!0,y(b.xOffset>=0&&b.xOffset<ze&&b.yOffset>=0&&b.yOffset<wt&&b.width>0&&b.width<=ze&&b.height>0&&b.height<=wt,"copy texture read out of bounds")}else if(!V)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(n(V))b.channels=b.channels||4,b.data=V,!("type"in Y)&&b.type===la&&(b.type=Mc(V));else if(Nc(V))b.channels=b.channels||4,qm(b,V),b.alignment=1,b.needsFree=!0;else if(cr(V)){var E=V.data;!Array.isArray(E)&&b.type===la&&(b.type=Mc(E));var m=V.shape,P=V.stride,F,B,k,N,M,_;m.length===3?(k=m[2],_=P[2]):(y(m.length===2,"invalid ndarray pixel data, must be 2 or 3D"),k=1,_=1),F=m[0],B=m[1],N=P[0],M=P[1],b.alignment=1,b.width=F,b.height=B,b.channels=k,b.format=b.internalformat=ro[k],b.needsFree=!0,Bc(b,E,N,M,_,V.offset)}else if(Ms(V)||kc(V)||Km(V))Ms(V)||kc(V)?b.element=V:b.element=V.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(Fs(V))b.element=V,b.width=V.width,b.height=V.height,b.channels=4;else if(Ic(V))b.element=V,b.width=V.naturalWidth,b.height=V.naturalHeight,b.channels=4;else if(Dc(V))b.element=V,b.width=V.videoWidth,b.height=V.videoHeight,b.channels=4;else if(Ds(V)){var A=b.width||V[0].length,S=b.height||V.length,U=b.channels;Zt(V[0][0])?U=U||V[0][0].length:U=U||1;for(var G=wr.shape(V),J=1,re=0;re<G.length;++re)J*=G[re];var we=Fc(b,J);wr.flatten(V,G,"",we),jc(b,we),b.alignment=1,b.width=A,b.height=S,b.channels=U,b.format=b.internalformat=ro[U],b.needsFree=!0}b.type===Tr?y(L.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):b.type===oa&&y(L.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Le(b,Y,V){var ze=b.element,wt=b.data,E=b.internalformat,m=b.format,P=b.type,F=b.width,B=b.height;Ae(b),ze?c.texImage2D(Y,V,m,m,P,ze):b.compressed?c.compressedTexImage2D(Y,V,E,F,B,0,wt):b.needsCopy?(X(),c.copyTexImage2D(Y,V,m,b.xOffset,b.yOffset,F,B,0)):c.texImage2D(Y,V,m,F,B,0,m,P,wt||null)}function ft(b,Y,V,ze,wt){var E=b.element,m=b.data,P=b.internalformat,F=b.format,B=b.type,k=b.width,N=b.height;Ae(b),E?c.texSubImage2D(Y,wt,V,ze,F,B,E):b.compressed?c.compressedTexSubImage2D(Y,wt,V,ze,P,k,N,m):b.needsCopy?(X(),c.copyTexSubImage2D(Y,wt,V,ze,b.xOffset,b.yOffset,k,N)):c.texSubImage2D(Y,wt,V,ze,k,N,F,B,m)}var ot=[];function Oe(){return ot.pop()||new me}function Ie(b){b.needsFree&&yt.freeType(b.data),me.call(b),ot.push(b)}function nt(){ne.call(this),this.genMipmaps=!1,this.mipmapHint=to,this.mipmask=0,this.images=Array(16)}function dt(b,Y,V){var ze=b.images[0]=Oe();b.mipmask=1,ze.width=b.width=Y,ze.height=b.height=V,ze.channels=b.channels=4}function Tt(b,Y){var V=null;if(js(Y))V=b.images[0]=Oe(),ee(V,b),Ce(V,Y),b.mipmask=1;else if(Ue(b,Y),Array.isArray(Y.mipmap))for(var ze=Y.mipmap,wt=0;wt<ze.length;++wt)V=b.images[wt]=Oe(),ee(V,b),V.width>>=wt,V.height>>=wt,Ce(V,ze[wt]),b.mipmask|=1<<wt;else V=b.images[0]=Oe(),ee(V,b),Ce(V,Y),b.mipmask=1;ee(b,b.images[0]),b.compressed&&(b.internalformat===Ii||b.internalformat===As||b.internalformat===Cs||b.internalformat===Ls)&&y(b.width%4===0&&b.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function nn(b,Y){for(var V=b.images,ze=0;ze<V.length;++ze){if(!V[ze])return;Le(V[ze],Y,ze)}}var un=[];function Ct(){var b=un.pop()||new nt;ne.call(b),b.mipmask=0;for(var Y=0;Y<16;++Y)b.images[Y]=null;return b}function Cn(b){for(var Y=b.images,V=0;V<Y.length;++V)Y[V]&&Ie(Y[V]),Y[V]=null;un.push(b)}function Jt(){this.minFilter=Ns,this.magFilter=Ns,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=to}function wn(b,Y){if("min"in Y){var V=Y.min;y.parameter(V,Ee),b.minFilter=Ee[V],Ac.indexOf(b.minFilter)>=0&&!("faces"in Y)&&(b.genMipmaps=!0)}if("mag"in Y){var ze=Y.mag;y.parameter(ze,ye),b.magFilter=ye[ze]}var wt=b.wrapS,E=b.wrapT;if("wrap"in Y){var m=Y.wrap;typeof m=="string"?(y.parameter(m,ce),wt=E=ce[m]):Array.isArray(m)&&(y.parameter(m[0],ce),y.parameter(m[1],ce),wt=ce[m[0]],E=ce[m[1]])}else{if("wrapS"in Y){var P=Y.wrapS;y.parameter(P,ce),wt=ce[P]}if("wrapT"in Y){var F=Y.wrapT;y.parameter(F,ce),E=ce[F]}}if(b.wrapS=wt,b.wrapT=E,"anisotropic"in Y){var B=Y.anisotropic;y(typeof B=="number"&&B>=1&&B<=L.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=Y.anisotropic}if("mipmap"in Y){var k=!1;switch(typeof Y.mipmap){case"string":y.parameter(Y.mipmap,fe,"invalid mipmap hint"),b.mipmapHint=fe[Y.mipmap],b.genMipmaps=!0,k=!0;break;case"boolean":k=b.genMipmaps=Y.mipmap;break;case"object":y(Array.isArray(Y.mipmap),"invalid mipmap type"),b.genMipmaps=!1,k=!0;break;default:y.raise("invalid mipmap type")}k&&!("min"in Y)&&(b.minFilter=al)}}function Ln(b,Y){c.texParameteri(Y,$m,b.minFilter),c.texParameteri(Y,Bm,b.magFilter),c.texParameteri(Y,Dm,b.wrapS),c.texParameteri(Y,Mm,b.wrapT),v.ext_texture_filter_anisotropic&&c.texParameteri(Y,Vm,b.anisotropic),b.genMipmaps&&(c.hint(zm,b.mipmapHint),c.generateMipmap(Y))}var Rn=0,Fn={},zn=L.maxTextureUnits,pn=Array(zn).map(function(){return null});function gt(b){ne.call(this),this.mipmask=0,this.internalformat=Ni,this.id=Rn++,this.refCount=1,this.target=b,this.texture=c.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Jt,K.profile&&(this.stats={size:0})}function Un(b){c.activeTexture(no),c.bindTexture(b.target,b.texture)}function $t(){var b=pn[0];b?c.bindTexture(b.target,b.texture):c.bindTexture(jr,null)}function tt(b){var Y=b.texture;y(Y,"must not double destroy texture");var V=b.unit,ze=b.target;V>=0&&(c.activeTexture(no+V),c.bindTexture(ze,null),pn[V]=null),c.deleteTexture(Y),b.texture=null,b.params=null,b.pixels=null,b.refCount=0,delete Fn[b.id],W.textureCount--}r(gt.prototype,{bind:function(){var b=this;b.bindCount+=1;var Y=b.unit;if(Y<0){for(var V=0;V<zn;++V){var ze=pn[V];if(ze){if(ze.bindCount>0)continue;ze.unit=-1}pn[V]=b,Y=V;break}Y>=zn&&y.raise("insufficient number of texture units"),K.profile&&W.maxTextureUnits<Y+1&&(W.maxTextureUnits=Y+1),b.unit=Y,c.activeTexture(no+Y),c.bindTexture(b.target,b.texture)}return Y},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tt(this)}});function bt(b,Y){var V=new gt(jr);Fn[V.id]=V,W.textureCount++;function ze(m,P){var F=V.texInfo;Jt.call(F);var B=Ct();return typeof m=="number"?typeof P=="number"?dt(B,m|0,P|0):dt(B,m|0,m|0):m?(y.type(m,"object","invalid arguments to regl.texture"),wn(F,m),Tt(B,m)):dt(B,1,1),F.genMipmaps&&(B.mipmask=(B.width<<1)-1),V.mipmask=B.mipmask,ee(V,B),y.texture2D(F,B,L),V.internalformat=B.internalformat,ze.width=B.width,ze.height=B.height,Un(V),nn(B,jr),Ln(F,jr),$t(),Cn(B),K.profile&&(V.stats.size=ll(V.internalformat,V.type,B.width,B.height,F.genMipmaps,!1)),ze.format=ve[V.internalformat],ze.type=De[V.type],ze.mag=se[F.magFilter],ze.min=ke[F.minFilter],ze.wrapS=Re[F.wrapS],ze.wrapT=Re[F.wrapT],ze}function wt(m,P,F,B){y(!!m,"must specify image data");var k=P|0,N=F|0,M=B|0,_=Oe();return ee(_,V),_.width=0,_.height=0,Ce(_,m),_.width=_.width||(V.width>>M)-k,_.height=_.height||(V.height>>M)-N,y(V.type===_.type&&V.format===_.format&&V.internalformat===_.internalformat,"incompatible format for texture.subimage"),y(k>=0&&N>=0&&k+_.width<=V.width&&N+_.height<=V.height,"texture.subimage write out of bounds"),y(V.mipmask&1<<M,"missing mipmap data"),y(_.data||_.element||_.needsCopy,"missing image data"),Un(V),ft(_,jr,k,N,M),$t(),Ie(_),ze}function E(m,P){var F=m|0,B=P|0||F;if(F===V.width&&B===V.height)return ze;ze.width=V.width=F,ze.height=V.height=B,Un(V);for(var k=0;V.mipmask>>k;++k){var N=F>>k,M=B>>k;if(!N||!M)break;c.texImage2D(jr,k,V.format,N,M,0,V.format,V.type,null)}return $t(),K.profile&&(V.stats.size=ll(V.internalformat,V.type,F,B,!1,!1)),ze}return ze(b,Y),ze.subimage=wt,ze.resize=E,ze._reglType="texture2d",ze._texture=V,K.profile&&(ze.stats=V.stats),ze.destroy=function(){V.decRef()},ze}function kt(b,Y,V,ze,wt,E){var m=new gt(Ss);Fn[m.id]=m,W.cubeCount++;var P=new Array(6);function F(N,M,_,A,S,U){var G,J=m.texInfo;for(Jt.call(J),G=0;G<6;++G)P[G]=Ct();if(typeof N=="number"||!N){var re=N|0||1;for(G=0;G<6;++G)dt(P[G],re,re)}else if(typeof N=="object")if(M)Tt(P[0],N),Tt(P[1],M),Tt(P[2],_),Tt(P[3],A),Tt(P[4],S),Tt(P[5],U);else if(wn(J,N),Ue(m,N),"faces"in N){var we=N.faces;for(y(Array.isArray(we)&&we.length===6,"cube faces must be a length 6 array"),G=0;G<6;++G)y(typeof we[G]=="object"&&!!we[G],"invalid input for cube map face"),ee(P[G],m),Tt(P[G],we[G])}else for(G=0;G<6;++G)Tt(P[G],N);else y.raise("invalid arguments to cube map");for(ee(m,P[0]),y.optional(function(){L.npotTextureCube||y(mc(m.width)&&mc(m.height),"your browser does not support non power or two texture dimensions")}),J.genMipmaps?m.mipmask=(P[0].width<<1)-1:m.mipmask=P[0].mipmask,y.textureCube(m,J,P,L),m.internalformat=P[0].internalformat,F.width=P[0].width,F.height=P[0].height,Un(m),G=0;G<6;++G)nn(P[G],tl+G);for(Ln(J,Ss),$t(),K.profile&&(m.stats.size=ll(m.internalformat,m.type,F.width,F.height,J.genMipmaps,!0)),F.format=ve[m.internalformat],F.type=De[m.type],F.mag=se[J.magFilter],F.min=ke[J.minFilter],F.wrapS=Re[J.wrapS],F.wrapT=Re[J.wrapT],G=0;G<6;++G)Cn(P[G]);return F}function B(N,M,_,A,S){y(!!M,"must specify image data"),y(typeof N=="number"&&N===(N|0)&&N>=0&&N<6,"invalid face");var U=_|0,G=A|0,J=S|0,re=Oe();return ee(re,m),re.width=0,re.height=0,Ce(re,M),re.width=re.width||(m.width>>J)-U,re.height=re.height||(m.height>>J)-G,y(m.type===re.type&&m.format===re.format&&m.internalformat===re.internalformat,"incompatible format for texture.subimage"),y(U>=0&&G>=0&&U+re.width<=m.width&&G+re.height<=m.height,"texture.subimage write out of bounds"),y(m.mipmask&1<<J,"missing mipmap data"),y(re.data||re.element||re.needsCopy,"missing image data"),Un(m),ft(re,tl+N,U,G,J),$t(),Ie(re),F}function k(N){var M=N|0;if(M!==m.width){F.width=m.width=M,F.height=m.height=M,Un(m);for(var _=0;_<6;++_)for(var A=0;m.mipmask>>A;++A)c.texImage2D(tl+_,A,m.format,M>>A,M>>A,0,m.format,m.type,null);return $t(),K.profile&&(m.stats.size=ll(m.internalformat,m.type,F.width,F.height,!1,!0)),F}}return F(b,Y,V,ze,wt,E),F.subimage=B,F.resize=k,F._reglType="textureCube",F._texture=m,K.profile&&(F.stats=m.stats),F.destroy=function(){m.decRef()},F}function vn(){for(var b=0;b<zn;++b)c.activeTexture(no+b),c.bindTexture(jr,null),pn[b]=null;tr(Fn).forEach(tt),W.cubeCount=0,W.textureCount=0}K.profile&&(W.getTotalTextureSize=function(){var b=0;return Object.keys(Fn).forEach(function(Y){b+=Fn[Y].stats.size}),b});function vi(){for(var b=0;b<zn;++b){var Y=pn[b];Y&&(Y.bindCount=0,Y.unit=-1,pn[b]=null)}tr(Fn).forEach(function(V){V.texture=c.createTexture(),c.bindTexture(V.target,V.texture);for(var ze=0;ze<32;++ze)if(V.mipmask&1<<ze)if(V.target===jr)c.texImage2D(jr,ze,V.internalformat,V.width>>ze,V.height>>ze,0,V.internalformat,V.type,null);else for(var wt=0;wt<6;++wt)c.texImage2D(tl+wt,ze,V.internalformat,V.width>>ze,V.height>>ze,0,V.internalformat,V.type,null);Ln(V.texInfo,V.target)})}function fo(){for(var b=0;b<zn;++b){var Y=pn[b];Y&&(Y.bindCount=0,Y.unit=-1,pn[b]=null),c.activeTexture(no+b),c.bindTexture(jr,null),c.bindTexture(Ss,null)}}return{create2D:bt,createCube:kt,clear:vn,getTexture:function(b){return null},restore:vi,refresh:fo}}var hi=36161,sl=32854,$c=32855,Gc=36194,zc=33189,Uc=36168,Vc=34041,Hc=35907,Wc=34836,Xc=34842,Yc=34843,Ar=[];Ar[sl]=2,Ar[$c]=2,Ar[Gc]=2,Ar[zc]=2,Ar[Uc]=1,Ar[Vc]=4,Ar[Hc]=4,Ar[Wc]=16,Ar[Xc]=8,Ar[Yc]=6;function Qc(c,v,L){return Ar[c]*v*L}var Jm=function(c,v,L,X,te){var W={rgba4:sl,rgb565:Gc,"rgb5 a1":$c,depth:zc,stencil:Uc,"depth stencil":Vc};v.ext_srgb&&(W.srgba=Hc),v.ext_color_buffer_half_float&&(W.rgba16f=Xc,W.rgb16f=Yc),v.webgl_color_buffer_float&&(W.rgba32f=Wc);var K=[];Object.keys(W).forEach(function(de){var ge=W[de];K[ge]=de});var fe=0,ce={};function ye(de){this.id=fe++,this.refCount=1,this.renderbuffer=de,this.format=sl,this.width=0,this.height=0,te.profile&&(this.stats={size:0})}ye.prototype.decRef=function(){--this.refCount<=0&&Ee(this)};function Ee(de){var ge=de.renderbuffer;y(ge,"must not double destroy renderbuffer"),c.bindRenderbuffer(hi,null),c.deleteRenderbuffer(ge),de.renderbuffer=null,de.refCount=0,delete ce[de.id],X.renderbufferCount--}function xe(de,ge){var j=new ye(c.createRenderbuffer());ce[j.id]=j,X.renderbufferCount++;function Q(De,se){var ke=0,Re=0,Je=sl;if(typeof De=="object"&&De){var ne=De;if("shape"in ne){var ee=ne.shape;y(Array.isArray(ee)&&ee.length>=2,"invalid renderbuffer shape"),ke=ee[0]|0,Re=ee[1]|0}else"radius"in ne&&(ke=Re=ne.radius|0),"width"in ne&&(ke=ne.width|0),"height"in ne&&(Re=ne.height|0);"format"in ne&&(y.parameter(ne.format,W,"invalid renderbuffer format"),Je=W[ne.format])}else typeof De=="number"?(ke=De|0,typeof se=="number"?Re=se|0:Re=ke):De?y.raise("invalid arguments to renderbuffer constructor"):ke=Re=1;if(y(ke>0&&Re>0&&ke<=L.maxRenderbufferSize&&Re<=L.maxRenderbufferSize,"invalid renderbuffer size"),!(ke===j.width&&Re===j.height&&Je===j.format))return Q.width=j.width=ke,Q.height=j.height=Re,j.format=Je,c.bindRenderbuffer(hi,j.renderbuffer),c.renderbufferStorage(hi,Je,ke,Re),y(c.getError()===0,"invalid render buffer format"),te.profile&&(j.stats.size=Qc(j.format,j.width,j.height)),Q.format=K[j.format],Q}function ve(De,se){var ke=De|0,Re=se|0||ke;return ke===j.width&&Re===j.height||(y(ke>0&&Re>0&&ke<=L.maxRenderbufferSize&&Re<=L.maxRenderbufferSize,"invalid renderbuffer size"),Q.width=j.width=ke,Q.height=j.height=Re,c.bindRenderbuffer(hi,j.renderbuffer),c.renderbufferStorage(hi,j.format,ke,Re),y(c.getError()===0,"invalid render buffer format"),te.profile&&(j.stats.size=Qc(j.format,j.width,j.height))),Q}return Q(de,ge),Q.resize=ve,Q._reglType="renderbuffer",Q._renderbuffer=j,te.profile&&(Q.stats=j.stats),Q.destroy=function(){j.decRef()},Q}te.profile&&(X.getTotalRenderbufferSize=function(){var de=0;return Object.keys(ce).forEach(function(ge){de+=ce[ge].stats.size}),de});function Te(){tr(ce).forEach(function(de){de.renderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(hi,de.renderbuffer),c.renderbufferStorage(hi,de.format,de.width,de.height)}),c.bindRenderbuffer(hi,null)}return{create:xe,clear:function(){tr(ce).forEach(Ee)},restore:Te}},qr=36160,Bs=36161,Mi=3553,ul=34069,Kc=36064,cl=36096,qc=36128,Zc=33306,Jc=36053,eh=36054,th=36055,nh=36057,rh=36061,ih=36193,ah=5121,oh=5126,ef=6407,tf=6408,lh=6402,sh=[ef,tf],$s=[];$s[tf]=4,$s[ef]=3;var io=[];io[ah]=1,io[oh]=4,io[ih]=2;var uh=32854,nf=32855,ch=36194,rf=33189,af=36168,Gs=34041,of=35907,fh=34836,ao=34842,dh=34843,mh=[uh,nf,ch,of,ao,dh,fh],fa={};fa[Jc]="complete",fa[eh]="incomplete attachment",fa[nh]="incomplete dimensions",fa[th]="incomplete, missing attachment",fa[rh]="unsupported";function hh(c,v,L,X,te,W){var K={cur:null,next:null,dirty:!1,setFBO:null},fe=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];v.ext_srgb&&ce.push("srgba"),v.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),v.webgl_color_buffer_float&&ce.push("rgba32f");var ye=["uint8"];v.oes_texture_half_float&&ye.push("half float","float16"),v.oes_texture_float&&ye.push("float","float32");function Ee(me,Ce,Le){this.target=me,this.texture=Ce,this.renderbuffer=Le;var ft=0,ot=0;Ce?(ft=Ce.width,ot=Ce.height):Le&&(ft=Le.width,ot=Le.height),this.width=ft,this.height=ot}function xe(me){me&&(me.texture&&me.texture._texture.decRef(),me.renderbuffer&&me.renderbuffer._renderbuffer.decRef())}function Te(me,Ce,Le){if(me)if(me.texture){var ft=me.texture._texture,ot=Math.max(1,ft.width),Oe=Math.max(1,ft.height);y(ot===Ce&&Oe===Le,"inconsistent width/height for supplied texture"),ft.refCount+=1}else{var Ie=me.renderbuffer._renderbuffer;y(Ie.width===Ce&&Ie.height===Le,"inconsistent width/height for renderbuffer"),Ie.refCount+=1}}function de(me,Ce){Ce&&(Ce.texture?c.framebufferTexture2D(qr,me,Ce.target,Ce.texture._texture.texture,0):c.framebufferRenderbuffer(qr,me,Bs,Ce.renderbuffer._renderbuffer.renderbuffer))}function ge(me){var Ce=Mi,Le=null,ft=null,ot=me;typeof me=="object"&&(ot=me.data,"target"in me&&(Ce=me.target|0)),y.type(ot,"function","invalid attachment data");var Oe=ot._reglType;return Oe==="texture2d"?(Le=ot,y(Ce===Mi)):Oe==="textureCube"?(Le=ot,y(Ce>=ul&&Ce<ul+6,"invalid cube map target")):Oe==="renderbuffer"?(ft=ot,Ce=Bs):y.raise("invalid regl object for attachment"),new Ee(Ce,Le,ft)}function j(me,Ce,Le,ft,ot){if(Le){var Oe=X.create2D({width:me,height:Ce,format:ft,type:ot});return Oe._texture.refCount=0,new Ee(Mi,Oe,null)}else{var Ie=te.create({width:me,height:Ce,format:ft});return Ie._renderbuffer.refCount=0,new Ee(Bs,null,Ie)}}function Q(me){return me&&(me.texture||me.renderbuffer)}function ve(me,Ce,Le){me&&(me.texture?me.texture.resize(Ce,Le):me.renderbuffer&&me.renderbuffer.resize(Ce,Le),me.width=Ce,me.height=Le)}var De=0,se={};function ke(){this.id=De++,se[this.id]=this,this.framebuffer=c.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Re(me){me.colorAttachments.forEach(xe),xe(me.depthAttachment),xe(me.stencilAttachment),xe(me.depthStencilAttachment)}function Je(me){var Ce=me.framebuffer;y(Ce,"must not double destroy framebuffer"),c.deleteFramebuffer(Ce),me.framebuffer=null,W.framebufferCount--,delete se[me.id]}function ne(me){var Ce;c.bindFramebuffer(qr,me.framebuffer);var Le=me.colorAttachments;for(Ce=0;Ce<Le.length;++Ce)de(Kc+Ce,Le[Ce]);for(Ce=Le.length;Ce<L.maxColorAttachments;++Ce)c.framebufferTexture2D(qr,Kc+Ce,Mi,null,0);c.framebufferTexture2D(qr,Zc,Mi,null,0),c.framebufferTexture2D(qr,cl,Mi,null,0),c.framebufferTexture2D(qr,qc,Mi,null,0),de(cl,me.depthAttachment),de(qc,me.stencilAttachment),de(Zc,me.depthStencilAttachment);var ft=c.checkFramebufferStatus(qr);!c.isContextLost()&&ft!==Jc&&y.raise("framebuffer configuration not supported, status = "+fa[ft]),c.bindFramebuffer(qr,K.next?K.next.framebuffer:null),K.cur=K.next,c.getError()}function ee(me,Ce){var Le=new ke;W.framebufferCount++;function ft(Oe,Ie){var nt;y(K.next!==Le,"can not update framebuffer which is currently in use");var dt=0,Tt=0,nn=!0,un=!0,Ct=null,Cn=!0,Jt="rgba",wn="uint8",Ln=1,Rn=null,Fn=null,zn=null,pn=!1;if(typeof Oe=="number")dt=Oe|0,Tt=Ie|0||dt;else if(!Oe)dt=Tt=1;else{y.type(Oe,"object","invalid arguments for framebuffer");var gt=Oe;if("shape"in gt){var Un=gt.shape;y(Array.isArray(Un)&&Un.length>=2,"invalid shape for framebuffer"),dt=Un[0],Tt=Un[1]}else"radius"in gt&&(dt=Tt=gt.radius),"width"in gt&&(dt=gt.width),"height"in gt&&(Tt=gt.height);("color"in gt||"colors"in gt)&&(Ct=gt.color||gt.colors,Array.isArray(Ct)&&y(Ct.length===1||v.webgl_draw_buffers,"multiple render targets not supported")),Ct||("colorCount"in gt&&(Ln=gt.colorCount|0,y(Ln>0,"invalid color buffer count")),"colorTexture"in gt&&(Cn=!!gt.colorTexture,Jt="rgba4"),"colorType"in gt&&(wn=gt.colorType,Cn?(y(v.oes_texture_float||!(wn==="float"||wn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),y(v.oes_texture_half_float||!(wn==="half float"||wn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):wn==="half float"||wn==="float16"?(y(v.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Jt="rgba16f"):(wn==="float"||wn==="float32")&&(y(v.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Jt="rgba32f"),y.oneOf(wn,ye,"invalid color type")),"colorFormat"in gt&&(Jt=gt.colorFormat,fe.indexOf(Jt)>=0?Cn=!0:ce.indexOf(Jt)>=0?Cn=!1:y.optional(function(){Cn?y.oneOf(gt.colorFormat,fe,"invalid color format for texture"):y.oneOf(gt.colorFormat,ce,"invalid color format for renderbuffer")}))),("depthTexture"in gt||"depthStencilTexture"in gt)&&(pn=!!(gt.depthTexture||gt.depthStencilTexture),y(!pn||v.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in gt&&(typeof gt.depth=="boolean"?nn=gt.depth:(Rn=gt.depth,un=!1)),"stencil"in gt&&(typeof gt.stencil=="boolean"?un=gt.stencil:(Fn=gt.stencil,nn=!1)),"depthStencil"in gt&&(typeof gt.depthStencil=="boolean"?nn=un=gt.depthStencil:(zn=gt.depthStencil,nn=!1,un=!1))}var $t=null,tt=null,bt=null,kt=null;if(Array.isArray(Ct))$t=Ct.map(ge);else if(Ct)$t=[ge(Ct)];else for($t=new Array(Ln),nt=0;nt<Ln;++nt)$t[nt]=j(dt,Tt,Cn,Jt,wn);y(v.webgl_draw_buffers||$t.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),y($t.length<=L.maxColorAttachments,"too many color attachments, not supported"),dt=dt||$t[0].width,Tt=Tt||$t[0].height,Rn?tt=ge(Rn):nn&&!un&&(tt=j(dt,Tt,pn,"depth","uint32")),Fn?bt=ge(Fn):un&&!nn&&(bt=j(dt,Tt,!1,"stencil","uint8")),zn?kt=ge(zn):!Rn&&!Fn&&un&&nn&&(kt=j(dt,Tt,pn,"depth stencil","depth stencil")),y(!!Rn+!!Fn+!!zn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var vn=null;for(nt=0;nt<$t.length;++nt)if(Te($t[nt],dt,Tt),y(!$t[nt]||$t[nt].texture&&sh.indexOf($t[nt].texture._texture.format)>=0||$t[nt].renderbuffer&&mh.indexOf($t[nt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+nt+" is invalid"),$t[nt]&&$t[nt].texture){var vi=$s[$t[nt].texture._texture.format]*io[$t[nt].texture._texture.type];vn===null?vn=vi:y(vn===vi,"all color attachments much have the same number of bits per pixel.")}return Te(tt,dt,Tt),y(!tt||tt.texture&&tt.texture._texture.format===lh||tt.renderbuffer&&tt.renderbuffer._renderbuffer.format===rf,"invalid depth attachment for framebuffer object"),Te(bt,dt,Tt),y(!bt||bt.renderbuffer&&bt.renderbuffer._renderbuffer.format===af,"invalid stencil attachment for framebuffer object"),Te(kt,dt,Tt),y(!kt||kt.texture&&kt.texture._texture.format===Gs||kt.renderbuffer&&kt.renderbuffer._renderbuffer.format===Gs,"invalid depth-stencil attachment for framebuffer object"),Re(Le),Le.width=dt,Le.height=Tt,Le.colorAttachments=$t,Le.depthAttachment=tt,Le.stencilAttachment=bt,Le.depthStencilAttachment=kt,ft.color=$t.map(Q),ft.depth=Q(tt),ft.stencil=Q(bt),ft.depthStencil=Q(kt),ft.width=Le.width,ft.height=Le.height,ne(Le),ft}function ot(Oe,Ie){y(K.next!==Le,"can not resize a framebuffer which is currently in use");var nt=Math.max(Oe|0,1),dt=Math.max(Ie|0||nt,1);if(nt===Le.width&&dt===Le.height)return ft;for(var Tt=Le.colorAttachments,nn=0;nn<Tt.length;++nn)ve(Tt[nn],nt,dt);return ve(Le.depthAttachment,nt,dt),ve(Le.stencilAttachment,nt,dt),ve(Le.depthStencilAttachment,nt,dt),Le.width=ft.width=nt,Le.height=ft.height=dt,ne(Le),ft}return ft(me,Ce),r(ft,{resize:ot,_reglType:"framebuffer",_framebuffer:Le,destroy:function(){Je(Le),Re(Le)},use:function(Oe){K.setFBO({framebuffer:ft},Oe)}})}function Ue(me){var Ce=Array(6);function Le(ot){var Oe;y(Ce.indexOf(K.next)<0,"can not update framebuffer which is currently in use");var Ie={color:null},nt=0,dt=null,Tt="rgba",nn="uint8",un=1;if(typeof ot=="number")nt=ot|0;else if(!ot)nt=1;else{y.type(ot,"object","invalid arguments for framebuffer");var Ct=ot;if("shape"in Ct){var Cn=Ct.shape;y(Array.isArray(Cn)&&Cn.length>=2,"invalid shape for framebuffer"),y(Cn[0]===Cn[1],"cube framebuffer must be square"),nt=Cn[0]}else"radius"in Ct&&(nt=Ct.radius|0),"width"in Ct?(nt=Ct.width|0,"height"in Ct&&y(Ct.height===nt,"must be square")):"height"in Ct&&(nt=Ct.height|0);("color"in Ct||"colors"in Ct)&&(dt=Ct.color||Ct.colors,Array.isArray(dt)&&y(dt.length===1||v.webgl_draw_buffers,"multiple render targets not supported")),dt||("colorCount"in Ct&&(un=Ct.colorCount|0,y(un>0,"invalid color buffer count")),"colorType"in Ct&&(y.oneOf(Ct.colorType,ye,"invalid color type"),nn=Ct.colorType),"colorFormat"in Ct&&(Tt=Ct.colorFormat,y.oneOf(Ct.colorFormat,fe,"invalid color format for texture"))),"depth"in Ct&&(Ie.depth=Ct.depth),"stencil"in Ct&&(Ie.stencil=Ct.stencil),"depthStencil"in Ct&&(Ie.depthStencil=Ct.depthStencil)}var Jt;if(dt)if(Array.isArray(dt))for(Jt=[],Oe=0;Oe<dt.length;++Oe)Jt[Oe]=dt[Oe];else Jt=[dt];else{Jt=Array(un);var wn={radius:nt,format:Tt,type:nn};for(Oe=0;Oe<un;++Oe)Jt[Oe]=X.createCube(wn)}for(Ie.color=Array(Jt.length),Oe=0;Oe<Jt.length;++Oe){var Ln=Jt[Oe];y(typeof Ln=="function"&&Ln._reglType==="textureCube","invalid cube map"),nt=nt||Ln.width,y(Ln.width===nt&&Ln.height===nt,"invalid cube map shape"),Ie.color[Oe]={target:ul,data:Jt[Oe]}}for(Oe=0;Oe<6;++Oe){for(var Rn=0;Rn<Jt.length;++Rn)Ie.color[Rn].target=ul+Oe;Oe>0&&(Ie.depth=Ce[0].depth,Ie.stencil=Ce[0].stencil,Ie.depthStencil=Ce[0].depthStencil),Ce[Oe]?Ce[Oe](Ie):Ce[Oe]=ee(Ie)}return r(Le,{width:nt,height:nt,color:Jt})}function ft(ot){var Oe,Ie=ot|0;if(y(Ie>0&&Ie<=L.maxCubeMapSize,"invalid radius for cube fbo"),Ie===Le.width)return Le;var nt=Le.color;for(Oe=0;Oe<nt.length;++Oe)nt[Oe].resize(Ie);for(Oe=0;Oe<6;++Oe)Ce[Oe].resize(Ie);return Le.width=Le.height=Ie,Le}return Le(me),r(Le,{faces:Ce,resize:ft,_reglType:"framebufferCube",destroy:function(){Ce.forEach(function(ot){ot.destroy()})}})}function Ae(){K.cur=null,K.next=null,K.dirty=!0,tr(se).forEach(function(me){me.framebuffer=c.createFramebuffer(),ne(me)})}return r(K,{getFramebuffer:function(me){if(typeof me=="function"&&me._reglType==="framebuffer"){var Ce=me._framebuffer;if(Ce instanceof ke)return Ce}return null},create:ee,createCube:Ue,clear:function(){tr(se).forEach(Je)},restore:Ae})}var ph=5126,s=34962,D=34963,z=["attributes","elements","offset","count","primitive","instances"];function ie(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ph,this.offset=0,this.stride=0,this.divisor=0}function be(c,v,L,X,te,W,K){for(var fe=L.maxAttributes,ce=new Array(fe),ye=0;ye<fe;++ye)ce[ye]=new ie;var Ee=0,xe={},Te={Record:ie,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:ge()?Re:function(){},createVAO:Je,getVAO:Q,destroyBuffer:de,setVAO:ge()?ve:De,clear:ge()?se:function(){}};function de(ne){for(var ee=0;ee<ce.length;++ee){var Ue=ce[ee];Ue.buffer===ne&&(c.disableVertexAttribArray(ee),Ue.buffer=null)}}function ge(){return v.oes_vertex_array_object}function j(){return v.angle_instanced_arrays}function Q(ne){return typeof ne=="function"&&ne._vao?ne._vao:null}function ve(ne){if(ne!==Te.currentVAO){var ee=ge();ne?ee.bindVertexArrayOES(ne.vao):ee.bindVertexArrayOES(null),Te.currentVAO=ne}}function De(ne){if(ne!==Te.currentVAO){if(ne)ne.bindAttrs();else{for(var ee=j(),Ue=0;Ue<ce.length;++Ue){var Ae=ce[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),Ae.buffer.bind(),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offfset),ee&&Ae.divisor&&ee.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}K.elements?c.bindBuffer(D,K.elements.buffer.buffer):c.bindBuffer(D,null)}Te.currentVAO=ne}}function se(){tr(xe).forEach(function(ne){ne.destroy()})}function ke(){this.id=++Ee,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var ne=ge();ne?this.vao=ne.createVertexArrayOES():this.vao=null,xe[this.id]=this,this.buffers=[]}ke.prototype.bindAttrs=function(){for(var ne=j(),ee=this.attributes,Ue=0;Ue<ee.length;++Ue){var Ae=ee[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),c.bindBuffer(s,Ae.buffer.buffer),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offset),ne&&Ae.divisor&&ne.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}for(var me=ee.length;me<fe;++me)c.disableVertexAttribArray(me);var Ce=W.getElements(this.elements);Ce?c.bindBuffer(D,Ce.buffer.buffer):c.bindBuffer(D,null)},ke.prototype.refresh=function(){var ne=ge();ne&&(ne.bindVertexArrayOES(this.vao),this.bindAttrs(),Te.currentVAO=null,ne.bindVertexArrayOES(null))},ke.prototype.destroy=function(){if(this.vao){var ne=ge();this===Te.currentVAO&&(Te.currentVAO=null,ne.bindVertexArrayOES(null)),ne.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),xe[this.id]&&(delete xe[this.id],X.vaoCount-=1)};function Re(){var ne=ge();ne&&tr(xe).forEach(function(ee){ee.refresh()})}function Je(ne){var ee=new ke;X.vaoCount+=1;function Ue(Ae){var me;if(Array.isArray(Ae))me=Ae,ee.elements&&ee.ownsElements&&ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1,ee.offset=0,ee.count=0,ee.instances=-1,ee.primitive=4;else{if(y(typeof Ae=="object","invalid arguments for create vao"),y("attributes"in Ae,"must specify attributes for vao"),Ae.elements){var Ce=Ae.elements;ee.ownsElements?typeof Ce=="function"&&Ce._reglType==="elements"?(ee.elements.destroy(),ee.ownsElements=!1):(ee.elements(Ce),ee.ownsElements=!1):W.getElements(Ae.elements)?(ee.elements=Ae.elements,ee.ownsElements=!1):(ee.elements=W.create(Ae.elements),ee.ownsElements=!0)}else ee.elements=null,ee.ownsElements=!1;me=Ae.attributes,ee.offset=0,ee.count=-1,ee.instances=-1,ee.primitive=4,ee.elements&&(ee.count=ee.elements._elements.vertCount,ee.primitive=ee.elements._elements.primType),"offset"in Ae&&(ee.offset=Ae.offset|0),"count"in Ae&&(ee.count=Ae.count|0),"instances"in Ae&&(ee.instances=Ae.instances|0),"primitive"in Ae&&(y(Ae.primitive in di,"bad primitive type: "+Ae.primitive),ee.primitive=di[Ae.primitive]),y.optional(()=>{for(var nn=Object.keys(Ae),un=0;un<nn.length;++un)y(z.indexOf(nn[un])>=0,'invalid option for vao: "'+nn[un]+'" valid options are '+z)}),y(Array.isArray(me),"attributes must be an array")}y(me.length<fe,"too many attributes"),y(me.length>0,"must specify at least one attribute");var Le={},ft=ee.attributes;ft.length=me.length;for(var ot=0;ot<me.length;++ot){var Oe=me[ot],Ie=ft[ot]=new ie,nt=Oe.data||Oe;if(Array.isArray(nt)||n(nt)||cr(nt)){var dt;ee.buffers[ot]&&(dt=ee.buffers[ot],n(nt)&&dt._buffer.byteLength>=nt.byteLength?dt.subdata(nt):(dt.destroy(),ee.buffers[ot]=null)),ee.buffers[ot]||(dt=ee.buffers[ot]=te.create(Oe,s,!1,!0)),Ie.buffer=te.getBuffer(dt),Ie.size=Ie.buffer.dimension|0,Ie.normalized=!1,Ie.type=Ie.buffer.dtype,Ie.offset=0,Ie.stride=0,Ie.divisor=0,Ie.state=1,Le[ot]=1}else te.getBuffer(Oe)?(Ie.buffer=te.getBuffer(Oe),Ie.size=Ie.buffer.dimension|0,Ie.normalized=!1,Ie.type=Ie.buffer.dtype,Ie.offset=0,Ie.stride=0,Ie.divisor=0,Ie.state=1):te.getBuffer(Oe.buffer)?(Ie.buffer=te.getBuffer(Oe.buffer),Ie.size=(+Oe.size||Ie.buffer.dimension)|0,Ie.normalized=!!Oe.normalized||!1,"type"in Oe?(y.parameter(Oe.type,ia,"invalid buffer type"),Ie.type=ia[Oe.type]):Ie.type=Ie.buffer.dtype,Ie.offset=(Oe.offset||0)|0,Ie.stride=(Oe.stride||0)|0,Ie.divisor=(Oe.divisor||0)|0,Ie.state=1,y(Ie.size>=1&&Ie.size<=4,"size must be between 1 and 4"),y(Ie.offset>=0,"invalid offset"),y(Ie.stride>=0&&Ie.stride<=255,"stride must be between 0 and 255"),y(Ie.divisor>=0,"divisor must be positive"),y(!Ie.divisor||!!v.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Oe?(y(ot>0,"first attribute must not be a constant"),Ie.x=+Oe.x||0,Ie.y=+Oe.y||0,Ie.z=+Oe.z||0,Ie.w=+Oe.w||0,Ie.state=2):y(!1,"invalid attribute spec for location "+ot)}for(var Tt=0;Tt<ee.buffers.length;++Tt)!Le[Tt]&&ee.buffers[Tt]&&(ee.buffers[Tt].destroy(),ee.buffers[Tt]=null);return ee.refresh(),Ue}return Ue.destroy=function(){for(var Ae=0;Ae<ee.buffers.length;++Ae)ee.buffers[Ae]&&ee.buffers[Ae].destroy();ee.buffers.length=0,ee.ownsElements&&(ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1),ee.destroy()},Ue._vao=ee,Ue._reglType="vao",Ue(ne)}return Te}var Be=35632,He=35633,mt=35718,Bt=35721;function Mt(c,v,L,X){var te={},W={};function K(j,Q,ve,De){this.name=j,this.id=Q,this.location=ve,this.info=De}function fe(j,Q){for(var ve=0;ve<j.length;++ve)if(j[ve].id===Q.id){j[ve].location=Q.location;return}j.push(Q)}function ce(j,Q,ve){var De=j===Be?te:W,se=De[Q];if(!se){var ke=v.str(Q);se=c.createShader(j),c.shaderSource(se,ke),c.compileShader(se),y.shaderError(c,se,ke,j,ve),De[Q]=se}return se}var ye={},Ee=[],xe=0;function Te(j,Q){this.id=xe++,this.fragId=j,this.vertId=Q,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,X.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function de(j,Q,ve){var De,se,ke=ce(Be,j.fragId),Re=ce(He,j.vertId),Je=j.program=c.createProgram();if(c.attachShader(Je,ke),c.attachShader(Je,Re),ve)for(De=0;De<ve.length;++De){var ne=ve[De];c.bindAttribLocation(Je,ne[0],ne[1])}c.linkProgram(Je),y.linkError(c,Je,v.str(j.fragId),v.str(j.vertId),Q);var ee=c.getProgramParameter(Je,mt);X.profile&&(j.stats.uniformsCount=ee);var Ue=j.uniforms;for(De=0;De<ee;++De)if(se=c.getActiveUniform(Je,De),se){if(se.size>1)for(var Ae=0;Ae<se.size;++Ae){var me=se.name.replace("[0]","["+Ae+"]");fe(Ue,new K(me,v.id(me),c.getUniformLocation(Je,me),se))}var Ce=se.name;se.size>1&&(Ce=Ce.replace("[0]","")),fe(Ue,new K(Ce,v.id(Ce),c.getUniformLocation(Je,Ce),se))}var Le=c.getProgramParameter(Je,Bt);X.profile&&(j.stats.attributesCount=Le);var ft=j.attributes;for(De=0;De<Le;++De)se=c.getActiveAttrib(Je,De),se&&fe(ft,new K(se.name,v.id(se.name),c.getAttribLocation(Je,se.name),se))}X.profile&&(L.getMaxUniformsCount=function(){var j=0;return Ee.forEach(function(Q){Q.stats.uniformsCount>j&&(j=Q.stats.uniformsCount)}),j},L.getMaxAttributesCount=function(){var j=0;return Ee.forEach(function(Q){Q.stats.attributesCount>j&&(j=Q.stats.attributesCount)}),j});function ge(){te={},W={};for(var j=0;j<Ee.length;++j)de(Ee[j],null,Ee[j].attributes.map(function(Q){return[Q.location,Q.name]}))}return{clear:function(){var j=c.deleteShader.bind(c);tr(te).forEach(j),te={},tr(W).forEach(j),W={},Ee.forEach(function(Q){c.deleteProgram(Q.program)}),Ee.length=0,ye={},L.shaderCount=0},program:function(j,Q,ve,De){y.command(j>=0,"missing vertex shader",ve),y.command(Q>=0,"missing fragment shader",ve);var se=ye[Q];se||(se=ye[Q]={});var ke=se[j];if(ke&&(ke.refCount++,!De))return ke;var Re=new Te(Q,j);return L.shaderCount++,de(Re,ve,De),ke||(se[j]=Re),Ee.push(Re),r(Re,{destroy:function(){if(Re.refCount--,Re.refCount<=0){c.deleteProgram(Re.program);var Je=Ee.indexOf(Re);Ee.splice(Je,1),L.shaderCount--}se[Re.vertId].refCount<=0&&(c.deleteShader(W[Re.vertId]),delete W[Re.vertId],delete ye[Re.fragId][Re.vertId]),Object.keys(ye[Re.fragId]).length||(c.deleteShader(te[Re.fragId]),delete te[Re.fragId],delete ye[Re.fragId])}})},restore:ge,shader:ce,frag:-1,vert:-1}}var _n=6408,Vt=5121,Ft=3333,lf=5126;function Q_(c,v,L,X,te,W,K){function fe(Ee){var xe;v.next===null?(y(te.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),xe=Vt):(y(v.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),xe=v.next.colorAttachments[0].texture._texture.type,y.optional(function(){W.oes_texture_float?(y(xe===Vt||xe===lf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),xe===lf&&y(K.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):y(xe===Vt,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Te=0,de=0,ge=X.framebufferWidth,j=X.framebufferHeight,Q=null;n(Ee)?Q=Ee:Ee&&(y.type(Ee,"object","invalid arguments to regl.read()"),Te=Ee.x|0,de=Ee.y|0,y(Te>=0&&Te<X.framebufferWidth,"invalid x offset for regl.read"),y(de>=0&&de<X.framebufferHeight,"invalid y offset for regl.read"),ge=(Ee.width||X.framebufferWidth-Te)|0,j=(Ee.height||X.framebufferHeight-de)|0,Q=Ee.data||null),Q&&(xe===Vt?y(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):xe===lf&&y(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),y(ge>0&&ge+Te<=X.framebufferWidth,"invalid width for read pixels"),y(j>0&&j+de<=X.framebufferHeight,"invalid height for read pixels"),L();var ve=ge*j*4;return Q||(xe===Vt?Q=new Uint8Array(ve):xe===lf&&(Q=Q||new Float32Array(ve))),y.isTypedArray(Q,"data buffer for regl.read() must be a typedarray"),y(Q.byteLength>=ve,"data buffer for regl.read() too small"),c.pixelStorei(Ft,4),c.readPixels(Te,de,ge,j,_n,xe,Q),Q}function ce(Ee){var xe;return v.setFBO({framebuffer:Ee.framebuffer},function(){xe=fe(Ee)}),xe}function ye(Ee){return!Ee||!("framebuffer"in Ee)?fe(Ee):ce(Ee)}return ye}function fl(c){return Array.prototype.slice.call(c)}function dl(c){return fl(c).join("")}function K_(){var c=0,v=[],L=[];function X(xe){for(var Te=0;Te<L.length;++Te)if(L[Te]===xe)return v[Te];var de="g"+c++;return v.push(de),L.push(xe),de}function te(){var xe=[];function Te(){xe.push.apply(xe,fl(arguments))}var de=[];function ge(){var j="v"+c++;return de.push(j),arguments.length>0&&(xe.push(j,"="),xe.push.apply(xe,fl(arguments)),xe.push(";")),j}return r(Te,{def:ge,toString:function(){return dl([de.length>0?"var "+de.join(",")+";":"",dl(xe)])}})}function W(){var xe=te(),Te=te(),de=xe.toString,ge=Te.toString;function j(Q,ve){Te(Q,ve,"=",xe.def(Q,ve),";")}return r(function(){xe.apply(xe,fl(arguments))},{def:xe.def,entry:xe,exit:Te,save:j,set:function(Q,ve,De){j(Q,ve),xe(Q,ve,"=",De,";")},toString:function(){return de()+ge()}})}function K(){var xe=dl(arguments),Te=W(),de=W(),ge=Te.toString,j=de.toString;return r(Te,{then:function(){return Te.apply(Te,fl(arguments)),this},else:function(){return de.apply(de,fl(arguments)),this},toString:function(){var Q=j();return Q&&(Q="else{"+Q+"}"),dl(["if(",xe,"){",ge(),"}",Q])}})}var fe=te(),ce={};function ye(xe,Te){var de=[];function ge(){var se="a"+de.length;return de.push(se),se}Te=Te||0;for(var j=0;j<Te;++j)ge();var Q=W(),ve=Q.toString,De=ce[xe]=r(Q,{arg:ge,toString:function(){return dl(["function(",de.join(),"){",ve(),"}"])}});return De}function Ee(){var xe=['"use strict";',fe,"return {"];Object.keys(ce).forEach(function(ge){xe.push('"',ge,'":',ce[ge].toString(),",")}),xe.push("}");var Te=dl(xe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),de=Function.apply(null,v.concat(Te));return de.apply(null,L)}return{global:fe,link:X,block:te,proc:ye,scope:W,cond:K,compile:Ee}}var ml="xyzw".split(""),eg=5121,hl=1,vh=2,gh=0,yh=1,xh=2,Eh=3,sf=4,tg=5,ng=6,rg="dither",ig="blend.enable",ag="blend.color",_h="blend.equation",Sh="blend.func",og="depth.enable",lg="depth.func",sg="depth.range",ug="depth.mask",wh="colorMask",cg="cull.enable",fg="cull.face",Th="frontFace",bh="lineWidth",dg="polygonOffset.enable",Ah="polygonOffset.offset",mg="sample.alpha",hg="sample.enable",Ch="sample.coverage",pg="stencil.enable",vg="stencil.mask",Lh="stencil.func",Rh="stencil.opFront",zs="stencil.opBack",gg="scissor.enable",uf="scissor.box",Fi="viewport",Us="profile",oo="framebuffer",Vs="vert",Hs="frag",lo="elements",so="primitive",uo="count",cf="offset",ff="instances",Ws="vao",Oh="Width",Ph="Height",pl=oo+Oh,vl=oo+Ph,q_=Fi+Oh,Z_=Fi+Ph,yg="drawingBuffer",xg=yg+Oh,Eg=yg+Ph,J_=[Sh,_h,Lh,Rh,zs,Ch,Fi,uf,Ah],gl=34962,Nh=34963,eS=35632,tS=35633,_g=3553,nS=34067,rS=2884,iS=3042,aS=3024,oS=2960,lS=2929,sS=3089,uS=32823,cS=32926,fS=32928,kh=5126,df=35664,mf=35665,hf=35666,Ih=5124,pf=35667,vf=35668,gf=35669,Dh=35670,yf=35671,xf=35672,Ef=35673,Xs=35674,Ys=35675,Qs=35676,Ks=35678,qs=35680,Mh=4,Zs=1028,co=1029,Sg=2304,Fh=2305,dS=32775,mS=32776,hS=519,da=7680,wg=0,Tg=1,bg=32774,pS=513,Ag=36160,vS=36064,pi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Cg=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],yl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ma={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Lg={frag:eS,vert:tS},jh={cw:Sg,ccw:Fh};function _f(c){return Array.isArray(c)||n(c)||cr(c)}function Rg(c){return c.sort(function(v,L){return v===Fi?-1:L===Fi?1:v<L?-1:1})}function Nn(c,v,L,X){this.thisDep=c,this.contextDep=v,this.propDep=L,this.append=X}function ha(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function Sn(c){return new Nn(!1,!1,!1,c)}function fr(c,v){var L=c.type;if(L===gh){var X=c.data.length;return new Nn(!0,X>=1,X>=2,v)}else if(L===sf){var te=c.data;return new Nn(te.thisDep,te.contextDep,te.propDep,v)}else{if(L===tg)return new Nn(!1,!1,!1,v);if(L===ng){for(var W=!1,K=!1,fe=!1,ce=0;ce<c.data.length;++ce){var ye=c.data[ce];if(ye.type===yh)fe=!0;else if(ye.type===xh)K=!0;else if(ye.type===Eh)W=!0;else if(ye.type===gh){W=!0;var Ee=ye.data;Ee>=1&&(K=!0),Ee>=2&&(fe=!0)}else ye.type===sf&&(W=W||ye.data.thisDep,K=K||ye.data.contextDep,fe=fe||ye.data.propDep)}return new Nn(W,K,fe,v)}else return new Nn(L===Eh,L===xh,L===yh,v)}}var Og=new Nn(!1,!1,!1,function(){});function gS(c,v,L,X,te,W,K,fe,ce,ye,Ee,xe,Te,de,ge){var j=ye.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};L.ext_blend_minmax&&(Q.min=dS,Q.max=mS);var ve=L.angle_instanced_arrays,De=L.webgl_draw_buffers,se=L.oes_vertex_array_object,ke={dirty:!0,profile:ge.profile},Re={},Je=[],ne={},ee={};function Ue(E){return E.replace(".","_")}function Ae(E,m,P){var F=Ue(E);Je.push(E),Re[F]=ke[F]=!!P,ne[F]=m}function me(E,m,P){var F=Ue(E);Je.push(E),Array.isArray(P)?(ke[F]=P.slice(),Re[F]=P.slice()):ke[F]=Re[F]=P,ee[F]=m}Ae(rg,aS),Ae(ig,iS),me(ag,"blendColor",[0,0,0,0]),me(_h,"blendEquationSeparate",[bg,bg]),me(Sh,"blendFuncSeparate",[Tg,wg,Tg,wg]),Ae(og,lS,!0),me(lg,"depthFunc",pS),me(sg,"depthRange",[0,1]),me(ug,"depthMask",!0),me(wh,wh,[!0,!0,!0,!0]),Ae(cg,rS),me(fg,"cullFace",co),me(Th,Th,Fh),me(bh,bh,1),Ae(dg,uS),me(Ah,"polygonOffset",[0,0]),Ae(mg,cS),Ae(hg,fS),me(Ch,"sampleCoverage",[1,!1]),Ae(pg,oS),me(vg,"stencilMask",-1),me(Lh,"stencilFunc",[hS,0,-1]),me(Rh,"stencilOpSeparate",[Zs,da,da,da]),me(zs,"stencilOpSeparate",[co,da,da,da]),Ae(gg,sS),me(uf,"scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]),me(Fi,Fi,[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ce={gl:c,context:Te,strings:v,next:Re,current:ke,draw:xe,elements:W,buffer:te,shader:Ee,attributes:ye.state,vao:ye,uniforms:ce,framebuffer:fe,extensions:L,timer:de,isBufferArgs:_f},Le={primTypes:di,compareFuncs:yl,blendFuncs:pi,blendEquations:Q,stencilOps:ma,glTypes:ia,orientationType:jh};y.optional(function(){Ce.isArrayLike=Zt}),De&&(Le.backBuffer=[co],Le.drawBuffer=hn(X.maxDrawbuffers,function(E){return E===0?[0]:hn(E,function(m){return vS+m})}));var ft=0;function ot(){var E=K_(),m=E.link,P=E.global;E.id=ft++,E.batchId="0";var F=m(Ce),B=E.shared={props:"a0"};Object.keys(Ce).forEach(function(A){B[A]=P.def(F,".",A)}),y.optional(function(){E.CHECK=m(y),E.commandStr=y.guessCommand(),E.command=m(E.commandStr),E.assert=function(A,S,U){A("if(!(",S,"))",this.CHECK,".commandRaise(",m(U),",",this.command,");")},Le.invalidBlendCombinations=Cg});var k=E.next={},N=E.current={};Object.keys(ee).forEach(function(A){Array.isArray(ke[A])&&(k[A]=P.def(B.next,".",A),N[A]=P.def(B.current,".",A))});var M=E.constants={};Object.keys(Le).forEach(function(A){M[A]=P.def(JSON.stringify(Le[A]))}),E.invoke=function(A,S){switch(S.type){case gh:var U=["this",B.context,B.props,E.batchId];return A.def(m(S.data),".call(",U.slice(0,Math.max(S.data.length+1,4)),")");case yh:return A.def(B.props,S.data);case xh:return A.def(B.context,S.data);case Eh:return A.def("this",S.data);case sf:return S.data.append(E,A),S.data.ref;case tg:return S.data.toString();case ng:return S.data.map(function(G){return E.invoke(A,G)})}},E.attribCache={};var _={};return E.scopeAttrib=function(A){var S=v.id(A);if(S in _)return _[S];var U=ye.scope[S];U||(U=ye.scope[S]=new j);var G=_[S]=m(U);return G},E}function Oe(E){var m=E.static,P=E.dynamic,F;if(Us in m){var B=!!m[Us];F=Sn(function(N,M){return B}),F.enable=B}else if(Us in P){var k=P[Us];F=fr(k,function(N,M){return N.invoke(M,k)})}return F}function Ie(E,m){var P=E.static,F=E.dynamic;if(oo in P){var B=P[oo];return B?(B=fe.getFramebuffer(B),y.command(B,"invalid framebuffer object"),Sn(function(N,M){var _=N.link(B),A=N.shared;M.set(A.framebuffer,".next",_);var S=A.context;return M.set(S,"."+pl,_+".width"),M.set(S,"."+vl,_+".height"),_})):Sn(function(N,M){var _=N.shared;M.set(_.framebuffer,".next","null");var A=_.context;return M.set(A,"."+pl,A+"."+xg),M.set(A,"."+vl,A+"."+Eg),"null"})}else if(oo in F){var k=F[oo];return fr(k,function(N,M){var _=N.invoke(M,k),A=N.shared,S=A.framebuffer,U=M.def(S,".getFramebuffer(",_,")");y.optional(function(){N.assert(M,"!"+_+"||"+U,"invalid framebuffer object")}),M.set(S,".next",U);var G=A.context;return M.set(G,"."+pl,U+"?"+U+".width:"+G+"."+xg),M.set(G,"."+vl,U+"?"+U+".height:"+G+"."+Eg),U})}else return null}function nt(E,m,P){var F=E.static,B=E.dynamic;function k(_){if(_ in F){var A=F[_];y.commandType(A,"object","invalid "+_,P.commandStr);var S=!0,U=A.x|0,G=A.y|0,J,re;return"width"in A?(J=A.width|0,y.command(J>=0,"invalid "+_,P.commandStr)):S=!1,"height"in A?(re=A.height|0,y.command(re>=0,"invalid "+_,P.commandStr)):S=!1,new Nn(!S&&m&&m.thisDep,!S&&m&&m.contextDep,!S&&m&&m.propDep,function(Ze,$e){var oe=Ze.shared.context,Z=J;"width"in A||(Z=$e.def(oe,".",pl,"-",U));var Ye=re;return"height"in A||(Ye=$e.def(oe,".",vl,"-",G)),[U,G,Z,Ye]})}else if(_ in B){var we=B[_],at=fr(we,function(Ze,$e){var oe=Ze.invoke($e,we);y.optional(function(){Ze.assert($e,oe+"&&typeof "+oe+'==="object"',"invalid "+_)});var Z=Ze.shared.context,Ye=$e.def(oe,".x|0"),Ve=$e.def(oe,".y|0"),rt=$e.def('"width" in ',oe,"?",oe,".width|0:","(",Z,".",pl,"-",Ye,")"),Ut=$e.def('"height" in ',oe,"?",oe,".height|0:","(",Z,".",vl,"-",Ve,")");return y.optional(function(){Ze.assert($e,rt+">=0&&"+Ut+">=0","invalid "+_)}),[Ye,Ve,rt,Ut]});return m&&(at.thisDep=at.thisDep||m.thisDep,at.contextDep=at.contextDep||m.contextDep,at.propDep=at.propDep||m.propDep),at}else return m?new Nn(m.thisDep,m.contextDep,m.propDep,function(Ze,$e){var oe=Ze.shared.context;return[0,0,$e.def(oe,".",pl),$e.def(oe,".",vl)]}):null}var N=k(Fi);if(N){var M=N;N=new Nn(N.thisDep,N.contextDep,N.propDep,function(_,A){var S=M.append(_,A),U=_.shared.context;return A.set(U,"."+q_,S[2]),A.set(U,"."+Z_,S[3]),S})}return{viewport:N,scissor_box:k(uf)}}function dt(E,m){var P=E.static,F=typeof P[Hs]=="string"&&typeof P[Vs]=="string";if(F){if(Object.keys(m.dynamic).length>0)return null;var B=m.static,k=Object.keys(B);if(k.length>0&&typeof B[k[0]]=="number"){for(var N=[],M=0;M<k.length;++M)y(typeof B[k[M]]=="number","must specify all vertex attribute locations when using vaos"),N.push([B[k[M]]|0,k[M]]);return N}}return null}function Tt(E,m,P){var F=E.static,B=E.dynamic;function k(S){if(S in F){var U=v.id(F[S]);y.optional(function(){Ee.shader(Lg[S],U,y.guessCommand())});var G=Sn(function(){return U});return G.id=U,G}else if(S in B){var J=B[S];return fr(J,function(re,we){var at=re.invoke(we,J),Ze=we.def(re.shared.strings,".id(",at,")");return y.optional(function(){we(re.shared.shader,".shader(",Lg[S],",",Ze,",",re.command,");")}),Ze})}return null}var N=k(Hs),M=k(Vs),_=null,A;return ha(N)&&ha(M)?(_=Ee.program(M.id,N.id,null,P),A=Sn(function(S,U){return S.link(_)})):A=new Nn(N&&N.thisDep||M&&M.thisDep,N&&N.contextDep||M&&M.contextDep,N&&N.propDep||M&&M.propDep,function(S,U){var G=S.shared.shader,J;N?J=N.append(S,U):J=U.def(G,".",Hs);var re;M?re=M.append(S,U):re=U.def(G,".",Vs);var we=G+".program("+re+","+J;return y.optional(function(){we+=","+S.command}),U.def(we+")")}),{frag:N,vert:M,progVar:A,program:_}}function nn(E,m){var P=E.static,F=E.dynamic,B={},k=!1;function N(){if(Ws in P){var $e=P[Ws];return $e!==null&&ye.getVAO($e)===null&&($e=ye.createVAO($e)),k=!0,B.vao=$e,Sn(function(Z){var Ye=ye.getVAO($e);return Ye?Z.link(Ye):"null"})}else if(Ws in F){k=!0;var oe=F[Ws];return fr(oe,function(Z,Ye){var Ve=Z.invoke(Ye,oe);return Ye.def(Z.shared.vao+".getVAO("+Ve+")")})}return null}var M=N(),_=!1;function A(){if(lo in P){var $e=P[lo];if(B.elements=$e,_f($e)){var oe=B.elements=W.create($e,!0);$e=W.getElements(oe),_=!0}else $e&&($e=W.getElements($e),_=!0,y.command($e,"invalid elements",m.commandStr));var Z=Sn(function(Ve,rt){if($e){var Ut=Ve.link($e);return Ve.ELEMENTS=Ut,Ut}return Ve.ELEMENTS=null,null});return Z.value=$e,Z}else if(lo in F){_=!0;var Ye=F[lo];return fr(Ye,function(Ve,rt){var Ut=Ve.shared,Vn=Ut.isBufferArgs,mo=Ut.elements,ji=Ve.invoke(rt,Ye),gi=rt.def("null"),pa=rt.def(Vn,"(",ji,")"),ho=Ve.cond(pa).then(gi,"=",mo,".createStream(",ji,");").else(gi,"=",mo,".getElements(",ji,");");return y.optional(function(){Ve.assert(ho.else,"!"+ji+"||"+gi,"invalid elements")}),rt.entry(ho),rt.exit(Ve.cond(pa).then(mo,".destroyStream(",gi,");")),Ve.ELEMENTS=gi,gi})}else if(k)return new Nn(M.thisDep,M.contextDep,M.propDep,function(Ve,rt){return rt.def(Ve.shared.vao+".currentVAO?"+Ve.shared.elements+".getElements("+Ve.shared.vao+".currentVAO.elements):null")});return null}var S=A();function U(){if(so in P){var $e=P[so];return B.primitive=$e,y.commandParameter($e,di,"invalid primitve",m.commandStr),Sn(function(Z,Ye){return di[$e]})}else if(so in F){var oe=F[so];return fr(oe,function(Z,Ye){var Ve=Z.constants.primTypes,rt=Z.invoke(Ye,oe);return y.optional(function(){Z.assert(Ye,rt+" in "+Ve,"invalid primitive, must be one of "+Object.keys(di))}),Ye.def(Ve,"[",rt,"]")})}else{if(_)return ha(S)?S.value?Sn(function(Z,Ye){return Ye.def(Z.ELEMENTS,".primType")}):Sn(function(){return Mh}):new Nn(S.thisDep,S.contextDep,S.propDep,function(Z,Ye){var Ve=Z.ELEMENTS;return Ye.def(Ve,"?",Ve,".primType:",Mh)});if(k)return new Nn(M.thisDep,M.contextDep,M.propDep,function(Z,Ye){return Ye.def(Z.shared.vao+".currentVAO?"+Z.shared.vao+".currentVAO.primitive:"+Mh)})}return null}function G($e,oe){if($e in P){var Z=P[$e]|0;return oe?B.offset=Z:B.instances=Z,y.command(!oe||Z>=0,"invalid "+$e,m.commandStr),Sn(function(Ve,rt){return oe&&(Ve.OFFSET=Z),Z})}else if($e in F){var Ye=F[$e];return fr(Ye,function(Ve,rt){var Ut=Ve.invoke(rt,Ye);return oe&&(Ve.OFFSET=Ut,y.optional(function(){Ve.assert(rt,Ut+">=0","invalid "+$e)})),Ut})}else if(oe){if(_)return Sn(function(Ve,rt){return Ve.OFFSET=0,0});if(k)return new Nn(M.thisDep,M.contextDep,M.propDep,function(Ve,rt){return rt.def(Ve.shared.vao+".currentVAO?"+Ve.shared.vao+".currentVAO.offset:0")})}else if(k)return new Nn(M.thisDep,M.contextDep,M.propDep,function(Ve,rt){return rt.def(Ve.shared.vao+".currentVAO?"+Ve.shared.vao+".currentVAO.instances:-1")});return null}var J=G(cf,!0);function re(){if(uo in P){var $e=P[uo]|0;return B.count=$e,y.command(typeof $e=="number"&&$e>=0,"invalid vertex count",m.commandStr),Sn(function(){return $e})}else if(uo in F){var oe=F[uo];return fr(oe,function(rt,Ut){var Vn=rt.invoke(Ut,oe);return y.optional(function(){rt.assert(Ut,"typeof "+Vn+'==="number"&&'+Vn+">=0&&"+Vn+"===("+Vn+"|0)","invalid vertex count")}),Vn})}else if(_)if(ha(S)){if(S)return J?new Nn(J.thisDep,J.contextDep,J.propDep,function(rt,Ut){var Vn=Ut.def(rt.ELEMENTS,".vertCount-",rt.OFFSET);return y.optional(function(){rt.assert(Ut,Vn+">=0","invalid vertex offset/element buffer too small")}),Vn}):Sn(function(rt,Ut){return Ut.def(rt.ELEMENTS,".vertCount")});var Z=Sn(function(){return-1});return y.optional(function(){Z.MISSING=!0}),Z}else{var Ye=new Nn(S.thisDep||J.thisDep,S.contextDep||J.contextDep,S.propDep||J.propDep,function(rt,Ut){var Vn=rt.ELEMENTS;return rt.OFFSET?Ut.def(Vn,"?",Vn,".vertCount-",rt.OFFSET,":-1"):Ut.def(Vn,"?",Vn,".vertCount:-1")});return y.optional(function(){Ye.DYNAMIC=!0}),Ye}else if(k){var Ve=new Nn(M.thisDep,M.contextDep,M.propDep,function(rt,Ut){return Ut.def(rt.shared.vao,".currentVAO?",rt.shared.vao,".currentVAO.count:-1")});return Ve}return null}var we=U(),at=re(),Ze=G(ff,!1);return{elements:S,primitive:we,count:at,instances:Ze,offset:J,vao:M,vaoActive:k,elementsActive:_,static:B}}function un(E,m){var P=E.static,F=E.dynamic,B={};return Je.forEach(function(k){var N=Ue(k);function M(_,A){if(k in P){var S=_(P[k]);B[N]=Sn(function(){return S})}else if(k in F){var U=F[k];B[N]=fr(U,function(G,J){return A(G,J,G.invoke(J,U))})}}switch(k){case cg:case ig:case rg:case pg:case og:case gg:case dg:case mg:case hg:case ug:return M(function(_){return y.commandType(_,"boolean",k,m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="boolean"',"invalid flag "+k,_.commandStr)}),S});case lg:return M(function(_){return y.commandParameter(_,yl,"invalid "+k,m.commandStr),yl[_]},function(_,A,S){var U=_.constants.compareFuncs;return y.optional(function(){_.assert(A,S+" in "+U,"invalid "+k+", must be one of "+Object.keys(yl))}),A.def(U,"[",S,"]")});case sg:return M(function(_){return y.command(Zt(_)&&_.length===2&&typeof _[0]=="number"&&typeof _[1]=="number"&&_[0]<=_[1],"depth range is 2d array",m.commandStr),_},function(_,A,S){y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===2&&typeof "+S+'[0]==="number"&&typeof '+S+'[1]==="number"&&'+S+"[0]<="+S+"[1]","depth range must be a 2d array")});var U=A.def("+",S,"[0]"),G=A.def("+",S,"[1]");return[U,G]});case Sh:return M(function(_){y.commandType(_,"object","blend.func",m.commandStr);var A="srcRGB"in _?_.srcRGB:_.src,S="srcAlpha"in _?_.srcAlpha:_.src,U="dstRGB"in _?_.dstRGB:_.dst,G="dstAlpha"in _?_.dstAlpha:_.dst;return y.commandParameter(A,pi,N+".srcRGB",m.commandStr),y.commandParameter(S,pi,N+".srcAlpha",m.commandStr),y.commandParameter(U,pi,N+".dstRGB",m.commandStr),y.commandParameter(G,pi,N+".dstAlpha",m.commandStr),y.command(Cg.indexOf(A+", "+U)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+A+", "+U+")",m.commandStr),[pi[A],pi[U],pi[S],pi[G]]},function(_,A,S){var U=_.constants.blendFuncs;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid blend func, must be an object")});function G(oe,Z){var Ye=A.def('"',oe,Z,'" in ',S,"?",S,".",oe,Z,":",S,".",oe);return y.optional(function(){_.assert(A,Ye+" in "+U,"invalid "+k+"."+oe+Z+", must be one of "+Object.keys(pi))}),Ye}var J=G("src","RGB"),re=G("dst","RGB");y.optional(function(){var oe=_.constants.invalidBlendCombinations;_.assert(A,oe+".indexOf("+J+'+", "+'+re+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var we=A.def(U,"[",J,"]"),at=A.def(U,"[",G("src","Alpha"),"]"),Ze=A.def(U,"[",re,"]"),$e=A.def(U,"[",G("dst","Alpha"),"]");return[we,Ze,at,$e]});case _h:return M(function(_){if(typeof _=="string")return y.commandParameter(_,Q,"invalid "+k,m.commandStr),[Q[_],Q[_]];if(typeof _=="object")return y.commandParameter(_.rgb,Q,k+".rgb",m.commandStr),y.commandParameter(_.alpha,Q,k+".alpha",m.commandStr),[Q[_.rgb],Q[_.alpha]];y.commandRaise("invalid blend.equation",m.commandStr)},function(_,A,S){var U=_.constants.blendEquations,G=A.def(),J=A.def(),re=_.cond("typeof ",S,'==="string"');return y.optional(function(){function we(at,Ze,$e){_.assert(at,$e+" in "+U,"invalid "+Ze+", must be one of "+Object.keys(Q))}we(re.then,k,S),_.assert(re.else,S+"&&typeof "+S+'==="object"',"invalid "+k),we(re.else,k+".rgb",S+".rgb"),we(re.else,k+".alpha",S+".alpha")}),re.then(G,"=",J,"=",U,"[",S,"];"),re.else(G,"=",U,"[",S,".rgb];",J,"=",U,"[",S,".alpha];"),A(re),[G,J]});case ag:return M(function(_){return y.command(Zt(_)&&_.length===4,"blend.color must be a 4d array",m.commandStr),hn(4,function(A){return+_[A]})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","blend.color must be a 4d array")}),hn(4,function(U){return A.def("+",S,"[",U,"]")})});case vg:return M(function(_){return y.commandType(_,"number",N,m.commandStr),_|0},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"',"invalid stencil.mask")}),A.def(S,"|0")});case Lh:return M(function(_){y.commandType(_,"object",N,m.commandStr);var A=_.cmp||"keep",S=_.ref||0,U="mask"in _?_.mask:-1;return y.commandParameter(A,yl,k+".cmp",m.commandStr),y.commandType(S,"number",k+".ref",m.commandStr),y.commandType(U,"number",k+".mask",m.commandStr),[yl[A],S,U]},function(_,A,S){var U=_.constants.compareFuncs;y.optional(function(){function we(){_.assert(A,Array.prototype.join.call(arguments,""),"invalid stencil.func")}we(S+"&&typeof ",S,'==="object"'),we('!("cmp" in ',S,")||(",S,".cmp in ",U,")")});var G=A.def('"cmp" in ',S,"?",U,"[",S,".cmp]",":",da),J=A.def(S,".ref|0"),re=A.def('"mask" in ',S,"?",S,".mask|0:-1");return[G,J,re]});case Rh:case zs:return M(function(_){y.commandType(_,"object",N,m.commandStr);var A=_.fail||"keep",S=_.zfail||"keep",U=_.zpass||"keep";return y.commandParameter(A,ma,k+".fail",m.commandStr),y.commandParameter(S,ma,k+".zfail",m.commandStr),y.commandParameter(U,ma,k+".zpass",m.commandStr),[k===zs?co:Zs,ma[A],ma[S],ma[U]]},function(_,A,S){var U=_.constants.stencilOps;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+k)});function G(J){return y.optional(function(){_.assert(A,'!("'+J+'" in '+S+")||("+S+"."+J+" in "+U+")","invalid "+k+"."+J+", must be one of "+Object.keys(ma))}),A.def('"',J,'" in ',S,"?",U,"[",S,".",J,"]:",da)}return[k===zs?co:Zs,G("fail"),G("zfail"),G("zpass")]});case Ah:return M(function(_){y.commandType(_,"object",N,m.commandStr);var A=_.factor|0,S=_.units|0;return y.commandType(A,"number",N+".factor",m.commandStr),y.commandType(S,"number",N+".units",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+k)});var U=A.def(S,".factor|0"),G=A.def(S,".units|0");return[U,G]});case fg:return M(function(_){var A=0;return _==="front"?A=Zs:_==="back"&&(A=co),y.command(!!A,N,m.commandStr),A},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="front"||'+S+'==="back"',"invalid cull.face")}),A.def(S,'==="front"?',Zs,":",co)});case bh:return M(function(_){return y.command(typeof _=="number"&&_>=X.lineWidthDims[0]&&_<=X.lineWidthDims[1],"invalid line width, must be a positive number between "+X.lineWidthDims[0]+" and "+X.lineWidthDims[1],m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"&&'+S+">="+X.lineWidthDims[0]+"&&"+S+"<="+X.lineWidthDims[1],"invalid line width")}),S});case Th:return M(function(_){return y.commandParameter(_,jh,N,m.commandStr),jh[_]},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="cw"||'+S+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),A.def(S+'==="cw"?'+Sg+":"+Fh)});case wh:return M(function(_){return y.command(Zt(_)&&_.length===4,"color.mask must be length 4 array",m.commandStr),_.map(function(A){return!!A})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","invalid color.mask")}),hn(4,function(U){return"!!"+S+"["+U+"]"})});case Ch:return M(function(_){y.command(typeof _=="object"&&_,N,m.commandStr);var A="value"in _?_.value:1,S=!!_.invert;return y.command(typeof A=="number"&&A>=0&&A<=1,"sample.coverage.value must be a number between 0 and 1",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid sample.coverage")});var U=A.def('"value" in ',S,"?+",S,".value:1"),G=A.def("!!",S,".invert");return[U,G]})}}),B}function Ct(E,m){var P=E.static,F=E.dynamic,B={};return Object.keys(P).forEach(function(k){var N=P[k],M;if(typeof N=="number"||typeof N=="boolean")M=Sn(function(){return N});else if(typeof N=="function"){var _=N._reglType;_==="texture2d"||_==="textureCube"?M=Sn(function(A){return A.link(N)}):_==="framebuffer"||_==="framebufferCube"?(y.command(N.color.length>0,'missing color attachment for framebuffer sent to uniform "'+k+'"',m.commandStr),M=Sn(function(A){return A.link(N.color[0])})):y.commandRaise('invalid data for uniform "'+k+'"',m.commandStr)}else Zt(N)?M=Sn(function(A){var S=A.global.def("[",hn(N.length,function(U){return y.command(typeof N[U]=="number"||typeof N[U]=="boolean","invalid uniform "+k,A.commandStr),N[U]}),"]");return S}):y.commandRaise('invalid or missing data for uniform "'+k+'"',m.commandStr);M.value=N,B[k]=M}),Object.keys(F).forEach(function(k){var N=F[k];B[k]=fr(N,function(M,_){return M.invoke(_,N)})}),B}function Cn(E,m){var P=E.static,F=E.dynamic,B={};return Object.keys(P).forEach(function(k){var N=P[k],M=v.id(k),_=new j;if(_f(N))_.state=hl,_.buffer=te.getBuffer(te.create(N,gl,!1,!0)),_.type=0;else{var A=te.getBuffer(N);if(A)_.state=hl,_.buffer=A,_.type=0;else if(y.command(typeof N=="object"&&N,"invalid data for attribute "+k,m.commandStr),"constant"in N){var S=N.constant;_.buffer="null",_.state=vh,typeof S=="number"?_.x=S:(y.command(Zt(S)&&S.length>0&&S.length<=4,"invalid constant for attribute "+k,m.commandStr),ml.forEach(function(Ze,$e){$e<S.length&&(_[Ze]=S[$e])}))}else{_f(N.buffer)?A=te.getBuffer(te.create(N.buffer,gl,!1,!0)):A=te.getBuffer(N.buffer),y.command(!!A,'missing buffer for attribute "'+k+'"',m.commandStr);var U=N.offset|0;y.command(U>=0,'invalid offset for attribute "'+k+'"',m.commandStr);var G=N.stride|0;y.command(G>=0&&G<256,'invalid stride for attribute "'+k+'", must be integer betweeen [0, 255]',m.commandStr);var J=N.size|0;y.command(!("size"in N)||J>0&&J<=4,'invalid size for attribute "'+k+'", must be 1,2,3,4',m.commandStr);var re=!!N.normalized,we=0;"type"in N&&(y.commandParameter(N.type,ia,"invalid type for attribute "+k,m.commandStr),we=ia[N.type]);var at=N.divisor|0;y.optional(function(){"divisor"in N&&(y.command(at===0||ve,'cannot specify divisor for attribute "'+k+'", instancing not supported',m.commandStr),y.command(at>=0,'invalid divisor for attribute "'+k+'"',m.commandStr));var Ze=m.commandStr,$e=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(N).forEach(function(oe){y.command($e.indexOf(oe)>=0,'unknown parameter "'+oe+'" for attribute pointer "'+k+'" (valid parameters are '+$e+")",Ze)})}),_.buffer=A,_.state=hl,_.size=J,_.normalized=re,_.type=we||A.dtype,_.offset=U,_.stride=G,_.divisor=at}}B[k]=Sn(function(Ze,$e){var oe=Ze.attribCache;if(M in oe)return oe[M];var Z={isStream:!1};return Object.keys(_).forEach(function(Ye){Z[Ye]=_[Ye]}),_.buffer&&(Z.buffer=Ze.link(_.buffer),Z.type=Z.type||Z.buffer+".dtype"),oe[M]=Z,Z})}),Object.keys(F).forEach(function(k){var N=F[k];function M(_,A){var S=_.invoke(A,N),U=_.shared,G=_.constants,J=U.isBufferArgs,re=U.buffer;y.optional(function(){_.assert(A,S+"&&(typeof "+S+'==="object"||typeof '+S+'==="function")&&('+J+"("+S+")||"+re+".getBuffer("+S+")||"+re+".getBuffer("+S+".buffer)||"+J+"("+S+'.buffer)||("constant" in '+S+"&&(typeof "+S+'.constant==="number"||'+U.isArrayLike+"("+S+".constant))))",'invalid dynamic attribute "'+k+'"')});var we={isStream:A.def(!1)},at=new j;at.state=hl,Object.keys(at).forEach(function(Z){we[Z]=A.def(""+at[Z])});var Ze=we.buffer,$e=we.type;A("if(",J,"(",S,")){",we.isStream,"=true;",Ze,"=",re,".createStream(",gl,",",S,");",$e,"=",Ze,".dtype;","}else{",Ze,"=",re,".getBuffer(",S,");","if(",Ze,"){",$e,"=",Ze,".dtype;",'}else if("constant" in ',S,"){",we.state,"=",vh,";","if(typeof "+S+'.constant === "number"){',we[ml[0]],"=",S,".constant;",ml.slice(1).map(function(Z){return we[Z]}).join("="),"=0;","}else{",ml.map(function(Z,Ye){return we[Z]+"="+S+".constant.length>"+Ye+"?"+S+".constant["+Ye+"]:0;"}).join(""),"}}else{","if(",J,"(",S,".buffer)){",Ze,"=",re,".createStream(",gl,",",S,".buffer);","}else{",Ze,"=",re,".getBuffer(",S,".buffer);","}",$e,'="type" in ',S,"?",G.glTypes,"[",S,".type]:",Ze,".dtype;",we.normalized,"=!!",S,".normalized;");function oe(Z){A(we[Z],"=",S,".",Z,"|0;")}return oe("size"),oe("offset"),oe("stride"),oe("divisor"),A("}}"),A.exit("if(",we.isStream,"){",re,".destroyStream(",Ze,");","}"),we}B[k]=fr(N,M)}),B}function Jt(E){var m=E.static,P=E.dynamic,F={};return Object.keys(m).forEach(function(B){var k=m[B];F[B]=Sn(function(N,M){return typeof k=="number"||typeof k=="boolean"?""+k:N.link(k)})}),Object.keys(P).forEach(function(B){var k=P[B];F[B]=fr(k,function(N,M){return N.invoke(M,k)})}),F}function wn(E,m,P,F,B){var k=E.static,N=E.dynamic;y.optional(function(){var oe=[oo,Vs,Hs,lo,so,cf,uo,ff,Us,Ws].concat(Je);function Z(Ye){Object.keys(Ye).forEach(function(Ve){y.command(oe.indexOf(Ve)>=0,'unknown parameter "'+Ve+'"',B.commandStr)})}Z(k),Z(N)});var M=dt(E,m),_=Ie(E),A=nt(E,_,B),S=nn(E,B),U=un(E,B),G=Tt(E,B,M);function J(oe){var Z=A[oe];Z&&(U[oe]=Z)}J(Fi),J(Ue(uf));var re=Object.keys(U).length>0,we={framebuffer:_,draw:S,shader:G,state:U,dirty:re,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(we.profile=Oe(E),we.uniforms=Ct(P,B),we.drawVAO=we.scopeVAO=S.vao,!we.drawVAO&&G.program&&!M&&L.angle_instanced_arrays&&S.static.elements){var at=!0,Ze=G.program.attributes.map(function(oe){var Z=m.static[oe];return at=at&&!!Z,Z});if(at&&Ze.length>0){var $e=ye.getVAO(ye.createVAO({attributes:Ze,elements:S.static.elements}));we.drawVAO=new Nn(null,null,null,function(oe,Z){return oe.link($e)}),we.useVAO=!0}}return M?we.useVAO=!0:we.attributes=Cn(m,B),we.context=Jt(F),we}function Ln(E,m,P){var F=E.shared,B=F.context,k=E.scope();Object.keys(P).forEach(function(N){m.save(B,"."+N);var M=P[N],_=M.append(E,m);Array.isArray(_)?k(B,".",N,"=[",_.join(),"];"):k(B,".",N,"=",_,";")}),m(k)}function Rn(E,m,P,F){var B=E.shared,k=B.gl,N=B.framebuffer,M;De&&(M=m.def(B.extensions,".webgl_draw_buffers"));var _=E.constants,A=_.drawBuffer,S=_.backBuffer,U;P?U=P.append(E,m):U=m.def(N,".next"),F||m("if(",U,"!==",N,".cur){"),m("if(",U,"){",k,".bindFramebuffer(",Ag,",",U,".framebuffer);"),De&&m(M,".drawBuffersWEBGL(",A,"[",U,".colorAttachments.length]);"),m("}else{",k,".bindFramebuffer(",Ag,",null);"),De&&m(M,".drawBuffersWEBGL(",S,");"),m("}",N,".cur=",U,";"),F||m("}")}function Fn(E,m,P){var F=E.shared,B=F.gl,k=E.current,N=E.next,M=F.current,_=F.next,A=E.cond(M,".dirty");Je.forEach(function(S){var U=Ue(S);if(!(U in P.state)){var G,J;if(U in N){G=N[U],J=k[U];var re=hn(ke[U].length,function(at){return A.def(G,"[",at,"]")});A(E.cond(re.map(function(at,Ze){return at+"!=="+J+"["+Ze+"]"}).join("||")).then(B,".",ee[U],"(",re,");",re.map(function(at,Ze){return J+"["+Ze+"]="+at}).join(";"),";"))}else{G=A.def(_,".",U);var we=E.cond(G,"!==",M,".",U);A(we),U in ne?we(E.cond(G).then(B,".enable(",ne[U],");").else(B,".disable(",ne[U],");"),M,".",U,"=",G,";"):we(B,".",ee[U],"(",G,");",M,".",U,"=",G,";")}}}),Object.keys(P.state).length===0&&A(M,".dirty=false;"),m(A)}function zn(E,m,P,F){var B=E.shared,k=E.current,N=B.current,M=B.gl;Rg(Object.keys(P)).forEach(function(_){var A=P[_];if(!(F&&!F(A))){var S=A.append(E,m);if(ne[_]){var U=ne[_];ha(A)?S?m(M,".enable(",U,");"):m(M,".disable(",U,");"):m(E.cond(S).then(M,".enable(",U,");").else(M,".disable(",U,");")),m(N,".",_,"=",S,";")}else if(Zt(S)){var G=k[_];m(M,".",ee[_],"(",S,");",S.map(function(J,re){return G+"["+re+"]="+J}).join(";"),";")}else m(M,".",ee[_],"(",S,");",N,".",_,"=",S,";")}})}function pn(E,m){ve&&(E.instancing=m.def(E.shared.extensions,".angle_instanced_arrays"))}function gt(E,m,P,F,B){var k=E.shared,N=E.stats,M=k.current,_=k.timer,A=P.profile;function S(){return typeof performance>"u"?"Date.now()":"performance.now()"}var U,G;function J(oe){U=m.def(),oe(U,"=",S(),";"),typeof B=="string"?oe(N,".count+=",B,";"):oe(N,".count++;"),de&&(F?(G=m.def(),oe(G,"=",_,".getNumPendingQueries();")):oe(_,".beginQuery(",N,");"))}function re(oe){oe(N,".cpuTime+=",S(),"-",U,";"),de&&(F?oe(_,".pushScopeStats(",G,",",_,".getNumPendingQueries(),",N,");"):oe(_,".endQuery();"))}function we(oe){var Z=m.def(M,".profile");m(M,".profile=",oe,";"),m.exit(M,".profile=",Z,";")}var at;if(A){if(ha(A)){A.enable?(J(m),re(m.exit),we("true")):we("false");return}at=A.append(E,m),we(at)}else at=m.def(M,".profile");var Ze=E.block();J(Ze),m("if(",at,"){",Ze,"}");var $e=E.block();re($e),m.exit("if(",at,"){",$e,"}")}function Un(E,m,P,F,B){var k=E.shared;function N(_){switch(_){case df:case pf:case yf:return 2;case mf:case vf:case xf:return 3;case hf:case gf:case Ef:return 4;default:return 1}}function M(_,A,S){var U=k.gl,G=m.def(_,".location"),J=m.def(k.attributes,"[",G,"]"),re=S.state,we=S.buffer,at=[S.x,S.y,S.z,S.w],Ze=["buffer","normalized","offset","stride"];function $e(){m("if(!",J,".buffer){",U,".enableVertexAttribArray(",G,");}");var Z=S.type,Ye;if(S.size?Ye=m.def(S.size,"||",A):Ye=A,m("if(",J,".type!==",Z,"||",J,".size!==",Ye,"||",Ze.map(function(rt){return J+"."+rt+"!=="+S[rt]}).join("||"),"){",U,".bindBuffer(",gl,",",we,".buffer);",U,".vertexAttribPointer(",[G,Ye,Z,S.normalized,S.stride,S.offset],");",J,".type=",Z,";",J,".size=",Ye,";",Ze.map(function(rt){return J+"."+rt+"="+S[rt]+";"}).join(""),"}"),ve){var Ve=S.divisor;m("if(",J,".divisor!==",Ve,"){",E.instancing,".vertexAttribDivisorANGLE(",[G,Ve],");",J,".divisor=",Ve,";}")}}function oe(){m("if(",J,".buffer){",U,".disableVertexAttribArray(",G,");",J,".buffer=null;","}if(",ml.map(function(Z,Ye){return J+"."+Z+"!=="+at[Ye]}).join("||"),"){",U,".vertexAttrib4f(",G,",",at,");",ml.map(function(Z,Ye){return J+"."+Z+"="+at[Ye]+";"}).join(""),"}")}re===hl?$e():re===vh?oe():(m("if(",re,"===",hl,"){"),$e(),m("}else{"),oe(),m("}"))}F.forEach(function(_){var A=_.name,S=P.attributes[A],U;if(S){if(!B(S))return;U=S.append(E,m)}else{if(!B(Og))return;var G=E.scopeAttrib(A);y.optional(function(){E.assert(m,G+".state","missing attribute "+A)}),U={},Object.keys(new j).forEach(function(J){U[J]=m.def(G,".",J)})}M(E.link(_),N(_.info.type),U)})}function $t(E,m,P,F,B,k){for(var N=E.shared,M=N.gl,_={},A,S=0;S<F.length;++S){var U=F[S],G=U.name,J=U.info.type,re=U.info.size,we=P.uniforms[G];if(re>1){if(!we)continue;var at=G.replace("[0]","");if(_[at])continue;_[at]=1}var Ze=E.link(U),$e=Ze+".location",oe;if(we){if(!B(we))continue;if(ha(we)){var Z=we.value;if(y.command(Z!==null&&typeof Z<"u",'missing uniform "'+G+'"',E.commandStr),J===Ks||J===qs){y.command(typeof Z=="function"&&(J===Ks&&(Z._reglType==="texture2d"||Z._reglType==="framebuffer")||J===qs&&(Z._reglType==="textureCube"||Z._reglType==="framebufferCube")),"invalid texture for uniform "+G,E.commandStr);var Ye=E.link(Z._texture||Z.color[0]._texture);m(M,".uniform1i(",$e,",",Ye+".bind());"),m.exit(Ye,".unbind();")}else if(J===Xs||J===Ys||J===Qs){y.optional(function(){y.command(Zt(Z),"invalid matrix for uniform "+G,E.commandStr),y.command(J===Xs&&Z.length===4||J===Ys&&Z.length===9||J===Qs&&Z.length===16,"invalid length for matrix uniform "+G,E.commandStr)});var Ve=E.global.def("new Float32Array(["+Array.prototype.slice.call(Z)+"])"),rt=2;J===Ys?rt=3:J===Qs&&(rt=4),m(M,".uniformMatrix",rt,"fv(",$e,",false,",Ve,");")}else{switch(J){case kh:re===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1f";break;case df:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2f";break;case mf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3f";break;case hf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4f";break;case Dh:re===1?y.commandType(Z,"boolean","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1i";break;case Ih:re===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1i";break;case yf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2i";break;case pf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2i";break;case xf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3i";break;case vf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3i";break;case Ef:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4i";break;case gf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4i";break}re>1?(A+="v",Z=E.global.def("["+Array.prototype.slice.call(Z)+"]")):Z=Zt(Z)?Array.prototype.slice.call(Z):Z,m(M,".uniform",A,"(",$e,",",Z,");")}continue}else oe=we.append(E,m)}else{if(!B(Og))continue;oe=m.def(N.uniforms,"[",v.id(G),"]")}J===Ks?(y(!Array.isArray(oe),"must specify a scalar prop for textures"),m("if(",oe,"&&",oe,'._reglType==="framebuffer"){',oe,"=",oe,".color[0];","}")):J===qs&&(y(!Array.isArray(oe),"must specify a scalar prop for cube maps"),m("if(",oe,"&&",oe,'._reglType==="framebufferCube"){',oe,"=",oe,".color[0];","}")),y.optional(function(){function Cr(dr,Sf){E.assert(m,dr,'bad data or missing for uniform "'+G+'".  '+Sf)}function po(dr,Sf){Sf===1&&y(!Array.isArray(oe),"must not specify an array type for uniform"),Cr("Array.isArray("+oe+") && typeof "+oe+'[0]===" '+dr+'" || typeof '+oe+'==="'+dr+'"',"invalid type, expected "+dr)}function Br(dr,Sf,wf){Array.isArray(oe)?y(oe.length&&oe.length%dr===0&&oe.length<=dr*wf,"must have length of "+(wf===1?"":"n * ")+dr):Cr(N.isArrayLike+"("+oe+")&&"+oe+".length && "+oe+".length % "+dr+" === 0 && "+oe+".length<="+dr*wf,"invalid vector, should have length of "+(wf===1?"":"n * ")+dr,E.commandStr)}function Fg(dr){y(!Array.isArray(oe),"must not specify a value type"),Cr("typeof "+oe+'==="function"&&'+oe+'._reglType==="texture'+(dr===_g?"2d":"Cube")+'"',"invalid texture type",E.commandStr)}switch(J){case Ih:po("number",re);break;case pf:Br(2,"number",re);break;case vf:Br(3,"number",re);break;case gf:Br(4,"number",re);break;case kh:po("number",re);break;case df:Br(2,"number",re);break;case mf:Br(3,"number",re);break;case hf:Br(4,"number",re);break;case Dh:po("boolean",re);break;case yf:Br(2,"boolean",re);break;case xf:Br(3,"boolean",re);break;case Ef:Br(4,"boolean",re);break;case Xs:Br(4,"number",re);break;case Ys:Br(9,"number",re);break;case Qs:Br(16,"number",re);break;case Ks:Fg(_g);break;case qs:Fg(nS);break}});var Ut=1;switch(J){case Ks:case qs:var Vn=m.def(oe,"._texture");m(M,".uniform1i(",$e,",",Vn,".bind());"),m.exit(Vn,".unbind();");continue;case Ih:case Dh:A="1i";break;case pf:case yf:A="2i",Ut=2;break;case vf:case xf:A="3i",Ut=3;break;case gf:case Ef:A="4i",Ut=4;break;case kh:A="1f";break;case df:A="2f",Ut=2;break;case mf:A="3f",Ut=3;break;case hf:A="4f",Ut=4;break;case Xs:A="Matrix2fv";break;case Ys:A="Matrix3fv";break;case Qs:A="Matrix4fv";break}if(A.indexOf("Matrix")===-1&&re>1&&(A+="v",Ut=1),A.charAt(0)==="M"){m(M,".uniform",A,"(",$e,",");var mo=Math.pow(J-Xs+2,2),ji=E.global.def("new Float32Array(",mo,")");Array.isArray(oe)?m("false,(",hn(mo,function(Cr){return ji+"["+Cr+"]="+oe[Cr]}),",",ji,")"):m("false,(Array.isArray(",oe,")||",oe," instanceof Float32Array)?",oe,":(",hn(mo,function(Cr){return ji+"["+Cr+"]="+oe+"["+Cr+"]"}),",",ji,")"),m(");")}else if(Ut>1){for(var gi=[],pa=[],ho=0;ho<Ut;++ho)Array.isArray(oe)?pa.push(oe[ho]):pa.push(m.def(oe+"["+ho+"]")),k&&gi.push(m.def());k&&m("if(!",E.batchId,"||",gi.map(function(Cr,po){return Cr+"!=="+pa[po]}).join("||"),"){",gi.map(function(Cr,po){return Cr+"="+pa[po]+";"}).join("")),m(M,".uniform",A,"(",$e,",",pa.join(","),");"),k&&m("}")}else{if(y(!Array.isArray(oe),"uniform value must not be an array"),k){var Mg=m.def();m("if(!",E.batchId,"||",Mg,"!==",oe,"){",Mg,"=",oe,";")}m(M,".uniform",A,"(",$e,",",oe,");"),k&&m("}")}}}function tt(E,m,P,F){var B=E.shared,k=B.gl,N=B.draw,M=F.draw;function _(){var Ye=M.elements,Ve,rt=m;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(rt=P),Ve=Ye.append(E,rt),M.elementsActive&&rt("if("+Ve+")"+k+".bindBuffer("+Nh+","+Ve+".buffer.buffer);")):(Ve=rt.def(),rt(Ve,"=",N,".",lo,";","if(",Ve,"){",k,".bindBuffer(",Nh,",",Ve,".buffer.buffer);}","else if(",B.vao,".currentVAO){",Ve,"=",E.shared.elements+".getElements("+B.vao,".currentVAO.elements);",se?"":"if("+Ve+")"+k+".bindBuffer("+Nh+","+Ve+".buffer.buffer);","}")),Ve}function A(){var Ye=M.count,Ve,rt=m;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(rt=P),Ve=Ye.append(E,rt),y.optional(function(){Ye.MISSING&&E.assert(m,"false","missing vertex count"),Ye.DYNAMIC&&E.assert(rt,Ve+">=0","missing vertex count")})):(Ve=rt.def(N,".",uo),y.optional(function(){E.assert(rt,Ve+">=0","missing vertex count")})),Ve}var S=_();function U(Ye){var Ve=M[Ye];return Ve?Ve.contextDep&&F.contextDynamic||Ve.propDep?Ve.append(E,P):Ve.append(E,m):m.def(N,".",Ye)}var G=U(so),J=U(cf),re=A();if(typeof re=="number"){if(re===0)return}else P("if(",re,"){"),P.exit("}");var we,at;ve&&(we=U(ff),at=E.instancing);var Ze=S+".type",$e=M.elements&&ha(M.elements)&&!M.vaoActive;function oe(){function Ye(){P(at,".drawElementsInstancedANGLE(",[G,re,Ze,J+"<<(("+Ze+"-"+eg+")>>1)",we],");")}function Ve(){P(at,".drawArraysInstancedANGLE(",[G,J,re,we],");")}S&&S!=="null"?$e?Ye():(P("if(",S,"){"),Ye(),P("}else{"),Ve(),P("}")):Ve()}function Z(){function Ye(){P(k+".drawElements("+[G,re,Ze,J+"<<(("+Ze+"-"+eg+")>>1)"]+");")}function Ve(){P(k+".drawArrays("+[G,J,re]+");")}S&&S!=="null"?$e?Ye():(P("if(",S,"){"),Ye(),P("}else{"),Ve(),P("}")):Ve()}ve&&(typeof we!="number"||we>=0)?typeof we=="string"?(P("if(",we,">0){"),oe(),P("}else if(",we,"<0){"),Z(),P("}")):oe():Z()}function bt(E,m,P,F,B){var k=ot(),N=k.proc("body",B);return y.optional(function(){k.commandStr=m.commandStr,k.command=k.link(m.commandStr)}),ve&&(k.instancing=N.def(k.shared.extensions,".angle_instanced_arrays")),E(k,N,P,F),k.compile().body}function kt(E,m,P,F){pn(E,m),P.useVAO?P.drawVAO?m(E.shared.vao,".setVAO(",P.drawVAO.append(E,m),");"):m(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(m(E.shared.vao,".setVAO(null);"),Un(E,m,P,F.attributes,function(){return!0})),$t(E,m,P,F.uniforms,function(){return!0},!1),tt(E,m,m,P)}function vn(E,m){var P=E.proc("draw",1);pn(E,P),Ln(E,P,m.context),Rn(E,P,m.framebuffer),Fn(E,P,m),zn(E,P,m.state),gt(E,P,m,!1,!0);var F=m.shader.progVar.append(E,P);if(P(E.shared.gl,".useProgram(",F,".program);"),m.shader.program)kt(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var B=E.global.def("{}"),k=P.def(F,".id"),N=P.def(B,"[",k,"]");P(E.cond(N).then(N,".call(this,a0);").else(N,"=",B,"[",k,"]=",E.link(function(M){return bt(kt,E,m,M,1)}),"(",F,");",N,".call(this,a0);"))}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function vi(E,m,P,F){E.batchId="a1",pn(E,m);function B(){return!0}Un(E,m,P,F.attributes,B),$t(E,m,P,F.uniforms,B,!1),tt(E,m,m,P)}function fo(E,m,P,F){pn(E,m);var B=P.contextDep,k=m.def(),N="a0",M="a1",_=m.def();E.shared.props=_,E.batchId=k;var A=E.scope(),S=E.scope();m(A.entry,"for(",k,"=0;",k,"<",M,";++",k,"){",_,"=",N,"[",k,"];",S,"}",A.exit);function U(Ze){return Ze.contextDep&&B||Ze.propDep}function G(Ze){return!U(Ze)}if(P.needsContext&&Ln(E,S,P.context),P.needsFramebuffer&&Rn(E,S,P.framebuffer),zn(E,S,P.state,U),P.profile&&U(P.profile)&&gt(E,S,P,!1,!0),F)P.useVAO?P.drawVAO?U(P.drawVAO)?S(E.shared.vao,".setVAO(",P.drawVAO.append(E,S),");"):A(E.shared.vao,".setVAO(",P.drawVAO.append(E,A),");"):A(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(A(E.shared.vao,".setVAO(null);"),Un(E,A,P,F.attributes,G),Un(E,S,P,F.attributes,U)),$t(E,A,P,F.uniforms,G,!1),$t(E,S,P,F.uniforms,U,!0),tt(E,A,S,P);else{var J=E.global.def("{}"),re=P.shader.progVar.append(E,S),we=S.def(re,".id"),at=S.def(J,"[",we,"]");S(E.shared.gl,".useProgram(",re,".program);","if(!",at,"){",at,"=",J,"[",we,"]=",E.link(function(Ze){return bt(vi,E,P,Ze,2)}),"(",re,");}",at,".call(this,a0[",k,"],",k,");")}}function b(E,m){var P=E.proc("batch",2);E.batchId="0",pn(E,P);var F=!1,B=!0;Object.keys(m.context).forEach(function(J){F=F||m.context[J].propDep}),F||(Ln(E,P,m.context),B=!1);var k=m.framebuffer,N=!1;k?(k.propDep?F=N=!0:k.contextDep&&F&&(N=!0),N||Rn(E,P,k)):Rn(E,P,null),m.state.viewport&&m.state.viewport.propDep&&(F=!0);function M(J){return J.contextDep&&F||J.propDep}Fn(E,P,m),zn(E,P,m.state,function(J){return!M(J)}),(!m.profile||!M(m.profile))&&gt(E,P,m,!1,"a1"),m.contextDep=F,m.needsContext=B,m.needsFramebuffer=N;var _=m.shader.progVar;if(_.contextDep&&F||_.propDep)fo(E,P,m,null);else{var A=_.append(E,P);if(P(E.shared.gl,".useProgram(",A,".program);"),m.shader.program)fo(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var S=E.global.def("{}"),U=P.def(A,".id"),G=P.def(S,"[",U,"]");P(E.cond(G).then(G,".call(this,a0,a1);").else(G,"=",S,"[",U,"]=",E.link(function(J){return bt(fo,E,m,J,2)}),"(",A,");",G,".call(this,a0,a1);"))}}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Y(E,m){var P=E.proc("scope",3);E.batchId="a2";var F=E.shared,B=F.current;Ln(E,P,m.context),m.framebuffer&&m.framebuffer.append(E,P),Rg(Object.keys(m.state)).forEach(function(N){var M=m.state[N],_=M.append(E,P);Zt(_)?_.forEach(function(A,S){P.set(E.next[N],"["+S+"]",A)}):P.set(F.next,"."+N,_)}),gt(E,P,m,!0,!0),[lo,cf,uo,ff,so].forEach(function(N){var M=m.draw[N];M&&P.set(F.draw,"."+N,""+M.append(E,P))}),Object.keys(m.uniforms).forEach(function(N){var M=m.uniforms[N].append(E,P);Array.isArray(M)&&(M="["+M.join()+"]"),P.set(F.uniforms,"["+v.id(N)+"]",M)}),Object.keys(m.attributes).forEach(function(N){var M=m.attributes[N].append(E,P),_=E.scopeAttrib(N);Object.keys(new j).forEach(function(A){P.set(_,"."+A,M[A])})}),m.scopeVAO&&P.set(F.vao,".targetVAO",m.scopeVAO.append(E,P));function k(N){var M=m.shader[N];M&&P.set(F.shader,"."+N,M.append(E,P))}k(Vs),k(Hs),Object.keys(m.state).length>0&&(P(B,".dirty=true;"),P.exit(B,".dirty=true;")),P("a1(",E.shared.context,",a0,",E.batchId,");")}function V(E){if(!(typeof E!="object"||Zt(E))){for(var m=Object.keys(E),P=0;P<m.length;++P)if(Pt.isDynamic(E[m[P]]))return!0;return!1}}function ze(E,m,P){var F=m.static[P];if(!F||!V(F))return;var B=E.global,k=Object.keys(F),N=!1,M=!1,_=!1,A=E.global.def("{}");k.forEach(function(U){var G=F[U];if(Pt.isDynamic(G)){typeof G=="function"&&(G=F[U]=Pt.unbox(G));var J=fr(G,null);N=N||J.thisDep,_=_||J.propDep,M=M||J.contextDep}else{switch(B(A,".",U,"="),typeof G){case"number":B(G);break;case"string":B('"',G,'"');break;case"object":Array.isArray(G)&&B("[",G.join(),"]");break;default:B(E.link(G));break}B(";")}});function S(U,G){k.forEach(function(J){var re=F[J];if(Pt.isDynamic(re)){var we=U.invoke(G,re);G(A,".",J,"=",we,";")}})}m.dynamic[P]=new Pt.DynamicVariable(sf,{thisDep:N,contextDep:M,propDep:_,ref:A,append:S}),delete m.static[P]}function wt(E,m,P,F,B){var k=ot();k.stats=k.link(B),Object.keys(m.static).forEach(function(M){ze(k,m,M)}),J_.forEach(function(M){ze(k,E,M)});var N=wn(E,m,P,F,k);return vn(k,N),Y(k,N),b(k,N),r(k.compile(),{destroy:function(){N.shader.program.destroy()}})}return{next:Re,current:ke,procs:function(){var E=ot(),m=E.proc("poll"),P=E.proc("refresh"),F=E.block();m(F),P(F);var B=E.shared,k=B.gl,N=B.next,M=B.current;F(M,".dirty=false;"),Rn(E,m),Rn(E,P,null,!0);var _;ve&&(_=E.link(ve)),L.oes_vertex_array_object&&P(E.link(L.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var A=0;A<X.maxAttributes;++A){var S=P.def(B.attributes,"[",A,"]"),U=E.cond(S,".buffer");U.then(k,".enableVertexAttribArray(",A,");",k,".bindBuffer(",gl,",",S,".buffer.buffer);",k,".vertexAttribPointer(",A,",",S,".size,",S,".type,",S,".normalized,",S,".stride,",S,".offset);").else(k,".disableVertexAttribArray(",A,");",k,".vertexAttrib4f(",A,",",S,".x,",S,".y,",S,".z,",S,".w);",S,".buffer=null;"),P(U),ve&&P(_,".vertexAttribDivisorANGLE(",A,",",S,".divisor);")}return P(E.shared.vao,".currentVAO=null;",E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"),Object.keys(ne).forEach(function(G){var J=ne[G],re=F.def(N,".",G),we=E.block();we("if(",re,"){",k,".enable(",J,")}else{",k,".disable(",J,")}",M,".",G,"=",re,";"),P(we),m("if(",re,"!==",M,".",G,"){",we,"}")}),Object.keys(ee).forEach(function(G){var J=ee[G],re=ke[G],we,at,Ze=E.block();if(Ze(k,".",J,"("),Zt(re)){var $e=re.length;we=E.global.def(N,".",G),at=E.global.def(M,".",G),Ze(hn($e,function(oe){return we+"["+oe+"]"}),");",hn($e,function(oe){return at+"["+oe+"]="+we+"["+oe+"];"}).join("")),m("if(",hn($e,function(oe){return we+"["+oe+"]!=="+at+"["+oe+"]"}).join("||"),"){",Ze,"}")}else we=F.def(N,".",G),at=F.def(M,".",G),Ze(we,");",M,".",G,"=",we,";"),m("if(",we,"!==",at,"){",Ze,"}");P(Ze)}),E.compile()}(),compile:wt}}function yS(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var xS=34918,ES=34919,Pg=35007,_S=function(c,v){if(!v.ext_disjoint_timer_query)return null;var L=[];function X(){return L.pop()||v.ext_disjoint_timer_query.createQueryEXT()}function te(ve){L.push(ve)}var W=[];function K(ve){var De=X();v.ext_disjoint_timer_query.beginQueryEXT(Pg,De),W.push(De),de(W.length-1,W.length,ve)}function fe(){v.ext_disjoint_timer_query.endQueryEXT(Pg)}function ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ye=[];function Ee(){return ye.pop()||new ce}function xe(ve){ye.push(ve)}var Te=[];function de(ve,De,se){var ke=Ee();ke.startQueryIndex=ve,ke.endQueryIndex=De,ke.sum=0,ke.stats=se,Te.push(ke)}var ge=[],j=[];function Q(){var ve,De,se=W.length;if(se!==0){j.length=Math.max(j.length,se+1),ge.length=Math.max(ge.length,se+1),ge[0]=0,j[0]=0;var ke=0;for(ve=0,De=0;De<W.length;++De){var Re=W[De];v.ext_disjoint_timer_query.getQueryObjectEXT(Re,ES)?(ke+=v.ext_disjoint_timer_query.getQueryObjectEXT(Re,xS),te(Re)):W[ve++]=Re,ge[De+1]=ke,j[De+1]=ve}for(W.length=ve,ve=0,De=0;De<Te.length;++De){var Je=Te[De],ne=Je.startQueryIndex,ee=Je.endQueryIndex;Je.sum+=ge[ee]-ge[ne];var Ue=j[ne],Ae=j[ee];Ae===Ue?(Je.stats.gpuTime+=Je.sum/1e6,xe(Je)):(Je.startQueryIndex=Ue,Je.endQueryIndex=Ae,Te[ve++]=Je)}Te.length=ve}}return{beginQuery:K,endQuery:fe,pushScopeStats:de,update:Q,getNumPendingQueries:function(){return W.length},clear:function(){L.push.apply(L,W);for(var ve=0;ve<L.length;ve++)v.ext_disjoint_timer_query.deleteQueryEXT(L[ve]);W.length=0,L.length=0},restore:function(){W.length=0,L.length=0}}},SS=16384,wS=256,TS=1024,bS=34962,Ng="webglcontextlost",kg="webglcontextrestored",Ig=1,AS=2,CS=3;function Dg(c,v){for(var L=0;L<c.length;++L)if(c[L]===v)return L;return-1}function LS(c){var v=Mr(c);if(!v)return null;var L=v.gl,X=L.getContextAttributes(),te=L.isContextLost(),W=Qi(L,v);if(!W)return null;var K=sr(),fe=yS(),ce=W.extensions,ye=_S(L,ce),Ee=sn(),xe=L.drawingBufferWidth,Te=L.drawingBufferHeight,de={tick:0,time:0,viewportWidth:xe,viewportHeight:Te,framebufferWidth:xe,framebufferHeight:Te,drawingBufferWidth:xe,drawingBufferHeight:Te,pixelRatio:v.pixelRatio},ge={},j={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q=oc(L,ce),ve=vs(L,fe,v,ke),De=_s(L,ce,ve,fe),se=be(L,ce,Q,fe,ve,De,j);function ke(tt){return se.destroyBuffer(tt)}var Re=Mt(L,K,fe,v),Je=Zm(L,ce,Q,function(){Ue.procs.poll()},de,fe,v),ne=Jm(L,ce,Q,fe,v),ee=hh(L,ce,Q,Je,ne,fe),Ue=gS(L,K,ce,Q,ve,De,Je,ee,ge,se,Re,j,de,ye,v),Ae=Q_(L,ee,Ue.procs.poll,de,X,ce,Q),me=Ue.next,Ce=L.canvas,Le=[],ft=[],ot=[],Oe=[v.onDestroy],Ie=null;function nt(){if(Le.length===0){ye&&ye.update(),Ie=null;return}Ie=ln.next(nt),zn();for(var tt=Le.length-1;tt>=0;--tt){var bt=Le[tt];bt&&bt(de,null,0)}L.flush(),ye&&ye.update()}function dt(){!Ie&&Le.length>0&&(Ie=ln.next(nt))}function Tt(){Ie&&(ln.cancel(nt),Ie=null)}function nn(tt){tt.preventDefault(),te=!0,Tt(),ft.forEach(function(bt){bt()})}function un(tt){L.getError(),te=!1,W.restore(),Re.restore(),ve.restore(),Je.restore(),ne.restore(),ee.restore(),se.restore(),ye&&ye.restore(),Ue.procs.refresh(),dt(),ot.forEach(function(bt){bt()})}Ce&&(Ce.addEventListener(Ng,nn,!1),Ce.addEventListener(kg,un,!1));function Ct(){Le.length=0,Tt(),Ce&&(Ce.removeEventListener(Ng,nn),Ce.removeEventListener(kg,un)),Re.clear(),ee.clear(),ne.clear(),se.clear(),Je.clear(),De.clear(),ve.clear(),ye&&ye.clear(),Oe.forEach(function(tt){tt()})}function Cn(tt){y(!!tt,"invalid args to regl({...})"),y.type(tt,"object","invalid args to regl({...})");function bt(B){var k=r({},B);delete k.uniforms,delete k.attributes,delete k.context,delete k.vao,"stencil"in k&&k.stencil.op&&(k.stencil.opBack=k.stencil.opFront=k.stencil.op,delete k.stencil.op);function N(M){if(M in k){var _=k[M];delete k[M],Object.keys(_).forEach(function(A){k[M+"."+A]=_[A]})}}return N("blend"),N("depth"),N("cull"),N("stencil"),N("polygonOffset"),N("scissor"),N("sample"),"vao"in B&&(k.vao=B.vao),k}function kt(B,k){var N={},M={};return Object.keys(B).forEach(function(_){var A=B[_];if(Pt.isDynamic(A)){M[_]=Pt.unbox(A,_);return}else if(k&&Array.isArray(A)){for(var S=0;S<A.length;++S)if(Pt.isDynamic(A[S])){M[_]=Pt.unbox(A,_);return}}N[_]=A}),{dynamic:M,static:N}}var vn=kt(tt.context||{},!0),vi=kt(tt.uniforms||{},!0),fo=kt(tt.attributes||{},!1),b=kt(bt(tt),!1),Y={gpuTime:0,cpuTime:0,count:0},V=Ue.compile(b,fo,vi,vn,Y),ze=V.draw,wt=V.batch,E=V.scope,m=[];function P(B){for(;m.length<B;)m.push(null);return m}function F(B,k){var N;if(te&&y.raise("context lost"),typeof B=="function")return E.call(this,null,B,0);if(typeof k=="function")if(typeof B=="number")for(N=0;N<B;++N)E.call(this,null,k,N);else if(Array.isArray(B))for(N=0;N<B.length;++N)E.call(this,B[N],k,N);else return E.call(this,B,k,0);else if(typeof B=="number"){if(B>0)return wt.call(this,P(B|0),B|0)}else if(Array.isArray(B)){if(B.length)return wt.call(this,B,B.length)}else return ze.call(this,B)}return r(F,{stats:Y,destroy:function(){V.destroy()}})}var Jt=ee.setFBO=Cn({framebuffer:Pt.define.call(null,Ig,"framebuffer")});function wn(tt,bt){var kt=0;Ue.procs.poll();var vn=bt.color;vn&&(L.clearColor(+vn[0]||0,+vn[1]||0,+vn[2]||0,+vn[3]||0),kt|=SS),"depth"in bt&&(L.clearDepth(+bt.depth),kt|=wS),"stencil"in bt&&(L.clearStencil(bt.stencil|0),kt|=TS),y(!!kt,"called regl.clear with no buffer specified"),L.clear(kt)}function Ln(tt){if(y(typeof tt=="object"&&tt,"regl.clear() takes an object as input"),"framebuffer"in tt)if(tt.framebuffer&&tt.framebuffer_reglType==="framebufferCube")for(var bt=0;bt<6;++bt)Jt(r({framebuffer:tt.framebuffer.faces[bt]},tt),wn);else Jt(tt,wn);else wn(null,tt)}function Rn(tt){y.type(tt,"function","regl.frame() callback must be a function"),Le.push(tt);function bt(){var kt=Dg(Le,tt);y(kt>=0,"cannot cancel a frame twice");function vn(){var vi=Dg(Le,vn);Le[vi]=Le[Le.length-1],Le.length-=1,Le.length<=0&&Tt()}Le[kt]=vn}return dt(),{cancel:bt}}function Fn(){var tt=me.viewport,bt=me.scissor_box;tt[0]=tt[1]=bt[0]=bt[1]=0,de.viewportWidth=de.framebufferWidth=de.drawingBufferWidth=tt[2]=bt[2]=L.drawingBufferWidth,de.viewportHeight=de.framebufferHeight=de.drawingBufferHeight=tt[3]=bt[3]=L.drawingBufferHeight}function zn(){de.tick+=1,de.time=gt(),Fn(),Ue.procs.poll()}function pn(){Je.refresh(),Fn(),Ue.procs.refresh(),ye&&ye.update()}function gt(){return(sn()-Ee)/1e3}pn();function Un(tt,bt){y.type(bt,"function","listener callback must be a function");var kt;switch(tt){case"frame":return Rn(bt);case"lost":kt=ft;break;case"restore":kt=ot;break;case"destroy":kt=Oe;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}return kt.push(bt),{cancel:function(){for(var vn=0;vn<kt.length;++vn)if(kt[vn]===bt){kt[vn]=kt[kt.length-1],kt.pop();return}}}}var $t=r(Cn,{clear:Ln,prop:Pt.define.bind(null,Ig),context:Pt.define.bind(null,AS),this:Pt.define.bind(null,CS),draw:Cn({}),buffer:function(tt){return ve.create(tt,bS,!1,!1)},elements:function(tt){return De.create(tt,!1)},texture:Je.create2D,cube:Je.createCube,renderbuffer:ne.create,framebuffer:ee.create,framebufferCube:ee.createCube,vao:se.createVAO,attributes:X,frame:Rn,on:Un,limits:Q,hasExtension:function(tt){return Q.extensions.indexOf(tt.toLowerCase())>=0},read:Ae,destroy:Ct,_gl:L,_refresh:pn,poll:function(){zn(),ye&&ye.update()},now:gt,stats:fe});return v.onDone(null,$t),$t}return LS})})(x_);var cA=x_.exports;const fA=B0(cA);var dA=1e-6,ko=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function dp(){var e=new ko(16);return ko!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function n1(e){var t=new ko(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function O0(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=t[7],h=t[8],p=t[9],d=t[10],T=t[11],x=t[12],R=t[13],I=t[14],g=t[15],w=n*l-r*o,C=n*u-i*o,H=n*f-a*o,q=r*u-i*l,le=r*f-a*l,he=i*f-a*u,ae=h*R-p*x,it=h*I-d*x,Fe=h*g-T*x,Me=p*I-d*R,qe=p*g-T*R,Xe=d*g-T*I,Qe=w*Xe-C*qe+H*Me+q*Fe-le*it+he*ae;return Qe?(Qe=1/Qe,e[0]=(l*Xe-u*qe+f*Me)*Qe,e[1]=(i*qe-r*Xe-a*Me)*Qe,e[2]=(R*he-I*le+g*q)*Qe,e[3]=(d*le-p*he-T*q)*Qe,e[4]=(u*Fe-o*Xe-f*it)*Qe,e[5]=(n*Xe-i*Fe+a*it)*Qe,e[6]=(I*H-x*he-g*C)*Qe,e[7]=(h*he-d*H+T*C)*Qe,e[8]=(o*qe-l*Fe+f*ae)*Qe,e[9]=(r*Fe-n*qe-a*ae)*Qe,e[10]=(x*le-R*H+g*w)*Qe,e[11]=(p*H-h*le-T*w)*Qe,e[12]=(l*it-o*Me-u*ae)*Qe,e[13]=(n*Me-r*it+i*ae)*Qe,e[14]=(R*C-x*q-I*w)*Qe,e[15]=(h*q-p*C+d*w)*Qe,e):null}function ir(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],h=t[7],p=t[8],d=t[9],T=t[10],x=t[11],R=t[12],I=t[13],g=t[14],w=t[15],C=n[0],H=n[1],q=n[2],le=n[3];return e[0]=C*r+H*l+q*p+le*R,e[1]=C*i+H*u+q*d+le*I,e[2]=C*a+H*f+q*T+le*g,e[3]=C*o+H*h+q*x+le*w,C=n[4],H=n[5],q=n[6],le=n[7],e[4]=C*r+H*l+q*p+le*R,e[5]=C*i+H*u+q*d+le*I,e[6]=C*a+H*f+q*T+le*g,e[7]=C*o+H*h+q*x+le*w,C=n[8],H=n[9],q=n[10],le=n[11],e[8]=C*r+H*l+q*p+le*R,e[9]=C*i+H*u+q*d+le*I,e[10]=C*a+H*f+q*T+le*g,e[11]=C*o+H*h+q*x+le*w,C=n[12],H=n[13],q=n[14],le=n[15],e[12]=C*r+H*l+q*p+le*R,e[13]=C*i+H*u+q*d+le*I,e[14]=C*a+H*f+q*T+le*g,e[15]=C*o+H*h+q*x+le*w,e}function r1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fd(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mA(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,u,f;return o<dA?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=r*r*f+u,e[1]=i*r*f+a*l,e[2]=a*r*f-i*l,e[3]=0,e[4]=r*i*f-a*l,e[5]=i*i*f+u,e[6]=a*i*f+r*l,e[7]=0,e[8]=r*a*f+i*l,e[9]=i*a*f-r*l,e[10]=a*a*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function hA(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function pA(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],l=t[6],u=t[8],f=t[9],h=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,l),e[2]=Math.hypot(u,f,h),e}function vA(){var e=new ko(4);return ko!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function dd(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}(function(){var e=vA();return function(t,n,r,i,a,o){var l,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function gA(){var e=new ko(2);return ko!=Float32Array&&(e[0]=0,e[1]=0),e}function yA(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),l=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=gA();return function(t,n,r,i,a,o){var l,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}})();const xA=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],a=[[-1/0,1/0],[-1/0,1/0]])=>{const o=new Float32Array(16),l=new Float32Array(16),u=new Float32Array(16);let f=dp(),h=[...r.slice(0,2),0,1];const p=Array.isArray(i[0])?[...i[0]]:[...i],d=Array.isArray(i[0])?[...i[1]]:[...i],T=Array.isArray(a[0])?[...a[0]]:[...a],x=Array.isArray(a[0])?[...a[1]]:[...a],R=()=>pA(o,f).slice(0,2),I=()=>{const Se=R();return Math.min(Se[0],Se[1])},g=()=>{const Se=R();return Math.max(Se[0],Se[1])},w=()=>Math.acos(f[0]/g()),C=()=>[[...p],[...d]],H=()=>[[...T],[...x]],q=()=>{const Se=R();return[1/Se[0],1/Se[1]]},le=()=>1/I(),he=()=>1/g(),ae=()=>hA(o,f).slice(0,2),it=()=>dd(o,h,O0(u,f)).slice(0,2),Fe=()=>f,Me=()=>h.slice(0,2),qe=([Se=0,Ge=0]=[],lt=1,xt=0)=>{f=dp(),Xe([-Se,-Ge]),Nt(xt),Qe(1/lt)},Xe=([Se=0,Ge=0]=[])=>{o[0]=Se,o[1]=Ge,o[2]=0;const lt=r1(l,o);ir(f,lt,f)},Qe=(Se,Ge)=>{const lt=Array.isArray(Se);let xt=lt?Se[0]:Se,st=lt?Se[1]:Se;if(xt<=0||st<=0||xt===1&&st===1)return;const Qt=R(),Ht=Qt[0]*xt,Dt=Qt[1]*st;if(xt=Math.max(p[0],Math.min(Ht,p[1]))/Qt[0],st=Math.max(d[0],Math.min(Dt,d[1]))/Qt[1],xt===1&&st===1)return;o[0]=xt,o[1]=st,o[2]=1;const en=fd(l,o),Xn=Ge?[...Ge,0]:h,Dn=r1(o,Xn);ir(f,Dn,ir(f,en,ir(f,O0(u,Dn),f)))},Nt=Se=>{const Ge=dp();mA(Ge,Se,[0,0,1]),ir(f,Ge,f)},ut=Se=>{const Ge=Array.isArray(Se[0]);p[0]=Ge?Se[0][0]:Se[0],p[1]=Ge?Se[0][1]:Se[1],d[0]=Ge?Se[1][0]:Se[0],d[1]=Ge?Se[1][1]:Se[1]},ht=Se=>{const Ge=Array.isArray(Se[0]);T[0]=Ge?Se[0][0]:Se[0],T[1]=Ge?Se[0][1]:Se[1],x[0]=Ge?Se[1][0]:Se[0],x[1]=Ge?Se[1][1]:Se[1]},pe=Se=>{!Se||Se.length<16||(f=Se)},We=Se=>{h=[...Se.slice(0,2),0,1]},Ne=()=>{qe(e,t,n)};return qe(e,t,n),{get translation(){return ae()},get target(){return it()},get scaling(){return R()},get minScaling(){return I()},get maxScaling(){return g()},get scaleBounds(){return C()},get translationBounds(){return H()},get distance(){return q()},get minDistance(){return le()},get maxDistance(){return he()},get rotation(){return w()},get view(){return Fe()},get viewCenter(){return Me()},lookAt:qe,translate:Xe,pan:Xe,rotate:Nt,scale:Qe,zoom:Qe,reset:Ne,set:(...Se)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),pe(...Se)),setScaleBounds:ut,setTranslationBounds:ht,setView:pe,setViewCenter:We}},EA=["pan","rotate"],i1={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},_A=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:a=!1,isPan:o=!0,isPanInverted:l=[!1,!0],panSpeed:u=1,isRotate:f=!0,rotateSpeed:h=1,defaultMouseDownMoveAction:p="pan",mouseDownMoveModKey:d="alt",isZoom:T=!0,zoomSpeed:x=1,viewCenter:R,scaleBounds:I,translationBounds:g,onKeyDown:w=()=>{},onKeyUp:C=()=>{},onMouseDown:H=()=>{},onMouseUp:q=()=>{},onMouseMove:le=()=>{},onWheel:he=()=>{}}={})=>{let ae=xA(n,t,r,R,I,g),it=0,Fe=0,Me=0,qe=0,Xe=0,Qe=0,Nt=!1,ut=0,ht=1,pe=1,We=1,Ne=!1,Se=!1,Ge=!1,lt=p==="pan",xt=o,st=o,Qt=l,Ht=l,Dt=T,en=T;const Xn=()=>{xt=Array.isArray(o)?!!o[0]:o,st=Array.isArray(o)?!!o[1]:o,Qt=Array.isArray(l)?!!l[0]:l,Ht=Array.isArray(l)?!!l[1]:l,Dt=Array.isArray(T)?!!T[0]:T,en=Array.isArray(T)?!!T[1]:T};Xn();const Dn=i?je=>je/ht*2*We:je=>je,Xt=i?je=>je/pe*2:je=>-je,dn=i?je=>(-1+je/ht*2)*We:je=>je,pt=i?je=>1-je/pe*2:je=>je,St=()=>{if(a){const ct=Se;return Se=!1,ct}Ne=!1;const je=it,Lt=Fe;if((xt||st)&&Nt&&(lt&&!Ge||!lt&&Ge)){const ct=Qt?Xe-je:je-Xe,tn=xt?Dn(u*ct):0,on=Ht?Qe-Lt:Lt-Qe,Pt=st?Xt(u*on):0;(tn!==0||Pt!==0)&&(ae.pan([tn,Pt]),Ne=!0)}if((Dt||en)&&ut){const ct=x*Math.exp(ut/pe),tn=dn(Me),on=pt(qe);ae.scale([Dt?1/ct:1,en?1/ct:1],[tn,on]),Ne=!0}if(f&&Nt&&(lt&&Ge||!lt&&!Ge)&&Math.abs(Xe-je)+Math.abs(Qe-Lt)>0){const ct=ht/2,tn=pe/2,on=Xe-ct,Pt=tn-Qe,ln=je-ct,sn=tn-Lt,sr=yA([on,Pt],[ln,sn]),ue=on*sn-ln*Pt;ae.rotate(h*sr*Math.sign(ue)),Ne=!0}ut=0,Xe=je,Qe=Lt;const jt=Ne||Se;return Se=!1,jt},It=({defaultMouseDownMoveAction:je=null,isFixed:Lt=null,isPan:jt=null,isPanInverted:ct=null,isRotate:tn=null,isZoom:on=null,panSpeed:Pt=null,rotateSpeed:ln=null,zoomSpeed:sn=null,mouseDownMoveModKey:sr=null}={})=>{p=je!==null&&EA.includes(je)?je:p,lt=p==="pan",a=Lt!==null?Lt:a,o=jt!==null?jt:o,l=ct!==null?ct:l,f=tn!==null?tn:f,T=on!==null?on:T,u=+Pt>0?Pt:u,h=+ln>0?ln:h,x=+sn>0?sn:x,Xn(),d=sr!==null&&Object.keys(i1).includes(sr)?sr:d},vt=()=>{const je=e.getBoundingClientRect();ht=je.width,pe=je.height,We=ht/pe},Rt=je=>{Ge=!1,C(je)},zt=je=>{Ge=je[i1[d]],w(je)},an=je=>{Nt=!1,q(je)},$n=je=>{Nt=je.buttons===1,H(je)},y=document.createEvent("MouseEvent").offsetX!==void 0?je=>{Me=je.offsetX,qe=je.offsetY}:je=>{const Lt=e.getBoundingClientRect();Me=je.clientX-Lt.left,qe=je.clientY-Lt.top},Et=je=>{it=je.clientX,Fe=je.clientY},Ot=je=>{Et(je),le(je)},_e=je=>{if(Dt||en){je.preventDefault(),Et(je),y(je);const Lt=je.deltaMode===1?12:1;ut+=Lt*(je.deltaY||je.deltaX||0)}he(je)},Yt=()=>{ae=void 0,window.removeEventListener("keydown",zt),window.removeEventListener("keyup",Rt),e.removeEventListener("mousedown",$n),window.removeEventListener("mouseup",an),window.removeEventListener("mousemove",Ot),e.removeEventListener("wheel",_e)};window.addEventListener("keydown",zt,{passive:!0}),window.addEventListener("keyup",Rt,{passive:!0}),e.addEventListener("mousedown",$n,{passive:!0}),window.addEventListener("mouseup",an,{passive:!0}),window.addEventListener("mousemove",Ot,{passive:!0}),e.addEventListener("wheel",_e,{passive:!1}),ae.config=It,ae.dispose=Yt,ae.refresh=vt,ae.tick=St;const _t=je=>function(){je.apply(null,arguments),Se=!0};return ae.lookAt=_t(ae.lookAt),ae.translate=_t(ae.translate),ae.pan=_t(ae.pan),ae.rotate=_t(ae.rotate),ae.scale=_t(ae.scale),ae.zoom=_t(ae.zoom),ae.reset=_t(ae.reset),ae.set=_t(ae.set),ae.setScaleBounds=_t(ae.setScaleBounds),ae.setTranslationBounds=_t(ae.setTranslationBounds),ae.setView=_t(ae.setView),ae.setViewCenter=_t(ae.setViewCenter),vt(),ae};function P0(e,t,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;E_(e,t,o,r,i,a%2),P0(e,t,n,r,o-1,a+1),P0(e,t,n,o+1,i,a+1)}function E_(e,t,n,r,i,a){for(;i>r;){if(i-r>600){const f=i-r+1,h=n-r+1,p=Math.log(f),d=.5*Math.exp(2*p/3),T=.5*Math.sqrt(p*d*(f-d)/f)*(h-f/2<0?-1:1),x=Math.max(r,Math.floor(n-h*d/f+T)),R=Math.min(i,Math.floor(n+(f-h)*d/f+T));E_(e,t,n,x,R,a)}const o=t[2*n+a];let l=r,u=i;for(lu(e,t,r,n),t[2*i+a]>o&&lu(e,t,r,i);l<u;){for(lu(e,t,l,u),l++,u--;t[2*l+a]<o;)l++;for(;t[2*u+a]>o;)u--}t[2*r+a]===o?lu(e,t,r,u):(u++,lu(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function lu(e,t,n,r){mp(e,n,r),mp(t,2*n,2*r),mp(t,2*n+1,2*r+1)}function mp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function SA(e,t,n,r,i,a,o){const l=[0,e.length-1,0],u=[];let f,h;for(;l.length;){const p=l.pop(),d=l.pop(),T=l.pop();if(d-T<=o){for(let I=T;I<=d;I++)f=t[2*I],h=t[2*I+1],f>=n&&f<=i&&h>=r&&h<=a&&u.push(e[I]);continue}const x=Math.floor((T+d)/2);f=t[2*x],h=t[2*x+1],f>=n&&f<=i&&h>=r&&h<=a&&u.push(e[x]);const R=(p+1)%2;(p===0?n<=f:r<=h)&&(l.push(T),l.push(x-1),l.push(R)),(p===0?i>=f:a>=h)&&(l.push(x+1),l.push(d),l.push(R))}return u}function wA(e,t,n,r,i,a){const o=[0,e.length-1,0],l=[],u=i*i;for(;o.length;){const f=o.pop(),h=o.pop(),p=o.pop();if(h-p<=a){for(let I=p;I<=h;I++)a1(t[2*I],t[2*I+1],n,r)<=u&&l.push(e[I]);continue}const d=Math.floor((p+h)/2),T=t[2*d],x=t[2*d+1];a1(T,x,n,r)<=u&&l.push(e[d]);const R=(f+1)%2;(f===0?n-i<=T:r-i<=x)&&(o.push(p),o.push(d-1),o.push(R)),(f===0?n+i>=T:r+i>=x)&&(o.push(d+1),o.push(h),o.push(R))}return l}function a1(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}const TA=e=>e[0],bA=e=>e[1];class AA{constructor(t,n=TA,r=bA,i=64,a=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new o(t.length),u=this.coords=new a(t.length*2);for(let f=0;f<t.length;f++)l[f]=f,u[2*f]=n(t[f]),u[2*f+1]=r(t[f]);P0(l,u,i,0,l.length-1,0)}range(t,n,r,i){return SA(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return wA(this.ids,this.coords,t,n,r,this.nodeSize)}}const CA=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var LA=CA;const RA=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var OA=RA;const{push:o1,splice:PA}=Array.prototype,hp=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),nr=Float32Array.BYTES_PER_ELEMENT,NA=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const a=n+i*2,o=a+1,l=a+2,u=a+3;t.push(a,o,l,l,o,u)}n+=(r+2)*2}),t},Lr={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let a=0,o=e.length/t;a<o;a++){const l=a*t;for(let u=0;u<t;u++){const f=e[l+u];i[u]=f,i[u+t]=f*n}o1.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,a=e.length/n;i<a;i++){const o=t+i*n;e[o]=r(e[o],o,i)}return e},copyElement(e,t,n,r){const i=new Array(r),a=t*r;for(let o=0;o<r;o++)i[o]=e[a+o];return PA.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],a=new Array(n).fill(r);for(let o=0,l=e.length/t;o<l;o++){const u=o*t;for(let f=0;f<t;f++)a[f]=e[u+f];o1.apply(i,a)}return i}},kA=(e,{projection:t=hp,model:n=hp,view:r=hp,points:i=[],colorIndices:a=[],color:o=[.8,.5,0,1],opacity:l=null,opacities:u=[],width:f=1,widths:h=[],miter:p=1,is2d:d=!1,zPos2d:T=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const x=new Float32Array(16);let R,I,g,w,C,H,q,le,he,ae,it,Fe,Me,qe,Xe,Qe,Nt,ut,ht=d?2:3;const pe=()=>+(u.length===I||l!==null),We=()=>{ae=e.buffer(),it=e.buffer(),Fe=e.buffer(),Xe=e.buffer(),Qe={prevPosition:{buffer:()=>ae,offset:0,stride:nr*3},currPosition:{buffer:()=>ae,offset:nr*3*2,stride:nr*3},nextPosition:{buffer:()=>ae,offset:nr*3*4,stride:nr*3},opacity:{buffer:()=>it,offset:nr*2,stride:nr},offsetScale:{buffer:()=>Fe,offset:nr*2,stride:nr},colorIndex:{buffer:()=>Xe,offset:nr*2,stride:nr}},Nt=e.elements(),ut=e({attributes:Qe,depth:{enable:!d},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(pt,St)=>{const It=pt.projection||St.projection,vt=pt.model||St.model,Rt=pt.view||St.view;return ir(x,It,ir(x,Rt,vt))},aspectRatio:({viewportWidth:pt,viewportHeight:St})=>pt/St,colorTex:()=>Me,colorTexRes:()=>qe,colorTexEps:()=>.5/qe,pixelRatio:({pixelRatio:pt})=>pt,width:({pixelRatio:pt,viewportHeight:St})=>f/St*pt,useOpacity:pe,useColorOpacity:()=>+!pe(),miter:p},elements:()=>Nt,vert:OA,frag:LA})},Ne=()=>{R===1&&i.length%ht>0&&console.warn(`The length of points (${I}) does not match the dimensions (${ht}). Incomplete points are ignored.`),w=i.flat().slice(0,I*ht),d&&(w=Lr.increaseStride(w,2,3,T)),a.length!==I&&(a=new Array(I).fill(0)),h.length!==I&&(h=new Array(I).fill(1));let pt=a.slice(),St=u.length===I?u.slice():new Array(I).fill(+l),It=h.slice(),vt=0;g.forEach(Rt=>{const zt=vt+Rt-1;Lr.copyElement(w,zt,zt,3),Lr.copyElement(w,vt,vt,3),Lr.copyElement(pt,zt,zt,1),Lr.copyElement(pt,vt,vt,1),Lr.copyElement(St,zt,zt,1),Lr.copyElement(St,vt,vt,1),Lr.copyElement(It,zt,zt,1),Lr.copyElement(It,vt,vt,1),vt+=Rt+2}),C=new Float32Array(Lr.duplicate(w,3)),H=Lr.duplicate(pt),q=Lr.duplicate(St),le=Lr.duplicate(It,1,-1),he=NA(g),ae({usage:"dynamic",type:"float",length:C.length*nr,data:C}),it({usage:"dynamic",type:"float",length:q.length*nr,data:q}),Fe({usage:"dynamic",type:"float",length:le.length*nr,data:le}),Xe({usage:"dynamic",type:"float",length:H.length*nr,data:H}),Nt({primitive:"triangles",usage:"dynamic",type:he.length>2**16?"uint32":"uint16",data:he})},Se=()=>{Ge(),We()},Ge=()=>{i=null,w=null,C=null,le=null,he=null,ae.destroy(),Fe.destroy(),Nt.destroy()},lt=({projection:pt,model:St,view:It}={})=>{pt&&(t=pt),St&&(n=St),It&&(r=It),i&&i.length>1&&ut({projection:t,model:n,view:r})},xt=(pt,St)=>{const It=St.flat(2);return It.length===I?It:It.length===R?g.map((vt,Rt)=>Array(vt).fill(It[Rt])).flat():pt},st=()=>i,Qt=(pt=[],{colorIndices:St=a,opacities:It=u,widths:vt=h,is2d:Rt=d}={})=>{i=pt,d=Rt,ht=d?2:3,R=Array.isArray(i[0])?i.length:1,g=R>1?i.map(zt=>Math.floor(zt.length/ht)):[Math.floor(i.length/ht)],I=g.reduce((zt,an)=>zt+an,0),a=xt(a,St),u=xt(u,It),h=xt(h,vt),i&&I>1?Ne():Se()},Ht=(pt,St=-1)=>Array.isArray(pt)?pt.length&&!Array.isArray(pt[0])?St+1:Ht(pt[0],++St):St,Dt=()=>{const pt=Ht(o)===0?[o]:o;qe=Math.max(2,Math.ceil(Math.sqrt(pt.length)));const St=new Uint8Array(qe**2*4);pt.forEach((It,vt)=>{St[vt*4]=Math.min(255,Math.max(0,Math.round(It[0]*255))),St[vt*4+1]=Math.min(255,Math.max(0,Math.round(It[1]*255))),St[vt*4+2]=Math.min(255,Math.max(0,Math.round(It[2]*255))),St[vt*4+3]=Number.isNaN(+It[3])?255:Math.min(255,Math.max(0,Math.round(It[3]*255)))}),Me=e.texture({data:St,shape:[qe,qe,4]})},en=(pt,St=l)=>{o=pt,l=St,Me&&Me.destroy(),Dt()},Xn=()=>({color:o,miter:p,width:f}),Dn=({color:pt,opacity:St,miter:It,width:vt}={})=>{pt&&en(pt,St),It&&(p=It),+vt>0&&(f=vt)},Xt=()=>({points:ae,widths:Fe,opacities:it,colorIndices:Xe}),dn=()=>({points:C,widths:le,opacities:q,colorIndices:H});return We(),Dt(),i&&i.length>1&&Qt(i),{clear:Se,destroy:Ge,draw:lt,getPoints:st,setPoints:Qt,getData:dn,getBuffer:Xt,getStyle:Xn,setStyle:Dn}};var Uf=kA;const IA=e=>e*e*e,__=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,DA=e=>--e*e*e+1,MA=e=>e,FA=e=>e*e,jA=e=>e<.5?2*e*e:-1+(4-2*e)*e,BA=e=>e*(2-e),Il=e=>e,$A=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},GA=e=>e.reduce((t,n)=>n>t?n:t,-1/0),l1=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},zA=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,a)=>(i&&r.push(a),r),[])},jv=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,a)=>(i[a]=Object.getOwnPropertyDescriptor(n,a),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const a=Object.getOwnPropertyDescriptor(n,i);a.enumerable&&(r[i]=a)}),Object.defineProperties(e,r)}),e),UA=(...e)=>t=>e.reduce((n,r)=>r(n),t),VA=e=>t=>jv({__proto__:{constructor:e}},t),s1=(e,t)=>n=>jv(n,{get[e](){return t}}),HA=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),WA=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),El=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),S_=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const a=(...u)=>{const f=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(f,n)};let o=!1;const l=(...u)=>{o?(i++,a(...u)):(e(...u),a(...u),o=!0,i=0,setTimeout(()=>{o=!1},t))};return l.reset=()=>{o=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...u)=>e(...u),l},_i="auto",XA=0,pp=1,YA=2,u1=3,QA=4,KA=Float32Array.BYTES_PER_ELEMENT,w_=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],c1={color:[0,0,0,0],depth:1},Bv="panZoom",T_="lasso",b_="rotate",qA=[Bv,T_,b_],ZA=Bv,JA={cubicIn:IA,cubicInOut:__,cubicOut:DA,linear:MA,quadIn:FA,quadInOut:jA,quadOut:BA},f1=__,xi="continuous",_l="categorical",d1=[xi,_l],N0="deselect",$v="lassoEnd",eC=[N0,$v],tC=[0,.666666667,1,1],nC=2,rC=!1,iC=10,aC=3,oC=$v,lC=!1,Gd=750,zd=500,Ud=100,Vd=250,Gv="lasso",Hd="rotate",Wd="merge",sC=[Gv,Hd,Wd],zv="alt",Uv="cmd",A_="ctrl",C_="meta",Vv="shift",uC=[zv,Uv,A_,C_,Vv],cC={[zv]:Hd,[Vv]:Gv,[Uv]:Wd},fC=1,dC=_i,mC=_i,hC=1,vp=1,pC=6,vC=2,gC=2,gp=null,yC=2,xC=2,yp=null,EC=null,xp=null,_C=.66,SC=1,Ep=null,wC=.15,TC=25,bC=1,AC=1,su=null,CC=[.66,.66,.66,SC],LC=[0,.55,1,1],RC=[1,1,1,1],OC=[0,0,0,1],_p=null,PC=[.66,.66,.66,.2],NC=[0,.55,1,1],kC=[1,1,1,1],IC=[0,0],DC=1,MC=0,FC=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),jC="IMAGE_LOAD_ERROR",BC=null,$C=!1,GC=[1,1,1,.5],zC=!0,UC=!0,VC=!1,HC=100,WC=1/500,XC="auto",YC=!1,QC=200,KC=500,L_=new Set(["z","valueZ","valueA","value1","category"]),R_=new Set(["w","valueW","valueB","value2","value"]),Hv=15e3,m1="Points have not been drawn",qC=(e,t)=>e?w_.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,ZC=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return w_.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),fA({gl:t,extensions:n})},Sp=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),JC=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let a=0;a<e.length;a+=2)t=e[a]<t?e[a]:t,n=e[a]>n?e[a]:n,r=e[a+1]<r?e[a+1]:r,i=e[a+1]>i?e[a+1]:i;return[t,r,n,i]},e2=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,t2=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,a)=>`#${r}${r}${i}${i}${a}${a}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),ga=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),ya=e=>!Number.isNaN(+e)&&+e>=0,Vf=e=>!Number.isNaN(+e)&&+e>0,h1=(e,t)=>n=>e.indexOf(n)>=0?n:t,n2=(e,t=!1,n=Hv)=>new Promise((r,i)=>{const a=new Image;t&&(a.crossOrigin="anonymous"),a.src=e,a.onload=()=>{r(a)};const o=()=>{i(new Error(jC))};a.onerror=o,setTimeout(o,n)}),p1=(e,t,n=Hv)=>new Promise((r,i)=>{n2(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(a=>{r(e.texture(a))}).catch(a=>{i(a)})}),r2=(e,t=!1)=>[...t2(e,t),255**!t],i2=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),a2=e=>e>=0&&e<=1,Xd=e=>Array.isArray(e)&&e.every(a2),o2=(e,[t,n]=[])=>{let r,i,a,o,l=!1;for(let u=0,f=e.length-2;u<e.length;u+=2)r=e[u],i=e[u+1],a=e[f],o=e[f+1],i>n!=o>n&&t<(a-r)*(n-i)/(o-i)+r&&(l=!l),f=u;return l},k0=e=>typeof e=="string"||e instanceof String,l2=e=>Number.isInteger(e)&&e>=0&&e<=255,O_=e=>Array.isArray(e)&&e.every(l2),s2=e=>e.length===3&&(Xd(e)||O_(e)),u2=e=>e.length===4&&(Xd(e)||O_(e)),xa=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||k0(e[0])),Hf=(e,t)=>e>t?e:t,v1=(e,t)=>e<t?e:t,mr=(e,t)=>{if(u2(e)){const n=Xd(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(s2(e)){const n=255**!t,r=Xd(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return i2(e)?r2(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},g1=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),y1=e=>.21*e[0]+.72*e[1]+.07*e[2],c2=(e,t,n)=>Math.min(n,Math.max(t,e)),f2=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=hC}=e;t||(t=ZC(n));const i=qC(t),a=[n.width,n.height],o=t.framebuffer({width:a[0],height:a[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>o,srcRes:()=>a,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),u=I=>{const g=I.getContext("2d");g.clearRect(0,0,I.width,I.height),g.drawImage(n,(n.width-I.width)/2,(n.height-I.height)/2,I.width,I.height,0,0,I.width,I.height)},f=(I,g)=>{t.clear(c1),o.use(()=>{t.clear(c1),I()}),l(),u(g)},h=()=>{t.poll()},p=new Set,d=I=>(p.add(I),()=>{p.delete(I)}),T=t.frame(()=>{const I=p.values();let g=I.next();for(;!g.done;)g.value(),g=I.next()}),x=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,a[0]=n.width,a[1]=n.height,o.resize(...a)};return e.canvas||(window.addEventListener("resize",x),window.addEventListener("orientationchange",x),x()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(I){r=+I},get isSupported(){return i},render:f,onFrame:d,refresh:h,destroy:()=>{T.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}}},d2=!0,wp=8,x1=2,m2=2500,h2=250,p2=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const a=document.createElement("div");return a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.width="1.25rem",a.style.height="1.25rem",a.style.borderRadius="1.25rem",a.style.background="currentcolor",a.style.transform="scale(0)",a.style.opacity=0,e.appendChild(a),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:a}},v2=(e,t,n)=>(1-e)*t+n,g2=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,y2=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,x2=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,E2=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,_2=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,S2=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,w2=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,T2=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,b2=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,A2=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,C2=({time:e=Gd,extraTime:t=zd,delay:n=Ud,currentColor:r,targetColor:i,effectOpacity:a,effectScale:o,circleLeftRotation:l,circleRightRotation:u,circleClipPath:f,circleOpacity:h})=>{const p=l/360,d=v2(p,e,t),T=Math.round((1-p)*e/d*100),x=Math.round(T/2),R=T+(100-T)/4;return{rules:{main:S2(T,r,i),effect:w2(T,R,a,o),circleRight:A2(x,u),circleLeft:b2(T,l),circle:T2(x,f,h)},names:{main:g2(d,n),effect:y2(d,n),circleLeft:x2(d,n),circleRight:E2(d,n),circle:_2(d,n)}}},L2=e=>`${e}ms linear mainOut 0s 1 normal forwards`,R2=e=>`${e}ms linear effectOut 0s 1 normal forwards`,O2=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,P2=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,N2=e=>`${e}ms linear circleOut 0s 1 normal forwards`,k2=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,I2=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,D2=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,M2=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,F2=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,j2=({time:e=Vd,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:a,circleRightRotation:o,circleClipPath:l,circleOpacity:u})=>{const f=a/360,h=f*e,p=Math.min(100,f*100),d=p>50?Math.round((1-50/p)*100):0;return{rules:{main:k2(t,n),effect:I2(r,i),circleRight:D2(d,o),circleLeft:M2(a),circle:F2(d,l,u)},names:{main:L2(h),effect:R2(h),circleRight:O2(h),circleLeft:P2(h),circle:N2(h)}}},uu=(e,t=null)=>e===null?t:e;let Tp;const P_=()=>{if(!Tp){const e=document.createElement("style");document.head.appendChild(e),Tp=e.sheet}return Tp},$r=e=>{const t=P_(),n=t.rules.length;return t.insertRule(e,n),n},Gr=e=>{P_().deleteRule(e)},B2=`${m2}ms ease scaleInFadeOut 0s 1 normal backwards`,$2=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let bp=null;const G2=`${h2}ms ease fadeScaleOut 0s 1 normal backwards`,z2=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let Ap=null;const N_=(e,{onDraw:t=Il,onStart:n=Il,onEnd:r=Il,enableInitiator:i=d2,initiatorParentElement:a=document.body,longPressIndicatorParentElement:o=document.body,minDelay:l=wp,minDist:u=x1,pointNorm:f=Il}={})=>{let h=i,p=a,d=o,T=t,x=n,R=r,I=f;const g=document.createElement("div"),w=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);g.id=`lasso-initiator-${w}`,g.style.position="fixed",g.style.display="flex",g.style.justifyContent="center",g.style.alignItems="center",g.style.zIndex=99,g.style.width="4rem",g.style.height="4rem",g.style.borderRadius="4rem",g.style.opacity=.5,g.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:C,longPressCircle:H,longPressCircleLeft:q,longPressCircleRight:le,longPressEffect:he}=p2();let ae=!1,it=!1,Fe=[],Me=[],qe,Xe=!1,Qe=null,Nt=null,ut=null,ht=null,pe=null,We=null,Ne=null,Se=null,Ge=null,lt=null;const xt=()=>{ae=!1},st=Et=>{const{left:Ot,top:_e}=e.getBoundingClientRect();return[Et.clientX-Ot,Et.clientY-_e]};window.addEventListener("mouseup",xt);const Qt=()=>{g.style.opacity=.5,g.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},Ht=(Et,Ot)=>{const _e=getComputedStyle(Et),Yt=+_e.opacity,_t=_e.transform.match(/([0-9.-]+)+/g),je=+_t[0],Lt=+_t[1],jt=Math.sqrt(je*je+Lt*Lt);let ct=Math.atan2(Lt,je)*(180/Math.PI);return ct=Ot&&ct<=0?360+ct:ct,{opacity:Yt,scale:jt,rotate:ct}},Dt=Et=>{if(!h||ae)return;const Ot=Et.clientX,_e=Et.clientY;g.style.top=`${_e}px`,g.style.left=`${Ot}px`;const Yt=Ht(g),_t=Yt.opacity,je=Yt.scale,Lt=Yt.rotate;g.style.opacity=_t,g.style.transform=`translate(-50%,-50%) scale(${je}) rotate(${Lt}deg)`,g.style.animation="none",El().then(()=>{bp!==null&&Gr(bp),bp=$r($2(_t,je,Lt)),g.style.animation=B2,El().then(()=>{Qt()})})},en=()=>{const{opacity:Et,scale:Ot,rotate:_e}=Ht(g);g.style.opacity=Et,g.style.transform=`translate(-50%,-50%) scale(${Ot}) rotate(${_e}deg)`,g.style.animation="none",El(2).then(()=>{Ap!==null&&Gr(Ap),Ap=$r(z2(Et,Ot,_e)),g.style.animation=G2,El().then(()=>{Qt()})})},Xn=(Et,Ot,{time:_e=Gd,extraTime:Yt=zd,delay:_t=Ud}={time:Gd,extraTime:zd,delay:Ud})=>{Xe=!0;const je=getComputedStyle(C);C.style.color=je.color,C.style.top=`${Ot}px`,C.style.left=`${Et}px`,C.style.animation="none";const Lt=getComputedStyle(H);H.style.clipPath=Lt.clipPath,H.style.opacity=Lt.opacity,H.style.animation="none";const jt=Ht(he);he.style.opacity=jt.opacity,he.style.transform=`scale(${jt.scale})`,he.style.animation="none";const ct=Ht(q);q.style.transform=`rotate(${ct.rotate}deg)`,q.style.animation="none";const tn=Ht(le);le.style.transform=`rotate(${tn.rotate}deg)`,le.style.animation="none",El().then(()=>{if(!Xe)return;pe!==null&&Gr(pe),ht!==null&&Gr(ht),ut!==null&&Gr(ut),Nt!==null&&Gr(Nt),Qe!==null&&Gr(Qe);const{rules:on,names:Pt}=C2({time:_e,extraTime:Yt,delay:_t,currentColor:je.color||"currentcolor",targetColor:C.dataset.activeColor,effectOpacity:jt.opacity||0,effectScale:jt.scale||0,circleLeftRotation:ct.rotate||0,circleRightRotation:tn.rotate||0,circleClipPath:Lt.clipPath||"inset(0 0 0 50%)",circleOpacity:Lt.opacity||0});Qe=$r(on.main),Nt=$r(on.effect),ut=$r(on.circleLeft),ht=$r(on.circleRight),pe=$r(on.circle),C.style.animation=Pt.main,he.style.animation=Pt.effect,q.style.animation=Pt.circleLeft,le.style.animation=Pt.circleRight,H.style.animation=Pt.circle})},Dn=({time:Et=Vd}={time:Vd})=>{if(!Xe)return;Xe=!1;const Ot=getComputedStyle(C);C.style.color=Ot.color,C.style.animation="none";const _e=getComputedStyle(H);H.style.clipPath=_e.clipPath,H.style.opacity=_e.opacity,H.style.animation="none";const Yt=Ht(he);he.style.opacity=Yt.opacity,he.style.transform=`scale(${Yt.scale})`,he.style.animation="none";const _t=_e.clipPath.slice(-2,-1)==="x",je=Ht(q,_t);q.style.transform=`rotate(${je.rotate}deg)`,q.style.animation="none";const Lt=Ht(le);le.style.transform=`rotate(${Lt.rotate}deg)`,le.style.animation="none",El().then(()=>{lt!==null&&Gr(lt),Ge!==null&&Gr(Ge),Se!==null&&Gr(Se),Ne!==null&&Gr(Ne),We!==null&&Gr(We);const{rules:jt,names:ct}=j2({time:Et,currentColor:Ot.color||"currentcolor",targetColor:C.dataset.color,effectOpacity:Yt.opacity||0,effectScale:Yt.scale||0,circleLeftRotation:je.rotate||0,circleRightRotation:Lt.rotate||0,circleClipPath:_e.clipPath||"inset(0px)",circleOpacity:_e.opacity||1});We=$r(jt.main),Ne=$r(jt.effect),Se=$r(jt.circleLeft),Ge=$r(jt.circleRight),lt=$r(jt.circle),C.style.animation=ct.main,he.style.animation=ct.effect,q.style.animation=ct.circleLeft,le.style.animation=ct.circleRight,H.style.animation=ct.circle})},Xt=()=>{T(Fe,Me)},dn=Et=>{if(qe){if(HA(Et[0],Et[1],qe[0],qe[1])>x1){qe=Et;const _e=I(Et);Fe.push(_e),Me.push(_e[0],_e[1]),Fe.length>1&&Xt()}}else{it||(it=!0,x()),qe=Et;const Ot=I(Et);Fe=[Ot],Me=[Ot[0],Ot[1]]}},pt=S_(dn,wp,wp),St=(Et,Ot)=>{const _e=st(Et);return Ot?pt(_e):dn(_e)},It=()=>{Fe=[],Me=[],qe=void 0,Xt()},vt=Et=>{Dt(Et)},Rt=()=>{ae=!0,it=!0,It(),x()},zt=()=>{en()},an=({merge:Et=!1}={})=>{it=!1;const Ot=[...Fe],_e=[...Me];return pt.cancel(),It(),Ot.length&&R(Ot,_e,{merge:Et}),Ot},$n=({onDraw:Et=null,onStart:Ot=null,onEnd:_e=null,enableInitiator:Yt=null,initiatorParentElement:_t=null,longPressIndicatorParentElement:je=null,minDelay:Lt=null,minDist:jt=null,pointNorm:ct=null}={})=>{T=uu(Et,T),x=uu(Ot,x),R=uu(_e,R),h=uu(Yt,h),I=uu(ct,I),_t!==null&&_t!==p&&(p.removeChild(g),_t.appendChild(g),p=_t),je!==null&&je!==d&&(d.removeChild(C),je.appendChild(C),d=je),h?(g.addEventListener("click",vt),g.addEventListener("mousedown",Rt),g.addEventListener("mouseleave",zt)):(g.removeEventListener("mousedown",Rt),g.removeEventListener("mouseleave",zt))},Dr=()=>{p.removeChild(g),d.removeChild(C),window.removeEventListener("mouseup",xt),g.removeEventListener("click",vt),g.removeEventListener("mousedown",Rt),g.removeEventListener("mouseleave",zt)},y=()=>Et=>jv(Et,{clear:It,destroy:Dr,end:an,extend:St,set:$n,showInitiator:Dt,hideInitiator:en,showLongPressIndicator:Xn,hideLongPressIndicator:Dn});return p.appendChild(g),d.appendChild(C),$n({onDraw:T,onStart:x,onEnd:R,enableInitiator:h,initiatorParentElement:p}),UA(s1("initiator",g),s1("longPressIndicator",C),y(),VA(N_))({})},U2=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,V2=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,H2=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,W2=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,X2=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,Y2=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,Q2=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,K2=function(){const t=(f,h,p,d,T)=>{const x=(d-h)*.5,R=(T-p)*.5;return(2*p-2*d+x+R)*f*f*f+(-3*p+3*d-2*x-R)*f*f+x*f+p},n=(f,h,p)=>{const d=p*f,T=Math.floor(d),x=d-T,R=h[Math.max(0,T-1)],I=h[T],g=h[Math.min(p,T+1)],w=h[Math.min(p,T+2)];return[t(x,R[0],I[0],g[0],w[0]),t(x,R[1],I[1],g[1],w[1])]},r=(f,h,p,d)=>(f-p)**2+(h-d)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(f,h,p)=>{let d=h[0],T=h[1],x=p[0]-d,R=p[1]-T;if(x!==0||R!==0){const I=((f[0]-d)*x+(f[1]-T)*R)/(x*x+R*R);I>1?(d=p[0],T=p[1]):I>0&&(d+=x*I,T+=R*I)}return x=f[0]-d,R=f[1]-T,x*x+R*R};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const a=(f,h,p,d,T)=>{let x=d,R;for(let I=h+1;I<p;I++){const g=i(f[I],f[h],f[p]);g>x&&(R=I,x=g)}x>d&&(R-h>1&&a(f,h,R,d,T),T.push(f[R]),p-R>1&&a(f,R,p,d,T))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const o=(f,h)=>{const p=f.length-1,d=[f[0]];return a(f,0,p,h,d),d.push(f[p]),d},l=(f,{maxIntPointsPerSegment:h=100,tolerance:p=.002}={})=>{const d=f.length,T=d-1,x=T*h+1,R=p**2;let I=[],g;for(let w=0;w<d-1;w++){let C=[f[w].slice(0,2)];g=f[w];for(let H=1;H<h;H++){const q=(w*h+H)/x,le=n(q,f,T);r(g[0],g[1],le[0],le[1])>R&&(C.push(le),g=le)}C.push(f[w+1]),C=o(C,R),I=I.concat(C.slice(0,C.length-1))}return I.push(f[f.length-1].slice(0,2)),I.flat()},u=f=>{const h={},p=!Number.isNaN(+f[0][5]);return f.forEach(d=>{const T=d[4];h[T]||(h[T]=[]),p?h[T][d[5]]=d:h[T].push(d)}),Object.entries(h).forEach(d=>{h[d[0]]=d[1].filter(T=>T),h[d[0]].reference=d[1][0]}),h};self.onmessage=function(h){(h.data.points?+h.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),h.data.points;const d=u(h.data.points);self.postMessage({points:Object.entries(d).reduce((T,x)=>(T[x[0]]=l(x[1],h.data.options),T[x[0]].reference=x[1].reference,T),{})})}},q2=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=WA(K2);i.onmessage=a=>{a.data.error?r(a.data.error):n(a.data.points),i.terminate()},i.postMessage({points:e,options:t})});var Z2="1.8.5";const Cp={showRecticle:"showReticle",recticleColor:"reticleColor"},Lp=e=>{Object.keys(e).filter(t=>Cp[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${Cp[t]}" instead.`),e[Cp[t]]=e[t],delete e[t]})},zr=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>L_.has(e)?"valueZ":R_.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Rp=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},J2=(e={})=>{const t=sA({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];Lp(e);let{renderer:a,backgroundColor:o=OC,backgroundImage:l=BC,canvas:u=document.createElement("canvas"),colorBy:f=su,deselectOnDblClick:h=zC,deselectOnEscape:p=UC,lassoColor:d=tC,lassoLineWidth:T=nC,lassoMinDelay:x=iC,lassoMinDist:R=aC,lassoClearEvent:I=oC,lassoInitiator:g=rC,lassoInitiatorParentElement:w=document.body,lassoOnLongPress:C=lC,lassoLongPressTime:H=Gd,lassoLongPressAfterEffectTime:q=zd,lassoLongPressEffectDelay:le=Ud,lassoLongPressRevertEffectTime:he=Vd,keyMap:ae=cC,mouseMode:it=ZA,showReticle:Fe=$C,reticleColor:Me=GC,pointColor:qe=CC,pointColorActive:Xe=LC,pointColorHover:Qe=RC,showPointConnections:Nt=VC,pointConnectionColor:ut=PC,pointConnectionColorActive:ht=NC,pointConnectionColorHover:pe=kC,pointConnectionColorBy:We=_p,pointConnectionOpacity:Ne=EC,pointConnectionOpacityBy:Se=xp,pointConnectionOpacityActive:Ge=_C,pointConnectionSize:lt=yC,pointConnectionSizeActive:xt=xC,pointConnectionSizeBy:st=yp,pointConnectionMaxIntPointsPerSegment:Qt=HC,pointConnectionTolerance:Ht=WC,pointSize:Dt=pC,pointSizeSelected:en=vC,pointSizeMouseDetection:Xn=XC,pointOutlineWidth:Dn=gC,opacity:Xt=_i,opacityBy:dn=Ep,opacityByDensityFill:pt=wC,opacityInactiveMax:St=bC,opacityInactiveScale:It=AC,sizeBy:vt=gp,height:Rt=mC,width:zt=dC}=e,an=zt===_i?1:zt,$n=Rt===_i?1:Rt;const{performanceMode:Dr=YC,opacityByDensityDebounceTime:y=TC}=e;a||(a=f2({regl:e.regl,gamma:e.gamma})),o=mr(o,!0),d=mr(d,!0),Me=mr(Me,!0);let Et=!1,Ot=y1(o),_e,Yt,_t=!1,je=null,Lt=[0,0],jt=-1,ct=[];const tn=new Set,on=new Set;let Pt=!1;const ln=new Set;let sn=0,sr=0,ue=!1,At=[],Kt,Gn,Er=e.aspectRatio||fC,oi,Mr,Qi,hn,_r,rs,za,Ua,is,Fo=g1(ae),Ki,Va,qi,jo=!1,yt=!0,Ai=!1,Bo;qe=xa(qe)?[...qe]:[qe],Xe=xa(Xe)?[...Xe]:[Xe],Qe=xa(Qe)?[...Qe]:[Qe],qe=qe.map(s=>mr(s,!0)),Xe=Xe.map(s=>mr(s,!0)),Qe=Qe.map(s=>mr(s,!0)),Xt=!Array.isArray(Xt)&&Number.isNaN(+Xt)?qe[0][3]:Xt,Xt=ga(Xt,ya,{minLength:1})?[...Xt]:[Xt],Dt=ga(Dt,ya,{minLength:1})?[...Dt]:[Dt];let rc=vp/Dt[0];ut==="inherit"?ut=[...qe]:(ut=xa(ut)?[...ut]:[ut],ut=ut.map(s=>mr(s,!0))),ht==="inherit"?ht=[...Xe]:(ht=xa(ht)?[...ht]:[ht],ht=ht.map(s=>mr(s,!0))),pe==="inherit"?pe=[...Qe]:(pe=xa(pe)?[...pe]:[pe],pe=pe.map(s=>mr(s,!0))),Ne==="inherit"?Ne=[...Xt]:Ne=ga(Ne,ya,{minLength:1})?[...Ne]:[Ne],lt==="inherit"?lt=[...Dt]:lt=ga(lt,ya,{minLength:1})?[...lt]:[lt],f=zr(f,su),dn=zr(dn,Ep,{allowDensity:!0}),vt=zr(vt,gp),We=zr(We,_p,{allowSegment:!0}),Se=zr(Se,xp,{allowSegment:!0}),st=zr(st,yp,{allowSegment:!0});let li,si,ui,ic,Sr=0,as=0,Ha,os,Wa,$o,Go,zo,Uo,Ci=!1,Xa=null,ls,ss,ac=Fe,Zi,Ji=0,Vo,ea=0,us=!1,ur=!1,ci=!1,fi=_l,Li=_l,Pn,Fr=!1,Mn=e.xScale||null,En=e.yScale||null,ta=0,Ho=0,Wo=0,Xo=0;Mn&&(ta=Mn.domain()[0],Ho=Mn.domain()[1]-Mn.domain()[0],Mn.range([0,an])),En&&(Wo=En.domain()[0],Xo=En.domain()[1]-En.domain()[0],En.range([$n,0]));const oc=s=>-1+s/an*2,cr=s=>1+s/$n*-2,tr=()=>[oc(i[0]),cr(i[1])],wr=(s,D)=>{const z=[s,D,1,1],ie=O0(n,ir(n,oi,ir(n,_e.view,Qi)));return dd(z,z,ie),z.slice(0,2)},lc=(s=0)=>{const D=eo(),ie=(Va[1]-qi[1])/u.height;return(is*D+s)*ie},cs=()=>Pt?Kt.points.filter((s,D)=>ln.has(D)):Kt.points,Yo=(s,D,z,ie)=>{const be=Kt.range(s,D,z,ie);return Pt?be.filter(Be=>ln.has(Be)):be},fs=()=>{const[s,D]=tr(),[z,ie]=wr(s,D),be=lc(4),Be=Yo(z-be,ie-be,z+be,ie+be);let He=be,mt=-1;return Be.forEach(Bt=>{const[Mt,_n]=Kt.points[Bt],Vt=Sp(Mt,_n,z,ie);Vt<He&&(He=Vt,mt=Bt)}),mt},xm=(s,D)=>{At=s,Yt.setPoints(D),t.publish("lassoExtend",{coordinates:s})},Em=s=>{const D=JC(s);if(!e2(D))return[];const z=Yo(...D),ie=[];return z.forEach(be=>{o2(s,Kt.points[be])&&ie.push(be)}),ie},na=()=>{At=[],Yt&&Yt.clear()},Ya=s=>s&&s.length>4,Ri=(s,D)=>{if(rs||!Nt||!Ya(Kt.points[s[0]]))return;const z=D===0,ie=D===1?He=>on.add(He):Il,be=Object.keys(s.reduce((He,mt)=>{const Bt=Kt.points[mt],_n=Array.isArray(Bt[4])?Bt[4][0]:Bt[4];return He[_n]=!0,He},{})),Be=hn.getData().opacities;be.filter(He=>!on.has(+He)).forEach(He=>{const mt=_r[He][0],Bt=_r[He][2],Mt=_r[He][3],_n=mt*4+Mt*2,Vt=_n+Bt*2+4;Be.__original__===void 0&&(Be.__original__=Be.slice());for(let Ft=_n;Ft<Vt;Ft++)Be[Ft]=z?Be.__original__[Ft]:Ge;ie(He)}),hn.getBuffer().opacities.subdata(Be,0)},Qo=s=>[s%Sr/Sr+as,Math.floor(s/Sr)/Sr+as],_m=s=>Pt&&!ln.has(s),Ko=({preventEvent:s=!1}={})=>{I===N0&&na(),ct.length&&(s||t.publish("deselect"),on.clear(),Ri(ct,0),ct=[],tn.clear(),yt=!0)},ra=(s,{merge:D=!1,preventEvent:z=!1}={})=>{const ie=Array.isArray(s)?s:[s],be=[...ct];if(D){if(ct=zA(ct,ie),be.length===ct.length){yt=!0;return}}else{if(ct&&ct.length&&Ri(ct,0),be.length>0&&ie.length===0){Ko({preventEvent:z});return}ct=ie}if($A(be,ct)){yt=!0;return}const Be=[];tn.clear(),on.clear();for(let He=ct.length-1;He>=0;He--){const mt=ct[He];if(mt<0||mt>=sn||_m(mt)){ct.splice(He,1);continue}tn.add(mt),Be.push.apply(Be,Qo(mt))}os({usage:"dynamic",type:"float",data:Be}),Ri(ct,1),z||t.publish("select",{points:ct}),yt=!0},Qa=(s,{showReticleOnce:D=!1,preventEvent:z=!1}={})=>{let ie=!1;if(s>=0&&s<sn){ie=!0;const be=Pn,Be=s!==Pn;+be>=0&&Be&&!tn.has(be)&&Ri([be],0),Pn=s,Wa.subdata(Qo(s)),tn.has(s)||Ri([s],2),Be&&!z&&t.publish("pointover",Pn)}else ie=+Pn>=0,ie&&(tn.has(Pn)||Ri([Pn],0),z||t.publish("pointout",Pn)),Pn=void 0;ie&&(yt=!0,Ai=D)},ds=s=>{const D=u.getBoundingClientRect();return i[0]=s.clientX-D.left,i[1]=s.clientY-D.top,[...i]},bn=N_(u,{onStart:()=>{_e.config({isFixed:!0}),_t=!0,ue=!0,na(),jt>=0&&(clearTimeout(jt),jt=-1),t.publish("lassoStart")},onDraw:xm,onEnd:(s,D,{merge:z=!1}={})=>{_e.config({isFixed:!1}),At=[...s];const ie=Em(D);ra(ie,{merge:z}),t.publish("lassoEnd",{coordinates:At}),I===$v&&na()},enableInitiator:g,initiatorParentElement:w,pointNorm:([s,D])=>wr(oc(s),cr(D))}),qo=()=>it===T_,Ka=(s,D)=>{switch(Fo[D]){case zv:return s.altKey;case Uv:return s.metaKey;case A_:return s.ctrlKey;case C_:return s.metaKey;case Vv:return s.shiftKey;default:return!1}},sc=s=>document.elementsFromPoint(s.clientX,s.clientY).some(D=>D===u),ms=s=>{!ur||s.buttons!==1||(_t=!0,je=performance.now(),Lt=ds(s),ue=qo()||Ka(s,Gv),!ue&&C&&(bn.showLongPressIndicator(s.clientX,s.clientY,{time:H,extraTime:q,delay:le}),jt=setTimeout(()=>{jt=-1,ue=!0},H)))},hs=s=>{ur&&(_t=!1,jt>=0&&(clearTimeout(jt),jt=-1),ue&&(s.preventDefault(),ue=!1,bn.end({merge:Ka(s,Wd)})),C&&bn.hideLongPressIndicator({time:he}))},Zo=s=>{if(!ur)return;s.preventDefault();const D=ds(s);if(Sp(...D,...Lt)>=R)return;const z=performance.now()-je;if(!g||z<KC){const ie=fs();ie>=0?(ct.length&&I===N0&&na(),ra([ie],{merge:Ka(s,Wd)})):Ki||(Ki=setTimeout(()=>{Ki=null,bn.showInitiator(s)},QC))}},Jo=s=>{bn.hideInitiator(),Ki&&(clearTimeout(Ki),Ki=null),h&&(s.preventDefault(),Ko())},Qr=s=>{if(ci||(Fr=sc(s),ci=!0),!ur||!Fr&&!_t)return;const D=ds(s),ie=Sp(...D,...Lt)>=R;Fr&&!ue&&Qa(fs()),ue?(s.preventDefault(),bn.extend(s,!0)):_t&&C&&ie&&bn.hideLongPressIndicator({time:he}),jt>=0&&ie&&(clearTimeout(jt),jt=-1),_t&&(yt=!0)},qa=()=>{Pn=void 0,Fr=!1,ci=!1,ur&&(+Pn>=0&&!tn.has(Pn)&&Ri([Pn],0),hs(),yt=!0)},el=()=>{const s=Math.max(Dt.length,Xt.length);ea=Math.max(2,Math.ceil(Math.sqrt(s)));const D=new Float32Array(ea**2*4);for(let z=0;z<s;z++){D[z*4]=Dt[z]||0,D[z*4+1]=Math.min(1,Xt[z]||0);const ie=Number((Xe[z]||Xe[0])[3]);D[z*4+2]=Math.min(1,Number.isNaN(ie)?1:ie);const be=Number((Qe[z]||Qe[0])[3]);D[z*4+3]=Math.min(1,Number.isNaN(be)?1:be)}return a.regl.texture({data:D,shape:[ea,ea,4],type:"float"})},ps=(s=qe,D=Xe,z=Qe)=>{const ie=s.length,be=D.length,Be=z.length,He=[];if(ie===be&&be===Be)for(let mt=0;mt<ie;mt++)He.push(s[mt],D[mt],z[mt],o);else for(let mt=0;mt<ie;mt++){const Bt=[s[mt][0],s[mt][1],s[mt][2],1],Mt=f===su?D[0]:Bt,_n=f===su?z[0]:Bt;He.push(s[mt],Mt,_n,o)}return He},vs=()=>{const s=ps(),D=s.length;Ji=Math.max(2,Math.ceil(Math.sqrt(D)));const z=new Float32Array(Ji**2*4);return s.forEach((ie,be)=>{z[be*4]=ie[0],z[be*4+1]=ie[1],z[be*4+2]=ie[2],z[be*4+3]=ie[3]}),a.regl.texture({data:z,shape:[Ji,Ji,4],type:"float"})},Sm=(s,D)=>{Mr[0]=s/Gn,Mr[5]=D},gs=()=>{Gn=an/$n,oi=fd([],[1/Gn,1,1]),Mr=fd([],[1/Gn,1,1]),Qi=fd([],[Er,1,1])},wm=s=>{+s<=0||(Er=s)},ys=(s,D)=>z=>{if(!z||!z.length)return;const be=[...s()];let Be=xa(z)?z:[z];Be=Be.map(He=>mr(He,!0)),Zi&&Zi.destroy();try{D(Be),Zi=vs()}catch{console.error("Invalid colors. Switching back to default colors."),D(be),Zi=vs()}},Tm=ys(()=>qe,s=>{qe=s}),bm=ys(()=>Xe,s=>{Xe=s}),di=ys(()=>Qe,s=>{Qe=s}),Am=()=>{const s=wr(-1,-1),D=wr(1,1),z=(s[0]+1)/2,ie=(D[0]+1)/2,be=(s[1]+1)/2,Be=(D[1]+1)/2,He=[ta+z*Ho,ta+ie*Ho],mt=[Wo+be*Xo,Wo+Be*Xo];return[He,mt]},Oi=()=>{if(!Mn&&!En)return;const[s,D]=Am();Mn&&Mn.domain(s),En&&En.domain(D)},Pi=s=>{$n=Math.max(1,s),u.height=Math.floor($n*window.devicePixelRatio),En&&(En.range([$n,0]),Oi())},Cm=s=>{if(s===_i){Rt=s,u.style.height="100%",window.requestAnimationFrame(()=>{u&&Pi(u.getBoundingClientRect().height)});return}!+s||+s<=0||(Rt=+s,Pi(Rt),u.style.height=`${Rt}px`)},mi=()=>{is=Xn,Xn===_i&&(is=Array.isArray(Dt)?GA(Dt):Dt)},uc=s=>{ga(s,ya,{minLength:1})&&(Dt=[...s]),Vf(+s)&&(Dt=[+s]),rc=vp/Dt[0],Vo=el(),mi()},aa=s=>{!+s||+s<0||(en=+s)},cc=s=>{!+s||+s<0||(Dn=+s)},Kr=s=>{an=Math.max(1,s),u.width=Math.floor(an*window.devicePixelRatio),Mn&&(Mn.range([0,an]),Oi())},xs=s=>{if(s===_i){zt=s,u.style.width="100%",window.requestAnimationFrame(()=>{u&&Kr(u.getBoundingClientRect().width)});return}!+s||+s<=0||(zt=+s,Kr(zt),u.style.width=`${an}px`)},Lm=s=>{ga(s,ya,{minLength:1})&&(Xt=[...s]),Vf(+s)&&(Xt=[+s]),Vo=el()},Es=s=>{switch(s){case"valueZ":return fi;case"valueW":return Li;default:return null}},_s=(s,D)=>{switch(s){case xi:return z=>Math.round(z*(D.length-1));case _l:default:return Il}},fc=s=>{f=zr(s,su)},Rm=s=>{dn=zr(s,Ep,{allowDensity:!0})},Om=s=>{vt=zr(s,gp)},dc=s=>{We=zr(s,_p,{allowSegment:!0})},Zt=s=>{Se=zr(s,xp,{allowSegment:!0})},mc=s=>{st=zr(s,yp,{allowSegment:!0})},Pm=()=>[u.width,u.height],jr=()=>l,Ss=()=>Zi,tl=()=>Ji,Ni=()=>.5/Ji,ws=()=>window.devicePixelRatio,nl=()=>Ha,ki=()=>os,rl=()=>Vo,hc=()=>ea,Ts=()=>.5/ea,bs=()=>0,Nm=()=>ui||li,km=()=>Sr,Im=()=>.5/Sr,pc=()=>Mr,il=()=>_e.view,Za=()=>Qi,Ja=()=>ir(r,Mr,ir(r,_e.view,Qi)),eo=()=>_e.scaling[0]>1?Math.asinh(Hf(1,_e.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:Hf(rc,_e.scaling[0])*window.devicePixelRatio,oa=()=>Pt?ln.size:sn,Ii=()=>ct.length,As=()=>Ii()>0?St:1,Cs=()=>Ii()>0?It:1,Ls=()=>+(f==="valueZ"),vc=()=>+(f==="valueW"),gc=()=>+(dn==="valueZ"),yc=()=>+(dn==="valueW"),xc=()=>+(dn==="density"),Ec=()=>+(vt==="valueZ"),_c=()=>+(vt==="valueW"),Sc=()=>f==="valueZ"?fi===xi?qe.length-1:1:Li===xi?qe.length-1:1,wc=()=>dn==="valueZ"?fi===xi?Xt.length-1:1:Li===xi?Xt.length-1:1,la=()=>vt==="valueZ"?fi===xi?Dt.length-1:1:Li===xi?Dt.length-1:1,Rs=s=>{if(dn!=="density")return 1;const D=eo(),z=Dt[0]*D,ie=2/(2/_e.view[0])*(2/(2/_e.view[5])),be=s.viewportHeight,Be=s.viewportWidth;let He=pt*Be*be/(sr*z*z)*v1(1,ie);He*=Dr?1:1/(.25*Math.PI);const mt=Hf(vp,z)+.5;return He*=(z/mt)**2,v1(1,Hf(0,He))},Os=a.regl({framebuffer:()=>ic,vert:Q2,frag:Y2,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>si,endStateTex:()=>li,t:(s,D)=>D.t},count:3}),Tr=(s,D,z,ie=XA,be=As,Be=Cs)=>a.regl({frag:Dr?W2:H2,vert:X2(ie),blend:{enable:!Dr,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:z,size:2}},uniforms:{resolution:Pm,modelViewProjection:Ja,devicePixelRatio:ws,pointScale:eo,encodingTex:rl,encodingTexRes:hc,encodingTexEps:Ts,pointOpacityMax:be,pointOpacityScale:Be,pointSizeExtra:s,globalState:ie,colorTex:Ss,colorTexRes:tl,colorTexEps:Ni,stateTex:Nm,stateTexRes:km,stateTexEps:Im,isColoredByZ:Ls,isColoredByW:vc,isOpacityByZ:gc,isOpacityByW:yc,isOpacityByDensity:xc,isSizedByZ:Ec,isSizedByW:_c,colorMultiplicator:Sc,opacityMultiplicator:wc,opacityDensity:Rs,sizeMultiplicator:la,numColorStates:QA},count:D,primitive:"points"}),Dm=Tr(bs,oa,nl),Mm=Tr(bs,()=>1,()=>Wa,YA,()=>1,()=>1),Fm=Tr(()=>(en+Dn*2)*window.devicePixelRatio,Ii,ki,pp,()=>1,()=>1),Ps=Tr(()=>(en+Dn)*window.devicePixelRatio,Ii,ki,u1,()=>1,()=>1),jm=Tr(()=>en*window.devicePixelRatio,Ii,ki,pp,()=>1,()=>1),Bm=()=>{Fm(),Ps(),jm()},$m=a.regl({frag:U2,vert:V2,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:Ja,texture:jr},count:6}),Ns=a.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>At},uniforms:{modelViewProjection:Ja,color:()=>d},elements:()=>Array.from({length:At.length-2},(s,D)=>[0,D+1,D+2])}),Gm=()=>{if(!(Pn>=0))return;const[s,D]=Kt.points[Pn].slice(0,2),z=[s,D,0,1];ir(n,Mr,ir(n,_e.view,Qi)),dd(z,z,n),za.setPoints([-1,z[1],1,z[1]]),Ua.setPoints([z[0],1,z[0],-1]),za.draw(),Ua.draw(),Tr(()=>(en+Dn*2)*window.devicePixelRatio,()=>1,Wa,pp)(),Tr(()=>(en+Dn)*window.devicePixelRatio,()=>1,Wa,u1)()},al=s=>{const D=new Float32Array(s*2);let z=0;for(let ie=0;ie<s;++ie){const be=Qo(ie);D[z]=be[0],D[z+1]=be[1],z+=2}return D},ks=(s,D={})=>{const z=s.length;Sr=Math.max(2,Math.ceil(Math.sqrt(z))),as=.5/Sr;const ie=new Float32Array(Sr**2*4);let be=!0,Be=!0,He=0,mt=0,Bt=0;for(let Mt=0;Mt<z;++Mt)He=Mt*4,ie[He]=s[Mt][0],ie[He+1]=s[Mt][1],mt=s[Mt][2]||0,Bt=s[Mt][3]||0,ie[He+2]=mt,ie[He+3]=Bt,be&&(be=Number.isInteger(mt)),Be&&(Be=Number.isInteger(Bt));return D.z&&d1.includes(D.z)?fi=D.z:fi=be?_l:xi,D.w&&d1.includes(D.w)?Li=D.w:Li=Be?_l:xi,a.regl.texture({data:ie,shape:[Sr,Sr,4],type:"float"})},Tc=(s,D={})=>{if(!li)return!1;if(Ci){const z=si;si=ui,z.destroy()}else si=li;return ui=ks(s,D),ic=a.regl.framebuffer({color:ui,depth:!1,stencil:!1}),li=void 0,!0},Is=()=>!!(si&&ui),zm=()=>{si&&(si.destroy(),si=void 0),ui&&(ui.destroy(),ui=void 0)},to=(s,D={})=>{ur=!1,sn=s.length,sr=sn,li&&li.destroy(),li=ks(s,D),Ha({usage:"static",type:"float",data:al(sn)}),Kt=new AA(s,z=>z[0],z=>z[1],16),ur=!0},bc=(s,D)=>{$o=_e.target,Go=s,zo=_e.distance[0],Uo=D},Um=()=>$o!==void 0&&Go!==void 0&&zo!==void 0&&Uo!==void 0,Vm=()=>{$o=void 0,Go=void 0,zo=void 0,Uo=void 0},Hm=s=>{const D=We==="inherit"?f:We;if(D==="segment"){const z=ut.length-1;return z<1?[]:s.reduce((ie,be,Be)=>{let He=0;const mt=[];for(let Mt=2;Mt<be.length;Mt+=2){const _n=Math.sqrt((be[Mt-2]-be[Mt])**2+(be[Mt-1]-be[Mt+1])**2);mt.push(_n),He+=_n}ie[Be]=[0];let Bt=0;for(let Mt=0;Mt<be.length/2-1;Mt++)Bt+=mt[Mt],ie[Be].push(Math.floor(Bt/He*z)*4);return ie},[])}if(D){const z=Rp(D),ie=_s(Es(D),We==="inherit"?qe:ut);return _r.reduce((be,[Be,He])=>(be[Be]=ie(He[z])*4,be),[])}return Array(_r.length).fill(0)},Wm=()=>{const s=Se==="inherit"?dn:Se;if(s==="segment"){const D=Ne.length-1;return D<1?[]:_r.reduce((z,[ie,be,Be])=>(z[ie]=l1(Be,He=>Ne[Math.floor(He/(Be-1)*D)]),z),[])}if(s){const D=Rp(s),z=Se==="inherit"?Xt:Ne,ie=_s(Es(s),z);return _r.reduce((be,[Be,He])=>(be[Be]=z[ie(He[D])],be),[])}},Xm=()=>{const s=st==="inherit"?vt:st;if(s==="segment"){const D=lt.length-1;return D<1?[]:_r.reduce((z,[ie,be,Be])=>(z[ie]=l1(Be,He=>lt[Math.floor(He/(Be-1)*D)]),z),[])}if(s){const D=Rp(s),z=st==="inherit"?Dt:lt,ie=_s(Es(s),z);return _r.reduce((be,[Be,He])=>(be[Be]=z[ie(He[D])],be),[])}},Ym=s=>{_r=[];let D=0;Object.keys(s).forEach((z,ie)=>{_r[z]=[ie,s[z].reference,s[z].length/2,D],D+=s[z].length/2})},sa=s=>new Promise(D=>{hn.setPoints([]),!s||!s.length?D():(rs=!0,q2(s,{maxIntPointsPerSegment:Qt,tolerance:Ht}).then(z=>{Ym(z);const ie=Object.values(z);hn.setPoints(ie.length===1?ie[0]:ie,{colorIndices:Hm(ie),opacities:Wm(),widths:Xm()}),rs=!1,D()}))}),no=({preventEvent:s=!1}={})=>(Pt=!1,ln.clear(),Ha.subdata(al(sn)),new Promise(D=>{const z=()=>{t.subscribe("draw",()=>{s||t.publish("unfilter"),D()},1),yt=!0};Nt||Ya(Kt.points[0])?sa(cs()).then(()=>{s||t.publish("pointConnectionsDraw"),z()}):z()})),Ac=(s,{preventEvent:D=!1}={})=>{const z=Array.isArray(s)?s:[s];Pt=!0,ln.clear();const ie=[],be=[];for(let Be=z.length-1;Be>=0;Be--){const He=z[Be];if(He<0||He>=sn){z.splice(Be,1);continue}ln.add(He),ie.push.apply(ie,Qo(He)),tn.has(He)&&be.push(He)}return Ha.subdata(ie),ra(be,{preventEvent:D}),ln.has(Pn)||Qa(-1,{preventEvent:D}),new Promise(Be=>{const He=()=>{t.subscribe("draw",()=>{D||t.publish("filter",{points:z}),Be()},1),yt=!0};Nt||Ya(Kt.points[0])?sa(cs()).then(()=>{D||t.publish("pointConnectionsDraw"),ra(be,{preventEvent:D}),He()}):He()})},ro=()=>Yo(qi[0],qi[1],Va[0],Va[1]),ua=S_(()=>{sr=ro().length},y),Cc=s=>{const[D,z]=$o,[ie,be]=Go,Be=1-s,He=D*Be+ie*s,mt=z*Be+be*s,Bt=zo*Be+Uo*s;_e.lookAt([He,mt],Bt)},Lc=()=>Is(),Rc=()=>Um(),Oc=(s,D)=>{Xa||(Xa=performance.now());const z=performance.now()-Xa,ie=c2(D(z/s),0,1);return Lc()&&Os({t:ie}),Rc()&&Cc(ie),z<s},Pc=()=>{Ci=!1,Xa=null,ls=void 0,ss=void 0,Fe=ac,zm(),Vm(),t.publish("transitionEnd")},ol=({duration:s=500,easing:D=f1})=>{Ci&&t.publish("transitionEnd"),Ci=!0,Xa=null,ls=s,ss=k0(D)?JA[D]||f1:D,ac=Fe,Fe=!1,t.publish("transitionStart")},Qm=s=>new Promise((D,z)=>{if(!s||Array.isArray(s))D(s);else{const ie=Array.isArray(s.x)||ArrayBuffer.isView(s.x)?s.x.length:0,be=(Array.isArray(s.x)||ArrayBuffer.isView(s.x))&&(Vt=>s.x[Vt]),Be=(Array.isArray(s.y)||ArrayBuffer.isView(s.y))&&(Vt=>s.y[Vt]),He=(Array.isArray(s.line)||ArrayBuffer.isView(s.line))&&(Vt=>s.line[Vt]),mt=(Array.isArray(s.lineOrder)||ArrayBuffer.isView(s.lineOrder))&&(Vt=>s.lineOrder[Vt]),Bt=Object.keys(s),Mt=(()=>{const Vt=Bt.find(Ft=>L_.has(Ft));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Ft=>s[Vt][Ft])})(),_n=(()=>{const Vt=Bt.find(Ft=>R_.has(Ft));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Ft=>s[Vt][Ft])})();be&&Be&&Mt&&_n&&He&&mt?D(s.x.map((Vt,Ft)=>[Vt,Be(Ft),Mt(Ft),_n(Ft),He(Ft),mt(Ft)])):be&&Be&&Mt&&_n&&He?D(Array.from({length:ie},(Vt,Ft)=>[be(Ft),Be(Ft),Mt(Ft),_n(Ft),He(Ft)])):be&&Be&&Mt&&_n?D(Array.from({length:ie},(Vt,Ft)=>[be(Ft),Be(Ft),Mt(Ft),_n(Ft)])):be&&Be&&Mt?D(Array.from({length:ie},(Vt,Ft)=>[be(Ft),Be(Ft),Mt(Ft)])):be&&Be?D(Array.from({length:ie},(Vt,Ft)=>[be(Ft),Be(Ft)])):z(new Error("You need to specify at least x and y"))}}),ca=(s,D={})=>Et?Promise.reject(new Error("The instance was already destroyed")):Qm(s).then(z=>new Promise(ie=>{if(Et){ie();return}let be=!1;(!D.preventFilterReset||(z==null?void 0:z.length)!==sn)&&(Pt=!1,ln.clear());const Be=z&&Ya(z[0])&&(Nt||D.showPointConnectionsOnce),{zDataType:He,wDataType:mt}=D;z&&(D.transition&&(z.length===sn?be=Tc(z,{z:He,w:mt}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),to(z,{z:He,w:mt}),D.hover!==void 0&&Qa(D.hover,{preventEvent:!0}),D.select!==void 0&&ra(D.select,{preventEvent:!0}),D.filter!==void 0&&Ac(D.filter,{preventEvent:!0}),Be&&sa(z).then(()=>{t.publish("pointConnectionsDraw"),yt=!0,Ai=D.showReticleOnce})),D.transition&&be?(Be?Promise.all([new Promise(Bt=>{t.subscribe("transitionEnd",()=>{yt=!0,Ai=D.showReticleOnce,Bt()},1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(ie):t.subscribe("transitionEnd",()=>{yt=!0,Ai=D.showReticleOnce,ie()},1),ol({duration:D.transitionDuration,easing:D.transitionEasing})):(Be?Promise.all([new Promise(Bt=>{t.subscribe("draw",Bt,1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(ie):t.subscribe("draw",ie,1),yt=!0,Ai=D.showReticleOnce)})),An=s=>(...D)=>{const z=s(...D);return yt=!0,z},Nc=s=>{let D=1/0,z=-1/0,ie=1/0,be=-1/0;for(let Be=0;Be<s.length;Be++){const[He,mt]=Kt.points[s[Be]];D=Math.min(D,He),z=Math.max(z,He),ie=Math.min(ie,mt),be=Math.max(be,mt)}return{x:D,y:ie,width:z-D,height:be-ie}},Ds=(s,D={})=>new Promise(z=>{const ie=[s.x+s.width/2,s.y+s.height/2],be=2*Math.atan(1),Be=s.height*Gn>s.width?s.height/2/Math.tan(be/2):s.width/2/Math.tan(be*Gn/2);D.transition?(_e.config({isFixed:!0}),bc(ie,Be),t.subscribe("transitionEnd",()=>{z(),_e.config({isFixed:!1})},1),ol({duration:D.transitionDuration,easing:D.transitionEasing})):(_e.lookAt(ie,Be),t.subscribe("draw",z,1),yt=!0)}),Di=(s,D={})=>{if(!ur)return Promise.reject(new Error(m1));const z=Nc(s),ie=z.x+z.width/2,be=z.y+z.height/2,Be=lc(),He=1+(D.padding||0),mt=Math.max(z.width,Be)*He,Bt=Math.max(z.height,Be)*He,Mt=ie-mt/2,_n=be-Bt/2;return Ds({x:Mt,y:_n,width:mt,height:Bt},D)},Ms=(s,D,z={})=>new Promise(ie=>{z.transition?(_e.config({isFixed:!0}),bc(s,D),t.subscribe("transitionEnd",()=>{ie(),_e.config({isFixed:!1})},1),ol({duration:z.transitionDuration,easing:z.transitionEasing})):(_e.lookAt(s,D),t.subscribe("draw",ie,1),yt=!0)}),kc=(s={})=>Ms([0,0],1,s),Km=s=>{if(!ur)throw new Error(m1);const D=Kt.points[s];if(!D)return;const z=[D[0],D[1],0,1];ir(n,oi,ir(n,_e.view,Qi)),dd(z,z,n);const ie=an*(z[0]+1)/2,be=$n*(.5-z[1]/2);return[ie,be]},Fs=()=>{hn.setStyle({color:ps(ut,ht,pe),opacity:Ne===null?null:Ne[0],width:lt[0]})},Ic=()=>{const s=Math.round(Ot)>.5?0:255;bn.initiator.style.border=`1px dashed rgba(${s}, ${s}, ${s}, 0.33)`,bn.initiator.style.background=`rgba(${s}, ${s}, ${s}, 0.1)`},Dc=()=>{const s=Math.round(Ot)>.5?0:255;bn.longPressIndicator.style.color=`rgb(${s}, ${s}, ${s})`,bn.longPressIndicator.dataset.color=`rgb(${s}, ${s}, ${s})`;const D=d.map(z=>Math.round(z*255));bn.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},js=s=>{s&&(o=mr(s,!0),Ot=y1(o),Ic(),Dc())},Mc=s=>{s?k0(s)?p1(a.regl,s).then(D=>{l=D,yt=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${s}`),l=null}):s._reglType==="texture2d"?l=s:l=null:l=null},qm=s=>{s>0&&_e.lookAt(_e.target,s,_e.rotation)},Fc=s=>{s!==null&&_e.lookAt(_e.target,_e.distance[0],s)},jc=s=>{s&&_e.lookAt(s,_e.distance[0],_e.rotation)},Bc=s=>{s&&_e.setView(s)},ll=s=>{if(!s)return;d=mr(s,!0),Yt.setStyle({color:d});const D=d.map(z=>Math.round(z*255));bn.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},Zm=s=>{Number.isNaN(+s)||+s<1||(T=+s,Yt.setStyle({width:T}))},hi=s=>{+s&&(x=+s,bn.set({minDelay:x}))},sl=s=>{+s&&(R=+s,bn.set({minDist:R}))},$c=s=>{I=h1(eC,I)(s)},Gc=s=>{g=!!s,bn.set({enableInitiator:g})},zc=s=>{w=s,bn.set({startInitiatorParentElement:w})},Uc=s=>{C=!!s},Vc=s=>{H=Number(s)},Hc=s=>{q=Number(s)},Wc=s=>{le=Number(s)},Xc=s=>{he=Number(s)},Yc=s=>{ae=Object.entries(s).reduce((D,[z,ie])=>(uC.includes(z)&&sC.includes(ie)&&(D[z]=ie),D),{}),Fo=g1(ae),Fo[Hd]?_e.config({isRotate:!0,mouseDownMoveModKey:Fo[Hd]}):_e.config({isRotate:!1})},Ar=s=>{it=h1(qA,Bv)(s),_e.config({defaultMouseDownMoveAction:it===b_?"rotate":"pan"})},Qc=s=>{s!==null&&(Fe=s)},Jm=s=>{s&&(Me=mr(s,!0),za.setStyle({color:Me}),Ua.setStyle({color:Me}))},qr=s=>{s&&(Mn=s,ta=s.domain()[0],Ho=s?s.domain()[1]-s.domain()[0]:0,Mn.range([0,an]),Oi())},Bs=s=>{s&&(En=s,Wo=En.domain()[0],Xo=En?En.domain()[1]-En.domain()[0]:0,En.range([$n,0]),Oi())},Mi=s=>{h=!!s},ul=s=>{p=!!s},Kc=s=>{Nt=!!s,Nt?Ya(Kt.points[0])&&sa(cs()).then(()=>{t.publish("pointConnectionsDraw"),yt=!0}):sa()},cl=(s,D)=>z=>{if(z==="inherit")s([...D()]);else{const ie=xa(z)?z:[z];s(ie.map(be=>mr(be,!0)))}Fs()},qc=cl(s=>{ut=s},()=>qe),Zc=cl(s=>{ht=s},()=>Xe),Jc=cl(s=>{pe=s},()=>Qe),eh=s=>{ga(s,ya,{minLength:1})&&(Ne=[...s]),Vf(+s)&&(Ne=[+s]),ut=ut.map(D=>(D[3]=Number.isNaN(+Ne[0])?D[3]:+Ne[0],D)),Fs()},th=s=>{!Number.isNaN(+s)&&+s&&(Ge=+s)},nh=s=>{ga(s,ya,{minLength:1})&&(lt=[...s]),Vf(+s)&&(lt=[+s]),Fs()},rh=s=>{!Number.isNaN(+s)&&+s&&(xt=Math.max(0,s))},ih=s=>{Qt=Math.max(0,s)},ah=s=>{Ht=Math.max(0,s)},oh=s=>{Xn=s,mi()},ef=s=>{pt=+s},tf=s=>{St=+s},lh=s=>{It=+s},sh=s=>{a.gamma=s},$s=s=>{if(Lp({property:!0}),s==="aspectRatio")return Er;if(s==="background"||s==="backgroundColor")return o;if(s==="backgroundImage")return l;if(s==="camera")return _e;if(s==="cameraTarget")return _e.target;if(s==="cameraDistance")return _e.distance[0];if(s==="cameraRotation")return _e.rotation;if(s==="cameraView")return _e.view;if(s==="canvas")return u;if(s==="colorBy")return f;if(s==="sizeBy")return vt;if(s==="deselectOnDblClick")return h;if(s==="deselectOnEscape")return p;if(s==="height")return Rt;if(s==="lassoColor")return d;if(s==="lassoLineWidth")return T;if(s==="lassoMinDelay")return x;if(s==="lassoMinDist")return R;if(s==="lassoClearEvent")return I;if(s==="lassoInitiator")return g;if(s==="lassoInitiatorElement")return bn.initiator;if(s==="lassoInitiatorParentElement")return w;if(s==="keyMap")return{...ae};if(s==="mouseMode")return it;if(s==="opacity")return Xt.length===1?Xt[0]:Xt;if(s==="opacityBy")return dn;if(s==="opacityByDensityFill")return pt;if(s==="opacityByDensityDebounceTime")return y;if(s==="opacityInactiveMax")return St;if(s==="opacityInactiveScale")return It;if(s==="points")return Kt.points;if(s==="hoveredPoint")return Pn;if(s==="selectedPoints")return[...ct];if(s==="filteredPoints")return Pt?Array.from(ln):Array.from({length:Kt.points.length},(D,z)=>z);if(s==="pointsInView")return ro();if(s==="pointColor")return qe.length===1?qe[0]:qe;if(s==="pointColorActive")return Xe.length===1?Xe[0]:Xe;if(s==="pointColorHover")return Qe.length===1?Qe[0]:Qe;if(s==="pointOutlineWidth")return Dn;if(s==="pointSize")return Dt.length===1?Dt[0]:Dt;if(s==="pointSizeSelected")return en;if(s==="pointSizeMouseDetection")return Xn;if(s==="showPointConnections")return Nt;if(s==="pointConnectionColor")return ut.length===1?ut[0]:ut;if(s==="pointConnectionColorActive")return ht.length===1?ht[0]:ht;if(s==="pointConnectionColorHover")return pe.length===1?pe[0]:pe;if(s==="pointConnectionColorBy")return We;if(s==="pointConnectionOpacity")return Ne.length===1?Ne[0]:Ne;if(s==="pointConnectionOpacityBy")return Se;if(s==="pointConnectionOpacityActive")return Ge;if(s==="pointConnectionSize")return lt.length===1?lt[0]:lt;if(s==="pointConnectionSizeActive")return xt;if(s==="pointConnectionSizeBy")return st;if(s==="pointConnectionMaxIntPointsPerSegment")return Qt;if(s==="pointConnectionTolerance")return Ht;if(s==="reticleColor")return Me;if(s==="regl")return a.regl;if(s==="showReticle")return Fe;if(s==="version")return Z2;if(s==="width")return zt;if(s==="xScale")return Mn;if(s==="yScale")return En;if(s==="performanceMode")return Dr;if(s==="gamma")return a.gamma;if(s==="renderer")return a;if(s==="isDestroyed")return Et;if(s==="isPointsDrawn")return ur;if(s==="isPointsFiltered")return Pt;if(s==="zDataType")return fi;if(s==="wDataType")return Li},io=(s={})=>(Lp(s),(s.backgroundColor!==void 0||s.background!==void 0)&&js(s.backgroundColor||s.background),s.backgroundImage!==void 0&&Mc(s.backgroundImage),s.cameraTarget!==void 0&&jc(s.cameraTarget),s.cameraDistance!==void 0&&qm(s.cameraDistance),s.cameraRotation!==void 0&&Fc(s.cameraRotation),s.cameraView!==void 0&&Bc(s.cameraView),s.colorBy!==void 0&&fc(s.colorBy),s.pointColor!==void 0&&Tm(s.pointColor),s.pointColorActive!==void 0&&bm(s.pointColorActive),s.pointColorHover!==void 0&&di(s.pointColorHover),s.pointSize!==void 0&&uc(s.pointSize),s.pointSizeSelected!==void 0&&aa(s.pointSizeSelected),s.pointSizeMouseDetection!==void 0&&oh(s.pointSizeMouseDetection),s.sizeBy!==void 0&&Om(s.sizeBy),s.opacity!==void 0&&Lm(s.opacity),s.showPointConnections!==void 0&&Kc(s.showPointConnections),s.pointConnectionColor!==void 0&&qc(s.pointConnectionColor),s.pointConnectionColorActive!==void 0&&Zc(s.pointConnectionColorActive),s.pointConnectionColorHover!==void 0&&Jc(s.pointConnectionColorHover),s.pointConnectionColorBy!==void 0&&dc(s.pointConnectionColorBy),s.pointConnectionOpacityBy!==void 0&&Zt(s.pointConnectionOpacityBy),s.pointConnectionOpacity!==void 0&&eh(s.pointConnectionOpacity),s.pointConnectionOpacityActive!==void 0&&th(s.pointConnectionOpacityActive),s.pointConnectionSize!==void 0&&nh(s.pointConnectionSize),s.pointConnectionSizeActive!==void 0&&rh(s.pointConnectionSizeActive),s.pointConnectionSizeBy!==void 0&&mc(s.pointConnectionSizeBy),s.pointConnectionMaxIntPointsPerSegment!==void 0&&ih(s.pointConnectionMaxIntPointsPerSegment),s.pointConnectionTolerance!==void 0&&ah(s.pointConnectionTolerance),s.opacityBy!==void 0&&Rm(s.opacityBy),s.lassoColor!==void 0&&ll(s.lassoColor),s.lassoLineWidth!==void 0&&Zm(s.lassoLineWidth),s.lassoMinDelay!==void 0&&hi(s.lassoMinDelay),s.lassoMinDist!==void 0&&sl(s.lassoMinDist),s.lassoClearEvent!==void 0&&$c(s.lassoClearEvent),s.lassoInitiator!==void 0&&Gc(s.lassoInitiator),s.lassoInitiatorParentElement!==void 0&&zc(s.lassoInitiatorParentElement),s.lassoOnLongPress!==void 0&&Uc(s.lassoOnLongPress),s.lassoLongPressTime!==void 0&&Vc(s.lassoLongPressTime),s.lassoLongPressAfterEffectTime!==void 0&&Hc(s.lassoLongPressAfterEffectTime),s.lassoLongPressEffectDelay!==void 0&&Wc(s.lassoLongPressEffectDelay),s.lassoLongPressRevertEffectTime!==void 0&&Xc(s.lassoLongPressRevertEffectTime),s.keyMap!==void 0&&Yc(s.keyMap),s.mouseMode!==void 0&&Ar(s.mouseMode),s.showReticle!==void 0&&Qc(s.showReticle),s.reticleColor!==void 0&&Jm(s.reticleColor),s.pointOutlineWidth!==void 0&&cc(s.pointOutlineWidth),s.height!==void 0&&Cm(s.height),s.width!==void 0&&xs(s.width),s.aspectRatio!==void 0&&wm(s.aspectRatio),s.xScale!==void 0&&qr(s.xScale),s.yScale!==void 0&&Bs(s.yScale),s.deselectOnDblClick!==void 0&&Mi(s.deselectOnDblClick),s.deselectOnEscape!==void 0&&ul(s.deselectOnEscape),s.opacityByDensityFill!==void 0&&ef(s.opacityByDensityFill),s.opacityInactiveMax!==void 0&&tf(s.opacityInactiveMax),s.opacityInactiveScale!==void 0&&lh(s.opacityInactiveScale),s.gamma!==void 0&&sh(s.gamma),new Promise(D=>{window.requestAnimationFrame(()=>{u&&(gs(),_e.refresh(),a.refresh(),yt=!0,D())})})),uh=(s,{preventEvent:D=!1}={})=>{Bc(s),yt=!0,jo=D},nf=()=>{_e||(_e=_A(u,{isPanInverted:[!1,!0]})),e.cameraView?_e.setView(n1(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?_e.lookAt([...e.cameraTarget||IC],e.cameraDistance||DC,e.cameraRotation||MC):_e.setView(n1(FC)),Va=wr(1,1),qi=wr(-1,-1)},ch=({preventEvent:s=!1}={})=>{nf(),Oi(),!s&&t.publish("view",{view:_e.view,camera:_e,xScale:Mn,yScale:En})},rf=({key:s})=>{switch(s){case"Escape":p&&Ko();break}},af=()=>{Fr=!0,ci=!0},Gs=()=>{Qa(),Fr=!1,ci=!0,yt=!0},of=()=>{yt=!0},fh=()=>{to([]),hn.clear()},ao=()=>{_e.refresh();const s=zt===_i,D=Rt===_i;if(s||D){const{width:z,height:ie}=u.getBoundingClientRect();s&&Kr(z),D&&Pi(ie),gs(),yt=!0}},dh=()=>u.getContext("2d").getImageData(0,0,u.width,u.height),mh=()=>{gs(),nf(),Oi(),Yt=Uf(a.regl,{color:d,width:T,is2d:!0}),hn=Uf(a.regl,{color:ut,colorHover:pe,colorActive:ht,opacity:Ne===null?null:Ne[0],width:lt[0],widthActive:xt,is2d:!0}),za=Uf(a.regl,{color:Me,width:1,is2d:!0}),Ua=Uf(a.regl,{color:Me,width:1,is2d:!0}),mi(),u.addEventListener("wheel",of),Ha=a.regl.buffer(),os=a.regl.buffer(),Wa=a.regl.buffer({usage:"dynamic",type:"float",length:KA*2}),Zi=vs(),Vo=el();const s=io({backgroundImage:l,width:zt,height:Rt,keyMap:ae});Ic(),Dc(),window.addEventListener("keyup",rf,!1),window.addEventListener("blur",qa,!1),window.addEventListener("mouseup",hs,!1),window.addEventListener("mousemove",Qr,!1),u.addEventListener("mousedown",ms,!1),u.addEventListener("mouseenter",af,!1),u.addEventListener("mouseleave",Gs,!1),u.addEventListener("click",Zo,!1),u.addEventListener("dblclick",Jo,!1),"ResizeObserver"in window?(Bo=new ResizeObserver(ao),Bo.observe(u)):(window.addEventListener("resize",ao),window.addEventListener("orientationchange",ao)),s.then(()=>{t.publish("init")})},fa=a.onFrame(()=>{us=_e.tick(),!(!ur||!(yt||Ci))&&(Ci&&!Oc(ls,ss)&&Pc(),us&&(Va=wr(1,1),qi=wr(-1,-1),dn==="density"&&ua()),a.render(()=>{const s=u.width/a.canvas.width,D=u.height/a.canvas.height;Sm(s,D),l&&l._reglType&&$m(),At.length>2&&Ns(),Ci||hn.draw({projection:pc(),model:Za(),view:il()}),Dm(),!_t&&(Fe||Ai)&&Gm(),Pn>=0&&Mm(),ct.length&&Bm(),Yt.draw({projection:pc(),model:Za(),view:il()})},u),us&&(Oi(),jo?jo=!1:t.publish("view",{view:_e.view,camera:_e,xScale:Mn,yScale:En})),yt=!1,Ai=!1,t.publish("draw"))}),hh=()=>{yt=!0},ph=()=>{ur=!1,Et=!0,fa(),window.removeEventListener("keyup",rf,!1),window.removeEventListener("blur",qa,!1),window.removeEventListener("mouseup",hs,!1),window.removeEventListener("mousemove",Qr,!1),u.removeEventListener("mousedown",ms,!1),u.removeEventListener("mouseenter",af,!1),u.removeEventListener("mouseleave",Gs,!1),u.removeEventListener("click",Zo,!1),u.removeEventListener("dblclick",Jo,!1),u.removeEventListener("wheel",of,!1),Bo?Bo.disconnect():(window.removeEventListener("resize",ao),window.removeEventListener("orientationchange",ao)),u=void 0,_e.dispose(),_e=void 0,Yt.destroy(),bn.destroy(),hn.destroy(),za.destroy(),Ua.destroy(),e.renderer||a.destroy(),t.publish("destroy"),t.clear()};return mh(),{get isSupported(){return a.isSupported},clear:An(fh),createTextureFromUrl:(s,D=Hv)=>p1(a.regl,s,D),deselect:Ko,destroy:ph,draw:ca,filter:Ac,get:$s,getScreenPosition:Km,hover:Qa,redraw:hh,refresh:a.refresh,reset:An(ch),select:ra,set:io,export:dh,subscribe:t.subscribe,unfilter:no,unsubscribe:t.unsubscribe,view:uh,zoomToLocation:Ms,zoomToArea:Ds,zoomToPoints:Di,zoomToOrigin:kc}};function md(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function k_(e){let t,n,r;e.length!==2?(t=md,n=(l,u)=>md(e(l),u),r=(l,u)=>e(l)-u):(t=e===md||e===eL?e:tL,n=e,r=e);function i(l,u,f=0,h=l.length){if(f<h){if(t(u,u)!==0)return h;do{const p=f+h>>>1;n(l[p],u)<0?f=p+1:h=p}while(f<h)}return f}function a(l,u,f=0,h=l.length){if(f<h){if(t(u,u)!==0)return h;do{const p=f+h>>>1;n(l[p],u)<=0?f=p+1:h=p}while(f<h)}return f}function o(l,u,f=0,h=l.length){const p=i(l,u,f,h-1);return p>f&&r(l[p-1],u)>-r(l[p],u)?p-1:p}return{left:i,center:o,right:a}}function tL(){return 0}function nL(e){return e===null?NaN:+e}const rL=k_(md),iL=rL.right;k_(nL).center;const aL=iL,oL=Math.sqrt(50),lL=Math.sqrt(10),sL=Math.sqrt(2);function Yd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=oL?10:a>=lL?5:a>=sL?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?Yd(e,t,n*2):[l,u,f]}function I0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Yd(t,e,n):Yd(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let f=0;f<l;++f)u[f]=(a-f)/-o;else for(let f=0;f<l;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(i+f)/-o;else for(let f=0;f<l;++f)u[f]=(i+f)*o;return u}function D0(e,t,n){return t=+t,e=+e,n=+n,Yd(e,t,n)[2]}function uL(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?D0(t,e,n):D0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function D_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nc(){}var Hu=.7,Qd=1/Hu,zl="\\s*([+-]?\\d+)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cL=/^#([0-9a-f]{3,8})$/,fL=new RegExp(`^rgb\\(${zl},${zl},${zl}\\)$`),dL=new RegExp(`^rgb\\(${bi},${bi},${bi}\\)$`),mL=new RegExp(`^rgba\\(${zl},${zl},${zl},${Wu}\\)$`),hL=new RegExp(`^rgba\\(${bi},${bi},${bi},${Wu}\\)$`),pL=new RegExp(`^hsl\\(${Wu},${bi},${bi}\\)$`),vL=new RegExp(`^hsla\\(${Wu},${bi},${bi},${Wu}\\)$`),E1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wv(nc,Xu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_1,formatHex:_1,formatHex8:gL,formatHsl:yL,formatRgb:S1,toString:S1});function _1(){return this.rgb().formatHex()}function gL(){return this.rgb().formatHex8()}function yL(){return M_(this).formatHsl()}function S1(){return this.rgb().formatRgb()}function Xu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?w1(t):n===3?new vr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fL.exec(e))?new vr(t[1],t[2],t[3],1):(t=dL.exec(e))?new vr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mL.exec(e))?Wf(t[1],t[2],t[3],t[4]):(t=hL.exec(e))?Wf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pL.exec(e))?A1(t[1],t[2]/100,t[3]/100,1):(t=vL.exec(e))?A1(t[1],t[2]/100,t[3]/100,t[4]):E1.hasOwnProperty(e)?w1(E1[e]):e==="transparent"?new vr(NaN,NaN,NaN,0):null}function w1(e){return new vr(e>>16&255,e>>8&255,e&255,1)}function Wf(e,t,n,r){return r<=0&&(e=t=n=NaN),new vr(e,t,n,r)}function xL(e){return e instanceof nc||(e=Xu(e)),e?(e=e.rgb(),new vr(e.r,e.g,e.b,e.opacity)):new vr}function M0(e,t,n,r){return arguments.length===1?xL(e):new vr(e,t,n,r??1)}function vr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wv(vr,M0,D_(nc,{brighter(e){return e=e==null?Qd:Math.pow(Qd,e),new vr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new vr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vr(Co(this.r),Co(this.g),Co(this.b),Kd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T1,formatHex:T1,formatHex8:EL,formatRgb:b1,toString:b1}));function T1(){return`#${To(this.r)}${To(this.g)}${To(this.b)}`}function EL(){return`#${To(this.r)}${To(this.g)}${To(this.b)}${To((isNaN(this.opacity)?1:this.opacity)*255)}`}function b1(){const e=Kd(this.opacity);return`${e===1?"rgb(":"rgba("}${Co(this.r)}, ${Co(this.g)}, ${Co(this.b)}${e===1?")":`, ${e})`}`}function Kd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Co(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function To(e){return e=Co(e),(e<16?"0":"")+e.toString(16)}function A1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ni(e,t,n,r)}function M_(e){if(e instanceof ni)return new ni(e.h,e.s,e.l,e.opacity);if(e instanceof nc||(e=Xu(e)),!e)return new ni;if(e instanceof ni)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new ni(o,l,u,e.opacity)}function _L(e,t,n,r){return arguments.length===1?M_(e):new ni(e,t,n,r??1)}function ni(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wv(ni,_L,D_(nc,{brighter(e){return e=e==null?Qd:Math.pow(Qd,e),new ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new vr(Op(e>=240?e-240:e+120,i,r),Op(e,i,r),Op(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ni(C1(this.h),Xf(this.s),Xf(this.l),Kd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kd(this.opacity);return`${e===1?"hsl(":"hsla("}${C1(this.h)}, ${Xf(this.s)*100}%, ${Xf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function C1(e){return e=(e||0)%360,e<0?e+360:e}function Xf(e){return Math.max(0,Math.min(1,e||0))}function Op(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xv=e=>()=>e;function SL(e,t){return function(n){return e+n*t}}function wL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function TL(e){return(e=+e)==1?F_:function(t,n){return n-t?wL(t,n,e):Xv(isNaN(t)?n:t)}}function F_(e,t){var n=t-e;return n?SL(e,n):Xv(isNaN(e)?t:e)}const L1=function e(t){var n=TL(t);function r(i,a){var o=n((i=M0(i)).r,(a=M0(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),f=F_(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=f(h),i+""}}return r.gamma=e,r}(1);function bL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function AL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function CL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Yv(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function LL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function qd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function RL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Yv(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var F0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pp=new RegExp(F0.source,"g");function OL(e){return function(){return e}}function PL(e){return function(t){return e(t)+""}}function NL(e,t){var n=F0.lastIndex=Pp.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=F0.exec(e))&&(i=Pp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:qd(r,i)})),n=Pp.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?PL(u[0].x):OL(t):(t=u.length,function(f){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(f);return l.join("")})}function Yv(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xv(t):(n==="number"?qd:n==="string"?(r=Xu(t))?(t=r,L1):NL:t instanceof Xu?L1:t instanceof Date?LL:AL(t)?bL:Array.isArray(t)?CL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?RL:qd)(e,t)}function kL(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function IL(e){return function(){return e}}function DL(e){return+e}var R1=[0,1];function Dl(e){return e}function j0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:IL(isNaN(t)?NaN:.5)}function ML(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function FL(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=j0(i,r),a=n(o,a)):(r=j0(r,i),a=n(a,o)),function(l){return a(r(l))}}function jL(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=j0(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=aL(e,l,1,r)-1;return a[u](i[u](l))}}function j_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B_(){var e=R1,t=R1,n=Yv,r,i,a,o=Dl,l,u,f;function h(){var d=Math.min(e.length,t.length);return o!==Dl&&(o=ML(e[0],e[d-1])),l=d>2?jL:FL,u=f=null,p}function p(d){return d==null||isNaN(d=+d)?a:(u||(u=l(e.map(r),t,n)))(r(o(d)))}return p.invert=function(d){return o(i((f||(f=l(t,e.map(r),qd)))(d)))},p.domain=function(d){return arguments.length?(e=Array.from(d,DL),h()):e.slice()},p.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},p.rangeRound=function(d){return t=Array.from(d),n=kL,h()},p.clamp=function(d){return arguments.length?(o=d?!0:Dl,h()):o!==Dl},p.interpolate=function(d){return arguments.length?(n=d,h()):n},p.unknown=function(d){return arguments.length?(a=d,p):a},function(d,T){return r=d,i=T,h()}}function BL(){return B_()(Dl,Dl)}function $L(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ql(e){return e=Zd(Math.abs(e)),e?e[1]:NaN}function GL(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function zL(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var UL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yu(e){if(!(t=UL.exec(e)))throw new Error("invalid format: "+e);var t;return new Qv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Yu.prototype=Qv.prototype;function Qv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VL(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $_;function HL(e,t){var n=Zd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-($_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zd(e,Math.max(0,t+a-1))[0]}function O1(e,t){var n=Zd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const P1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$L,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>O1(e*100,t),r:O1,s:HL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function N1(e){return e}var k1=Array.prototype.map,I1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function WL(e){var t=e.grouping===void 0||e.thousands===void 0?N1:GL(k1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?N1:zL(k1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(p){p=Yu(p);var d=p.fill,T=p.align,x=p.sign,R=p.symbol,I=p.zero,g=p.width,w=p.comma,C=p.precision,H=p.trim,q=p.type;q==="n"?(w=!0,q="g"):P1[q]||(C===void 0&&(C=12),H=!0,q="g"),(I||d==="0"&&T==="=")&&(I=!0,d="0",T="=");var le=R==="$"?n:R==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",he=R==="$"?r:/[%p]/.test(q)?o:"",ae=P1[q],it=/[defgprs%]/.test(q);C=C===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function Fe(Me){var qe=le,Xe=he,Qe,Nt,ut;if(q==="c")Xe=ae(Me)+Xe,Me="";else{Me=+Me;var ht=Me<0||1/Me<0;if(Me=isNaN(Me)?u:ae(Math.abs(Me),C),H&&(Me=VL(Me)),ht&&+Me==0&&x!=="+"&&(ht=!1),qe=(ht?x==="("?x:l:x==="-"||x==="("?"":x)+qe,Xe=(q==="s"?I1[8+$_/3]:"")+Xe+(ht&&x==="("?")":""),it){for(Qe=-1,Nt=Me.length;++Qe<Nt;)if(ut=Me.charCodeAt(Qe),48>ut||ut>57){Xe=(ut===46?i+Me.slice(Qe+1):Me.slice(Qe))+Xe,Me=Me.slice(0,Qe);break}}}w&&!I&&(Me=t(Me,1/0));var pe=qe.length+Me.length+Xe.length,We=pe<g?new Array(g-pe+1).join(d):"";switch(w&&I&&(Me=t(We+Me,We.length?g-Xe.length:1/0),We=""),T){case"<":Me=qe+Me+Xe+We;break;case"=":Me=qe+We+Me+Xe;break;case"^":Me=We.slice(0,pe=We.length>>1)+qe+Me+Xe+We.slice(pe);break;default:Me=We+qe+Me+Xe;break}return a(Me)}return Fe.toString=function(){return p+""},Fe}function h(p,d){var T=f((p=Yu(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(ql(d)/3)))*3,R=Math.pow(10,-x),I=I1[8+x/3];return function(g){return T(R*g)+I}}return{format:f,formatPrefix:h}}var Yf,Kv,G_;XL({thousands:",",grouping:[3],currency:["$",""]});function XL(e){return Yf=WL(e),Kv=Yf.format,G_=Yf.formatPrefix,Yf}function YL(e){return Math.max(0,-ql(Math.abs(e)))}function QL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ql(t)/3)))*3-ql(Math.abs(e)))}function KL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ql(t)-ql(e))+1}function qL(e,t,n,r){var i=uL(e,t,n),a;switch(r=Yu(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=QL(i,o))&&(r.precision=a),G_(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=KL(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=YL(i))&&(r.precision=a-(r.type==="%")*2);break}}return Kv(r)}function ZL(e){var t=e.domain;return e.ticks=function(n){var r=t();return I0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return qL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,f,h=10;for(l<o&&(f=o,o=l,l=f,f=i,i=a,a=f);h-- >0;){if(f=D0(o,l,n),f===u)return r[i]=o,r[a]=l,t(r);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function Qu(){var e=BL();return e.copy=function(){return j_(e,Qu())},I_.apply(e,arguments),ZL(e)}function JL(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function D1(e){return Math.log(e)}function M1(e){return Math.exp(e)}function eR(e){return-Math.log(-e)}function tR(e){return-Math.exp(-e)}function nR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function rR(e){return e===10?nR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function iR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function F1(e){return(t,n)=>-e(-t,n)}function aR(e){const t=e(D1,M1),n=t.domain;let r=10,i,a;function o(){return i=iR(r),a=rR(r),n()[0]<0?(i=F1(i),a=F1(a),e(eR,tR)):e(D1,M1),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],h=u[u.length-1];const p=h<f;p&&([f,h]=[h,f]);let d=i(f),T=i(h),x,R;const I=l==null?10:+l;let g=[];if(!(r%1)&&T-d<I){if(d=Math.floor(d),T=Math.ceil(T),f>0){for(;d<=T;++d)for(x=1;x<r;++x)if(R=d<0?x/a(-d):x*a(d),!(R<f)){if(R>h)break;g.push(R)}}else for(;d<=T;++d)for(x=r-1;x>=1;--x)if(R=d>0?x/a(-d):x*a(d),!(R<f)){if(R>h)break;g.push(R)}g.length*2<I&&(g=I0(f,h,I))}else g=I0(d,T,Math.min(T-d,I)).map(a);return p?g.reverse():g},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Yu(u)).precision==null&&(u.trim=!0),u=Kv(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return h=>{let p=h/a(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=f?u(h):""}},t.nice=()=>n(JL(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function qv(){const e=aR(B_()).domain([1,10]);return e.copy=()=>j_(e,qv()).base(e.base()),I_.apply(e,arguments),e}const oR="_scatter_10z4g_2",lR={scatter:oR};Zv.propTypes={points:Ke.array.isRequired,width:Ke.number.isRequired,height:Ke.number.isRequired,onScatter:Ke.func,onView:Ke.func,onSelect:Ke.func,onHover:Ke.func};const sR=e=>qv().domain([100,1e6]).range([6,1]).clamp(!0)(e),uR=e=>qv().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function Zv({points:e,width:t,height:n,onScatter:r,onView:i,onSelect:a,onHover:o}){const l=$.useRef(),u=$.useRef([-1,1]),f=$.useRef([-1,1]),h=Qu().domain(u.current),p=Qu().domain(f.current);return $.useEffect(()=>{const d=sR(e.length),T=uR(e.length);console.log("point size",d,T);const x=J2({canvas:l.current,width:t,height:n,pointSize:d,opacity:T,pointColor:[250/255,128/255,114/255,1],pointColorHover:[.1,.1,.1,.5],xScale:h,yScale:p});return x.draw(e),i&&i(h,p),x.subscribe("view",({camera:R,view:I,xScale:g,yScale:w})=>{u.current=g.domain(),f.current=w.domain(),i&&i(u.current,f.current)}),x.subscribe("select",({points:R})=>{a&&a(R)}),x.subscribe("deselect",()=>{a&&a([])}),x.subscribe("pointOver",R=>{o&&o(R)}),x.subscribe("pointOut",()=>{o&&o(null)}),r&&r(x),()=>{x.destroy()}},[e]),O.jsx("canvas",{className:lR.scatter,ref:l})}const cu=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:a,yDomain:o,width:l,height:u})=>{const f=$.useRef();return $.useEffect(()=>{if(a&&o){const h=Qu().domain(a).range([0,l]),p=Qu().domain(o).range([u,0]),d=I=>I/(.1+a[1]-a[0]),x=f.current.getContext("2d");x.clearRect(0,0,l,u),x.fillStyle=t,x.strokeStyle=n,x.font=`${d(r)}px monospace`,x.globalAlpha=.75;let R=d(r);if(!e.length)return;e.map(I=>{t&&x.fillRect(h(I[0])-R/2,p(I[1])-R/2,R,R),n&&x.strokeRect(h(I[0])-R/2,p(I[1])-R/2,R,R),i&&x.fillText(i,h(I[0])-R/3.2,p(I[1])+R/3.2)})}},[e,t,n,r,a,o,l,u]),O.jsx("canvas",{className:"annotation-plot",ref:f,width:l,height:u})};Ke.object.isRequired,Ke.array.isRequired,Ke.object,Ke.func,Ke.func;const vo=500,go=500;function cR(){var sr;const e="https://api.latentscope.com/api",[t,n]=$.useState(null),{dataset:r,scope:i}=l_();$.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then(ue=>ue.json()).then(ue=>{console.log("dataset",ue),n(ue)})},[r,n]);const[a,o]=$.useState(null);$.useEffect(()=>{fetch(`${e}/datasets/${r}/scopes/${i}`).then(ue=>ue.json()).then(ue=>{console.log("scope",ue),o(ue)})},[r,i,o]);const[l,u]=$.useState(null),[f,h]=$.useState(null),[p,d]=$.useState([]),[T,x]=$.useState(l);$.useEffect(()=>{a&&(u(a.embeddings),x(a.embeddings),fetch(`${e}/datasets/${r}/umaps/${a.umap}`).then(ue=>ue.json()).then(ue=>{console.log("umap",ue),h(ue)}),fetch(`${e}/datasets/${r}/clusters/${a.cluster}/labels/${a.cluster_labels||"default"}`).then(ue=>ue.json()).then(ue=>{console.log("umap",ue),d(ue)}))},[r,a,h,d,u,x]);const[R,I]=$.useState([]);$.useEffect(()=>{fetch(`${e}/datasets/${r}/embeddings`).then(ue=>ue.json()).then(ue=>{I(ue)})},[r,I]);const g=ue=>{console.log("selected",ue),x(ue)},[w,C]=$.useState([]),[H,q]=$.useState(!1);$.useEffect(()=>{f&&fetch(`${e}/datasets/${t.id}/umaps/${f.name}/points`).then(ue=>ue.json()).then(ue=>{console.log("umap points",ue),C(ue.map(At=>[At.x,At.y]))})},[t,f]);const le=$.useCallback((ue,At,Kt=[])=>{fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ue)}`).then(Gn=>Gn.json()).then(Gn=>{if(!t)return;t.text_column;let Er=Gn.map((oi,Mr)=>({index:ue[Mr],...oi}));Er.sort((oi,Mr)=>Mr.score-oi.score),At(Er)})},[t,r]),[he,ae]=$.useState({});$.useEffect(()=>{fetch(`${e}/tags?dataset=${r}`).then(ue=>ue.json()).then(ue=>ae(ue))},[r]);const it=$.useMemo(()=>{const ue=[];for(const At in he)ue.push(At);return ue},[he]),[Fe,Me]=$.useState(it[0]),[qe,Xe]=$.useState([]);$.useEffect(()=>{he[Fe]?le(he[Fe],Xe):Xe([])},[t,Fe,he]);const[Qe,Nt]=$.useState([]);$.useEffect(()=>{if(he[Fe]){const ue=he[Fe].map(At=>w[At]);Nt(ue)}else Nt([]),st&&st.config&&(st==null||st.zoomToOrigin({transition:!0,transitionDuration:1500}))},[he,Fe,w]);const[ut,ht]=$.useState([]),[pe,We]=$.useState([]),Ne=$.useCallback(ue=>{fetch(`${e}/search/nn?dataset=${r}&query=${ue}&model=${T}`).then(At=>At.json()).then(At=>{We(At.distances),ht(At.indices),console.log("SEARCH RESULTS",At),st==null||st.zoomToPoints(At.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[T]),[Se,Ge]=$.useState([]);$.useEffect(()=>{le(ut,Ge,pe)},[ut,Ge,pe]);const[lt,xt]=$.useState([]);$.useEffect(()=>{const ue=ut.map(At=>w[At]);xt(ue)},[ut,w]);const[st,Qt]=$.useState({}),[Ht,Dt]=$.useState([-1,1]),[en,Xn]=$.useState([-1,1]),Dn=$.useCallback((ue,At)=>{Dt(ue),Xn(At)}),[Xt,dn]=$.useState([]),[pt,St]=$.useState([]);$.useEffect(()=>{le(Xt,St)},[Xt,St]);const It=$.useCallback(ue=>{dn(ue),Ot(0)}),[vt,Rt]=$.useState(null),[zt,an]=$.useState([]);$.useEffect(()=>{vt!=null?le([vt],an):an([])},[vt,an]);const[$n,Dr]=$.useState([]);$.useEffect(()=>{vt!=null?Dr([w[vt]]):Dr([])},[vt,w]);const y=[{id:0,name:"Selected"},{id:1,name:"Search"},{id:2,name:"Clusters"},{id:3,name:"Tags"}],[Et,Ot]=$.useState(2);$.useState([]);const[_e,Yt]=$.useState(null),[_t,je]=$.useState(null),[Lt,jt]=$.useState([]);$.useEffect(()=>{_e?fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(_e.indices)}`).then(ue=>ue.json()).then(ue=>{const At=t.text_column;let Kt=ue.map((Gn,Er)=>({index:_e.indices[Er],text:Gn[At],score:Gn.score,date:Gn.date}));Kt.sort((Gn,Er)=>Er.score-Gn.score),jt(Kt)}).catch(ue=>console.log(ue)):jt([])},[r,_e]);const[ct,tn]=$.useState([]);$.useEffect(()=>{if(_e){const ue=_e.indices.map(At=>w[At]);tn(ue)}else tn([]),st&&st.config&&(st==null||st.zoomToOrigin({transition:!0,transitionDuration:1500}))},[_e,w]);const[on,Pt]=$.useState([]);$.useEffect(()=>{if(_t){const ue=_t.indices.map(At=>w[At]);Pt(ue)}else Pt([])},[_t,w]),$.useCallback(ue=>{Yt(ue),Ot(2),st==null||st.zoomToPoints(ue.indices,{transition:!0,padding:.5,transitionDuration:1500})}),$.useCallback(ue=>{je(ue)});const ln=$.useCallback(ue=>{st==null||st.zoomToPoints([ue],{transition:!0,padding:.9,transitionDuration:1500})}),sn=$.useCallback(ue=>{Rt(ue)});return t?O.jsxs("div",{className:"dataset--explore",children:[O.jsxs("div",{className:"column",children:[O.jsxs("div",{className:"first-row summary",children:[O.jsxs("h3",{children:[" ",r,"  [",a==null?void 0:a.name,"]",O.jsx(Vu,{to:`/datasets/${t==null?void 0:t.id}/setup/${a==null?void 0:a.name}`,children:"Configure"})]}),t==null?void 0:t.length," rows",O.jsx("br",{}),"Embedding model:",O.jsx("br",{})," ",l,O.jsx("br",{})]}),O.jsxs("div",{className:"second-row",children:[O.jsx("div",{className:"umap-container",children:O.jsxs("div",{className:"scatters",style:{width:vo,height:go},children:[O.jsx(Zv,{points:w,loading:H,width:vo,height:go,onScatter:Qt,onView:Dn,onSelect:It,onHover:sn}),O.jsx(cu,{points:lt,fill:"black",size:"8",xDomain:Ht,yDomain:en,width:vo,height:go}),O.jsx(cu,{points:ct,fill:"darkred",size:"8",xDomain:Ht,yDomain:en,width:vo,height:go}),O.jsx(cu,{points:on,fill:"red",size:"12",xDomain:Ht,yDomain:en,width:vo,height:go}),O.jsx(cu,{points:Qe,symbol:Fe,size:"20",xDomain:Ht,yDomain:en,width:vo,height:go}),O.jsx(cu,{points:$n,stroke:"black",fill:"orange",size:"16",xDomain:Ht,yDomain:en,width:vo,height:go})]})}),O.jsx("div",{className:"hovered-point",children:zt[0]&&Object.keys(zt[0]).map(ue=>O.jsxs("span",{children:[O.jsxs("span",{className:"key",children:[ue,":"]}),O.jsx("span",{className:"value",children:zt[0][ue]})]},ue))})]})]}),O.jsx("div",{className:"column",children:O.jsxs("div",{className:"second-row tab-tables",children:[O.jsx("div",{className:"tab-header",children:y.map(ue=>O.jsx("button",{onClick:()=>Ot(ue.id),className:ue.id===Et?"tab-active":"tab-inactive",children:ue.name},ue.id))}),Et===0?O.jsxs("div",{className:"tab-content tab-selected",children:[O.jsxs("span",{children:["Selected: ",pt.length,pt.length>0?O.jsx("button",{className:"deselect",onClick:()=>{dn([]),st==null||st.select([]),st==null||st.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),pt.length>0?O.jsx(wo,{data:pt,tagset:he,datasetId:r,maxRows:150,onTagset:ue=>ae(ue),onHover:sn,onClick:ln}):null]}):null,Et===1?O.jsxs("div",{className:"tab-content tab-neighbors",children:[O.jsx("div",{className:"search-box",children:O.jsxs("form",{onSubmit:ue=>{ue.preventDefault(),Ne(ue.target.elements.searchBox.value),Ot(1)},children:[O.jsx("input",{type:"text",id:"searchBox"}),O.jsx("button",{type:"submit",children:"Similarity Search"}),O.jsx("br",{}),O.jsx("label",{htmlFor:"embeddingModel"}),O.jsx("select",{id:"embeddingModel",onChange:ue=>g(ue.target.value),value:T,children:R.map((ue,At)=>O.jsx("option",{value:ue,children:ue},At))})]})}),O.jsxs("span",{children:[ut.length?O.jsxs("span",{children:["Nearest Neighbors: ",ut.length," (capped at 150) "]}):null,ut.length>0?O.jsx("button",{className:"deselect",onClick:()=>{ht([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),Se.length>0?O.jsx(wo,{data:Se,tagset:he,datasetId:r,onTagset:ue=>ae(ue),onHover:sn,onClick:ln}):null]}):null,Et===2?O.jsxs("div",{className:"tab-content tab-cluster",children:[O.jsx("div",{className:"clusters-select",children:O.jsxs("select",{onChange:ue=>{const At=p.find(Kt=>Kt.label===ue.target.value);At&&Yt(At)},value:_e==null?void 0:_e.label,children:[O.jsx("option",{value:"",children:"Select a cluster"}),p.map((ue,At)=>O.jsx("option",{value:ue.label,children:ue.label},At))]})}),O.jsx("div",{className:"cluster-selected",children:O.jsxs("span",{children:[_e==null?void 0:_e.indices.length," ",_e!=null&&_e.indices.length?"Rows":"",_e?O.jsx("button",{className:"deselect",onClick:()=>{console.log("SLIDE",_e),Yt(null)},children:"X"}):null]})}),O.jsx("div",{className:"cluster-table",children:Lt.length?O.jsx(wo,{data:Lt,tagset:he,datasetId:r,onTagset:ue=>ae(ue),onHover:sn,onClick:ln}):null})]}):null,Et===3?O.jsxs("div",{className:"tab-content tab-tag",children:[O.jsxs("div",{className:"tags-box",children:[O.jsxs("div",{className:"tags-select",children:["Tags: ",it.map(ue=>O.jsxs("button",{className:"dataset--tag-link",onClick:()=>{Me(ue),Ot(3),st==null||st.zoomToPoints(he[ue],{transition:!0,padding:.2,transitionDuration:1500})},children:[ue,"(",he[ue].length,")"]},ue))]}),O.jsx("div",{className:"new-tag",children:O.jsxs("form",{onSubmit:ue=>{ue.preventDefault();const At=ue.target.elements.newTag.value;fetch(`${e}/tags/new?dataset=${r}&tag=${At}`).then(Kt=>Kt.json()).then(Kt=>{console.log("new tag",Kt),ae(Kt)})},children:[O.jsx("input",{type:"text",id:"newTag"}),O.jsx("button",{type:"submit",children:"New Tag"})]})})]}),O.jsxs("span",{children:[Fe," ",(sr=he[Fe])==null?void 0:sr.length,Fe?O.jsx("button",{className:"deselect",onClick:()=>{Me(null)},children:"X"}):null]}),qe.length?O.jsx(wo,{data:qe,tagset:he,datasetId:r,onTagset:ue=>ae(ue),onHover:sn,onClick:ln}):null]}):null]})})]}):O.jsx("div",{children:"Loading..."})}const Np="https://api.latentscope.com/api";z_.propTypes={dataset:Ke.shape({id:Ke.string.isRequired}).isRequired,textColumn:Ke.string.isRequired,embedding:Ke.string,umaps:Ke.array,clusters:Ke.array,onNew:Ke.func.isRequired,onChange:Ke.func.isRequired};function z_({dataset:e,textColumn:t,embedding:n,umaps:r,clusters:i,onNew:a,onChange:o}){const[l,u]=$.useState([]),[f,h]=$.useState(null),{startJob:p}=Kl(e,h,`${Np}/jobs/embed`),[d,T]=$.useState([]);$.useEffect(()=>{fetch(`${Np}/embedding_models`).then(I=>I.json()).then(T).catch(console.error)},[]);const x=(I,g)=>{fetch(`${Np}/datasets/${I}/embeddings`).then(w=>w.json()).then(w=>{g(w)})};$.useEffect(()=>{x(e==null?void 0:e.id,I=>{u(I),a(I)})},[e,u,a]),$.useEffect(()=>{(f==null?void 0:f.status)==="completed"&&x(e.id,I=>{u(I),a(I)})},[f,e,u,a]);const R=I=>{I.preventDefault();const g=I.target,w=new FormData(g),C=d.find(q=>q.id===w.get("modelName"));let H={text_column:t,provider:C.provider,model:C.id};p(H)};return O.jsxs("div",{children:[O.jsxs("div",{children:["Embedding on column: ",O.jsx("b",{children:t})]}),O.jsxs("form",{onSubmit:R,children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"modelName",children:"Model:"}),O.jsx("select",{id:"modelName",name:"modelName",disabled:!!f,children:d.filter(I=>(l==null?void 0:l.indexOf(I.id))<0).map((I,g)=>O.jsxs("option",{value:I.id,children:[I.provider,": ",I.name]},g))})]}),O.jsx("button",{type:"submit",disabled:!!f,children:"New Embedding"})]}),O.jsx(ns,{job:f,clearJob:()=>{h(null)}}),O.jsx("div",{className:"embeddings-list",children:l.map((I,g)=>O.jsxs("div",{children:[O.jsx("input",{type:"radio",id:`embedding${g}`,name:"embedding",value:I,checked:I===n,onChange:()=>o(I)}),O.jsx("label",{htmlFor:`embedding${g}`,children:O.jsxs("span",{children:[I," [",r.filter(w=>w.embeddings==I).length," umaps, ",i.filter(w=>r.filter(C=>C.embeddings==I).map(C=>C.name).indexOf(w.umap_name)>=0).length," clusters ]"]})})]},g))})]})}const j1={"umaps-list":"_umaps-list_p5rgt_1","umaps-item":"_umaps-item_p5rgt_9"},Qf="https://api.latentscope.com/api";U_.propTypes={dataset:Ke.shape({id:Ke.string.isRequired}).isRequired,umap:Ke.object,embedding:Ke.string,clusters:Ke.array.isRequired,onNew:Ke.func.isRequired,onChange:Ke.func.isRequired};function U_({dataset:e,umap:t,embedding:n,clusters:r,onNew:i,onChange:a}){const[o,l]=$.useState(null),{startJob:u}=Kl(e,l,`${Qf}/jobs/umap`),{startJob:f}=Kl(e,l,`${Qf}/jobs/delete/umap`),[h,p]=$.useState([]);function d(x,R){fetch(`${Qf}/datasets/${x}/umaps`).then(I=>I.json()).then(I=>{const g=I.map(w=>({...w,url:`${Qf}/files/${x}/umaps/${w.name}.png`}));R(g.reverse())})}$.useEffect(()=>{d(e.id,x=>{p(x),i(x)})},[e,i]),$.useEffect(()=>{(o==null?void 0:o.status)=="completed"&&d(e.id,x=>{p(x),i(x)})},[o,e,p,i]);const T=$.useCallback(x=>{x.preventDefault();const R=x.target,I=new FormData(R),g=I.get("neighbors"),w=I.get("min_dist");u({embeddings:n,neighbors:g,min_dist:w})},[u,n]);return O.jsxs("div",{className:"dataset--umaps-new",children:[O.jsxs("form",{onSubmit:T,children:[O.jsxs("label",{children:["Neighbors:",O.jsx("input",{type:"number",name:"neighbors",defaultValue:"25",disabled:!!o})]}),O.jsxs("label",{children:["Min Dist:",O.jsx("input",{type:"text",name:"min_dist",defaultValue:"0.1",disabled:!!o})]}),O.jsx("button",{type:"submit",disabled:!!o,children:"New UMAP"})]}),O.jsx(ns,{job:o,clearJob:()=>l(null)}),O.jsx("div",{className:j1["umaps-list"],children:h.filter(x=>x.embeddings==n).map((x,R)=>O.jsxs("div",{className:j1["umaps-item"],children:[O.jsx("input",{type:"radio",id:`umap${R}`,name:"umap",value:x,checked:x.name===(t==null?void 0:t.name),onChange:()=>a(x)}),O.jsxs("label",{htmlFor:`umap${R}`,children:[x.name,O.jsx("br",{}),"Neighbors: ",x.neighbors,O.jsx("br",{}),"Min Dist: ",x.min_dist,O.jsx("br",{}),O.jsx("img",{src:x.url,alt:x.name}),O.jsx("br",{}),r.filter(I=>I.umap_name==x.name).length," clusters",O.jsx("button",{onClick:()=>f({umap_name:x.name}),disabled:o&&o.status!=="completed",children:"🗑️ umap"})]})]},R))})]})}const Kf="https://api.latentscope.com/api";V_.propTypes={dataset:Ke.shape({id:Ke.string.isRequired}).isRequired,cluster:Ke.object,umap:Ke.object,clusters:Ke.array,onNew:Ke.func.isRequired,onChange:Ke.func.isRequired};function V_({dataset:e,cluster:t,umap:n,onNew:r,onChange:i}){const[a,o]=$.useState(null),{startJob:l}=Kl(e,o,`${Kf}/jobs/cluster`),{startJob:u}=Kl(e,o,`${Kf}/jobs/delete/cluster`),[f,h]=$.useState([]);function p(T,x){fetch(`${Kf}/datasets/${T}/clusters`).then(R=>R.json()).then(R=>{const I=R.map(g=>({...g,url:`${Kf}/files/${T}/clusters/${g.cluster_name}.png`}));x(I.reverse())})}$.useEffect(()=>{p(e.id,T=>{h(T),r(T)})},[e,r]),$.useEffect(()=>{(a==null?void 0:a.status)=="completed"&&p(e.id,T=>{h(T),r(T)})},[a,e,h,r]);const d=$.useCallback(T=>{T.preventDefault();const x=T.target,R=new FormData(x),I=R.get("samples"),g=R.get("min_samples");l({umap_name:n.name,samples:I,min_samples:g})},[l,n]);return O.jsxs("div",{className:"dataset--clusters-new",children:[O.jsxs("form",{onSubmit:T=>d(T,n),children:[O.jsxs("label",{children:["Samples:",O.jsx("input",{type:"number",name:"samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("br",{}),O.jsxs("label",{children:["Min Samples:",O.jsx("input",{type:"number",name:"min_samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("button",{type:"submit",disabled:!!a||!n,children:"New Clusters"})]}),O.jsx(ns,{job:a,clearJob:()=>o(null)}),O.jsx("div",{className:"dataset--setup-clusters-list",children:n&&f.filter(T=>T.umap_name==n.name).map((T,x)=>O.jsxs("div",{className:"dataset--setup-clusters-item",children:[O.jsx("input",{type:"radio",id:`cluster${x}`,name:"cluster",value:t,checked:T.cluster_name===(t==null?void 0:t.cluster_name),onChange:()=>i(T)}),O.jsxs("label",{htmlFor:`cluster${x}`,children:[T.cluster_name,O.jsx("br",{}),"Clusters: ",T.n_clusters,O.jsx("br",{}),"Noise points: ",T.n_noise,O.jsx("br",{}),"Samples: ",T.samples,O.jsx("br",{}),"Min Samples: ",T.min_samples,O.jsx("br",{}),O.jsx("img",{src:T.url,alt:T.name}),O.jsx("button",{onClick:()=>u({cluster_name:T.cluster_name}),children:"🗑️ cluster"})]})]},x))})]})}const qf="https://api.latentscope.com/api";H_.propTypes={dataset:Ke.shape({id:Ke.string.isRequired}).isRequired,cluster:Ke.object,selectedModel:Ke.string,onChange:Ke.func.isRequired};function H_({dataset:e,cluster:t,selectedModel:n,onChange:r}){const[i,a]=$.useState(null),{startJob:o}=Kl(e,a,`${qf}/jobs/cluster_label`),[l,u]=$.useState([]);$.useEffect(()=>{fetch(`${qf}/chat_models`).then(x=>x.json()).then(x=>{u(x)}).catch(x=>{console.log(x),u([])})},[]);const[f,h]=$.useState([]),[p,d]=$.useState([]);$.useEffect(()=>{if(e&&t){const x=n?`labels/${n}`:"labels";fetch(`${qf}/datasets/${e.id}/clusters/${t.cluster_name}/${x}`).then(R=>R.json()).then(R=>{d(R)}).catch(R=>{console.log(R),d([])})}else d([])},[n,d,e,t]),$.useEffect(()=>{console.log("cluster changed, set label models",t==null?void 0:t.cluster_name),t?fetch(`${qf}/datasets/${e.id}/clusters/${t.cluster_name}/labels_available`).then(x=>x.json()).then(x=>{console.log("cluster changed, set label models fetched",t.cluster_name,x),h(x)}).catch(x=>{console.log(x),h([])}):h([])},[e,t,i,h]);const T=$.useCallback(x=>{x.preventDefault();const R=x.target,I=new FormData(R),g=I.get("chatModel"),w=e.text_column,C=t==null?void 0:t.cluster_name,H=I.get("context");o({model:g,cluster:C,text_column:w,context:H})},[t,o]);return O.jsxs("div",{className:"dataset--setup-cluster-labels-content",children:[O.jsxs("div",{className:"dataset--slides-new",children:[O.jsxs("p",{children:["Automatically create labels for each cluster",t?` in ${t.cluster_name}`:""," using a chat model. "]}),O.jsxs("form",{onSubmit:T,children:[O.jsxs("label",{children:["Chat Models:",O.jsx("select",{id:"chatModel",name:"chatModel",disabled:!!i,children:l.filter(x=>(f==null?void 0:f.indexOf(x.id))<0).map((x,R)=>O.jsxs("option",{value:x.id,children:[x.provider," - ",x.name]},R))}),O.jsx("br",{}),O.jsx("textarea",{name:"context",disabled:!!i||!t})]}),O.jsx("button",{type:"submit",disabled:!!i||!t,children:"Auto Label"})]}),O.jsx(ns,{job:i,clearJob:()=>a(null)})]}),t?O.jsxs("div",{className:"dataset--setup-cluster-labels-list",children:[O.jsxs("label",{children:["View Labels:",O.jsxs("select",{name:"model",value:n,onChange:x=>r(x.target.value),children:[O.jsx("option",{value:"",children:"Default labels"}),f.map((x,R)=>O.jsx("option",{value:x,children:x},R))]})]}),O.jsx("div",{className:"dataset--setup-labels-list",children:O.jsx(wo,{data:p.map((x,R)=>({cluster:R,label:x.label,items:x.indices.length}))})})]}):null]})}const kp="https://api.latentscope.com/api";W_.propTypes={dataset:Ke.shape({id:Ke.string.isRequired}).isRequired,scope:Ke.object,umap:Ke.object,embedding:Ke.string,cluster:Ke.object,clusterLabelModel:Ke.string,onNew:Ke.func.isRequired,onChange:Ke.func.isRequired};function W_({dataset:e,scope:t,umap:n,embedding:r,cluster:i,clusterLabelModel:a,onNew:o,onChange:l}){const u=ym();$.useEffect(()=>{e&&fetch(`${kp}/datasets/${e.id}/scopes`).then(h=>h.json()).then(h=>{const p=h.sort((d,T)=>d.name.localeCompare(T.name));o(p)})},[e,o]);const f=$.useCallback(h=>{if(h.preventDefault(),!n||!i)return;const p=h.target,d=new FormData(p),T={embeddings:r,umap:n.name,cluster:i.cluster_name,cluster_labels:a,label:d.get("label"),description:d.get("description")},x=d.get("action");console.log("action",x),x=="save"&&(T.name=t.name),fetch(`${kp}/datasets/${e.id}/scopes/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}).then(R=>R.json()).then(R=>{const I=R;fetch(`${kp}/datasets/${e.id}/scopes`).then(g=>g.json()).then(g=>{o(g),l(g.find(w=>w.name==I.name))}),u(`/datasets/${e.id}/setup/${R.name}`)}).catch(R=>{console.error("Error saving scope:",R)})},[e,i,a,n,r,u,o,l]);return O.jsxs("div",{className:"setup-scope",children:[O.jsxs("div",{className:"dataset--setup-save-box-title",children:["Embedding: ",r,O.jsx("br",{}),"Labels: ",a||"Default"]}),O.jsxs("div",{className:"dataset--setup-save-box-boxes",children:[n?O.jsxs("div",{className:"box-item",children:[n.name,O.jsx("img",{src:n.url,alt:n.name})]}):O.jsx("div",{className:"empty-box"}),i?O.jsxs("div",{className:"box-item",children:[i.cluster_name,O.jsx("img",{src:i.url,alt:i.name})]}):O.jsx("div",{className:"empty-box"})]}),O.jsx("div",{className:"dataset--setup-save-box-nav",children:O.jsxs("form",{onSubmit:f,children:[O.jsxs("label",{children:["Label:",O.jsx("input",{type:"text",name:"label",defaultValue:t?t.label:""})]}),O.jsxs("label",{children:["Description:",O.jsx("input",{type:"text",name:"description",defaultValue:t?t.description:""})]}),O.jsx("input",{type:"hidden",name:"action",value:""}),t?O.jsxs("div",{className:"previous-scope",children:[O.jsx("h4",{children:"Previous Scope Settings"}),"Embedding: ",t.embeddings,O.jsx("br",{}),"Umap: ",t.umap,O.jsx("br",{}),"Cluster: ",t.cluster,O.jsx("br",{}),"Labels: ",t.cluster_labels||"Default",O.jsx("br",{})]}):null,t?O.jsxs("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="save"},children:["Overwrite ",t.name]}):null,O.jsx("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="new"},children:"New scope"})]})})]})}const fR="_stage_lm7gt_1",dR="_content_lm7gt_13",mR="_complete_lm7gt_17",hR="_active_lm7gt_28",Zf={stage:fR,content:dR,complete:mR,active:hR};function fu({active:e,complete:t,title:n,children:r}){return O.jsxs("div",{className:`${Zf.stage} ${e?Zf.active:""} ${t?Zf.complete:""}`,children:[O.jsx("h3",{children:n}),O.jsx("div",{className:Zf.content,children:r})]})}const pR="https://api.latentscope.com/api";X_.propTypes={dataset:Ke.object.isRequired,indices:Ke.array.isRequired,distances:Ke.array,maxRows:Ke.number,tagset:Ke.object,onHover:Ke.func,onClick:Ke.func,onTagset:Ke.func};function X_({dataset:e,indices:t,distances:n=[],maxRows:r,tagset:i,onHover:a,onClick:o,onTagset:l}){const[u,f]=$.useState([]),h=$.useCallback(p=>{e&&fetch(`${pR}/indexed?dataset=${e.id}&indices=${JSON.stringify(p)}`).then(d=>d.json()).then(d=>{let T=d.map((x,R)=>{let I={index:p[R],...x};return n&&n.length&&(I.distance=n[R]),I});f(T)})},[e,f,n]);return $.useEffect(()=>{t&&t.length&&h(t)},[t,h]),O.jsx("div",{children:O.jsx(wo,{data:u,tagset:i,datasetId:e==null?void 0:e.id,maxRows:r,onTagset:l,onHover:a,onClick:o})})}const vR="https://api.latentscope.com/api";Y_.propTypes={dataset:Ke.object.isRequired,umap:Ke.object,width:Ke.number.isRequired,height:Ke.number.isRequired,onScatter:Ke.func,onSelect:Ke.func};function Y_({dataset:e,umap:t,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l}){const[u,f]=$.useState([]);return $.useEffect(()=>{t?fetch(`${vR}/datasets/${e.id}/umaps/${t.name}/points`).then(h=>h.json()).then(h=>{f(h.map(p=>[p.x,p.y]))}):f([])},[e,t]),O.jsx("div",{style:{width:`${n}px`,height:`${r}px`},children:O.jsx(Zv,{points:u,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l})})}function B1(){const e="https://api.latentscope.com/api",[t,n]=$.useState(null),{dataset:r,scope:i}=l_();ym();const a=500,o=500;$.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then(Ge=>Ge.json()).then(Ge=>n(Ge))},[r]);const l=$.useMemo(()=>t?t.text_column||t.columns[0]:"",[t]),u=$.useCallback(Ge=>{const lt=Ge.target.value;console.log("setting column",lt),fetch(`${e}/datasets/${r}/meta/update?key=text_column&value=${lt}`).then(xt=>xt.json()).then(xt=>{n(xt)})},[r]),[f,h]=$.useState([]),[p,d]=$.useState(f[0]);$.useEffect(()=>{f!=null&&f.length&&!p&&d(f[0])},[f,p]);const[T,x]=$.useState([]),[R,I]=$.useState(null),[g,w]=$.useState(null);$.useEffect(()=>{if(T.length){const Ge=T.filter(xt=>xt.embeddings==p),lt=Ge.find(xt=>xt.name==g);I(g&&lt?lt:Ge[0])}},[g,T,p]);const[C,H]=$.useState([]),[q,le]=$.useState(null),[he,ae]=$.useState(null);$.useEffect(()=>{if(C.length&&R){const Ge=C.filter(xt=>xt.umap_name==R.name),lt=Ge.find(xt=>xt.cluster_name==he);le(he&&lt?lt:Ge[0])}else le(null)},[he,C,R]);const[it,Fe]=$.useState(null),[Me,qe]=$.useState([]),[Xe,Qe]=$.useState(null);$.useEffect(()=>{if(i&&(Me!=null&&Me.length)){const Ge=Me.find(lt=>lt.name==i);Ge&&(Qe(Ge),d(Ge.embeddings),w(Ge.umap),ae(Ge.cluster),Fe(Ge.cluster_labels))}else Qe(null)},[i,Me]);const[Nt,ut]=$.useState([]),ht=$.useCallback(Ge=>{ut(Ge)},[ut]),[pe,We]=$.useState({}),[Ne,Se]=$.useState(1);return $.useEffect(()=>{Se(p?R?q?it?Xe?6:5:4:3:2:1),console.log("sup",Xe,it)},[p,R,q,it,Xe]),t?O.jsxs("div",{className:"dataset--setup",children:[O.jsxs("div",{className:"dataset--setup-summary",children:[O.jsxs("div",{className:"dataset--setup-info",children:[O.jsx("h3",{children:r}),O.jsxs("div",{className:"dataset--setup-info-content",children:["[ ",t.length," rows ] Columns: ",t.columns.join(", "),O.jsxs("div",{className:"dataset--details-text-column",children:["Set Text Column:",O.jsx("select",{value:l,onChange:u,children:t.columns.map((Ge,lt)=>O.jsx("option",{value:Ge,children:Ge},lt))})]})]})]}),Xe?O.jsxs(Vu,{to:`/datasets/${t==null?void 0:t.id}/explore/${Xe==null?void 0:Xe.name}`,children:[" Explore ",Xe.label," (",Xe.name,")"]}):null]}),O.jsxs("div",{className:"dataset--setup-layout",children:[O.jsxs("div",{className:"dataset--setup-left-column",children:[O.jsx(fu,{active:Ne==1,complete:Ne>1,title:"1. Embeddings",children:O.jsx(z_,{dataset:t,textColumn:l,embedding:p,umaps:T,clusters:C,onNew:h,onChange:d})}),O.jsx(fu,{active:Ne==2,complete:Ne>2,title:"2. UMAP",children:O.jsx(U_,{dataset:t,umap:R,embedding:p,clusters:C,onNew:x,onChange:I})}),O.jsx(fu,{active:Ne==3,complete:Ne>3,title:"3. Clusters",children:O.jsx(V_,{dataset:t,cluster:q,umap:R,onNew:H,onChange:le})}),O.jsx(fu,{active:Ne==4,complete:Ne>4,title:"4. Auto-Label Clusters",children:O.jsx(H_,{dataset:t,cluster:q,selectedModel:it,onChange:Fe})}),O.jsx(fu,{active:Ne==5,complete:Ne>5,title:"5. Save Scope",children:O.jsx(W_,{dataset:t,scope:Xe,embedding:p,umap:R,cluster:q,clusterLabelModel:it,onNew:qe,onChange:Qe})})]}),O.jsxs("div",{className:"dataset--setup-right-column",children:[O.jsx("div",{className:"dataset--setup-umap",children:O.jsx(Y_,{dataset:t,umap:R,width:a,height:o,onScatter:We,onSelect:ht})}),O.jsxs("div",{className:"dataset--selected",children:[O.jsxs("span",{children:["Points Selected: ",Nt.length," ",Nt.length?null:"(Hold shift and drag an area of the map to select)",Nt.length>0?O.jsx("button",{className:"deselect",onClick:()=>{ut([]),pe==null||pe.select([]),pe==null||pe.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Nt.length>0?O.jsx("div",{className:"dataset--selected-table",children:O.jsx(X_,{dataset:t,indices:Nt,datasetId:r,maxRows:150})}):null]})]})]})]}):O.jsx("div",{children:"Loading..."})}const gR=()=>O.jsx("nav",{children:O.jsx("ul",{children:O.jsx("li",{children:O.jsx(Vu,{to:"/",children:"Latent Scope"})})})});var yR={VITE_API_URL:"https://api.latentscope.com/api",BASE_URL:"/latent-scope/",MODE:"read_only",DEV:!1,PROD:!0,SSR:!1};function xR(){const e=yR;return console.log("ENV",e),O.jsxs(Kb,{basename:e.BASE_NAME,children:[O.jsx(gR,{}),O.jsx("div",{className:"page",children:O.jsxs(Vb,{children:[O.jsx(vu,{path:"/",element:O.jsx(oA,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup/:scope",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/explore/:scope",element:O.jsx(cR,{})})]})})]})}Ip.createRoot(document.getElementById("root")).render(O.jsx(Q1.StrictMode,{children:O.jsx(xR,{})}));
